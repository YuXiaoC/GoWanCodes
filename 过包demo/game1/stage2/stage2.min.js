var M17=function(){function n(){}return n.FK35=function(t){this.init=t.daily_init,this.dailyexp=t.daily_dailyexp,this.dailylevel=t.daily_dailylevel,this.month=t.daily_month,this.day=t.daily_day,this.dayReward=this.FI30(),this.monthReward=this.FG5()},n.gIV=function(t){var e="未配置";return n.init&&n.init[t]&&(e=n.init[t].value),e},n.FC20=function(){return parseInt(n.gIV("unlockLevel"))<=App.CM.gtM(O6.B82).avatarInfo.l},n.FL66=function(){var t=0;return I6.init?t=parseInt(n.gIV("unlockLevel")):t},n.FC91=function(){var t=[],e=P7.copyTab(n.dailyexp);for(var i in e){var s=e[i];if(0==s.time){var o=TG56.FA17(s.type);(e[i].hasfinish=o)>=s.completelimit?e[i].state=1:e[i].state=0,e[i].openState=n.FC92(s.type),t.push(e[i])}}return t.sort(function(t,e){return t.state==e.state?t.openState!=e.openState?e.openState-t.openState:e.mark-t.mark:t.state-e.state}),t},n.FA90=function(){var t=[],e=P7.copyTab(n.dailyexp);for(var i in e){var s=e[i];if(1==s.time){var o=TG56.FA17(s.type);e[i].hasfinish=o;var r=TG56.FB64(s.type);e[i].isOpen=1<=r.openState,e[i].week=r.time,e[i].openTime=r.openTime,e[i].overTime=r.overTime,o>=s.completelimit?e[i].state=TE79.HAVE:1==r.openState?e[i].state=TE79.CAN:2==r.openState?e[i].state=TE79.WAIT:3==r.openState?e[i].state=TE79.NO:4==r.openState&&(e[i].state=TE79.OVER),t.push(e[i])}}return t.sort(function(t,e){return t.state||e.state?t.state?e.state?t.state-e.state:1:-1:t.type-e.type}),t},n.FD82=function(){var t={},e=P7.copyTab(n.dailyexp);for(var i in e){var s=e[i];if(1==s.time){var o=TG56.FA17(s.type);e[i].hasfinish=o;var r=TG56.FB64(s.type);e[i].isOpen=1==r.openState,e[i].week=r.time,e[i].openTime=r.openTime,e[i].overTime=r.overTime,o>=s.completelimit?e[i].state=TE79.HAVE:1==r.openState?e[i].state=TE79.CAN:2==r.openState?e[i].state=TE79.WAIT:3==r.openState?e[i].state=TE79.NO:4==r.openState&&(e[i].state=TE79.OVER),t[s.type]=e[i]}}return t},n.FC92=function(t){if(n.FD83(t)){var e=1,i=O4.getLv(),s=function(t){i<t&&(e=0)};switch(t){case C9.A19:s(N19.FE69());break;case C9.A20:s(N17.FE70());break;case C9.A21:s(M15.FF82());break;case C9.A22:s(parseInt(L1.init.materialOpenLevel.value));break;case C9.A23:s(parseInt(L7.gIV("needLevel")));break;case C9.A24:break;case C9.A25:s(I6.FL66());break;case C9.A26:break;case C9.A27:s(N17.FE69());break;case C9.A1:s(N17.FF90());break;case C9.A2:s(N17.FHH99());break;case C9.A3:s(parseInt(L1.init.throughOpenLevel.value));break;case C9.A4:s(parseInt(L1.init.skyOpenLevel.value));break;case C9.A5:case C9.A7:case C9.A10:s(Number(L4.gIV("unlockLevel")));break;case C9.A6:s(N15.FG47(P12.A22));break;case C9.A8:break;case C9.A9:s(F6.FE59("unlockLv"))}return e}},n.FD83=function(t){return n.dailyexp[t]},n.FC93=function(t){t||(t=1);var e={},i=P7.copyTab(n.dailylevel);return 0<(e=i[String(t)]).exp?e.nextreward=i[String(t+1)].reward:e.nextreward=e.reward,e},n.FB61=function(){var t=App.CM.gtM(O6.C5),e=String(t.dt.level);n.dailylevel.length;return n.dailylevel[e].exp<=0},n.FI30=function(){var t=[];for(var e in this.day){var i=P7.copyTab(this.day[e]),s=i.reward.split(":");i.rewards={k:parseInt(s[0]),v:parseInt(s[1])},t.push(i)}return t},n.FG5=function(){var t=[];for(var e in this.month){var i=P7.copyTab(this.month[e]),s=M18.FL28(i.reward,";",":");for(var o in i.rewards=[],s){var r={k:parseInt(s[o][0]),v:parseInt(s[o][1])};i.rewards.push(r)}t.push(i)}return t},n.FB24=function(){var t={},e=P7.copyTab(n.dailyexp);for(var i in e){var s=e[i];if(1==s.time){var o=TG56.FA41(s.type);e[i].isOver=o.isOver,t[s.type]=e[i]}}return t},n.FJ69=function(){return this.overTime||(this.overTime=[],this.overTime.push(G9.doubleTime.vt),this.overTime.push(TD95.doubleTime.vt),this.overTime.push(M16.doubleTime.vt),this.overTime.push(G10.doubleTime.vt),this.overTime.push(Boatrace.Config.doubleTime.vt)),this.overTime},n}();__reflect(M17.prototype,"M17");var N3=function(){function t(){}return t.A24=10001,t.A25=10002,t.A19=10003,t.A26=10004,t.A27=10005,t.A28=10006,t.A16=10007,t.A17=10008,t.A3=10009,t.A4=10010,t.A11=10011,t.A12=10012,t.A7=10013,t.A8=10014,t.A20=10015,t.A21=10016,t.A29=10017,t.A32=10018,t.A33=10019,t.A9=10020,t.A10=10021,t.A14=10022,t.A15=10023,t.A13=10024,t.A18=10025,t.A22=10026,t.A23=10027,t.A1=10028,t.A2=10029,t.A5=10030,t.A6=10031,t.A52=10032,t.A53=10033,t.A44=10034,t.A34=10035,t.A35=10036,t.A45=10037,t.A46=10038,t.A36=10039,t.A37=10040,t.A38=10041,t.A39=10042,t.A51=10043,t.A49=10044,t.A47=10045,t.A50=10046,t.A48=10047,t.A43=10048,t.A40=10049,t.A41=10050,t.A42=10051,t.A30=10052,t.A31=10053,t}();__reflect(N3.prototype,"N3");var TC77=function(){function t(){}return t.NO=0,t.CAN=1,t.HAVE=2,t}();__reflect(TC77.prototype,"TC77");var TE79=function(){function t(){}return t.CAN=0,t.HAVE=1,t.WAIT=2,t.NO=3,t.OVER=4,t}();__reflect(TE79.prototype,"TE79");var TB81=function(){function t(){}return t.NO=0,t.CAN=1,t.HAVE=2,t}();__reflect(TB81.prototype,"TB81");var C9=function(){function t(){}return t.A19=1,t.A20=2,t.A21=3,t.A22=4,t.A23=5,t.A24=6,t.A25=7,t.A26=8,t.A27=9,t.A1=10,t.A2=11,t.A3=12,t.A4=13,t.A5=14,t.A6=15,t.A7=16,t.A8=17,t.A9=18,t.A10=19,t.A11=20,t.A12=21,t.A13=22,t.A14=23,t.A15=24,t.A16=25,t.A17=26,t.A18=27,t.TYPE28=28,t}();__reflect(C9.prototype,"C9");var TD97=function(i){function t(){var t=i.call(this)||this,e=new TG54(t);return e.aLV(O7.HH23),e.aLV(O7.HH47),e.aLV(O7.C51),e.aLV(O7.HH48),e.aLV(O7.E7),e.aLV(O7.HH30),e.aLV(O7.I76),App.VM.register(O7.HH23,"DailyMainView",t,K17.UI_Main_TOP),t.rgF(N3.A49,t.GL21,t),t.rgF(N3.A47,t.GJ32,t),App.VM.register(O7.HH48,"SweepArmyView",t,K17.UI_Main_TOP),t.rgF(N3.A50,t.GL22,t),t.rgF(N3.A48,t.GJ33,t),App.VM.register(O7.E7,"DailyFindBackView",t,K17.UI_Popup),t.rgF(N3.A43,t.GE51,t),t.rgF(N3.A40,t.GD56,t),t.dailyProxy=new TG55(t),t.rgF(N3.A52,t.GU66,t),t.rgF(N3.A53,t.GU67,t),t.rgF(N3.A44,t.GO98,t),t.rgF(N3.A45,t.GO99,t),t.rgF(N3.A46,t.GP1,t),t.rgF(N3.A36,t.GJ28,t),t.rgF(N3.A37,t.GJ29,t),t.rgF(N3.A38,t.GJ30,t),t.rgF(N3.A39,t.GJ31,t),t.rgF(N3.A51,t.GQ65,t),t.rgF(N3.A24,t.GE49,t),t.rgF(N3.A25,t.GE50,t),t.rgF(N3.A19,t.GC66,t),t.rgF(N3.A26,t.GC66,t),t.rgF(N3.A20,t.GC66,t),t.rgF(N3.A16,t.GC67,t),t.rgF(N3.A17,t.GC68,t),t.rgF(N3.A3,t.GA46,t),t.rgF(N3.A4,t.GA47,t),t.rgF(N3.A11,t.GA61,t),t.rgF(N3.A12,t.GA62,t),t.rgF(N3.A7,t.GA85,t),t.rgF(N3.A8,t.GA86,t),t.rgF(N3.A32,t.GHH48,t),t.rgF(N3.A33,t.GHH49,t),t.rgF(N3.A21,t.GHH50,t),t.rgF(N3.A29,t.GHH50,t),t.rgF(N3.A9,t.GA87,t),t.rgF(N3.A10,t.GHH50,t),t.rgF(N3.A14,t.GB82,t),t.rgF(N3.A15,t.GB83,t),t.rgF(N3.A22,t.GD53,t),t.rgF(N3.A23,t.GD54,t),t.rgF(N3.A13,t.GD55,t),t.rgF(N3.A18,t.GD55,t),t.rgF(N3.A1,t.GB84,t),t.rgF(N3.A2,t.GD55,t),t.rgF(N3.A5,t.GA63,t),t.rgF(N3.A6,t.GA64,t),t.rgF(N3.A41,t.GY46,t),t.rgF(N3.A42,t.GY47,t),t.rgF(N3.A30,t.GW21,t),t.rgF(N3.A31,t.GW22,t),t}return __extends(t,i),t.prototype.GU66=function(){return this.dailyProxy.ZK99()},t.prototype.GU67=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZW23(e),i.notify(P4.V72)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ65=function(t){var e=t.body,i=this.gtM();i.ZO9(e,P4.V72),i.notify(P4.V72)},t.prototype.GO98=function(t){var e=t.body,i=this.gtM();i.ZO9(e,P4.T53),i.notify(P4.T53)},t.prototype.GO99=function(t){this.dailyProxy.ZF17(t)},t.prototype.GP1=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body;e.ZO9(i,P4.T55),e.notify(P4.T55),P18.sDP(O3.tr(915)),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ28=function(t){this.dailyProxy.ZC42(t)},t.prototype.GJ29=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body;e.ZO9(i,P4.M9),e.notify(P4.M9),P18.sDP(O3.tr(911))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ30=function(t){this.dailyProxy.ZC43(t)},t.prototype.GJ31=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body;e.ZO9(i,P4.M11),e.notify(P4.M11),P18.sDP(O3.tr(912)),App.CM.apF(O6.C5,N3.A40)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE49=function(t){return this.dailyProxy.ZB2(t)},t.prototype.GE50=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZC40(e),i.notify(P4.F2)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC66=function(t){var e=t.body,i=this.gtM();i.ZB35(e,P4.F2),i.notify(P4.F2)},t.prototype.GC67=function(t){this.dailyProxy.ZA55(t)},t.prototype.GC68=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZB35(e,P4.D81),i.notify(P4.D81)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA46=function(){this.dailyProxy.ZA4()},t.prototype.GA47=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZB35(e,P4.A61),i.notify(P4.A61)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA61=function(t){App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.dailyProxy.ZA18(t))},t.prototype.GA62=function(t){var i=this;if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void this.ZT94(O6.B99,N1.A5);if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var s=t.body,o=this.gtM();o.ZB35(s,P4.C4);var e=P7.isGetView(O7.B24);App.CM.apF(O6.C5,N3.A48),App.CM.apF(O6.C5,N3.A47),o.notify(P4.C4),App.CM.apF(O6.B99,N1.A11,s.fr,{rewards:s.ob,needResult:!0,help:!1,type:P15.A45,isAuto:e},function(t,e){o.rt.getFromScene()||(0<s.rebels.length?e&&i.GL22(O7.HH48):i.GL21(O7.C51))},this)}},t.prototype.GA85=function(t){this.dailyProxy.ZA19(t)},t.prototype.GA86=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZB35(e,P4.B40),i.notify(P4.B40),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH48=function(t){return this.dailyProxy.ZB72(t)},t.prototype.GHH49=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZD92(e),i.notify(P4.G70)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA87=function(t){this.dailyProxy.ZA20(t)},t.prototype.GHH50=function(t){var e=t.body,i=this.gtM();i.ZC41(e,P4.G70),i.notify(P4.G70)},t.prototype.GB82=function(t){this.dailyProxy.ZA40(t)},t.prototype.GB83=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZC41(e,P4.C87),i.notify(P4.C87),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD53=function(){return this.dailyProxy.ZA75()},t.prototype.GD54=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZB70(e),i.notify(P4.C5)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD55=function(t){var e=t.body,i=this.gtM();i.ZB1(e,P4.C5),i.notify(P4.C5)},t.prototype.GB84=function(){this.dailyProxy.ZA2()},t.prototype.GA63=function(t){this.dailyProxy.ZA13(t)},t.prototype.GA64=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZB1(e,P4.A84),i.notify(P4.A84),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY46=function(t){this.dailyProxy.GY46(t)},t.prototype.GY47=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZO9(e,P4.V72),i.notify(P4.M13),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW21=function(t){this.dailyProxy.GW21(t)},t.prototype.GW22=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZO9(e,P4.V72),i.notify(P4.I27),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL21=function(t){App.VM.open(O7.HH23,t)},t.prototype.GJ32=function(){App.VM.close(O7.HH23)},t.prototype.GL22=function(t){App.VM.open(O7.HH48,t)},t.prototype.GJ33=function(){App.VM.close(O7.HH48)},t.prototype.GE51=function(t){App.VM.open(O7.E7,t)},t.prototype.GD56=function(){App.VM.close(O7.E7)},t}(TE11);__reflect(TD97.prototype,"TD97");var TG54=function(i){function t(t){return i.call(this,t)||this}return __extends(t,i),t.prototype.ZW23=function(t){this.dt=t,this.lastLoadTime=P6.getTime(!1),this.serTime=t.serTime},t.prototype.FL67=function(){var t=0,e=TG56.FHH10();for(var i in e){if(e[i].state==TC77.CAN){t+=1;break}}return t},t.prototype.getRed1=function(){var t=0;return 0<this.FL67()&&(t+=1),t},t.prototype.getRed2=function(){var t=0;if(0<this.FL67())return 1;var e=M17.FA90();for(var i in e)if(e[i].state==TE79.CAN){t+=1;break}return t},t.prototype.getRed3=function(){var t=0,e=TG56.FC23();for(var i in e)if(e[i].state==TB81.CAN){t+=1;break}return t},t.prototype.ZO9=function(t,e){if(t)switch(e){case P4.V72:case P4.T53:for(var i in this.dt||(this.dt=t),t)this.dt[i]=t[i];break;case P4.T55:for(var i in t)this.dt[i]=t[i];break;case P4.M9:case P4.M11:this.dt.exp=t.exp,this.dt.retrieveList=t.retrieveList}},t.prototype.ZC40=function(t){this.rt=new daily.RebelsTraining,this.rt.ZR84(t)},t.prototype.ZB35=function(t,e){if(t)switch(e){case P4.A61:this.rt.finish=t.finish;break;default:null==this.rt&&(this.rt=new daily.RebelsTraining),this.rt.ZR84(t)}},t.prototype.ZD92=function(t){this.tt=t},t.prototype.ZC41=function(t,e){if(t)switch(e){case P4.C87:this.tt.isTake=t.isTake;break;case P4.G70:for(var i in this.tt||(this.tt=t),t)this.tt[i]=t[i]}},t.prototype.ZB70=function(t){this.mt=t},t.prototype.ZB1=function(t,e){if(t)switch(e){case P4.A84:this.mt.hasTake=t.hasTake;break;case P4.C5:for(var i in this.mt||(this.mt=t),t)this.mt[i]=t[i]}},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TG54.prototype,"TG54");var TG55=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.T53,e.GO98,e),e.rSM(P4.T55,e.GP1,e),e.rSM(P4.M9,e.GJ29,e),e.rSM(P4.M11,e.GJ31,e),e.rSM(P4.V72,e.GQ65,e),e.rSM(P4.F2,e.GC66,e),e.rSM(P4.I24,e.ZD1,e),e.rSM(P4.D81,e.GC68,e),e.rSM(P4.A61,e.GA47,e),e.rSM(P4.C4,e.ZA72,e),e.rSM(P4.B40,e.GA86,e),e.rSM(P4.G73,e.ZC44,e),e.rSM(P4.G70,e.ZB71,e),e.rSM(P4.I25,e.ZD2,e),e.rSM(P4.B42,e.ZA73,e),e.rSM(P4.C87,e.GB83,e),e.rSM(P4.C5,e.ZA74,e),e.rSM(P4.D82,e.ZB36,e),e.rSM(P4.A45,e.ZA29,e),e.rSM(P4.A84,e.GA64,e),e.rSM(P4.M13,e.GY47,e),e.rSM(P4.I27,e.GW22,e),e}return __extends(t,i),t.prototype.ZK99=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X15,body:{}};s.rSMO(P4.X16,function(t){s.apF(N3.A53,t),e("加载日常任务数据完成")},s),s.sSM(i)})},t.prototype.GO98=function(t){this.apF(N3.A44,t)},t.prototype.ZF17=function(t){var e={type:P4.T54,body:{}};this.sSM(e)},t.prototype.GP1=function(t){this.apF(N3.A46,t)},t.prototype.ZC42=function(t){var e={type:P4.M8,body:{type:t}};this.sSM(e)},t.prototype.GJ29=function(t){this.apF(N3.A37,t)},t.prototype.ZC43=function(t){var e={type:P4.M10,body:{}};this.sSM(e)},t.prototype.GJ31=function(t){this.apF(N3.A39,t)},t.prototype.GQ65=function(t){this.apF(N3.A51,t)},t.prototype.ZB2=function(t){var s=this;return new Promise(function(e,t){var i={type:P4.I22,body:{}};s.rSMO(P4.I23,function(t){s.apF(N3.A25,t),e("横扫乱军加载完成")},s),s.sSM(i)})},t.prototype.GC66=function(t){this.apF(N3.A19,t)},t.prototype.ZD1=function(t){this.apF(N3.A26,t)},t.prototype.ZC44=function(t){this.apF(N3.A20,t)},t.prototype.ZA55=function(t){var e={type:P4.D80,body:{id:t}};this.sSM(e)},t.prototype.GC68=function(t){this.apF(N3.A17,t)},t.prototype.ZA4=function(){var t={type:P4.A60,body:{}};this.sSM(t)},t.prototype.GA47=function(t){this.apF(N3.A4,t)},t.prototype.ZA18=function(t){var e={type:P4.C3,body:{id:t}};this.sSM(e)},t.prototype.ZA72=function(t){this.apF(N3.A12,t)},t.prototype.ZA19=function(t){var e={type:P4.B39,body:{}};this.sSM(e)},t.prototype.GA86=function(t){this.apF(N3.A8,t)},t.prototype.ZB71=function(t){this.apF(N3.A21,t)},t.prototype.ZD2=function(t){this.apF(N3.A29,t)},t.prototype.ZB72=function(t){var s=this;return new Promise(function(e,t){var i={type:P4.M6,body:{}};s.rSMO(P4.M7,function(t){s.apF(N3.A33,t),e("加载组队试炼数据完成")},s),s.sSM(i)})},t.prototype.ZA20=function(t){var e={type:P4.B41,body:{}};this.sSM(e)},t.prototype.ZA73=function(t){this.apF(N3.A10,t)},t.prototype.ZA40=function(t){var e={type:P4.C86,body:{}};this.sSM(e)},t.prototype.GB83=function(t){this.apF(N3.A15,t)},t.prototype.ZA74=function(t){this.apF(N3.A13,t)},t.prototype.ZB36=function(t){this.apF(N3.A18,t)},t.prototype.ZA75=function(){var s=this;return new Promise(function(e,t){var i={type:P4.G71,body:{}};s.rSMO(P4.G72,function(t){s.apF(N3.A23,t),e("加载怪物试炼数据完成")},s),s.sSM(i)})},t.prototype.ZA2=function(){var t={type:P4.A44,body:{}};this.sSM(t)},t.prototype.ZA29=function(t){this.apF(N3.A2,t)},t.prototype.ZA13=function(t){var e={type:P4.A83,body:{id:t}};this.sSM(e)},t.prototype.GA64=function(t){this.apF(N3.A6,t)},t.prototype.GY46=function(t){var e={type:P4.M12,body:{id:t}};this.sSM(e)},t.prototype.GY47=function(t){this.apF(N3.A42,t)},t.prototype.GW21=function(t){var e={type:P4.I26,body:{id:t}};this.sSM(e)},t.prototype.GW22=function(t){this.apF(N3.A31,t)},t}(TG80);__reflect(TG55.prototype,"TG55");var TG56=function(){function o(){}return o.FG6=function(){var t=parseInt(M17.gIV("unlockLevel")),e=I6.FL66(),i=App.CM.gtM(O6.B82).avatarInfo.l;return e<=i||t<=i},o.FA17=function(t){var e=0,i=App.CM.gtM(O6.C5).dt.completeList;for(var s in i)if(i[s].k==t){e=i[s].v;break}return e},o.FD84=function(){for(var t=[],e=App.CM.gtM(O6.C5).dt.level,i=0;i<e;i++){var s=i+1,o=M17.FC93(s),r=K18.FB52(o.baseattr);if(0==t.length)t=r;else for(var n in t)for(var a in r)if(r[a].name==t[n].name){t[n].num=parseInt(t[n].num)+parseInt(r[a].num);break}}return t},o.FB25=function(){var t=[],e=App.CM.gtM(O6.C5).dt.retrieveList;if(e.length<=0)return t;for(var i in e){var s=e[i];if(0<s.v){var o=M17.FD83(s.k);e[i].name=o.name,e[i].type=o.type,e[i].canFindExp=s.v;var r=parseInt(M17.gIV("retrieveExpPrice"));e[i].cost=r*s.v,t.push(e[i])}}return 0<t.length&&t.sort(function(t,e){return t.type-e.type}),t},o.FG7=function(){var t=0,e=o.FB25();for(var i in e)t+=e[i].cost;return t},o.FHH12=function(){var t=0,e=o.FB25();for(var i in e)t+=e[i].canFindExp;return t},o.FC21=function(){var t=0,e=App.CM.gtM(O6.C5).rt;if(0<e.cd){var i=Math.ceil((new Date).getTime()/1e3);(t=e.cd-(i-e.lastLoadTime))<0&&(t=0)}return t},o.FB62=function(){var t=parseInt(I6.gIV("monsterCount1")),e=parseInt(I6.gIV("monsterCount2")),i=parseInt(I6.gIV("monsterCount3")),s=t,o=App.CM.gtM(O6.C5).mt,r=o.finish;return e<=r&&2<=o.hasTake.length?s=i:t<=r&&1<=o.hasTake.length&&(s=e),s},o.FA60=function(){if(M17.FB61())return!1;var t=App.CM.gtM(O6.C5),e=t.dt.level,i=M17.FC93(e),s=t.dt.exp;return i.exp<=s},o.FA61=function(){var t=0,e=App.CM.gtM(O6.B82);parseInt(M17.gIV("unlockLevel"))<=e.avatarInfo.l&&(o.FA60()&&(t+=1));return t},o.FC22=function(){var t=0,e=App.CM.gtM(O6.C5);return t+=this.FA61(),t+=e.getRed1(),t+=e.getRed2(),t+=e.getRed3()},o.FD85=function(){var t=0,e=App.CM.gtM(O6.C5).rt;return null!=e&&0<e.rebelsNum&&(t+=1),t},o.FC94=function(){var t=0,e=App.CM.gtM(O6.C5).rt;if(null!=e&&1!=e.isTake){var i=parseInt(I6.gIV("rebelCount"));if(e.finish>=i)return t+=1}return t},o.FB63=function(){var t=0,e=App.CM.gtM(O6.C5).mt,i=!1;if(3<=e.hasTake.length&&(i=!0),!i){var s=o.FB62();if(e.finish>=s)return t+=1}return t},o.FE83=function(){var t=0,e=parseInt(N19.init.awardTime.value),i=App.CM.gtM(O6.C23),s=e-i.earningsNum;return 1==i.isDouble&&0<s&&(t+=1),t},o.FD86=function(){var t=0,e=App.CM.gtM(O6.C5).tt,i=parseInt(I6.gIV("teamCount"));return e.finish>=i&&1!=e.isTake?t+=1:t},o.FA62=function(){var t=0;if(I6.FC95()){App.CM.gtM(O6.C5);t+=o.FD85(),t+=o.FC94(),t+=o.FB63(),t+=o.FE83(),t+=o.FD86()}return t},o.FE84=function(){return o.FC22()+o.FA62()},o.FE85=function(t){switch(t){case"arena_init":return M15.init;case"training_init":return I6.init;case"dragon_init":return L1.init;case"boss_init":return N17.init;case"team_init":return N19.init;case"escort_init":return L7.init}},o.FI31=function(){var t=new Array,e=App.CM.gtM(O6.C5),i={};i.text=O3.tr(6630),i.red=0<e.getRed1()?"v1_img_hongdiantishi_png":0,t.push(i);var s={};s.text=O3.tr(6598),s.red=0<e.getRed2()?"v1_img_hongdiantishi_png":0,t.push(s);var o={};return o.text=O3.tr(6597),o.red=0<e.getRed3()?"v1_img_hongdiantishi_png":0,t.push(o),t},o.FHH10=function(){for(var t=new Array,e=App.CM.gtM(O6.C5),i=e.dt.dp,s=e.dt.dw,o=0;o<M17.dayReward.length;o++){var r=P7.copyTab(M17.dayReward[o]);r.exp<=i?(r.state=TC77.CAN,-1!==s.indexOf(r.id)&&(r.state=TC77.HAVE)):r.state=TC77.NO,t.push(r)}return t},o.FC23=function(){for(var t=new Array,e=App.CM.gtM(O6.C5),i=e.dt.ap,s=e.dt.mw,o=0;o<M17.monthReward.length;o++){var r=P7.copyTab(M17.monthReward[o]);r.exp<=i?(r.state=TB81.CAN,-1!==s.indexOf(r.id)&&(r.state=TB81.HAVE)):r.state=TB81.NO,t.push(r)}return t.sort(this.ZF18),t},o.ZF18=function(t,e){return t.state==TB81.CAN?-1:e.state==TB81.CAN?1:t.state==TB81.NO?-1:e.state==TB81.NO?1:t.id-e.id},o.FB64=function(t){var e={openTime:0,overTime:0,openState:0,time:[]},i=App.CM.gtM(O6.C5),s=i.serTime+P6.getTime(!1)-i.lastLoadTime,o=P6.FM3(P6.FM4(s));switch(t){case C9.A19:(a=App.CM.gtM(O6.C23)).isDouble?e.openState=1:e.openState=2;var r=N19.doubleTime[1].vt,n=N19.doubleTime[0].vt;e.overTime=r<=o||o<=n?(e.openTime=N19.doubleTime[0].pt,N19.doubleTime[0].vt):(e.openTime=N19.doubleTime[1].pt,N19.doubleTime[1].vt),e.time.push(0);break;case C9.A23:(a=App.CM.gtM(O6.B86)).dou?e.openState=1:e.openState=2;r=L7.doubleTime[1].vt,n=L7.doubleTime[0].vt;e.overTime=r<=o||o<=n?(e.openTime=L7.doubleTime[0].pt,L7.doubleTime[0].vt):(e.openTime=L7.doubleTime[1].pt,L7.doubleTime[1].vt),e.time.push(0);break;case C9.A10:if((a=App.CM.gtM(O6.B89)).legionBoss)switch(a.legionBoss.state){case 0:e.openState=2;break;default:e.openState=1}else e.openState=1;r=L4.doubleTime[1].vt,n=L4.doubleTime[0].vt;e.overTime=r<=o||o<=n?(e.openTime=L4.doubleTime[0].pt,L4.doubleTime[0].vt):(e.openTime=L4.doubleTime[1].pt,L4.doubleTime[1].vt),e.time.push(0);break;case C9.A11:switch((a=App.CM.gtM(O6.B94)).s){case 0:e.openState=2;break;default:e.openState=1}r=TF78.doubleTime.pt,n=TF78.doubleTime.vt;e.openTime=r,(e.overTime=n)<o&&2==e.openState&&(e.openState=4),e.time.push(0);break;case C9.A12:switch((a=App.CM.gtM(O6.B16)).state){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:e.openState=1}r=G9.doubleTime.pt,n=G9.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=G9.openDay;break;case C9.A13:switch((a=App.CM.gtM(O6.B28)).state){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:e.openState=1;break;default:e.openState=3}r=TD95.doubleTime.pt,n=TD95.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=TD95.openDay;break;case C9.A14:switch((a=App.CM.gtM(O6.C6)).climbState){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:e.openState=1}r=M16.doubleTime.pt,n=M16.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=M16.openDay;break;case C9.A15:switch((a=App.CM.gtM(O6.B22)).state){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:case 2:e.openState=1}r=G10.doubleTime.pt,n=G10.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=G10.openDay;break;case C9.A16:switch((a=App.CM.gtM(O6.B53)).st){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:case 2:e.openState=1}r=Boatrace.Config.doubleTime.pt,n=Boatrace.Config.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=[],e.time.push(Boatrace.Config.openTime);break;case C9.A17:switch((a=App.CM.gtM(O6.B8)).state){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:case 2:e.openState=1;break;default:e.openState=3}r=TD39.doubleTime.pt,n=TD39.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=TD39.openDay;break;case C9.A18:0==(a=App.CM.gtM(O6.A93)).open?e.openState=3:1==a.open&&1==a.st?e.openState=1:1==a.open&&(e.openState=2);r=MonarchTest.Config.doubleTime.pt,n=MonarchTest.Config.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=MonarchTest.Config.openDay;break;case C9.TYPE28:var a;switch((a=App.CM.gtM(O6.SurvivalChallenge)).st){case-1:e.openState=3;break;case 0:e.openState=2;break;case 1:e.openState=1;break;default:e.openState=3}r=SurvivalConfig.doubleTime.pt,n=SurvivalConfig.doubleTime.vt;e.openTime=r,e.overTime=n,r<=o&&n<o&&2==e.openState&&(e.openState=4),e.time=SurvivalConfig.getOpenDay()}return e},o.FA41=function(t){var e,i={},s=App.CM.gtM(O6.C5),o=s.serTime+P6.getTime(!1)-s.lastLoadTime,r=P6.FM3(P6.FM4(o));switch(t){case C9.A12:e=G9.doubleTime.vt;break;case C9.A13:e=TD95.doubleTime.vt;break;case C9.A14:e=M16.doubleTime.vt;break;case C9.A15:e=G10.doubleTime.vt;break;case C9.A16:e=Boatrace.Config.doubleTime.vt;break;case C9.A18:e=MonarchTest.Config.doubleTime.vt;break;case C9.TYPE28:e=SurvivalConfig.doubleTime.vt}return i.isOver=e<=r,i},o.FJ69=function(){var t=M17.FJ69(),e=App.CM.gtM(O6.C5),i=e.serTime+P6.getTime(!1)-e.lastLoadTime,s=P6.FM3(P6.FM4(i));if(-1!=t.indexOf(s)){var o=App.VM.gOV(O7.D89);o&&o.updateAll()}},o}();__reflect(TG56.prototype,"TG56");var G7=function(){function t(){}return t.A4=1,t.A5=2,t.A6=3,t.A1=4,t.A2=5,t.A3=6,t}();__reflect(G7.prototype,"G7");var I6=function(){function r(){}return r.FK35=function(t){r.init=t.training_init,r.rebelstar=t.training_rebelstar,r.reward=t.training_reward},r.gIV=function(t){var e="未配置";return r.init&&r.init[t]&&(e=r.init[t].value),e},r.FJ70=function(t){var e=0;for(var i in K18.vip)if("reqTeamVip"==t){if(1==K18.vip[i].reqteamlimit){e=K18.vip[i].level;break}}else if("reqRebelVip"==t){if(1==K18.vip[i].reqrebellimit){e=K18.vip[i].level;break}}else if(1==K18.vip[i].reqmonsterlimit){e=K18.vip[i].level;break}return e},r.FL66=function(){var t=0;if(!r.init)return t;var e=parseInt(r.gIV("unlockRebelLevel")),i=parseInt(r.gIV("unlockTeamLevel")),s=parseInt(r.gIV("unlockMonsterLevel"));return t=Math.min(Math.min(e,i),s)},r.FC95=function(){return r.FL66()<=App.CM.gtM(O6.B82).avatarInfo.l},r.FA42=function(){return parseInt(r.gIV("unlockRebelLevel"))<=App.CM.gtM(O6.B82).avatarInfo.l},r.FA91=function(){return parseInt(r.gIV("unlockTeamLevel"))<=App.CM.gtM(O6.B82).avatarInfo.l},r.FA24=function(){return parseInt(r.gIV("unlockMonsterLevel"))<=App.CM.gtM(O6.B82).avatarInfo.l},r.FD87=function(){var t=0;for(var e in r.rebelstar)t+=1;return t},r.FB65=function(t){var e=1;for(var i in r.rebelstar){var s=r.rebelstar[i];if(s.star==t){e=s.bonus;break}}return e},r.FC96=function(t){var e="",i=App.CM.gtM(O6.B82).avatarInfo.l;for(var s in r.reward){var o=r.reward[s];o.type==t&&i>=o.level&&(e="75004:"+o.exp+";"+o.reward)}return e},r}();__reflect(I6.prototype,"I6");var DailyActiveItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName=DailyActiveItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},t.prototype.close=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF,this.getBtn.labelDisplay.text=O3.tr(3232)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.ZJ81(this.data.rewards),this.lbHave.textFlow=M18.HTP.parse(O3.tr(6600,this.data.exp));var t=App.CM.gtM(O6.C5).dt.ap;switch(t>=this.data.exp?this.lbNum.textFlow=M18.HTP.parse(O3.tr(6816,t,this.data.exp)):this.lbNum.textFlow=M18.HTP.parse(O3.tr(6815,t,this.data.exp)),this.data.state){case TB81.CAN:P16.sGF(this.getBtn,!1),this.getBtn.enabled=!0,this.getBtn.visible=this.getBtn.imgNew.visible=!0,this.getImg.visible=!1,this.getBtn.label=O3.tr(6603);break;case TB81.NO:P16.sGF(this.getBtn,!0),this.getBtn.enabled=!1,this.getBtn.imgNew.visible=!1,this.getBtn.visible=!0,this.getImg.visible=!1,this.getBtn.label=O3.tr(6601);break;case TB81.HAVE:this.getBtn.visible=!1,this.getImg.visible=!0}},t.prototype.ZJ81=function(t){var e=[];for(var i in t){var s={itemData:{data:N12.gID(t[i].k),ct:t[i].v},isBottom:!1};e.push(s)}this.dataSource.replaceAll(e)},t.prototype.onClickBtn=function(){this.data.state==TB81.CAN&&App.CM.apF(O6.C5,N3.A30,this.data.id)},t}(eui.ItemRenderer);__reflect(DailyActiveItemView.prototype,"DailyActiveItemView");var DailyExperienceView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.bRebelsGetState=!1,i.bMonsterGetState=!1,i.bTeamGetState=!1,i.skinName=ExperienceSkin,i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.dgRewards0.dataProvider=this.rewardsCollection0=new eui.ArrayCollection,this.dgRewards0.itemRenderer=ItemIcon,this.awardsSc0.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc0.scrollPolicyV=eui.ScrollPolicy.OFF,this.dgRewards1.dataProvider=this.rewardsCollection1=new eui.ArrayCollection,this.dgRewards1.itemRenderer=ItemIcon,this.awardsSc1.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc1.scrollPolicyV=eui.ScrollPolicy.OFF,this.dgRewards2.dataProvider=this.rewardsCollection2=new eui.ArrayCollection,this.dgRewards2.itemRenderer=ItemIcon,this.awardsSc2.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc2.scrollPolicyV=eui.ScrollPolicy.OFF,this.monsterTipLb.text=O3.tr(920),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6440));for(var t=[],e=N19.init.doubleTime.value.split(";"),i=0;i<e.length;i++)for(var s=e[i].split(","),o=0;o<s.length;o++)t.push(s[o]);var r=O3.tr(922,t[0],t[1],t[2],t[3]);this.teamTipLb.textFlow=M18.HTP.parser(r),this.armyGoBtn.label=O3.tr(4492),this.teamGoBtn.label=O3.tr(4492)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this),this.armyGoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW24,this),this.armyGetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR79,this),this.monsterGetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO10,this),this.teamGoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTeamGoBtn,this),this.teamGetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTeamGetBtn,this),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e),t instanceof TG54&&(e[0]!=P4.F2&&e[0]!=P4.A61&&e[0]!=P4.C4&&e[0]!=P4.B40||(this.rebelsData=t.rt,this.ZD93(),this.ZU24(0)),e[0]!=P4.C5&&e[0]!=P4.A84||(this.monsterData=t.mt,this.ZD3(),this.ZU24(1)),e[0]!=P4.G70&&e[0]!=P4.C87||(this.teamData=t.tt,this.ZG68(),this.ZU24(2))),t instanceof THH18&&e[0]==P4.V96&&this.ZG68()},t.prototype.GX5=function(){var t=App.CM.gtM(O6.C5);this.rebelsData=t.rt,this.monsterData=t.mt,this.teamData=t.tt,this.ZD93(),this.ZD3(),this.ZG68();for(var e=0;e<3;e++)this.ZU24(e)},t.prototype.GY14=function(){this.rebelTime--,this.rebelTime<0&&(this.rebelTime=0);var t=O3.tr(913,P6.FJ11(1e3*this.rebelTime,3));this.armyReTimeLb.textFlow=M18.HTP.parser(t)},t.prototype.ZD93=function(){if(null!=this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),0<this.rebelsData.cd){this.rebelTime=TG56.FC21();var t=O3.tr(913,P6.FJ11(1e3*this.rebelTime,3));this.armyReTimeLb.textFlow=M18.HTP.parser(t),this._timerHandler=App.K16.doTimer(1e3,this.rebelTime,this.GY14,this)}else this.armyReTimeLb.text="";var e=parseInt(I6.gIV("maxRebelWave"));this.armyNumLb.textFlow=M18.HTP.parser(O3.tr(914,this.rebelsData.rebelsNum,e));var i=parseInt(I6.gIV("rebelCount"));this.armyAwdLb.text=O3.tr(916,i);var s=this.rebelsData.finish;i<s&&(s=i),this.getNumLb1.text=O3.tr(907,s,i),0<this.rebelsData.rebelsNum?(this.armyGoBtn.enabled=!0,P16.sGF(this.armyGoBtn,!1)):(this.armyGoBtn.enabled=!1,P16.sGF(this.armyGoBtn,!0)),1==this.rebelsData.isTake?(this.armyGetBtn.enabled=!1,P16.sGF(this.armyGetBtn,!0),this.armyGetBtn.label=O3.tr(903)):(this.armyGetBtn.enabled=!0,P16.sGF(this.armyGetBtn,!1),this.rebelsData.finish<i?(this.armyGetBtn.label=O3.tr(925),this.bRebelsGetState=!1):(this.armyGetBtn.label=O3.tr(926),this.bRebelsGetState=!0)),P7.FD53(this.armyGoBtn,TG56.FD85()),P7.FD53(this.armyGetBtn,TG56.FC94())},t.prototype.ZD3=function(){var t=parseInt(I6.gIV("monsterCount1")),e=parseInt(I6.gIV("monsterCount2")),i=parseInt(I6.gIV("monsterCount3")),s=this.monsterData.finish;i<s&&(s=i),this.curMaxMonsterCnt=TG56.FB62(),this.monsterAwdLb.text=O3.tr(921,this.curMaxMonsterCnt),this.getNumLb2.text=O3.tr(907,s,this.curMaxMonsterCnt);var o=!1;3<=this.monsterData.hasTake.length&&(o=!0),o?(this.monsterGetBtn.enabled=!1,P16.sGF(this.monsterGetBtn,!0),this.monsterGetBtn.label=O3.tr(903)):(this.monsterGetBtn.enabled=!0,P16.sGF(this.monsterGetBtn,!1),s>=this.curMaxMonsterCnt?(this.monsterGetBtn.label=O3.tr(926),this.bMonsterGetState=!0,this.curMaxMonsterCnt==t?this.monsterGetClass=1:this.curMaxMonsterCnt==e?this.monsterGetClass=2:this.monsterGetClass=3):(this.monsterGetBtn.label=O3.tr(925),this.bMonsterGetState=!1)),P7.FD53(this.monsterGetBtn,TG56.FB63())},t.prototype.ZG68=function(){var t=parseInt(N19.init.awardTime.value),e=App.CM.gtM(O6.C23),i=t-e.earningsNum;this.teamNumLb.textFlow=M18.HTP.parser(O3.tr(923,i,t)),this.doubleGroup.$setVisible(1==e.isDouble);var s=parseInt(I6.gIV("teamCount")),o=this.teamData.finish;this.teamAwdLb.text=O3.tr(924,s),s<o&&(o=s),this.getNumLb3.text=O3.tr(907,o,s),1==this.teamData.isTake?(this.teamGetBtn.enabled=!1,P16.sGF(this.teamGetBtn,!0),this.teamGetBtn.label=O3.tr(903)):(this.teamGetBtn.enabled=!0,P16.sGF(this.teamGetBtn,!1),this.bTeamGetState=s<=o?(this.teamGetBtn.label=O3.tr(926),!0):(this.teamGetBtn.label=O3.tr(925),!1)),P7.FD53(this.teamGoBtn,TG56.FE83()),P7.FD53(this.teamGetBtn,TG56.FD86())},t.prototype.FK41=function(t){var s=[];return 0<t.length&&t.forEach(function(t){var e=N12.gID(t[0]);if(e){e.ct=t[1];var i={data:e,ct:e.ct};s.push({itemData:i,isBottom:!1,scale:.9})}}),s},t.prototype.ZU24=function(t){var e="",i=[];switch(t){case 0:e=I6.FC96(G7.A5),i=M18.FL28(e,";",":"),this.rewardsCollection0.replaceAll(this.FK41(i));break;case 1:var s=G7.A1,o=this.monsterData.hasTake;2<=o.length?s=G7.A3:0<o.length&&(s=G7.A2),e=I6.FC96(s),i=M18.FL28(e,";",":"),this.rewardsCollection1.replaceAll(this.FK41(i));break;case 2:e=I6.FC96(G7.A6),i=M18.FL28(e,";",":"),this.rewardsCollection2.replaceAll(this.FK41(i))}},t.prototype.ZL1=function(t,e,i){var s={handler:i,cost:e,content:t};App.VM.open(O7.C54,s)},t.prototype.ZF19=function(){App.CM.apF(O6.C5,N3.A3)},t.prototype.ZW24=function(){this.rebelsData.setFromScene(!1),App.CM.apF(O6.C5,N3.A50)},t.prototype.ZR79=function(){if(1==this.bRebelsGetState)App.CM.apF(O6.C5,N3.A7);else{var t=I6.FJ70("reqRebelVip"),e=App.CM.gtM(O6.B82),i=e.avatarInfo.v;e.avatarInfo.g;if(t<=i){var s=parseInt(I6.gIV("reqRebelCost"))*(parseInt(I6.gIV("rebelCount"))-this.rebelsData.finish);this.ZL1(O3.tr(931,s),s,this.ZF19)}else P18.sDP(O3.tr(927,t))}},t.prototype.ZD4=function(){App.CM.apF(O6.C5,N3.A1)},t.prototype.ZO10=function(){if(1==this.bMonsterGetState)App.CM.apF(O6.C5,N3.A5,this.monsterGetClass);else{var t=I6.FJ70("reqMonsterVip"),e=App.CM.gtM(O6.B82),i=e.avatarInfo.v;e.avatarInfo.g;if(t<=i){var s=parseInt(I6.gIV("reqMonsterCost")),o=(parseInt(I6.gIV("rebelCount")),s*(this.curMaxMonsterCnt-this.monsterData.finish));this.ZL1(O3.tr(931,o),o,this.ZD4)}else P18.sDP(O3.tr(927,t))}},t.prototype.onTeamGoBtn=function(){this.aCF(O6.C23,O13.A38)},t.prototype.ZG69=function(){App.CM.apF(O6.C5,N3.A9)},t.prototype.onTeamGetBtn=function(){if(1==this.bTeamGetState)App.CM.apF(O6.C5,N3.A14);else{var t=I6.FJ70("reqTeamVip"),e=App.CM.gtM(O6.B82),i=e.avatarInfo.v;e.avatarInfo.g;if(t<=i){var s=parseInt(I6.gIV("reqTeamCost"))*(parseInt(I6.gIV("teamCount"))-this.teamData.finish);this.ZL1(O3.tr(931,s),s,this.ZG69)}else P18.sDP(O3.tr(927,t))}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.close.call(this),this.armyGoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW24,this),this.armyGetBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR79,this),this.monsterGetBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO10,this),this.teamGoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTeamGoBtn,this),this.teamGetBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTeamGetBtn,this),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this.rewardsCollection0.removeAll(),this.rewardsCollection1.removeAll(),this.rewardsCollection2.removeAll(),this.rebelsData=null,this.monsterData=null,this.teamData=null},t}(BaseEuiView);__reflect(DailyExperienceView.prototype,"DailyExperienceView");var DailyFindBackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=DailyFindBackSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.createList(),this.nameLb.textFlow=M18.HTP.parse(O3.tr(5321)),this.expLb.textFlow=M18.HTP.parse(O3.tr(5322)),this.costLb.textFlow=M18.HTP.parse(O3.tr(5323)),this.findAllBtn.label=O3.tr(5324),this.dlg.title=O3.tr(5325)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){this.listView.open(),this.findAllBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR80,this),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.updateViews()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG54&&(e[0]!=P4.V72&&e[0]!=P4.M9&&e[0]!=P4.M11||this.updateViews())},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.listView.close(),this.findAllBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR80,this)},t.prototype.createList=function(){var t={render:FindBackItem,gap:0,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0},t.prototype.updateList=function(){var t=this.ZF20();this.listView.rfL(t)},t.prototype.ZF20=function(){var t=[],e=TG56.FB25(),i=0;for(var s in e)i+=1,e[s].index=i,t.push(e[s]);return t},t.prototype.updateViews=function(){this.updateList()},t.prototype.oCC=function(){App.CM.apF(O6.C5,N3.A40)},t.prototype.findAllReq=function(){App.CM.apF(O6.C5,N3.A38)},t.prototype.ZR80=function(){if(App.CM.gtM(O6.C5).dt.retrieveList.length<=0)P18.sDP(O3.tr(919));else{App.CM.gtM(O6.B82).avatarInfo.g;var t=TG56.FG7(),e=TG56.FHH12();this.ZL1(O3.tr(932,t,e),t,this.findAllReq)}},t.prototype.ZL1=function(t,e,i){var s={handler:i,cost:e,content:t,closeHandler:this.oCC};App.VM.open(O7.C54,s)},t}(BaseEuiView);__reflect(DailyFindBackView.prototype,"DailyFindBackView");var FindBackItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=FindBackItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.findBackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW25,this)},t.prototype.close=function(){this.findBackBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW25,this)},t.prototype.dataChanged=function(){this.nameLb.text=this.data.name,this.expLb.text=this.data.canFindExp,this.costLb.text=this.data.cost,this.findBackBtn.label=O3.tr(5326),this.data.index%2==0?this.bgImg.$setVisible(!1):this.bgImg.$setVisible(!0)},t.prototype.ZL1=function(t,e,i){var s={handler:i,cost:e,content:t,closeHandler:this.oCC};App.VM.open(O7.C54,s)},t.prototype.ZW25=function(){var t=this;this.ZL1(O3.tr(932,this.data.cost,this.data.canFindExp),this.data.cost,function(){t.findExpReq(t.data.type)})},t.prototype.findExpReq=function(t){App.CM.apF(O6.C5,N3.A36,t)},t.prototype.oCC=function(){App.CM.apF(O6.C5,N3.A40)},t}(eui.ItemRenderer);__reflect(FindBackItem.prototype,"FindBackItem");var DailyMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_daily"),App.VM.rgS(O7.HH23,O7.HH47,"DailyTaskView",i.content),App.VM.rgS(O7.HH23,O7.C51,"DailyExperienceView",i.content),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t=[O3.tr(6596),O3.tr(905)],e=[O7.HH47,O7.C51];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.updateBtnRed(),this.ZO11();var i=t[0]||O7.HH47;M17.FC20()||(i=O7.C51),this.ZQ23(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.updateBtnRed(),t instanceof THH18&&this.ZO11()},t.prototype.ZQ23=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.l;switch(t){case O7.HH47:var i=M17.FL66();if(e<i){var s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[i])),-1}this.title=O3.tr(904),this.btnList.ZM66(t);break;case O7.C51:var o=I6.FL66();if(e<o){s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[o])),-1}this.title=O3.tr(905),this.btnList.ZM66(t)}},t.prototype.updateBtnRed=function(){App.CM.gtM(O6.C5);this.btnList.ZHH58(O7.HH47,TG56.FC22()),this.btnList.ZHH58(O7.C51,TG56.FA62())},t.prototype.ZO11=function(){var t=App.CM.gtM(O6.C23);this.btnList.ZM67(O7.C51,t.isDouble)},t}(BasePanelView);__reflect(DailyMainView.prototype,"DailyMainView");var DailyProgressItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName=DailyProgressItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.itemIcon=new ItemIcon,this.grpIcon.addChild(this.itemIcon)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.ZU35=function(){this.data.state==TC77.CAN&&App.CM.apF(O6.C5,N3.A41,this.data.id)},t.prototype.setData=function(t){this.data=t;var e={itemData:{data:N12.gID(t.rewards.k),ct:t.rewards.v},isBottom:!1};switch(this.itemIcon.data=e,this.lbNum.textFlow=M18.HTP.parse(O3.tr(6595,t.exp)),t.state){case TC77.NO:this.imgHave.visible=this.imgRed.visible=!1,this.grpIcon.touchChildren=!0;break;case TC77.HAVE:this.imgHave.visible=!0,this.imgRed.visible=!1,this.grpIcon.touchChildren=!0;break;case TC77.CAN:this.imgRed.visible=!0,this.imgHave.visible=this.grpIcon.touchChildren=!1}},t}(eui.Component);__reflect(DailyProgressItemView.prototype,"DailyProgressItemView");var DailyTaskItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName=DailyTaskItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoBtn,this)},t.prototype.close=function(){this.goBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoBtn,this)},t.prototype.dataChanged=function(){this.nameLb.$setText(this.data.name);var t=this.data.hasfinish,e=this.data.completelimit;switch(this.data.mark){case 1:this.grpMark.visible=!0,this.lbStr.textFlow=M18.HTP.parse(O3.tr(6593)),this.imgDi.source="v1_img_biaqoian_lan_png";break;case 2:this.grpMark.visible=!0,this.lbStr.textFlow=M18.HTP.parse(O3.tr(6594)),this.imgDi.source="v1_img_biaqoian_hong_png";break;default:this.grpMark.visible=!1}t<e?(this.timesLb.textFlow=M18.HTP.parse(O3.tr(6815,t,e)),this.goBtn.label=O3.tr(908),this.goBtn.enabled=!0,P16.sGF(this.goBtn,!1)):(this.timesLb.textFlow=M18.HTP.parse(O3.tr(6816,t,e)),this.goBtn.label=O3.tr(909),this.goBtn.enabled=!1,P16.sGF(this.goBtn,!0)),null==this.data.jumpto&&(this.goBtn.enabled=!1,P16.sGF(this.goBtn,!0)),this.expLb.$setText(O3.tr(902,this.data.dailyexp)),this.data.index%2==0?this.bgImg.$setVisible(!0):this.bgImg.$setVisible(!1)},t.prototype.onClickGoBtn=function(){if(this.data.jumpto){var t={sLink:this.data.jumpto};if(this.data.unlock){var e=this.data.unlock.split(":"),i=TG56.FE85(e[0]),s=parseInt(i[e[1]].value);s<=App.CM.gtM(O6.B82).avatarInfo.l?TG84.goToDlg(t):P18.sDP(O3.tr(906,s))}else TG84.goToDlg(t)}},t}(eui.ItemRenderer);__reflect(DailyTaskItemView.prototype,"DailyTaskItemView");var DailyTaskTimeItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName=DailyTaskTimeItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoBtn,this),this.imgDi.source="v1_img_biaqoian_lv_png",this.lbStr.textFlow=M18.HTP.parse(O3.tr(6592))},t.prototype.close=function(){this.goBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoBtn,this)},t.prototype.dataChanged=function(){this.grpMark.visible=this.data.isOpen;var t="";if(0==this.data.week[0])t=P6.FM2(this.data.week[0]);else{for(var e=this.data.week,i=0;i<e.length;i++)i?t+=P6.FL21(e[i])+"、":t=O3.tr(6675)+P6.FM2(e[i])+"、";t=t.substring(0,t.length-1)}var s=P6.FJ11(this.data.openTime,9),o=P6.FJ11(this.data.overTime,9);this.lbTime.textFlow=M18.HTP.parse(O3.tr(6599,t,s,o)),this.nameLb.$setText(this.data.name);var r=this.data.hasfinish,n=this.data.completelimit;switch(this.goBtn.visible=!0,this.imgOverdue.visible=!1,this.data.state){case TE79.HAVE:this.goBtn.label=O3.tr(909),P16.sGF(this.goBtn,!0),this.goBtn.enabled=!1,this.goBtn.imgNew.visible=!1;break;case TE79.CAN:this.goBtn.label=O3.tr(908),this.goBtn.imgNew.visible=!0,P16.sGF(this.goBtn,!1),this.goBtn.enabled=!0;break;case TE79.NO:case TE79.WAIT:this.goBtn.label=O3.tr(6591),P16.sGF(this.goBtn,!0),this.goBtn.enabled=!1,this.goBtn.imgNew.visible=!1;break;case TE79.OVER:this.goBtn.visible=!1,this.imgOverdue.visible=!0}this.timesLb.textFlow=r<n?M18.HTP.parse(O3.tr(6815,r,n)):M18.HTP.parse(O3.tr(6816,r,n)),null==this.data.jumpto&&(this.goBtn.enabled=!1,P16.sGF(this.goBtn,!0)),this.expLb.$setText(O3.tr(902,this.data.dailyexp)),this.data.index%2==0?this.bgImg.$setVisible(!0):this.bgImg.$setVisible(!1)},t.prototype.onClickGoBtn=function(){if(this.data.jumpto){var t={sLink:this.data.jumpto};if(this.data.unlock){var e=this.data.unlock.split(":"),i=TG56.FE85(e[0]),s=parseInt(i[e[1]].value);s<=App.CM.gtM(O6.B82).avatarInfo.l?TG84.goToDlg(t):P18.sDP(O3.tr(906,s))}else TG84.goToDlg(t)}},t}(eui.ItemRenderer);__reflect(DailyTaskTimeItemView.prototype,"DailyTaskTimeItemView");var DailyTaskView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.bCanUpgrade=!1,i.skinName=DailyTaskSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection,this.dgRewards.itemRenderer=ItemIcon,this.rewardsCollection=new eui.ArrayCollection,this.dgRewards.dataProvider=this.rewardsCollection,this.awardsSc.viewport=this.dgRewards,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF,this.proBar.slideDuration=0,this.fieldBar.slideDuration=0,this.fieldBar.labelDisplay.visible=!1;var t={render:DailyTaskItemView,gap:0,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t);var e=this.listView.itemList.layout;e instanceof eui.VerticalLayout&&(e.paddingTop=4),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0;var i={render:DailyTaskTimeItemView,gap:0,width:this.listGroup0.width,height:this.listGroup0.height};this.listView0=new CommonListBase(i),this.listGroup0.addChild(this.listView0),this.listView0.verticalCenter=0,this.listView0.horizontalCenter=0,this.lbStr7.textFlow=M18.HTP.parse(O3.tr(6589));var s={render:DailyActiveItemView,gap:4,width:this.listGroup1.width,height:this.listGroup1.height};this.listView1=new CommonListBase(s),this.listGroup1.addChild(this.listView1),this.listView1.verticalCenter=0,this.listView1.horizontalCenter=0,this.upgradeBtn.label=O3.tr(4490),this.findBackBtn.label=O3.tr(4491),this.lbStr1.textFlow=this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5713)),this.lbStr2.textFlow=this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5714)),this.lbStr3.textFlow=this.lbStr6.textFlow=M18.HTP.parse(O3.tr(5715)),this.lbStr11.textFlow=M18.HTP.parse(O3.tr(6602))},t.prototype.ZL2=function(){var t=[],e=P7.copyTab(M17.FC91()),i=0;for(var s in e)i+=1,e[s].index=i,t.push(e[s]);return t},t.prototype.FA90=function(){var t=[],e=P7.copyTab(M17.FA90()),i=0;for(var s in e)i+=1,e[s].index=i,t.push(e[s]);return t},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.listView.open(),this.GX5(),this.upgradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.findBackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO12,this),this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.ZW26()},t.prototype.updateMenu=function(){var t=TG56.FI31();this.menuCollection.replaceAll(t)},t.prototype.ZW26=function(){this.grpBase.visible=this.grpRi.visible=!0,this.grpActive.visible=this.grpTime.visible=!1},t.prototype.updateCome=function(){this.ZO9(),this.ZR81(),this.ZL3(),this.updateReward()},t.prototype.ZO9=function(){var t=this.ZL2();this.listView.rfL(t)},t.prototype.setTimeState=function(){this.grpBase.visible=this.grpTime.visible=!0,this.grpActive.visible=this.grpRi.visible=!1},t.prototype.ZR81=function(){var t=this.FA90();this.listView0.rfL(t)},t.prototype.ZR82=function(){this.grpBase.visible=!1,this.grpActive.visible=!0},t.prototype.ZL3=function(){var t=TG56.FC23();this.listView1.rfL(t)},t.prototype.updateReward=function(){var t=App.CM.gtM(O6.C5);this.lbNum.textFlow=M18.HTP.parse(O3.tr(6595,t.dt.dp));var e=TG56.FHH10(),i=t.dt.dp,s=e[e.length-1].exp;s<i&&(i=s),this.proBar.value=i,this.proBar.maximum=s;for(var o=0;o<this.grpHave.numChildren;o++){this.grpHave.getChildAt(o).setData(e[o])}},t.prototype.selectChange=function(t){switch(t.currentTarget.selectedIndex){case 0:this.ZW26();break;case 1:this.setTimeState();break;case 2:this.ZR82()}TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];switch(t instanceof TG54&&this.GX5(),s){case P4.K48:case P4.Q62:case P4.S20:case P4.V99:case P4.K62:case P4.Q76:case P4.K41:case P4.Q56:case P4.W46:case P4.U71:case P4.T64:case P4.X89:case P4.V96:this.GX5()}},t.prototype.GX5=function(){this.updateCome(),this.updateMenu();var t=App.CM.gtM(O6.C5),e=t.dt.level,i=M17.FC93(e);if(this.powerLb.text=t.dt.score+"",this.lvLb.text=O3.tr(933,e),M17.FB61())this.fieldBar.maximum=100,this.fieldBar.value=100,this.expBarLb.$setText(O3.tr(910));else{var s=t.dt.exp,o=i.exp;this.bCanUpgrade=o<=s,this.fieldBar.maximum=o,this.fieldBar.value=s,this.expBarLb.$setText(O3.tr(907,s,o))}P7.FD53(this.upgradeBtn,TG56.FA61());var r=TG56.FD84();this.attrName0.textFlow=M18.HTP.parse(O3.tr(6813,r[0].name)),this.attrName1.textFlow=M18.HTP.parse(O3.tr(6813,r[1].name)),this.attrName2.textFlow=M18.HTP.parse(O3.tr(6813,r[2].name)),this.attrValueLb0.textFlow=M18.HTP.parse(O3.tr(6814,r[0].num)),this.attrValueLb1.textFlow=M18.HTP.parse(O3.tr(6814,r[1].num)),this.attrValueLb2.textFlow=M18.HTP.parse(O3.tr(6814,r[2].num));var n=M18.FL28(i.nextreward,";",":");this.ZU24(n)},t.prototype.ZU24=function(t){var s=[];0<t.length&&t.forEach(function(t){var e=N12.gID(t[0]);if(e){e.ct=t[1];var i={data:e,ct:t[1]};s.push({itemData:i,isBottom:!1})}}),this.rewardsCollection.replaceAll(s)},t.prototype.ZR46=function(){if(M17.FB61())P18.sDP(O3.tr(910));else if(this.bCanUpgrade){App.CM.apF(O6.C5,N3.A45,{})}else P18.sDP(O3.tr(917))},t.prototype.ZO12=function(){M17.FB61()?P18.sDP(O3.tr(918)):TG56.FB25().length<=0?P18.sDP(O3.tr(919)):this.aCF(O6.C5,N3.A43)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.listView.close(),this.upgradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.findBackBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO12,this),this.bCanUpgrade=null,this.rewardsCollection.removeAll()},t}(BaseEuiView);__reflect(DailyTaskView.prototype,"DailyTaskView");var SweepArmyView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.starLbList=[],i.starImgList=[],i.skinName=SweepArmySkin,i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.dgRewards.itemRenderer=ItemIcon,this.rewardsCollection=new eui.ArrayCollection,this.dgRewards.dataProvider=this.rewardsCollection,this.awardsSc.viewport=this.dgRewards,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF;var t=parseInt(I6.gIV("fullRebelStar")),e=O3.tr(900,t);this.maxStarLb.textFlow=M18.HTP.parser(e),this.starLbList=[this.starLb0,this.starLb1,this.starLb2,this.starLb3,this.starLb4,this.starLb5,this.starLb6],this.starImgList=[this.starImg1,this.starImg2,this.starImg3,this.starImg4,this.starImg5,this.starImg6,this.starImg7];for(var i=0;i<7;i++){var s=i+1,o=I6.FB65(s),r=O3.tr(901,s,Math.ceil(100*o));this.starLbList[i].textFlow=M18.HTP.parser(r)}this.challengeBtn.label=O3.tr(5328),this.dlg.title=O3.tr(5329)},t.prototype.initData=function(){n.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!=t&&0<t.length&&null!=t[0]&&(this.openRebel=!0,this.rebelData=t[0]),this.challengeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR83,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtn,this),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.updateViews();var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e),t instanceof TG54&&(e[0]!=P4.D81&&e[0]!=P4.C4||this.updateViews()),t instanceof TF89&&this.ZD69(t)},t.prototype.ZD69=function(t){if(P7.FG67())this.gpMonth.visible=!1;else{this.gpMonth.visible=!0;var e=t.ZT74(),i=t.ZHH38();0<e||0!=i.isBuy?(this.lbMonth1.textFlow=M18.HTP.parser(O3.tr(6002)),this.lbMonth2.visible=this.lbMonth2.includeInLayout=!1,this.lbMonth2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMonth,this)):(this.lbMonth2.visible=this.lbMonth2.includeInLayout=!0,this.lbMonth1.textFlow=M18.HTP.parser(O3.tr(5518)),this.lbMonth2.textFlow=M18.HTP.parser(O3.tr(5519)),this.lbMonth2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMonth,this))}},t.prototype.onClickMonth=function(){TG84.FM16(1503)},t.prototype.close=function(){this.challengeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR83,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtn,this),this.lbMonth2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMonth,this),this.openRebel=null,this.rebelGp.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.rewardsCollection.removeAll()},t.prototype.updateViews=function(){var t=App.CM.gtM(O6.C5),e=t.rt.rebelVos,i=!1;if(this.openRebel)for(var s=0;s<e.length;s++)if(this.rebelData.id==e[s].id){i=!0,this.rebelData=e[s];break}i||(this.rebelData=e[0]);var o=N17.FF93(this.rebelData.bossId);this.armyNameLb.textFlow=M18.HTP.parse(O3.tr(5327)),null==this.objBoss&&(this.objBoss=new FightGameObject,this.objBoss.action=Action.Stand);var r={id:parseInt(o.image),x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss.setData(r,this.rebelGp);for(s=0;s<7;s++){s+1>this.rebelData.star?this.starImgList[s].source="v1_img_star2_png":this.starImgList[s].source="v1_img_star1_png"}var n=I6.FC96(G7.A4),a=M18.FL28(n,";",":");this.ZU24(a);var h=O3.tr(935,t.rt.rebelsNum);this.rebelsNumLb.textFlow=M18.HTP.parser(h)},t.prototype.ZU24=function(t){var s=[];if(0<t.length){var o=I6.FB65(this.rebelData.star);t.forEach(function(t){var e=N12.gID(t[0]);if(e){e.ct=t[1]*o;var i={data:e,ct:e.ct};s.push({itemData:i,isBottom:!1})}})}this.rewardsCollection.replaceAll(s)},t.prototype.oCC=function(){App.CM.apF(O6.C5,N3.A48)},t.prototype.ZR83=function(){var t=this.rebelData.id;App.CM.apF(O6.C5,N3.A11,t)},t.prototype.onAddBtn=function(){var t=this,e=this.rebelData.star;if(I6.FD87()<=e)P18.sDP(O3.tr(928));else{var i=parseInt(I6.gIV("fullRebelStar")),s=function(){t.upStarReq(t.rebelData.id)};if(i<=N12.giC(N12.itemId.bindGold))s();else{var o={handler:s,cost:i,costTp:P10.A2,content:O3.tr(929)};App.VM.open(O7.C54,o)}}},t.prototype.upStarReq=function(t){App.CM.apF(O6.C5,N3.A16,t)},t}(BaseEuiView);__reflect(SweepArmyView.prototype,"SweepArmyView"),function(t){var e=function(){this.retrieveList=[],this.completeList=[],this.score=0,this.ap=0,this.dp=0,this.mw=[],this.dw=[]};(daily||(daily={})).DailyTask=e,__reflect(e.prototype,"daily.DailyTask")}(),function(t){var e=function(){this.finish=0};(daily||(daily={})).MonsterTraining=e,__reflect(e.prototype,"daily.MonsterTraining")}(),function(t){var e=function(){function t(){this.finish=0,this.rebelsNum=0,this.cd=0,this.isWin=0,this.rebels=[],this.rebelVos=[],this.rebelVos=[]}return t.prototype.ZR84=function(t){for(var e in t)this[e]=null==t[e]?this[e]:t[e];if(t.cd&&(this.lastLoadTime=Math.ceil((new Date).getTime()/1e3)),this.rebelVos=[],(this.rebelsNum=0)<this.rebels.length){this.rebelsNum=this.rebels.length;for(var i=0;i<this.rebels.length;i++){var s=new RebelVo(this.rebels[i]);this.rebelVos.push(s)}}},t.prototype.setFromScene=function(t){this.fromScene=t},t.prototype.getFromScene=function(){return this.fromScene},t}();t.RebelsTraining=e,__reflect(e.prototype,"daily.RebelsTraining")}(daily||(daily={}));var daily,RebelVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){t&&(this.id=t.id,this.bossId=t.bossId,this.star=t.star)},t}();__reflect(RebelVo.prototype,"RebelVo"),function(t){var e=function(){this.finish=0};(daily||(daily={})).TeamTraining=e,__reflect(e.prototype,"daily.TeamTraining")}();var L1=function(){function o(){}return o.FK35=function(t){for(var e in o.init=t.dragon_init,o.sky=o.dealSky(t.dragon_sky),o.skyExt=o.FK74(),o.tongque=o.FK73(t.dragon_tongque),o.through=t.dragon_through,o.award=t.dragon_award,o.material=t.dragon_material,o.fairyland=t.dragon_fairyland,o.fairylandOpenLevl=parseInt(o.init.fairylandOpenLevl.value),o.fairylandOpenDay=parseInt(o.init.fairylandOpenDay.value),o.fairyFreeTimes=parseInt(o.init.fairyFreeTimes.value),o.fairyBuyTimes=parseInt(o.init.fairyBuyTimes.value),o.fairyCost=parseInt(o.init.fairyCost.value),o.fairylandMaxLevel=Reincarnate.Utils.mapkeyMax(o.fairyland),this.ordinaryNum=0,this.difficultyNum=0,this.through)2e3<this.through[e].id?this.difficultyNum++:this.ordinaryNum++},o.FG8=function(t){var e=void 0;for(var i in o.through){var s=o.through[i];if(s.id==t){e=s;break}}return e},o.FHH13=function(t){var e=void 0;for(var i in o.tongque){var s=o.tongque[i];if(s.id==t){e=s;break}}return e},o.FK72=function(t){var e=void 0;for(var i in o.sky){var s=o.sky[i];if(s.id==t){e=s;break}}return e},o.FC97=function(t){var e=void 0;for(var i in o.through){var s=o.through[i];if(s.index==t){e=s;break}}return e},o.FK73=function(t){var e=new Array;for(var i in t){var s=t[i];e.push(s)}e=e.sort(P7.FM7);for(i=0;i<e.length;i++)e[i].index=i+1;return t},o.dealSky=function(t){var e=new Array;for(var i in t){var s=t[i];e.push(s)}e=e.sort(P7.FM7);for(i=0;i<e.length;i++)e[i].index=i+1;return t},o.FK74=function(){var t={},e=1;for(var i in o.sky){var s=o.sky[i];s&&(s.ext&&"0"==s.ext||(t[e]=s,e++))}return t},o.FE86=function(){var t=0;for(var e in o.sky){var i=o.sky[e];0==t&&(t=i.id),i.id<t&&(t=i.id)}return t},o.FE87=function(){var t=0;for(var e in o.sky){var i=o.sky[e];i.id>t&&(t=i.id)}return t},o.FB66=function(t){var e=void 0;for(var i in o.sky){var s=o.sky[i];if(s.index==t){e=s;break}}return e},o.FC24=function(){var t=0;for(var e in o.tongque){var i=o.tongque[e];i.id>t&&(t=i.id)}return t},o.FA63=function(t){var e=void 0;for(var i in o.tongque){var s=o.tongque[i];if(s.index==t){e=s;break}}return e},o.FD88=function(){for(var t in o.award){if(1==o.award[t].type)return!0}return!1},o.FE88=function(){var t=App.CM.gtM(O6.B43),e=O4.getLv(),i=t.serOpenDay+1;return o.fairylandOpenLevl<=e&&o.fairylandOpenDay<=i},o}();__reflect(L1.prototype,"L1");var L15=function(){function t(){}return t.A44=10001,t.A45=10002,t.A5=10003,t.A6=10004,t.A20=10005,t.A21=10006,t.A9=10007,t.A10=10008,t.A36=10009,t.A37=10010,t.A16=10011,t.A17=10012,t.A29=10013,t.A30=10014,t.A38=10015,t.A39=10016,t.A31=10017,t.A32=10018,t.A22=10019,t.A23=10020,t.A1=10021,t.A2=10022,t.A13=10023,t.A14=10024,t.A3=10025,t.A4=10026,t.A24=10027,t.A25=10028,t.A7=10029,t.A8=10030,t.A11=10031,t.A12=10032,t.A27=10033,t.A28=10034,t.A42=10035,t.A40=10036,t.A34=10037,t.A33=10038,t.A26=10039,t.A18=10040,t.A46=10041,t.A43=10042,t.A19=10043,t.A15=10044,t.A41=10045,t.A35=10046,t}();__reflect(L15.prototype,"L15");var TD40=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.G46,"DragonMainView",t,K17.UI_Main_TOP),t.rgF(L15.A42,t.GJ34,t),t.rgF(L15.A40,t.GHH51,t),App.VM.register(O7.I9,"DragonRTView",t,K17.UI),App.VM.register(O7.HH40,"ThroughRTView",t,K17.UI),App.VM.register(O7.A48,"LibraryStarView",t,K17.UI),App.VM.register(O7.HeroBattleFight,"HeroBattleFightView",t,K17.UI),App.VM.register(O7.A22,"ChallengeResultView",t,K17.UI_Popup),App.VM.register(O7.B71,"BronzeRankView",t,K17.UI_Main_TOP),App.VM.register(O7.F14,"BronzeResultView",t,K17.UI_Popup),App.VM.register(O7.D96,"SkyRankView",t,K17.UI_Main_TOP),t.rgF(L15.A46,t.GP2,t),t.rgF(L15.A43,t.GN11,t),App.VM.register(O7.B26,"ThroughRankView",t,K17.UI_Main_TOP),t.rgF(L15.A41,t.GHH52,t),t.rgF(L15.A35,t.GF68,t),App.VM.register(O7.A14,"CheckPointResultView",t,K17.UI_Popup),t.rgF(L15.A19,t.GB85,t),t.rgF(L15.A15,t.GB24,t),App.VM.register(O7.HH88,"FairylandView",t,K17.UI_Main_TOP),App.VM.register(O7.B54,"FairylandBuyView",t,K17.UI_Main_TOP),App.VM.register(O7.B17,"FairylandRewardView",t,K17.UI_Main_TOP),App.VM.register(O7.F52,"FairylandRankView",t,K17.UI_Main_TOP);var e=new TG15(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.D14),e.aLV(O7.HH98),e.aLV(O7.HH28),e.aLV(O7.I3),e.aLV(O7.HH39),e.aLV(O7.D97),e.aLV(O7.I64),e.aLV(O7.I63),e.aLV(O7.I39),e.aLV(O7.G46),e.aLV(O7.E83),e.aLV(O7.A22),e.aLV(O7.F14),e.aLV(O7.F10),e.aLV(O7.HH88),e.aLV(O7.B54),e.aLV(O7.B17),e.aLV(O7.F52),t.dragonProxy=new TG16(t),t.rgF(L15.A44,t.GS83,t),t.rgF(L15.A45,t.GS84,t),t.rgF(L15.A5,t.GA88,t),t.rgF(L15.A6,t.GA89,t),t.rgF(L15.A20,t.GD57,t),t.rgF(L15.A21,t.GD58,t),t.rgF(L15.A9,t.GA90,t),t.rgF(L15.A10,t.GA91,t),t.rgF(L15.A16,t.GE52,t),t.rgF(L15.A17,t.GE53,t),t.rgF(L15.A29,t.GJ35,t),t.rgF(L15.A30,t.GJ36,t),t.rgF(L15.A31,t.GJ37,t),t.rgF(L15.A32,t.GJ38,t),t.rgF(L15.A38,t.GN12,t),t.rgF(L15.A39,t.GN13,t),t.rgF(L15.A22,t.GC69,t),t.rgF(L15.A23,t.GC70,t),t.rgF(L15.A1,t.GB25,t),t.rgF(L15.A2,t.GB26,t),t.rgF(L15.A13,t.GN14,t),t.rgF(L15.A14,t.GN15,t),t.rgF(L15.A3,t.GC71,t),t.rgF(L15.A4,t.GC72,t),t.rgF(L15.A24,t.GF69,t),t.rgF(L15.A25,t.GF70,t),t.rgF(L15.A7,t.GB86,t),t.rgF(L15.A8,t.GB87,t),t.rgF(L15.A27,t.GHH53,t),t.rgF(L15.A28,t.GHH54,t),t.rgF(L15.A11,t.GA92,t),t.rgF(L15.A12,t.GA93,t),t.rgF(P4.B37,t.GQ83,t),t.rgF(parseInt(P4.B38),t.GL23,t),t.rgF(P4.D61,t.dragonProxy.ZG71,t.dragonProxy),t.rgF(parseInt(P4.D62),t.GE54,t),t.rgF(P4.I10,t.dragonProxy.ZI39,t.dragonProxy),t.rgF(parseInt(P4.I11),t.GF71,t),t}return __extends(t,i),t.prototype.GJ34=function(t){void 0===t&&(t=O7.D14),App.VM.open(O7.G46,t,"byFight")},t.prototype.GHH51=function(){App.VM.close(O7.G46,"byFight")},t.prototype.GP2=function(t){App.VM.open(O7.D96)},t.prototype.GN11=function(){App.VM.close(O7.D96)},t.prototype.GS83=function(){return this.dragonProxy.GS83()},t.prototype.GS84=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZR85(t.body),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA88=function(t,e){TG53.FJ54()||App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.dragonProxy.GA88(t,e))},t.prototype.GA89=function(t,e,i){var s=this;if(!t||!t.head||200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void this.ZT94(O6.B99,N1.A5);if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var o=t.body;o.did=e;var r=this.gtM();if(r.ZG70(o,P4.D60),r.notify(P4.D60),0!=i){var n=P7.isGetView(O7.D14);this.GHH51(),App.CM.apF(O6.B99,N1.A11,o.fr,{did:e,rewards:o.r,needResult:!0,type:P15.A4,isAuto:n},function(t,e){e&&s.GJ34(O7.D14)},this)}else if(o.r&&1==o.w){var a={rewards:o.r};App.VM.open(O7.F74,1,a)}else App.VM.open(O7.F74,0,{})}},t.prototype.GD57=function(t){TG53.FJ54()||this.dragonProxy.GD57(t)},t.prototype.GD58=function(t,e){if(t&&t.head&&200==t.head.state){var i=t.body;i.did=e;var s=this.gtM();if(s.ZG70(i,P4.J86),s.notify(P4.J86),1==i.w){var o={rewards:i.r};App.VM.open(O7.F74,1,o)}else P18.sDP(O3.tr(5666))}else 215==t.head.state?P7.FA78():App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA90=function(t){TG53.FJ54()||this.dragonProxy.GA90()},t.prototype.GA91=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();if(i.ZG70(e,P4.E85),i.notify(P4.E85),1==e.w){var s={rewards:e.r};App.VM.open(O7.F74,1,s)}else P18.sDP(O3.tr(5666))}else 215==t.head.state?P7.FA78():App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE52=function(t){TG53.FJ54()||App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.dragonProxy.GE52(t))},t.prototype.GE53=function(t,e){var i=this;if(!t||!t.head||200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),this.ZT94(O6.B99,N1.A5),void App.VM.gOV(O7.HH39).ZW28();if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var s=t.body;s.did=e;var o=this.gtM();o.ZW27(s,P4.I9),o.notify(P4.I9);var r=P7.isGetView(O7.HH39);this.GHH51(),App.CM.apF(O6.B99,N1.A11,s.fr,{did:e,rewards:s.r,needResult:!0,type:P15.A12,isAuto:r},function(t,e){e&&i.GJ34(O7.HH39)},this)}},t.prototype.GJ35=function(){TG53.FJ54()||this.dragonProxy.GJ35()},t.prototype.GJ36=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();if(i.ZW27(e,P4.N91),i.notify(P4.N91),1==e.w){var s={rewards:e.r};App.VM.open(O7.F74,1,s)}else P18.sDP(O3.tr(5666))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ37=function(t){this.dragonProxy.GJ37(t)},t.prototype.GJ38=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZW27(e,P4.N93),i.notify(P4.N93),e.r&&P5.sIs(e.r),App.VM.close(O7.F14)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN12=function(t){this.dragonProxy.GN12(t)},t.prototype.GN13=function(t){if(t&&t.head&&200==t.head.state)t.body;else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC69=function(){this.dragonProxy.GC69()},t.prototype.GC70=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZF21(e),i.notify(P4.X79)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH52=function(){App.VM.open(O7.B26)},t.prototype.GF68=function(){App.VM.close(O7.B26)},t.prototype.GB85=function(t){App.VM.open(O7.A14,t)},t.prototype.GB24=function(){App.VM.close(O7.A14)},t.prototype.GB25=function(t){if(!TG53.FJ54()){var e=TG57.FB26(t);if(e)if(App.CM.gtM(O6.B82).avatarInfo.l<e.level)P18.sDP(O3.tr(5668,e.level));else App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.dragonProxy.GB25(t));else P18.sDP(O3.tr(5667))}},t.prototype.GB26=function(t,e){var i=this;if(!t||!t.head||200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),this.ZT94(O6.B99,N1.A5),void App.VM.gOV(O7.D97).ZW28();if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var s=t.body;s.did=e;var o=this.gtM(),r=void 0,n=App.CM.gtM(O6.B82);TG57.hasPass(e)?r=1:2<=n.avatarInfo.v&&(r=4),o.ZI38(s,P4.C73),o.notify(P4.C73);var a=P7.isGetView(O7.D97);this.GHH51(),App.CM.apF(O6.B99,N1.A11,s.fr,{star:s.s,did:e,rewards:s.r,needResult:!0,skip:r,type:P15.A7,isAuto:a},function(t,e){e&&i.GJ34(O7.D97)},this)}},t.prototype.GN14=function(){TG53.FJ54()||this.dragonProxy.GN14()},t.prototype.GN15=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZI38(e,P4.G40),i.notify(P4.G40);if(1==e.w){var s={rewards:e.r,star:3};App.VM.open(O7.F74,1,s)}else P18.sDP(O3.tr(5666))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC71=function(t,e){this.dragonProxy.GC71(t,e)},t.prototype.GC72=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZI38(e,P4.C71),i.notify(P4.C71),e.r&&P5.sIs(e.r),App.VM.close(O7.A22)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF69=function(t){this.dragonProxy.GF69(t)},t.prototype.GF70=function(t){t&&t.head&&200==t.head.state||App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB86=function(t){TG53.FJ54()||App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.dragonProxy.GB86(t))},t.prototype.GB87=function(t,e){var i=this;if(!t||!t.head||200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),this.ZT94(O6.B99,N1.A5),void App.VM.gOV(O7.E83).ZW28();if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var s=t.body,o=this.gtM();o.ZL4(s,P4.G42),o.notify(P4.G42);var r=P7.isGetView(O7.E83);this.GHH51(),App.CM.apF(O6.B99,N1.A11,s.fr,{did:e,rewards:s.ob,needResult:!0,type:P15.A13,isAuto:r},function(t,e){e&&i.GJ34(O7.E83)},this)}},t.prototype.GHH53=function(t){this.dragonProxy.GHH53(t)},t.prototype.GHH54=function(t){if(t&&t.head&&200==t.head.state){var e=t.body;App.VM.open(O7.B71,e)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA92=function(){this.dragonProxy.GA92()},t.prototype.GA93=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZC45(e),i.notify(P4.X79)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ83=function(t){this.gtM().fairylandAutoChallenge=t,this.dragonProxy.GQ83()},t.prototype.GL23=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(200==t.head.state){var o=this.gtM(),r=t.body,n=r.fr,a=r.ob,h=r.w,p=r.cob;if(n){var l=P7.FM8([],!0,p||[],a||[]);0==h&&(o.fairylandAutoChallenge=!1),n.v=1,App.CM.apF(O6.B99,N1.A11,n,{rewards:l,needResult:!0,type:P15.A38},function(){App.VM.open(O7.G46,O7.HH88,o.fairylandAutoChallenge),o.fairylandAutoChallenge=!1},this)}o.ZO13.apply(o,[t.body,e].concat(i))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE54=function(t){200==t.head.state?(this.gtM().ZO13(t.body,!0),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF71=function(t){200==t.head.state?(this.gtM().ZO13(t.body,!0),P18.sDP(O3.tr(558))):215==t.head.state?P7.FA78():App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TD40.prototype,"TD40");var TG15=function(i){function t(t){var e=i.call(this,t)||this;return e.isOrdinary=!0,e.fairylandAutoChallenge=!1,e.landVo=new dragon.FairyLandVo,e}return __extends(t,i),t.prototype.ZR85=function(t){this.md=t.md,this.sd=t.sd,this.td=t.td,this.bd=t.starVo,this.landVo.update(t.landVo),this.tdAuto=!1,this.tdW=0,this.sdAuto=!1,this.sdW=0,this.bdAuto=!1,this.bdW=0},t.prototype.ZF21=function(t){this.rankBody=t},t.prototype.ZO13=function(t,e){void 0===e&&(e=!1);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.landVo.update(t),e&&this.notify.apply(this,i)},t.prototype.ZC45=function(t){this.bRankBody=t},t.prototype.ZB37=function(){var t=0;if(!this.bd||!this.bd.passSet)return t;for(var e=this.bd.passSet,i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return t},t.prototype.passBronze=function(t){var e=!1;return this.bd&&this.bd.passSet?e=-1!=this.bd.passSet.indexOf(t):e},t.prototype.ZD94=function(){var t=0;if(!this.sd||!this.sd.daySet)return t;for(var e=this.sd.daySet,i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return t},t.prototype.ZD5=function(){var t=0;if(!this.sd||!this.sd.passSet)return t;for(var e=this.sd.passSet,i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return t},t.prototype.ZB38=function(){var t=0;if(!this.td||!this.td.dayMap)return t;var e=this.td.dayMap;for(var i in e)Number(i)>t&&(t=Number(i));return t},t.prototype.ZB3=function(){var t=0;if(!this.td||!this.td.passMap)return t;var e=this.td.passMap;for(var i in e)Number(i)>t&&(t=Number(i));return t},t.prototype.ZA56=function(){var t=-1,e=this.td.passMap,i=new Array;for(var s in e)this.td.dayMap[s]||i.push(parseInt(s));if(i.length<=0)return t;t=i[0];for(var o=0,r=i;o<r.length;o++){var n=r[o];n<t&&(t=n)}return t},t.prototype.ZB39=function(){var t=0;if(!this.td||!this.td.passMap)return t;var e=this.td.passMap;for(var i in e)t+=e[i];return t},t.prototype.dayPassSky=function(t){var e=!1;return this.sd&&this.sd.daySet?e=-1!=this.sd.daySet.indexOf(t):e},t.prototype.passSky=function(t){var e=!1;return this.sd&&this.sd.passSet?e=-1!=this.sd.passSet.indexOf(t):e},t.prototype.ZG70=function(t,e){if(t)switch(e){case P4.D60:if(1==t.w){var i=t.did,s=this.md.challengeMap;s[i]||(s[i]=0),s[i]=s[i]+1,this.md.totalPassTime=t.t}break;case P4.J86:if(1==t.w){i=t.did;var o=this.md.sweepMap;o[i]||(o[i]=0),o[i]=o[i]+1,this.md.totalPassTime=t.t}break;case P4.E85:var r=t.w,n=t.cm,a=t.t;r&&(this.md.challengeMap=n||this.md.challengeMap,this.md.totalPassTime=a||this.md.totalPassTime)}},t.prototype.ZW27=function(t,e){if(t)switch(e){case P4.I9:if(1==t.w){var i=t.did;-1==this.sd.daySet.indexOf(i)&&this.sd.daySet.push(i),-1==this.sd.passSet.indexOf(i)&&this.sd.passSet.push(i),this.sdW=t.w;var s=L1.FE87();this.sdAuto=i<s}else this.sdW=0,this.sdAuto=!1;break;case P4.N91:if(1==t.w)for(var o=0;o<this.sd.passSet.length;o++)this.sd.daySet[o]=this.sd.passSet[o];break;case P4.N93:this.sd.extSet=t.es}},t.prototype.ZL4=function(t,e){if(t)switch(e){case P4.G42:if(t.isWin){this.bd.passSet=t.passSet,this.bdW=1;var i=P7.FD54(this.bd.passSet),s=L1.FC24();this.bdAuto=i<s}else this.bdW=0,this.bdAuto=!1}},t.prototype.ZI38=function(t,e){if(t){switch(e){case P4.C73:if(1==t.w){var i=t.did;this.td.dayMap[i]?this.td.dayMap[i]=t.s>this.td.dayMap[i]?t.s:this.td.dayMap[i]:this.td.dayMap[i]=t.s,this.td.passMap[i]?this.td.passMap[i]=this.td.dayMap[i]>this.td.passMap[i]?this.td.dayMap[i]:this.td.passMap[i]:this.td.passMap[i]=this.td.dayMap[i],1==t.dayFirst&&this.td.daySet.push(i),this.tdW=t.w;var s=TG57.FB26(i);if(1==TG57.FD2(s.chapter).type){var o=TG57.FD1();this.tdAuto=i<o.id}else{var r=TG57.FC99();this.tdAuto=i<r.id}}else this.tdW=0,this.tdAuto=!1;break;case P4.G40:if(1==t.w)for(var n in this.td.passMap){i=Number(n);this.td.passMap[i]<3||(this.td.dayMap[i]=this.td.passMap[i],this.td.daySet.push(i))}break;case P4.C71:this.td.rewardMap=t.rm}var a=TF59.FB15(F7.A73);a.openState&&(a.ZJ85(),a.notify())}},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t.prototype.ZA41=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=L1.init.materialOpenLevel.value;if(e.l<i)return t;var s=TG57.FA92();if(!s||0==s.length)return t;for(var o=0;o<s.length;o++){var r=s[o];if("v1_btn_green_1_png"==r.btnBg&&1==r.showRp){t=!0;break}}return t},t.prototype.ZA57=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=L1.init.throughOpenLevel.value;if(e.l<i)return t;for(var s=this.td,o=TG57.FB69(),r=TG57.FD2(o.chapter),n=1;n<=r.id;n++){var a=TG57.FA65(n);if(6<=a&&!TG57.FD91(n,6))return t=!0;if(12<=a&&!TG57.FD91(n,12))return t=!0;if(18<=a&&!TG57.FD91(n,18))return t=!0}if(s.passMap&&0==Object.keys(s.passMap).length)return t=!0;var h=s.passMap,p=s.dayMap;if(Object.keys(h).length!=Object.keys(p).length)return t=!0;var l=TG57.FA18();if(e.v<l)return t;var c=!1;for(var n in h)if(3<=h[n]&&!p[n]){c=!0;break}return c?t=!0:t},t.prototype.redRush=function(){var t=this.td;if(t.passMap&&0==Object.keys(t.passMap).length)return!0;var e=t.passMap,i=t.dayMap;if(Object.keys(e).length!=Object.keys(i).length)return!0;var s=0,o=!0;for(var r in e)Number(r)>s&&(s=Number(r)),e[r]<3&&(o=!1);var n=App.CM.gtM(O6.B82).avatarInfo,a=TG57.FB26(s),h=TG57.FB26(s+1);if(!h){var p=TG57.FD2(a.chapter+1);if(!p)return;h=TG57.FG9(p.id)[1]}if(s<TG57.FC99().id)return n.l>=h.level;if(o){var l=TG57.FD1();if(l&&s<l.id)return n.l>=h.level}},t.prototype.ZB73=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=L1.init.skyOpenLevel.value;if(e.l<i)return t;var s=this.sd,o=s.passSet,r=s.extSet;for(var n in L1.skyExt){var a=L1.skyExt[n];if(-1!=o.indexOf(a.id)&&-1==r.indexOf(a.id))return t=!0}if(s.passSet&&0==s.passSet.length)return t=!0;var h=s.daySet;return o.length!=h.length?t=!0:t},t.prototype.ZB74=function(t){var e=this.landVo.maxLevel;return 0<=this.landVo.yet.indexOf(t)?J13.A2:t<=e?J13.A3:J13.A1},t.prototype.ZO14=function(){return 0<this.ZD6()?1:this.ZL5()},t.prototype.ZD6=function(){if(L1.FE88())for(var t in L1.fairyland)if(this.ZB74(L1.fairyland[t].id)==J13.A3)return 1;return 0},t.prototype.ZL5=function(){return!this.landVo.isAllPassed&&L1.FE88()?this.landVo.count:0},t.prototype.ZA76=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=L1.init.tongqueLv.value;if(e.l<i)return t;var s=this.bd;return s.passSet&&0==s.passSet.length?t=!0:t},t}(TG79);__reflect(TG15.prototype,"TG15");var TG16=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.V60,e.ZR86,e),e}return __extends(t,i),t.prototype.ZR86=function(t){this.apF(L15.A45,t)},t.prototype.GS83=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W25,body:{}};s.rSMO(P4.W26,function(t){s.apF(L15.A45,t),e("加载副本信息完成")},s),s.sSM(i)})},t.prototype.GA88=function(t,e){var i={type:P4.D59,body:{did:t,needFight:e}},s={};s.did=t,s.needFight=e,this.rSMO(P4.D60,this.GA89,this,s),this.sSM(i)},t.prototype.GA89=function(t,e){var i=e.did,s=e.needFight;this.apF(L15.A6,t,i,s)},t.prototype.GD57=function(t){var e={type:P4.J85,body:{did:t}},i={};i.did=t,this.rSMO(P4.J86,this.GD58,this,i),this.sSM(e)},t.prototype.GD58=function(t,e){var i=e.did;this.apF(L15.A21,t,i)},t.prototype.GA90=function(){var t={type:P4.E84,body:{}};this.rSMO(P4.E85,this.GA91,this),this.sSM(t)},t.prototype.GA91=function(t){this.apF(L15.A10,t)},t.prototype.GE52=function(t){var e={type:P4.I8,body:{did:t}},i={};i.did=t,this.rSMO(P4.I9,this.GE53,this,i),this.sSM(e)},t.prototype.GE53=function(t,e){var i=e.did;this.apF(L15.A17,t,i)},t.prototype.GJ35=function(){var t={type:P4.N90,body:{}};this.rSMO(P4.N91,this.GJ36,this),this.sSM(t)},t.prototype.GJ36=function(t){this.apF(L15.A30,t)},t.prototype.GN12=function(t){var e={type:P4.X78,body:{type:17,currPage:1,size:t}};this.rSMO(P4.X79,this.GN13,this),this.sSM(e)},t.prototype.GN13=function(t){this.apF(L15.A39,t)},t.prototype.GC69=function(){var t={type:P4.X78,body:{type:17,currPage:1,size:3}};this.rSMO(P4.X79,this.GC70,this),this.sSM(t)},t.prototype.GC70=function(t){this.apF(L15.A23,t)},t.prototype.GJ37=function(t){var e={type:P4.N92,body:{did:t}};this.rSMO(P4.N93,this.GJ38,this),this.sSM(e)},t.prototype.GJ38=function(t){this.apF(L15.A32,t)},t.prototype.GB25=function(t){var e={type:P4.C72,body:{did:t}},i={};i.did=t,this.rSMO(P4.C73,this.GB26,this,i),this.sSM(e)},t.prototype.GB26=function(t,e){var i=e.did;this.apF(L15.A2,t,i)},t.prototype.GN14=function(){var t={type:P4.G39,body:{}};this.rSMO(P4.G40,this.GN15,this),this.sSM(t)},t.prototype.GN15=function(t){this.apF(L15.A14,t)},t.prototype.GC71=function(t,e){var i={type:P4.C70,body:{chapterId:t,star:e}};this.rSMO(P4.C71,this.GC72,this),this.sSM(i)},t.prototype.GC72=function(t){this.apF(L15.A4,t)},t.prototype.GF69=function(t){var e={type:P4.X78,body:{type:18,currPage:1,size:t}};this.rSMO(P4.X79,this.GF70,this),this.sSM(e)},t.prototype.GF70=function(t){this.apF(L15.A25,t)},t.prototype.GB86=function(t){var e={type:P4.G41,body:{}},i={};i.did=t,this.rSMO(P4.G42,this.GB87,this,i),this.sSM(e)},t.prototype.GB87=function(t,e){var i=e.did;this.apF(L15.A8,t,i)},t.prototype.GHH53=function(t){var e={type:P4.X78,body:{type:19,currPage:1,size:t}};this.rSMO(P4.X79,this.GHH54,this),this.sSM(e)},t.prototype.GHH54=function(t){this.apF(L15.A28,t)},t.prototype.GA92=function(){var t={type:P4.X78,body:{type:19,currPage:1,size:3}};this.rSMO(P4.X79,this.GA93,this),this.sSM(t)},t.prototype.GA93=function(t){this.apF(L15.A12,t)},t.prototype.GQ83=function(){var t={type:P4.B37,body:{}};this.rSMO(P4.B38,this.ZI40,this),this.sSM(t)},t.prototype.ZG71=function(t,e){var i={type:P4.D61,body:{did:t,key:e}};this.rSMO(P4.D62,this.ZI40,this),this.sSM(i)},t.prototype.ZI39=function(){var t={type:P4.I10,body:{}};this.rSMO(P4.I11,this.ZI40,this),this.sSM(t)},t.prototype.ZI40=function(t){this.apF(t.head.protoType,t)},t}(TG80);__reflect(TG16.prototype,"TG16");var TG57=function(){function b(){}return b.FA92=function(){for(var t=new Array,e=App.CM.gtM(O6.B82),i=e.avatarInfo.l,s=e.avatarInfo.v,o=App.CM.gtM(O6.B85),r=o.md.challengeMap,n=o.md.sweepMap,a=K18.FK45(s),h=void 0,p=K18.FL39(),l=s+1;l<=p&&!((h=K18.FK45(l))&&h.materialtimes>a.materialtimes);l++)l==p&&(h=void 0);var c=L1.init.materialSweepCost.value,u=o.md.sfree,d=a.materialtimes,v=L1.init.materialLv.value,f=!1;for(var l in L1.material){var g=u,m=L1.material[l];i-m.level<v&&(g=L1.init.challengeTimes.value);var y={};if(y.did=String(m.id),y.name=m.name,y.reward=b.FL67(m.reward),y.cost="x"+c,y.showCost=1,y.type="challenge",y.needFight=1,y.showRp=0,y.challengeCount=r[m.id]||0,i<m.level)f||(y.desc=O3.tr(5584,m.level),y.btnDesc=O3.tr(5585),y.showCost=0,y.btnBg="v1_btn_green_1_hui_png",y.btnColor="0xf9edda",t.push(y)),f=!0;else if(!r[m.id]||r[m.id]<g)y.showCost=0,y.desc1=O3.tr(5586),i-m.level>=v?(y.btnDesc=O3.tr(5588),y.needFight=0):y.btnDesc=O3.tr(5585),null==r[m.id]||null==r[m.id]||(g=u-r[m.id]),y.desc2=O3.tr(5587,g),0<g?(y.btnBg="v1_btn_green_1_png",y.btnColor="0xf9edda",y.showRp=1):(y.btnBg="v1_btn_green_1_hui_png",y.btnColor="0xf9edda"),t.push(y);else if(!n[m.id]||n[m.id]<d){y.type="sweep",y.desc1=O3.tr(5586);var A=0;A=null==n[m.id]||null==n[m.id]?d:d-n[m.id],y.desc2=O3.tr(5587,A),y.btnDesc=O3.tr(5589),0<A?(y.btnBg="v1_btn_green_1_png",y.btnColor="0xf9edda"):(y.btnBg="v1_btn_green_1_hui_png",y.btnColor="0xf9edda",h&&(y.desc=O3.tr(5590,h.level,h.materialtimes-a.materialtimes))),t.push(y)}else y.desc=O3.tr(5591),y.btnDesc=O3.tr(5589),y.btnBg="v1_btn_green_1_hui_png",y.btnColor="0xf9edda",h&&(y.desc=O3.tr(5590,h.level,h.materialtimes-a.materialtimes)),t.push(y)}return t},b.FL67=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":")[0],r=i[s].split(":")[1],n=N12.gID(o),a={};a.data=n,a.ct=Number(r);var h={};h.itemData=a,h.isBottom=!1,e.push(h)}return e},b.materialAutoSweepOpen=function(t){var e=App.CM.gtM(O6.B82);return t<App.CM.gtM(O6.B85).md.sfree&&e.avatarInfo.l>=parseInt(L1.init.materialQuick.value)},b.FD89=function(t){var e=0;return N15.material?e=N15.material[t].batchnum:e},b.FE89=function(){var t=new Array,e=App.CM.gtM(O6.B85).ZD94();if(e<=0){var i=1;for(var s in L1.sky){var o=L1.sky[s];if(t.push(o),3<=i)break;i++}return t[0].position="first",t[1].position="second",t[2].position="third",t}var r=L1.FE87(),n=L1.sky[r],a=L1.sky[e].index;if(n.index-a<3){(h=n).position="third",t.push(h),(p=L1.sky[n.id-1]).position="second",t.push(p),(l=L1.sky[n.id-2]).position="first",t.push(l)}else{for(a%3==0&&(a+=1);a%3!=0;)a+=1;var h,p,l;(h=L1.FB66(a)).position="third",t.push(h),(p=L1.FB66(a-1)).position="second",t.push(p),(l=L1.FB66(a-2)).position="first",t.push(l)}return t},b.FHH14=function(){var t=void 0,e=App.CM.gtM(O6.B85).ZD94();if(e<=0){var i=L1.FE86();t=L1.sky[i]}else e+=1,t=L1.sky[e];return t},b.FHH15=function(){var t=O3.tr(5592),e=App.CM.gtM(O6.B85).ZD5();return e<=0?t:t=L1.sky[e].name},b.FD90=function(t){return L1.sky[t]},b.FC98=function(){var t=L1.init.skyWord.value;if(!t)return"";var e=t.split("#");return e&&0!=e.length?e[Math.floor(Math.random()*e.length)]:""},b.FB67=function(t){var e=void 0;if(!L1.skyExt[t])return e;e={};var i=L1.skyExt[t];e.idx=t;var s=(e.dragon=i).id,o=App.CM.gtM(O6.B85),r=o.sd.passSet;r&&0<r.length&&-1!=r.indexOf(s)?e.pass=1:e.pass=0;var n=o.sd.extSet;return n&&0<n.length&&-1!=n.indexOf(s)?e.FL67=1:e.FL67=0,e},b.FC25=function(){var t={idx:1};t.dragon=L1.skyExt[1],t.pass=0,t.FL67=0;var e=App.CM.gtM(O6.B85),i=e.sd.passSet,s=e.sd.extSet;if(!i||0==i.length)return t;for(var o in L1.skyExt){var r=L1.skyExt[o];if(-1==i.indexOf(r.id)){t.idx=parseInt(o),t.dragon=r,t.pass=0,t.FL67=0;break}if(-1==s.indexOf(r.id)){t.idx=parseInt(o),t.dragon=r,t.pass=1,t.FL67=0;break}t.idx=parseInt(o),t.dragon=r,t.pass=1,t.FL67=1}return t},b.FE90=function(){var t=0;return TG75.rank?t=TG75.rank[17].count:t},b.FB68=function(){var t=0;return TG75.rank?t=TG75.rank[18].count:t},b.FC26=function(){var t=0;return TG75.rank?t=TG75.rank[19].count:t},b.FA25=function(){var t=300;return TG75.init?t=TG75.init.refreshInterval.value:t},b.FB26=function(t){var e=null;return L1.through&&t?e=L1.through[t]:e},b.FA93=function(){var t=null;if(!L1.through)return t;for(var e in L1.through){t=L1.through[e];break}return t},b.FC99=function(){var t=null;if(!L1.through)return t;var e=0;for(var i in L1.through){var s=L1.through[i];2e3<=s.id||s.id>e&&(e=s.id)}return t=L1.through[e]},b.FD1=function(){var t=null;if(!L1.through)return t;var e=0;for(var i in L1.through){var s=L1.through[i];s.id<2e3||s.id>e&&(e=s.id)}return t=L1.through[e]},b.FD2=function(t){return L1.award[t]},b.FB27=function(){var t=null;if(!L1.award)return t;var e=0;for(var i in L1.award){var s=L1.award[i];s.id>e&&(e=s.id)}return t=L1.award[e]},b.FA64=function(){var t={};if(!L1.through||!L1.award)return t;var e=App.CM.gtM(O6.B85),i=e.ZB38();if(i<=0){for(var s in L1.through){t=L1.through[s];break}return t}var o=e.ZA56();if(-1!=o)return t=L1.through[o];if(!(t=L1.through[i+1])){var r=L1.through[i],n=L1.award[r.chapter],a=L1.award[r.chapter+1];if(!a)return L1.through[i];if(n.type!=a.type)return L1.through[i];t=b.FG9(a.id)[1]}return t},b.FB69=function(){var t={};if(!L1.through||!L1.award)return t;var e=App.CM.gtM(O6.B85).ZB3();if(e<=0){for(var i in L1.through){t=L1.through[i];break}return t}if(!(t=L1.through[e+1])){var s=L1.through[e],o=L1.award[s.chapter],r=L1.award[s.chapter+1];if(!r)return L1.through[e];if(o.type!=r.type)return L1.through[e];t=b.FG9(r.id)[1]}return t},b.FA43=function(){var t={};if(!L1.through||!L1.award)return t;var e=App.CM.gtM(O6.B85).td.dayMap;if(!e||0==Object.keys(e).length){for(var i in L1.through)if(!(2e3<L1.through[i].id)){t=L1.through[i];break}return t}var s=0;for(var i in e)2e3<Number(i)||Number(i)>s&&(s=Number(i));if(0==s){for(var i in L1.through)if(!(2e3<L1.through[i].id)){t=L1.through[i];break}return t}if(s==b.FC99().id)return L1.through[s];if(!(t=L1.through[s+1])){var o=L1.through[s],r=L1.award[o.chapter+1];if(!r)return L1.through[s];var n=void 0;if(0==r.type)n=b.FG9(r.id);else{if(!b.FI33())return L1.through[s];n=b.FG9(r.id)}t=n[1]}return t},b.getAllAdoptOrdinary=function(){var t=App.CM.gtM(O6.B85).td.dayMap,e=0;for(var i in t){parseInt(i)<2e3&&e++}return L1.ordinaryNum==e},b.getAllAdoptDifficulty=function(){var t=App.CM.gtM(O6.B85).td.dayMap,e=0;for(var i in t){2e3<parseInt(i)&&e++}return L1.difficultyNum==e},b.FA44=function(){var t={};if(!L1.through||!L1.award)return t;var e=App.CM.gtM(O6.B85).td.dayMap;if(!e||0==Object.keys(e).length){for(var i in L1.through)if(!(L1.through[i].id<2e3)){t=L1.through[i];break}return t}var s=0;for(var i in e)Number(i)<2e3||Number(i)>s&&(s=Number(i));if(0==s){for(var i in L1.through)if(!(L1.through[i].id<2e3)){t=L1.through[i];break}return t}if(!(t=L1.through[s+1])){var o=L1.through[s],r=L1.award[o.chapter+1];if(!r)return L1.through[s];var n=void 0;if(0==r.type)n=b.FG9(r.id);else{if(!b.FI33())return L1.through[s];n=b.FG9(r.id)}t=n[1]}return t},b.FA65=function(t){var e=0,i=App.CM.gtM(O6.B85).td.passMap;if(!i||0==Object.keys(i).length)return e;for(var s in i){L1.through[s].chapter==t&&(e+=i[s])}return e},b.FG9=function(t){var e={},i=1;for(var s in L1.through){var o=L1.through[s];o.chapter==t&&(e[o.idx=i]=o,i++)}return e},b.hasPass=function(t){var e=!1;return App.CM.gtM(O6.B85).td.passMap[t]&&(e=!0),e},b.dayPass=function(t){var e=!1;return App.CM.gtM(O6.B85).td.dayMap[t]&&(e=!0),e},b.FI32=function(t){var e=!1;return-1!=App.CM.gtM(O6.B85).td.daySet.indexOf(t)&&(e=!0),e},b.FD91=function(t,e){var i=App.CM.gtM(O6.B85).td.rewardMap;return!!i[t]&&-1!=i[t].indexOf(e)},b.FJ71=function(t){var e=0,i=App.CM.gtM(O6.B85);if(!i.td)return e;var s=i.td.passMap;return s[t]&&(e=s[t]),e},b.FI33=function(){if(!L1.FD88())return!1;var t=App.CM.gtM(O6.B85).td.passMap,e=0;if(!t||0==Object.keys(t).length)return!1;for(var i in t){L1.through[i];e+=t[i]}var s=0;for(var i in L1.through){var o=L1.through[i].chapter;1!=L1.award[o].type&&(s+=3)}return s<=e},b.FHH16=function(){var t=App.CM.gtM(O6.B85).td.passMap;if(!t||0==Object.keys(t).length)return!1;var e=0;for(var i in t)parseInt(i)>e&&(e=parseInt(i));return L1.init.throughHardShow.value<=e},b.FA18=function(){return L1.init.sweepCondition.value},b.FC27=function(){var t=new Array,e=App.CM.gtM(O6.B85).ZB37();if(e<=0){var i=1;for(var s in L1.tongque){var o=L1.tongque[s];if(t.push(o),3<=i)break;i++}return t}var r=L1.FC24(),n=L1.tongque[r],a=L1.tongque[e].index;if(n.index-a<3)t[0]=L1.tongque[r-2],t[1]=L1.tongque[r-1],t[2]=L1.tongque[r];else{for(a%3==0&&(a+=1);a%3!=0;)a+=1;t[0]=L1.FA63(a-2),t[1]=L1.FA63(a-1),t[2]=L1.FA63(a)}return t},b.FB70=function(t){return L1.tongque[t]},b.FHH17=function(){var t=!1,e=App.CM.gtM(O6.B82);return(70<=e.avatarInfo.l||5<=e.avatarInfo.v)&&(t=!0),t},b.FI34=function(){var t=App.CM.gtM(O6.B85);if(!L1.tongque)return!1;for(var e in L1.tongque){var i=L1.tongque[e];if(!t.passBronze(i.id))return!1}return!0},b}();__reflect(TG57.prototype,"TG57");var FairylandRewardItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemCatchFishRewardSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.btnGet.label=O3.tr(1563)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.itemCollection.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.itemCollection=new eui.ArrayCollection,this.listContent.dataProvider=this.itemCollection,this.listContent.itemRenderer=ItemIcon,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.dataChanged=function(){switch(this.lbTitle.textFlow=O3.tr2(8047,this.data.conf.target),this.imgTitle.width=this.lbTitle.width+55,this.btnGet.imgNew.visible=!1,this.data.state){case J13.A3:this.btnGet.imgNew.visible=!0,this.btnGet.visible=!0,this.imgGot.visible=!1,P16.sGF(this.btnGet,!1),this.btnGet.enabled=!0;break;case J13.A1:this.btnGet.visible=!0,this.btnGet.enabled=!1,this.imgGot.visible=!1,P16.sGF(this.btnGet,!0);break;case J13.A2:this.btnGet.visible=!1,this.imgGot.visible=!0}var t=[];for(var e in this.data.conf.rewardList){var i={data:N12.gID(this.data.conf.rewardList[e].k),ct:this.data.conf.rewardList[e].v};t.push({itemData:i,isBottom:!1,scale:1})}this.itemCollection.replaceAll(t)},t.prototype.onClickGet=function(){App.CM.apF(O6.B85,P4.D61,this.data.conf.target,0)},t}(eui.ItemRenderer);__reflect(FairylandRewardItemView.prototype,"FairylandRewardItemView");var MaterialDragonRender=function(i){function t(){var t=i.call(this)||this;return t.skinName="MaterialDragonRenderSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,i),t.prototype.open=function(){this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this)},t.prototype.close=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this)},t.prototype.dataChanged=function(){(i.prototype.dataChanged.call(this),this.nameLb&&(this.nameLb.textFlow=M18.HTP.parse(O3.tr(4250,this.data.name))),this.imgTitle.width=this.nameLb.width+55,this.rewardList&&this.data.reward&&0<this.data.reward.length&&(this.rewardList.dataProvider=new eui.ArrayCollection(this.data.reward),this.rewardList.itemRenderer=ItemIcon),this.cost&&(this.cost.textFlow=M18.HTP.parse(O3.tr(4251,this.data.cost)),1==this.data.showCost?this.costGroup.visible=!0:this.costGroup.visible=!1),this.gold&&(this.gold.source=N12.FJ86(pack.I11.GOLD)),this.desc&&(this.data.desc?this.desc.text=this.data.desc:this.desc.textFlow=[{text:this.data.desc1,style:{textColor:16707295}},{text:this.data.desc2,style:{textColor:7716890}}]),this.tipsGrp.visible=!1,this.btn)&&(this.btn.imgNew.visible=!1,this.btn.label=this.data.btnDesc,this.btn.bgStr=this.data.btnBg,this.btn.colour=this.data.btnColor,"v1_btn_green_1_png"==this.btn.bgStr?(this.btn.touchEnabled=!0,this.btn.imgNew.visible=1==this.data.showRp,App.CM.gtM(O6.B23).openState&&(this.tipsGrp.visible=!0,this.tipsLb.text=O3.tr(3367))):(this.btn.touchEnabled=!1,this.btn.imgNew.visible=!1))},t.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),this.data},t.prototype.doChallenge=function(){var t=this.data.did,e=this.data.needFight;TG57.materialAutoSweepOpen(this.data.challengeCount)?App.CM.apF(O6.B85,L15.A9):"sweep"==this.data.type?App.CM.apF(O6.B85,L15.A20,t):App.CM.apF(O6.B85,L15.A5,t,e)},t}(eui.ItemRenderer);__reflect(MaterialDragonRender.prototype,"MaterialDragonRender");var BronzeDragonView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName="BronzeDragonSkin",i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.rank.label=O3.tr(4269),this.challenge.label=O3.tr(4270)},t.prototype.initData=function(){n.prototype.initData.call(this),this.ck1AwardCollection=new eui.ArrayCollection,this.ck1AwardGp.dataProvider=this.ck1AwardCollection,this.ck1AwardGp.itemRenderer=ItemIcon,this.ck2AwardCollection=new eui.ArrayCollection,this.ck2AwardGp.dataProvider=this.ck2AwardCollection,this.ck2AwardGp.itemRenderer=ItemIcon,this.ck3AwardCollection=new eui.ArrayCollection,this.ck3AwardGp.dataProvider=this.ck3AwardCollection,this.ck3AwardGp.itemRenderer=ItemIcon},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this,t),this.apF(L15.A11),this.rank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG72,this),this.challenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this),this.autoChallenge.addEventListener(egret.Event.CHANGE,this.ZO15,this),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI42,this),this.ck1role.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck2role.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck3role.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ZU17(),this.GX5(),this._rankRefreshSecond=TG57.FA25(),this._rankRefreshHandler&&(App.K16.rBH(this._rankRefreshHandler),this._rankRefreshHandler=null),this._rankRefreshHandler=App.K16.doTimer(1e3*this._rankRefreshSecond,0,this.autoRefresh,this)},t.prototype.autoRefresh=function(){this.apF(L15.A11)},t.prototype.ZU17=function(){var t={type:RankType.shudao,currPage:1,size:3};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.ZHH63=function(t){if(t.nType==RankType.shudao)for(var e=t.rankList||[],i=0;i<3;i++){var s=this.grpRanks.getChildAt(i);if(s)if(i<e.length){var o=TG57.FB70(e[i].smid),r=O3.tr(4267,i+1,e[i].sName,o.name);s.textFlow=M18.HTP.parser(r)}else s.text=""}},t.prototype.updateRole=function(){var t=App.CM.gtM(O6.B85),e=TG57.FC27(),i=e[0];this.ck1=i;var s=e[1];this.ck2=s;var o=e[2];this.ck3=o,this.ck1name.textFlow=M18.HTP.parse(O3.tr(4268,i.name)),this.ck1pass.visible=t.passBronze(i.id);var r=i.reward,n=new Array;if(r&&0<r.split(";").length){for(var a=r.split(";"),h=0;h<a.length;h++){var p=a[h].split(":")[0],l=a[h].split(":")[1],c=N12.gID(p);(b={}).data=c,b.ct=Number(l),(T={}).itemData=b,T.isBottom=!1,n.push(T)}this.ck1AwardCollection.replaceAll(n)}this.boss1&&(this.ck1role.removeChildren(),this.boss1.destory(),this.boss1=null),this.boss1=new FightGameObject;var u=N17.FB56(i.monster),d={id:N17.FF93(u.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss1.setData(d,this.ck1role),this.ck2name.textFlow=M18.HTP.parse(O3.tr(4268,s.name)),this.ck2pass.visible=t.passBronze(s.id);var v=s.reward,f=new Array;if(v&&0<v.split(";").length){for(a=v.split(";"),h=0;h<a.length;h++){p=a[h].split(":")[0],l=a[h].split(":")[1],c=N12.gID(p);(b={}).data=c,b.ct=Number(l),(T={}).itemData=b,T.isBottom=!1,f.push(T)}this.ck2AwardCollection.replaceAll(f)}this.boss2&&(this.ck2role.removeChildren(),this.boss2.destory(),this.boss2=null),this.boss2=new FightGameObject;var g=N17.FB56(s.monster),m={id:N17.FF93(g.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss2.setData(m,this.ck2role),this.ck3name.textFlow=M18.HTP.parse(O3.tr(4268,o.name)),this.ck3pass.visible=t.passBronze(o.id);var y=o.reward,A=new Array;if(y&&0<y.split(";").length){for(a=y.split(";"),h=0;h<a.length;h++){var b,T;p=a[h].split(":")[0],l=a[h].split(":")[1],c=N12.gID(p);(b={}).data=c,b.ct=Number(l),(T={}).itemData=b,T.isBottom=!1,A.push(T)}this.ck3AwardCollection.replaceAll(A)}this.boss3&&(this.ck3role.removeChildren(),this.boss3.destory(),this.boss3=null),this.boss3=new FightGameObject;var C=N17.FB56(o.monster),w={id:N17.FF93(C.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss3.setData(w,this.ck3role);var O=t.ZB37(),M=L1.FC24();this.challenge.filters=[],this.challenge.touchEnabled=!0,this.autoChallenge.touchEnabled=!0,O<=0?O=i.id:M<=O?(O=M,this.challenge.filters=[P16.GrayMatrixFilter],this.challenge.touchEnabled=!1,this.autoChallenge.touchEnabled=!1):O+=1,this._did=O},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG15){if(s==P4.G42){var o=P7.FD54(t.bd.passSet),r=L1.FC24();this.challenge.imgNew.visible=1==t.bdW&&o<r,this.GX5()}}else t instanceof THH11&&this.ZHH63(t)},t.prototype.GX5=function(){var t=App.CM.gtM(O6.B85);this.updateRole(),this.ZI41(),this.ZU50(),this.autoChallenge.selected=t.bdAuto,t.bdAuto?this.ZO15():this.ZU92()},t.prototype.ZU50=function(){var t=THH27.FE37(),e=O4.FF89(L17.A42);this.shop.imgNew.visible=0<t&&!e},t.prototype.ZO15=function(){App.CM.gtM(O6.B85).bdAuto=this.autoChallenge.selected,this.autoChallenge.selected?(this._countDownSecond=10,this.autoChallenge.label=O3.tr(4271,this._countDownSecond),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3,10,this.GY14,this,this.GO49,this)):this.ZU92()},t.prototype.GO49=function(){this.doChallenge()},t.prototype.GY14=function(){this._countDownSecond--,this.autoChallenge.label=O3.tr(4271,this._countDownSecond)},t.prototype.ZU92=function(){this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this.autoChallenge.label=O3.tr(4272)},t.prototype.ZI41=function(){var t=App.CM.gtM(O6.B85);this.challenge.imgNew.visible=!1;var e=t.bd;if(e.passSet&&0==e.passSet.length)this.challenge.imgNew.visible=!0;else{e.passSet;t.ZB37()<L1.FC24()&&(this.challenge.imgNew.visible=!0)}},t.prototype.ZG72=function(){App.VM.open(O7.B71)},t.prototype.doChallenge=function(){var t=this._did;this.apF(L15.A7,t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.close.call(this,t),this.rank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG72,this),this.challenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this),this.autoChallenge.removeEventListener(egret.Event.CHANGE,this.ZO15,this),this.shop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI42,this),this.ck1role.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck2role.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck3role.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this._timerHandler&&this.ZU92(),this._rankRefreshHandler&&(App.K16.rBH(this._rankRefreshHandler),this._rankRefreshHandler=null),this.ck1role.removeChildren(),this.boss1.destory(),this.boss1=null,this.ck2role.removeChildren(),this.boss2.destory(),this.boss2=null,this.ck3role.removeChildren(),this.boss3.destory(),this.boss3=null,this.ck1AwardCollection.removeAll(),this.ck2AwardCollection.removeAll(),this.ck3AwardCollection.removeAll()},t.prototype.ZI42=function(){App.VM.isOpen(O7.HH98)&&App.VM.close(O7.HH98),App.VM.isOpen(O7.E86)&&App.VM.close(O7.E86);var t=O4.getLv(),e=N15.FG47(P12.A30);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.I3,P12.A30)},t.prototype.ZO16=function(t){var e=App.CM.gtM(O6.B85);switch(t.currentTarget){case this.ck1role:if(e.passBronze(this.ck1.id))return;if(this._did!=this.ck1.id)return void P18.sDP(O3.tr(5669));this.doChallenge();break;case this.ck2role:if(e.passBronze(this.ck2.id))return;if(this._did!=this.ck2.id)return void P18.sDP(O3.tr(5669));this.doChallenge();break;case this.ck3role:if(e.passBronze(this.ck3.id))return;if(this._did!=this.ck3.id)return void P18.sDP(O3.tr(5669));this.doChallenge()}TG40.playClickEffect()},t.prototype.ZW28=function(){var t=App.CM.gtM(O6.B85);t.bdAuto=!1,t.bdW=0,this.ZU92(),this.autoChallenge.selected=!1},t}(BaseEuiView);__reflect(BronzeDragonView.prototype,"BronzeDragonView");var BronzeRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="BronzeRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5192)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5193)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5194)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5195)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5196))},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this._itemCollection},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.bgMak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._rankRefreshSecond=TG57.FA25(),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3*this._rankRefreshSecond,0,this.autoRefresh,this),this.ZU17()},t.prototype.ZU17=function(){var t={type:RankType.shudao,currPage:1};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.autoRefresh=function(){this.ZU17()},t.prototype.uBM=function(t){if(t instanceof THH11){if(t.nType!=RankType.shudao)return;this.GX5(t)}},t.prototype.GX5=function(t){if(t){if(t.rankList&&0<t.rankList.length){for(var e=new Array,i=1,s=0;s<t.rankList.length;s++){var o=t.rankList[s],r={};r.rank=o.nRank,r.rolename=o.sName,r.score=o.spo;var n=TG57.FB70(o.smid);r.ck=n.name,r.bg=i%2==0?"":"v1_img_kelashen_paihang_png",e.push(r),i++}this._itemCollection.replaceAll(e)}if(t.myRankList){var a=0<(o=t.myRankList).nRank?String(o.nRank):O3.tr(5197);if(this.myrank.textFlow=M18.HTP.parse(O3.tr(5198,a)),0<o.nRank){var h=TG57.FB70(o.smid);this.myck.textFlow=M18.HTP.parse(O3.tr(5199,h.name))}else this.myck.textFlow=M18.HTP.parse(O3.tr(5199,"0"))}this.endScroller()}else this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._itemCollection.removeAll(),this._rankRefreshSecond=null},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.closeSelf=function(){App.VM.close(O7.B71)},t}(BaseEuiView);__reflect(BronzeRankView.prototype,"BronzeRankView");var BronzeResultView=function(c){function t(t,e){var i=c.call(this,t,e)||this;return i.skinName="BronzeResultSkin",i}return __extends(t,c),t.prototype.initUI=function(){c.prototype.initUI.call(this),this.btnGetRw.label=O3.tr(5200)},t.prototype.initData=function(){c.prototype.initData.call(this),this.rewardCollection=new eui.ArrayCollection,this.rewardList.dataProvider=this.rewardCollection,this.rewardList.itemRenderer=ItemIcon},t.prototype.open=function(t){c.prototype.open.call(this),this.extInfo=t;var e=this.extInfo.dragon.name;this.starDes.textFlow=M18.FG71(O3.tr(1005,e));var i=this.extInfo.dragon.ext,s=new Array;if(i&&0<i.split(";").length){for(var o=i.split(";"),r=0;r<o.length;r++){var n=o[r].split(":")[0],a=o[r].split(":")[1],h=N12.gID(n),p={};p.data=h,p.ct=Number(a);var l={};l.itemData=p,s.push(l)}this.rewardCollection.replaceAll(s)}1==this.extInfo.FL67?(this.hasGet.visible=!0,this.btnGetRw.visible=!1):(this.hasGet.visible=!1,this.btnGetRw.visible=1==this.extInfo.pass),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.starBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGetRw.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getExtReward,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.prototype.uBM.call(this,t,e);var s=this.extInfo.dragon.id,o=App.CM.gtM(O6.B85),r=o.sd.passSet;r&&0<r.length&&-1!=r.indexOf(s)?this.extInfo.pass=1:this.extInfo.pass=0;var n=o.sd.extSet;n&&0<n.length&&-1!=n.indexOf(s)?this.extInfo.FL67=1:this.extInfo.FL67=0,this.open(this.extInfo)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.starBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGetRw.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getExtReward,this),this.extInfo=null,this.rewardCollection.removeAll()},t.prototype.closeSelf=function(){App.VM.close(O7.F14)},t.prototype.getExtReward=function(){this.apF(L15.A31,this.extInfo.dragon.id),this.closeSelf()},t}(BaseEuiView);__reflect(BronzeResultView.prototype,"BronzeResultView");var ChallengeResultView=function(d){function t(t,e){var i=d.call(this,t,e)||this;return i.skinName="ChallengeResultSkin",i}return __extends(t,d),t.prototype.initUI=function(){d.prototype.initUI.call(this),this.btnGetRw.label=O3.tr(5828)},t.prototype.initData=function(){d.prototype.initData.call(this),this.rewardCollection=new eui.ArrayCollection,this.rewardList.dataProvider=this.rewardCollection,this.rewardList.itemRenderer=ItemIcon},t.prototype.open=function(t,e){d.prototype.open.call(this),this.chapter=t,this.star=e,this.starDes.textFlow=M18.HTP.parser(O3.tr(1004,t.name,e));var i=void 0;switch(e){case 6:i=t.reward1;break;case 12:i=t.reward2;break;case 18:i=t.reward3}var s=new Array;if(i&&0<i.split(";").length){for(var o=i.split(";"),r=0;r<o.length;r++){var n=o[r].split(":")[0],a=o[r].split(":")[1],h=N12.gID(n),p={};p.data=h,p.ct=Number(a);var l={};l.itemData=p,P7.FM14()&&(l.isBottom=!1),s.push(l)}this.rewardCollection.replaceAll(s)}var c=TG57.FD91(this.chapter.id,e);if(this.hasGet.visible=c)this.btnGetRw.visible=!1;else{var u=TG57.FA65(this.chapter.id);this.btnGetRw.visible=e<=u}this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.starBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGetRw.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW29,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.prototype.uBM.call(this,t,e),this.open(this.chapter,this.star)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.starBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGetRw.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW29,this),this.chapter=null,this.star=null,this.rewardCollection.removeAll()},t.prototype.closeSelf=function(){App.VM.close(O7.A22)},t.prototype.ZW29=function(){switch(this.star){case 6:this.apF(L15.A3,this.chapter.id,6);break;case 12:this.apF(L15.A3,this.chapter.id,12);break;case 18:this.apF(L15.A3,this.chapter.id,18)}this.closeSelf()},t}(BaseEuiView);__reflect(ChallengeResultView.prototype,"ChallengeResultView");var CheckPointResultView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i._totalSecond=5,i.skinName="CheckPointResultSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5283))},t.prototype.initData=function(){s.prototype.initData.call(this),this._rewardArray=new eui.ArrayCollection,this.rewardList.dataProvider=this._rewardArray},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t);var i=t[0];this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),App.K16.doTimer(1e3,5,this.GY14,this,this.countFinish,this),this.GX5(i)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),App.K16.remove(this.GY14,this),this._rewardArray.removeAll()},t.prototype.GX5=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i){var s={bg:"v1_img_kuang_bai_png",icon:"v1_fonts_yuliu_js_png"};s.rname=i.k+":"+i.v,this._rewardArray.addItem(s)}}this.btnClose.label=O3.tr(5282,this._totalSecond)},t.prototype.GY14=function(){this._totalSecond--,this.btnClose.label=O3.tr(5282,this._totalSecond)},t.prototype.countFinish=function(){this.closeSelf()},t.prototype.closeSelf=function(){this.apF(L15.A15)},t}(BaseEuiView);__reflect(CheckPointResultView.prototype,"CheckPointResultView");var DragonMainView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="SouthCAwardPanelSkin",i.sGN("release_dragon"),i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.VM.rgS(O7.G46,O7.D14,"MaterialDragonView",this.content),App.VM.rgS(O7.G46,O7.D97,"ThroughDragonView",this.content),App.VM.rgS(O7.G46,O7.HH39,"SkyDragonView",this.content),App.VM.rgS(O7.G46,O7.E83,"BronzeDragonView",this.content),App.VM.rgS(O7.G46,O7.HH7,"ExpEditionView",this.content),App.VM.rgS(O7.G46,O7.G41,"ClassupBossView",this.content),App.VM.rgS(O7.G46,O7.HH88,"FairylandView",this.content);var t=[O3.tr(1e3),O3.tr(1001),O3.tr(1002),O3.tr(1003),O3.tr(6875),O3.tr(8774),O3.tr(8033)],e=[O7.D14,O7.D97,O7.E83,O7.HH39,O7.HH7,O7.G41,O7.HH88];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnList.scaleX=this.btnList.scaleY=.7,this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t);var i=App.CM.gtM(O6.B85);this.ZF22(i);var s=t[0]||O7.D14;this.ZQ23(s,t[1]),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t);var s=App.CM.gtM(O6.B85);this.ZF22(s)},t.prototype.ZF22=function(t){var e=t.ZA41();this.btnList.ZHH58(O7.D14,e?1:0),App.CM.gtM(O6.B23).openState?this.btnList.ZHH59(O7.D14,!0,O3.tr(3367)):this.btnList.ZHH59(O7.D14,!1);var i=t.ZA57();this.btnList.ZHH58(O7.D97,i?1:0);var s=t.ZB73();this.btnList.ZHH58(O7.HH39,s?1:0);var o=t.ZA76();this.btnList.ZHH58(O7.E83,o?1:0),this.btnList.ZHH58(O7.HH7,TE2.FL35()?1:0),this.btnList.ZHH58(O7.HH88,t.ZO14()?1:0)},t.prototype.openHelpView=function(){var t,e;switch(this.btnList.getCurView()){case O7.HH7:t=O3.tr(2715),e=O3.tr(7e3);break;case O7.HH88:t=O3.tr(8106),e=O3.tr(8107);break;case O7.G41:t=O3.tr(8806),e=O3.tr(8807)}if(e){var i={title:t,content:e};this.aCF(O6.C18,O10.A24,i)}else Log.trace("异常的参数")},t.prototype.close=function(t){o.prototype.close.call(this,t),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),t&&"byFight"===t||this.ZF23()},t.prototype.ZQ23=function(t,e){void 0===e&&(e=void 0),e&&"byFight"===e||this.ZF23();var i,s=App.CM.gtM(O6.B82).avatarInfo;switch(this.helpBtn.visible=!1,t){case O7.D14:if(i=L1.init.materialOpenLevel.value,s.l<i){var o=K18.init.commonDesc1.value;return P18.sDP(M18.format(o,[i])),-1}this.title=O3.tr(1e3),this.btnList.ZM66(t);break;case O7.D97:if(i=L1.init.throughOpenLevel.value,s.l<i){o=K18.init.commonDesc1.value;return P18.sDP(M18.format(o,[i])),-1}this.title=O3.tr(1001),this.btnList.ZM66(t);break;case O7.HH39:if(i=L1.init.skyOpenLevel.value,s.l<i){o=K18.init.commonDesc1.value;return P18.sDP(M18.format(o,[i])),-1}this.title=O3.tr(1003),this.btnList.ZM66(t);break;case O7.E83:if(i=L1.init.tongqueLv.value,s.l<i){o=K18.init.commonDesc1.value;return P18.sDP(M18.format(o,[i])),-1}this.title=O3.tr(1002),this.btnList.ZM66(t);break;case O7.HH7:if(TE2.isOpen()){var r=TE2.getNowChapterMode();this.helpBtn.visible=!0,this.title=1==r?O3.tr(6875):O3.tr(8812),this.btnList.ZM66(t)}else P18.sDP(O3.tr(3370,TD42.openDay,TD42.openLv));break;case O7.HH88:L1.FE88()?(this.helpBtn.visible=!0,this.title=O3.tr(8033),this.btnList.ZM66(t,e)):P18.sDP(O3.tr(3370,L1.fairylandOpenDay,L1.fairylandOpenLevl));break;case O7.G41:if(!TC76.isOpen())return P18.sDP(O3.tr(8793,TC76.openLv)),-1;this.helpBtn.visible=!0,this.title=O3.tr(8774),this.btnList.ZM66(t,e)}},t.prototype.ZF23=function(){var t=App.CM.gtM(O6.B85);t.tdAuto=!1,t.tdW=0,t.sdAuto=!1,t.sdW=0,t.bdAuto=!1,t.bdW=0},t.prototype.updateTitle=function(t){this.title=t},t}(BasePanelView);__reflect(DragonMainView.prototype,"DragonMainView");var DragonRTView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="DragonRTSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.percentHeight=NaN,this.percentWidth=NaN,this.top=42,this.right=-25},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.parent&&this.parent.setChildIndex(this,0);var i=t[0],s=t[1];this.title.text=i,this.desc.text=s},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this)},t}(BaseEuiView);__reflect(DragonRTView.prototype,"DragonRTView");var FairylandBuyView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="FairylandBuyTimesSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.lbStr1.text=O3.tr(6409),this.btnOk.label=O3.tr(6408)},t.prototype.uBM=function(t){t instanceof TG15&&this.GX5(t)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOk,this),s.prototype.open.apply(this,t),this.GX5(App.CM.gtM(O6.B85))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOk,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),s.prototype.close.apply(this,t)},t.prototype.GX5=function(t){var e=t.landVo.bc,i=L1.fairyCost;this.msg.textFlow=O3.tr2(8043,i,1,L1.fairyBuyTimes-e,L1.fairyBuyTimes),P16.FL31(this.gConsume,N12.itemId.gold,i,{tag:O3.tr(8044),textTemplate:"<font color=#75c01a>$1</font>",lackTextTemplate:"<font color=#d82222>$1</font>"})},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClickOk=function(){App.CM.apF(O6.B85,P4.I10),this.oCC()},t}(BaseEuiView);__reflect(FairylandBuyView.prototype,"FairylandBuyView");var FairylandRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="SkyRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemList.dataProvider=this._itemCollection=new eui.ArrayCollection,this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5285)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5286)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5287)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5288)),this.itemList.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.endScroller,this)},t.prototype.open=function(t){this.rankType=t;var e=TG75.rank[this.rankType].name;this.lbStr1.text=e,this.bgMak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.ZU17()},t.prototype.ZU17=function(){var t=TG75.rank[this.rankType].count,e={type:this.rankType,currPage:1,size:t};App.CM.apF(O6.C19,O18.A5,e)},t.prototype.uBM=function(t){if(t instanceof THH11){if(t.nType!=this.rankType)return;this.GX5(t)}},t.prototype.GX5=function(t){if(t.rankList&&0<t.rankList.length){for(var e=new Array,i=1,s=0;s<t.rankList.length;s++){var o=t.rankList[s],r={};r.rank=o.nRank,r.rolename=o.sName,r.score=o.nPower,r.ck=o.flr,r.bg=i%2==0?"":"v1_img_kelashen_paihang_png",e.push(r),i++}this._itemCollection.replaceAll(e)}if(t.myRankList){var n=0<(o=t.myRankList).nRank?String(o.nRank):O3.tr(5750);this.myrank.textFlow=M18.HTP.parse(O3.tr(5289,n)),0<o.nRank?this.myck.textFlow=O3.tr2(8057,o.flr):this.myck.textFlow=O3.tr2(8057,0)}this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.itemList.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.endScroller,this),this.bgMak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._itemCollection.removeAll()},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(FairylandRankView.prototype,"FairylandRankView");var FairylandRewardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="FairylandRewardSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B85)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:FairylandRewardItemView,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8046),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.btnGet.imgNew.visible=!0,this.btnGet.label=O3.tr(8092)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.B85);this.GX5(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG15&&this.GX5(t)},t.prototype.GX5=function(t){var e=0,i=[];for(var s in L1.fairyland){var o=L1.fairyland[s],r=t.ZB74(o.id);i.push({state:r,conf:{target:o.id,rewardList:P7.str2kv(o.firstrewarditem)}}),r==J13.A3&&(e+=1)}i.sort(function(t,e){return t.state!=e.state?t.state-e.state:t.conf.target-e.conf.target}),this.lbCatchNum.textFlow=O3.tr2(8049,t.landVo.passed),this.myListView.rfL(i),this.btnGet.visible=0<e},t.prototype.close=function(){s.prototype.close.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.onClickGet=function(){App.CM.apF(O6.B85,P4.D61,0,1)},t}(BaseEuiView);__reflect(FairylandRewardView.prototype,"FairylandRewardView");var FairylandView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.clock=0,i.autoCd=10,i.skinName="FairylandSkin",i}return __extends(t,o),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B85)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.labTr8037.textFlow=O3.tr2(8037),this.labTr8104.textFlow=O3.tr2(8104),this.labTr8041.textFlow=O3.tr2(8041),this.rw1.itemRenderer=this.rw2.itemRenderer=ItemIcon,this.rw1.dataProvider=this.acFightReward=new eui.ArrayCollection,this.rw2.dataProvider=this.acCleanlevelReward=new eui.ArrayCollection,this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnFight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFight,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.ckAuto.addEventListener(egret.Event.CHANGE,this.onChangeAuto,this),this.pBarHp.labelFunction=function(t,e){return O3.tr(8036,App.TG81.toFixed(t/e*100,2))},this.pBarHp.slideDuration=0,this.btnFight.label=O3.tr(8039),this.y=-10},t.prototype.open=function(t){void 0===t&&(t=!1);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.open.apply(this,e);var s=this.model;this.ckAuto.selected=t,s.fairylandAutoChallenge=!1,this.addEffect(),this.onChangeAuto(),this.GX5(s)},t.prototype.uBM=function(t){t instanceof TG15&&this.GX5(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeAvatar(),this.rEf(),this.acFightReward.removeAll(),this.acCleanlevelReward.removeAll(),this.btnRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnFight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFight,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.ckAuto.removeEventListener(egret.Event.CHANGE,this.onChangeAuto,this),this.timer&&(App.K16.rBH(this.timer),delete this.timer),o.prototype.close.apply(this,t)},t.prototype.onClickFight=function(){0<this.model.landVo.next?App.CM.apF(O6.B85,P4.B37,this.ckAuto.selected):Log.trace("蓬莱仙域没有可以挑战的关卡")},t.prototype.GX5=function(t){this.updateAvatar(t),this.btnReward.imgNew.visible=0<t.ZD6(),this.ckAuto.visible=this.imgKilled.visible=this.btnFight.imgNew.visible=this.btnBuy.includeInLayout=this.btnBuy.visible=!1;var e=t.landVo.next;this.labLevel.textFlow=O3.tr2(8035,e);var i=L1.fairyland[e],s=N17.monster[i.monster];if(this.pBarHp.maximum=s.hp,this.acFightReward.source=P7.str2kv(i.preview).map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1}}),this.acCleanlevelReward.source=P7.str2kv(i.rewarditem).map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1}}),t.landVo.isAllPassed)this.imgKilled.visible=!0,this.btnFight.touchEnabled=!1,this.labCount.textFlow=O3.tr2(8089),this.pBarHp.value=t.landVo.rhp,this.changeAuto(!1);else{this.ckAuto.visible=this.btnFight.touchEnabled=!0;var o=t.landVo.count;this.labCount.textFlow=O3.tr2(8038,o,L1.fairyFreeTimes,(o<=0?_cc.red:_cc.green).toString(16)),this.btnBuy.includeInLayout=this.btnBuy.visible=t.landVo.bc<L1.fairyBuyTimes,this.pBarHp.value=0==t.landVo.rhp?s.hp:t.landVo.rhp}P16.sGF(this.btnFight,!this.btnFight.touchEnabled),this.btnFight.imgNew.visible=this.btnFight.touchEnabled&&!!t.ZL5()},t.prototype.GX42=function(){this.ckAuto.selected&&(this.ckAuto.labelDisplay.textFlow=O3.tr2(8040,Math.max(0,Math.floor((this.clock-P6.getTime())/1e3))),P6.getTime()>=this.clock&&(0<this.model.landVo.count?(this.onClickFight(),this.clock=P6.getTime()+1e3*this.autoCd):(this.changeAuto(!1),P18.sDP(O3.tr(8090)))))},t.prototype.rEf=function(){for(var t=this.gEffect.numChildren,e=t-1;0<=e;e--)App.THH33.ZU2(this.gEffect,this.gEffect.getChildAt(e));this.gEffect.numChildren&&Log.trace("蓬莱仙境 动画销毁异常");for(e=(t=this.gEffectCloud.numChildren)-1;0<=e;e--)egret.Tween.removeTweens(this.gEffectCloud.getChildAt(e))},t.prototype.addEffect=function(){if(this.gEffect.numChildren<=0)for(var t=this.gEffect.width-75,e=1,i=1;e<=4;e++){var s="plxy_mc_hb"+e;App.THH33.addUIEffect2(this.gEffect,s,-1,{x:75,name:++i+""}),App.THH33.addUIEffect2(this.gEffect,s,-1,{x:t,name:++i+"",scaleX:-1})}if(this.gEffectCloud.numChildren<=0)for(e=1;e<=3;e++){var o=new eui.Image("plxy_mc_yunwu_001_png");switch(o.anchorOffsetX=164.5,o.anchorOffsetY=105,o.y=this.gEffectCloud.height/2,e){case 2:egret.Tween.get(o,{loop:!0}).set({alpha:1,x:320,scaleX:1.56,scaleY:1.56}).to({alpha:0,x:0,scaleX:1.25,scaleY:1.25},1e4).to({alpha:0,x:0,scaleX:1.25,scaleY:1.25},1e4);break;case 3:egret.Tween.get(o,{loop:!0}).set({alpha:0,x:640,scaleX:1.25,scaleY:1.25}).to({alpha:0,x:640,scaleX:1.25,scaleY:1.25},1e4).to({alpha:1,x:320,scaleX:1.56,scaleY:1.56},1e4);break;case 1:default:egret.Tween.get(o,{loop:!0}).set({alpha:0,x:640,scaleX:1.25,scaleY:1.25}).to({alpha:1,x:320,scaleX:1.56,scaleY:1.56},1e4).to({alpha:0,x:0,scaleX:1.25,scaleY:1.25},1e4)}this.gEffectCloud.addChild(o)}},t.prototype.removeAvatar=function(){this.objBoss&&(this.gAvatar.removeChildren(),this.objBoss.destory(),delete this.objBoss)},t.prototype.updateAvatar=function(t){if(0<t.landVo.next){var e=L1.fairyland[t.landVo.next].monster;if(this.bossId!=e){var i=N17.monster[e].image;this.removeAvatar(),this.objBoss=new FightGameObject;var s={id:i,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.objBoss.setData(s,this.gAvatar),this.bossId=e}}else this.removeAvatar()},t.prototype.changeAuto=function(t){this.ckAuto.selected=t,this.onChangeAuto()},t.prototype.onChangeAuto=function(){this.ckAuto.selected?(this.clock=P6.getTime()+1e3*this.autoCd,this.GX42(),this.timer=this.timer||App.K16.doTimer(1e3,0,this.GX42,this)):(this.timer&&(App.K16.rBH(this.timer),delete this.timer),this.ckAuto.label=O3.tr(8091))},t.prototype.onClickRank=function(){App.VM.open(O7.F52,RankType.Fairyland)},t.prototype.ZU27=function(){App.VM.open(O7.B17)},t.prototype.onClickBuy=function(){this.model.landVo.bc>=L1.fairyBuyTimes?Log.trace("蓬莱仙境购买次数不足"):App.VM.open(O7.B54)},t}(BaseEuiView);__reflect(FairylandView.prototype,"FairylandView");var LibraryStarView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="LibraryStarSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.percentHeight=NaN,this.percentWidth=NaN,this.top=42,this.right=-25},t.prototype.open=function(){s.prototype.open.call(this),this.parent&&this.parent.setChildIndex(this,0),this.title.text=O3.tr(6940),this.set(0,1)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.set=function(t,e){0<=t&&(this.setData(0,t<Library.Config.starReq3,O3.tr(6941,Library.Config.starReq3)),this.setData(1,t<Library.Config.starReq2,O3.tr(6941,Library.Config.starReq2))),0<=e&&this.setData(2,e<=5,O3.tr(6942,5))},t.prototype.setData=function(t,e,i){var s=this.gStar.getChildAt(t),o=s.getChildAt(0),r=s.getChildAt(1);o.source=e?"v1_img_star1_png":"v1_img_star2_png",r.text=i},t}(BaseEuiView);__reflect(LibraryStarView.prototype,"LibraryStarView");var MaterialDragonView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MaterialDragonSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:MaterialDragonRender,width:this.gpList.width,height:this.gpList.height};this.myListView=new CommonListBase(t),this.myListView.bottom=0,this.myListView.horizontalCenter=0,this.gpList.addChild(this.myListView),this.lbTip.textFlow=M18.HTP.parser(O3.tr(5556)),this.btnMonth.label=O3.tr(908)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD95,this);var i=App.CM.gtM(O6.B66);this.ZR87(i),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG15?this.GX5():t instanceof THH14?this.GX5():t instanceof TG12?this.GX5():t instanceof TF89&&this.ZR87(t)},t.prototype.GX5=function(){var t=TG57.FA92();this.myListView.rfL(t);var e=THH27.FC59();this.shop.imgNew.visible=0<e&&!O4.FF89(L17.A42)},t.prototype.ZR87=function(t){if(P7.FG67())return this.gpMonth.visible=!1,void(752!=this.myListView.height&&this.myListView.ZU13(this.gpList.width,752));var e=t.ZT74(),i=t.ZHH38();0<e||0!=i.isBuy?(this.gpMonth.visible=!1,this.btnMonth.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMonth,this),752!=this.myListView.height&&this.myListView.ZU13(this.gpList.width,752)):(this.gpMonth.visible=!0,this.btnMonth.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMonth,this),710!=this.myListView.height&&this.myListView.ZU13(this.gpList.width,710))},t.prototype.onClickMonth=function(){TG84.FM16(1503)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.shop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD95,this),this.myListView.close()},t.prototype.ZD95=function(){App.VM.isOpen(O7.HH98)&&App.VM.close(O7.HH98),App.VM.isOpen(O7.E86)&&App.VM.close(O7.E86);var t=O4.getLv(),e=N15.FG47(P12.A9);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.I3,P12.A9)},t}(BaseEuiView);__reflect(MaterialDragonView.prototype,"MaterialDragonView");var SkyDragonView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName="SkyDragonSkin",i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4275)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4276)),this.rank.label=O3.tr(4280),this.btnGet.label=O3.tr(4281),this.oneKeySweep.label=O3.tr(4282),this.challenge.label=O3.tr(4283)},t.prototype.initData=function(){n.prototype.initData.call(this),this._curCkPoints={},this._curCkPoints.first={x:110,y:386},this._curCkPoints.second={x:290,y:280},this._curCkPoints.third={x:490,y:140},this._curDialogPoints={},this._curDialogPoints.second={x:145,y:200},this._curDialogPoints.third={x:342,y:44},this.rewardCollection=new eui.ArrayCollection,this.rewardList.dataProvider=this.rewardCollection,this.rewardList.itemRenderer=ItemIcon},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this,t),this.apF(L15.A22),this.rank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GP2,this),this.challenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this),this.autoChallenge.addEventListener(egret.Event.CHANGE,this.ZO15,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLastExt,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doNextExt,this),this.oneKeySweep.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW32,this),this.extGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL7,this),this.ck1role.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck2role.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck3role.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getExtReward,this),this.ZU17(),this.GX5(),this._rankRefreshSecond=TG57.FA25(),this._rankRefreshHandler&&(App.K16.rBH(this._rankRefreshHandler),this._rankRefreshHandler=null),this._rankRefreshHandler=App.K16.doTimer(1e3*this._rankRefreshSecond,0,this.autoRefresh,this),this.ZL6()},t.prototype.ZL6=function(){if(this._extInfo){var t=this._extInfo.dragon.number.toString(),e=6224;2==this._extInfo.dragon.type&&(e=6225),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(e)),this.tname.textFlow=M18.HTP.parse(O3.tr(4277,t));var i=this._extInfo.dragon.ext,s=new Array;if(i&&0<i.split(";").length){for(var o=i.split(";"),r=0;r<o.length;r++){var n=o[r].split(":")[0],a=o[r].split(":")[1],h=N12.gID(n),p={};p.data=h,p.ct=Number(a);var l={};l.itemData=p,l.isBottom=!1,s.push(l)}this.rewardCollection.replaceAll(s)}1==this._extInfo.FL67?(this.hasGet.visible=!0,this.btnGet.visible=!1):(this.hasGet.visible=!1,this.btnGet.visible=!0,1==this._extInfo.pass?(this.btnGet.enabled=!0,this.btnGet.imgNew.visible=!0,P16.sGF(this.btnGet,!1)):(this.btnGet.enabled=!1,this.btnGet.imgNew.visible=!1,P16.sGF(this.btnGet,!0)))}},t.prototype.autoRefresh=function(){this.apF(L15.A22)},t.prototype.ZU17=function(){var t={type:RankType.tongque,currPage:1,size:3};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.ZO16=function(t){var e=App.CM.gtM(O6.B85);switch(t.currentTarget){case this.ck1role:if(e.dayPassSky(this.first.id))return;if(this._did!=this.first.id)return void P18.sDP(O3.tr(5669));this.doChallenge();break;case this.ck2role:if(e.dayPassSky(this.second.id))return;if(this._did!=this.second.id)return void P18.sDP(O3.tr(5669));this.doChallenge();break;case this.ck3role:if(e.dayPassSky(this.third.id))return;if(this._did!=this.third.id)return void P18.sDP(O3.tr(5669));this.doChallenge()}TG40.playClickEffect()},t.prototype.updateRole=function(){for(var t=App.CM.gtM(O6.B85),e=TG57.FE89(),i=null,s=null,o=null,r=0;r<e.length;r++){var n=e[r];"first"==n.position?i=n:"second"==n.position?s=n:"third"==n.position&&(o=n)}this.updateBoss1(i),this.updateBoss2(s),this.updateBoss3(o),this.first=i,this.second=s,this.third=o,this.ck1.textFlow=M18.HTP.parse(O3.tr(4274,i.name)),this.ck2.textFlow=M18.HTP.parse(O3.tr(4274,s.name)),this.ck3.textFlow=M18.HTP.parse(O3.tr(4274,o.name));var a=t.ZD94();a<=0?a=i.id:a==L1.FE87()?a=L1.FE87():a+=1,i.id==a?(this.curCk.x=this._curCkPoints.first.x,this.curCk.y=this._curCkPoints.first.y):s.id==a?(this.curCk.x=this._curCkPoints.second.x,this.curCk.y=this._curCkPoints.second.y):o.id==a&&(this.curCk.x=this._curCkPoints.third.x,this.curCk.y=this._curCkPoints.third.y),this.ck1role.filters=t.dayPassSky(i.id)?[P16.GrayMatrixFilter]:[],this.ck2role.filters=t.dayPassSky(s.id)?[P16.GrayMatrixFilter]:[],this.ck3role.filters=t.dayPassSky(o.id)?[P16.GrayMatrixFilter]:[],this._did=a,s.talk&&!t.passSky(s.id)?(this.dialogGroup.visible=!0,this.dialog.textFlow=M18.FG71(s.talk),this.dialogGroup.x=this._curDialogPoints.second.x,this.dialogGroup.y=this._curDialogPoints.second.y):o.talk&&!t.passSky(o.id)?(this.dialogGroup.visible=!0,this.dialog.textFlow=M18.FG71(o.talk),this.dialogGroup.x=this._curDialogPoints.third.x,this.dialogGroup.y=this._curDialogPoints.third.y):this.dialogGroup.visible=!1},t.prototype.updateBoss1=function(t){if(t){this.boss1&&(this.ck1role.removeChildren(),this.boss1.destory(),this.boss1=null),this.boss1=new FightGameObject;var e=N17.FB56(t.monster),i={id:N17.FF93(e.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss1.setData(i,this.ck1role)}},t.prototype.updateBoss2=function(t){if(t){this.boss2&&(this.ck2role.removeChildren(),this.boss2.destory(),this.boss2=null),this.boss2=new FightGameObject;var e=N17.FB56(t.monster),i={id:N17.FF93(e.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss2.setData(i,this.ck2role)}},t.prototype.updateBoss3=function(t){if(t){this.boss3&&(this.ck3role.removeChildren(),this.boss3.destory(),this.boss3=null),this.boss3=new FightGameObject;var e=N17.FB56(t.monster),i={id:N17.FF93(e.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss3.setData(i,this.ck3role)}},t.prototype.ZW30=function(){var t=TG57.FC25();this._extInfo=t,this.ZL6();var e=TG57.FB67(this._extInfo.idx-1);this.leftBtn.visible=!!e;var i=TG57.FB67(this._extInfo.idx+1);this.rightBtn.visible=!!i},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG15)if(s==P4.I9){var o=t.ZD5(),r=L1.FE87();this.challenge.imgNew.visible=1==t.sdW&&o<r,this.GX5()}else s==P4.N91?this.GX5():s==P4.N93&&this.ZW30();else t instanceof THH11&&this.ZHH63(t)},t.prototype.ZHH63=function(t){if(t.nType==RankType.tongque)for(var e=t.rankList||[],i=0;i<3;i++){var s=this.grpRanks.getChildAt(i);if(s)if(i<e.length){var o=TG57.FD90(e[i].s),r=O3.tr(4273,i+1,e[i].sName,o.name);s.textFlow=M18.HTP.parser(r)}else s.text=""}},t.prototype.GX5=function(){var t=App.CM.gtM(O6.B85);this.updateRole(),this.ZW30(),this.ZI41(),this.ZW31(),this.autoChallenge.selected=t.sdAuto,t.sdAuto?this.ZO15():this.ZU92()},t.prototype.ZW31=function(){var t=App.CM.gtM(O6.B85);this.oneKeySweep.imgNew.visible=!1;var e=t.sd;if(e.passSet&&0!=e.passSet.length){var i=e.passSet,s=e.daySet;i.length==s.length||(this.oneKeySweep.imgNew.visible=!0)}},t.prototype.ZI41=function(){var t=App.CM.gtM(O6.B85);this.challenge.imgNew.visible=!1;var e=t.sd;if(e.passSet&&0==e.passSet.length)this.challenge.imgNew.visible=!0;else{var i=e.passSet,s=e.daySet;if(i.length==s.length)t.ZD5()<L1.FE87()&&(this.challenge.imgNew.visible=!0);else this.challenge.imgNew.visible=!0}},t.prototype.doLastExt=function(){if(this._extInfo){var t=TG57.FB67(this._extInfo.idx-1);this._extInfo=t;var e=this._extInfo.dragon.number.toString(),i=6224;2==this._extInfo.dragon.type&&(i=6225),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(i)),this.tname.textFlow=M18.HTP.parse(O3.tr(4277,e)),this.ZL6();var s=TG57.FB67(this._extInfo.idx-1);this.leftBtn.visible=!!s;var o=TG57.FB67(this._extInfo.idx+1);this.rightBtn.visible=!!o,TG40.playClickEffect()}},t.prototype.doNextExt=function(){if(this._extInfo){var t=TG57.FB67(this._extInfo.idx+1);this._extInfo=t;var e=this._extInfo.dragon.number.toString(),i=6224;2==this._extInfo.dragon.type&&(i=6225),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(i)),this.tname.textFlow=M18.HTP.parse(O3.tr(4277,e)),this.ZL6();var s=TG57.FB67(this._extInfo.idx-1);this.leftBtn.visible=!!s;var o=TG57.FB67(this._extInfo.idx+1);this.rightBtn.visible=!!o,TG40.playClickEffect()}},t.prototype.getExtReward=function(){this.apF(L15.A31,this._extInfo.dragon.id)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.close.call(this,t),this.rank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GP2,this),this.challenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLastExt,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doNextExt,this),this.extGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL7,this),this.autoChallenge.removeEventListener(egret.Event.CHANGE,this.ZO15,this),this.oneKeySweep.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW32,this),this.ck1role.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck2role.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.ck3role.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO16,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getExtReward,this),this._timerHandler&&this.ZU92(),this._rankRefreshHandler&&(App.K16.rBH(this._rankRefreshHandler),this._rankRefreshHandler=void 0),this.ck1role.removeChildren(),this.boss1.destory(),this.boss1=null,this.ck2role.removeChildren(),this.boss2.destory(),this.boss2=null,this.ck3role.removeChildren(),this.boss3.destory(),this.boss3=null,this.first=null,this.second=null,this.third=null,this.rewardCollection.removeAll()},t.prototype.ZL7=function(){App.VM.open(O7.F14,this._extInfo)},t.prototype.GP2=function(){this.aCF(O6.B85,L15.A46)},t.prototype.ZW32=function(){this.apF(L15.A29)},t.prototype.doChallenge=function(){var t=App.CM.gtM(O6.B85),e=this._did;if(L1.FE87()<=e&&t.dayPassSky(e))return P18.sDP(O3.tr(5670)),void this.ZU92();this.apF(L15.A16,e)},t.prototype.ZO15=function(){App.CM.gtM(O6.B85).sdAuto=this.autoChallenge.selected,this.autoChallenge.selected?(this._countDownSecond=10,this.autoChallenge.label=O3.tr(4278,this._countDownSecond),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3,10,this.GY14,this,this.GO49,this)):this.ZU92()},t.prototype.GO49=function(){this.doChallenge()},t.prototype.GY14=function(){this._countDownSecond--,this.autoChallenge.label=O3.tr(4278,this._countDownSecond)},t.prototype.ZU92=function(){this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this.autoChallenge.label=O3.tr(4279)},t.prototype.ZW28=function(){var t=App.CM.gtM(O6.B85);t.sdAuto=!1,t.sdW=0,this.ZU92(),this.autoChallenge.selected=!1},t}(BaseEuiView);__reflect(SkyDragonView.prototype,"SkyDragonView");var SkyRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="SkyRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5284)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5285)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5286)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5287)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5288))},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this._itemCollection},t.prototype.open=function(){this.bgMak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._rankRefreshSecond=TG57.FA25(),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3*this._rankRefreshSecond,0,this.autoRefresh,this),this.ZU17()},t.prototype.ZU17=function(){var t={type:RankType.tongque,currPage:1};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.autoRefresh=function(){this.ZU17()},t.prototype.uBM=function(t){if(t instanceof THH11){if(t.nType!=RankType.tongque)return;this.GX5(t)}},t.prototype.GX5=function(t){if(t){if(t.rankList&&0<t.rankList.length){for(var e=new Array,i=1,s=0;s<t.rankList.length;s++){var o=t.rankList[s],r={};r.rank=o.nRank,r.rolename=o.sName,r.score=o.nPower;var n=TG57.FD90(o.s);r.ck=n.name,r.bg=i%2==0?"":"v1_img_kelashen_paihang_png",e.push(r),i++}this._itemCollection.replaceAll(e)}if(t.myRankList){var a=0<(o=t.myRankList).nRank?String(o.nRank):O3.tr(5750);if(this.myrank.textFlow=M18.HTP.parse(O3.tr(5289,a)),0<o.nRank){var h=TG57.FD90(o.s);this.myck.textFlow=M18.HTP.parse(O3.tr(5272,h.name))}else this.myck.textFlow=M18.HTP.parse(O3.tr(5272,"0"))}this.endScroller()}else this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._itemCollection.removeAll()},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.closeSelf=function(){this.apF(L15.A43)},t}(BaseEuiView);__reflect(SkyRankView.prototype,"SkyRankView");var ThroughDragonView=function(a){function t(t,e){var i=a.call(this,t,e)||this;return i.skinName="ThroughDragonSkin",i}return __extends(t,a),t.prototype.initUI=function(){a.prototype.initUI.call(this),this.oneKeyChallenge.label=O3.tr(4254),this.challenge.label=O3.tr(4255),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4258)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4259)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4260)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4261)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4262)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4263))},t.prototype.initData=function(){a.prototype.initData.call(this),this.firstCollection=new eui.ArrayCollection,this.firstGroup.dataProvider=this.firstCollection,this.firstGroup.itemRenderer=ItemIcon,this.passCollection=new eui.ArrayCollection,this.passGroup.dataProvider=this.passCollection,this.passGroup.itemRenderer=ItemIcon},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.open.call(this,t),this.cp1Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp2Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp3Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp4Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp5Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp6Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.rank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GHH52,this),this.challenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this),this.autoChallenge.addEventListener(egret.Event.CHANGE,this.ZO15,this),this.leftChp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLastChp,this),this.rightChp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doNextChp,this),this.star6Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG73,this),this.star12Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG73,this),this.star18Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG73,this),this.oneKeyChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI43,this),this.changeChpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO17,this),this.GX5(),egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.throughdragon_btn,!1,this.baseGroup),null==this.currStepId&&this.secondStepId&&TG68.FHH42(O7.G46,N4.basePanel),this.currStepId&&(this.secondStepId=this.currStepId)},this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG15)if(s==P4.C73){var o=t.ZB3();if(TG57.FI33()){var r=TG57.FD1();this.challenge.imgNew.visible=1==t.tdW&&o<r.id}else{var n=TG57.FC99();this.challenge.imgNew.visible=1==t.tdW&&o<n.id}}else s==P4.G40?this.GX5():s==P4.C71&&this.updateStarRw();t instanceof TF84&&this.ZD61(t)},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.D97,N4.basePanel)},t.prototype.GX5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=App.CM.gtM(O6.B85),s=TG57.FA43();i.isOrdinary||(s=TG57.FA44()),this._curThrough=s;var o=TG57.FD2(s.chapter);this._curChapter=o,this._curThroughList=TG57.FG9(this._curChapter.id),this.ZW33(),this.ZW34(),this.ZL8(),0<t.length&&t[0]===P4.C73||this.ZI41(),this.autoChallenge.selected=i.tdAuto,i.tdAuto?this.ZO15():this.ZU92()},t.prototype.ZW33=function(){var t=App.CM.gtM(O6.B85),e=this._curThroughList;this.chapterName.textFlow=M18.HTP.parse(O3.tr(4256,this._curChapter.name));var i=TG57.FA65(this._curChapter.id);this.starTotal.textFlow=[{text:String(i),style:{textColor:7716890}},{text:"/18",style:{textColor:16777215}}];var s=e[1];if(App.THH33.rEf(this.cp1Group,"through"),s&&TG57.hasPass(s.id)){this.cp1img.source="v1_img_guanqia1_png";var o=TG57.FJ71(s.id);TG57.dayPass(s.id)?this.cp1pass.visible=!0:this.cp1pass.visible=!1,this.cp1star1.source=1<=o?"v1_img_star1_png":"v1_img_star2_png",this.cp1star2.source=2<=o?"v1_img_star1_png":"v1_img_star2_png",this.cp1star3.source=3<=o?"v1_img_star1_png":"v1_img_star2_png"}else this.cp1img.source="v1_img_guanqia2_png",this.cp1pass.visible=!1,this.cp1star1.source="v1_img_star2_png",this.cp1star2.source="v1_img_star2_png",this.cp1star3.source="v1_img_star2_png";this._curThrough.id==s.id&&App.THH33.aUE(this.cp1Group,"through",-45,-60,-1,null,null,0);var r=e[2];if(App.THH33.rEf(this.cp2Group,"through"),r&&TG57.hasPass(r.id)){this.cp2img.source="v1_img_guanqia1_png";var n=TG57.FJ71(r.id);TG57.dayPass(r.id)?this.cp2pass.visible=!0:this.cp2pass.visible=!1,this.cp2star1.source=1<=n?"v1_img_star1_png":"v1_img_star2_png",this.cp2star2.source=2<=n?"v1_img_star1_png":"v1_img_star2_png",this.cp2star3.source=3<=n?"v1_img_star1_png":"v1_img_star2_png"}else this.cp2img.source="v1_img_guanqia2_png",this.cp2pass.visible=!1,this.cp2star1.source="v1_img_star2_png",this.cp2star2.source="v1_img_star2_png",this.cp2star3.source="v1_img_star2_png";this._curThrough.id==r.id&&App.THH33.aUE(this.cp2Group,"through",-45,-60,-1,null,null,0);var a=e[3];if(App.THH33.rEf(this.cp3Group,"through"),a&&TG57.hasPass(a.id)){this.cp3img.source="v1_img_guanqia1_png";var h=TG57.FJ71(a.id);TG57.dayPass(a.id)?this.cp3pass.visible=!0:this.cp3pass.visible=!1,this.cp3star1.source=1<=h?"v1_img_star1_png":"v1_img_star2_png",this.cp3star2.source=2<=h?"v1_img_star1_png":"v1_img_star2_png",this.cp3star3.source=3<=h?"v1_img_star1_png":"v1_img_star2_png"}else this.cp3img.source="v1_img_guanqia2_png",this.cp3pass.visible=!1,this.cp3star1.source="v1_img_star2_png",this.cp3star2.source="v1_img_star2_png",this.cp3star3.source="v1_img_star2_png";this._curThrough.id==a.id&&App.THH33.aUE(this.cp3Group,"through",-45,-60,-1,null,null,0);var p=e[4];if(App.THH33.rEf(this.cp4Group,"through"),p&&TG57.hasPass(p.id)){this.cp4img.source="v1_img_guanqia1_png";var l=TG57.FJ71(p.id);TG57.dayPass(p.id)?this.cp4pass.visible=!0:this.cp4pass.visible=!1,this.cp4star1.source=1<=l?"v1_img_star1_png":"v1_img_star2_png",this.cp4star2.source=2<=l?"v1_img_star1_png":"v1_img_star2_png",this.cp4star3.source=3<=l?"v1_img_star1_png":"v1_img_star2_png"}else this.cp4img.source="v1_img_guanqia2_png",this.cp4pass.visible=!1,this.cp4star1.source="v1_img_star2_png",this.cp4star2.source="v1_img_star2_png",this.cp4star3.source="v1_img_star2_png";this._curThrough.id==p.id&&App.THH33.aUE(this.cp4Group,"through",-45,-60,-1,null,null,0);var c=e[5];if(App.THH33.rEf(this.cp5Group,"through"),c&&TG57.hasPass(c.id)){this.cp5img.source="v1_img_guanqia1_png";var u=TG57.FJ71(c.id);TG57.dayPass(c.id)?this.cp5pass.visible=!0:this.cp5pass.visible=!1,this.cp5star1.source=1<=u?"v1_img_star1_png":"v1_img_star2_png",this.cp5star2.source=2<=u?"v1_img_star1_png":"v1_img_star2_png",this.cp5star3.source=3<=u?"v1_img_star1_png":"v1_img_star2_png"}else this.cp5img.source="v1_img_guanqia2_png",this.cp5pass.visible=!1,this.cp5star1.source="v1_img_star2_png",this.cp5star2.source="v1_img_star2_png",this.cp5star3.source="v1_img_star2_png";this._curThrough.id==c.id&&App.THH33.aUE(this.cp5Group,"through",-45,-60,-1,null,null,0);var d=e[6];if(App.THH33.rEf(this.cp6Group,"through"),d&&TG57.hasPass(d.id)){this.cp6img.source="v1_img_guanqia1_png";var v=TG57.FJ71(d.id);TG57.dayPass(d.id)?this.cp6pass.visible=!0:this.cp6pass.visible=!1,this.cp6star1.source=1<=v?"v1_img_star1_png":"v1_img_star2_png",this.cp6star2.source=2<=v?"v1_img_star1_png":"v1_img_star2_png",this.cp6star3.source=3<=v?"v1_img_star1_png":"v1_img_star2_png"}else this.cp6img.source="v1_img_guanqia2_png",this.cp6pass.visible=!1,this.cp6star1.source="v1_img_star2_png",this.cp6star2.source="v1_img_star2_png",this.cp6star3.source="v1_img_star2_png";if(this._curThrough.id==d.id&&App.THH33.aUE(this.cp6Group,"through",-45,-60,-1,null,null,0),0==this._curChapter.type&&TG57.FHH16()){this.changeChpBtn.visible=!0,this.changeChpBtn.label=O3.tr(4252);L1.init.throughStarNum.value,t.ZB39();this.changeChpBtn.imgNew.visible=!TG57.getAllAdoptDifficulty()}else 1==this._curChapter.type?(this.changeChpBtn.visible=!0,this.changeChpBtn.label=O3.tr(4253),this.changeChpBtn.imgNew.visible=!TG57.getAllAdoptOrdinary()):this.changeChpBtn.visible=!1;this.ZD96(),this.ZI41();var f=TG57.FD2(this._curChapter.id-1);f&&f.type==this._curChapter.type?this.leftChp.visible=!0:this.leftChp.visible=!1;var g=TG57.FD2(this._curChapter.id+1);if(g&&g.type==this._curChapter.type){this.rightChp.visible=!0;var m=TG57.FB26(t.ZB3());m||(m=TG57.FA93()),m&&g.id>m.chapter+1?(this.rightChp.touchEnabled=!1,this.rightChp.touchChildren=!1,this.rightChp.filters=[P16.GrayMatrixFilter]):(this.rightChp.touchEnabled=!0,this.rightChp.touchChildren=!0,this.rightChp.filters=[])}else this.rightChp.visible=!1;this.ZR89(),this.ZR88()},t.prototype.ZL8=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=TG57.FA18();t.v<e?(this.onekeyDes.top=670,this.onekeyDes.textFlow=M18.HTP.parse(O3.tr(5291,e))):(this.onekeyDes.top=677,this.onekeyDes.textFlow=M18.HTP.parse(O3.tr(5292)))},t.prototype.ZR88=function(){this.dname.textFlow=M18.HTP.parse(O3.tr(4257,this._curThrough.name));var t=new Array,e=this._curThrough.firstrewardcoin,i=N12.gID(""+pack.I11.BIND_GOLD),s={};s.data=i,s.ct=e;var o={};o.itemData=s,o.isBottom=!1,t.push(o);var r=this._curThrough.firstrewarditem;if(r&&0<r.split(";").length)for(var n=r.split(";"),a=0;a<n.length;a++){var h=n[a].split(":")[0],p=n[a].split(":")[1],l=N12.gID(h);(T={}).data=l,T.ct=Number(p),(C={}).itemData=T,C.isBottom=!1,t.push(C)}this.firstCollection.replaceAll(t),TG57.hasPass(this._curThrough.id)?this.firstGet.visible=!0:this.firstGet.visible=!1;var c=new Array,u=this._curChapter.rewardexp;if(u){var d=N12.gID(""+pack.I11.EXP),v={};v.data=d,v.ct=u;var f={};f.itemData=v,f.isBottom=!1,c.push(f)}var g=this._curChapter.rewardcoin,m=N12.gID(""+pack.I11.COIN),y={};y.data=m,y.ct=g;var A={};A.itemData=y,A.isBottom=!1,c.push(A);var b=this._curChapter.rewarditem;if(b&&0<b.split(";").length)for(n=b.split(";"),a=0;a<n.length;a++){var T,C;h=n[a].split(":")[0],p=n[a].split(":")[1],l=N12.gID(h);(T={}).data=l,T.ct=Number(p),(C={}).itemData=T,C.isBottom=!1,c.push(C)}this.passCollection.replaceAll(c),TG57.FI32(this._curThrough.id)?this.passGet.visible=!0:this.passGet.visible=!1},t.prototype.updateStarRw=function(){var t=TG57.FA65(this._curChapter.id);6<=t?TG57.FD91(this._curChapter.id,6)?(this.star6Rw.top=5,this.star6Rw.source="v1_img_baoxiangkai_png",this.star6Rp.visible=!1):(this.star6Rw.top=13,this.star6Rw.source="v1_img_baoxiangweikai_png",this.star6Rp.visible=!0):(this.star6Rw.top=13,this.star6Rw.source="v1_img_baoxiangweikai_png",this.star6Rp.visible=!1),12<=t?TG57.FD91(this._curChapter.id,12)?(this.star12Rw.top=5,this.star12Rw.source="v1_img_baoxiangkai_png",this.star12Rp.visible=!1):(this.star12Rw.top=13,this.star12Rw.source="v1_img_baoxiangweikai_png",this.star12Rp.visible=!0):(this.star12Rw.top=13,this.star12Rw.source="v1_img_baoxiangweikai_png",this.star12Rp.visible=!1),18<=t?TG57.FD91(this._curChapter.id,18)?(this.star18Rw.top=5,this.star18Rw.source="v1_img_baoxiangkai_png",this.star18Rp.visible=!1):(this.star18Rw.top=13,this.star18Rw.source="v1_img_baoxiangweikai_png",this.star18Rp.visible=!0):(this.star18Rw.top=13,this.star18Rw.source="v1_img_baoxiangweikai_png",this.star18Rp.visible=!1)},t.prototype.ZW34=function(){var t=TG57.FA65(this._curChapter.id);this.processBar.minimum=0,this.processBar.maximum=12,this.processBar.value=t-6,this.updateStarRw()},t.prototype.ZR89=function(){this.leftRp.visible=!1,this.rightRp.visible=!1;var t=TG57.FB27();if(1<this._curChapter.id)for(var e=this._curChapter.id-1;1<=e;e--){var i=TG57.FA65(e);if(6<=i&&!TG57.FD91(e,6)?this.leftRp.visible=!0:12<=i&&!TG57.FD91(e,12)?this.leftRp.visible=!0:18<=i&&!TG57.FD91(e,18)&&(this.leftRp.visible=!0),this.leftRp.visible)break}if(this._curChapter.id<t.id)for(e=this._curChapter.id+1;e<=t.id;e++){var s=TG57.FA65(e);if(6<=s&&!TG57.FD91(e,6)?this.rightRp.visible=!0:12<=s&&!TG57.FD91(e,12)?this.rightRp.visible=!0:18<=s&&!TG57.FD91(e,18)&&(this.rightRp.visible=!0),this.rightRp.visible)break}},t.prototype.ZD96=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B85);this.oneKeyChallenge.imgNew.visible=!1;var i=t.avatarInfo,s=TG57.FA18();if(!(i.v<s)){var o=e.td,r=o.passMap,n=o.dayMap,a=!1;for(var h in r)if(3<=r[h]&&!n[h]){a=!0;break}a&&(this.oneKeyChallenge.imgNew.visible=!0)}},t.prototype.ZI41=function(){var t=App.CM.gtM(O6.B85);this.challenge.imgNew.visible=t.redRush()},t.prototype.chooseDragon=function(t){var e=this._curThroughList;switch(t.currentTarget){case this.cp1Group:if(1==this._curThrough.idx)return;this._curThrough=e[1];break;case this.cp2Group:if(2==this._curThrough.idx)return;this._curThrough=e[2];break;case this.cp3Group:if(3==this._curThrough.idx)return;this._curThrough=e[3];break;case this.cp4Group:if(4==this._curThrough.idx)return;this._curThrough=e[4];break;case this.cp5Group:if(5==this._curThrough.idx)return;this._curThrough=e[5];break;case this.cp6Group:if(6==this._curThrough.idx)return;this._curThrough=e[6]}this.ZW33(),this.playEffect()},t.prototype.doLastChp=function(){var t=TG57.FD2(this._curChapter.id-1);this._curChapter=t,this._curThroughList=TG57.FG9(this._curChapter.id);for(var e=1;e<=6;e++){var i=this._curThroughList[e];if(!TG57.dayPass(i.id)){this._curThrough=i;break}if(i.id==this._curThrough.chapter){this._curThrough=i;break}if(6==e){this._curThrough=i;break}}this.ZW33(),this.ZW34(),this.playEffect()},t.prototype.playEffect=function(){TG40.playClickEffect()},t.prototype.doNextChp=function(){var t=TG57.FD2(this._curChapter.id+1);if(1!=t.type||TG57.FI33()){this._curChapter=t,this._curThroughList=TG57.FG9(this._curChapter.id);for(var e=1;e<=6;e++){var i=this._curThroughList[e];if(!TG57.dayPass(i.id)){this._curThrough=i;break}if(i.id==this._curThrough.chapter){this._curThrough=i;break}if(6==e){this._curThrough=i;break}}this.ZW33(),this.ZW34(),this.playEffect()}else P18.sDP(O3.tr(5290))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.close.call(this,t),App.THH33.rEf(this.cp1Group,"through"),App.THH33.rEf(this.cp2Group,"through"),App.THH33.rEf(this.cp3Group,"through"),App.THH33.rEf(this.cp4Group,"through"),App.THH33.rEf(this.cp5Group,"through"),App.THH33.rEf(this.cp6Group,"through"),this.cp1Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp2Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp3Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp4Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp5Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.cp6Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseDragon,this),this.rank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GHH52,this),this.challenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doChallenge,this),this.autoChallenge.removeEventListener(egret.Event.CHANGE,this.ZO15,this),this.leftChp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLastChp,this),this.rightChp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doNextChp,this),this.star6Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG73,this),this.star12Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG73,this),this.star18Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG73,this),this.oneKeyChallenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI43,this),this.changeChpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO17,this),this._timerHandler&&this.ZU92(),this.firstCollection.removeAll(),this.passCollection.removeAll(),this._countDownSecond=null,this._curThrough=null,this._curChapter=null,this._curThroughList=null,egret.Tween.removeTweens(this)},t.prototype.ZG73=function(t){switch(t.currentTarget){case this.star6Group:App.VM.open(O7.A22,this._curChapter,6);break;case this.star12Group:App.VM.open(O7.A22,this._curChapter,12);break;case this.star18Group:App.VM.open(O7.A22,this._curChapter,18)}this.playEffect()},t.prototype.ZO17=function(t){t.currentTarget.label===O3.tr(5293)?this.doEasy():this.doDifficult()},t.prototype.doDifficult=function(){if(1!=this._curChapter.type)if(TG57.FI33()){var t=TG57.FA44();this._curThrough=t;var e=TG57.FD2(t.chapter);this._curChapter=e,this._curThroughList=TG57.FG9(this._curChapter.id),this.ZW33(),this.ZW34()}else P18.sDP(O3.tr(5290))},t.prototype.doEasy=function(){if(0!=this._curChapter.type){var t=TG57.FA43();this._curThrough=t;var e=TG57.FD2(t.chapter);this._curChapter=e,this._curThroughList=TG57.FG9(this._curChapter.id),this.ZW33(),this.ZW34()}},t.prototype.GHH52=function(){this.apF(L15.A41),this.playEffect()},t.prototype.ZI43=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=TG57.FA18();t.v<e?P18.sDP(O3.tr(5294,e)):this.apF(L15.A13)},t.prototype.doChallenge=function(){if(this.setOrdinary(),TG57.hasPass(this._curThrough.id)){var t=this._curThrough.id;this.apF(L15.A1,t)}else{var e=L1.FG8(this._curThrough.id);if(null==e||0==e.beforeid||TG57.hasPass(e.beforeid)){var i=TG57.FB69();if(TG57.FD2(i.chapter).type==this._curChapter.type)if(i.id>this._curThrough.id)this.ZF24();else{t=this._curThrough.id;this.apF(L15.A1,t)}else{var s=TG57.FC99();if(TG57.hasPass(s.id)){t=this._curThrough.id;this.apF(L15.A1,t)}else this.ZF24()}}else this.ZF24()}},t.prototype.setOrdinary=function(){var t=App.CM.gtM(O6.B85);this.changeChpBtn.visible&&(t.isOrdinary=this.changeChpBtn.label!=O3.tr(4253))},t.prototype.ZF24=function(){var t=App.CM.gtM(O6.B85);this.autoChallenge.selected=!1,t.tdAuto=this.autoChallenge.selected,this.ZU92(),P18.sDP(O3.tr(5295))},t.prototype.ZO15=function(){App.CM.gtM(O6.B85).tdAuto=this.autoChallenge.selected,this.autoChallenge.selected?(this._countDownSecond=10,this.autoChallenge.label=O3.tr(4264,this._countDownSecond),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3,10,this.GY14,this,this.GO49,this)):this.ZU92()},t.prototype.GO49=function(){this.doChallenge()},t.prototype.GY14=function(){this._countDownSecond--,this.autoChallenge.label=O3.tr(4265,this._countDownSecond)},t.prototype.ZU92=function(){this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this.autoChallenge.label=O3.tr(4266)},t.prototype.ZW28=function(){var t=App.CM.gtM(O6.B85);t.tdAuto=!1,t.tdW=0,this.ZU92(),this.autoChallenge.selected=!1},t}(BaseEuiView);__reflect(ThroughDragonView.prototype,"ThroughDragonView");var ThroughRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ThroughRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5273)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5274)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5275)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5276)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5277))},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this._itemCollection},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._rankRefreshSecond=TG57.FA25(),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3*this._rankRefreshSecond,0,this.autoRefresh,this),this.ZU17()},t.prototype.ZU17=function(){var t={type:RankType.through,currPage:1};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.autoRefresh=function(){this.ZU17()},t.prototype.uBM=function(t){if(t instanceof THH11){if(t.nType!=RankType.through)return;this.GX5(t)}},t.prototype.GX5=function(t){if(t){if(t.rankList&&0<t.rankList.length){for(var e=new Array,i=1,s=0;s<t.rankList.length;s++){var o=t.rankList[s],r={};r.rank=o.nRank,r.rolename=o.sName,r.score=o.nPower,r.ck=o.st,r.bg=i%2==0?"":"v1_img_kelashen_paihang_png",e.push(r),i++}this._itemCollection.replaceAll(e)}if(t.myRankList){var n=0<(o=t.myRankList).nRank?String(o.nRank):O3.tr(5829);if(this.myrank.textFlow=M18.HTP.parse(O3.tr(5278,n)),0<o.nRank){TG57.FD90(o.s);this.myck.textFlow=M18.HTP.parse(O3.tr(5279,o.st))}else this.myck.textFlow=M18.HTP.parse(O3.tr(5279,"0"))}this.endScroller()}else this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._itemCollection.removeAll(),this._rankRefreshSecond=null},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.closeSelf=function(){this.apF(L15.A35)},t}(BaseEuiView);__reflect(ThroughRankView.prototype,"ThroughRankView");var dragon,ThroughRTView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ThroughRTSkin",i}return __extends(t,o),t.prototype.initUI=function(){this.process.labelDisplay.visible=!1,o.prototype.initUI.call(this),this.percentHeight=NaN,this.percentWidth=NaN,this.top=42,this.right=-25,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5280)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5281))},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.parent&&this.parent.setChildIndex(this,0);var i=t[0],s=t[1];this.title.text=i,this.desc.text=s},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this)},t.prototype.ZM95=function(t){this.process.minimum=0,this.process.maximum=100,this.process.value=t},t}(BaseEuiView);__reflect(ThroughRTView.prototype,"ThroughRTView"),function(t){var e=function(){};(dragon||(dragon={})).BronzeDragon=e,__reflect(e.prototype,"dragon.BronzeDragon")}(),function(t){var e=function(){function t(t){this.obj={},t&&this.update(t)}return t.prototype.update=function(t){for(var e in t)this.obj[e]=P7.getValue(t[e],this.obj[e])},Object.defineProperty(t.prototype,"count",{get:function(){return this.bc+L1.fairyFreeTimes-this.fightCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fightCount",{get:function(){return this.obj.uc+this.obj.fc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLevel",{get:function(){return this.obj.max},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bc",{get:function(){return this.obj.bc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this.isAllPassed?L1.fairylandMaxLevel:this.obj.passed+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAllPassed",{get:function(){return this.obj.passed>=L1.fairylandMaxLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yet",{get:function(){return this.obj.yet},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"passed",{get:function(){return this.obj.passed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rhp",{get:function(){return this.obj.rhp},enumerable:!0,configurable:!0}),t}();t.FairyLandVo=e,__reflect(e.prototype,"dragon.FairyLandVo")}(dragon||(dragon={})),function(t){var e=function(){};(dragon||(dragon={})).MaterialDragon=e,__reflect(e.prototype,"dragon.MaterialDragon")}(),function(t){var e=function(){};(dragon||(dragon={})).SkyDragon=e,__reflect(e.prototype,"dragon.SkyDragon")}(),function(t){var e=function(){};(dragon||(dragon={})).ThroughDragon=e,__reflect(e.prototype,"dragon.ThroughDragon")}();var M10=function(){function d(){}return d.FK35=function(t){this.init=t.equip_init,this.ava=t.equip_ava,this.horse=t.equip_horse,this.wing=t.equip_wing,this.faqi=t.equip_faqi,this.weapon=t.equip_weapon,this.formation=t.equip_formation,this.general=t.equip_general,this.equipsite=t.equip_equipsite,this.prestige=t.equip_prestige,this.soul=t.equip_soul,this.animal=t.equip_animal,this.psychic=t.equip_psychic,this.spirit=t.equip_spirit,this.asoul=t.equip_animalsoul,this.equipsuit=t.equip_equipsuit,this.reform=t.equip_reform,this.equipTypeData=d.getEquipData()},d.getEquipData=function(){var t={};if(!d.equipsite)return t;var e=d.equipsite;for(var i in e){var s=e[i],o=[],r=s.equiptype+"";t[r]?t[r].push(s):(o.push(s),t[r]=o)}return t},d.FD92=function(t,e){var i={};switch(e){case M19.A96:i=d.ava[t];break;case M19.A91:i=d.horse[t];break;case M19.A93:i=d.wing[t];break;case M19.A94:i=d.faqi[t];break;case M19.A88:i=d.weapon[t];break;case M19.A83:i=d.formation[t];break;case M19.A85:i=d.general[t];break;case M19.A84:i=d.prestige[t];break;case M19.A95:i=d.soul[t];break;case M19.A89:i=d.animal[t];break;case M19.A86:i=d.psychic[t];break;case M19.A90:i=d.spirit[t];break;case M19.A92:i=d.asoul[t];break;case M19.A87:i=Classup.Config.equipment[t]}return i},d.getPower=function(t){var e=N12.gID(t);if(e.power)return e.power;var i=1;0<=e.addlevel&&(i=e.addlevel);var s=this.gAG(e.attr)+this.gAG(e.addattr)*i;return s=Math.floor(s),e.power=s},d.gAG=function(t){if(!t||0==t.length)return 0;for(var e=K18.attribute,i=M18.FL28(t,";",":"),s=0,o=0;o<i.length;o++){var r=void 0,n=void 0;switch(Number(i[o][0])){case avatar.AttributeKey.CHUANCI:case avatar.AttributeKey.FANGHU:n=App.CM.gtM(O6.B82).getAvatarAttrA(avatar.AttributeKey.ATK),r=e[i[o][0]].power,s+=parseFloat(i[o][1])*r*n;break;case avatar.AttributeKey.AllAtk:n=App.CM.gtM(O6.B82).getAvatarAttrB(avatar.AttributeKey.ATK),r=e[avatar.AttributeKey.ATK].power,s+=parseFloat(i[o][1])*r*n;break;case avatar.AttributeKey.AllDef:n=App.CM.gtM(O6.B82).getAvatarAttrB(avatar.AttributeKey.DEF),r=e[avatar.AttributeKey.DEF].power,s+=parseFloat(i[o][1])*r*n;break;case avatar.AttributeKey.AllHp:n=App.CM.gtM(O6.B82).getAvatarAttrB(avatar.AttributeKey.HP),r=e[avatar.AttributeKey.HP].power,s+=parseFloat(i[o][1])*r*n;break;default:r=e[i[o][0]].power,s+=parseFloat(i[o][1])*r}}return Math.round(s)},d.FHH18=function(t){if(t){var s=K18.attribute,o=0;return t.forEach(function(t){var e=s[t.k].power,i=t.v*e;o+=i}),Math.round(o)}return 0},d.FHH19=function(t){if(t){var e=K18.attribute,i=0;for(var s in t){var o=e[t[s].k].power;i+=t[s].v*o}return Math.round(i)}return 0},d.FHH20=function(t){if(t){var e=K18.attribute,i=0;for(var s in t){var o=e[s].power;i+=t[s]*o}return Math.round(i)}return 0},d.FI35=function(t){var e=void 0;return d.formation?e=d.formation[t]:e},d.FL68=function(t){var e=void 0;return d.reform?e=d.reform[t]:e},d.FI36=function(){var t=0;if(!d.equipsuit)return t;var e,i,s=App.CM.gtM(O6.B98),o=s.orangeEquip,r=o.concat(s.legendEquip),n=o.length+s.legendEquip.length;if(n){for(var a in d.equipsuit){if(!(d.equipsuit[a].num<=n))break;e=parseInt(a)}for(var h=e;0<=h;h--)if(h<=n){for(var p=i=0;p<n;p++){var l=d.ava[r[p].i+""],c=d.equipsuit[h+""].level,u=l.level;6==l.quality&&(u+=200),c<=u&&(i+=1)}if(d.equipsuit[h+""].num<=i){t=h;break}}}return t},d.FK75=function(t){var e=void 0;return d.general?e=d.general[t]:e},d.FD3=function(t){var e=void 0;if(!d.formation)return e;for(var i in d.formation){var s=d.formation[i];if(t==s.pos){e=s;break}}return e},d.FA66=function(t){var e=new Array;if(!d.formation)return e;for(var i in d.formation){var s=d.formation[i];t==s.pos&&e.push(s)}return e},d.FE91=function(t){if(d.general){var e=P7.get("getGeneralEquip_"+t);if(!e){for(var i in d.general){var s=d.general[i];if(t==s.pos){e=s.id;break}}P7.set("getGeneralEquip_"+t,e)}return d.general[e]}},d.FI37=function(t){for(var e="",i=App.CM.gtM(O6.B98).avaEquip,s=0;s<i.length;s++){var o=d.FD92(i[s].i.toString(),i[s].t);if(t==o.pos){e=o.icon;break}}return e},d.FE59=function(t){var e;return this.init&&this.init[t]&&(e=parseInt(this.init[t].value)),e},d}();__reflect(M10.prototype,"M10");var M19=function(){function t(){}return t.A96=1,t.A91=2,t.A93=3,t.A94=4,t.A88=5,t.A83=6,t.A85=7,t.A84=8,t.A95=9,t.A89=10,t.A86=11,t.A90=12,t.A92=13,t.A87=14,t.A59=10001,t.A60=10002,t.A62=10003,t.A63=10004,t.A64=10005,t.A65=10006,t.A74=10007,t.A75=10008,t.A61=10009,t.A66=10010,t.A67=10011,t.A68=10012,t.A27=10013,t.A28=10014,t.A50=10015,t.A51=10016,t.A40=10017,t.A41=10018,t.A76=10019,t.A77=10020,t.A80=10021,t.A42=10022,t.A43=10023,t.A44=10024,t.A45=10025,t.A29=10026,t.A30=10027,t.A52=10028,t.A53=10029,t.A54=10030,t.A55=10031,t.A19=10032,t.A20=10033,t.A46=10034,t.A47=10035,t.A69=10036,t.A21=10037,t.A81=10038,t.A82=10039,t.A70=10040,t.A71=10041,t.A3=10042,t.A4=10043,t.A1=10044,t.A2=10045,t.A56=10046,t.A57=10047,t.A5=10048,t.A6=10049,t.A78=11001,t.A72=11002,t.A31=11003,t.A22=11004,t.A32=11005,t.A23=11006,t.A33=11007,t.A24=11008,t.A17=11009,t.A14=11010,t.A79=11011,t.A73=11012,t.A48=11013,t.A34=11014,t.A35=11015,t.A25=11016,t.A18=11017,t.A15=11018,t.A8=11019,t.A7=11020,t.A10=11021,t.A9=11022,t.A49=11023,t.A36=11024,t.A16=11025,t.A11=11026,t.A37="changeAwake",t.A12=11027,t.A13=11028,t.A26=11029,t.A58=11030,t.A38=11031,t.A39=11032,t}();__reflect(M19.prototype,"M19");var ForgeType=function(){function t(){}return t.SD=1,t.RD=2,t.FD=3,t.GD=4,t}();__reflect(ForgeType.prototype,"ForgeType");var TD98=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.HH24,"EquipMainView",t,K17.UI_Main),t.rgF(M19.A48,t.GL24,t),t.rgF(M19.A34,t.GJ40,t),t.rgF(M19.A78,t.GS85,t),t.rgF(M19.A72,t.GQ84,t),App.VM.register(O7.G65,"EquipAddAhView",t,K17.UI_Main_TOP),t.rgF(M19.A32,t.GJ39,t),t.rgF(M19.A23,t.GHH55,t),App.VM.register(O7.G64,"EquipSmeltView",t,K17.UI_Main_TOP),t.rgF(M19.A31,t.GJ41,t),t.rgF(M19.A22,t.GHH56,t),App.VM.register(O7.G66,"EquipPitchView",t,K17.UI_Main_TOP),t.rgF(M19.A33,t.GJ42,t),t.rgF(M19.A24,t.GHH57,t),App.VM.register(O7.E84,"EquipDetailsView",t,K17.UI_Tips),t.rgF(M19.A17,t.GF72,t),t.rgF(M19.A14,t.GE55,t),App.VM.register(O7.G67,"EquipGreatView",t,K17.UI_Tips),t.rgF(M19.A79,t.GS86,t),t.rgF(M19.A73,t.GQ85,t),App.VM.register(O7.G47,"LegendMainView",t,K17.UI_Main_TOP),t.rgF(M19.A35,t.GJ43,t),t.rgF(M19.A25,t.GHH58,t),App.VM.register(O7.E86,"EquipResolveView",t,K17.UI_Main_TOP),t.rgF(M19.A18,t.GF73,t),t.rgF(M19.A15,t.GE56,t),App.VM.register(O7.C42,"EquipChooseQuenView",t,K17.UI_Tips),t.rgF(M19.A8,t.GC73,t),t.rgF(M19.A7,t.GB88,t),App.VM.register(O7.D19,"EquipResonanceView",t,K17.UI_Tips),t.rgF(M19.A10,t.GD59,t),t.rgF(M19.A9,t.GC74,t),App.VM.register(O7.HH42,"EquipSuitView",t,K17.UI_Tips),t.rgF(M19.A49,t.GL25,t),t.rgF(M19.A36,t.GJ44,t),App.VM.register(O7.E52,"EquipRiseTipsView",t,K17.UI_Tips),t.rgF(M19.A16,t.GE57,t),t.rgF(M19.A11,t.GD60,t),App.VM.register(O7.C18,"EquipChooseAwakeView",t,K17.UI_Tips),t.rgF(M19.A12,t.GD61,t),t.rgF(M19.A13,t.GD62,t),App.VM.register(O7.C19,"EquipAwakeMasterView",t,K17.UI_Tips),t.rgF(M19.A38,t.GJ45,t),t.rgF(M19.A39,t.GJ46,t);var e=new TG58(t);return e.aLV(O7.I78),e.aLV(O7.HH24),e.aLV(O7.HH97),e.aLV(O7.G64),e.aLV(O7.G66),e.aLV(O7.D98),e.aLV(O7.F82),e.aLV(O7.E85),e.aLV(O7.I11),e.aLV(O7.I39),e.aLV(O7.HH30),e.aLV(O7.G58),e.aLV(O7.I88),e.aLV(O7.I65),e.aLV(O7.I77),e.aLV(O7.I87),e.aLV(O7.D99),e.aLV(O7.G47),e.aLV(O7.F83),e.aLV(O7.HH41),e.aLV(O7.E86),e.aLV(O7.A81),e.aLV(O7.HH25),e.aLV(O7.I79),e.aLV(O7.F84),e.aLV(O7.E1),e.aLV(O7.B73),e.aLV(O7.HH98),e.aLV(O7.HH28),e.aLV(O7.B70),e.aLV(O7.I64),e.aLV(O7.G45),e.aLV(O7.I90),e.aLV(O7.E51),e.aLV(O7.HH10),t.equipProxy=new TG59(t),t.rgF(M19.A62,t.GU68,t),t.rgF(M19.A63,t.GU69,t),t.rgF(M19.A59,t.GS88,t),t.rgF(M19.A60,t.GS89,t),t.rgF(M19.A64,t.GU71,t),t.rgF(M19.A65,t.GW23,t),t.rgF(M19.A61,t.GS87,t),t.rgF(M19.A66,t.GU70,t),t.rgF(M19.A67,t.GU72,t),t.rgF(M19.A68,t.GU73,t),t.rgF(M19.A27,t.GN16,t),t.rgF(M19.A28,t.GN17,t),t.rgF(M19.A50,t.GQ86,t),t.rgF(M19.A51,t.GQ87,t),t.rgF(M19.A40,t.GP5,t),t.rgF(M19.A41,t.GP6,t),t.rgF(M19.A76,t.GW26,t),t.rgF(M19.A77,t.GW27,t),t.rgF(M19.A74,t.GW24,t),t.rgF(M19.A75,t.GW25,t),t.rgF(M19.A80,t.GY50,t),t.rgF(M19.A42,t.GP3,t),t.rgF(M19.A43,t.GP4,t),t.rgF(M19.A44,t.GP7,t),t.rgF(M19.A45,t.GP8,t),t.rgF(M19.A29,t.GN18,t),t.rgF(M19.A30,t.GN19,t),t.rgF(M19.A52,t.GQ88,t),t.rgF(M19.A53,t.GQ89,t),t.rgF(M19.A54,t.GQ90,t),t.rgF(M19.A55,t.GQ91,t),t.rgF(M19.A19,t.GJ47,t),t.rgF(M19.A20,t.GJ48,t),t.rgF(M19.A46,t.GP9,t),t.rgF(M19.A47,t.GP10,t),t.rgF(M19.A69,t.GU76,t),t.rgF(M19.A21,t.GL26,t),t.rgF(M19.A81,t.GY49,t),t.rgF(M19.A82,t.GY48,t),t.rgF(M19.A70,t.GU74,t),t.rgF(M19.A71,t.GU75,t),t.rgF(M19.A3,t.GS90,t),t.rgF(M19.A4,t.GS91,t),t.rgF(M19.A1,t.GQ92,t),t.rgF(M19.A2,t.GQ93,t),t.rgF(M19.A56,t.equipProxy.ZW39,t.equipProxy),t.rgF(M19.A57,t.GS92,t),t.rgF(M19.A5,t.equipProxy.ZO26,t.equipProxy),t.rgF(M19.A6,t.GP11,t),t.rgF(M19.A26,t.GD63,t),t.rgF(M19.A58,t.GN20,t),t}return __extends(t,i),t.prototype.GY48=function(){var t=this,e=this.gtM();e.showCD=5,this.timingHander=App.K16.doTimer(1e3,5,function(){e.showCD-=1},this,function(){e.showCD=null,t.GL17()},this)},t.prototype.GL17=function(){this.timingHander&&(App.K16.rBH(this.timingHander),this.timingHander=null)},t.prototype.GJ39=function(t){App.VM.open(O7.G65,t)},t.prototype.GHH55=function(){App.VM.close(O7.G65)},t.prototype.GL24=function(t){App.VM.open(O7.HH24,t)},t.prototype.GJ40=function(){App.VM.close(O7.HH24)},t.prototype.GS85=function(){App.VM.open(O7.I78)},t.prototype.GQ84=function(){App.VM.close(O7.I78)},t.prototype.GJ41=function(){App.VM.open(O7.G64)},t.prototype.GHH56=function(){App.VM.close(O7.G64)},t.prototype.GJ42=function(){App.VM.open(O7.G66)},t.prototype.GHH57=function(){App.VM.close(O7.G66)},t.prototype.GF72=function(t){App.VM.open(O7.E84,t)},t.prototype.GE55=function(){App.VM.close(O7.E84)},t.prototype.GS86=function(t){App.VM.open(O7.G67,t)},t.prototype.GQ85=function(){App.VM.close(O7.G67)},t.prototype.GJ43=function(){App.VM.open(O7.G47)},t.prototype.GHH58=function(){App.VM.close(O7.G47)},t.prototype.GF73=function(t){App.VM.open(O7.E86,t)},t.prototype.GE56=function(){App.VM.close(O7.E86)},t.prototype.GC73=function(t){App.VM.open(O7.C42,t)},t.prototype.GB88=function(){App.VM.close(O7.C42)},t.prototype.GD59=function(){App.VM.open(O7.D19)},t.prototype.GC74=function(){App.VM.close(O7.D19)},t.prototype.GL25=function(){App.VM.open(O7.HH42)},t.prototype.GJ44=function(){App.VM.close(O7.HH42)},t.prototype.GE57=function(t){App.VM.open(O7.E52,t)},t.prototype.GD60=function(){App.VM.close(O7.E52)},t.prototype.GD61=function(t){App.VM.open(O7.C18,t)},t.prototype.GD62=function(){App.VM.close(O7.C18)},t.prototype.GJ45=function(){App.VM.open(O7.C19)},t.prototype.GJ46=function(){App.VM.close(O7.C19)},t.prototype.GY49=function(t){if(200==t.head.state){var e=this.gtM();e.updateEquip(t.body),e.notify(P4.Y17)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU68=function(){App.CM.gtM(O6.B97).account;return this.equipProxy.GU68()},t.prototype.GU69=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),App.CM.gtM(O6.C18).updateNew(),e.updateIsShow(),e.notify(P4.X2)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GS87=function(t){App.VM.gOV(O7.G66).updataShow(t)},t.prototype.GU70=function(t){App.VM.gOV(O7.G64).startSmelt(t)},t.prototype.GS88=function(t){this.equipProxy.GS88(t)},t.prototype.GS89=function(t){if(200==t.head.state){var e=this.gtM();P18.sDP(O3.tr(1154)),e.equipData.c=t.body.c,e.notify(P4.L89)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU71=function(t){this.equipProxy.GU71(t)},t.prototype.GW23=function(t){if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void App.VM.gOV(O7.G64).updateUI();var e=this.gtM();t.body.es&&e.ZR91(t.body.es),t.body.ob&&P5.sIs(t.body.ob),e.equipData&&(e.equipData.rexp=t.body.rexp,e.equipData.rlv=t.body.rlv),e.notify(P4.V45)},t.prototype.GW24=function(){this.equipProxy.GW24()},t.prototype.GW25=function(t){if(200==t.head.state){var e=this.gtM();e.ZL13(t.body.es),e.ZL15(t.body),e.notify(P4.X60)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ47=function(t){this.equipProxy.GJ47(t)},t.prototype.GJ48=function(t){if(200==t.head.state){var e=this.gtM();e.ZL13(t.body.es),e.ZL15(t.body),e.notify(P4.R54)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU72=function(){return this.equipProxy.GU72()},t.prototype.GU73=function(t){if(200==t.head.state){var e=this.gtM();e.ZR96(t.body),e.notify(P4.X4)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP3=function(t){this.equipProxy.GP3(t)},t.prototype.GP4=function(t){if(200==t.head.state){var e=this.gtM();e.equipData.a=t.body.a,e.notify(P4.U37)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN16=function(){this.equipProxy.GN16()},t.prototype.GN17=function(t){if(200==t.head.state){var e=this.gtM();e.forgeData.sd=t.body.sd,e.forgeData.sm=t.body.sm,e.updateIsShow(),e.notify(P4.J82);var i=App.CM.gtM(O6.B82);i&&i.setting&&-1!=i.setting.indexOf(L17.A31)||App.SoundManager.playEffect("equip_mp3")}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ86=function(){this.equipProxy.GQ86()},t.prototype.GQ87=function(t){if(200==t.head.state){var e=this.gtM();e.forgeData.rd=t.body.rd,e.forgeData.rm=t.body.rm,e.updateIsShow(),e.notify(P4.N86);var i=App.CM.gtM(O6.B82);i&&i.setting&&-1!=i.setting.indexOf(L17.A31)||App.SoundManager.playEffect("equip_mp3")}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP5=function(){this.equipProxy.GP5()},t.prototype.GP6=function(t){if(200==t.head.state){var e=this.gtM();e.forgeData.fd=t.body.fd,e.forgeData.fm=t.body.fm,e.updateIsShow(),e.notify(P4.L91);var i=App.CM.gtM(O6.B82);i&&i.setting&&-1!=i.setting.indexOf(L17.A31)||App.SoundManager.playEffect("equip_mp3")}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW26=function(){this.equipProxy.GW26()},t.prototype.GW27=function(t){if(200==t.head.state){var e=this.gtM();e.forgeData.gd=t.body.gd,e.forgeData.gm=t.body.gm,e.updateIsShow(),e.notify(P4.T5);var i=App.CM.gtM(O6.B82);i&&i.setting&&-1!=i.setting.indexOf(L17.A31)||App.SoundManager.playEffect("equip_mp3")}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY50=function(){var t=this.gtM();App.VM.gOV(O7.HH24).ZG74(t),App.VM.gOV(O7.I39).isShowNew()},t.prototype.GP7=function(t){App.VM.gOV(O7.E86).delEquip(t),this.equipProxy.GP7(t)},t.prototype.GP8=function(t){if(200==t.head.state){var e=this.gtM();t.body.ob&&P5.sIs(t.body.ob),(t.body.ue||t.body.es)&&(e.ZR92(t.body.ue,t.body.es),e.notify(P4.U35))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU74=function(t){if(P7.FF59()){var e=this.gtM();this.equipProxy.GU74(e.shopPosEquip[e.clickPosEquip])}},t.prototype.GU75=function(t){if(200==t.head.state){var e=this.gtM();e.ZL13(t.body.es),e.notify(P4.X60)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP9=function(t){var e=App.VM.gOV(O7.E86);(e=e||App.VM.gOV(O7.A81))&&e.delEquip(t),this.equipProxy.GP9(t)},t.prototype.GP10=function(t){if(200==t.head.state){var e=this.gtM();t.body.ob&&P5.sIs(t.body.ob),(t.body.ue||t.body.es)&&(e.ZR92(t.body.ue,t.body.es),e.notify(P4.U39))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN18=function(t,e){this.equipProxy.GN18(t,e)},t.prototype.GN19=function(t){if(200==t.head.state){var e=this.gtM();t.body.e&&(e.ZO19(t.body.e),e.notify(P4.T7))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ88=function(t,e){this.equipProxy.GQ88(t,e)},t.prototype.GQ89=function(t){if(200==t.head.state){var e=this.gtM();App.VM.gOV(O7.F83).type=t.body.t,t.body.cr&&(e.equipData.cr=t.body.cr,e.ZL9()),t.body.e&&(e.ZO19(t.body.e),e.ZR90(),e.notify(P4.V47))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ90=function(t,e){this.equipProxy.GQ90(t,e)},t.prototype.GQ91=function(t){if(200==t.head.state){var e=this.gtM();t.body.ob&&P5.sIs(t.body.ob),(t.body.ue||t.body.es)&&(e.ZO19(t.body.e),e.ZR92(t.body.ue,t.body.es),e.ZL9(),e.ZL15(t.body),e.notify(P4.V49))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU76=function(t){App.VM.gOV(O7.C42).updateChoose(t)},t.prototype.GL26=function(t){App.VM.gOV(O7.HH41).ZI46(t)},t.prototype.GS90=function(){this.equipProxy.GS90()},t.prototype.GS91=function(t){if(200==t.head.state){var e=this.gtM();e.forgeData.ws=t.body.ws,e.updateIsShow(),e.notify(P4.E83)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ92=function(t){this.equipProxy.GQ92(t)},t.prototype.GQ93=function(t){if(200==t.head.state){var e=this.gtM();e.forgeData.wl=t.body.wl,e.forgeData.ws=t.body.ws,e.updateIsShow(),e.notify(P4.D58)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD63=function(t){App.VM.gOV(O7.HH10).ZI46(t)},t.prototype.GS92=function(t){if(200==t.head.state){var e=this.gtM();(t.body.ue||t.body.es)&&e.ZR92(t.body.ue,t.body.es),e.ZO25(t.body),e.notify(P4.V51)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP11=function(t){if(200==t.head.state){var e=this.gtM();(t.body.ue||t.body.es)&&e.ZR92(t.body.ue,t.body.es),e.ZO25(t.body),e.notify(P4.G38)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN20=function(t){App.VM.gOV(O7.C18).updateChoose(t)},t}(TE11);__reflect(TD98.prototype,"TD98");var TG58=function(s){function t(t){var e=s.call(this,t)||this;return e.shopPosEquip=[],e.noWareEquipData=[],e.canSmeltDatas=[],e.avaEquipData=[],e.weaponEquip=[],e.horseEquip=[],e.faqiEquip=[],e.wingEquip=[],e.avaEquip=[],e.legendEquip=[],e.orangeEquip=[],e.remLegendEquip=[],e.remOrangeEquip=[],e.allegendEquip=[],e.allOrangeEquip=[],e.formaEquip=[],e.generalEquip=[],e.animalEquip=[],e.psychicEquip=[],e.spiritEquip=[],e.aSoulEquip=[],e.classupEquip=[],e.remClassupEquip=[],e.orangeClassupEquip=[],e.prestigeEquip=[],e.soulEquip=[],e.canAvaEquip=[],e.canLegendEquip=[],e.canLegendPoEquip=[],e.canLegendQuenEquip=[],e.nowAvaEquip=[],e.nowLegendEquip=[],e.nowOrangeEquip=[],e.canDressLegendEquip=[],e.nowWingEquip=[],e.canWingEquip=[],e.nowHorseEquip=[],e.canHorseEquip=[],e.nowWeaponEquip=[],e.canWeaponEquip=[],e.nowFaqiEquip=[],e.canFaqiEquip=[],e.nowPrestigeEquip=[],e.canPrestigeEquip=[],e.nowSoulEquip=[],e.canSoulEquip=[],e.nowAnimalEquip=[],e.canPsychicEquip=[],e.nowPsychicEquip=[],e.canAnimalEquip=[],e.nowSpiritEquip=[],e.canSpiritEquip=[],e.nowASoulEquip=[],e.canASoulEquip=[],e.nowFormaEquip=[],e.canFormaEquip=[],e.nowGeneralEquip=[],e.canGeneralEquip=[],e.nowClassupEquip=[],e.canClassupEquip=[],e.formaEquipNotWear=[],e.generalEquipNotWear=[],e.isSmelt=0,e.legAdd=0,e.legPo=0,e.legQuen=0,e.legAwake=0,e.noAvaNum=[1,2,3,4],e.avaNum=[1,2,3,4,5,6,7,8,9,10],e.lvs={},e.checkEquips={},e}return __extends(t,s),t.prototype.initData=function(t){this.equipData=t,this.ZR97();for(var e=0;e<this.avaNum.length;e++){var i=M19.A96+"_"+this.avaNum[e];this.lvs[i]=0,i=M19.A87+"_"+this.avaNum[e],this.lvs[i]=0}for(e=0;e<this.noAvaNum.length;e++){var s=this.avaNum[e];i=M19.A91+"_"+s;this.lvs[i]=0,i=M19.A93+"_"+s,this.lvs[i]=0,i=M19.A94+"_"+s,this.lvs[i]=0,i=M19.A88+"_"+s,this.lvs[i]=0,i=M19.A83+"_"+s,this.lvs[i]=0,i=M19.A85+"_"+s,this.lvs[i]=0,i=M19.A84+"_"+s,this.lvs[i]=0,i=M19.A95+"_"+s,this.lvs[i]=0,i=M19.A89+"_"+s,this.lvs[i]=0,i=M19.A86+"_"+s,this.lvs[i]=0,i=M19.A90+"_"+s,this.lvs[i]=0,i=M19.A92+"_"+s,this.lvs[i]=0}this.ZW35()},t.prototype.ZO18=function(){this.noMelting={};var t={};if(this.getlvs(),this.equipData&&this.equipData.es){var e=this.equipData.es;for(var i in e){var s=N12.gID(e[i].i),o=e[i].t+"_"+s.pos;this.checkEquips[o]||(this.checkEquips[o]=[]),this.checkEquips[o].indexOf(e[i])<0&&this.checkEquips[o].push(e[i]),e[i].w&&(t[o]=e[i])}}for(var i in this.checkEquips){this.lvs[i];var r=this.checkEquips[i],n=t[i];if(n){var a=[];for(var h in r)if(M10.getPower(r[h].i)>M10.getPower(n.i))a.push(r[h]);else if(M10.getPower(r[h].i)==M10.getPower(n.i)){var p=N12.gID(r[h].i).quality;N12.gID(n.i).quality<p&&a.push(r[h])}this.noMelting[i]=this.ZF25(a)}else this.noMelting[i]=this.ZF25(r)}},t.prototype.ZF25=function(t){var e=[],i={};for(var s in t){var o=N12.gID(t[s].i).level,r=i[o];null!=r?M10.getPower(t[s].i)>M10.getPower(r.i)?i[o]=t[s]:M10.getPower(t[s].i)==M10.getPower(r.i)&&(t[s].w?i[o]=t[s]:!r.w&&P7.FM9(t[s].u,r.u)<0&&(i[o]=t[s])):i[o]=t[s]}for(var s in i)e.push(i[s]);return e},t.prototype.getlvs=function(){for(var t in this.lvs){var e=P7.copyTab(t),i=e.indexOf("_"),s=e.substring(0,i);this.lvs[t]=THH30.FL98(s)}},t.prototype.updateEquip=function(t){for(var e in this.noMelting)this.noMelting[e]=[];var i=[];if(this.equipData&&this.equipData.es){for(var s=0;s<this.equipData.es.length;s++)i.push(this.equipData.es[s].u);for(s=0;s<t.es.length;s++)-1==i.indexOf(t.es[s].u)&&(i.push(t.es[s].u),this.equipData.es.push(t.es[s]));this.equipData.c=null!=t.c?t.c:this.equipData.c,this.equipData.ext=null!=t.ext?t.ext:this.equipData.ext,this.equipData.a=null!=t.a?t.a:this.equipData.a,this.equipData.cr=null!=t.cr?t.cr:this.equipData.cr,this.equipData.rexp=null!=t.rexp?t.rexp:this.equipData.rexp,this.equipData.rlv=null!=t.rlv?t.rlv:this.equipData.rlv,this.equipData.ia=null!=t.ia?t.ia:this.equipData.ia,this.equipData.alv=null!=t.alv?t.alv:this.equipData.alv,this.ZW35()}},t.prototype.isShowSemlet=function(){this.isSmelt=this.equipData.c+this.equipData.ext-this.noWareEquipData.length<=20?1:0},t.prototype.isCanBuy=function(){return this.noWareEquipData.length==this.equipData.c+this.equipData.ext},t.prototype.canShowBox=function(){var t=App.CM.gtM(O6.B82),e=(App.CM.gtM(O6.B98),t.avatarInfo.l);return parseInt(M10.init.promptLv.value)<=e},t.prototype.legendHong=function(){return this.legAdd||this.legPo||this.legQuen||this.legAwake},t.prototype.ZW35=function(){var i=this;if(this.equipData&&this.equipData.es&&this.equipData.es.length){this.orderSmelt();var t=this.equipData.es;this.ZO18(),this.wingEquip=[],this.horseEquip=[],this.faqiEquip=[],this.avaEquip=[],this.legendEquip=[],this.orangeEquip=[],this.avaEquipData=[],this.weaponEquip=[],this.formaEquip=[],this.generalEquip=[],this.remLegendEquip=[],this.allegendEquip=[],this.allOrangeEquip=[],this.canLegendEquip=[],this.animalEquip=[],this.psychicEquip=[],this.spiritEquip=[],this.aSoulEquip=[],this.soulEquip=[],this.prestigeEquip=[],this.classupEquip=[],this.orangeClassupEquip=[];for(var e=0;e<t.length;e++)if(t[e].w)switch(t[e].t){case M19.A96:this.avaEquip.push(t[e]);var s=M10.ava[t[e].i+""];6==s.quality&&this.legendEquip.push(t[e]),5==s.quality&&this.orangeEquip.push(t[e]);break;case M19.A91:this.horseEquip.push(t[e]);break;case M19.A93:this.wingEquip.push(t[e]);break;case M19.A94:this.faqiEquip.push(t[e]);break;case M19.A88:this.weaponEquip.push(t[e]);break;case M19.A83:this.formaEquip.push(t[e]);break;case M19.A85:this.generalEquip.push(t[e]);break;case M19.A84:this.prestigeEquip.push(t[e]);break;case M19.A95:this.soulEquip.push(t[e]);break;case M19.A89:this.animalEquip.push(t[e]);break;case M19.A86:this.psychicEquip.push(t[e]);break;case M19.A90:this.spiritEquip.push(t[e]);break;case M19.A92:this.aSoulEquip.push(t[e]);break;case M19.A87:this.classupEquip.push(t[e])}else switch(t[e].t){case M19.A96:var o=M10.ava[t[e].i+""];this.avaEquipData.push(t[e]),6==o.quality&&2!=o.pos&&this.remLegendEquip.push(t[e]),6==o.quality&&this.allegendEquip.push(t[e]),5==o.quality&&this.allOrangeEquip.push(t[e]);break;case M19.A83:this.formaEquipNotWear.push(t[e]);break;case M19.A85:this.generalEquipNotWear.push(t[e]);break;case M19.A87:5==Classup.Config.equipment[t[e].i+""].quality&&this.orangeClassupEquip.push(t[e])}this.noWareEquipData=[],this.equipData.es.forEach(function(t,e){t.w||i.noWareEquipData.push(t)}),this.canSmeltData(),this.updateLegend(),this.isShowSemlet()}},t.prototype.updateLegend=function(){this.legAdd=0;var t=App.CM.gtM(O6.B82);if(t.avatarInfo&&!(t.avatarInfo.l<parseInt(L6.init.legendLv.value))){for(var e=t.avatarInfo.l,i=t.avatarInfo.co,s=N12.giC(parseInt(L6.init.legendId.value)),o=0;o<this.legendEquip.length;o++){var r=M10.ava[this.legendEquip[o].i+""].nextequip,n=L6.FA94(this.legendEquip[o].i),a=M10.ava[r+""];r&&e>=a.level&&s>=n.piecenum&&i>=n.piececoin&&(-1==this.canLegendEquip.indexOf(a.pos)&&this.canLegendEquip.push(a.pos),this.legAdd=1)}this.canDressLegendEquip=[];for(o=0;o<this.avaNum.length;o++)if(-1==this.nowLegendEquip.indexOf(this.avaNum[o]+""))for(var h=0;h<this.allegendEquip.length;h++){var p=M10.ava[this.allegendEquip[h].i+""];p.pos==this.avaNum[o]&&-1==this.canDressLegendEquip.indexOf(p.pos)&&this.canDressLegendEquip.push(p.pos)}this.canDressLegendEquip.length&&(this.legAdd=1),this.ZR90(),this.equipData&&this.equipData.cr&&this.ZL9(),this.ZR97()}},t.prototype.ZR90=function(){this.canLegendPoEquip=[],this.legPo=0;for(var t=N12.giC(parseInt(L6.init.polishAttrItem.value.split(":")[0])),e=0;e<this.legendEquip.length;e++){for(var i=L6.init.polishAttrItem.value.split(":")[1],s=M10.ava[this.legendEquip[e].i+""],o=L6.attrlimit[s.rangeid+""],r=0,n=0;n<this.legendEquip[e].eatr.ats.length;n++){if(o[L6.FI38(this.legendEquip[e].eatr.ats[n])]!=this.legendEquip[e].eatr.ats[n].v){r+=1;break}}t>=parseInt(i)&&r&&(this.canLegendPoEquip.push(s.pos),this.legPo=1)}},t.prototype.ZL9=function(){this.canLegendQuenEquip=[],this.legQuen=0;N12.giC(parseInt(L6.init.polishAttrItem.value.split(":")[0]));for(var t=this.remLegendEquip.length,e=0;e<this.legendEquip.length;e++){var i=this.legendEquip[e].eatr.ats.length,s=L6.refinecost[i+""],o=M10.ava[this.legendEquip[e].i+""];s&&t>=s.costnum&&(this.canLegendQuenEquip.push(o.pos),this.legQuen=1)}},t.prototype.ZR91=function(t){for(var e=0;e<t.length;e++)for(var i=this.equipData.es.length-1;0<=i;i--)if(this.equipData.es[i].u==t[e]){this.equipData.es.splice(i,1);break}this.ZW35()},t.prototype.ZO19=function(t){for(var e=this.equipData.es.length-1;0<=e;e--)if(this.equipData.es[e].u==t.u){this.equipData.es[e]=t;break}this.ZW35()},t.prototype.ZR92=function(t,e){if(t&&t.length&&(this.equipData?this.equipData.es=this.equipData.es.concat(t):(this.equipData={},this.equipData.es=t)),e&&e.length&&this.equipData&&this.equipData.es)for(var i=0;i<e.length;i++)for(var s=this.equipData.es.length-1;0<=s;s--)if(this.equipData.es[s].u==e[i]){this.equipData.es.splice(s,1);break}this.equipData&&this.ZW35()},t.prototype.canSmeltData=function(){this.nowAvaEquip=[],this.canSmeltDatas=[],this.nowLegendEquip=[],this.nowOrangeEquip=[];for(var t=0;t<this.avaEquip.length;t++){var e=N12.gID(this.avaEquip[t].i);this.nowAvaEquip.push(e.pos),6==e.quality&&this.nowLegendEquip.push(e.pos),5==e.quality&&this.nowOrangeEquip.push(e.pos)}var i=[];for(var s in this.noMelting){var o=this.noMelting[s];i=i.concat(o)}var r=this.equipData.es;for(var s in r){var n=r[s].t,a=N12.gID(r[s].i).quality;r[s].w||-1!=i.indexOf(r[s])||(n==M19.A96?a<5&&this.canSmeltDatas.push(r[s]):n==M19.A87?a<5&&this.canSmeltDatas.push(r[s]):this.canSmeltDatas.push(r[s]))}this.initAvaEquip(),this.ZR93(),this.ZW36(),this.ZW37(),this.ZO21(),this.ZI44(),this.ZW38(),this.ZO22(),this.ZL10(),this.ZO23(),this.ZR94(),this.ZO20(),this.ZR95(),this.ZL11(),this.ZL12()},t.prototype.ZO20=function(){var t=App.CM.gtM(O6.B82);if(t.avatarInfo){for(var e=[],i=0;i<this.orangeEquip.length;i++)e.push(this.orangeEquip[i].u);for(var s=[],o=t.avatarInfo.l,r=[],n=0;n<this.avaNum.length;n++)r[this.avaNum[n]]={};var a=[],h=[];this.remOrangeEquip=[];for(n=0;n<this.avaNum.length;n++)for(var p=0;p<this.allOrangeEquip.length;p++){var l=M10.ava[this.allOrangeEquip[p].i.toString()];if(l.pos==this.avaNum[n]&&l.level<=o)if(-1==this.nowOrangeEquip.indexOf(this.avaNum[n]+"")){if(-1==s.indexOf(l.pos))if(0<=this.nowAvaEquip.indexOf(l.pos)){var c=void 0;for(i=0;i<this.avaEquip.length;i++){var u=M10.FD92(this.avaEquip[i].i+"",this.avaEquip[i].t);if(this.avaNum[n]==u.pos){c=u;break}}var d=M10.gAG(c.attr)+M10.gAG(c.addattr);M10.gAG(l.attr)+M10.gAG(l.addattr)<=d?-1==this.remOrangeEquip.indexOf(this.allOrangeEquip[p])&&this.remOrangeEquip.push(this.allOrangeEquip[p]):(s.push(l.pos),r[this.avaNum[n]].data=l,r[this.avaNum[n]].selData=this.allOrangeEquip[p])}else s.push(l.pos),r[this.avaNum[n]].data=l,r[this.avaNum[n]].selData=this.allOrangeEquip[p];else(d=M10.gAG(r[this.avaNum[n]].data.attr)+M10.gAG(r[this.avaNum[n]].data.addattr))<M10.gAG(l.attr)+M10.gAG(l.addattr)?(-1==this.remOrangeEquip.indexOf(r[this.avaNum[n]].selData)&&this.remOrangeEquip.push(r[this.avaNum[n]].selData),-1==s.indexOf(l.pos)&&s.push(l.pos),r[this.avaNum[n]].data=l,r[this.avaNum[n]].selData=this.allOrangeEquip[p]):-1==this.remOrangeEquip.indexOf(this.allOrangeEquip[p])&&this.remOrangeEquip.push(this.allOrangeEquip[p])}else{var v={};if(r[this.avaNum[n]].data)v=r[this.avaNum[n]];else for(i=0;i<this.orangeEquip.length;i++)if(this.avaNum[n]==M10.ava[this.orangeEquip[i].i+""].pos){v.data=M10.ava[this.orangeEquip[i].i+""],v.selData=this.orangeEquip[i];break}(d=M10.gAG(v.data.attr)+M10.gAG(v.data.addattr))<M10.gAG(l.attr)+M10.gAG(l.addattr)?(-1==this.remOrangeEquip.indexOf(r[this.avaNum[n]].selData)&&-1==e.indexOf(v.selData.u)&&this.remOrangeEquip.push(v.selData),-1==s.indexOf(l.pos)&&s.push(l.pos),r[this.avaNum[n]].data=l,r[this.avaNum[n]].selData=this.allOrangeEquip[p]):(-1==this.remOrangeEquip.indexOf(this.allOrangeEquip[p])&&this.remOrangeEquip.push(this.allOrangeEquip[p]),r[this.avaNum[n]]=v)}else if(l.pos==this.avaNum[n]&&l.level>o)if(-1==a.indexOf(l.id)){var f=!0;for(i=0;i<a.length;i++){if((u=M10.ava[a[i]+""]).pos==l.pos){u.quality<l.quality&&(-1==this.remOrangeEquip.indexOf(h[i])&&this.remOrangeEquip.push(h[i]),a.splice(i,1),h.splice(i,1),a.push(l.id),h.push(this.allOrangeEquip[p]),f=!1);break}}f?(a.push(l.id),h.push(this.allOrangeEquip[p])):f=!0}else-1==this.remOrangeEquip.indexOf(r[this.avaNum[n]].selData)&&this.remOrangeEquip.push(this.allOrangeEquip[p])}}},t.prototype.ZR93=function(){this.nowHorseEquip=[],this.canHorseEquip=[];for(var t=0;t<this.horseEquip.length;t++){var e=N12.gID(this.horseEquip[t].i).pos;this.nowHorseEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A91+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canHorseEquip.push(n.pos);break}}}},t.prototype.ZW36=function(){this.nowWingEquip=[],this.canWingEquip=[];for(var t=0;t<this.wingEquip.length;t++){var e=M10.FD92(this.wingEquip[t].i.toString(),this.wingEquip[t].t).pos;this.nowWingEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A93+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canWingEquip.push(n.pos);break}}}},t.prototype.ZW37=function(){this.nowFaqiEquip=[],this.canFaqiEquip=[];for(var t=0;t<this.faqiEquip.length;t++){var e=M10.FD92(this.faqiEquip[t].i.toString(),this.faqiEquip[t].t).pos;this.nowFaqiEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A94+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canFaqiEquip.push(n.pos);break}}}},t.prototype.ZO21=function(){this.nowWeaponEquip=[],this.canWeaponEquip=[];for(var t=0;t<this.weaponEquip.length;t++){var e=M10.FD92(this.weaponEquip[t].i.toString(),this.weaponEquip[t].t).pos;this.nowWeaponEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A88+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canWeaponEquip.push(n.pos);break}}}},t.prototype.ZI44=function(){this.nowPrestigeEquip=[],this.canPrestigeEquip=[];for(var t=0;t<this.prestigeEquip.length;t++){var e=M10.FD92(this.prestigeEquip[t].i.toString(),this.prestigeEquip[t].t).pos;this.nowPrestigeEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A84+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canPrestigeEquip.push(n.pos);break}}}},t.prototype.ZW38=function(){this.nowSoulEquip=[],this.canSoulEquip=[];for(var t=0;t<this.soulEquip.length;t++){var e=M10.FD92(this.soulEquip[t].i.toString(),this.soulEquip[t].t).pos;this.nowSoulEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A95+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canSoulEquip.push(n.pos);break}}}},t.prototype.ZO22=function(){this.nowAnimalEquip=[],this.canAnimalEquip=[];for(var t=0;t<this.animalEquip.length;t++){var e=M10.FD92(this.animalEquip[t].i.toString(),this.animalEquip[t].t).pos;this.nowAnimalEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A89+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canAnimalEquip.push(n.pos);break}}}},t.prototype.ZL10=function(){this.nowPsychicEquip=[],this.canPsychicEquip=[];for(var t=0;t<this.psychicEquip.length;t++){var e=M10.FD92(this.psychicEquip[t].i.toString(),this.psychicEquip[t].t).pos;this.nowPsychicEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A86+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canPsychicEquip.push(n.pos);break}}}},t.prototype.ZO23=function(){this.nowSpiritEquip=[],this.canSpiritEquip=[];for(var t=0;t<this.spiritEquip.length;t++){var e=M10.FD92(this.spiritEquip[t].i.toString(),this.spiritEquip[t].t).pos;this.nowSpiritEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A90+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canSpiritEquip.push(n.pos);break}}}},t.prototype.ZR94=function(){this.nowASoulEquip=[],this.canASoulEquip=[];for(var t=0;t<this.aSoulEquip.length;t++){var e=M10.FD92(this.aSoulEquip[t].i.toString(),this.aSoulEquip[t].t).pos;this.nowASoulEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A92+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canASoulEquip.push(n.pos);break}}}},t.prototype.ZR95=function(){this.nowFormaEquip=[],this.canFormaEquip=[];for(var t=0;t<this.formaEquip.length;t++){var e=M10.FD92(this.formaEquip[t].i.toString(),this.formaEquip[t].t).pos;this.nowFormaEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A83+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canFormaEquip.push(n.pos);break}}}},t.prototype.ZL11=function(){this.nowGeneralEquip=[],this.canGeneralEquip=[];for(var t=0;t<this.generalEquip.length;t++){var e=M10.FD92(this.generalEquip[t].i.toString(),this.generalEquip[t].t).pos;this.nowGeneralEquip.push(e)}for(t=0;t<this.noAvaNum.length;t++){var i=M19.A85+"_"+this.noAvaNum[t],s=this.noMelting[i],o=this.lvs[i];for(var r in s){var n=N12.gID(s[r].i);if(!s[r].w&&n.level<=o){this.canGeneralEquip.push(n.pos);break}}}},t.prototype.initAvaEquip=function(){this.canAvaEquip=[];for(var t=0;t<this.avaNum.length;t++){var e=M19.A96+"_"+this.avaNum[t],i=this.noMelting[e],s=this.lvs[e];for(var o in i){var r=N12.gID(i[o].i);if(!i[o].w&&r.level<=s){var n=!0;for(var a in this.avaEquip){var h=N12.gID(this.avaEquip[a].i);if(h.pos==r.pos){M10.getPower(h.id)>=M10.getPower(r.id)&&h.quality>r.quality&&(n=!1);break}}if(n){this.canAvaEquip.push(r.pos);break}}}}},t.prototype.ZL12=function(){for(var t=this,i=[],e=this.canClassupEquip=[],s=this.classupEquip,o=0;o<this.avaNum.length;o++){var r=M19.A87+"_"+this.avaNum[o],n=this.noMelting[r],a=this.lvs[r];for(var h in n){var p=N12.gID(n[h].i);if(!n[h].w)if(p.level<=a){var l=!0;for(var c in s){var u=N12.gID(s[c].i);if(u.pos==p.pos){M10.getPower(u.id)>=M10.getPower(p.id)&&u.quality>p.quality&&(l=!1);break}}if(l){e.push(p.pos),i.push(n[h]);break}}else i.push(n[h])}}this.remClassupEquip=[],this.orangeClassupEquip.forEach(function(e){i.every(function(t){return t.i!=e.i})&&t.remClassupEquip.push(e)})},t.prototype.orderSmelt=function(){this.equipData.es.sort(function(t,e){return t.i-e.i})},t.prototype.ZR96=function(t){this.forgeData=t,this.updateIsShow()},t.prototype.ZL13=function(t){for(var e=t.length-1;0<=e;e--)for(var i=0;i<this.equipData.es.length;i++)if(t[e].u==this.equipData.es[i].u){this.equipData.es[i]=t[e];break}this.ZW35()},t.prototype.updateIsShow=function(){if(this.canSd=0,this.canRd=0,this.canFd=0,this.canGd=0,this.canWear=0,this.forgeData){var t=App.CM.gtM(O6.B82),e=M12.strength[this.forgeData.sd.k+""];e&&(this.canSd=t.avatarInfo.co>=e.needcoin?1:0);var i=M12.refine[this.forgeData.rd.k+""];if(i){var s=N12.giC(parseInt(M12.init.refineItem.value));this.canRd=s>=i.needrefine?1:0}var o=M12.forging[this.forgeData.fd.k+""];if(o){var r=N12.giC(parseInt(M12.init.forgingItem.value));this.canFd=r>=o.needforging?1:0}var n=M12.gem[this.forgeData.gd.k+""];if(n){var a=N12.giC(parseInt(M12.init.gemItem.value));this.canGd=a>=n.needgem?1:0}if(-1!=t.setting.indexOf(L17.A20)&&(this.canSd=0),-1!=t.setting.indexOf(L17.A27)&&(this.canRd=0),-1!=t.setting.indexOf(L17.A22)&&(this.canFd=0),-1!=t.setting.indexOf(L17.A41)&&(this.canGd=0),M12.FL37()){var h=this.forgeData.ws,p=this.forgeData.wl,l=M12.ware[p];if(M12.starNum==h){if(0<l.reqitem){var c=N12.giC(M12.reqItem);if(-1!=l.reqItem){var u=TG60.FK76(l.reqtype);c>=l.reqitem&&u>=l.reqlv&&(this.canWear=1)}}}else{var d=parseInt(l["starcost"+(h+1)]);c=N12.giC(M12.starItem);this.canWear=d<=c?1:0}}}},t.prototype.notify=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.notifyView.apply(this,[this,t].concat(e))},t.prototype.ZF26=function(t){var e=0,i=M10.ava[t];if(!i)return e;for(var s=P7.FL92(i.attr),o=O4.getScore(s),r=!1,n=0,a=this.avaEquip;n<a.length;n++){var h=a[n],p=M10.ava[h.i];if(p.pos==i.pos){r=!0;var l=P7.FL92(p.attr),c=O4.getScore(l);if(0<o-c)return e=o-c}}return r?e:o},t.prototype.ZO24=function(){var t=this.noWareEquipData.concat();return this.equipData.c+this.equipData.ext-t.length},t.prototype.getEquipStrenthAllPower=function(){var t=this.ZD97(),e=this.forgeData.sm,i=M12.strength_master;if(e){var s=i[e+""],o="101:"+s.atk+";102:"+s.def+";103:"+s.hp;t+=M10.gAG(o)}return t},t.prototype.ZD97=function(){for(var t=this.forgeData.sd.k,e=this.forgeData.sd.v,i=M12.strength,s=0,o=0,r=0,n=1;n<e;n++)s+=i[t+""]["atk"+n],o+=i[t+""]["def"+n],r+=i[t+""]["hp"+n];if(i[t-1+""])for(var a=e;a<=10;a++)s+=i[t-1+""]["atk"+a],o+=i[t-1+""]["def"+a],r+=i[t-1+""]["hp"+a];var h="101:"+s+";102:"+o+";103:"+r;return M10.gAG(h)},t.prototype.getEquipGemAllPower=function(){var t=this.ZL14(),e=this.forgeData.gm,i=M12.gem_master;if(e){var s=i[e+""],o="108:"+s.truedmg+";109:"+s.relief;t+=M10.gAG(o)}return t},t.prototype.ZL14=function(){for(var t=this.forgeData.gd.k,e=this.forgeData.gd.v,i=M12.gem,s=0,o=0,r=0,n=1;n<e;n++)s+=i[t+""]["atk"+n]?i[t+""]["atk"+n]:0,o+=i[t+""]["def"+n]?i[t+""]["def"+n]:0,r+=i[t+""]["hp"+n]?i[t+""]["hp"+n]:0;if(i[t-1+""])for(var a=e;a<=10;a++)s+=i[t-1+""]["atk"+a]?i[t-1+""]["atk"+a]:0,o+=i[t-1+""]["def"+a]?i[t-1+""]["def"+a]:0,r+=i[t-1+""]["hp"+a]?i[t-1+""]["hp"+a]:0;var h="101:"+s+";102:"+o+";103:"+r;return M10.gAG(h)},t.prototype.getEquipForgingAllPower=function(){var t=this.ZD98(),e=this.forgeData.fm,i=M12.forgin_master;if(e){var s=i[e+""],o="101:"+s.atk+";102:"+s.def+";103:"+s.hp;t+=M10.gAG(o)}return t},t.prototype.ZD98=function(){for(var t=this.forgeData.fd.k,e=this.forgeData.fd.v,i=M12.forging,s=0,o=0,r=0,n=1;n<e;n++)s+=i[t+""]["atk"+n],o+=i[t+""]["def"+n],r+=i[t+""]["hp"+n];if(i[t-1+""])for(var a=e;a<=10;a++)s+=i[t-1+""]["atk"+a],o+=i[t-1+""]["def"+a],r+=i[t-1+""]["hp"+a];var h="101:"+s+";102:"+o+";103:"+r;return M10.gAG(h)},t.prototype.getEquipRefineAllPower=function(){var t=this.ZF27(),e=this.forgeData.rm,i=M12.refine_master;if(e){var s=i[e+""],o="101:"+s.atk+";102:"+s.def+";103:"+s.hp;t+=M10.gAG(o)}return t},t.prototype.ZF27=function(){for(var t=this.forgeData.rd.k,e=this.forgeData.rd.v,i=M12.refine,s=0,o=0,r=0,n=1;n<e;n++)s+=i[t+""]["atk"+n],o+=i[t+""]["def"+n],r+=i[t+""]["hp"+n];if(i[t-1+""])for(var a=e;a<=10;a++)s+=i[t-1+""]["atk"+a],o+=i[t-1+""]["def"+a],r+=i[t-1+""]["hp"+a];var h="101:"+s+";102:"+o+";103:"+r;return M10.gAG(h)},t.prototype.ZO25=function(t){var e;for(var i in this.equipData.alv&&0!=this.equipData.alv.length||(this.equipData.alv=[]),this.equipData.alv)t.p==this.equipData.alv[i].k&&(e=Number(i));if(null!=e)this.equipData.alv[e].v=t.lv;else{var s={k:t.p,v:t.lv};this.equipData.alv.push(s)}this.equipData.talv=P7.getValue(t.talv,this.equipData.talv),this.ZR97()},t.prototype.ZR97=function(){if(this.equipData.ia&&0!=this.equipData.ia){for(var t in this.legAwake=0,this.equipData.alv){var e=L6.FHH23(this.equipData.alv[t].v);if(e&&"-1"!=e.cost){var i=P7.str2kv(e.cost),s=0;for(s=0;s<i.length;s++){if(N12.giC(i[s].k)<i[s].v)break}s==i.length&&(this.legAwake=1)}}if(0==this.legAwake&&(!this.equipData.alv||this.equipData.alv.length<10)){var o=this.remLegendEquip.length,r=Number(L6.gIV("awakenReq")),n=void 0;if(this.equipData.alv)for(var a=0;a<this.legendEquip.length;a++){var h=M10.FD92(this.legendEquip[a].i.toString(),this.legendEquip[a].t);s=0;for(s=0;s<this.equipData.alv.length;s++){if(this.equipData.alv[s].k==Number(h.pos))break}if(s==this.equipData.alv.length){n=h.pos;break}}else n=1;null!=n&&(this.legAwake=r<=o?1:0)}}else this.legAwake=0},t.prototype.ZL15=function(t){t.ia&&(this.equipData.ia=t.ia,this.ZR97())},t}(TG79);__reflect(TG58.prototype,"TG58");var TG59=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y17,e.GY49,e),e}return __extends(t,i),t.prototype.GU68=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X1,body:{}};s.rSMO(P4.X2,function(t){s.apF(M19.A63,t),e("加载装备加载完成")},s),s.sSM(i)})},t.prototype.GS88=function(t){var e={type:P4.L88,body:{num:t}};this.rSMO(P4.L89,this.GS89,this),this.sSM(e)},t.prototype.GS89=function(t){this.apF(M19.A60,t)},t.prototype.GU71=function(t){var e={type:P4.V44,body:{eids:t}};this.rSMO(P4.V45,this.equipMeltRes,this),this.sSM(e)},t.prototype.equipMeltRes=function(t){this.apF(M19.A65,t)},t.prototype.GW24=function(){var t={type:P4.X59,body:{}};this.rSMO(P4.X60,this.GW25,this),this.sSM(t)},t.prototype.GW25=function(t){this.apF(M19.A75,t)},t.prototype.GJ47=function(t){var e={type:P4.R53,body:{pos:t}};this.rSMO(P4.R54,this.GJ48,this),this.sSM(e)},t.prototype.GJ48=function(t){this.apF(M19.A20,t)},t.prototype.GU72=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X3,body:{}};s.rSMO(P4.X4,function(t){s.apF(M19.A68,t),e("加载锻造加载完成")},s),s.sSM(i)})},t.prototype.GN16=function(){var t={type:P4.J81,body:{}};this.rSMO(P4.J82,this.GN17,this),this.sSM(t)},t.prototype.GN17=function(t){this.apF(M19.A28,t)},t.prototype.GQ86=function(){var t={type:P4.N85,body:{}};this.rSMO(P4.N86,this.GQ87,this),this.sSM(t)},t.prototype.GQ87=function(t){this.apF(M19.A51,t)},t.prototype.GP5=function(){var t={type:P4.L90,body:{}};this.rSMO(P4.L91,this.GP6,this),this.sSM(t)},t.prototype.GP6=function(t){this.apF(M19.A41,t)},t.prototype.GW26=function(){var t={type:P4.T4,body:{}};this.rSMO(P4.T5,this.GW27,this),this.sSM(t)},t.prototype.GW27=function(t){this.apF(M19.A77,t)},t.prototype.GP3=function(t){var e={type:P4.U36,body:{t:t}};this.rSMO(P4.U37,this.GP4,this),this.sSM(e)},t.prototype.GP4=function(t){this.apF(M19.A43,t)},t.prototype.GP7=function(t){var e={type:P4.U34,body:{eids:t}};this.rSMO(P4.U35,this.GP8,this),this.sSM(e)},t.prototype.GP8=function(t){this.apF(M19.A45,t)},t.prototype.GP9=function(t){var e={type:P4.U38,body:{eids:t}};this.rSMO(P4.U39,this.GP10,this),this.sSM(e)},t.prototype.GP10=function(t){this.apF(M19.A47,t)},t.prototype.GN18=function(t,e){var i={type:P4.T6,body:{eid:t,t:e}};this.rSMO(P4.T7,this.GN19,this),this.sSM(i)},t.prototype.GN19=function(t){this.apF(M19.A30,t)},t.prototype.GQ88=function(t,e){var i={type:P4.V46,body:{eid:t,t:e}};this.rSMO(P4.V47,this.GQ89,this),this.sSM(i)},t.prototype.GQ89=function(t){this.apF(M19.A53,t)},t.prototype.GU74=function(t){var e={type:P4.X5,body:{gid:t}};this.rSMO(P4.X6,this.GU75,this),this.sSM(e)},t.prototype.GU75=function(t){this.apF(M19.A71,t)},t.prototype.GQ90=function(t,e){var i={type:P4.V48,body:{eid:t,eids:e}};this.rSMO(P4.V49,this.GQ91,this),this.sSM(i)},t.prototype.GQ91=function(t){this.apF(M19.A55,t)},t.prototype.GY49=function(t){this.apF(M19.A81,t)},t.prototype.GS90=function(){var t={type:P4.E82,body:{}};this.rSMO(P4.E83,this.GS91,this),this.sSM(t)},t.prototype.GS91=function(t){this.apF(M19.A4,t)},t.prototype.GQ92=function(t){var e={type:P4.D57,body:{t:t}};this.rSMO(P4.D58,this.GQ93,this),this.sSM(e)},t.prototype.GQ93=function(t){this.apF(M19.A2,t)},t.prototype.ZW39=function(t,e){var i={type:P4.V50,body:{pos:t,eids:e}};this.rSMO(P4.V51,this.GS92,this),this.sSM(i)},t.prototype.GS92=function(t){this.apF(M19.A57,t)},t.prototype.ZO26=function(t){var e={type:P4.G37,body:{pos:t}};this.rSMO(P4.G38,this.GS92,this),this.sSM(e)},t.prototype.GP11=function(t){this.apF(M19.A6,t)},t}(TG80);__reflect(TG59.prototype,"TG59");var TG60=function(){function t(){}return t.FE92=function(){var t=[],e=App.CM.gtM(O6.B98).forgeData.wl,i=M12.ware[e],s=P7.copyTab(i.gradeattr),o=M18.FL28(s,";",":");for(var r in o){var n=parseInt(o[r][0]),a=parseFloat(o[r][1]),h="";switch(n){case ForgeType.SD:h=O3.tr(6698);break;case ForgeType.RD:h=O3.tr(6681);break;case ForgeType.FD:h=O3.tr(6682);break;case ForgeType.GD:h=O3.tr(6683)}var p={name:h,num:(100*a).toFixed(0)+"%"};t.push(p)}return t},t.FD93=function(){var t=[],e=App.CM.gtM(O6.B98).forgeData.wl+1,i=M12.ware[e];if(i){var s=P7.copyTab(i.gradeattr),o=M18.FL28(s,";",":");for(var r in o){var n=parseInt(o[r][0]),a=parseFloat(o[r][1]),h="";switch(n){case ForgeType.SD:h=O3.tr(6698);break;case ForgeType.RD:h=O3.tr(6681);break;case ForgeType.FD:h=O3.tr(6682);break;case ForgeType.GD:h=O3.tr(6683)}var p={name:h,num:(100*a).toFixed(0)+"%"};t.push(p)}}return t},t.FG10=function(){var t=[],e={},i=App.CM.gtM(O6.B98),s=i.forgeData.ws,o=i.forgeData.wl;if(0==s&&0==o){var r=M12.ware[o],n=THH1.FI55(r["starattr"+(s+1)]);for(var a in n){var h=O4.FD72(parseInt(a)),p=parseFloat(n[a]);null==e[a]&&(e[a]={value:0,name:h})}}else for(var l=0;l<=o;l++){r=M12.ware[l];var c=void 0;c=l==o?s:M12.starNum;for(var u=1;u<=c;u++){n=THH1.FI55(r["starattr"+u]);for(var a in n){var d=O4.FD72(parseInt(a));p=parseFloat(n[a]);null==e[a]&&(e[a]={value:0,name:d}),e[a].value+=p}}}for(var v in e)t.push(e[v]);return t},t.FE93=function(){var t=[],e={},i=App.CM.gtM(O6.B98),s=P7.copyTab(i.forgeData.ws),o=P7.copyTab(i.forgeData.wl);if(-1==M12.ware[o].reqitem){if(s==M12.starNum)return t}else s==M12.starNum?(o+=1,s=1):s+=1;for(var r=0;r<=o;r++){var n=M12.ware[r],a=void 0;a=r==o?s:M12.starNum;for(var h=1;h<=a;h++){var p=THH1.FI55(n["starattr"+h]);for(var l in p){var c=O4.FD72(parseInt(l)),u=parseFloat(p[l]);null==e[l]&&(e[l]={value:0,name:c}),e[l].value+=u}}}for(var d in e)t.push(e[d]);return t},t.FHH21=function(){for(var t=0,e=App.CM.gtM(O6.B98),i=e.forgeData.ws,s=e.forgeData.wl,o=0;o<=s;o++){var r=M12.ware[o],n=void 0;n=o==s?i:M12.starNum;for(var a=1;a<=n;a++)t+=M10.gAG(r["starattr"+a])}var h=M12.ware[s],p=P7.copyTab(h.gradeattr),l=M18.FL28(p,";",":");for(var c in l){var u=parseInt(l[c][0]),d=parseFloat(l[c][1]);switch(u){case ForgeType.SD:t+=e.ZD97()*d;break;case ForgeType.RD:t+=e.ZF27()*d;break;case ForgeType.FD:t+=e.ZD98()*d;break;case ForgeType.GD:t+=e.ZL14()*d}}return t=Math.floor(t)},t.FK76=function(t){var e,i=App.CM.gtM(O6.B98);switch(t){case ForgeType.SD:e=i.forgeData.sd.k;break;case ForgeType.RD:e=i.forgeData.rd.k;break;case ForgeType.FD:e=i.forgeData.fd.k;break;case ForgeType.GD:e=i.forgeData.gd.k}return e},t.FE94=function(t){var e,i,s=App.CM.gtM(O6.B98).forgeData;switch(t){case ForgeType.SD:e="101:"+(i=M12.strength_master[s.sm]).atk+";102:"+i.def+";103:"+i.hp;break;case ForgeType.RD:e="101:"+(i=M12.refine_master[s.rm]).atk+";102:"+i.def+";103:"+i.hp;break;case ForgeType.FD:e="101:"+(i=M12.forgin_master[s.fm]).atk+";102:"+i.def+";103:"+i.hp;break;case ForgeType.GD:e="108:"+(i=M12.gem_master[s.gm]).truedmg+";109:"+i.relief}var o=[],r={},n=THH1.FI55(e);for(var a in n){var h=O4.FD72(parseInt(a)),p=parseInt(n[a]);null==r[a]&&(r[a]={value:0,name:h}),r[a].value+=p}for(var l in r)o.push(r[l]);return o},t.getLegData=function(t){for(var e=App.CM.gtM(O6.B98).legendEquip,i=[],s=0;s<e.length;s++){for(var o=e[s].eatl,r=e[s].eatr.ats,n=[],a=0;a<o.length;a++)for(var h=0;h<r.length;h++)r[h].k==o[a]&&n.push(r[h]);if(t==e[s].i){i=n;break}}return i},t.getAlvData=function(){var t={},e=App.CM.gtM(O6.B98).equipData.alv;for(var i in e)t[e[i].k]=e[i].v;return t},t}();__reflect(TG60.prototype,"TG60");var EquipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipViewSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=PackItemIcon,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(3968)),this.btnSmelt.label=O3.tr(3970)},t.prototype.open=function(){this.btnSmelt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW41,this),this.imgAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW42,this);var t=App.CM.gtM(O6.B98);this.ZO18(t)},t.prototype.close=function(){this.btnSmelt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW41,this),this.imgAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW42,this),this.equipCollection.removeAll(),egret.Tween.removeTweens(this),this.c=null},t.prototype.ZW40=function(){var t=App.CM.gtM(O6.B98);this.btnSmelt.imgNew.visible=!!t.isSmelt},t.prototype.uBM=function(t,e){var i=this;if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.X2:case P4.V43:case P4.L89:case P4.V45:egret.Tween.get(this).wait(500).call(function(){i.ZO18(t)})}},t.prototype.ZO18=function(t){var e=t.noWareEquipData.concat();this.c=t.equipData.c+t.equipData.ext;for(var i=[],s=0;s<e.length;s++){var o=P7.copyTab(N12.gID(e[s].i));if(e[s].eatr&&(o.ats=e[s].eatr.ats),o){var r={data:o};if(6==o.quality){var n=TF59.FC9(o.quality);n&&(r.texiao=n)}i.push({itemData:r,isBottom:!0,pack:!0,fl:1})}}this.equipCollection.replaceAll(i),this.lbLeftAh.textFlow=M18.HTP.parse(O3.tr(3969,e.length,this.c)),this.ZW40()},t.prototype.ZW41=function(){this.scr.viewport.scrollV=0,this.aCF(O6.B98,M19.A31)},t.prototype.ZW42=function(){this.aCF(O6.B98,M19.A32,{Ah:this.c})},t}(BaseEuiView);__reflect(EquipView.prototype,"EquipView");var M12=function(){function t(){}return t.FK35=function(t){this.init=t.forge_init,this.strength=t.forge_strength,this.refine=t.forge_refine,this.forging=t.forge_forging,this.gem=t.forge_gem,this.strength_master=t.forge_strength_master,this.refine_master=t.forge_refine_master,this.forgin_master=t.forge_forgin_master,this.gem_master=t.forge_gem_master,this.wareLv=this.FE59("wareLv"),this.wareDate=this.FE59("wareDate"),this.starItem=this.FE59("starItem"),this.reqItem=this.FE59("reqItem"),this.wareGemLv=this.FE59("wareGemLv"),this.ware=t.forge_ware},t.FE59=function(t){var e;return this.init&&this.init[t]&&(e=parseInt(this.init[t].value)),e},t.FL37=function(){var t=App.CM.gtM(O6.B43),e=App.CM.gtM(O6.B98).forgeData.gd.k,i=t.serOpenDay+1,s=O4.getLv();return i>=this.wareDate&&this.wareLv<=s&&e>this.wareGemLv},t.starNum=10,t}();__reflect(M12.prototype,"M12");var L6=function(){function v(){}return v.FK35=function(t){v.init=t.legend_init,v.attrlimit=t.legend_attrlimit,v.lvtotal=t.legend_lvtotal,v.equiptotal=t.legend_equiptotal,v.refinecost=t.legend_refinecost,v.attrrand=t.legend_attrrand,v.awaken=t.legend_awaken,v.awakentotal=t.legend_awakentotal,v.equipOneData=this.FE95(),v.attrrandData=[101,102,103,110,108,109,104,105,106,107]},v.gIV=function(t){return v.init[t].value},v.FHH22=function(t){var e={};for(var i in t){var s=t[i];e[s.type]||(e[s.type]={}),e[s.type][s.level]=s}return e},v.FA94=function(t){var e={};if(!v.attrlimit)return e;var i=M10.ava[t+""].rangeid;for(var s in v.attrlimit){if(!(parseInt(s)<=i))break;e=v.attrlimit[s]}return e},v.FE95=function(){var t=[];if(!M10.ava)return t;for(var e in M10.ava)5<M10.ava[e].quality&&t.length<10&&t.push(M10.ava[e]);return t},v.FG11=function(t){var e;if(!v.lvtotal)return e;for(var i in v.lvtotal){if(!(parseInt(i)<=t))break;e=v.lvtotal[i]}return e},v.FI38=function(t){var e;if(!this.attrrandData||!this.attrlimit)return e;var i=this.attrrandData.indexOf(t.k)+1;return 0!==i&&(e="limit"+i),e},v.FK47=function(t){var e=0;if(!this.attrrandData||!this.attrlimit)return e;var i=this.attrrandData.indexOf(t.k)+1;if(0!==i){var s=this.attrlimit[t.id]["limit"+i];e=Math.floor(t.v/s*this.FJ72(t.id,i))}return e},v.FJ72=function(t,e){var i=0;if(!this.attrlimit)return i;for(var s in this.attrlimit)if(parseInt(s)>parseInt(t)){i=this.attrlimit[s]["limit"+e];break}return i},v.FHH23=function(t){return this.awaken[t]},v.FB28=function(t){for(var e in this.awakentotal)if(this.awakentotal[e].req==t)return this.awakentotal[e]},v.FB29=function(t){return this.awakentotal[t]},v.FD4=function(t,e,a,h,i){if(0!=t||i){var s,o={},p=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=Number(i)},r=function(t){switch(a){case 1:var e=THH1.FI55(h.attr),i={};for(var s in e){var o=O4.FD72(parseInt(s)),r=Math.floor(100*t.attr1);i[s]={value:r+"%",name:o}}return i;case 2:var n=THH1.FI55(t.attr2);i={};for(var s in n)p(i,s,n[s]);return i;case 3:App.CM.gtM(O6.B98),n=THH1.FI55(t.attr3),i={};for(var s in n)p(i,s,n[s]);return i}},n=v.FHH23(t);if(n&&(o=r(n)),i||!n){var l=v.FHH23(t+1);if(l&&(s=r(l)),!n)for(var c in s)o[c]={value:0,name:s[c].name}}return{curData:o,nextData:s}}},v.FA45=function(){var t,e,i,s,o=App.CM.gtM(O6.B98),r={},n=0;if(i=v.FB28(o.equipData.talv)){s=i.id+1,t={};var a=THH1.FI55(i.attr);for(var h in a){var p=O4.FD72(parseInt(h)),l=parseInt(a[h]);t[h]={value:l,name:p}}n=i.req}s||(s=1);var c=v.FB29(s);if(c){e={};var u=THH1.FI55(c.attr);for(var h in u){var d=O4.FD72(parseInt(h));l=parseInt(u[h]);e[h]={value:l,name:d}}r={curData:t,nextData:e,needCurLv:n,needNextLv:c.req}}else r={curData:t,needCurLv:i.req};return r},v.FA67=function(t){var e=1,i=0,s=v.FB28(t);s&&(i=M10.gAG(s.attr),e=s.id+1);var o=v.FB29(e),r=0;return o&&(r=M10.gAG(o.attr)),Math.max(r-i,0)},v}();__reflect(L6.prototype,"L6");var EquipChooseQuenitem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgChoose.addEventListener(egret.Event.CHANGE,this.startChoose,this)},t.prototype.close=function(){this.imgChoose.removeEventListener(egret.Event.CHANGE,this.startChoose,this)},t.prototype.startChoose=function(){TG40.playClickEffect(),this.imgChoose.selected?App.VM.isOpen(O7.C42)?App.CM.apF(O6.B98,M19.A69,this.data.u):App.VM.isOpen(O7.C18)&&App.CM.apF(O6.B98,M19.A58,this.data.u):this.imgChoose.selected=!0},t.prototype.dataChanged=function(){this.imgChoose.visible=!0,this.imgChoose.selected=!!this.data.isShow,this.imgQuality.source=N12.getBox(this.data.quality),this.imgHead.source=this.data.icon,this.lbClass.text="Lv."+this.data.level},t}(eui.ItemRenderer);__reflect(EquipChooseQuenitem.prototype,"EquipChooseQuenitem");var EquipDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GF72,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GF72,this)},t.prototype.GF72=function(){var t=M10.FD92(this.data.i.toString(),this.data.t);App.CM.apF(O6.B98,M19.A17,t)},t.prototype.dataChanged=function(){var t=this.data.i.toString();this.packAvaeqipData=M10.FD92(t,this.data.t),this.data.t==M19.A96?(this.lbMove.visible=!1,this.lbName.text="Lv."+this.packAvaeqipData.level):(this.lbName.text=O3.tr(1148,this.packAvaeqipData.level),this.lbMove.visible=!0,this.packAvaeqipData.addlevel?this.lbMove.text=O3.tr(1149,this.packAvaeqipData.level,this.packAvaeqipData.addlevel):this.lbMove.text=O3.tr(1148,this.packAvaeqipData.level)),this.imgQuality.source=N12.getBox(this.packAvaeqipData.quality),this.imgHead.source=this.packAvaeqipData.icon},t}(eui.ItemRenderer);__reflect(EquipDataItem.prototype,"EquipDataItem");var EquipItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.cbOn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cbOnSelect,this)},t.prototype.close=function(){this.imgHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.cbOn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.cbOnSelect,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.currentState="smelt"},t.prototype.cbOnSelect=function(){App.CM.apF(O6.B98,M19.A61,{sel:this.cbOn.selected,index:this.itemIndex,allData:this.data}),TG40.playClickEffect()},t.prototype.ZN40=function(){App.CM.apF(O6.B98,M19.A17,this.packAvaeqipData)},t.prototype.dataChanged=function(){var t=this.data.i.toString();this.lbMove.visible=!1,this.packAvaeqipData=M10.FD92(t,this.data.t),this.data.t==M19.A96?this.lbName.text=O3.tr(5432,this.packAvaeqipData.level):(this.lbName.text=O3.tr(1148,this.packAvaeqipData.level),this.lbMove.visible=!0,this.packAvaeqipData.addlevel?this.lbMove.text=O3.tr(1149,this.packAvaeqipData.level,this.packAvaeqipData.addlevel):this.lbMove.text=O3.tr(1148,this.packAvaeqipData.level)),this.imgHead.source=this.packAvaeqipData.icon,this.imgQuality.source=N12.getBox(this.packAvaeqipData.quality)},t}(eui.ItemRenderer);__reflect(EquipItemRenderer.prototype,"EquipItemRenderer");var EquipNextGradeItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=EquipWareAttrItemSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6679,this.data.name,this.data.num))},t}(eui.ItemRenderer);__reflect(EquipNextGradeItem.prototype,"EquipNextGradeItem");var EquipNextStarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=EquipWareAttrItemSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6679,this.data.name,this.data.value))},t}(eui.ItemRenderer);__reflect(EquipNextStarItem.prototype,"EquipNextStarItem");var EquipNowGradeItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=EquipWareAttrItemSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6680,this.data.name,this.data.num))},t}(eui.ItemRenderer);__reflect(EquipNowGradeItem.prototype,"EquipNowGradeItem");var EquipNowStarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=EquipWareAttrItemSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6680,this.data.name,this.data.value))},t}(eui.ItemRenderer);__reflect(EquipNowStarItem.prototype,"EquipNowStarItem");var EquipResolveItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnResolve.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startResolve,this),this.grpHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GF72,this)},t.prototype.close=function(){this.btnResolve.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startResolve,this),this.grpHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GF72,this)},t.prototype.GF72=function(){var t=M10.FD92(this.data.i.toString(),this.data.t);App.CM.apF(O6.B98,M19.A17,t)},t.prototype.startResolve=function(){var t=this,e=M10.ava[this.data.i+""],i=App.VM.gOV(O7.E86);i&&!i.isCanClick||(i.isCanClick=!1,egret.Tween.get(this).wait(100).call(function(){egret.Tween.removeTweens(t),5==e.quality?App.CM.apF(O6.B98,M19.A46,t.data.u):App.CM.apF(O6.B98,M19.A44,t.data.u)}))},t.prototype.dataChanged=function(){this.btnResolve.label=O3.tr(5818),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5819));var t=L6.init.resolveItem.value,e=M10.ava[this.data.i+""];e.reform?(this.ImgRes.source=N12.FJ86(e.reform.split(":")[0]),this.lbResNum.text=e.reform.split(":")[1]):(this.ImgRes.source=N12.FJ86(t.split(":")[0]),this.lbResNum.text=t.split(":")[1]),this.lbClass.text="Lv."+e.level,this.lbName.text=e.name,this.imgQuality.source=N12.getBox(e.quality),this.imgHead.source=e.icon},t}(eui.ItemRenderer);__reflect(EquipResolveItem.prototype,"EquipResolveItem");var EquipRiseTipsItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=EquipWareAttrItemSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6819,this.data.name,this.data.value))},t}(eui.ItemRenderer);__reflect(EquipRiseTipsItem.prototype,"EquipRiseTipsItem");var SmeltDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR98,this),App.THH32.rEf(this,"lg_qhyh_01")},t.prototype.ZR98=function(){App.CM.apF(O6.B98,M19.A33)},t.prototype.dataChanged=function(){if(this.lbMove.visible=!1,this.data.i){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR98,this),this.lbName.visible=!0,this.lbName.textColor=15058860;var t=this.data.i.toString();this.packAvaeqipData=M10.FD92(t,this.data.t),this.data.t==M19.A96?this.lbName.text=O3.tr(5362,this.packAvaeqipData.level):this.data.t==M19.A87?(this.lbName.text=O3.tr(5362,this.packAvaeqipData.level),this.lbMove.visible=!1):(this.lbName.text=O3.tr(1148,this.packAvaeqipData.level),this.lbMove.visible=!0,this.packAvaeqipData.addlevel?this.lbMove.text=O3.tr(1149,this.packAvaeqipData.level,this.packAvaeqipData.addlevel):this.lbMove.text=O3.tr(1148,this.packAvaeqipData.level)),this.imgHead.source=this.packAvaeqipData.icon,this.imgQuality.source=N12.getBox(this.packAvaeqipData.quality)}else App.THH32.rEf(this,"lg_qhyh_01"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR98,this),this.imgQuality.source=N12.getBox(1),this.lbName.visible=!1,this.imgHead.source="v1_img_jia_png"},t}(eui.ItemRenderer);__reflect(SmeltDataItem.prototype,"SmeltDataItem");var EquipAddAhView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipAddAhSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.packInitData=M10.init,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5148)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5149)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5150)),this.btnSure.label=O3.tr(5151)},t.prototype.open=function(t){this.sendData=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW43,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW43,this),this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureOpenPack,this),this.updataUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW43,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW43,this),this.btnSure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureOpenPack,this),this.sendData=null},t.prototype.sureOpenPack=function(){App.CM.gtM(O6.B82).avatarInfo.g<parseInt(this.lbExNum.text)?P7.FA78():(this.aCF(O6.B98,M19.A59,parseInt(this.lbExNum.text)/5),this.closeSelf())},t.prototype.updataUI=function(){this.lbExNum.text=this.packInitData.buyOnceCapacity.value,this.lbVcoin.text=this.packInitData.buyCapacityCost.value},t.prototype.ZW43=function(t){var e=parseInt(t.target.name),i=parseInt(this.packInitData.buyCapacityCost.value),s=parseInt(this.packInitData.capacityLimit.value);parseInt(this.packInitData.buyOnceCapacity.value);if(e){if(parseInt(this.lbExNum.text)+this.sendData.Ah==s)return!1;this.lbExNum.text=parseInt(this.lbExNum.text)+5+"",this.lbVcoin.text=parseInt(this.lbVcoin.text)+i+""}else{if(parseInt(this.lbExNum.text)-5==0)return!1;this.lbExNum.text=parseInt(this.lbExNum.text)-5+"",this.lbVcoin.text=parseInt(this.lbVcoin.text)-i+""}},t.prototype.closeSelf=function(){this.apF(M19.A23)},t}(BaseEuiView);__reflect(EquipAddAhView.prototype,"EquipAddAhView");var EquipAwakeIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName=HeroEquipIconSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.isOpen=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){App.THH33.rEf(this.gpEff,"square_hong"),App.THH32.rEf(this.gpEff,"wdsg_shengzjuex_sa_001"),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.imgJiang.visible=!1,this.gpStar.visible=!1,this.gpLv.visible=!1},t.prototype.dataChanged=function(){var t=this.data.equip;this.imgIcon.source=t.icon,this.data.isTop?(this.imgSel.visible=!1,this.imgRed.visible=!1):this.imgSel.visible=this.data.isSelect,0<this.data.lv?this.lbName.textFlow=O3.tr2(7357,this.data.lv):this.lbName.textFlow=O3.tr2(7349),6==t.quality?0<this.data.lv?(this.imgBg.source="v1_img_kuang_hong2_png",App.THH32.aUE(this.gpEff,"wdsg_shengzjuex_sa_001",this.gpEff.width/2,this.gpEff.height/2,-1),App.THH33.rEf(this.gpEff,"square_hong")):(App.THH33.aUE(this.gpEff,"square_hong",-51,-50,-1),App.THH32.rEf(this.gpEff,"wdsg_shengzjuex_sa_001"),this.imgBg.source=N12.getBox(t.quality)):(App.THH33.rEf(this.gpEff,"square_hong"),App.THH32.rEf(this.gpEff,"wdsg_shengzjuex_sa_001"),this.imgBg.source=N12.getBox(t.quality))},t.prototype.updateRed=function(){if(this.data.isDress)if(0<this.data.lv){var t=L6.FHH23(this.data.lv);if("-1"!=t.cost){var e=P7.str2kv(t.cost),i=N12.giC(e[0].k),s=N12.giC(e[1].k);i>=e[0].v&&s>=e[1].v?this.imgRed.visible=!0:this.imgRed.visible=!1}else this.imgRed.visible=!1}else{var o=App.CM.gtM(O6.B98).remLegendEquip,r=Number(L6.gIV("awakenReq"));this.imgRed.visible=r<=o.length}else this.imgRed.visible=!1},t.prototype.oCI=function(){if(this.data.isDress||this.data.isTop)if(this.data.isTop){var t=P7.copyTab(this.data.equip);t.u=this.data.u,t.hideGrp=!0,t.elv=this.data.lv,App.CM.apF(O6.B98,M19.A17,t)}else{var e=App.CM.gtM(O6.B98);e.curAwakeEquip=this.data,e.notify(M19.A37),this.imgSel.visible=!0}else P18.sDP(O3.tr(1138))},t}(eui.ItemRenderer);__reflect(EquipAwakeIcon.prototype,"EquipAwakeIcon");var EquipAwakeMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SandMasterSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5105)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5106))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B98);this.ZG74(i),this.imgHead.source="v1_btn_juexinggongming_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof TG58&&this.ZG74(t)},t.prototype.ZG74=function(t){var e=L6.FA45(),i=L6.FA67(t.equipData.talv);if(e.curData?(this.lbNow.textFlow=M18.FG71(O3.tr(7423,"EDD77F",e.needCurLv)),this.addAttrLb(e.curData,this.gpCur,3644,3647),this.lbStatus.text=O3.tr(1110,t.equipData.talv||0)):(this.gpAllCur.visible=this.gpAllCur.includeInLayout=!1,this.lbStatus.text=O3.tr(524)),e.nextData){var s="DFDFDC";e.curData||(s="d82222"),this.lbNext.textFlow=M18.FG71(O3.tr(7423,s,e.needNextLv)),this.addAttrLb(e.nextData,this.gpNext,3645,3648),this.lbAddPower.visible=!0}else this.gpAllNext.visible=this.gpAllNext.includeInLayout=!1,this.lbAddPower.visible=!1,this.lbStatus.text=O3.tr(1106,t.equipData.talv||0);this.lbAddPower.text=O3.tr(1109,i)},t.prototype.addAttrLb=function(t,e,i,s){for(var o in t){var r=t[o],n=new eui.Label;n.size=20,n.textFlow="extra"==o?M18.FG71(O3.tr(s,r)):M18.FG71(O3.tr(i,r.name,r.value)),e.addChild(n)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B98,M19.A39)},t.prototype.close=function(){s.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(EquipAwakeMasterView.prototype,"EquipAwakeMasterView");var EquipAwakeView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.chooseEquip=[],i.skinName=EquipAwakeSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbMax.textFlow=O3.tr2(7383),this.lbStr1.text=O3.tr(6337)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.slotList={},this.attrNum=L6.gIV("awakenReq"),this.chooseEquip=[],this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnMaster.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this);var i=App.CM.gtM(O6.B98);this.updateEquip(i,!0),this.ZG74(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];t instanceof TG58?(this.updateEquip(),s==P4.V51?(this.chooseEquip=[],this.ZR99(t)):s==P4.G38&&this.ZR99(t),this.ZG74(t)):t instanceof THH9&&this.ZI45()},t.prototype.ZR99=function(t){for(var e in this.slotList)if(t.curAwakeEquip.equip.pos==this.slotList[e].equip.pos){t.curAwakeEquip=this.slotList[e];break}},t.prototype.ZG74=function(t){t=t||App.CM.gtM(O6.B98);var e=L6.FD4(t.curAwakeEquip.lv,t.curAwakeEquip.equip.pos,1,t.curAwakeEquip.equip,!0);this.setAttrLabel(e,this.gpCurAttr,this.gpNextAttr,this.gpImgBase,1);var i=L6.FD4(t.curAwakeEquip.lv,t.curAwakeEquip.equip.pos,2,null,!0);if(this.setAttrLabel(i,this.gpCurAttr1,this.gpNextAttr1,this.gpImgAwake,2),t.curAwakeEquip.isDress&&0<t.curAwakeEquip.lv){if(e.nextData)this.gpLeft.visible=!0,this.btnRight.visible=!1,this.btnLeft.label=O3.tr(1326),this.gpLeft.horizontalCenter=0,this.ZI45(),(s=P7.copyTab(t.curAwakeEquip)).lv=s.lv+1,s.isTop=!0,this.nextItem.data=s,this.nextItem.visible=!0,this.curItem.horizontalCenter=void 0,this.curItem.left=0,this.imgTop.visible=!0,this.lbMax.visible=!1;else this.nextItem.visible=!1,this.curItem.left=void 0,this.curItem.horizontalCenter=0,this.imgTop.visible=!1,this.gpLeft.visible=!1,this.btnRight.visible=!1,this.lbMax.visible=!0;(o=P7.copyTab(t.curAwakeEquip)).isTop=!0,this.curItem.data=o}else{var s,o;this.lbMax.visible=!1,t.curAwakeEquip.isDress&&0==t.curAwakeEquip.lv?(this.gpLeft.visible=!0,this.btnRight.visible=!0,this.btnLeft.label=O3.tr(5166),this.btnRight.label=O3.tr(7351),this.gpLeft.horizontalCenter=void 0,this.gpLeft.left=70,this.ZO27()):(this.gpLeft.visible=!1,this.btnRight.visible=!1),(s=P7.copyTab(t.curAwakeEquip)).lv=s.lv+1,s.isTop=!0,s.isDress=!0,this.nextItem.data=s,this.nextItem.visible=!0,this.curItem.horizontalCenter=void 0,this.curItem.left=0,this.imgTop.visible=!0,(o=P7.copyTab(t.curAwakeEquip)).isTop=!0,this.curItem.data=o}},t.prototype.ZI45=function(){var t=App.CM.gtM(O6.B98),e=L6.FHH23(t.curAwakeEquip.lv+1);if("-1"!=e.cost){this.gpGood2.visible=this.gpGood2.includeInLayout=!0,this.imgGood.visible=this.imgGood.includeInLayout=!0,this.gpCost.top=-35,this.gpCost.horizontalCenter=18;var i=P7.str2kv(e.cost),s=N12.gID(i[0].k),o=N12.giC(i[0].k);this.imgGood.setData(s),this.imgGood.setImgSize({w:40,h:40});var r=o>=i[0].v?7353:7354;this.lbCostGood.textFlow=O3.tr2(r,o,i[0].v);var n=N12.gID(i[1].k),a=N12.giC(i[1].k);this.imgGood2.setData(n),this.imgGood2.setImgSize({w:40,h:40});var h=a>=i[1].v?7353:7354;this.lbCostGood2.textFlow=O3.tr2(h,a,i[1].v),o>=i[0].v&&a>=i[1].v?P7.FD53(this.btnLeft,1):P7.FD53(this.btnLeft,0)}this.ZW44()},t.prototype.ZI46=function(t){this.chooseEquip=t,this.ZO27()},t.prototype.ZO27=function(){this.gpCost.top=-30,this.gpCost.horizontalCenter=0,this.imgGood.visible=this.imgGood.includeInLayout=!1,this.gpGood2.visible=this.gpGood2.includeInLayout=!1;var t=App.CM.gtM(O6.B98).remLegendEquip,e=this.chooseEquip.length>=this.attrNum?7353:7354;if(this.lbCostGood.textFlow=O3.tr2(e,this.chooseEquip.length,this.attrNum),P7.FD53(this.btnLeft,this.chooseEquip.length>=this.attrNum?1:0),this.chooseEquip.length>=this.attrNum)this.btnLeft.imgNew.visible=!1;else{var i=this.attrNum<=t.length;this.btnLeft.imgNew.visible=i}},t.prototype.updateEquip=function(t,e){void 0===e&&(e=!1);(t=t||App.CM.gtM(O6.B98)).canLegendQuenEquip;for(var i=t.nowLegendEquip,s=t.legendEquip,o=0;o<s.length;o++){var r,n=M10.FD92(s[o].i.toString(),s[o].t),a=0;for(var h in r=s[o].u,s[o].eatr&&!n.ats&&(n.ats=s[o].eatr.ats),t.equipData.alv){var p=t.equipData.alv[h];if(p.k==Number(n.pos)){a=p.v;break}}var l={equip:n,lv:a,isDress:!0,u:r,isSelect:!(!t.curAwakeEquip||t.curAwakeEquip.equip.pos!=n.pos)};this.slotList[n.pos]=l,this["com"+n.pos].data=l}for(h=1;h<=10;h++)if(i.indexOf(h.toString())<0&&!this.slotList[h]){l={equip:{icon:L13.A66[h],pos:h},isDress:!1,lv:0,isSelect:!(!t.curAwakeEquip||t.curAwakeEquip.equip.pos!=h)};this.slotList[h]=l,this["com"+h].data=l}this.ZW44(),e&&(t.curAwakeEquip=this.slotList[1],this.com1.data.isSelect=!0)},t.prototype.ZW44=function(){for(var t=1;t<=10;t++)this["com"+t].updateRed()},t.prototype.setAttrLabel=function(t,e,i,s,o){if(3!=o){for(var r=0;r<e.numChildren;r++)e.getChildAt(r).visible=!1;for(r=0;r<i.numChildren;r++)i.getChildAt(r).visible=!1;for(r=0;r<s.numChildren;r++)s.getChildAt(r).visible=!1}var n,a=0;for(r=0;r<e.numChildren;r++){var h=e.getChildAt(r);h&&h.visible&&(a=r)}for(var p in n=a,t.curData){var l=t.curData[p],c=void 0;n>=e.numChildren?(c=new eui.Label,e.addChild(c)):(c=e.getChildAt(n)).visible=!0,n++,c.textFlow=M18.HTP.parse(O3.tr(7377,l.name,l.value))}for(r=n;r<e.numChildren;r++){(c=e.getChildAt(r)).visible=!1}if(t.nextData){var u=a;for(var p in t.nextData){l=t.nextData[p],c=void 0;u>=i.numChildren?(c=new eui.Label,i.addChild(c)):(c=i.getChildAt(u)).visible=!0,c.textFlow=M18.HTP.parse(O3.tr(7378,l.value));var d=void 0;u>=s.numChildren?((d=new eui.Image).source="v1_bg_zhanlitisheng_png",d.rotation=90,s.addChild(d)):d=s.getChildAt(u),d.visible=!0,u++}for(;u<i.numChildren;u++){var v=e.getChildAt(u),f=i.getChildAt(u);d=s.getChildAt(u);v&&(v.visible=!1,f.visible=!1),d&&(d.visible=!1)}for(r=u;r<i.numChildren;r++){(c=i.getChildAt(r)).visible=!1}}t.nextData?(this.gpNextAttr0.visible=!0,this.gpCurAttr0.horizontalCenter=void 0,this.gpCurAttr0.left=0,this.gpNextAttr2.visible=!0,this.gpCurAttr2.horizontalCenter=void 0,this.gpCurAttr2.left=0):(this.gpNextAttr0.visible=!1,this.gpCurAttr0.left=void 0,this.gpCurAttr0.horizontalCenter=0,this.gpNextAttr2.visible=!1,this.gpCurAttr2.left=void 0,this.gpCurAttr2.horizontalCenter=0)},t.prototype.onClickLeft=function(){if(this.btnRight.visible)this.apF(M19.A12,{d:this.chooseEquip,id:this.attrNum});else{var t=App.CM.gtM(O6.B98),e=L6.FHH23(t.curAwakeEquip.lv+1);if("-1"!=e.cost){var i=P7.str2kv(e.cost),s=N12.giC(i[0].k),o=N12.giC(i[1].k);if(s<i[0].v)return void App.VM.open(O7.G87,i[0].k,i[0].v-s);if(o<i[1].v)return void App.VM.open(O7.G87,i[1].k,i[1].v-o)}this.apF(M19.A5,t.curAwakeEquip.equip.pos)}},t.prototype.onClickRight=function(){if(this.chooseEquip.length<this.attrNum)P18.sDP(O3.tr(1137));else{for(var t="",e=0;e<this.chooseEquip.length;e++)t+=this.chooseEquip[e]+",";t=t.substring(0,t.length-1);var i=App.CM.gtM(O6.B98);i.legendEquip;this.apF(M19.A56,i.curAwakeEquip.equip.pos,t)}},t.prototype.ZV83=function(){this.apF(M19.A38)},t.prototype.close=function(){this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnMaster.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this)},t}(BaseEuiView);__reflect(EquipAwakeView.prototype,"EquipAwakeView");var EquipCastIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName=HeroEquipIconSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.isOpen=!0},t.prototype.close=function(){App.THH33.rEf(this.gpIcon,"square_hong"),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.imgJiang.visible=!1,this.gpStar.visible=!1,this.gpLv.visible=!1},t.prototype.dataChanged=function(){var t=this.data.equip,e=this.data.castData;this.imgIcon.source=t.icon,this.data.isDress?this.lbName.text=O3.tr(6719,e.s,e.l):(this.imgBg.source=N12.getBox(1),this.lbName.text=O3.tr(6783)),this.imgSel.visible=this.data.isSelect,this.imgRed.visible=0<Jade.Utils.FF22(e.l,e.s),this.imgBg.source=N12.getBox(t.quality),6==t.quality?App.THH33.aUE(this.gpIcon,"square_hong",-51,-50,-1):App.THH33.rEf(this.gpIcon,"square_hong")},t.prototype.oCI=function(){this.data.isDress||P18.sDP(O3.tr(6784));App.CM.gtM(O6.C25);if(this.imgSel.visible&&this.data.isDress){var t=P7.copyTab(this.data.equip);t.u=this.data.u,t.hideGrp=!0,App.CM.apF(O6.B98,M19.A17,t)}else App.CM.apF(O6.C25,Jade.Const.CHANGE_EQUIP,this.data.equip.pos),this.imgSel.visible=!0},t}(eui.ItemRenderer);__reflect(EquipCastIcon.prototype,"EquipCastIcon");var EquipCastView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.isBarAction=!1,i.isAdvance=!1,i.skinName=EquipCastSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbCurAttr0.textFlow=M18.HTP.parser(O3.tr(6723)),this.lbNextAttr0.textFlow=M18.HTP.parser(O3.tr(6724)),this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6776)),this.lbTip.text=O3.tr(6779),this.lbCurTitle0.text=O3.tr(6431),this.lbCurTitle.text=O3.tr(6431),this.lbNextTitle.text=O3.tr(6432),this.lbNextTitle0.text=O3.tr(6432),this.lbStr1.text=O3.tr(6433),this.cbAutoSmelt.label=O3.tr(6434),this.btnRaising.label=O3.tr(4914),this.btnAutoRai.label=O3.tr(1462)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.slotList={},this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.btnAutoRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAuto,this);var i=App.CM.gtM(O6.C25);i.curCastIndex=1,this.ZI47(i),this.updateEquip(void 0,i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];t instanceof Jade.Model?(s==P4.X47&&(this.isBarAction=!0),this.ZI47(t),this.updateEquip()):t instanceof TG58?this.updateEquip():t instanceof THH9&&this.ZI45()},t.prototype.ZI47=function(t){var e=this,i=(t=t||App.CM.gtM(O6.C25)).data;for(var s in i.castList)i.castList[s].i==t.curCastIndex&&(this.curData=i.castList[s]);this.lbLv.textFlow=M18.HTP.parser(O3.tr(6775,this.curData.s,this.curData.l));var o=App.CM.gtM(O6.B98);if(o.nowAvaEquip.indexOf(t.curCastIndex.toString())<0)this.imgCurIcon.source=L13.A66[t.curCastIndex],this.imgCurBg.source=N12.getBox(1),this.lbName.visible=!1;else{this.lbName.visible=!0;var r=o.avaEquip;for(var s in r){var n=r[s],a=M10.FD92(n.i.toString(),n.t);if(a.pos==t.curCastIndex){this.imgCurIcon.source=a.icon,this.imgCurBg.source=N12.getBox(a.quality),this.lbName.text=O3.tr(6785,a.name);break}}}t.data.castList;var h=Jade.Config.getCastDataByLv(this.curData.s),p=Jade.Config.getCastDataByLv(this.curData.s+1);if(this.pBarPro.labelFunction=null,!p&&Jade.Config.isMaxCastLv(this.curData.l))this.gpCost.visible=!1,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.isBarAction=!1,this.pBarPro.maximum=100,this.pBarPro.value=100,this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!1,this.btnAutoRai.label=O3.tr(1462),P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!0),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0),this.timeHandler&&this.closeHandler();else if(this.gpCost.visible=!0,h){var l=Jade.Config.gIV("expBar"),c=Jade.Config.gIV("godCastExp");this.isBarAction?(0==this.curData.e?(this.isAdvance=!0,this.stopAuto()):this.curData.e==this.pBarPro.maximum-parseInt(c)&&this.isAuto&&(this.closeHandler(),App.K16.doTimer(200,1,function(){e.ZQ92(!0,e.isUsingGold)},this)),this.littleAddExp()):(this.pBarPro.maximum=l,this.pBarPro.value=this.curData.e,this.btnRaising.enabled=!0,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!1),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,Jade.Utils.FF22(this.curData.l,this.curData.s)),P7.FD53(this.btnAutoRai,Jade.Utils.FF22(this.curData.l,this.curData.s))),this.ZI45()}this.lbPowerTop.text=Jade.Config.getCastPower(this.curData.l,this.curData.s).toString();var u=Jade.Config.getCastStepRate(this.curData.s);this.lbCurAttr5.textFlow=M18.HTP.parser(O3.tr(6725,u.curRate)),this.lbNextAttr5.textFlow=M18.HTP.parser(O3.tr(6726,u.nextRate));var d=Jade.Config.getCastAttr(this.curData.l,this.curData.s);this.setAttrLabel(d)},t.prototype.ZI45=function(){var t=Jade.Config.getCastDataByLv(this.curData.s),e=P7.str2kv(t.cost),i=Jade.Config.gIV("stoneId"),s=N12.gID(i),o=N12.giC(i),r=t.stonenum;this.imgGood.setData(s),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.text=o+"/"+r,this.lbCostGood.textColor=r<=o?_cc.dgreen:_cc.red;var n=N12.gID(e[0].k),a=N12.giC(e[0].k);this.imgCoin.setData(n),this.imgCoin.setImgSize({w:40,h:40}),this.lbCostCoin.text=e[0].v.toString(),a>=e[0].v?this.lbCostCoin.textColor=_cc.dgreen:this.lbCostCoin.textColor=_cc.red},t.prototype.updateEquip=function(t,e){t=t||App.CM.gtM(O6.B98),e=e||App.CM.gtM(O6.C25);var i=t.nowAvaEquip,s=e.data.castList,o=t.avaEquip;for(var r in o){var n=o[r],a=M10.FD92(n.i.toString(),n.t);if(!this.slotList[a.pos])for(var h=1;h<=10;h++)if(this["com"+h].name==a.pos){this.slotList[a.pos]=this["com"+h];break}var p={};for(var l in p.equip=a,s){var c=s[l];a.pos==c.i&&(p.castData=c)}n.eatr&&!a.ats&&(a.ats=n.eatr.ats),p.u=n.u,p.isSelect=e.curCastIndex==a.pos,p.isDress=0<=i.indexOf(a.pos),this.slotList[a.pos].data=p}for(h=1;h<=10;h++)if(i.indexOf(h.toString())<0){if(!this.slotList[h])for(var u=1;u<=10;u++)if(this["com"+u].name==h){this.slotList[h]=this["com"+u];break}p={},a={icon:L13.A66[h]};for(var l in p.equip=a,s){h==(c=s[l]).i&&(p.castData=c)}p.isSelect=!1,p.isDress=!1,this.slotList[h].data=p}},t.prototype.closeHandler=function(){this.timeHandler&&App.K16.rBH(this.timeHandler),this.timeHandler=null},t.prototype.stopAuto=function(){this.isBarAction=!1,this.isAuto=!1,this.isAdvance=!1,this.closeHandler(),this.btnAutoRai.label=O3.tr(1462),this.enabledBtn(!0),P7.FD53(this.btnRaising,Jade.Utils.FF22(this.curData.l,this.curData.s)),P7.FD53(this.btnAutoRai,Jade.Utils.FF22(this.curData.l,this.curData.s))},t.prototype.littleAddExp=function(){var t=this.pBarPro.value,e=0,i=1;0==this.curData.e?e=this.pBarPro.maximum-t:(e=this.curData.e-t)<=0&&(e=this.pBarPro.maximum-t+this.curData.e),t+e>=this.pBarPro.maximum&&(i+=1),this.updataExp(t,e,i)},t.prototype.updataExp=function(t,e,i){var a=this,h=function(e,i,s){var t,o=0,r=a;a.curData.s;(t=((o=i+s>=r.pBarPro.maximum?(s-=r.pBarPro.maximum-i,r.pBarPro.maximum):s+i)-r.pBarPro.value)/r.pBarPro.maximum*1e3)<200&&(t=200);var n=Jade.Config.gIV("godCastExp");egret.Tween.get(r.pBarPro).to({value:o},t).wait(10).call(function(){if(r.lbAddExp.text="+"+n,egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:-50},200).call(function(){r.lbAddExp.y=-35,r.lbAddExp.visible=!1}),r.pBarPro.value==r.pBarPro.maximum){i=0;var t=Jade.Config.gIV("expBar");r.pBarPro.maximum=parseInt(t),(r.pBarPro.value=0)<e-1&&h(--e,i,s)}})};h(i,t,e)},t.prototype.enabledBtn=function(t){(this.btnRaising.enabled=t)?P16.sGF(this.btnRaising,!1):(P16.sGF(this.btnRaising,!0),P7.FD53(this.btnRaising,0))},t.prototype.setAttrLabel=function(t){var e=1;for(var i in t.curData){var s=t.curData[i];this["lbCurAttr"+e].textFlow=M18.HTP.parse(O3.tr(6720,s.name,s.value)),this["lbCurAttr"+e].visible=!0,this.gpImg.getChildAt(e-1).visible=!0,e++}for(;e<=4;e++)this["lbCurAttr"+e].visible=!1,this.gpImg.getChildAt(e-1).visible=!1;if(t.nextData){for(var i in e=1,t.nextData){s=t.nextData[i];this["lbNextAttr"+e].textFlow=M18.HTP.parse(O3.tr(6721,s.name,s.value)),this["lbNextAttr"+e].visible=!0,e++}for(;e<=4;e++)this["lbNextAttr"+e].visible=!1;this.lbMaxLv.visible=!1,this.gpNextAttr.visible=!0}else this.gpNextAttr.visible=!1,this.lbMaxLv.visible=!0,this.lbMaxLv.textFlow=M18.FG71(O3.tr(910))},t.prototype.ZQ92=function(t,e){var i=this;if(this.isAdvance)return this.stopAuto(),!1;var s=Jade.Config.getCastDataByLv(this.curData.s),o=P7.str2kv(s.cost),r=Jade.Config.gIV("stoneId"),n=(N12.gID(r),N12.giC(r)),a=N12.giC(o[0].k),h=App.CM.gtM(O6.B82),p=1,l=s.stonenum-n;if(s.stonenum>n&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,r,l),t&&this.stopAuto(),!1;if(o[0].v>a)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;var c=N15.FB92(r);if(this.cbAutoSmelt.selected&&o[0].v<=a&&s.stonenum>n){if(!(h.avatarInfo.g>=c*l))return P7.FA78(),this.stopAuto(),this.cbAutoSmelt.selected=!1;p=3}var u=App.CM.gtM(O6.C25),d=function(){u.isCastCostAlert=!1,App.CM.apF(O6.C25,Jade.Const.CAST_REQ,i.curData.i,p)};if(3==p&&u.isCastCostAlert){var v=N12.gID(r),f={handler:d,cost:c*l,costTp:P10.A2,content:O3.tr(2009,v.name)};App.VM.open(O7.C54,f)}else d();return!0},t.prototype.autoUpgrade=function(t){var e=this;this.isUsingGold=t;var i;N14.gIV("lvExp");if(t||(i=this.ZQ92(!0,!1)),t||i){this.btnAutoRai.label=O3.tr(1461),P7.FD53(this.btnAutoRai,0),this.enabledBtn(!1);App.CM.gtM(O6.C12);this.timeHandler&&this.closeHandler();var s=App.K16.doTimer(300,0,function(){e.ZQ92(!0,t)},this);this.timeHandler=s}},t.prototype.canExpend=function(t){var e=this,i=App.CM.gtM(O6.C25);if(i.isCastCostAlert){if(2==t){var s=function(){e.autoUpgrade(!0),i.isCastCostAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}s=function(){e.ZQ92(!1,!0),i.isCastCostAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}return 1==t?this.ZQ92(!1,!0):this.autoUpgrade(!0),!0},t.prototype.ZHH70=function(){this.isAuto=!1,this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null)},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.ZR46=function(){this.isAdvance=!1,this.ZQ92(!1,!1)},t.prototype.onClickAuto=function(){this.timeHandler?this.stopAuto():(this.ZHH70(),this.isAuto=!0,this.isAdvance=!1,this.autoUpgrade(!1))},t.prototype.close=function(){this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.btnAutoRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAuto,this),this.closeHandler(),this.removeTween()},t}(BaseEuiView);__reflect(EquipCastView.prototype,"EquipCastView");var EquipChooseAwakeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipChooseAwakeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipChooseQuenitem.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipChooseQuenitem.itemRenderer=EquipChooseQuenitem,this.dlg.title=O3.tr(7343),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5153)),this.lbStr2.textFlow=O3.tr2(7352)},t.prototype.open=function(t){this.data=t,this.curNum=this.data.d.length,this.dlg.ZM69(this.oCC,this),this.dlg.setOKHandler(this.onClickOK,this),this.updataUI(),this.equipChooseQuenitem.parent.viewport.scrollV=0},t.prototype.onClickOK=function(){var t=[];if(this.dlg.strBtnOK==O3.tr(1140))for(var e=0;e<this.equipCollection.source.length;e++)this.equipCollection.source[e].isShow&&t.push(this.equipCollection.source[e].u);else{var i=Number(L6.gIV("awakenReq"));for(e=0;e<i;e++)this.equipCollection.source[e]&&t.push(this.equipCollection.source[e].u)}this.aCF(O6.B98,M19.A26,t)},t.prototype.close=function(){this.equipCollection.removeAll()},t.prototype.updataUI=function(){for(var t=App.CM.gtM(O6.B98).remLegendEquip.concat(),e=[],i=0;i<t.length;i++){e.push(P7.copyTab(M10.ava[t[i].i+""])),e[i].u=t[i].u;for(var s=0;s<this.data.d.length;s++)this.data.d[s]==t[i].u&&(e[i].isShow=!0)}var o=Number(L6.gIV("awakenReq")),r=this.data.d.length>=o?7353:7354;this.dlg.strBtnOK=O3.tr(1141),this.lbTip.textFlow=M18.HTP.parser(O3.tr(7355)+O3.tr(r,this.data.d.length,o)),this.equipCollection.replaceAll(e)},t.prototype.updateChoose=function(t){App.CM.gtM(O6.B98).remLegendEquip.concat();var e=this.equipCollection.source,i=Number(L6.gIV("awakenReq"));if(this.curNum==i)for(var s=0;s<e.length;s++)if(e[s].isShow){e[s].isShow=!1,this.curNum--;break}for(s=0;s<e.length;s++)if(e[s].u==t){this.curNum++;var o=Number(L6.gIV("awakenReq")),r=this.curNum>=o?7353:7354;this.lbTip.textFlow=M18.HTP.parser(O3.tr(7355)+O3.tr(r,this.curNum,o)),this.curNum>=o?this.dlg.strBtnOK=O3.tr(1140):this.dlg.strBtnOK=O3.tr(1141),e[s].isShow=!0}this.equipCollection.replaceAll(e)},t.prototype.oCC=function(){this.aCF(O6.B98,M19.A13)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.J82:}switch(e){case P4.V43:}},t}(BaseEuiView);__reflect(EquipChooseAwakeView.prototype,"EquipChooseAwakeView");var EquipChooseQuenView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipChooseQuenSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipChooseQuenitem.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipChooseQuenitem.itemRenderer=EquipChooseQuenitem,this.dlg.title=O3.tr(5152),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5153)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5154)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5155)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(7384))},t.prototype.open=function(t){this.data=t,this.dlg.ZM69(this.oCC,this),this.dlg.setOKHandler(this.onClickOK,this),this.lbBack.text=L6.refinecost[t.id+""].restore,this.lbKh.text="/"+L6.refinecost[t.id+""].costnum,this.updataUI(),this.equipChooseQuenitem.parent.viewport.scrollV=0},t.prototype.onClickOK=function(){var t=[];if(this.dlg.strBtnOK==O3.tr(1140))for(var e=0;e<this.equipCollection.source.length;e++)this.equipCollection.source[e].isShow&&t.push(this.equipCollection.source[e].u);else{var i=parseInt(this.lbKh.text.charAt(1));for(e=0;e<i;e++)this.equipCollection.source[e]&&t.push(this.equipCollection.source[e].u)}this.aCF(O6.B98,M19.A21,t)},t.prototype.close=function(){this.data=null,this.equipCollection.removeAll()},t.prototype.updataUI=function(){for(var t=App.CM.gtM(O6.B98).remLegendEquip.concat(),e=[],i=0;i<t.length;i++){e.push(P7.copyTab(M10.ava[t[i].i+""])),e[i].u=t[i].u;for(var s=0;s<this.data.d.length;s++)this.data.d[s]==t[i].u&&(e[i].isShow=!0)}this.lbChoose.text=this.data.d.length+"",this.lbChoose.textColor=parseInt(this.lbChoose.text)>=parseInt(this.lbKh.text.charAt(1))?_cc.green:_cc.red,this.lbChoose.textColor==_cc.green?this.dlg.strBtnOK=O3.tr(1140):this.dlg.strBtnOK=O3.tr(1141),this.equipCollection.replaceAll(e)},t.prototype.updateChoose=function(t){App.CM.gtM(O6.B98).remLegendEquip.concat();var e=this.equipCollection.source;if(parseInt(this.lbChoose.text)==parseInt(this.lbKh.text.charAt(1)))for(var i=0;i<e.length;i++)if(e[i].isShow){e[i].isShow=!1;break}for(i=0;i<e.length;i++){if(e[i].u==t)parseInt(this.lbChoose.text)==parseInt(this.lbKh.text.charAt(1))||(this.lbChoose.text=parseInt(this.lbChoose.text)+1+"",this.lbChoose.textColor=parseInt(this.lbChoose.text)==parseInt(this.lbKh.text.charAt(1))?_cc.green:_cc.red,this.lbChoose.textColor==_cc.green?this.dlg.strBtnOK=O3.tr(1140):this.dlg.strBtnOK=O3.tr(1141)),e[i].isShow=!0}this.equipCollection.replaceAll(e)},t.prototype.oCC=function(){this.aCF(O6.B98,M19.A7)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.J82:}switch(e){case P4.V43:}},t}(BaseEuiView);__reflect(EquipChooseQuenView.prototype,"EquipChooseQuenView");var EquipDetailsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipDetailsSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbGems=[this.lbGem0,this.lbGem1,this.lbGem2,this.lbGem3],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4621)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4656)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4622)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4623)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4623)),this.lbStr9.textFlow=M18.HTP.parse(O3.tr(4627))},t.prototype.btnGOAvaShop=function(){App.CM.apF(O6.B98,M19.A70),this.closeSelf()},t.prototype.chatShow=function(){var t=App.CM.gtM(O6.B98);if(t.showCD)P18.sDP(O3.tr(6858,t.showCD));else{var e=this.avaData.name,i=N18.FF97(this.avaData.quality),s=M18.format("$0,$1",[e,i.colour]),o=P7.FF60(),r=F8.A25;this.avaData.equiptype==M19.A87&&(r=F8.A13);var n={nid:r,channelId:o,param:s,infoId:this.avaData.u};App.CM.apF(O6.C13,O12.A13,n),App.CM.apF(O6.B98,M19.A82),this.closeSelf()}},t.prototype.open=function(t){if(this.blPower.text="0",this.avaData=t,this.attribute=K18.attribute,this.lbMove.visible=!1,this.btnGo.visible=!1,this.btnShow.visible=!1,this.imgNew.visible=!1,this.lbAddLevel.text="",this.lbName.text=t.name,this.lbNature.text=K18.dealAttr(t.attr),8==t.type)this.grpAva.visible=!1,this.lbMove.visible=!0,this.lbMove.text=O3.tr(7100,t.lv);else if(this.grpAva.visible=!0,this.lbPos.text=M10.equipTypeData[t.equiptype+""][parseInt(t.pos)-1+""].posname,this.labRewake.text="",t.equiptype&&t.equiptype==M19.A96){this.currentState="ava",this.lbLevel.text=t.level,this.lbType.text=O3.tr(1127);var e=P7.copyTab(M10.ava[t.id+""]),i=t.ats;e.addattr="";var s=App.VM.isOpen(O7.HH97);if(this.btnGo.visible=this.avaData.u&&e.quality<=5,this.btnGo.visible){var o=App.CM.gtM(O6.B98);this.btnGo.visible=this.imgNew.visible=!!o.shopPosEquip[e.pos]}if(this.btnShow.visible=!!this.avaData.u,this.grpAppend.visible=this.grpAppend.includeInLayout=!0,i&&i.length){for(var r=0;r<i.length;r++)e.addattr+=i[r].k+":"+i[r].v+";";e.addattr=e.addattr.substring(0,e.addattr.length-1);var n=TG60.getLegData(t.id);this.addPower(M10.gAG(e.addattr)),i?this.setAttrGroup(this.grpAppend,i):this.applendAttr();var a=parseInt(L6.init.attrInitNum.value);this.lbName.text=O3.tr(1143,this.lbName.text,i.length-a)}else if(s)if(i){for(r=0;r<i.length;r++)e.addattr+=i[r].k+":"+i[r].v+";";e.addattr=e.addattr.substring(0,e.addattr.length-1);n=TG60.getLegData(t.id);this.addPower(M10.gAG(e.addattr)),n.length?this.setAttrGroup(this.grpAppend,n):this.applendAttr(),this.lbName.text=O3.tr(1143,this.lbName.text,0)}else this.grpAppend.visible=this.grpAppend.includeInLayout=!1;else 6==t.quality?this.applendAttr():this.grpAppend.visible=this.grpAppend.includeInLayout=!1;this.grpGold.includeInLayout=this.grpGold.visible=!1;var h=App.CM.gtM(O6.B98),p=App.CM.gtM(O6.A87);h.avaEquip;if(t.u||t.sd){var l=void 0,c=void 0,u=void 0,d=void 0,v=void 0,f=void 0,g=void 0,m=parseInt(t.pos);if(t.sd)this.grp.visible=!1,l=t.sd,c=t.rd,u=t.fd,d=t.gd,g=t.erv,f=t.gcv,v=t.elv;else{l=h.forgeData.sd,c=h.forgeData.rd,u=h.forgeData.fd,d=h.forgeData.gd,g=p&&p.data.getPartInfo(m);var y=App.CM.gtM(O6.C25);for(var A in y.data.castList){var b=y.data.castList[A];if(b.i==m){f=b;break}}if(t.elv)v=t.elv;else for(var A in h.equipData.alv)h.equipData.alv[A].k==t.pos&&(v=h.equipData.alv[A].v);this.grp.visible=!t.hideGrp}var T="";if(1==l.k&&l.v<=m);else{this.grpStrength.includeInLayout=this.grpStrength.visible=!0;var C=l.k;m>=l.v&&(C-=1);var w=M12.strength[C+""]["atk"+m],O=M12.strength[C+""]["def"+m],M=M12.strength[C+""]["hp"+m];T=this.getAttr(w,O,M),this.addPower(M10.gAG(T)),this.setAttrGroup(this.grpStrength,P7.str2kv(T),O3.tr(4624))}if(1==c.k&&c.v<=m);else{this.grpRefine.includeInLayout=this.grpRefine.visible=!0;var _=c.k;m>=c.v&&(_-=1);w=M12.refine[_+""]["atk"+m],O=M12.refine[_+""]["def"+m],M=M12.refine[_+""]["hp"+m];T=this.getAttr(w,O,M),this.addPower(M10.gAG(T)),this.setAttrGroup(this.grpRefine,P7.str2kv(T),O3.tr(4625))}if(1==u.k&&u.v<=m);else{this.grpForging.includeInLayout=this.grpForging.visible=!0;var F=u.k;m>=u.v&&(F-=1);w=M12.forging[F+""]["atk"+m],O=M12.forging[F+""]["def"+m],M=M12.forging[F+""]["hp"+m];T=this.getAttr(w,O,M),this.addPower(M10.gAG(T)),this.setAttrGroup(this.grpForging,P7.str2kv(T),O3.tr(4626))}if(1==d.k&&d.v<=m);else{this.grpGem.includeInLayout=this.grpGem.visible=!0;var E=parseInt(M12.init.gem1st.value),P=parseInt(M12.init.gem2st.value),L=parseInt(M12.init.gem3st.value),S=(w=0,O=0,M=0,0),I=0,H=0,D=d.k;m>=d.v&&(D-=1),M12.gem[D+""]["atk"+m]&&(this.lbGem1.text=this.lbGem2.text=this.lbGem3.text=O3.tr(1111)+O3.tr(1117)),M12.gem[D+""]["def"+m]&&(this.lbGem1.text=this.lbGem2.text=this.lbGem3.text=O3.tr(1112)+O3.tr(1117)),M12.gem[D+""]["hp"+m]&&(this.lbGem1.text=this.lbGem2.text=this.lbGem3.text=O3.tr(1113)+O3.tr(1117)),D<E&&(w=M12.gem[D+""]["atk"+m],O=M12.gem[D+""]["def"+m],M=M12.gem[D+""]["hp"+m],w&&(this.lbGem0.text=O3.tr(1115,w)),O&&(this.lbGem0.text=O3.tr(1116,O)),M&&(this.lbGem0.text=O3.tr(1100,M)),T=this.getAttr(w,O,M),this.addPower(M10.gAG(T))),E<=D&&D<P&&(w=M12.gem[E+""]["atk"+m],O=M12.gem[E+""]["def"+m],M=M12.gem[E+""]["hp"+m],S=M12.gem[D+""]["atk"+m],I=M12.gem[D+""]["def"+m],H=M12.gem[D+""]["hp"+m],this.lbGem1.textColor=9163455,w&&(this.lbGem0.text=O3.tr(1115,w),this.lbGem1.text=O3.tr(1115,S)),O&&(this.lbGem0.text=O3.tr(1116,O),this.lbGem1.text=O3.tr(1116,I)),M&&(this.lbGem0.text=O3.tr(1100,M),this.lbGem1.text=O3.tr(1100,H)),T=this.getAttr(S,I,H),this.addPower(M10.gAG(T))),P<=D&&D<L&&(w=M12.gem[E+""]["atk"+m],O=M12.gem[E+""]["def"+m],M=M12.gem[E+""]["hp"+m],S=M12.gem[D+""]["atk"+m],I=M12.gem[D+""]["def"+m],H=M12.gem[D+""]["hp"+m],this.lbGem1.textColor=this.lbGem2.textColor=9163455,w&&(this.lbGem0.text=O3.tr(1115,w),this.lbGem1.text=O3.tr(1115,M12.gem[P+""]["atk"+m]),this.lbGem2.text=O3.tr(1115,S)),O&&(this.lbGem0.text=O3.tr(1116,O),this.lbGem1.text=O3.tr(1116,M12.gem[P+""]["def"+m]),this.lbGem2.text=O3.tr(1116,I)),M&&(this.lbGem0.text=O3.tr(1100,M),this.lbGem1.text=O3.tr(1100,M12.gem[P+""]["hp"+m]),this.lbGem2.text=O3.tr(1100,H)),T=this.getAttr(S,I,H),this.addPower(M10.gAG(T))),L<=D&&(w=M12.gem[E+""]["atk"+m],O=M12.gem[E+""]["def"+m],M=M12.gem[E+""]["hp"+m],S=M12.gem[D+""]["atk"+m],I=M12.gem[D+""]["def"+m],H=M12.gem[D+""]["hp"+m],this.lbGem1.textColor=this.lbGem2.textColor=this.lbGem3.textColor=9163455,w&&(this.lbGem0.text=O3.tr(1115,w),this.lbGem1.text=O3.tr(1115,M12.gem[P+""]["atk"+m]),this.lbGem2.text=O3.tr(1115,M12.gem[L+""]["atk"+m]),this.lbGem3.text=O3.tr(1115,S)),O&&(this.lbGem0.text=O3.tr(1116,O),this.lbGem1.text=O3.tr(1116,M12.gem[P+""]["def"+m]),this.lbGem2.text=O3.tr(1116,M12.gem[L+""]["def"+m]),this.lbGem3.text=O3.tr(1116,I)),M&&(this.lbGem0.text=O3.tr(1100,M),this.lbGem1.text=O3.tr(1100,M12.gem[P+""]["hp"+m]),this.lbGem2.text=O3.tr(1100,M12.gem[L+""]["hp"+m]),this.lbGem3.text=O3.tr(1100,H)),T=this.getAttr(S,I,H),this.addPower(M10.gAG(T)))}if(g&&g.ulck){this.gRewake.includeInLayout=this.gRewake.visible=!0,this.labRewake.textFlow=O3.tr2(6577,M18.FF66(g.lv));var B=Reincarnate.Config.FB89(g.part,g.lv).attr;(k=P7.str2kv(B)).sort(function(t,e){return t.k-e.k}),this.setAttrGroup(this.gRewake,k,O3.tr(6500)),this.addPower(M10.FHH18(k))}var G=0;if(f&&(0<f.s||0<f.l)){this.grpCast.includeInLayout=this.grpCast.visible=!0;var x=Jade.Utils.FD19(f.s,f.l),k=P7.str2kv(x);this.setAttrGroup(this.grpCast,k,O3.tr(6780,f.s,f.l)),this.addPower(M10.FHH18(k));var V=Jade.Config.getCastDataByLv(f.s);this.lbCastRate.textFlow=M18.HTP.parser(O3.tr(6781,100*V.attrrate)),this.lbCastRate.visible=this.lbCastRate.includeInLayout=!0,G=V.attrrate}var R=0;if(v&&0<v){var N=L6.FHH23(v);if(N){this.currentState="awake",App.THH32.aUE(this.gpEff1,"wdsg_szjx_tkuang_lt_001",this.gpEff1.width/2,this.gpEff1.height/2,-1),App.THH32.aUE(this.gpEff2,"wdsg_szjx_tkuang_lt_002",this.gpEff2.width/2,this.gpEff2.height/2,-1),this.lbAwakeRate.textFlow=M18.HTP.parser(O3.tr(7358,Math.floor(100*N.attr1))),this.lbAwakeRate.visible=this.lbAwakeRate.includeInLayout=!0,this.grpAwake.includeInLayout=this.grpAwake.visible=!0;k=P7.str2kv(N.attr2);this.setAttrGroup(this.grpAwake,k,O3.tr(7359)),this.addPower(M10.FHH18(k)),R=N.attr1}}0<G+R&&(this.lbNature.textFlow=M18.FG71(P7.str2kv(t.attr).map(function(t){return P7.FM5([t],void 0,{template:"$0:$1<font color="+egret.toColorString(_cc.green)+">(+"+Math.floor((R+G)*t.v)+")</font>",percentTemplate:"$0:$1%"})}).join("\n")))}}else if(t.equiptype==M19.A87){this.currentState="classup",this.lbLevel.text=O3.tr(1110,t.level),this.lbType.text=O3.tr(1128);var U=0,Z=0,K=0,q=0,J=0;if(t.cu){var j=t.cu;U=j.stlv,Z=j.stp,K=j.mlv,q=j.mp,J=j.cmlv}m=t.pos;if(0<U){var W=Classup.Config.FB22(m,U,Z);this.grpStrength.visible=this.grpStrength.includeInLayout=!0,this.setAttrGroup(this.grpStrength,W,O3.tr(8621))}if(0<K){W=Classup.Config.FC88(m,K,q,J);this.grpRefine.visible=this.grpRefine.includeInLayout=!0,this.setAttrGroup(this.grpRefine,W,O3.tr(8622))}this.btnShow.visible=!t.s&&!!t.cu}else this.lbMove.visible=!0,this.lbLevel.text=O3.tr(1110,t.level),this.lbType.text=O3.tr(1128),t.addlevel?(this.lbAddLevel.text="+"+t.addlevel,this.lbAddLevel.visible=!0,this.addAttr(t.addattr,t.addlevel),this.lbMove.text=O3.tr(1149,t.level,t.addlevel)):this.lbMove.text=O3.tr(1148,t.level);this.imgQuality.source=N12.getBox(t.quality),this.imgHead.source=t.icon,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnGOAvaShop,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chatShow,this),this.lbGrade.text=O3.tr(1126,M10.getPower(t.id)),this.addPower(M10.getPower(t.id)),O5.FB13(this.lbName,this.lbName.text,t.quality,2)},t.prototype.applendAttr=function(){var t=this.grpAppend.getChildByName("a"),e=this.grpAppend.getChildByName("b");t.text=O3.tr(1133),e.text=null},t.prototype.addPower=function(t){this.blPower.text=parseInt(this.blPower.text)+t+""},t.prototype.getAttr=function(t,e,i){var s="";return t&&(s+="101:"+t+";"),e&&(s+="102:"+e+";"),i&&(s+="103:"+i+";"),s=s.substring(0,s.length-1)},t.prototype.setAttrGroup=function(t,e,i){var s=t.getChildByName("title"),o=t.getChildByName("a"),r=t.getChildByName("b"),n=[],a=[];e.forEach(function(t,e){return(e%2?a:n).push(t)}),o.text=P7.attr2str(n),r.text=P7.attr2str(a),i&&(s.textFlow=M18.FG71(i))},t.prototype.ZD99=function(t,e,i){var s,o,r,n=t.getChildByName("title"),a=t.getChildByName("a"),h=t.getChildByName("b"),p="",l="";if(this.avaData.sd)s=this.avaData.alv;else{var c=App.CM.gtM(O6.B98);for(var u in c.equipData.alv){var d=c.equipData.alv[u];d.k==Number(this.avaData.pos)&&(s=d)}}s&&(o=L6.FHH23(s.v),r=P7.str2kv(o.attr3)),e.forEach(function(t,e){var i;if(r)for(var s in r)if(r[s].k==t.k){i=r[s].v;break}e%2?l+=(l?"\n":"")+O3.tr(7373,P7.attr2str([t]))+(i?O3.tr(7372,100*i):""):p+=(p?"\n":"")+O3.tr(7373,P7.attr2str([t]))+(i?O3.tr(7372,100*i):"")}),a.textFlow=M18.HTP.parser(p),h.textFlow=M18.HTP.parser(l),i&&(n.textFlow=M18.FG71(O3.tr(7375,i)+(s?O3.tr(7374):"")))},t.prototype.close=function(){this.lbAdd.text="",this.gRewake.visible=this.gRewake.includeInLayout=this.grpAdd.visible=this.grpAdd.includeInLayout=this.grpAppend.visible=this.grpAppend.includeInLayout=this.grpGold.visible=this.grpGold.includeInLayout=this.grpStrength.visible=this.grpStrength.includeInLayout=this.grpRefine.visible=this.grpRefine.includeInLayout=this.grpForging.visible=this.grpForging.includeInLayout=this.grpGem.visible=this.grpGem.includeInLayout=!1,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnGOAvaShop,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chatShow,this),"awake"==this.currentState&&(App.THH32.rEf(this.gpEff1,"wdsg_szjx_tkuang_lt_001"),App.THH32.rEf(this.gpEff2,"wdsg_szjx_tkuang_lt_002"))},t.prototype.addAttr=function(t,e){if(this.currentState="ava",this.lbAdd.text="",this.grpAdd.visible=this.grpAdd.includeInLayout=!0,e)for(var i=0;i<e;i++)this.lbAdd.text+=i==e-1?K18.dealAttr(t):K18.dealAttr(t)+"\n"},t.prototype.closeSelf=function(){this.apF(M19.A14)},t}(BaseEuiView);__reflect(EquipDetailsView.prototype,"EquipDetailsView");var EquipForgingView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.isGo=!1,i.isDong=!1,i.skinName=EquipForgingSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.playComs=[this.com0,this.com2,this.com4,this.com6,this.com8,this.com1,this.com3,this.com5,this.com7,this.com9],this.source=["img_toukui_png","img_wuqi_png","img_yifu_png","img_jiezhi_png","img_xianglian_png","img_xiezi_png","img_hujian_png","img_yaodai_png","img_kuzi_png","img_huwan_png"],this.canSource=["toukui20_png","yifu20_png","xianglian20_png","hujian20_png","kuzi20_png","wuqi20_png","jiezhi20_png","xiezi20_png","yaodai20_png","huwan20_png"];for(var t=0;t<this.coms.length;t++)this.coms[t].imgHead.source=this.source[t];this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4610)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4611)),this.btnForging.label=O3.tr(4613),this.cbBlank.label=O3.tr(4602)},t.prototype.open=function(){this.grpGreat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnForging.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startForging,this),this.cbBlank.addEventListener(egret.Event.CHANGE,this.blankImgNew,this);var t=N12.gID(M12.init.forgingItem.value);this.imgRes.setData(t),this.updataUI(),egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.equip_forging_btn,!1)},this)},t.prototype.close=function(){s.prototype.close.call(this);for(var t=0;t<this.coms.length;t++)App.THH33.rEf(this.coms[t],"com"),App.THH32.rEf(this.coms[t],"lg_qhyh_01");this.grpGreat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnForging.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startForging,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.blankImgNew,this),this.isDong=this.isGo=this.isShow=!1,this.upIndex=null,egret.Tween.removeTweens(this)},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98),e=t.canShowBox();this.cbBlank.visible=e;for(var i=0;i<this.coms.length;i++)this.coms[i].name=M10.equipTypeData[M19.A96+""][i+""].posname;if(t.forgeData&&1==t.forgeData.fd.k)for(i=0;i<this.playComs.length;i++){var s=this.coms.indexOf(this.playComs[i]);t.forgeData.fd.v-1<=i?this.playComs[i].grpCount.visible=!1:(this.playComs[i].grpCount.visible=!0,this.playComs[i].lbClass.text="+"+t.forgeData.fd.k,M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i])}else for(i=0;i<this.playComs.length;i++){s=this.coms.indexOf(this.playComs[i]);M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i],this.playComs[i].grpCount.visible=!0,t.forgeData.fd.v-1<=i?this.playComs[i].lbClass.text="+"+(t.forgeData.fd.k-1):this.playComs[i].lbClass.text="+"+t.forgeData.fd.k}this.imgHead.source=this.playComs[t.forgeData.fd.v-1].imgHead.source,this.lbName.text=this.playComs[t.forgeData.fd.v-1].name,this.index=t.forgeData.fd.v-1,this.isGou(),this.upDataOver(),this.updateNature(this.index)},t.prototype.blankImgNew=function(){App.CM.apF(O6.B82,L13.A24,L17.A22),TG40.playClickEffect()},t.prototype.isGou=function(){if(this.cbBlank.visible){var t=App.CM.gtM(O6.B82).setting.indexOf(L17.A22);this.cbBlank.selected=-1!=t}},t.prototype.updateHong=function(){this.isGou();var t=this.lbOwn.textColor==_cc.green;t&&this.cbBlank.selected&&(this.showImgNew(!1),this.apF(M19.A80)),t&&!this.cbBlank.selected&&(this.showImgNew(!0),this.apF(M19.A80))},t.prototype.showImgNew=function(t){if(this.grpChange.visible){var e=App.CM.gtM(O6.B98);this.btnForging.imgNew.visible=t,e.canFd=t?1:0}},t.prototype.upDataOver=function(){var t=App.CM.gtM(O6.B98);this.isDong=!1,this.com9.lbClass.text.slice(1)==M12.init.forgingLimit.value&&(this.grpChange.visible=!1);var e=t.forgeData.fd.k,i=t.forgeData.fd.v;t.forgeData.fm?(P16.sGF(this.btnGreat.imgGreat,!1),this.lbClass.visible=!0,null==this.oldId?this.oldId=t.forgeData.fm:this.oldId!=t.forgeData.fm&&(this.oldId=t.forgeData.fm,App.THH33.aUE(this.btnGreat,"iconSkill",-50,-60,1),this.apF(M19.A16,ForgeType.FD)),this.lbClass.text=O3.tr(1110,t.forgeData.fm)):(this.lbClass.visible=!1,this.oldId=t.forgeData.fm,P16.sGF(this.btnGreat.imgGreat,!0));var s,o=t.forgeData.fm,r=M12.forgin_master;s=r[o+1+""]?r[o+1+""].lvforging:r[o+""].lvforging,this.lbRate.textFlow=M18.HTP.parse(O3.tr(4609,e-1,s)),this.updateCoin();for(var n=M12.forging,a=0,h=0,p=0,l=1;l<i;l++)a+=n[e+""]["atk"+l],h+=n[e+""]["def"+l],p+=n[e+""]["hp"+l];if(n[e-1+""])for(var c=i;c<=10;c++)a+=n[e-1+""]["atk"+c],h+=n[e-1+""]["def"+c],p+=n[e-1+""]["hp"+c];var u="101:"+a+";102:"+h+";103:"+p;if(this.scoreLb.text=M10.gAG(u)+"",o){var d=r[o+""],v="101:"+d.atk+";102:"+d.def+";103:"+d.hp;this.scoreLb.text=Number(this.scoreLb.text)+M10.gAG(v)+""}this.isGo&&this.btnForging.imgNew.visible&&this.grpChange.visible&&(this.startForging(),this.isGo=!1)},t.prototype.updateNature=function(t){var e,i,s,o=App.CM.gtM(O6.B98).forgeData.fd.k-1;if(M12.forging[o+1+""]&&(e=M12.forging[o+1+""]["atk"+(t+1)],i=M12.forging[o+1+""]["def"+(t+1)],s=M12.forging[o+1+""]["hp"+(t+1)]),this.lbAddAtk.text="",this.lbAddDef.text="",this.lbAddHp.text="",o){var r=M12.forging[o+""]["atk"+(t+1)],n=M12.forging[o+""]["def"+(t+1)],a=M12.forging[o+""]["hp"+(t+1)];r||(this.grpAtk.visible=this.grpAtk.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),n||(this.grpDef.visible=this.grpDef.includeInLayout=!1,this.grpAtk.visible=this.grpAtk.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),a||(this.grpHp.visible=this.grpHp.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpAtk.visible=this.grpAtk.includeInLayout=!0),this.lbAtk.textFlow=M18.HTP.parser(O3.tr(4008,r)),this.lbDef.textFlow=M18.HTP.parser(O3.tr(4007,n)),this.lbHp.textFlow=M18.HTP.parser(O3.tr(4006,a)),e&&(this.lbAddAtk.text=O3.tr(1114,e-r)),i&&(this.lbAddDef.text=O3.tr(1114,i-n)),s&&(this.lbAddHp.text=O3.tr(1114,s-a))}else this.lbAtk.textFlow=M18.HTP.parser(O3.tr(4008,0)),this.lbDef.textFlow=M18.HTP.parser(O3.tr(4007,0)),this.lbHp.textFlow=M18.HTP.parser(O3.tr(4006,0)),this.lbAddAtk.text=O3.tr(1114,e),this.lbAddDef.text=O3.tr(1114,i),this.lbAddHp.text=O3.tr(1114,s),e||(this.grpAtk.visible=this.grpAtk.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),i||(this.grpDef.visible=this.grpDef.includeInLayout=!1,this.grpAtk.visible=this.grpAtk.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),s||(this.grpHp.visible=this.grpHp.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpAtk.visible=this.grpAtk.includeInLayout=!0);null!=this.upIndex&&App.THH33.rEf(this.playComs[this.upIndex],"com"),this.upIndex=t,App.THH33.aUE(this.playComs[this.upIndex],"com",-40,-40)},t.prototype.updateCoin=function(){var t=App.CM.gtM(O6.B98),e=M12.forging[t.forgeData.fd.k+""];if(this.grpChange.visible&&e){var i=App.CM.gtM(O6.B82),s=N12.giC(parseInt(M12.init.forgingItem.value));this.lbOwn.text=M18.FF65(s,1);var o=e.needforging;this.lbKAh.textFlow=M18.HTP.parse(O3.tr(4612,M18.FF65(o,1))),this.needforging=o,-1==i.setting.indexOf(L17.A22)&&(t.canFd=o<=s?1:0),o<=s?(this.lbOwn.textColor=this.lbKAh.textColor=_cc.green,this.cbBlank.selected?this.showImgNew(!1):this.showImgNew(!0)):(this.lbOwn.textColor=this.lbKAh.textColor=_cc.red,this.showImgNew(!1))}},t.prototype.GS86=function(){var t={t:2,g:App.CM.gtM(O6.B98).forgeData.fm};this.apF(M19.A79,t)},t.prototype.startForging=function(){this.isShow=!0;var t=N12.giC(parseInt(M12.init.forgingItem.value));if(!this.isDong&&this.needforging>t){var e=this.needforging-t;App.VM.open(O7.G87,M12.init.forgingItem.value,e)}else this.isDong?this.isGo=!0:this.grpChange.visible&&(this.isDong=!0,egret.Tween.get(this).wait(200).call(function(){this.apF(M19.A40)},this))},t.prototype.createDong=function(t){App.THH32.aUE(this.playComs[this.index],"lg_qhyh_01",40,40,1)},t.prototype.dong=function(){if(this.isShow){var t=this;this.createDong(t.index);var e=t.index+=1;0==t.endIndex?t.playComs[e]?t.dong():(t.index=0,t.upDataOver(),t.updataUI(),this.isDong=!1):t.endIndex>e?t.dong():(t.upDataOver(),t.updataUI(),this.isDong=!1)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.L91:this.endIndex=t.forgeData.fd.v-1,this.isShow&&this.dong()}switch(t instanceof TF84&&this.ZD61(t),e){case P4.V43:this.updateCoin()}t instanceof TG12&&this.updateHong()},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.HH24,N4.basePanel)},t}(BaseEuiView);__reflect(EquipForgingView.prototype,"EquipForgingView");var EquipGemView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.isGo=!1,i.isDong=!1,i.skinName=EquipGemSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.playComs=[this.com0,this.com2,this.com4,this.com6,this.com8,this.com1,this.com3,this.com5,this.com7,this.com9],this.source=["img_toukui_png","img_wuqi_png","img_yifu_png","img_jiezhi_png","img_xianglian_png","img_xiezi_png","img_hujian_png","img_yaodai_png","img_kuzi_png","img_huwan_png"],this.canSource=["toukui20_png","yifu20_png","xianglian20_png","hujian20_png","kuzi20_png","wuqi20_png","jiezhi20_png","xiezi20_png","yaodai20_png","huwan20_png"];for(var t=0;t<this.coms.length;t++)this.coms[t].imgHead.source=this.source[t];this.btnGem.label=O3.tr(4614),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4616)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4617)),this.cbBlank.label=O3.tr(4602),this.lbNow1.text=O3.tr(5737),this.lbNow2.text=O3.tr(5737),this.lbNow3.text=O3.tr(5737)},t.prototype.open=function(){this.grpGreat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnGem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGem,this),this.cbBlank.addEventListener(egret.Event.CHANGE,this.blankImgNew,this);var t=N12.gID(M12.init.gemItem.value);this.imgRes.setData(t),this.updataUI(),egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.equip_gen_btn,!1)},this)},t.prototype.close=function(){s.prototype.close.call(this);for(var t=0;t<this.coms.length;t++)App.THH33.rEf(this.coms[t],"com"),App.THH32.rEf(this.coms[t],"lg_qhyh_01");this.grpGreat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnGem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startGem,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.blankImgNew,this),this.isDong=this.isGo=this.isShow=null,this.upIndex=null,egret.Tween.removeTweens(this)},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98),e=t.canShowBox();this.cbBlank.visible=e;for(var i=0;i<this.coms.length;i++)this.coms[i].name=M10.equipTypeData[M19.A96+""][i+""].posname;if(t.forgeData&&1==t.forgeData.gd.k)for(i=0;i<this.playComs.length;i++){var s=this.coms.indexOf(this.playComs[i]);t.forgeData.gd.v-1<=i?this.playComs[i].grpCount.visible=!1:(this.playComs[i].grpCount.visible=!0,M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i],this.playComs[i].lbClass.text="+"+t.forgeData.gd.k)}else for(i=0;i<this.playComs.length;i++){s=this.coms.indexOf(this.playComs[i]);M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i],this.playComs[i].grpCount.visible=!0,t.forgeData.gd.v-1<=i?this.playComs[i].lbClass.text="+"+(t.forgeData.gd.k-1):this.playComs[i].lbClass.text="+"+t.forgeData.gd.k}this.imgHead.source=this.playComs[t.forgeData.gd.v-1].imgHead.source,this.lbName.text=this.playComs[t.forgeData.gd.v-1].name,this.index=t.forgeData.gd.v-1,this.isGou(),this.upDataOver(),this.updateNature(this.index)},t.prototype.blankImgNew=function(){App.CM.apF(O6.B82,L13.A24,L17.A41),TG40.playClickEffect()},t.prototype.isGou=function(){if(this.cbBlank.visible){var t=App.CM.gtM(O6.B82).setting.indexOf(L17.A41);this.cbBlank.selected=-1!=t}},t.prototype.updateHong=function(){this.isGou();var t=this.lbOwn.textColor==_cc.green;t&&this.cbBlank.selected&&(this.showImgNew(!1),this.apF(M19.A80)),t&&!this.cbBlank.selected&&(this.showImgNew(!0),this.apF(M19.A80))},t.prototype.showImgNew=function(t){if(this.grpChange.visible){var e=App.CM.gtM(O6.B98);this.btnGem.imgNew.visible=t,e.canGd=t?1:0}},t.prototype.upDataOver=function(){this.isDong=!1,this.com9.lbClass.text.slice(1)==M12.init.gemLimit.value&&(this.grpChange.visible=!1);var t=App.CM.gtM(O6.B98),e=t.forgeData.gd.k,i=t.forgeData.gd.v;t.forgeData.gm?(P16.sGF(this.btnGreat.imgGreat,!1),this.lbClass.visible=!0,null==this.oldId?this.oldId=t.forgeData.gm:this.oldId!=t.forgeData.gm&&(this.oldId=t.forgeData.gm,App.THH33.aUE(this.btnGreat,"iconSkill",-50,-60,1),this.apF(M19.A16,ForgeType.GD)),this.lbClass.text=O3.tr(1110,t.forgeData.gm)):(this.lbClass.visible=!1,this.oldId=t.forgeData.gm,P16.sGF(this.btnGreat.imgGreat,!0));var s,o=t.forgeData.gm,r=M12.gem_master;s=r[o+1+""]?r[o+1+""].lvgem:r[o+""].lvgem,this.lbRate.textFlow=M18.HTP.parse(O3.tr(4615,e-1,s)),this.updateCoin();for(var n=M12.gem,a=0,h=0,p=0,l=1;l<i;l++)a+=n[e+""]["atk"+l]?n[e+""]["atk"+l]:0,h+=n[e+""]["def"+l]?n[e+""]["def"+l]:0,p+=n[e+""]["hp"+l]?n[e+""]["hp"+l]:0;if(n[e-1+""])for(var c=i;c<=10;c++)a+=n[e-1+""]["atk"+c]?n[e-1+""]["atk"+c]:0,h+=n[e-1+""]["def"+c]?n[e-1+""]["def"+c]:0,p+=n[e-1+""]["hp"+c]?n[e-1+""]["hp"+c]:0;var u="101:"+a+";102:"+h+";103:"+p;if(this.scoreLb.text=M10.gAG(u)+"",o){var d=r[o+""],v="108:"+d.truedmg+";109:"+d.relief;this.scoreLb.text=Number(this.scoreLb.text)+M10.gAG(v)+""}this.isGo&&this.btnGem.imgNew.visible&&this.grpChange.visible&&(this.startGem(),this.isGo=!1)},t.prototype.updateNature=function(t){var e=App.CM.gtM(O6.B98).forgeData.gd.k-1,i=this.com9.lbClass.text.slice(1);this.lbAdd0.text=this.lbAdd1.text=this.lbAdd2.text=this.lbAdd3.text="";var s=0,o=0,r=0;i!=M12.init.gemLimit.value&&M12.gem[e+1+""]&&(s=M12.gem[e+1+""]["atk"+(t+1)]?M12.gem[e+1+""]["atk"+(t+1)]:0,o=M12.gem[e+1+""]["def"+(t+1)]?M12.gem[e+1+""]["def"+(t+1)]:0,r=M12.gem[e+1+""]["hp"+(t+1)]?M12.gem[e+1+""]["hp"+(t+1)]:0),s&&(this.lbText0.text=this.lbText1.text=this.lbText2.text=this.lbText3.text=O3.tr(1111)),o&&(this.lbText0.text=this.lbText1.text=this.lbText2.text=this.lbText3.text=O3.tr(1112)),r&&(this.lbText0.text=this.lbText1.text=this.lbText2.text=this.lbText3.text=O3.tr(1113)),i!=M12.init.gemLimit.value||s||o||r||(this.lbText0.text=this.lbText1.text=this.lbText2.text=this.lbText3.text=O3.tr(1112));var n=parseInt(M12.init.gem1st.value),a=parseInt(M12.init.gem2st.value),h=parseInt(M12.init.gem3st.value);parseInt(M12.init.gemLimit.value);if(e){var p=0,l=M12.gem[e+""]["atk"+(t+1)],c=M12.gem[e+""]["def"+(t+1)],u=M12.gem[e+""]["hp"+(t+1)];if(l&&(p=l),c&&(p=c),u&&(p=u),e<n&&(this.lbNow0.text=p+"",this.lbAdd0.text=O3.tr(1114,s+o+r-parseInt(this.lbNow0.text)+"")),n<=e&&e<a){var d=0;l&&(d=M12.gem[n+""]["atk"+(t+1)]),c&&(d=M12.gem[n+""]["def"+(t+1)]),u&&(d=M12.gem[n+""]["hp"+(t+1)]);var v=O3.tr(1104,d);this.lbNow0.textFlow=M18.HTP.parser(v),this.lbAdd0.visible=!1,this.lbNow1.textColor=16707295,this.lbNow1.text=p+"",this.lbAdd1.visible=!0,this.lbAdd1.text=O3.tr(1114,s+o+r-parseInt(this.lbNow1.text)+"")}if(a<=e&&e<h){d=0;var f=0;l&&(d=M12.gem[n+""]["atk"+(t+1)],f=M12.gem[a+""]["atk"+(t+1)]),c&&(d=M12.gem[n+""]["def"+(t+1)],f=M12.gem[a+""]["def"+(t+1)]),u&&(d=M12.gem[n+""]["hp"+(t+1)],f=M12.gem[a+""]["hp"+(t+1)]);var g=O3.tr(1104,d);this.lbNow0.textFlow=M18.HTP.parser(g),this.lbAdd0.visible=this.lbAdd1.visible=!1;var m=O3.tr(1104,f);this.lbNow1.textFlow=M18.HTP.parser(m),this.lbNow1.textColor=this.lbNow2.textColor=16707295,this.lbNow2.text=p+"",this.lbAdd2.visible=!0,this.lbAdd2.text=O3.tr(1114,s+o+r-parseInt(this.lbNow2.text)+"")}if(h<=e){d=0,f=0;var y=0;l&&(d=M12.gem[n+""]["atk"+(t+1)],f=M12.gem[a+""]["atk"+(t+1)],y=M12.gem[h+""]["atk"+(t+1)]),c&&(d=M12.gem[n+""]["def"+(t+1)],f=M12.gem[a+""]["def"+(t+1)],y=M12.gem[h+""]["def"+(t+1)]),u&&(d=M12.gem[n+""]["hp"+(t+1)],f=M12.gem[a+""]["hp"+(t+1)],y=M12.gem[h+""]["hp"+(t+1)]);g=O3.tr(1104,d);this.lbNow0.textFlow=M18.HTP.parser(g),this.lbAdd0.visible=this.lbAdd1.visible=!1;m=O3.tr(1104,f);this.lbNow1.textFlow=M18.HTP.parser(m);var A=O3.tr(1104,y);if(this.lbNow2.textFlow=M18.HTP.parser(A),this.lbAdd0.visible=this.lbAdd1.visible=this.lbAdd2.visible=!1,this.lbNow1.textColor=this.lbNow2.textColor=this.lbNow3.textColor=16707295,this.lbAdd3.visible=!0,i!=M12.init.gemLimit.value)this.lbNow3.text=p+"",this.lbAdd3.text=O3.tr(1114,s+o+r-parseInt(this.lbNow3.text)+"");else{var b=O3.tr(1104,p);this.lbNow3.textFlow=M18.HTP.parser(b),this.lbAdd3.visible=!1}}}else this.lbNow0.text="0",this.lbAdd0.text=O3.tr(1114,s+o+r+"");null!=this.upIndex&&App.THH33.rEf(this.playComs[this.upIndex],"com"),this.upIndex=t,App.THH33.aUE(this.playComs[this.upIndex],"com",-40,-40)},t.prototype.updateCoin=function(){var t=App.CM.gtM(O6.B98),e=M12.gem[t.forgeData.gd.k+""];if(this.grpChange.visible&&e){var i=App.CM.gtM(O6.B82),s=N12.giC(parseInt(M12.init.gemItem.value));this.lbOwn.text=M18.FF65(s,1);var o=e.needgem;this.lbKAh.textFlow=M18.HTP.parse(O3.tr(4618,M18.FF65(o,1))),this.needGem=o,-1==i.setting.indexOf(L17.A41)&&(t.canGd=o<=s?1:0),o<=s?(this.lbOwn.textColor=this.lbKAh.textColor=_cc.green,this.cbBlank.selected?this.showImgNew(!1):this.showImgNew(!0)):(this.lbOwn.textColor=this.lbKAh.textColor=_cc.red,this.showImgNew(!1))}},t.prototype.startGem=function(){this.isShow=!0;var t=N12.giC(parseInt(M12.init.gemItem.value));if(!this.isDong&&this.needGem>t){var e=this.needGem-t;App.VM.open(O7.G87,M12.init.gemItem.value,e)}else this.isDong?this.isGo=!0:this.grpChange.visible&&(this.isDong=!0,egret.Tween.get(this).wait(200).call(function(){this.apF(M19.A76)},this))},t.prototype.createDong=function(t){App.THH32.aUE(this.playComs[this.index],"lg_qhyh_01",40,40,1)},t.prototype.dong=function(){if(this.isShow){var t=this;this.createDong(t.index);var e=t.index+=1;0==t.endIndex?t.playComs[e]?t.dong():(t.index=0,t.upDataOver(),t.updataUI(),this.isDong=!1):t.endIndex>e?t.dong():(t.upDataOver(),t.updataUI(),this.isDong=!1)}},t.prototype.GS86=function(){var t={t:3,g:App.CM.gtM(O6.B98).forgeData.gm};this.apF(M19.A79,t)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.T5:this.endIndex=t.forgeData.gd.v-1,this.isShow&&this.dong()}switch(e){case P4.V43:this.updateCoin()}t instanceof TG12&&this.updateHong(),t instanceof TF84&&this.ZD61(t)},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.HH24,N4.basePanel)},t}(BaseEuiView);__reflect(EquipGemView.prototype,"EquipGemView");var EquipGreatView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipGreatSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5157)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5158))},t.prototype.open=function(t){switch(this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),t.t){case 0:this.masterData=M12.strength_master;break;case 1:this.masterData=M12.refine_master;break;case 2:this.masterData=M12.forgin_master;break;case 3:this.masterData=M12.gem_master}this.imgText.source=WingLangs.typeEquipMaps[t.t].imgText;var e,i=WingLangs.typeEquipMaps[t.t].name;this.masterData[t.g+1+""]||(e=t.g);var s=WingLangs.typeEquipMaps[t.t];switch(t.g){case 0:this.currentState="no",this.lbStatus.text=O3.tr(1117);var o=this.masterData[t.g+1+""];if(this.lbNow.text=O3.tr(1107,i,o[""+s.lv]),3==t.t)this.lbNowNature.text=O3.tr(1105,o.truedmg,o.relief),this.lbLift.text=O3.tr(1109,M10.gAG("108:"+o.truedmg+";109:"+o.relief));else{this.lbNowNature.text=O3.tr(1108,o.atk,o.def,o.hp);var r="101:"+o.atk+";102:"+o.def+";103:"+o.hp,n=M10.gAG(r);this.lbLift.text=O3.tr(1109,n)}break;case e:this.currentState="big";var a=this.masterData[t.g+""];this.lbStatus.text=O3.tr(1106,t.g),this.lbNow.text=O3.tr(1107,i,a[""+s.lv]),3==t.t?this.lbNowNature.text=O3.tr(1105,a.truedmg,a.relief):this.lbNowNature.text=O3.tr(1108,a.atk,a.def,a.hp);break;default:this.currentState="base",this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5157));var h=this.masterData[t.g+""],p=this.masterData[t.g+1+""];if(this.lbStatus.text=O3.tr(1110,t.g),this.lbNow.text=O3.tr(1107,i,h[""+s.lv]),this.lbNext.text=O3.tr(1107,i,p[""+s.lv]),3==t.t){this.lbNowNature.text=O3.tr(1105,h.truedmg,h.relief),this.lbNextNature.text=O3.tr(1105,p.truedmg,p.relief);var l="108:"+h.truedmg+";109:"+h.relief,c="108:"+p.truedmg+";109:"+p.relief,u=M10.gAG(c)-M10.gAG(l);this.lbLift.text=O3.tr(1109,u)}else{this.lbNowNature.text=O3.tr(1108,h.atk,h.def,h.hp),this.lbNextNature.text=O3.tr(1108,p.atk,p.def,p.hp);l="101:"+h.atk+";102:"+h.def+";103:"+h.hp,c="101:"+p.atk+";102:"+p.def+";103:"+p.hp,u=M10.gAG(c)-M10.gAG(l);this.lbLift.text=O3.tr(1109,u)}}},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){this.apF(M19.A73)},t}(BaseEuiView);__reflect(EquipGreatView.prototype,"EquipGreatView");var EquipLegendUpView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.nowClass=null,i.skinName=EquipLegendUpSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.lbUps=[this.lbUp0,this.lbUp1],this.grpNeeds=[this.grpNeed0,this.grpNeed1,this.grpNeed2,this.grpNeed3,this.grpNeed4,this.grpNeed5,this.grpNeed6,this.grpNeed7,this.grpNeed8,this.grpNeed9],this.lbNeeds=[this.lbNeed0,this.lbNeed1,this.lbNeed2,this.lbNeed3,this.lbNeed4,this.lbNeed5,this.lbNeed6,this.lbNeed7,this.lbNeed8,this.lbNeed9],this.init=L6.init;var t=N12.gID(this.init.legendId.value);this.imgRes.setData(t);var e=N12.gID(pack.I11.COIN+"");this.imgPayCoin.setData(e),this.source=["red_tou_png","red_wuqi_png","red_yifu_png","red_jiezhi_png","red_xianglian_png","red_xie_png","red_jian_png","red_yao_png","red_tui_png","red_shou_png"],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4628)),this.lbFull.textFlow=M18.HTP.parse(O3.tr(6821)),this.btnGetMat.label=O3.tr(4629),this.cbBlank.label=O3.tr(5642)},t.prototype.open=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW45,this);this.btnResonance.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI49,this),this.btnGetMat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO28,this),this.comLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.comRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUpgrade,this),this.cbBlank.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.updataUI()},t.prototype.startUpgrade=function(t){switch(t.target.name){case O3.tr(1144):App.CM.apF(O6.B98,M19.A19,parseInt(this.comLeft.data.pos));break;default:if(14164514==this.lbOwn.textColor){L6.FA94(this.hisId).piecenum,parseInt(this.lbOwn.text);return void App.VM.open(O7.G87,L6.init.legendId.value)}if(14164514==this.lbPayCoin.textColor)return void App.VM.open(O7.F12);var e=this.coms[this.comLeft.data.pos-1];if(!this.isCanOpen(e))return void P18.sDP(O3.tr(1138));if(e.imgNew.visible){for(var i=App.CM.gtM(O6.B98).legendEquip,s=void 0,o=0;o<i.length;o++)if(this.hisId==i[o].i){s=i[o].u;break}this.apF(M19.A29,s,this.cbBlank.selected?2:1)}else P18.sDP(O3.tr(1136))}},t.prototype.ZN40=function(t){if(t.target.data){for(var e,i=App.CM.gtM(O6.B98).legendEquip,s=0;s<i.length;s++){var o=M10.ava[i[s].i.toString()];if(t.target.data.pos==o.pos){e=i[s];break}}var r=P7.copyTab(M10.ava[t.target.data.id.toString()]);r.u=e.u,e&&(r.ats=e.eatr.ats),App.CM.apF(O6.B98,M19.A17,r)}},t.prototype.isShowEquip=function(t){this.imgTou.visible=this.grpNext.visible=t,this.grpNow.horizontalCenter=t?(this.grpNow.left=130,NaN):(this.grpNow.left=NaN,0)},t.prototype.ZW45=function(t){var e=parseInt(t.target.name);this.isShowEquip(this.isCanOpen(this.coms[e])),this.showTopData(this.coms[e].data),this.isCanOpen(this.coms[e])?(this.grpBase.horizontalCenter=this.grpGrade.horizontalCenter=NaN,this.grpBase.left=this.grpGrade.left=0,this.grpAdd0.visible=this.grpAdd1.visible=!0,this.hisId=this.coms[e].data,this.ZI48(this.coms[e].data),this.btnUpgrade.imgNew.visible=this.coms[e].imgNew.visible,this.btnUpgrade.label=O3.tr(1145)):(this.grpAdd0.visible=this.grpAdd1.visible=!1,this.grpBase.left=this.grpGrade.left=null,this.grpBase.horizontalCenter=this.grpGrade.horizontalCenter=0,this.lbNeed.text=O3.tr(1133),this.hisId=L6.equipOneData[e].id,this.coms[e].imgNew.visible?(this.btnUpgrade.imgNew.visible=!0,this.btnUpgrade.label=O3.tr(1144)):(this.btnUpgrade.imgNew.visible=!1,this.btnUpgrade.label=O3.tr(1145)),this.nowClass=null),this.btnUpgrade.name=this.btnUpgrade.label,this.updateAttr(this.hisId),this.updataExpend(this.hisId)},t.prototype.isCanOpen=function(t){return"v1_img_kuang_bai_png"!=t.imgQuality.source},t.prototype.ZS1=function(t){this.isShowEquip(this.isCanOpen(this.coms[t])),this.showTopData(this.coms[t].data),this.isCanOpen(this.coms[t])?(this.grpBase.horizontalCenter=this.grpGrade.horizontalCenter=NaN,this.grpBase.left=this.grpGrade.left=0,this.grpAdd0.visible=this.grpAdd1.visible=!0,this.hisId=this.coms[t].data,this.ZI48(this.coms[t].data),this.btnUpgrade.imgNew.visible=this.coms[t].imgNew.visible,this.btnUpgrade.label=O3.tr(1145)):(this.grpAdd0.visible=this.grpAdd1.visible=!1,this.grpBase.left=this.grpGrade.left=null,this.grpBase.horizontalCenter=this.grpGrade.horizontalCenter=0,this.lbNeed.text=O3.tr(1133),this.hisId=L6.equipOneData[t].id,this.coms[t].imgNew.visible?(this.btnUpgrade.imgNew.visible=!0,this.btnUpgrade.label=O3.tr(1144)):(this.btnUpgrade.imgNew.visible=!1,this.btnUpgrade.label=O3.tr(1145)),this.nowClass=null),this.btnUpgrade.name=this.btnUpgrade.label,this.updateAttr(this.hisId),this.updataExpend(this.hisId)},t.prototype.ZI48=function(t){for(var e=App.CM.gtM(O6.B98).legendEquip,i=[],s=0;s<e.length;s++){for(var o=e[s].eatl,r=e[s].eatr.ats,n=[],a=0;a<o.length;a++)for(var h=0;h<r.length;h++)r[h].k==o[a]&&n.push(r[h]);if(t==e[s].i.toString()){i=n;break}}if(i.length){var p=K18.FJ31(i);if(this.lbNeed.text=K18.dealAttr(p),M10.ava[t].nextequip&&this.grpAdd1.visible)for(s=0;s<this.grpNeeds.length;s++)this.grpNeeds[s].visible=s<i.length,i[s]&&(i[s].id=P7.copyTab(M10.ava[t].rangeid),this.lbNeeds[s].text=L6.FK47(i[s])+"");this.nowClass=i.length-parseInt(L6.init.attrInitNum.value);var l=this.lbComLeftName.text.indexOf("[");-1!=l&&(this.lbComLeftName.text=this.lbComLeftName.text.substr(0,l));var c=this.lbComRightName.text.indexOf("[");-1!=c&&(this.lbComRightName.text=this.lbComRightName.text.substr(0,c)),this.lbComLeftName.text=O3.tr(1143,this.lbComLeftName.text,this.nowClass),this.lbComRightName.text=O3.tr(1143,this.lbComRightName.text,this.nowClass)}},t.prototype.updateAttr=function(t){var e=M10.ava[t+""].attr;this.lbBaseAttr.text=K18.dealAttr(e);var i=M10.ava[t+""].nextequip;if(i){this.lbFull.visible=!1,this.grpChange.visible=!0;for(var s=M10.ava[i+""].attr.split(";"),o=0;o<s.length;o++)this.lbUps[o].text=s[o].split(":")[1]}else this.lbFull.visible=!0,this.grpChange.visible=!1},t.prototype.ZI49=function(){this.apF(M19.A10)},t.prototype.ZO28=function(){this.apF(M19.A18,"base")},t.prototype.close=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW45,this),App.THH33.rEf(this.coms[t],"square_hong"),App.THH32.rEf(this.coms[t],"wdsg_shengzjuex_sa_001");this.btnResonance.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI49,this),this.btnGetMat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO28,this),this.comLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.comRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUpgrade,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.nowClass=null,this.hisId=null,App.THH33.rEf(this.comLeft,"square_hong"),App.THH33.rEf(this.comRight,"square_hong"),App.THH32.rEf(this.comLeft,"wdsg_shengzjuex_sa_001"),App.THH32.rEf(this.comRight,"wdsg_shengzjuex_sa_001")},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98),e=t.canLegendEquip,i=t.canDressLegendEquip;this.updateEquip();for(var s=0;s<this.coms.length;s++)if(e.length){var o=void 0;if(this.coms[s].data&&(o=M10.ava[this.coms[s].data].pos),this.isCanOpen(this.coms[s])&&0<=e.indexOf(o))return this.isShowEquip(!0),this.updateAttr(this.coms[s].data),this.hisId=this.coms[s].data,this.showTopData(this.coms[s].data),this.ZI48(this.coms[s].data),this.updataExpend(this.coms[s].data),this.ZS1(s),this.btnUpgrade.imgNew.visible=this.coms[s].imgNew.visible,0<=i.indexOf((s+1).toString())?this.btnUpgrade.label=O3.tr(1144):this.btnUpgrade.label=O3.tr(1145),void(this.btnUpgrade.name=this.btnUpgrade.label)}else if(this.isCanOpen(this.coms[s]))return this.isShowEquip(!0),this.updateAttr(this.coms[s].data),this.hisId=this.coms[s].data,this.showTopData(this.coms[s].data),this.ZI48(this.coms[s].data),this.updataExpend(this.coms[s].data),this.ZS1(s),this.btnUpgrade.imgNew.visible=this.coms[s].imgNew.visible,0<=i.indexOf((s+1).toString())?this.btnUpgrade.label=O3.tr(1144):this.btnUpgrade.label=O3.tr(1145),void(this.btnUpgrade.name=this.btnUpgrade.label);this.updateAttr(this.coms[0].data),this.isShowEquip(!1),this.showTopData(this.coms[0].data),this.ZI48(this.coms[0].data),this.hisId=this.coms[0].data;var r=parseInt(M10.ava[this.hisId+""].pos)-1;this.ZS1(r)},t.prototype.showTopData=function(t){var e=TG60.getAlvData(),i=M10.ava[t];this.comLeft.imgQuality.source=N12.getBox(i.quality),this.comLeft.imgHead.source=i.icon,this.comLeft.lbClass.text="Lv:"+i.level,this.comLeft.data={},this.comLeft.data.id=i.id,this.comLeft.data.pos=i.pos,this.lbComLeftName.text=i.name,e[i.pos]?(this.comLeft.imgQuality.source="v1_img_kuang_hong2_png",App.THH33.rEf(this.comLeft,"square_hong"),App.THH32.aUE(this.comLeft,"wdsg_shengzjuex_sa_001",40,40,-1)):(App.THH32.rEf(this.comLeft,"wdsg_shengzjuex_sa_001"),App.THH33.aUE(this.comLeft,"square_hong",-51,-50));var s=M10.ava[M10.ava[t+""].nextequip+""];s?(this.comRight.imgQuality.source=N12.getBox(s.quality),this.comRight.imgHead.source=s.icon,this.comRight.lbClass.text="Lv:"+s.level,this.comRight.data={},this.comRight.data.id=s.id,this.comRight.data.pos=s.pos,this.lbComRightName.text=s.name,e[i.pos]?(this.comRight.imgQuality.source="v1_img_kuang_hong2_png",App.THH33.rEf(this.comRight,"square_hong"),App.THH32.aUE(this.comRight,"wdsg_shengzjuex_sa_001",40,40,-1)):(App.THH32.rEf(this.comRight,"wdsg_shengzjuex_sa_001"),App.THH33.aUE(this.comRight,"square_hong",-51,-50))):this.isShowEquip(!1)},t.prototype.updateEquip=function(){for(var t=App.CM.gtM(O6.B98),e=t.canLegendEquip,i=t.nowLegendEquip,s=t.canDressLegendEquip,o=t.legendEquip,r=TG60.getAlvData(),n=0;n<this.coms.length;n++)if(this.coms[n].imgNew.visible=0<=e.indexOf((n+1).toString())||0<=s.indexOf((n+1).toString()),App.THH33.rEf(this.coms[n],"square_hong"),App.THH32.rEf(this.coms[n],"wdsg_shengzjuex_sa_001"),-1==i.indexOf(n+1+""))this.coms[n].data=L6.equipOneData[n].id+"",this.coms[n].lbClass.visible=!1,this.coms[n].imgHead.source=this.source[n],P16.sGF(this.coms[n].imgHead,!0),this.coms[n].imgQuality.source="v1_img_kuang_bai_png";else{this.coms[n].lbClass.visible=!0,P16.sGF(this.coms[n].imgHead,!1);for(var a=0;a<o.length;a++){var h=M10.FD92(o[a].i.toString(),o[a].t);if(n+1==h.pos){this.coms[n].imgHead.source=h.icon,this.coms[n].imgQuality.source=N12.getBox(h.quality),this.coms[n].lbClass.text="Lv:"+h.level,this.coms[n].data=h.id+"",r[h.pos]?(this.coms[n].imgQuality.source="v1_img_kuang_hong2_png",App.THH32.aUE(this.coms[n],"wdsg_shengzjuex_sa_001",40,40,-1)):App.THH33.aUE(this.coms[n],"square_hong",-51,-50);break}}}},t.prototype.updateAddUI=function(t){this.cbBlank.selected=!1,this.updateAttr(t),this.updateEquip(),this.showTopData(t+""),this.ZI48(t+""),this.updataExpend(t)},t.prototype.updataExpend=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.co,i=N12.giC(parseInt(this.init.legendId.value)),s=L6.FA94(t);this.lbOwn.text=i+"",this.lbOwn.textColor=i>=s.piecenum?7716890:14164514,this.lbKAh.text="/"+s.piecenum,this.lbPayCoin.text=s.piececoin+"",this.lbPayCoin.textColor=e>=s.piececoin?7716890:14164514},t.prototype.updateNowUI=function(t){for(var e=t.legendEquip,i=M10.ava[this.hisId+""].pos,s=0;s<e.length;s++){i==M10.ava[e[s].i+""].pos&&(this.hisId=e[s].i)}this.updateAddUI(this.hisId),this.btnUpgrade.imgNew.visible=this.coms[parseInt(M10.ava[this.hisId+""].pos)-1].imgNew.visible,this.btnUpgrade.imgNew.visible||(this.btnUpgrade.label=O3.tr(1145)),this.ZS1(parseInt(M10.ava[this.hisId+""].pos)-1)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.T7:case P4.R54:this.updateNowUI(t);break;case P4.V43:this.updateEquip()}switch(e){case P4.V43:case P4.S88:this.updataExpend(this.hisId),this.updateEquip(),this.btnUpgrade.imgNew.visible=this.coms[parseInt(M10.ava[this.hisId+""].pos)-1].imgNew.visible}},t}(BaseEuiView);__reflect(EquipLegendUpView.prototype,"EquipLegendUpView");var EquipMainView=function(o){function t(t,e){return o.call(this,t,e)||this}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.VM.rgS(O7.HH24,O7.D98,"EquipStrengthView",this.content),App.VM.rgS(O7.HH24,O7.F82,"EquipRefineView",this.content),App.VM.rgS(O7.HH24,O7.E85,"EquipForgingView",this.content),App.VM.rgS(O7.HH24,O7.I11,"EquipGemView",this.content),App.VM.rgS(O7.HH24,O7.E51,"EquipWareSoulView",this.content);var t=[O3.tr(1118),O3.tr(1119),O3.tr(1120),O3.tr(1121),O3.tr(6694)],e=[O7.D98,O7.F82,O7.E85,O7.I11,O7.E51];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnList.scaleX=this.btnList.scaleY=.8,this.btnGroup.bottom=30,this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t);var i=App.CM.gtM(O6.B98);this.ZG74(i);var s=t[0]||O7.D98;this.ZQ23(s)},t.prototype.ZQ23=function(t){App.CM.gtM(O6.B98);switch(t){case O7.D98:this.title=O3.tr(1122),this.btnList.ZM66(t);break;case O7.F82:this.title=O3.tr(1123),this.btnList.ZM66(t);break;case O7.E85:this.title=O3.tr(1124),this.btnList.ZM66(t);break;case O7.I11:this.title=O3.tr(1125),this.btnList.ZM66(t);break;case O7.E51:M12.FL37()?(this.title=O3.tr(6695),this.btnList.ZM66(t)):P18.sDP(O3.tr(6717,M12.wareLv,M12.wareGemLv))}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),P7.FK28()},t.prototype.ZG74=function(t){this.btnList.ZHH58(O7.D98,t.canSd),this.btnList.ZHH58(O7.F82,t.canRd),this.btnList.ZHH58(O7.E85,t.canFd),this.btnList.ZHH58(O7.I11,t.canGd),this.btnList.ZHH58(O7.E51,t.canWear)},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TG58&&this.ZG74(t),t instanceof TG12||t instanceof THH9){var i=App.CM.gtM(O6.B98);this.ZG74(i)}},t}(BasePanelView);__reflect(EquipMainView.prototype,"EquipMainView");var EquipPitchView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.selNum=[],i.allData=[],i.sGN("release_ronglian"),i.skinName=EquipPitchSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=EquipItemRenderer,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5159)),this.btnSure.label=O3.tr(5160)},t.prototype.open=function(){this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureSel,this);var t=App.CM.gtM(O6.B98);this.equipCollection.replaceAll(t.canSmeltDatas),this.num=0,this.lbPitch.text=this.num+"/15"},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureSel,this),this.num=null,this.equipCollection.removeAll()},t.prototype.sureSel=function(){this.apF(M19.A66,this.allData),this.closeSelf()},t.prototype.updataShow=function(t){var e=this.selNum.indexOf(t.index);if(t.sel?(this.num+=1,-1==e&&(this.selNum.push(t.index),this.allData.push(t.allData))):(this.num-=1,-1<e&&(this.selNum.splice(e,1),this.allData.splice(e,1))),15==this.num)for(var i=0;i<this.equipData.numChildren;i++){this.equipData.getChildAt(i).cbOn.enabled=-1!=this.selNum.indexOf(i)}else this.getRelieve();this.lbPitch.text=this.num+"/15"},t.prototype.getRelieve=function(){for(var t=0;t<this.equipData.numChildren;t++){this.equipData.getChildAt(t).cbOn.enabled=!0}},t.prototype.getWell=function(){for(var t=0;t<this.selNum.length;t++){this.equipData.getChildAt(this.selNum[t]).cbOn.selected=!1}this.selNum=[],this.allData=[]},t.prototype.closeSelf=function(){this.getWell(),this.getRelieve(),this.apF(M19.A24)},t}(BaseEuiView);__reflect(EquipPitchView.prototype,"EquipPitchView");var EquipPolishView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.nowClass=null,i.kindConst=3,i.skinName=EquipPolishSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.comAttrs=[this.comAttr0,this.comAttr1,this.comAttr2,this.comAttr3,this.comAttr4,this.comAttr5,this.comAttr6,this.comAttr7,this.comAttr8,this.comAttr9];var t=L6.init.polishAttrItem.value.split(":"),e=N12.gID(L6.init.polishTypeItem.value);this.imgRes.setData(e);var i=N12.gID(t[0]);this.imgRes1.setData(i),this.lbKAh1.text="/"+t[1],this.num=parseInt(t[1]),this.source=["red_tou_png","red_wuqi_png","red_yifu_png","red_jiezhi_png","red_xianglian_png","red_xie_png","red_jian_png","red_yao_png","red_tui_png","red_shou_png"],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4630)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4631)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4630)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4632)),this.btnKind.label=O3.tr(4633),this.btnAttr.label=O3.tr(4634)},t.prototype.open=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW45,this);this.comNow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.btnKind.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startPolisth,this),this.btnAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startPolisth,this),this.updataUI()},t.prototype.close=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW45,this),App.THH33.rEf(this.coms[t],"square_hong"),App.THH32.rEf(this.coms[t],"wdsg_shengzjuex_sa_001");this.comNow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.btnKind.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startPolisth,this),this.btnAttr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startPolisth,this),this.hisId=null,App.THH33.rEf(this.comNow,"square_hong"),App.THH32.rEf(this.comNow,"wdsg_shengzjuex_sa_001")},t.prototype.startPolisth=function(t){var e=parseInt(t.target.name);if(this.hisId){switch(e){case 1:if(14164514!=this.lbOwn.textColor)break;var i=this.kindConst-parseInt(this.lbOwn.text);return void App.VM.open(O7.G87,L6.init.polishTypeItem.value,i);case 2:if(14164514!=this.lbOwn1.textColor)break;i=this.num-parseInt(this.lbOwn1.text);return void App.VM.open(O7.G87,L6.init.polishAttrItem.value.split(":")[0],i)}for(var s,o=App.CM.gtM(O6.B98).legendEquip,r=0;r<o.length;r++)if(this.hisId==o[r].i){s=o[r].u;break}this.apF(M19.A52,s,e)}},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98).canLegendPoEquip;this.updataExpend(),this.updateEquip();for(var e=0;e<this.coms.length;e++)if(t.length){var i=void 0;if(this.coms[e].data&&(i=M10.ava[this.coms[e].data].pos),this.isCanOpen(this.coms[e])&&0<=t.indexOf(i))return this.showTopData(this.coms[e].data),this.hisId=this.coms[e].data,this.updateKind(this.hisId),this.ZS2(this.hisId),void(this.btnAttr.imgNew.visible=this.coms[e].imgNew.visible)}else if(this.isCanOpen(this.coms[e]))return this.showTopData(this.coms[e].data),this.hisId=this.coms[e].data,this.updateKind(this.hisId),this.ZS2(this.hisId),void(this.btnAttr.imgNew.visible=this.coms[e].imgNew.visible);this.lbNowName.text="",this.comNow.lbClass.text="",this.grpAll.visible=!1},t.prototype.ZN40=function(t){if(t.target.data){for(var e,i=App.CM.gtM(O6.B98).legendEquip,s=0;s<i.length;s++){var o=M10.ava[i[s].i.toString()];if(t.target.data.pos==o.pos){e=i[s];break}}var r=P7.copyTab(M10.ava[t.target.data.id.toString()]);r.u=e.u,e&&(r.ats=e.eatr.ats),App.CM.apF(O6.B98,M19.A17,r)}},t.prototype.showTopData=function(t){var e=M10.ava[t],i=TG60.getAlvData();this.comNow.imgQuality.source=N12.getBox(e.quality),this.comNow.imgHead.source=e.icon,this.comNow.lbClass.text="Lv:"+e.level,this.comNow.data={},this.comNow.data.id=e.id,this.comNow.data.pos=e.pos,this.lbNowName.text=e.name,i[e.pos]?(this.comNow.imgQuality.source="v1_img_kuang_hong2_png",App.THH33.rEf(this.comNow,"square_hong"),App.THH32.aUE(this.comNow,"wdsg_shengzjuex_sa_001",40,40,-1)):(App.THH32.rEf(this.comNow,"wdsg_shengzjuex_sa_001"),App.THH33.aUE(this.comNow,"square_hong",-51,-50))},t.prototype.ZW45=function(t){var e=parseInt(t.target.name);this.isCanOpen(this.coms[e])?(this.showTopData(this.coms[e].data),this.hisId=this.coms[e].data,this.updateKind(this.hisId),this.ZS2(this.hisId),this.btnAttr.imgNew.visible=this.coms[e].imgNew.visible):P18.sDP(O3.tr(1138))},t.prototype.ZS2=function(t){for(var e=App.CM.gtM(O6.B98).legendEquip,i=L6.attrlimit[M10.ava[t+""].rangeid+""],s=0;s<e.length;s++)if(t==e[s].i){for(var o=e[s].eatl,r=e[s].eatr.ats,n=[],a=0;a<o.length;a++)for(var h=0;h<r.length;h++)r[h].k==o[a]&&n.push(r[h]);for(var p=0;p<this.comAttrs.length;p++)if(this.comAttrs[p].visible=!!n[p],n[p]){this.comAttrs[p].lbAdd.visible=!1;var l=this.comAttrs[p].imgBg.width,c=L6.FI38(n[p]);this.comAttrs[p].lbtext.text=K18.attribute[n[p].k+""].name+":",this.comAttrs[p].lbNow.text=n[p].v+"",this.comAttrs[p].imgNowAdd.width=this.comAttrs[p].imgOld.width=n[p].v/i[c]*l,n[p].v!=i[c]&&1}}this.getAddClass()},t.prototype.getAddClass=function(){for(var t=0,e=0;e<this.comAttrs.length;e++)this.comAttrs[e].visible&&(t+=1);var i=parseInt(L6.init.attrInitNum.value);this.nowClass=t-i;var s=this.lbNowName.text.indexOf("[");-1!=s&&(this.lbNowName.text=this.lbNowName.text.substr(0,s)),this.lbNowName.text=O3.tr(1143,this.lbNowName.text,this.nowClass)},t.prototype.ZL16=function(t){if(1!=this.type){for(var e=App.CM.gtM(O6.B98).legendEquip,i=L6.attrlimit[M10.ava[t+""].rangeid+""],s=0;s<e.length;s++)if(t==e[s].i){for(var o=e[s].eatl,r=e[s].eatr.ats,n=[],a=0;a<o.length;a++)for(var h=0;h<r.length;h++)r[h].k==o[a]&&n.push(r[h]);for(var p=0;p<this.comAttrs.length;p++)if(this.comAttrs[p].visible=!!n[p],this.comAttrs[p].lbAdd.visible=!1,n[p]){var l=this.comAttrs[p].imgBg.width,c=L6.FI38(n[p]);this.comAttrs[p].lbtext.text=K18.attribute[n[p].k+""].name+":",this.comAttrs[p].lbNow.text=n[p].v+"",this.comAttrs[p].imgOld.width=this.comAttrs[p].imgNowAdd.width,this.comAttrs[p].imgNowAdd.width=n[p].v/i[c]*l;var u=Math.floor((this.comAttrs[p].imgNowAdd.width-this.comAttrs[p].imgOld.width)/l*i[c]);u?(this.comAttrs[p].lbAdd.visible=!0,this.comAttrs[p].lbAdd.text="+"+u):this.comAttrs[p].lbAdd.visible=!1}}this.getAddClass()}else this.ZS2(t)},t.prototype.isCanOpen=function(t){return"v1_img_kuang_bai_png"!=t.imgQuality.source},t.prototype.updateEquip=function(){for(var t=App.CM.gtM(O6.B98),e=t.canLegendPoEquip,i=t.nowLegendEquip,s=t.legendEquip,o=TG60.getAlvData(),r=0;r<this.coms.length;r++)if(this.coms[r].imgNew.visible=0<=e.indexOf((r+1).toString()),App.THH33.rEf(this.coms[r],"square_hong"),App.THH32.rEf(this.coms[r],"wdsg_shengzjuex_sa_001"),-1==i.indexOf(r+1+""))this.coms[r].data=L6.equipOneData[r].id+"",this.coms[r].lbClass.visible=!1,this.coms[r].imgHead.source=this.source[r],this.coms[r].imgQuality.source="v1_img_kuang_bai_png",P16.sGF(this.coms[r].imgHead,!0);else{this.coms[r].lbClass.visible=!0,P16.sGF(this.coms[r].imgHead,!1);for(var n=0;n<s.length;n++){var a=M10.FD92(s[n].i.toString(),s[n].t);if(r+1==a.pos){this.coms[r].imgHead.source=a.icon,this.coms[r].imgQuality.source=N12.getBox(a.quality),this.coms[r].lbClass.text="Lv:"+a.level,this.coms[r].data=a.id+"",o[a.pos]?(this.coms[r].imgQuality.source="v1_img_kuang_hong2_png",App.THH32.aUE(this.coms[r],"wdsg_shengzjuex_sa_001",40,40,-1)):App.THH33.aUE(this.coms[r],"square_hong",-51,-50);break}}}},t.prototype.updateKind=function(t){for(var e=3,i=App.CM.gtM(O6.B98).legendEquip,s=0;s<i.length;s++)if(i[s].i==t){e=i[s].eatr.ats.length;break}this.lbKAh.text="/"+e,this.kindConst=e,this.lbOwn.textColor=parseInt(this.lbOwn.text)>=e?7716890:14164514},t.prototype.updataExpend=function(){var t=N12.giC(parseInt(L6.init.polishTypeItem.value)),e=N12.giC(parseInt(L6.init.polishAttrItem.value.split(":")[0]));this.lbOwn.text=t+"",this.lbOwn1.text=e+"",this.lbOwn1.textColor=e>=this.num?7716890:14164514},t.prototype.updateNowUI=function(){this.updataExpend(),this.updateEquip(),this.hisId&&(this.updateKind(this.hisId),this.btnAttr.imgNew.visible=this.coms[parseInt(M10.ava[this.hisId+""].pos)-1].imgNew.visible)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.V47:this.updateNowUI(),this.ZL16(this.hisId)}switch(e){case P4.V43:this.updateNowUI()}},t}(BaseEuiView);__reflect(EquipPolishView.prototype,"EquipPolishView");var EquipQuenView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.chooseEquip=[],i.nowClass=null,i.skinName=EquipQuenSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.comAttrs=[this.comAttr0,this.comAttr1,this.comAttr2,this.comAttr3,this.comAttr4,this.comAttr5,this.comAttr6,this.comAttr7,this.comAttr8,this.comAttr9];L6.init.polishAttrItem.value.split(":");this.source=["red_tou_png","red_wuqi_png","red_yifu_png","red_jiezhi_png","red_xianglian_png","red_xie_png","red_jian_png","red_yao_png","red_tui_png","red_shou_png"],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5161)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5162)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5163)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5164)),this.lbFull.textFlow=M18.HTP.parse(O3.tr(5165)),this.btnChoose.label=O3.tr(5166),this.btnUpgrade.label=O3.tr(5167)},t.prototype.open=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW45,this);this.comNow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.btnChoose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI50,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUprade,this),this.updataUI()},t.prototype.close=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW45,this),App.THH33.rEf(this.coms[t],"square_hong"),App.THH32.rEf(this.coms[t],"wdsg_shengzjuex_sa_001");this.comNow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.btnChoose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI50,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUprade,this),this.hisId=null,this.chooseEquip=[],this.attrNum=null,this.nowClass=null,App.THH33.rEf(this.comNow,"square_hong"),App.THH32.rEf(this.comNow,"wdsg_shengzjuex_sa_001")},t.prototype.startUprade=function(){if(14164514==this.lbOwn.textColor)P18.sDP(O3.tr(1137));else{for(var t="",e=0;e<this.chooseEquip.length;e++)t+=this.chooseEquip[e]+",";t=t.substring(0,t.length-1);var i=App.CM.gtM(O6.B98).legendEquip,s=void 0;for(e=0;e<i.length;e++)if(this.hisId==i[e].i){s=i[e].u;break}this.apF(M19.A54,s,t)}},t.prototype.ZI50=function(){App.CM.gtM(O6.B98).remLegendEquip;this.apF(M19.A8,{d:this.chooseEquip,id:this.attrNum})},t.prototype.isCanOpen=function(t){return"v1_img_kuang_bai_png"!=t.imgQuality.source},t.prototype.updataUI=function(){this.updateEquip();for(var t=App.CM.gtM(O6.B98).canLegendQuenEquip,e=0;e<this.coms.length;e++)if(t.length){var i=void 0;if(this.coms[e].data&&(i=M10.ava[this.coms[e].data].pos),this.isCanOpen(this.coms[e])&&0<=t.indexOf(i))return this.hisId=parseInt(this.coms[e].data),this.showTopData(this.hisId+""),this.updateKind(this.hisId),this.ZS2(this.hisId),void(this.btnUpgrade.imgNew.visible=this.coms[e].imgNew.visible)}else if(this.isCanOpen(this.coms[e]))return this.hisId=parseInt(this.coms[e].data),this.showTopData(this.hisId+""),this.updateKind(this.hisId),this.ZS2(this.hisId),void(this.btnUpgrade.imgNew.visible=this.coms[e].imgNew.visible);this.lbNowName.text="",this.comNow.lbName="",this.grpAll.visible=!1},t.prototype.ZI46=function(t){this.chooseEquip=t,this.isCanAdd()},t.prototype.ZN40=function(t){for(var e,i=App.CM.gtM(O6.B98).legendEquip,s=0;s<i.length;s++){var o=M10.ava[i[s].i.toString()];if(t.target.data.pos==o.pos){e=i[s];break}}var r=P7.copyTab(M10.ava[t.target.data.id.toString()]);r.u=e.u,e&&(r.ats=e.eatr.ats),App.CM.apF(O6.B98,M19.A17,r)},t.prototype.showTopData=function(t){var e=M10.ava[t],i=TG60.getAlvData();this.comNow.imgQuality.source=N12.getBox(e.quality),this.comNow.imgHead.source=e.icon,this.comNow.lbClass.text="Lv:"+e.level,this.comNow.data={},this.comNow.data.id=e.id,this.comNow.data.pos=e.pos,this.lbNowName.text=e.name,i[e.pos]?(this.comNow.imgQuality.source="v1_img_kuang_hong2_png",App.THH33.rEf(this.comNow,"square_hong"),App.THH32.aUE(this.comNow,"wdsg_shengzjuex_sa_001",40,40,-1)):(App.THH32.rEf(this.comNow,"wdsg_shengzjuex_sa_001"),App.THH33.aUE(this.comNow,"square_hong",-51,-50))},t.prototype.ZW45=function(t){var e=parseInt(t.target.name);this.isCanOpen(this.coms[e])?(this.showTopData(this.coms[e].data),this.hisId=this.coms[e].data,this.chooseEquip=[],this.updateKind(this.hisId),this.ZS2(this.hisId),this.btnUpgrade.imgNew.visible=this.coms[e].imgNew.visible):P18.sDP(O3.tr(1138))},t.prototype.updateKind=function(t){for(var e,i=0,s=App.CM.gtM(O6.B98).legendEquip,o=0;o<s.length;o++)if(s[o].i==t){i=s[o].eatr.ats.length,e=s[o].rn;break}this.attrNum=i;var r=L6.refinecost[i+""];r?(this.lbFull.visible=!1,this.grpChange.visible=!0,this.lbKAh.text="/"+r.costnum,this.lbBack.textFlow=O3.tr2(5156,r.restore),this.lbRate.text=Math.floor(100*(r.baserate+r.riserate*e))+"%",this.isCanAdd()):(this.grpChange.visible=!1,this.lbFull.visible=!0)},t.prototype.isCanAdd=function(){var t=App.CM.gtM(O6.B98).remLegendEquip;if(this.lbOwn.text=this.chooseEquip.length+"",this.lbOwn.textColor=parseInt(this.lbOwn.text)>=parseInt(this.lbKAh.text.charAt(1))?_cc.green:_cc.red,this.lbOwn.textColor==_cc.green)this.btnChoose.imgNew.visible=!1;else{var e=parseInt(this.lbKAh.text.charAt(1))<=t.length;this.btnChoose.imgNew.visible=e}},t.prototype.ZS2=function(t){for(var e=App.CM.gtM(O6.B98).legendEquip,i=L6.attrlimit[M10.ava[t+""].rangeid+""],s=0;s<e.length;s++)if(t==e[s].i){for(var o=e[s].eatl,r=e[s].eatr.ats,n=[],a=0;a<o.length;a++)for(var h=0;h<r.length;h++)r[h].k==o[a]&&n.push(r[h]);for(var p=0;p<this.comAttrs.length;p++)if(this.comAttrs[p].visible=!!n[p],n[p]){var l=this.comAttrs[p].imgBg.width;this.comAttrs[p].imgOld.visible=!0,this.comAttrs[p].lbtext.textColor=7716890;var c=L6.FI38(n[p]);this.comAttrs[p].lbtext.text=K18.attribute[n[p].k+""].name+":",this.comAttrs[p].lbNow.text=n[p].v+"",this.comAttrs[p].name=n[p].k+"",this.comAttrs[p].imgNowAdd.width=this.comAttrs[p].imgOld.width=n[p].v/i[c]*l}}this.getAddClass()},t.prototype.ZW46=function(t){for(var e=App.CM.gtM(O6.B98).legendEquip,i=L6.attrlimit[M10.ava[t+""].rangeid+""],s=0;s<e.length;s++)if(e[s].i==t){for(var o=e[s].eatr.ats,r=[],n=0;n<this.comAttrs.length;n++)this.comAttrs[n].visible&&r.push(this.comAttrs[n].name);for(var a in o)if(-1==r.indexOf(o[a].k+""))for(var h=0;h<this.comAttrs.length;h++)if(!this.comAttrs[h].visible&&o.length>h){var p=L6.FI38(o[a]),l=this.comAttrs[h].imgBg.width;this.comAttrs[h].visible=!0,this.comAttrs[h].lbtext.textColor=15691279,this.comAttrs[h].lbtext.text=K18.attribute[o[a].k+""].name+":",this.comAttrs[h].lbNow.text=o[a].v+"",this.comAttrs[h].name=o[a].k+"",this.comAttrs[h].imgOld.visible=!1,this.comAttrs[h].imgNowAdd.width=o[a].v/i[p]*l}break}this.getAddClass()},t.prototype.getAddClass=function(){for(var t=0,e=0;e<this.comAttrs.length;e++)this.comAttrs[e].visible&&(t+=1);var i=parseInt(L6.init.attrInitNum.value);this.nowClass=t-i;var s=this.lbNowName.text.indexOf("[");-1!=s&&(this.lbNowName.text=this.lbNowName.text.substr(0,s)),this.lbNowName.text=O3.tr(1143,this.lbNowName.text,this.nowClass)},t.prototype.updateEquip=function(){for(var t=App.CM.gtM(O6.B98),e=t.canLegendQuenEquip,i=t.nowLegendEquip,s=t.legendEquip,o=TG60.getAlvData(),r=0;r<this.coms.length;r++)if(this.coms[r].imgNew.visible=0<=e.indexOf((r+1).toString()),App.THH33.rEf(this.coms[r],"square_hong"),App.THH32.rEf(this.coms[r],"wdsg_shengzjuex_sa_001"),-1==i.indexOf(r+1+""))this.coms[r].data=L6.equipOneData[r].id+"",this.coms[r].lbClass.visible=!1,this.coms[r].imgHead.source=this.source[r],this.coms[r].imgQuality.source="v1_img_kuang_bai_png",P16.sGF(this.coms[r].imgHead,!0);else{this.coms[r].lbClass.visible=!0,P16.sGF(this.coms[r].imgHead,!1);for(var n=0;n<s.length;n++){var a=M10.FD92(s[n].i.toString(),s[n].t);if(r+1==a.pos){this.coms[r].imgHead.source=a.icon,this.coms[r].imgQuality.source=N12.getBox(a.quality),this.coms[r].lbClass.text="Lv:"+a.level,this.coms[r].data=a.id+"",o[a.pos]?(this.coms[r].imgQuality.source="v1_img_kuang_hong2_png",App.THH32.aUE(this.coms[r],"wdsg_shengzjuex_sa_001",40,40,-1)):App.THH33.aUE(this.coms[r],"square_hong",-51,-50);break}}}},t.prototype.updateNowUI=function(){this.chooseEquip=[],this.ZW46(this.hisId),this.updateKind(this.hisId),this.updateEquip(),this.btnUpgrade.imgNew.visible=this.coms[parseInt(M10.ava[this.hisId+""].pos)-1].imgNew.visible},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.V49:this.updateNowUI()}switch(e){case P4.V43:this.updateKind(this.hisId),this.updateEquip()}},t}(BaseEuiView);__reflect(EquipQuenView.prototype,"EquipQuenView");var EquipRefineView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.isGo=!1,i.isDong=!1,i.skinName=EquipRefineSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.playComs=[this.com0,this.com2,this.com4,this.com6,this.com8,this.com1,this.com3,this.com5,this.com7,this.com9],this.source=["img_toukui_png","img_wuqi_png","img_yifu_png","img_jiezhi_png","img_xianglian_png","img_xiezi_png","img_hujian_png","img_yaodai_png","img_kuzi_png","img_huwan_png"],this.canSource=["toukui20_png","yifu20_png","xianglian20_png","hujian20_png","kuzi20_png","wuqi20_png","jiezhi20_png","xiezi20_png","yaodai20_png","huwan20_png"];for(var t=0;t<this.coms.length;t++)this.coms[t].imgHead.source=this.source[t];this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4604)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4605)),this.cbBlank.label=O3.tr(4608),this.btnRefine.label=O3.tr(4607)},t.prototype.open=function(){this.grpGreat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnRefine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startRefine,this),this.cbBlank.addEventListener(egret.Event.CHANGE,this.blankImgNew,this);var t=N12.gID(M12.init.refineItem.value);this.imgRes.setData(t),this.updataUI(),egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.equip_refine_btn,!1)},this)},t.prototype.close=function(){s.prototype.close.call(this);for(var t=0;t<this.coms.length;t++)App.THH33.rEf(this.coms[t],"com"),App.THH32.rEf(this.coms[t],"lg_qhyh_01");this.grpGreat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.blankImgNew,this),this.btnRefine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startRefine,this),this.isDong=this.isGo=this.isShow=null,this.upIndex=null,egret.Tween.removeTweens(this),this.needrefine=null},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98),e=t.canShowBox();this.cbBlank.visible=e;for(var i=0;i<this.coms.length;i++)this.coms[i].name=M10.equipTypeData[M19.A96+""][i+""].posname;if(t.forgeData&&1==t.forgeData.rd.k)for(i=0;i<this.playComs.length;i++){var s=this.coms.indexOf(this.playComs[i]);t.forgeData.rd.v-1<=i?this.playComs[i].grpCount.visible=!1:(this.playComs[i].grpCount.visible=!0,this.playComs[i].lbClass.text="+"+t.forgeData.rd.k,M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i])}else for(i=0;i<this.playComs.length;i++){s=this.coms.indexOf(this.playComs[i]);M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i],this.playComs[i].grpCount.visible=!0,t.forgeData.rd.v-1<=i?this.playComs[i].lbClass.text="+"+(t.forgeData.rd.k-1):this.playComs[i].lbClass.text="+"+t.forgeData.rd.k}this.imgHead.source=this.playComs[t.forgeData.rd.v-1].imgHead.source,this.lbName.text=this.playComs[t.forgeData.rd.v-1].name,this.index=t.forgeData.rd.v-1,this.isGou(),this.upDataOver(),this.updateNature(this.index)},t.prototype.blankImgNew=function(){App.CM.apF(O6.B82,L13.A24,L17.A27),TG40.playClickEffect()},t.prototype.isGou=function(){if(this.cbBlank.visible){var t=App.CM.gtM(O6.B82).setting.indexOf(L17.A27);this.cbBlank.selected=-1!=t}},t.prototype.updateHong=function(){this.isGou();var t=this.lbOwn.textColor==_cc.green;t&&this.cbBlank.selected&&(this.showImgNew(!1),this.apF(M19.A80)),t&&!this.cbBlank.selected&&(this.showImgNew(!0),this.apF(M19.A80))},t.prototype.showImgNew=function(t){if(this.grpChange.visible){var e=App.CM.gtM(O6.B98);this.btnRefine.imgNew.visible=t,e.canRd=t?1:0}},t.prototype.upDataOver=function(){this.isDong=!1,this.com9.lbClass.text.slice(1)==M12.init.refineLimit.value&&(this.grpChange.visible=!1);var t=App.CM.gtM(O6.B98),e=t.forgeData.rd.k,i=t.forgeData.rd.v;t.forgeData.rm?(P16.sGF(this.btnGreat.imgGreat,!1),this.lbClass.visible=!0,null==this.oldId?this.oldId=t.forgeData.rm:this.oldId!=t.forgeData.rm&&(this.oldId=t.forgeData.rm,App.THH33.aUE(this.btnGreat,"iconSkill",-50,-60,1),this.apF(M19.A16,ForgeType.RD)),this.lbClass.text=O3.tr(1110,t.forgeData.rm)):(this.lbClass.visible=!1,this.oldId=t.forgeData.rm,P16.sGF(this.btnGreat.imgGreat,!0));var s,o=t.forgeData.rm,r=M12.refine_master;s=r[o+1+""]?r[o+1+""].lvrefine:r[o+""].lvrefine,this.lbRate.textFlow=M18.HTP.parse(O3.tr(4603,e-1,s)),this.updateCoin();for(var n=M12.refine,a=0,h=0,p=0,l=1;l<i;l++)a+=n[e+""]["atk"+l],h+=n[e+""]["def"+l],p+=n[e+""]["hp"+l];if(n[e-1+""])for(var c=i;c<=10;c++)a+=n[e-1+""]["atk"+c],h+=n[e-1+""]["def"+c],p+=n[e-1+""]["hp"+c];var u="101:"+a+";102:"+h+";103:"+p;if(this.scoreLb.text=M10.gAG(u)+"",o){var d=r[o+""],v="101:"+d.atk+";102:"+d.def+";103:"+d.hp;this.scoreLb.text=Number(this.scoreLb.text)+M10.gAG(v)+""}this.isGo&&this.btnRefine.imgNew.visible&&this.grpChange.visible&&(this.startRefine(),this.isGo=!1)},t.prototype.updateNature=function(t){var e,i,s,o=App.CM.gtM(O6.B98).forgeData.rd.k-1;if(M12.refine[o+1+""]&&(e=M12.refine[o+1+""]["atk"+(t+1)],i=M12.refine[o+1+""]["def"+(t+1)],s=M12.refine[o+1+""]["hp"+(t+1)]),this.lbAddAtk.text="",this.lbAddDef.text="",this.lbAddHp.text="",o){var r=M12.refine[o+""]["atk"+(t+1)],n=M12.refine[o+""]["def"+(t+1)],a=M12.refine[o+""]["hp"+(t+1)];r||(this.grpAtk.visible=this.grpAtk.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),n||(this.grpDef.visible=this.grpDef.includeInLayout=!1,this.grpAtk.visible=this.grpAtk.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),a||(this.grpHp.visible=this.grpHp.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpAtk.visible=this.grpAtk.includeInLayout=!0),this.lbAtk.textFlow=M18.HTP.parser(O3.tr(4008,r)),this.lbDef.textFlow=M18.HTP.parser(O3.tr(4007,n)),this.lbHp.textFlow=M18.HTP.parser(O3.tr(4006,a)),e&&(this.lbAddAtk.text=O3.tr(1114,e-r)),i&&(this.lbAddDef.text=O3.tr(1114,i-n)),s&&(this.lbAddHp.text=O3.tr(1114,s-a))}else this.lbAtk.textFlow=M18.HTP.parser(O3.tr(4008,0)),this.lbDef.textFlow=M18.HTP.parser(O3.tr(4007,0)),this.lbHp.textFlow=M18.HTP.parser(O3.tr(4006,0)),this.lbAddAtk.text=O3.tr(1114,e),this.lbAddDef.text=O3.tr(1114,i),this.lbAddHp.text=O3.tr(1114,s),e||(this.grpAtk.visible=this.grpAtk.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),i||(this.grpDef.visible=this.grpDef.includeInLayout=!1,this.grpAtk.visible=this.grpAtk.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),s||(this.grpHp.visible=this.grpHp.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpAtk.visible=this.grpAtk.includeInLayout=!0);null!=this.upIndex&&App.THH33.rEf(this.playComs[this.upIndex],"com"),this.upIndex=t,App.THH33.aUE(this.playComs[this.upIndex],"com",-40,-40)},t.prototype.updateCoin=function(){var t=App.CM.gtM(O6.B98),e=M12.refine[t.forgeData.rd.k+""];if(this.grpChange.visible&&e){var i=App.CM.gtM(O6.B82),s=N12.giC(parseInt(M12.init.refineItem.value));this.lbOwn.text=M18.FF65(s,1);var o=e.needrefine;this.lbKAh.textFlow=M18.HTP.parse(O3.tr(4606,M18.FF65(o,1))),this.needrefine=o,-1==i.setting.indexOf(L17.A27)&&(t.canRd=o<=s?1:0),o<=s?(this.lbOwn.textColor=this.lbKAh.textColor=_cc.green,this.cbBlank.selected?this.showImgNew(!1):this.showImgNew(!0)):(this.lbOwn.textColor=this.lbKAh.textColor=_cc.red,this.showImgNew(!1))}},t.prototype.startRefine=function(){this.isShow=!0;var t=N12.giC(parseInt(M12.init.refineItem.value));if(!this.isDong&&this.needrefine>t){var e=this.needrefine-t;App.VM.open(O7.G87,M12.init.refineItem.value,e)}else this.isDong?this.isGo=!0:this.grpChange.visible&&(this.isDong=!0,egret.Tween.get(this).wait(200).call(function(){this.apF(M19.A50)},this))},t.prototype.createDong=function(t){App.THH32.aUE(this.playComs[this.index],"lg_qhyh_01",40,40,1)},t.prototype.dong=function(){if(this.isShow){var t=this;this.createDong(t.index);var e=t.index+=1;0==t.endIndex?t.playComs[e]?t.dong():(t.index=0,t.upDataOver(),t.updataUI(),this.isDong=!1):t.endIndex>e?t.dong():(t.upDataOver(),t.updataUI(),this.isDong=!1)}},t.prototype.GS86=function(){var t={t:1,g:App.CM.gtM(O6.B98).forgeData.rm};this.apF(M19.A79,t)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.N86:this.endIndex=t.forgeData.rd.v-1,this.isShow&&this.dong()}switch(t instanceof TF84&&this.ZD61(t),e){case P4.V43:this.updateCoin()}t instanceof TG12&&this.updateHong()},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.HH24,N4.basePanel)},t}(BaseEuiView);__reflect(EquipRefineView.prototype,"EquipRefineView");var EquipResolveView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipResolveSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipResolveItem.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipResolveItem.itemRenderer=EquipResolveItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5168)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5169)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5170)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5171)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5172)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(5173)),this.lbStr7.textFlow=M18.HTP.parse(O3.tr(5174)),this.lbStr8.textFlow=M18.HTP.parse(O3.tr(5175)),this.dlg.title=O3.tr(5176)},t.prototype.open=function(t){this.state=t,this.grpVip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GP81,this),this.grpshop1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.grpshop2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.grpshop3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.grpshop4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.dlg.ZM69(this.oCC,this),this.updataUI()},t.prototype.oCC=function(){this.aCF(O6.B98,M19.A15)},t.prototype.close=function(){this.grpVip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GP81,this),this.grpshop1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.grpshop2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.grpshop3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.grpshop4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.grpshopView,this),this.state=null,this.isCanClick=null,this.equipCollection.removeAll()},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98),e=t.remLegendEquip.concat(),i=t.remOrangeEquip.concat();this.currentState=this.state,"base"==this.state?(this.imgRes.source=N12.FJ86(L6.init.legendId.value),this.equipCollection.replaceAll(e)):(this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5816)),this.dlg.title=O3.tr(5817),this.imgRes.source=N12.FJ86(60199),this.equipCollection.replaceAll(i)),this.updataOwnNum(),this.isCanClick=!0},t.prototype.updataOwnNum=function(){var t=0;t="base"==this.state?N12.giC(parseInt(L6.init.legendId.value)):N12.giC(60199),this.lbCount.text=t+""},t.prototype.delEquip=function(t){for(var e=this.equipCollection.source,i=0;i<e.length;i++)if(e[i].u==t){this.equipCollection.removeItemAt(i);break}},t.prototype.GP81=function(){this.aCF(O6.C29,P8.A13)},t.prototype.grpshopView=function(t){var e={sLink:parseInt(t.currentTarget.name)};TG84.goToDlg(e)},t.prototype.uBM=function(t,e){switch(s.prototype.uBM.call(this,t,e),e){case P4.U35:case P4.U39:this.updataUI()}},t}(BaseEuiView);__reflect(EquipResolveView.prototype,"EquipResolveView");var EquipResonanceView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipResonanceSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5177)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5178)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5179)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5180))},t.prototype.open=function(){this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updataUI()},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){this.apF(M19.A9)},t.prototype.updataUI=function(){for(var t=App.CM.gtM(O6.B98).legendEquip,e=0,i=0;i<t.length;i++)e+=M10.ava[t[i].i+""].level;var s=L6.FG11(e);if(this.lbLevel.text=O3.tr(1134,e),this.grpAttr.visible=!!s,s){var o=N13.getData(s.attr);for(i=0;i<o.length;i++)for(var r in o[i]){this.grpAttr.getChildAt(i).text=K18.attribute[r].name+":"+o[i][r]}}var n=t.length;if(this.lbNowAttr.visible=0!=n,this.lbNowAttr.visible){o=L6.equiptotal[n].attr;this.lbNowAttr.text=K18.dealAttr(o)}this.grpNext.visible=n!=L6.equipOneData.length;var a=O3.tr(1135,n);if(this.lbNowNum.textFlow=M18.HTP.parser(a),n!=L6.equipOneData.length){var h=O3.tr(1150,n+1);this.lbNextNum.textFlow=M18.HTP.parser(h);o=L6.equiptotal[n+1].attr;this.lbNextAttr.text=K18.dealAttr(o)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.J82:}switch(e){case P4.V43:}},t}(BaseEuiView);__reflect(EquipResonanceView.prototype,"EquipResonanceView");var EquipRiseTipsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipRiseTipsSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6817)),this.attrData.dataProvider=this.attrDataCollection=new eui.ArrayCollection,this.attrData.itemRenderer=EquipRiseTipsItem},t.prototype.open=function(t){var e=this;egret.Tween.get(this).wait(1e3).call(function(){e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeSelf,e)});var i,s,o,r,n,a=App.CM.gtM(O6.B98).forgeData;switch(t){case ForgeType.SD:i="v1_fonts_qianghuadashi_png",r="v1_fonts_qianghuadashia_png",o=O3.tr(1118),s=M12.strength_master[a.sm].lvstrength,n=a.sm;break;case ForgeType.RD:i="v1_fonts_jingliandashi_png",r="v1_fonts_jingliandashia_png",o=O3.tr(1119),s=M12.refine_master[a.rm].lvrefine,n=a.rm;break;case ForgeType.FD:i="v1_fonts_dualdashi_png",r="v1_fonts_duanzaodishia_png",o=O3.tr(1120),s=M12.forgin_master[a.fm].lvforging,n=a.fm;break;case ForgeType.GD:i="v1_fonts_baoshidashi_png",r="v1_fonts_baoshidashia_png",o=O3.tr(1121),s=M12.gem_master[a.gm].lvgem,n=a.gm}var h=TG60.FE94(t);this.attrDataCollection.replaceAll(h),this.imgText.source=i,this.imgTitle.source=r,this.lbNow.textFlow=M18.HTP.parse(O3.tr(6818,o,s)),this.lbClass.textFlow=M18.HTP.parse(O3.tr(6827,n)),App.THH32.aUE(this.grpEffect,"qmzz_gnkq_yg_aa_001",this.grpEffect.width/2,this.grpEffect.height/2)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),App.THH32.rEf(this.grpEffect,"qmzz_gnkq_yg_aa_001")},t.prototype.closeSelf=function(){this.apF(M19.A11)},t}(BaseEuiView);__reflect(EquipRiseTipsView.prototype,"EquipRiseTipsView");var EquipSmeltView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipSmeltSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=SmeltDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5181)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5182)),this.btnStartMelt.label=O3.tr(5183),this.btnStartLargeMelt.label=O3.tr(5184),this.cbAutoSmelt.label=O3.tr(5185),this.lbClass0.textFlow=M18.HTP.parse(O3.tr(5719))},t.prototype.open=function(){this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnStartMelt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startMelt,this),this.btnStartLargeMelt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS3,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.canMelt=!0,this.updateUI();var t=App.CM.gtM(O6.B98);this.updateAtuo(t),this.ZW47(t),egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.smelt_btn,!1)},this)},t.prototype.close=function(){s.prototype.close.call(this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnStartMelt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startMelt,this),this.btnStartLargeMelt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS3,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.equipCollection.removeAll(),egret.Tween.removeTweens(this),this.equipLength=null,this.eidsNum=null,this.source=null,this.eids=null},t.prototype.autoSmelt=function(){App.CM.gtM(O6.B82).avatarInfo.v<parseInt(M10.init.reformVip.value)?(P18.sDP(O3.tr(1129)),this.cbAutoSmelt.selected=!1):this.apF(M19.A42,this.cbAutoSmelt.selected?1:0),TG40.playClickEffect()},t.prototype.updateUI=function(){if(this.canMelt){var t=App.CM.gtM(O6.B98);this.equipLength=t.canSmeltDatas.length;var e=t.canSmeltDatas.concat();this.addEquipData(e)}},t.prototype.updateAtuo=function(t){this.cbAutoSmelt.selected=!!t.equipData.a},t.prototype.addEquipData=function(t){this.equipCollection.replaceAll(t),this.repData()},t.prototype.startMelt=function(){if(!this.canMelt)return!1;this.eidsNum=0;for(var t="",e=this.equipCollection.source,i=0;i<10;i++)e[i].u&&(t+=e[i].u+",",this.eidsNum+=1);this.eidsNum?(this.canMelt=!1,t=t.substring(0,t.length-1),this.eids=t,this.ZO18(),this.apF(M19.A64,t)):P18.sDP(O3.tr(1152))},t.prototype.ZS3=function(){if(!this.canMelt)return!1;this.eidsNum=0;for(var t="",e=this.equipCollection.source,i=0;i<50;i++)e[i]&&e[i].u&&(t+=e[i].u+",",this.eidsNum+=1);this.eidsNum?(this.canMelt=!1,t=t.substring(0,t.length-1),this.eids=t,this.ZO18(),this.apF(M19.A64,t)):P18.sDP(O3.tr(1152))},t.prototype.ZW47=function(t){var e=t.equipData,i=e.rlv,s=e.rexp;this.lbClass.text=i+"";var o=M10.FL68(i);if(this.proBar.slideDuration=0,o){var r=N13.getData(o.attrs);for(var n in r)for(var a in r[n]){var h=O3.tr(1151,K18.attribute[a].name,r[n][a]);this["lbN"+n].textFlow=M18.HTP.parser(h)}this.proBar.value=s-o.exp}else{this.proBar.value=s;var p=M10.FL68(i+1);r=N13.getData(p.attrs);for(var n in r)for(var a in r[n]){h=O3.tr(1151,K18.attribute[a].name,0);this["lbN"+n].textFlow=M18.HTP.parser(h)}}var l=M10.FL68(i+1);if(l){r=N13.getData(l.attrs);for(var n in r)for(var a in r[n])this["lbD"+n].text=r[n][a];this.proBar.maximum=o?l.exp-o.exp:l.exp,this.proBar.labelDisplay.visible=!0,this.proBar.lbExpProcess.visible=!1}else this.proBar.maximum=this.proBar.value=o.exp,this.proBar.lbExpProcess.visible=!0,this.proBar.lbExpProcess.text=s-o.exp+" / "+o.exp,this.grpNext.visible=!1,this.proBar.labelDisplay.visible=!1},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.U37:this.updateAtuo(t),this.ZW47(t);break;case P4.V45:this.updateUI(),this.ZW47(t);break;case P4.V43:this.updateUI();break;case P4.Y17:this.ZW47(t)}t instanceof TF84&&this.ZD61(t)},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.G64,N4.smelt)},t.prototype.ZO18=function(){10<this.eidsNum&&(this.eidsNum=10);for(var t=0;t<this.eidsNum;t++){var e=this.equipData.getChildAt(t);this.updateSmelt();var i=e.getChildByName("lg_qhyh_01");i&&App.TF56.ZJ66(i),App.THH32.aUE(e,"lg_qhyh_01",55,40,1)}},t.prototype.updateSmelt=function(){for(var t=this.equipCollection.source,e=this.eids.split(","),i=0,s=0;s<e.length;s++)for(var o=t.length-1;0<=o;o--)if(t[o]&&t[o].u&&t[o].u==e[s]){t.splice(o,1),i+=1;break}i&&this.addEquipData(t)},t.prototype.repData=function(){var t=this.equipCollection.source;if(t.length<10)for(var e=t.length;e<10;e++)this.equipCollection.addItem({i:0,u:0});if(0==t[0].i)this.canMelt=!0;else for(e=0;e<t.length;e++)if(0!=t[e].i){egret.Tween.get(this).wait(200).call(function(){this.canMelt=!0,egret.Tween.removeTweens(this)},this);break}},t.prototype.closeSelf=function(){this.apF(M19.A22)},t.prototype.startSmelt=function(t){this.equipCollection.replaceAll(t),this.repData()},t}(BaseEuiView);__reflect(EquipSmeltView.prototype,"EquipSmeltView");var EquipStrengthView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.isGo=!1,i.isDong=!1,i.skinName=EquipStrengthSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3,this.com4,this.com5,this.com6,this.com7,this.com8,this.com9],this.playComs=[this.com0,this.com2,this.com4,this.com6,this.com8,this.com1,this.com3,this.com5,this.com7,this.com9],this.source=["img_toukui_png","img_wuqi_png","img_yifu_png","img_jiezhi_png","img_xianglian_png","img_xiezi_png","img_hujian_png","img_yaodai_png","img_kuzi_png","img_huwan_png"],this.canSource=["toukui20_png","yifu20_png","xianglian20_png","hujian20_png","kuzi20_png","wuqi20_png","jiezhi20_png","xiezi20_png","yaodai20_png","huwan20_png"];for(var t=0;t<this.coms.length;t++)this.coms[t].imgHead.source=this.source[t];this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4598)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4599)),this.btnStrength.label=O3.tr(4601),this.cbBlank.label=O3.tr(4602)},t.prototype.open=function(){this.grpGreat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnStrength.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW48,this),this.cbBlank.addEventListener(egret.Event.CHANGE,this.blankImgNew,this);var t=App.CM.gtM(O6.B98);t=t;var e=N12.gID(M12.init.strengthItem.value);this.imgRes.setData(e),this.updataUI(),egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.forge_strong_btn,!1)},this)},t.prototype.close=function(){s.prototype.close.call(this);for(var t=0;t<this.coms.length;t++)App.THH33.rEf(this.coms[t],"com"),App.THH32.rEf(this.coms[t],"lg_qhyh_01");this.grpGreat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GS86,this),this.btnStrength.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW48,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.blankImgNew,this),this.isDong=this.isGo=this.isShow=null,this.upIndex=null,this.needCoin=null,this.oldId=null,egret.Tween.removeTweens(this)},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.B98),e=t.canShowBox();t.avaEquip;this.cbBlank.visible=e;for(var i=0;i<this.coms.length;i++)this.coms[i].name=M10.equipTypeData[M19.A96+""][i+""].posname;if(t.forgeData&&1==t.forgeData.sd.k)for(i=0;i<this.playComs.length;i++){var s=this.coms.indexOf(this.playComs[i]);t.forgeData.sd.v-1<=i?this.playComs[i].grpCount.visible=!1:(this.playComs[i].grpCount.visible=!0,this.playComs[i].lbClass.text="+"+t.forgeData.sd.k,M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i])}else for(i=0;i<this.playComs.length;i++){s=this.coms.indexOf(this.playComs[i]);M10.FI37(s+1)?this.playComs[i].imgHead.source=M10.FI37(s+1):this.playComs[i].imgHead.source=this.canSource[i],this.playComs[i].grpCount.visible=!0,t.forgeData.sd.v-1<=i?this.playComs[i].lbClass.text="+"+(t.forgeData.sd.k-1):this.playComs[i].lbClass.text="+"+t.forgeData.sd.k}this.imgHead.source=this.playComs[t.forgeData.sd.v-1].imgHead.source,this.lbName.text=this.playComs[t.forgeData.sd.v-1].name,this.index=t.forgeData.sd.v-1,this.isGou(),this.upDataOver(),this.updateNature(this.index)},t.prototype.blankImgNew=function(){this.cbBlank.currentState="",App.CM.apF(O6.B82,L13.A24,L17.A20),TG40.playClickEffect()},t.prototype.isGou=function(){if(this.cbBlank.visible){var t=App.CM.gtM(O6.B82).setting.indexOf(L17.A20);this.cbBlank.selected=-1!=t}},t.prototype.updateHong=function(){this.isGou();var t=this.lbOwn.textColor==_cc.green;t&&this.cbBlank.selected&&(this.showImgNew(!1),this.apF(M19.A80)),t&&!this.cbBlank.selected&&(this.showImgNew(!0),this.apF(M19.A80))},t.prototype.showImgNew=function(t){if(this.grpChange.visible){var e=App.CM.gtM(O6.B98);this.btnStrength.imgNew.visible=t,e.canSd=t?1:0}},t.prototype.upDataOver=function(){this.com9.lbClass.text.slice(1)==M12.init.strengthLimit.value&&(this.grpChange.visible=!1);var t=App.CM.gtM(O6.B98),e=t.forgeData.sd.k,i=t.forgeData.sd.v;t.forgeData.sm?(P16.sGF(this.btnGreat.imgGreat,!1),this.lbClass.visible=!0,null==this.oldId?this.oldId=t.forgeData.sm:this.oldId!=t.forgeData.sm&&(this.oldId=t.forgeData.sm,App.THH33.aUE(this.btnGreat,"iconSkill",-50,-60,1),this.apF(M19.A16,ForgeType.SD)),this.lbClass.text=O3.tr(1110,t.forgeData.sm)):(this.lbClass.visible=!1,this.oldId=t.forgeData.sm,P16.sGF(this.btnGreat.imgGreat,!0));var s,o=t.forgeData.sm,r=M12.strength_master;s=r[o+1+""]?r[o+1+""].lvstrength:r[o+""].lvstrength,this.lbRate.textFlow=M18.HTP.parse(O3.tr(4597,e-1,s)),this.updateCoin();for(var n=M12.strength,a=0,h=0,p=0,l=1;l<i;l++)a+=n[e+""]["atk"+l],h+=n[e+""]["def"+l],p+=n[e+""]["hp"+l];if(n[e-1+""])for(var c=i;c<=10;c++)a+=n[e-1+""]["atk"+c],h+=n[e-1+""]["def"+c],p+=n[e-1+""]["hp"+c];var u="101:"+a+";102:"+h+";103:"+p;if(this.scoreLb.text=M10.gAG(u)+"",o){var d=r[o+""],v="101:"+d.atk+";102:"+d.def+";103:"+d.hp;this.scoreLb.text=Number(this.scoreLb.text)+M10.gAG(v)+""}this.isGo&&this.btnStrength.imgNew.visible&&this.grpChange.visible&&(this.ZW48(),this.isGo=!1)},t.prototype.updateNature=function(t){var e,i,s,o=App.CM.gtM(O6.B98).forgeData.sd.k-1;if(M12.strength[o+1+""]&&(e=M12.strength[o+1+""]["atk"+(t+1)],i=M12.strength[o+1+""]["def"+(t+1)],s=M12.strength[o+1+""]["hp"+(t+1)]),this.lbAddAtk.text="",this.lbAddDef.text="",this.lbAddHp.text="",o){var r=M12.strength[o+""]["atk"+(t+1)],n=M12.strength[o+""]["def"+(t+1)],a=M12.strength[o+""]["hp"+(t+1)];r||(this.grpAtk.visible=this.grpAtk.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),n||(this.grpDef.visible=this.grpDef.includeInLayout=!1,this.grpAtk.visible=this.grpAtk.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),a||(this.grpHp.visible=this.grpHp.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpAtk.visible=this.grpAtk.includeInLayout=!0),this.lbAtk.textFlow=M18.HTP.parser(O3.tr(4008,r)),this.lbDef.textFlow=M18.HTP.parser(O3.tr(4007,n)),this.lbHp.textFlow=M18.HTP.parser(O3.tr(4006,a)),e&&(this.lbAddAtk.text=O3.tr(1114,e-r)),i&&(this.lbAddDef.text=O3.tr(1114,i-n)),s&&(this.lbAddHp.text=O3.tr(1114,s-a))}else this.lbAtk.textFlow=M18.HTP.parser(O3.tr(4008,0)),this.lbDef.textFlow=M18.HTP.parser(O3.tr(4007,0)),this.lbHp.textFlow=M18.HTP.parser(O3.tr(4006,0)),this.lbAddAtk.text=O3.tr(1114,e),this.lbAddDef.text=O3.tr(1114,i),this.lbAddHp.text=O3.tr(1114,s),e||(this.grpAtk.visible=this.grpAtk.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),i||(this.grpDef.visible=this.grpDef.includeInLayout=!1,this.grpAtk.visible=this.grpAtk.includeInLayout=this.grpHp.visible=this.grpHp.includeInLayout=!0),s||(this.grpHp.visible=this.grpHp.includeInLayout=!1,this.grpDef.visible=this.grpDef.includeInLayout=this.grpAtk.visible=this.grpAtk.includeInLayout=!0);null!=this.upIndex&&App.THH33.rEf(this.playComs[this.upIndex],"com"),this.upIndex=t,App.THH33.aUE(this.playComs[this.upIndex],"com",-40,-40)},t.prototype.updateCoin=function(){var t=App.CM.gtM(O6.B98),e=M12.strength[t.forgeData.sd.k+""];if(this.grpChange.visible&&e){var i=App.CM.gtM(O6.B82);this.lbOwn.text=M18.FF65(i.avatarInfo.co,1);var s=e.needcoin;this.lbKAh.textFlow=M18.HTP.parse(O3.tr(4600,M18.FF65(s,1))),this.needCoin=s,-1==i.setting.indexOf(L17.A20)&&(t.canSd=i.avatarInfo.co>=s?1:0),i.avatarInfo.co>=s?(this.lbOwn.textColor=this.lbKAh.textColor=_cc.green,this.cbBlank.selected?this.showImgNew(!1):this.showImgNew(!0)):(this.lbOwn.textColor=this.lbKAh.textColor=_cc.red,this.showImgNew(!1))}},t.prototype.ZW48=function(){this.isShow=!0;var t=App.CM.gtM(O6.B82);!this.isDong&&this.needCoin>t.avatarInfo.co?App.VM.open(O7.F12):this.isDong?this.isGo=!0:this.grpChange.visible&&(this.isDong=!0,egret.Tween.get(this).wait(200).call(function(){this.apF(M19.A27)},this))},t.prototype.dong=function(){if(this.isShow){App.THH32.aUE(this.playComs[this.index],"lg_qhyh_01",40,40,1);var t=this.index+=1;0==this.endIndex?this.playComs[t]?this.dong():(this.index=0,this.upDataOver(),this.updataUI(),this.isDong=!1):this.endIndex>t?this.dong():(this.upDataOver(),this.updataUI(),this.isDong=!1)}},t.prototype.GS86=function(){var t={t:0,g:App.CM.gtM(O6.B98).forgeData.sm};this.apF(M19.A79,t)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.J82:this.endIndex=t.forgeData.sd.v-1,this.isShow&&this.dong()}switch(e){case P4.V43:this.updateCoin()}t instanceof TG12&&this.updateHong(),t instanceof TF84&&this.ZD61(t)},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.HH24,N4.basePanel)},t}(BaseEuiView);__reflect(EquipStrengthView.prototype,"EquipStrengthView");var EquipSuitView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipSuitSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4654)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4655)),this.lbDressText.textFlow=M18.HTP.parse(O3.tr(5729))},t.prototype.open=function(){this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var t,e=App.CM.gtM(O6.B98),i=M10.FI36();if(this.lbAddLevel.text=O3.tr(1110,i),t=0==i?M10.equipsuit[1]:M10.equipsuit[i+""],0==i)this.currentState="no",this.lbNext.text=O3.tr(1147,t.num,t.level),this.lbNextNature.text=this.ZW49(t.addattr),this.lbLift.text=O3.tr(1109,M10.gAG(t.addattr));else if(i==e.avaNum.length)this.currentState="full",this.lbNow.text=O3.tr(1147,t.num,t.level),this.lbNowNature.text=this.ZW49(t.addattr);else{this.currentState="base",this.lbNow.text=O3.tr(1147,t.num,t.level),this.lbNowNature.text=this.ZW49(t.addattr);var s=M10.equipsuit[i+1+""];this.lbNext.text=O3.tr(1147,s.num,s.level),this.lbNextNature.text=this.ZW49(s.addattr);var o=Math.floor(M10.gAG(s.addattr)-M10.gAG(t.addattr));this.lbLift.text=O3.tr(1109,o)}},t.prototype.ZW49=function(t){for(var e="",i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":");s==i.length-1?e+=K18.attribute[o[0]].name+"+"+o[1]:e+=K18.attribute[o[0]].name+"+"+o[1]+"   "}return e},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){this.apF(M19.A36)},t}(BaseEuiView);__reflect(EquipSuitView.prototype,"EquipSuitView");var EquipWareSoulView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EquipWareSoulSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.nowGradeData.dataProvider=this.nowGradeCollection=new eui.ArrayCollection,this.nowGradeData.itemRenderer=EquipNowGradeItem,this.nextGradeData.dataProvider=this.nextGradeCollection=new eui.ArrayCollection,this.nextGradeData.itemRenderer=EquipNextGradeItem,this.nowStarData.dataProvider=this.nowStarCollection=new eui.ArrayCollection,this.nowStarData.itemRenderer=EquipNowStarItem,this.nextStarData.dataProvider=this.nextStarCollection=new eui.ArrayCollection,this.nextStarData.itemRenderer=EquipNextStarItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6684)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(6685)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(6686)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(6687)),this.lbMax.textFlow=M18.HTP.parse(O3.tr(6705)),this.cbBuy.label=O3.tr(6693),this.itemIcon=new ItemIcon,this.iconGp.addChild(this.itemIcon)},t.prototype.open=function(){this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSend,this),this.updataUI()},t.prototype.close=function(){s.prototype.close.call(this),this.btnSend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSend,this)},t.prototype.onClickSend=function(){var t=this;this.onClick&&egret.Tween.get(this.btnSend).wait(200).call(function(){t.onClick=!1}),this.onClick=!0;var e,i,s,o=App.CM.gtM(O6.B98),r=o.forgeData.wl,n=o.forgeData.ws;if(n==M12.starNum){var a=void 0;i=M12.reqItem,s=M12.ware[r].reqitem,e=N12.giC(i);var h=s-e,p=M12.ware[r],l=TG60.FK76(p.reqtype),c="";switch(p.reqtype){case ForgeType.SD:c=O3.tr(1118);break;case ForgeType.RD:c=O3.tr(1119);break;case ForgeType.FD:c=O3.tr(1120);break;case ForgeType.GD:c=O3.tr(1121)}if(l<p.reqlv)return void P18.sDP(O3.tr(6704,c,p.reqlv));var u=App.CM.gtM(O6.B82),d=N15.FA50(i),v=N15.FB92(i),f=u.avatarInfo.bg,g=u.avatarInfo.g;if(o.canWear)a=1;else{if(!this.cbBuy.visible||!this.cbBuy.selected){if(d*h<=f)return void App.VM.open(O7.G87,i,s-e);if(v*h<=g){m=function(){App.VM.open(O7.G87,i,s-e)};return void App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,m)}m=function(){P7.FA78()};return void App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,m)}if(!(d*h<=f)){if(v*h<=g){var m=function(){t.apF(M19.A1,3)};return void App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,m)}var m=function(){P7.FA78()};return void App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,m)}a=2}this.apF(M19.A1,a)}else i=M12.starItem,s=M12.ware[r]["starcost"+(n+1)],o.canWear?this.apF(M19.A3):App.VM.open(O7.G87,i,s-e)},t.prototype.updataItemUI=function(){var t,e,i,s=App.CM.gtM(O6.B98),o=s.forgeData.ws,r=s.forgeData.wl;i=o==M12.starNum?(this.btnSend.label=O3.tr(6692),e=M12.reqItem,M12.ware[r].reqitem):(this.btnSend.label=O3.tr(6691),e=M12.starItem,M12.ware[r]["starcost"+(o+1)]),t=N12.giC(e),this.lbHave.textFlow=i<=t?M18.HTP.parse(O3.tr(6690,t)):M18.HTP.parse(O3.tr(6689,t)),s.canWear?this.btnSend.imgNew.visible=!0:this.btnSend.imgNew.visible=!1},t.prototype.updataUI=function(){for(var t,e,i,s,o=App.CM.gtM(O6.B98),r=this.grpImgSt.numChildren,n=o.forgeData.ws,a=o.forgeData.wl,h=0;h<r;h++){var p=this.grpImgSt.getChildAt(h);p.width=82,p.source=h+1<=n?"v1_img_starx1_png":"v1_img_starx1a_png"}this.updataItemUI(),this.lbLevel.textFlow=M18.HTP.parse(O3.tr(6678,a)),s=n==M12.starNum?(this.btnSend.label=O3.tr(6692),i=M12.reqItem,M12.ware[a].reqitem):(this.btnSend.label=O3.tr(6691),i=M12.starItem,M12.ware[a]["starcost"+(n+1)]);var l=M12.ware[a],c="";switch(l.reqtype){case ForgeType.SD:c=O3.tr(1118);break;case ForgeType.RD:c=O3.tr(1119);break;case ForgeType.FD:c=O3.tr(1120);break;case ForgeType.GD:c=O3.tr(1121)}-1==l.reqitem?(this.lbAchieve.visible=!1,n==M12.starNum?(this.grpHave.visible=!1,this.lbMax.visible=!0):(this.grpHave.visible=!0,this.lbMax.visible=!1)):(this.lbMax.visible=!1,this.lbAchieve.visible=!0,this.lbAchieve.textFlow=M18.HTP.parse(O3.tr(6696,c,l.reqlv))),e={itemData:{data:t=N12.gID(i),ct:0},isBottom:!1},this.itemIcon.data=e,this.lbName.textFlow=M18.HTP.parse(O3.tr(6688,t.name,s));var u=N15.FA50(i),d=N15.FB92(i);this.cbBuy.visible=-1!=u||-1!=d;var v=TG60.FE92();this.nowGradeCollection.replaceAll(v),v=TG60.FD93(),this.nextGradeCollection.replaceAll(v),v=TG60.FG10(),this.nowStarCollection.replaceAll(v),v=TG60.FE93(),this.nextStarCollection.replaceAll(v),this.scoreLb.text=TG60.FHH21()+""},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG58)switch(e){case P4.E83:case P4.D58:this.updataUI()}switch(e){case P4.V43:this.updataItemUI()}},t}(BaseEuiView);__reflect(EquipWareSoulView.prototype,"EquipWareSoulView");var equip,LegendMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.G47,O7.D99,"EquipLegendUpView",this.content),App.VM.rgS(O7.G47,O7.F83,"EquipPolishView",this.content),App.VM.rgS(O7.G47,O7.HH41,"EquipQuenView",this.content),App.VM.rgS(O7.G47,O7.HH10,"EquipAwakeView",this.content);var t=[O3.tr(1130),O3.tr(1131),O3.tr(1132),O3.tr(7343)],e=[O7.D99,O7.F83,O7.HH41,O7.HH10];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t);var i=t[0]||O7.D99;this.ZQ23(i),this.ZG74()},t.prototype.ZQ23=function(t){switch(t){case O7.D99:this.title=O3.tr(1130),this.btnList.ZM66(t);break;case O7.F83:this.title=O3.tr(1131),this.btnList.ZM66(t);break;case O7.HH41:App.CM.gtM(O6.B98).equipData.cr?(this.title=O3.tr(1132),this.btnList.ZM66(t)):P18.sDP(O3.tr(1142));break;case O7.HH10:if(App.CM.gtM(O6.B98).equipData.ia)this.title=O3.tr(7343),this.btnList.ZM66(t);else{var e=L6.gIV("awakenUnlock");P18.sDP(O3.tr(7348,e))}}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B98);this.btnList.ZHH58(O7.D99,t.legAdd),this.btnList.ZHH58(O7.F83,t.legPo),this.btnList.ZHH58(O7.HH41,t.legQuen),this.btnList.ZHH58(O7.HH10,t.legAwake)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t}(BasePanelView);__reflect(LegendMainView.prototype,"LegendMainView"),function(t){var e=function(){};(equip||(equip={})).EquipVo=e,__reflect(e.prototype,"equip.EquipVo")}();var L7=function(){function l(){}return l.FK35=function(t){l.init=t.escort_init,l.award=t.escort_award,this.doubleTime=this.ZV6()},l.gIV=function(t){var e=void 0;return l.init?e=l.init[t].value:e},l.FI39=function(t){for(var e=void 0,i=l.gIV("name").split(","),s=0;s<i.length;s++){if(Number(i[s].split(":")[0])==t)return e=i[s].split(":")[1]}return e},l.FHH24=function(){for(var t=[],e=l.gIV("name").split(","),i=0;i<e.length;i++){var s=Number(e[i].split(":")[0]);t.push(s)}return t},l.FL67=function(t){for(var e in l.award)if(parseInt(e)==t)return l.award[e].escortaward},l.FG12=function(t){for(var e in l.award)if(parseInt(e)==t)return l.award[e].interceptaward},l.FD94=function(t){for(var e in l.award)if(parseInt(e)==t)return l.award[e].interceptloss},l.FC28=function(t,e,i,s,o){var r=l.FD94(i),n=Number(t),a=Number(e);if(""==r||null==r)return 1==o?2*a:a;for(var h=r.split(";"),p=0;p<h.length;p++)if(n==Number(h[p].split(":")[0])){a-=Number(h[p].split(":")[1])*s;break}return 1==o&&(a*=2),a<0?0:a},l.ZV6=function(){var t=[];if(!this.init)return t;var e=this.init.doubleTime.value,i=M18.FL28(e,";",",");for(var s in i){var o={pt:P6.FM3(i[s][0]),vt:P6.FM3(i[s][1])};t.push(o)}return t},l}();__reflect(L7.prototype,"L7");var L16=function(){function t(){}return t.A30=10001,t.A18=10002,t.A23=10003,t.A31=10004,t.A32=10005,t.A4=10006,t.A5=10007,t.A26=10008,t.A27=10009,t.A33=10010,t.A34=10011,t.A9=10012,t.A10=10013,t.A24=10014,t.A25=10015,t.A11=10016,t.A12=10017,t.A19=10018,t.A20=10019,t.A28=10020,t.A29=10021,t.A13=10022,t.A14=10023,t.A21=10024,t.A17=10025,t.A2=10026,t.A1=10027,t.A6=10028,t.A3=10029,t.A15=10030,t.A7=10031,t.A16=10032,t.A8=10033,t.A22=10034,t}();__reflect(L16.prototype,"L16");var TD41=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.G78,"EscortMainView",t,K17.UI_Main_TOP),t.rgF(L16.A31,t.GS96,t),t.rgF(L16.A32,t.GS97,t),t.rgF(L16.A13,t.GJ49,t),t.rgF(L16.A14,t.GJ50,t),App.VM.register(O7.I16,"EscortGoView",t,K17.UI_Main_TOP),t.rgF(L16.A21,t.GN25,t),t.rgF(L16.A17,t.GL27,t),t.rgF(L16.A33,t.GS94,t),t.rgF(L16.A34,t.GS95,t),t.rgF(L16.A9,t.GU77,t),t.rgF(L16.A10,t.GU78,t),t.rgF(L16.A26,t.GW28,t),t.rgF(L16.A27,t.GW29,t),App.VM.register(O7.E94,"EscortFinishView",t,K17.UI_Popup),t.rgF(L16.A2,t.GF74,t),t.rgF(L16.A1,t.GE58,t),t.rgF(L16.A24,t.GP14,t),t.rgF(L16.A25,t.GP15,t),App.VM.register(O7.F92,"EscortAwardView",t,K17.UI_Popup),t.rgF(L16.A11,t.GP12,t),t.rgF(L16.A12,t.GP13,t),App.VM.register(O7.E95,"EscortReportView",t,K17.UI_Popup),t.rgF(L16.A6,t.GQ96,t),t.rgF(L16.A3,t.GP17,t),t.rgF(L16.A4,t.GHH59,t),t.rgF(L16.A5,t.GHH60,t),App.VM.register(O7.F93,"EscortInterView",t,K17.UI_Popup),t.rgF(L16.A15,t.GS98,t),t.rgF(L16.A7,t.GQ97,t),t.rgF(L16.A19,t.GN21,t),t.rgF(L16.A20,t.GN22,t),App.VM.register(O7.F94,"EscortFightView",t,K17.UI_Popup),t.rgF(L16.A16,t.GS71,t),t.rgF(L16.A8,t.GQ72,t),t.rgF(L16.A28,t.GQ94,t),t.rgF(L16.A29,t.GQ95,t);var e=new TG17(t);return e.aLV(O7.G78),e.aLV(O7.I16),e.aLV(O7.E94),e.aLV(O7.E95),e.aLV(O7.F93),e.aLV(O7.F94),e.aLV(O7.E50),e.aLV(O7.I63),e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.HH98),e.aLV(O7.I3),e.aLV(O7.HH47),e.aLV(O7.HH23),t.escortProxy=new TG18(t),t.rgF(L16.A30,t.GS93,t),t.rgF(L16.A23,t.GP16,t),t.rgF(L16.A18,t.GN23,t),t.rgF(L16.A22,t.GN24,t),t}return __extends(t,i),t.prototype.GN21=function(t){App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.escortProxy.GN21(t))},t.prototype.GN22=function(t){if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void this.ZT94(O6.B99,N1.A5);if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var e=P7.isGetView(O7.G78);App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,type:P15.A8,needResult:!0,isAuto:e},function(t){App.VM.open(O7.G78)},this)}},t.prototype.GQ94=function(t){App.CM.gtM(O6.B99).canReqAtk&&(this.ZT94(O6.B99,N1.A5,!1),this.escortProxy.GQ94(t))},t.prototype.GQ95=function(t){if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void this.ZT94(O6.B99,N1.A5);if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var e=this.gtM();e.in=t.body.in,e.notify();var i=P7.isGetView(O7.G78);App.CM.apF(O6.B86,L16.A17),App.CM.apF(O6.B86,L16.A8),App.VM.close(O7.G78),App.VM.close(O7.HH23),App.VM.close(O7.B64),App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,type:P15.A8,needResult:!0,isAuto:i},function(t){App.VM.open(O7.G78)},this)}},t.prototype.GJ49=function(){this.escortProxy.GJ49()},t.prototype.GJ50=function(t){if(200==t.head.state){var e=this.gtM();e.initTaskData(t.body),e.notify(P4.Q31)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH59=function(){this.escortProxy.ZO30()},t.prototype.GHH60=function(t){if(200==t.head.state){var e=this.gtM();e.ZS5(t.body),e.notify(P4.O30)}else P18.sDP(O3.tr(5671))},t.prototype.GP12=function(){this.escortProxy.GP12()},t.prototype.GP13=function(t){if(200==t.head.state){t.body.ob&&P5.sIs(t.body.ob);var e=this.gtM();e.e=new escort.EscortVo(t.body.e),e.notify(P4.Q29)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GS93=function(t){var e=this.gtM();e.e=new escort.EscortVo(t.body.e),e.gn=t.body.gn,e.notify(P4.W44),App.VM.open(O7.F92)},t.prototype.GW28=function(){this.escortProxy.GW28()},t.prototype.GW29=function(t){if(200==t.head.state){var e=this.gtM();e.e=new escort.EscortVo(t.body.e),e.en=t.body.en,e.notify(P4.V81)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP14=function(){this.escortProxy.GP14()},t.prototype.GP15=function(t){200==t.head.state?this.gtM().notify(P4.U73):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GS94=function(t){this.escortProxy.GS94(t)},t.prototype.GS95=function(t){if(200==t.head.state){var e=this.gtM();e.e.qua=t.body.qua,e.notify(P4.W48)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU77=function(){this.escortProxy.GU77()},t.prototype.GU78=function(t){if(200==t.head.state){var e=this.gtM();e.e.qua=t.body.qua,e.notify(P4.Q27)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GS96=function(){return this.escortProxy.GS96()},t.prototype.GS97=function(t){if(200==t.head.state){var e=this.gtM();e.ZS4(t.body),e.notify(P4.W46)}else P18.sDP(O3.tr(5671))},t.prototype.GP16=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.ZS4(t.body),e.notify(P4.W46)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN23=function(t){if(200==t.head.state){var e=this.gtM();t.body&&(e.addReports(t.body.rs),e.redNum=null!=t.body.rr?t.body.rr:e.redNum),e.notify(P4.T61)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN24=function(t){if(200==t.head.state){var e=this.gtM();t.body&&(e.dou=t.body.dou),e.notify(P4.T64)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN25=function(){App.VM.open(O7.I16)},t.prototype.GL27=function(){App.VM.close(O7.I16)},t.prototype.GF74=function(t){App.VM.open(O7.E94,t)},t.prototype.GE58=function(){App.VM.close(O7.E94)},t.prototype.GQ96=function(){App.VM.open(O7.E95)},t.prototype.GP17=function(){App.VM.close(O7.E95)},t.prototype.GS98=function(){App.VM.open(O7.F93)},t.prototype.GQ97=function(){App.VM.close(O7.F93)},t.prototype.GS71=function(t){App.VM.open(O7.F94,t)},t.prototype.GQ72=function(){App.VM.close(O7.F94)},t}(TE11);__reflect(TD41.prototype,"TD41");var TG17=function(i){function t(t){var e=i.call(this,t)||this;return e.reports={},e.needDoubleTip=!0,e}return __extends(t,i),t.prototype.ZS4=function(t){this.e=new escort.EscortVo(t.e),this.en=t.en,this.in=t.in,this.dou=t.dou,this.gn=t.gn,this.st=t.st,this.redNum=t.rr},t.prototype.ZS5=function(t){this.addReports(t.rs),this.redNum=null!=t.rr?t.rr:this.redNum},t.prototype.initTaskData=function(t){this.addTaskList(t.ts)},t.prototype.addTaskList=function(t){if(this.taskList=[],null!=t&&0<t.length)for(var e=0;e<t.length;e++){var i=t[e],s=new escort.EscortTaskVo(i);this.taskList.push(s)}},t.prototype.getTask=function(t){for(var e=0;e<this.taskList.length;e++){var i=this.taskList[e];if(t==i.aid)return i}return null},t.prototype.addReports=function(t){if(null!=t&&0<t.length)for(var e=0;e<t.length;e++){var i=t[e],s=new escort.EscortReportVo(t[e]);this.reports[i.u]=s}},t.prototype.ZL17=function(t){this.sCurOpenReport=t},t.prototype.ZL18=function(){return this.reports[this.sCurOpenReport]},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t.prototype.ZF28=function(t,e){if(null==this.pointDatas)return null;if(null==this.pointDatas[t])return null;var i=this.pointDatas[t][e];return null==i?[]:(i.sort(function(t,e){return t.x-e.x}),i)},t}(TG79);__reflect(TG17.prototype,"TG17");var TG18=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.W44,e.endPush,e),e.rSM(P4.T61,e.GX7,e),e.rSM(P4.U71,e.resetPush,e),e.rSM(P4.T64,e.doublePush,e),e}return __extends(t,i),t.prototype.doublePush=function(t){this.apF(L16.A22,t)},t.prototype.resetPush=function(t){this.apF(L16.A23,t)},t.prototype.GX7=function(t){this.apF(L16.A18,t)},t.prototype.endPush=function(t){this.apF(L16.A30,t)},t.prototype.GS96=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W45,body:{}};s.rSMO(P4.W46,function(t){s.apF(L16.A32,t),e("加载个人护送数据完成")},s),s.sSM(i)})},t.prototype.GP14=function(){var t={type:P4.U72,body:{}};this.rSMO(P4.U73,this.GP15,this),this.sSM(t)},t.prototype.GP15=function(t){this.apF(L16.A25,t)},t.prototype.GS94=function(t){var e={type:P4.W47,body:t};this.rSMO(P4.W48,this.GS95,this),this.sSM(e)},t.prototype.GS95=function(t){this.apF(L16.A34,t)},t.prototype.GU77=function(){var t={type:P4.Q26,body:{}};this.rSMO(P4.Q27,this.GU78,this),this.sSM(t)},t.prototype.GU78=function(t){this.apF(L16.A10,t)},t.prototype.GW28=function(){var t={type:P4.V80,body:{}};this.rSMO(P4.V81,this.GW29,this),this.sSM(t)},t.prototype.GW29=function(t){this.apF(L16.A27,t)},t.prototype.GP12=function(){var t={type:P4.Q28,body:{}};this.rSMO(P4.Q29,this.GP13,this),this.sSM(t)},t.prototype.GP13=function(t){this.apF(L16.A12,t)},t.prototype.ZO30=function(){var t={type:P4.O29,body:{}};this.rSMO(P4.O30,this.ZO31,this),this.sSM(t)},t.prototype.ZO31=function(t){this.apF(L16.A5,t)},t.prototype.GJ49=function(){var t={type:P4.Q30,body:{}};this.rSMO(P4.Q31,this.GJ50,this),this.sSM(t)},t.prototype.GJ50=function(t){this.apF(L16.A14,t)},t.prototype.GQ94=function(t){var e={type:P4.V82,body:t};this.rSMO(P4.V83,this.GQ95,this),this.sSM(e)},t.prototype.GQ95=function(t){this.apF(L16.A29,t)},t.prototype.GN21=function(t){var e={type:P4.T62,body:t};this.rSMO(P4.T63,this.GN22,this),this.sSM(e)},t.prototype.GN22=function(t){this.apF(L16.A20,t)},t}(TG80);__reflect(TG18.prototype,"TG18");var TG61=function(){function t(){}return t.getReNum=function(){var t=0,e=App.CM.gtM(O6.B86);if(-1==e.st)return t;var i=App.CM.gtM(O6.B82),s=L7.gIV("escortNum");return(null==e.en?0:e.en)<s&&i.avatarInfo.l>=TB86.FE53(ActivityHallType.ESCORT)&&t++,null!=e.redNum&&(t+=e.redNum),t},t.FK77=function(t){switch(t){case 2:return"wdsg_bc_cldh_lv2_01_png";case 3:return"wdsg_bc_cldh_l2_01_png";case 4:return"wdsg_bc_cldh_z2_01_png";case 5:return"wdsg_bc_cldh_c2_01_png";case 6:return"wdsg_bc_cldh_h2_01_png"}},t.FI40=function(t){return 50+180*(t-1)},t.FK78=function(t){switch(t){case 50:return 1;case 230:return 2;case 410:return 3}},t.FI41=function(t,e){var i=e-230;if(0<=i)return 0;var s=-180-i;if(s<=0)return 0;var o=(t+180)/20;return 1e3*Math.ceil(s/o)},t.FHH25=function(t,e){var i=(t-e)/((t+180)/20);return 1e3*Math.ceil(i)},t}();__reflect(TG61.prototype,"TG61");var EscortReSkinView=function(e){function t(){var t=e.call(this)||this;return t.skinName=EscortReSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){var t=this.data.name,e=this.data.suc;this.lbLeft.textFlow=(new egret.HtmlTextParser).parser(O3.tr(1205,t)),1==parseInt(e)?(this.lbRight.textColor=7716890,this.lbRight.text=O3.tr(1218)):(this.lbRight.textColor=14164514,this.lbRight.text=O3.tr(1219))},t}(eui.ItemRenderer);__reflect(EscortReSkinView.prototype,"EscortReSkinView");var ItemEscortConfView=function(e){function t(){var t=e.call(this)||this;return t.skinName=EscortListSkin,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.close=function(){this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource},t.prototype.dataChanged=function(){1==this.data.bgImg?this.imght.visible=!0:this.imght.visible=!1,1==this.data.double?this.imgDou.visible=!0:this.imgDou.visible=!1,this.lbLeft.$setText(this.data.name),this.ZO29(),this.imgEscort.source=TG61.FK77(this.data.qua),this.ZJ81(this.data.qua,this.data.double)},t.prototype.ZJ81=function(t,e){var i=L7.FL67(t),s=M18.FL28(i,";",":"),o=[],r=!0;P7.FM14()&&(r=!1);for(var n=0;n<s.length;n++){var a={itemData:{data:N12.gID(s[n][0]),ct:s[n][1]},isBottom:r,scale:.9};o.push(a)}this.dataSource.replaceAll(o)},t.prototype.ZO29=function(){var t=this.data.qua;this.lbLeft.textColor=TG74.FI86(t)},t}(eui.ItemRenderer);__reflect(ItemEscortConfView.prototype,"ItemEscortConfView");var ItemEscortReport=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemInterceptSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnFight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){this.btnFight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.dataChanged=function(){this.lbTime.textFlow=M18.HTP.parse(O3.tr(4385,P6.FJ11(1e3*this.data.time,2))),this.btnFight.label=O3.tr(4386),0==this.data.m?this.initRevege():(this.initSuc(),this.btnFight.visible=!1,this.lbSuc.visible=!0)},t.prototype.initSuc=function(){var t=this.data.name,e=L7.FI39(this.data.qua),i=this.FI86(this.data.qua),s=O3.tr(1215,t,i,e);this.lbTitle.textFlow=M18.HTP.parser(s);var o=this.data.suc;1==parseInt(o)?(this.lbSuc.textColor=33045,this.lbSuc.text=O3.tr(1206)):(this.lbSuc.textColor=16711680,this.lbSuc.text=O3.tr(1207))},t.prototype.initRevege=function(){var t=this.data.name,e=L7.FI39(this.data.qua),i=this.FI86(this.data.qua),s=O3.tr(1208,t,i,e);this.lbTitle.textFlow=M18.HTP.parser(s);var o=this.data.suc;1==parseInt(o)?(this.btnFight.visible=!1,this.lbSuc.visible=!0,this.lbSuc.textColor=33045,this.lbSuc.text=O3.tr(1218)):(this.btnFight.visible=!0,this.lbSuc.visible=!1),1==this.data.re?(P16.sGF(this.btnFight,!0),this.btnFight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)):P16.sGF(this.btnFight,!1)},t.prototype.oCI=function(){App.CM.gtM(O6.B86).ZL17(this.data.u),App.CM.apF(O6.B86,L16.A15)},t.prototype.FI86=function(t){return TG74.FI86(t)},t}(eui.ItemRenderer);__reflect(ItemEscortReport.prototype,"ItemEscortReport");var EscortAwardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EscortRewardSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5129)),this.btnGo1.label=O3.tr(5130),this.lbTitle0.textFlow=M18.HTP.parse(O3.tr(5798)),this.lbRep.textFlow=M18.HTP.parse(O3.tr(5799))},t.prototype.initData=function(){},t.prototype.initReport=function(){this.listView.itemRenderer=EscortReSkinView,this.listData=new eui.ArrayCollection,this.listView.dataProvider=this.listData,this.scList.viewport=this.listView;var t=App.CM.gtM(O6.B86).e.reports;this.listData.replaceAll(t),0<t.length?(this.lbRep.$setVisible(!1),this.gpRep.$setVisible(!0)):(this.lbRep.$setVisible(!0),this.gpRep.$setVisible(!1))},t.prototype.initReward=function(){this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource;var t=App.CM.gtM(O6.B86),e=t.e.qua,i=t.e.dou,s=t.e.hitTime,o=L7.FL67(e),r=M18.FL28(o,";",":"),n=[],a=!0;P7.FM14()&&(a=!1);for(var h=0;h<r.length;h++){var p={itemData:{data:N12.gID(r[h][0]),ct:L7.FC28(r[h][0],r[h][1],e,s,i)},isBottom:a,scale:.9};n.push(p)}this.dataSource.replaceAll(n)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.scList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGo1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B86).e.qua;this.ZO29(i),this.initReward(),this.initReport(),this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.scList.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGo1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.dataSource.removeAll(),this.listData.removeAll()},t.prototype.closeSelf=function(){this.apF(L16.A11),App.VM.close(O7.F92)},t.prototype.ZO29=function(t){var e=L7.FI39(t);this.lbOne.textColor=TG74.FI86(t),this.lbOne.$setText(e),this.imgCar.source=TG61.FK77(t)},t.prototype.endScroller=function(){this.scList.validateNow(),this.upArrow.visible=!(this.scList.viewport.scrollV<=0),this.scList.viewport.contentHeight<=this.scList.height?this.btnArrow.visible=!1:this.scList.height+this.scList.viewport.scrollV>=this.scList.viewport.contentHeight?this.btnArrow.visible=!1:this.btnArrow.visible=!0},t}(BaseEuiView);__reflect(EscortAwardView.prototype,"EscortAwardView");var EscortFightView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EscortInterceptSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5131)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5132)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5133)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5134)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5135)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(5136)),this.btnFight.label=O3.tr(5137)},t.prototype.initData=function(){},t.prototype.initAvaData=function(){var t=App.CM.gtM(O6.B86),e=L7.gIV("interceptNum");this.lbIn.text=e-t.in+"/"+e,this.lbName.$setText(this.taskVo.name),this.lbScore.$setText(this.taskVo.score+""),this.lbLname.$setText(this.taskVo.lname),this.ZO29(this.taskVo.qua)},t.prototype.initReward=function(){this.listView.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listView.dataProvider=this.dataSource;for(var t=this.taskVo.qua,e=L7.FG12(t),i=M18.FL28(e,";",":"),s=[],o=App.CM.gtM(O6.B86).dou,r=0;r<i.length;r++){var n=N12.gID(i[r][0]),a=Number(i[r][1]);1==o&&(a*=2);var h={itemData:{data:n,ct:a},isBottom:!0};s.push(h)}this.dataSource.replaceAll(s)},t.prototype.open=function(t){this.taskVo=t,this.initAvaData(),this.initReward(),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnFight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fight,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnFight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.fight,this),this.dataSource.removeAll(),this.taskVo=null},t.prototype.fight=function(){var t=App.CM.gtM(O6.B86);if(Number(L7.gIV("interceptNum"))-t.in<=0)P18.sDP(O3.tr(1217));else{var e={tid:this.taskVo.aid};this.apF(L16.A28,e)}},t.prototype.closeSelf=function(){App.VM.close(O7.F94)},t.prototype.ZO29=function(t){var e=L7.FI39(t);this.lbOne.textColor=TG74.FI86(t),this.lbOne.$setText(e),this.imgCar.source=TG61.FK77(t)},t}(BaseEuiView);__reflect(EscortFightView.prototype,"EscortFightView");var EscortFinishView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EscortFinishSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5138)),this.btnOk.label=O3.tr(5139),this.btnCal.label=O3.tr(5140),this.cbRed.label=O3.tr(8183)},t.prototype.initData=function(){},t.prototype.open=function(t){this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.escortOk,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnCal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.type=t,this.setLabel(),this.updateChx()},t.prototype.updateChx=function(){if(3==this.type){var t=App.CM.gtM(O6.B86);this.cbRed.visible=!0,this.cbRed.selected=!t.needDoubleTip}else this.cbRed.visible=!1},t.prototype.setLabel=function(){switch(this.type){case 1:this.setFinish();break;case 2:this.setGoldTip();break;case 3:this.setDouTip()}},t.prototype.setDouTip=function(){this.lbOne.$setText(O3.tr(1212));var t=L7.gIV("doubleTime").split(";"),e=t[0].split(",")[0]+"-"+t[0].split(",")[1],i=t[1].split(",")[0]+"-"+t[1].split(",")[1];this.lbTwo.$setText(O3.tr(1213,e,i))},t.prototype.setGoldTip=function(){this.lbTwo.$setText(O3.tr(1204));var t=L7.gIV("onekeyCost"),e=parseInt(t),i=N12.giC(pack.I11.BIND_GOLD);this.lbOne.textFlow=(new egret.HtmlTextParser).parser(O3.tr(8182,e-i))},t.prototype.setFinish=function(){this.lbTwo.$setText(O3.tr(1204));var t=L7.gIV("expediteCost"),e=parseInt(t),i=N12.giC(pack.I11.BIND_GOLD);this.lbOne.textFlow=(new egret.HtmlTextParser).parser(O3.tr(8192,e-i))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.escortOk,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnCal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.type=null},t.prototype.escortOk=function(t){switch(this.type){case 1:this.apF(L16.A24);break;case 2:this.refreshGold();break;case 3:this.cbRed.selected&&App.CM.apF(O6.B82,L13.A24,L17.A11),this.apF(L16.A26)}this.closeSelf()},t.prototype.refreshGold=function(){this.apF(L16.A33,{t:1})},t.prototype.closeSelf=function(){this.apF(L16.A1)},t}(BaseEuiView);__reflect(EscortFinishView.prototype,"EscortFinishView");var EscortGoView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.listData=[],i.skinName=EscortSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4371)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4372)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4373)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4374)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4375)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4376)),this.lbStr7.textFlow=M18.HTP.parse(O3.tr(4377)),this.btnGold.label=O3.tr(4381),this.btnQua.label=O3.tr(4382),this.btnGo.label=O3.tr(4383)},t.prototype.initData=function(){this.listView.itemRenderer=ItemEscortConfView,this.dataSource=new eui.ArrayCollection(this.listData),this.listView.dataProvider=this.dataSource},t.prototype.ZS6=function(){this.listData=this.FHH24(),this.dataSource.replaceAll(this.listData)},t.prototype.FHH24=function(){var t=App.CM.gtM(O6.B86),e=t.e.qua,i=t.dou,s=L7.FHH24(),o=[];for(var r in s){var n=new EscortConfData(parseInt(s[r]));e==parseInt(s[r])?n.bgImg=1:n.bgImg=0,n.double=i,n.name=L7.FI39(parseInt(s[r])),o.push(n)}return o},t.prototype.loadItemList=function(){var t=App.CM.gtM(O6.B86);this.enConf=L7.gIV("escortNum"),this.lbOne.textFlow=M18.HTP.parse(O3.tr(4380,this.enConf-t.en,this.enConf));var e=L7.gIV("onekeyItem"),i=N12.giC(parseInt(e));this.imgGold.source=1<=i?(this.lbGold.textFlow=M18.HTP.parse(O3.tr(4378,"1/"+i)),N12.FJ86(e)):(this.lbGold.textFlow=M18.HTP.parse(O3.tr(4378,L7.gIV("onekeyCost"))),N12.FJ86(pack.I11.BIND_GOLD)),this.lbQua.textFlow=M18.HTP.parse(O3.tr(4379,L7.gIV("singleCost"))),this.imgQua.source=N12.FJ86(pack.I11.BIND_GOLD)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goldRefresh,this),this.btnQua.addEventListener(egret.TouchEvent.TOUCH_TAP,this.quaRefresh,this),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.escortGo,this),this.ZS6(),this.loadItemList(),this.ZO32()},t.prototype.ZO32=function(){var t=App.CM.gtM(O6.B86),e=O4.FF89(L17.A11);t.needDoubleTip=!e},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGold.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goldRefresh,this),this.btnQua.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.quaRefresh,this),this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.escortGo,this),this.dataSource.removeAll(),this.listData=null},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TG17)switch(e){case P4.V81:this.closeSelf();break;case P4.W46:this.loadItemList();break;case P4.W48:case P4.Q27:this.changeQua(),this.loadItemList();break;default:this.ZS6()}if(t instanceof TG12)switch(e){case P4.S94:var i=App.CM.gtM(O6.B86),s=O4.FF89(L17.A11);i.needDoubleTip=!s}},t.prototype.changeQua=function(){var t=App.CM.gtM(O6.B86),e=O5.FB14(t.e.qua);P18.sDP(O3.tr(1214,e)),this.ZS6()},t.prototype.escortGo=function(t){var e=App.CM.gtM(O6.B86);1==e.dou?this.apF(L16.A26):e.needDoubleTip?App.CM.apF(O6.B86,L16.A2,3):this.apF(L16.A26)},t.prototype.goldRefresh=function(){var t=L7.gIV("onekeyItem");if(1<=N12.giC(parseInt(t))){var e={t:0};this.apF(L16.A33,e)}else{var i=this.FHH24(),s=void 0;for(var o in i)if(i[o].bgImg&&6==i[o].qua){s=!0;break}if(s)P18.sDP(O3.tr(6861));else if(L7.gIV("onekeyCost")<=N12.giC(pack.I11.BIND_GOLD)){e={t:1};this.apF(L16.A33,e)}else App.CM.apF(O6.B86,L16.A2,2)}},t.prototype.ZI51=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=Number(this.lbGold.text);if(t.g>e){this.apF(L16.A33,{t:2})}else P7.FA78()},t.prototype.quaRefresh=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=Number(this.lbQua.text);t.bg>=e?this.apF(L16.A9):App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZL19)},t.prototype.ZL19=function(){this.apF(L16.A9)},t.prototype.closeSelf=function(){this.apF(L16.A17)},t}(BaseEuiView);__reflect(EscortGoView.prototype,"EscortGoView");var EscortConfData=function(t){this.itemList=[],this.qua=t};__reflect(EscortConfData.prototype,"EscortConfData");var EscortInterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EscortRevengeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5141)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5142)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5143)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5144)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5145)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(5146)),this.btnRev.label=O3.tr(5147)},t.prototype.initData=function(){},t.prototype.initAvaData=function(){this.lbName.$setText(this.reportData.name),this.lbScore.$setText(this.reportData.score+""),this.lbLname.$setText(this.reportData.lname)},t.prototype.initReward=function(){this.listView.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listView.dataProvider=this.dataSource;for(var t=this.reportData.qua,e=L7.FG12(t),i=M18.FL28(e,";",":"),s=[],o=Number(L7.gIV("revengeReward")),r=0;r<i.length;r++){var n=N12.gID(i[r][0]),a=Number(i[r][1]);a*=o,1==this.reportData.dou&&(a*=2);var h={itemData:{data:n,ct:a},isBottom:!0};s.push(h)}this.dataSource.replaceAll(s)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnRev.addEventListener(egret.TouchEvent.TOUCH_TAP,this.revAva,this);var i=App.CM.gtM(O6.B86);this.reportData=i.ZL18(),this.initAvaData(),this.initReward()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnRev.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.revAva,this),this.reportData=null,this.dataSource.removeAll()},t.prototype.revAva=function(){var t={u:this.reportData.u};this.apF(L16.A19,t)},t.prototype.closeSelf=function(){App.VM.close(O7.F93)},t}(BaseEuiView);__reflect(EscortInterView.prototype,"EscortInterView");var EscortMainView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.pageNum=1,i.curPageNum=1,i.groupList=[],i.sGN("release_escort"),i.skinName=EscortViewSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.ZS7(),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4364)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4365)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4366)),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(5774))},t.prototype.initData=function(){this.ZS9()},t.prototype.ZS7=function(){var t=App.CM.gtM(O6.B86);if(!t.pointDatas){t.pointDatas={};for(var e=1;e<=Number(L7.gIV("pageLimit"));e++){var i=t.pointDatas[e];null==i&&(i={},t.pointDatas[e]=i),null==i[1]&&(i[1]=[]);var s={x:227,y:TG61.FI40(1)},o={x:-3.3,y:TG61.FI40(1)};i[1].push(s),i[1].push(o),null==i[2]&&(i[2]=[]);var r={x:188,y:TG61.FI40(2)},n={x:-42,y:TG61.FI40(2)};i[2].push(r),i[2].push(n),null==i[3]&&(i[3]=[]);var a={x:150,y:TG61.FI40(3)},h={x:-80,y:TG61.FI40(3)};i[3].push(a),i[3].push(h)}}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.escortGo,this),this.btnReport.addEventListener(egret.TouchEvent.TOUCH_TAP,this.escortReport,this),this.loadAllData();var i=App.CM.gtM(O6.B86),s=i.e;1==s.finish&&0==s.FL67&&App.VM.open(O7.F92),this.ZO33(i),this.ZU50(),this.ZS8()},t.prototype.ZS8=function(){var t=App.CM.gtM(O6.B86).e;0<t.cd&&0==t.finish?(this.lbBGoldDesc.visible=!0,this.lbBGoldDesc.textFlow=M18.HTP.parser(O3.tr(4371)),this.imgBGold.visible=!0,this.lbBGoldNum.visible=!0,this.lbBGoldNum.text=""+L7.gIV("expediteCost")):(this.lbBGoldDesc.visible=!1,this.imgBGold.visible=!1,this.lbBGoldNum.visible=!1)},t.prototype.ZU50=function(){var t=THH27.FE36();this.btnShop.imgNew.visible=0<t&&!O4.FF89(L17.A42)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),this.btnShop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.escortGo,this),this.btnReport.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.escortReport,this),this.removeTimer(),this.ZF29(),this.ZG75()},t.prototype.ZS9=function(){this.enConf=L7.gIV("escortNum"),this.inConf=L7.gIV("interceptNum")},t.prototype.loadAllData=function(){this.ZS10(),this.loadListData()},t.prototype.ZS10=function(){App.CM.apF(O6.B86,L16.A31)},t.prototype.loadListData=function(){App.CM.apF(O6.B86,L16.A13)},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TG17){switch(e){case P4.W46:this.ZL20(t);break;case P4.Q31:this.ZL21(t);break;case P4.V81:case P4.W44:case P4.Q29:this.ZL20(t),this.loadListData();break;case P4.T64:this.updateBtnGo(t);break;case P4.T61:case P4.O30:this.ZO33(t)}this.ZU50()}},t.prototype.ZO33=function(t){0<t.redNum?this.btnReport.imgNew.visible=!0:this.btnReport.imgNew.visible=!1},t.prototype.ZL20=function(t){this.lbOne.textFlow=M18.HTP.parse(O3.tr(4367,this.enConf-t.en,this.enConf)),this.lbTwo.textFlow=M18.HTP.parse(O3.tr(4368,this.inConf-t.in,this.inConf)),this.GX42(t.e),this.updateBtnGo(t)},t.prototype.GX42=function(t){1!=t.finish?(this._cd=t.cd,0<this._cd?(this.lbTime.textFlow=M18.HTP.parse(O3.tr(4369,P6.FJ11(1e3*this._cd,3))),App.K16.doTimer(1e3,this._cd,this.cdCut,this,this.cdEnd.bind(this)),this.grpTime.visible=!0):this.grpTime.visible=!1):this.grpTime.visible=!1},t.prototype.cdCut=function(){this._cd--,this.lbTime.textFlow=M18.HTP.parse(O3.tr(4369,P6.FJ11(1e3*this._cd,3)))},t.prototype.cdEnd=function(){this.grpTime.visible=!1},t.prototype.removeTimer=function(){App.K16.remove(this.cdCut,this)},t.prototype.updateBtnGo=function(t){this.imgShuangbei.visible=!1,0<this.enConf-t.en?(this.btnGo.imgNew.visible=!0,1==t.dou&&(this.imgShuangbei.visible=!0)):this.btnGo.imgNew.visible=!1;var e=t.e;0<e.cd&&0==e.finish?(this.btnGo.label=O3.tr(1201),this.btnGo.name=O3.tr(1201),this.lbBGoldDesc.visible=!0,this.lbBGoldDesc.textFlow=M18.HTP.parser(O3.tr(4371)),this.imgBGold.visible=!0,this.lbBGoldNum.visible=!0,this.lbBGoldNum.text=""+L7.gIV("expediteCost")):(this.btnGo.label=O3.tr(1200),this.btnGo.name=O3.tr(1200),this.lbBGoldDesc.visible=!1,this.imgBGold.visible=!1,this.lbBGoldNum.visible=!1)},t.prototype.onClickShop=function(){var t=O4.getLv(),e=N15.FG47(P12.A18);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else{var s=App.VM.open(O7.HH98,O7.I3,P12.A18);s&&s.once(egret.Event.REMOVED_FROM_STAGE,this.ZU50,this)}},t.prototype.onClickHelp=function(){var t={title:O3.tr(1202),content:L7.gIV("escortHelp")};this.aCF(O6.C18,O10.A24,t)},t.prototype.escortReport=function(){App.CM.apF(O6.B86,L16.A6)},t.prototype.escortGo=function(t){switch(t.target.name){case O3.tr(1200):this.GN25();break;case O3.tr(1201):var e=L7.gIV("expediteCost");parseInt(e)<=N12.giC(pack.I11.BIND_GOLD)?this.apF(L16.A24):App.CM.apF(O6.B86,L16.A2,1)}},t.prototype.GN25=function(){var t=App.CM.gtM(O6.B86);this.enConf-t.en<=0?P18.sDP(O3.tr(1209)):App.CM.apF(O6.B86,L16.A21)},t.prototype.onClickLeft=function(){1!=this.curPageNum&&(this.curPageNum=this.curPageNum-1,this.ZW50(),this.setShowGroup(this.curPageNum))},t.prototype.onClickRight=function(){this.curPageNum!=this.pageNum&&(this.curPageNum=this.curPageNum+1,this.ZW50(),this.setShowGroup(this.curPageNum))},t.prototype.closeSelf=function(){App.VM.close(O7.G78)},t.prototype.ZG75=function(){this.grpGreen.removeChildren();for(var t=1;t<=this.pageNum;t++)this.groupList[t]&&(this.groupList[t].closeHandler(),this.groupList[t].closeTween(),this.groupList[t])},t.prototype.ZF29=function(){for(var t=1;t<=this.pageNum;t++)this.groupList[t]&&this.groupList[t].ZL23(t)},t.prototype.ZL21=function(t){this.ZG75(),this.curPageNum=1,this.setList(t),this.ZW50()},t.prototype.ZW50=function(){1<=this.pageNum-this.curPageNum?this.btnRight.visible=!0:this.btnRight.visible=!1,1<this.curPageNum?this.btnLeft.visible=!0:this.btnLeft.visible=!1},t.prototype.setList=function(t){var e=0,i=0,s=parseInt(L7.gIV("truckNum")),o=t.taskList,r=[];if(o.length<=0)this.pageNum=1;else{for(var n=0;n<o.length;n++){if(e%s==0){var a=new EscortGroup(r=[]);a.$setWidth(this.grpGreen.width),a.$setHeight(this.grpGreen.height),this.grpGreen.addChild(a),i++,this.groupList[i]=a}r.push(o[n]),e++}this.pageNum=0<i?i:1,this.setShowGroup(1),this.cutGroup()}},t.prototype.cutGroup=function(){for(var t=1;t<=this.pageNum;t++)this.groupList[t]&&this.groupList[t].createShow(t)},t.prototype.setShowGroup=function(t){var e=this.groupList;for(var i in e)e[i].visible=!1;e[t]&&(e[t].visible=!0)},t}(BaseEuiView);__reflect(EscortMainView.prototype,"EscortMainView");var EscortGroup=function(i){function t(t){var e=i.call(this)||this;return e.taskList=[],e.timerArray=[],e.listOne=[],e.listTwo=[],e.listThree=[],e.taskMap={},e.intervalTime=6e3,e.taskList=t,e}return __extends(t,i),t.prototype.createShow=function(t){this.taskMap={};for(var e=1,i=0;i<this.taskList.length;i++){e%3==1&&(e=1),this.getList(e).push(this.taskList[i]),e++,this.taskMap[this.taskList[i].aid]=this.taskList[i].cd}this.cutAllCd();var s=App.K16.doTimer(1e3,0,this.cutAllCd.bind(this),this);this.timerArray.push(s);for(var o=1;o<=3;o++)this.initLineCars(t,o)},t.prototype.cutAllCd=function(){for(var t in this.taskMap){var e=this.taskMap[t]-1;this.taskMap[t]=e}},t.prototype.initLineCars=function(t,e){for(var i=App.CM.gtM(O6.B86).ZF28(t,e),s=i.length-1;0<=s;s--)this.initOneCar(e,i[s].x,i[s].y);if(i&&i[0]){var o=i[0].x,r=App.K16.doTimer(TG61.FI41(this.width,o),1,this.ZO34.bind(this,e),this);this.timerArray.push(r)}else this.ZO34(e)},t.prototype.ZO34=function(t){var e=null;1==t?(this.ZS11(),e=App.K16.doTimer(this.intervalTime,0,this.ZS11,this)):2==t?(this.ZS12(),e=App.K16.doTimer(this.intervalTime,0,this.ZS12,this)):3==t&&(this.ZL22(),e=App.K16.doTimer(this.intervalTime,0,this.ZL22,this)),this.timerArray.push(e)},t.prototype.initOneCar=function(t,e,i){var s=this.getList(t);if(s&&s[0]){var o=s[0],r=this.taskMap[o.aid];if(r&&0<=r){var n=new EscortCar(e,i,this.width,t,o,s,r);this.addChild(n),s.splice(0,1)}}},t.prototype.ZS11=function(){var t=this.getList(1);if(t||console.log("escort==",t,1),t&&t[0]){var e=t[0],i=this.taskMap[e.aid];if(i&&0<=i){var s=new EscortCar(-1,-1,this.width,1,e,t,i);this.addChild(s),t.splice(0,1)}}},t.prototype.ZS12=function(){var t=this.getList(2);if(t||console.log("escort==",t,2),t&&t[0]){var e=t[0],i=this.taskMap[e.aid];if(i&&0<=i){var s=new EscortCar(-1,-1,this.width,2,e,t,i);this.addChild(s),t.splice(0,1)}}},t.prototype.ZL22=function(){var t=this.getList(3);if(t||console.log("escort==",t,3),t&&t[0]){var e=t[0],i=this.taskMap[e.aid];if(i&&0<=i){var s=new EscortCar(-1,-1,this.width,3,e,t,i);this.addChild(s),t.splice(0,1)}}},t.prototype.getList=function(t){switch(t){case 1:return this.listOne;case 2:return this.listTwo;case 3:return this.listThree}},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.closeTween=function(){for(var t=this.numChildren,e=0;e<t;e++){this.getChildAt(e).ZC46()}},t.prototype.ZL23=function(t){var e=App.CM.gtM(O6.B86);if(0!=this.numChildren){e.pointDatas?e.pointDatas[t]={}:e.pointDatas={};var i=e.pointDatas[t];null==i&&(i={},e.pointDatas[t]=i);for(var s=0;s<this.numChildren;s++){var o=this.getChildAt(s),r={x:o.x,y:o.y},n=TG61.FK78(o.y),a=i[n];null==a&&(a=[],i[n]=a),this.checkPoint(a,r.x)&&a.push(r)}}},t.prototype.checkPoint=function(t,e){for(var i in t){if(Math.abs(e-t[i].x)<=180)return!1}return!0},t}(eui.Group);__reflect(EscortGroup.prototype,"EscortGroup");var EscortCar=function(l){function t(t,e,i,s,o,r,n){var a=l.call(this)||this;a.cd=n,a.skinName=ItemEscortSkin,a.name=o.aid,a.x=-1==t?-a.width:t,a.y=-1==e?TG61.FI40(s):e,a.lbTitle.textFlow=M18.HTP.parse(O3.tr(4370,o.name)),a.lbTime.textFlow=M18.HTP.parse(O3.tr(4369,P6.FJ11(1e3*a.cd,3))),(a.task=o).hitTime>=Number(L7.gIV("interceptLimit"))?P16.sGF(a,!0):P16.sGF(a,!1),a.addEventListener(egret.TouchEvent.TOUCH_TAP,a.fightEscort,a),a.handler=App.K16.doTimer(1e3,0,a.cutCd,a);var h=TG61.FHH25(i,a.x);egret.Tween.get(a).to({x:i},h).call(function(){a.desorty(),0<=a.cd&&r.push(o)});var p="escort_qua"+o.qua;return App.THH33.aUE(a.gpCar,p),a}return __extends(t,l),t.prototype.desorty=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.fightEscort,this),this.handler&&(App.K16.rBH(this.handler),this.handler=null),egret.Tween.removeTweens(this),this.parent&&this.parent.removeChild(this),App.THH33.rEf(this.gpCar,"escort_qua"+this.task.qua)},t.prototype.ZC46=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.fightEscort,this),this.handler&&(App.K16.rBH(this.handler),this.handler=null),egret.Tween.removeTweens(this),App.THH33.rEf(this.gpCar,"escort_qua"+this.task.qua)},t.prototype.cutCd=function(){this.lbTime.textFlow=M18.HTP.parse(O3.tr(4369,P6.FJ11(1e3*this.cd--,3))),this.cd<=-1&&this.desorty()},t.prototype.fightEscort=function(t){var e=t.currentTarget.name,i=App.CM.gtM(O6.B86).getTask(parseInt(e));null==i&&P18.sDP(O3.tr(5672));var s=App.CM.gtM(O6.B82);i.aid==s.avatarInfo.id?P18.sDP(O3.tr(1210)):i.hitTime>=Number(L7.gIV("interceptLimit"))?P18.sDP(O3.tr(1216)):App.CM.apF(O6.B86,L16.A16,i)},t}(eui.Component);__reflect(EscortCar.prototype,"EscortCar");var escort,EscortReportView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=EscortReportSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4384))},t.prototype.initData=function(){this.listView.itemRenderer=ItemEscortReport,this.listData=new eui.ArrayCollection,this.listView.dataProvider=this.listData,this.scList.viewport=this.listView},t.prototype.initReport=function(){App.CM.apF(O6.B86,L16.A4)},t.prototype.ZL24=function(t){var e=t.reports,i=[];for(var s in e)i.push(e[s]);i.sort(function(t,e){return e.time-t.time}),this.listData.replaceAll(i),this.endScroller()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG17)switch(e){case P4.T61:case P4.O30:this.ZL24(t)}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.scList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.initReport()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.scList.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.listData.removeAll()},t.prototype.closeSelf=function(){this.apF(L16.A3)},t.prototype.endScroller=function(){this.scList.validateNow(),this.upArrow.visible=!(this.scList.viewport.scrollV<=0),this.scList.viewport.contentHeight<=this.scList.height?this.btnArrow.visible=!1:this.scList.height+this.scList.viewport.scrollV>=this.scList.viewport.contentHeight?this.btnArrow.visible=!1:this.btnArrow.visible=!0},t}(BaseEuiView);__reflect(EscortReportView.prototype,"EscortReportView"),function(t){var e=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.u=t.u,this.aid=t.aid,this.name=t.n,this.qua=t.q,this.time=t.t,this.re=t.re,this.suc=t.sc,this.score=t.s,this.lname=t.ln,this.dou=t.dou,this.m=t.m},t}();t.EscortReportVo=e,__reflect(e.prototype,"escort.EscortReportVo")}(escort||(escort={})),function(t){var e=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.aid=t.aid,this.qua=t.q,this.cd=t.cd,this.name=t.an,this.lname=t.ln,this.score=t.s,this.hitTime=t.ht},t}();t.EscortTaskVo=e,__reflect(e.prototype,"escort.EscortTaskVo")}(escort||(escort={})),function(s){var t=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.qua=t.q,this.finish=t.f,this.FL67=t.g,this.cd=t.cd,this.hitTime=t.lt,this.dou=t.dou,this.reports=[],this.addReports(t.vs)},t.prototype.addReports=function(t){if(null!=t&&0<t.length)for(var e=0;e<t.length;e++){var i=new s.EscortReportVo(t[e]);this.reports[e]=i}},t}();s.EscortVo=t,__reflect(t.prototype,"escort.EscortVo")}(escort||(escort={}));var TD42=function(){function t(){}return t.FK35=function(t){this.init=t.expedition_init,this.pass=t.expedition_pass,this.lvup=t.expedition_lvup,this.setBaseData()},t.setBaseData=function(){if(this.init){this.openLv=this.FE59("openLv"),this.openDay=this.FE59("openDay"),this.coin=this.FE59("coin"),this.heroNum=this.FE59("heroNum"),this.strengthenAtk=parseFloat(this.init.strengthenAtk.value),this.strengthenDef=parseFloat(this.init.strengthenDef.value);for(var t=M18.FL28(this.gIV("treatCost"),",",":"),e=0;e<t.length;e++)this.treatCost[e+1]={k:parseInt(t[e][0]),v:parseInt(t[e][1])};t=M18.FL28(this.gIV("reviveCost"),",",":");for(e=0;e<t.length;e++)this.reviveCost[e+1]={k:parseInt(t[e][0]),v:parseInt(t[e][1])};for(var i in this.dailyChest={},t=M18.FL28(this.gIV("dailyChest"),"|",","))this.dailyChest[parseInt(t[i][0])]=new ExpEditionDailyVo(t[i]);for(var s in this.pass){if(!this.pass[s].firstData){var o=M18.FL28(this.pass[s].first,";",":");for(var i in this.pass[s].firstData=[],o){(n=new avatar.AttribVo).k=parseInt(o[i][0]),n.v=parseInt(o[i][1]),this.pass[s].firstData.push(n)}}if(!this.pass[s].dailyData){var r=M18.FL28(this.pass[s].dailyshow,";",":");for(var i in this.pass[s].dailyData=[],r){var n;(n=new avatar.AttribVo).k=parseInt(r[i][0]),n.v=parseInt(r[i][1]),this.pass[s].dailyData.push(n)}}}for(var i in this.lvup)if(!this.lvup[i].item){var a=this.lvup[i].cost.split(":");this.lvup[i].item={k:parseInt(a[0]),v:parseInt(a[1])}}for(var i in this.passGroup=this.getPassGroup(),this.position={},this.position[1]={x:1100,y:270},this.position[2]={x:900,y:150},this.position[3]={x:720,y:260},this.position[4]={x:480,y:160},this.position[5]={x:280,y:270},this.position[6]={x:120,y:150},this.positionNum=0,this.position)this.positionNum++;this.fightPos=[6,7,8,9,10,1,2,3,4,5]}},t.gIV=function(t){var e="";return this.init?e=this.init[t].value:e},t.FE59=function(t){var e;return this.init?e=parseInt(this.init[t].value):e},t.getPassGroup=function(){var t={};if(!this.pass)return t;for(var e in this.pass)t[this.pass[e].chapter]||(t[this.pass[e].chapter]={}),t[this.pass[e].chapter][this.pass[e].passid]=this.pass[e];return t},t.treatCost={},t.reviveCost={},t}();__reflect(TD42.prototype,"TD42");var G2=function(){function t(){}return t.A33=10001,t.A34=10002,t.A21=10003,t.A22=10004,t.A31=10005,t.A32=10006,t.A23=10007,t.A24=10008,t.A5=10009,t.A6=10010,t.A15=10011,t.A16=10012,t.A7=10013,t.A8=10014,t.A25=10015,t.A26=10016,t.A17=10017,t.A18=10018,t.A1=10019,t.A2=10020,t.A27=10021,t.A28=10022,t.A35=10023,t.A9=10024,t.A10=10025,t.A19=20001,t.A11=20002,t.A30=20003,t.A29=20004,t.A12=20005,t.A3=20006,t.A20=20007,t.A13=20008,t.A14=20009,t.A4=20010,t}();__reflect(G2.prototype,"G2");var C3=function(){function t(){}return t.A3=1,t.A1=2,t.A2=3,t}();__reflect(C3.prototype,"C3");var B13=function(){function t(){}return t.A1=1,t.A2=2,t}();__reflect(B13.prototype,"B13");var TB34=function(i){function t(){var t=i.call(this)||this,e=new TD99(t);return e.aLV(O7.I39),e.aLV(O7.I63),e.aLV(O7.HH7),e.aLV(O7.B7),e.aLV(O7.B47),e.aLV(O7.B48),e.aLV(O7.D61),e.aLV(O7.B6),e.aLV(O7.G46),App.VM.register(O7.B47,"ExpEditionPreviewView",t,K17.UI_Main_TOP),App.VM.register(O7.D61,"ExpEditionRankView",t,K17.UI_Main_TOP),App.VM.register(O7.B6,"ExpEditionShutNameView",t,K17.UI_Main_TOP),App.VM.register(O7.B48,"ExpEditionOutwillView",t,K17.UI_Main_TOP),App.VM.register(O7.B7,"ExpEditionHospitalView",t,K17.UI_Main_TOP),t.proxy=new TE1(t),t.rgF(G2.A19,function(){App.VM.open(O7.B47)},t),t.rgF(G2.A11,function(){App.VM.close(O7.B47)},t),t.rgF(G2.A30,function(){App.VM.open(O7.D61)},t),t.rgF(G2.A29,function(){App.VM.close(O7.D61)},t),t.rgF(G2.A12,function(t){App.VM.open(O7.B6,t)},t),t.rgF(G2.A3,function(){App.VM.close(O7.B6)},t),t.rgF(G2.A20,function(){App.VM.open(O7.B48)},t),t.rgF(G2.A13,function(){App.VM.close(O7.B48)},t),t.rgF(G2.A14,function(){App.VM.open(O7.B7)},t),t.rgF(G2.A4,function(){App.VM.close(O7.B7)},t),t.rgF(G2.A33,t.loadReq,t),t.rgF(G2.A34,t.loadRes,t),t.rgF(G2.A21,t.GU61,t),t.rgF(G2.A22,t.GU62,t),t.rgF(G2.A31,t.sweepReq,t),t.rgF(G2.A32,t.sweepRes,t),t.rgF(G2.A23,t.GV55,t),t.rgF(G2.A24,t.GV54,t),t.rgF(G2.A5,t.GQ98,t),t.rgF(G2.A6,t.GQ99,t),t.rgF(G2.A15,t.GS99,t),t.rgF(G2.A16,t.GT1,t),t.rgF(G2.A7,t.GR1,t),t.rgF(G2.A8,t.GR2,t),t.rgF(G2.A25,t.GW30,t),t.rgF(G2.A26,t.GW31,t),t.rgF(G2.A17,t.GT2,t),t.rgF(G2.A18,t.GT3,t),t.rgF(G2.A1,t.GL28,t),t.rgF(G2.A2,t.GL29,t),t.rgF(G2.A27,t.GW32,t),t.rgF(G2.A28,t.GW33,t),t.rgF(G2.A35,t.push,t),t.rgF(G2.A9,t.GR3,t),t.rgF(G2.A10,t.GR4,t),t}return __extends(t,i),t.prototype.loadReq=function(){this.proxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.S58)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GU61=function(){this.proxy.GU61()},t.prototype.GU62=function(s){var o=this;if(200==s.head.state)if(s.body.cd_)P7.fightCoolingCD(s.body.cd_);else{var r=this.gtM();r.setData(s.body);var t=P7.isGetView(O7.HH7);App.CM.apF(O6.B99,N1.A11,s.body.fr,{rewards:s.body.ob,needResult:!0,type:P15.A24,isAuto:t},function(t,e){e&&o.ZT94(O6.B85,L15.A42,O7.HH7);var i=TD42.pass[r.checkId];i&&i.hospital&&s.body.fr.v&&o.ZT94(O6.B5,G2.A14)},this),r.notify(P4.J11)}else P18.sDP(K18.getTips(s.head.state))},t.prototype.sweepReq=function(){this.proxy.sweepReq()},t.prototype.sweepRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body);var i={rewards:t.body.ob};App.VM.open(O7.F74,1,i),e.notify(P4.Q90)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GV55=function(t){this.proxy.GV55(t)},t.prototype.GV54=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),P5.sIs(t.body.ob),e.notify(P4.L5)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GQ98=function(){this.proxy.GQ98()},t.prototype.GQ99=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),P5.sIs(t.body.ob),e.notify(P4.F65)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GS99=function(t,e){this.proxy.GS99(t,e)},t.prototype.GT1=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.HH33)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GR1=function(){this.gtM();this.proxy.GR1()},t.prototype.GR2=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.F67)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW30=function(t){this.proxy.GW30(t)},t.prototype.GW31=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.L7)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT2=function(t){this.proxy.GT2(t)},t.prototype.GT3=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.HH35)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GL28=function(t){this.proxy.GL28(t)},t.prototype.GL29=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.C49)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW32=function(t){this.proxy.GW32(t)},t.prototype.GW33=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.L9)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.push=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.resetData(),e.notify(P4.W91)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GR3=function(t){this.proxy.GR3(t)},t.prototype.GR4=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.F69)}else P18.sDP(K18.getTips(t.head.state))},t}(TE11);__reflect(TB34.prototype,"TB34");var TD99=function(i){function t(t){var e=i.call(this,t)||this;return e.hpHeroData={},e.npcHeroData={},e.cureHeroList=[],e.reviveHeroList=[],e.recordIndex=0,e}return __extends(t,i),t.prototype.setData=function(t){if(this.dailyChest||(this.dailyChest=P7.copyTab(TD42.dailyChest)),!this.strengData){this.strengData={};for(var e=1;e<=2;e++){var i=new ExpEditionStrengVo;switch(i.type=e){case B13.A1:i.rate=TD42.strengthenAtk;break;case B13.A2:i.rate=TD42.strengthenDef}this.strengData[e]=i}}if(t.sl)for(var s in t.sl)this.strengData[s]&&this.strengData[s].updateData(t.sl[s]);if(null!=t.cp&&(this.checkId=t.cp,this.nowCheckId=TE2.setHighchapter()),this.canSweep=null!=t.sp?!!t.sp:this.canSweep,this.reviveNum=null!=t.drn?t.drn:this.reviveNum,this.cureNum=null!=t.dcn?t.dcn:this.cureNum,this.hospitalId=null!=t.fhp?t.fhp:this.hospitalId,this.isFirstAdopt=null!=t.fp?!!t.fp:this.isFirstAdopt,null!=t.dbh&&(this.nowBattleHeroList=t.dbh,this.isToplimit=this.nowBattleHeroList.length==TD42.heroNum),null!=t.pn||null!=t.ag)for(var s in this.clearanceNum=null!=t.pn?t.pn:this.clearanceNum,this.drawList=null!=t.ag?t.ag:this.drawList,this.dailyChest)this.dailyChest[s].updateData(this.drawList,this.clearanceNum);if(this.isAllLive=null!=t.pt?!!t.pt:this.isAllLive,t.bhs){this.battleHeroData={};for(e=1;e<=5;e++)this.battleHeroData[e]=new ExpEditionHeroVo(e,!1),t.bhs[e]&&this.battleHeroData[e].updateData(t.bhs[e],!0)}if(t.hhp){for(var s in t.hhp)this.hpHeroData[s]?this.hpHeroData[s].updateData(parseInt(s),t.hhp[s]):this.hpHeroData[s]=new ExpEditionHpHeoVo(parseInt(s),t.hhp[s]);for(e=this.cureHeroList.length-1;0<=e;e--)1==this.hpHeroData[this.cureHeroList[e]].ratio&&this.cureHeroList.splice(e,1);for(e=this.reviveHeroList.length-1;0<=e;e--)1==this.hpHeroData[this.reviveHeroList[e]].ratio&&this.reviveHeroList.splice(e,1)}if(t.nhp)for(var s in this.npcHeroData={},t.nhp)this.npcHeroData[s]=new ExpEditionHpHeoVo(t.nhp[s].hid,t.nhp[s].per)},t.prototype.resetData=function(){for(var t in this.hpHeroData={},this.strengData)this.strengData[t].updateData(0)},Object.defineProperty(t.prototype,"setCheckId",{get:function(){return this.chooseCheckId},set:function(t){this.chooseCheckId=t,this.notify()},enumerable:!0,configurable:!0}),t.prototype.getRed=function(){return!!TE2.isOpen()&&(this.canSweep||this.dailyRed())},t.prototype.dailyRed=function(){for(var t in this.dailyChest)if(this.dailyChest[t].state==C3.A3)return!0;return!1},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TD99.prototype,"TD99");var TE1=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.W91,e.push,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.S57,body:{}};s.rSMO(P4.S58,function(t){s.apF(G2.A34,t),e("加载远征西域信息完成")},s),s.sSM(i)})},t.prototype.GU61=function(){var t={type:P4.J10,body:{}};this.rSMO(P4.J11,this.GU62,this),this.sSM(t)},t.prototype.GU62=function(t){this.apF(G2.A22,t)},t.prototype.sweepReq=function(){var t={type:P4.Q89,body:{}};this.rSMO(P4.Q90,this.sweepRes,this),this.sSM(t)},t.prototype.sweepRes=function(t){this.apF(G2.A32,t)},t.prototype.GV55=function(t){var e={type:P4.L4,body:{grade:t}};this.rSMO(P4.L5,this.GV54,this),this.sSM(e)},t.prototype.GV54=function(t){this.apF(G2.A24,t)},t.prototype.GQ98=function(){var t={type:P4.F64,body:{}};this.rSMO(P4.F65,this.GQ99,this),this.sSM(t)},t.prototype.GQ99=function(t){this.apF(G2.A6,t)},t.prototype.GS99=function(t,e){var i={type:P4.HH32,body:{hid:t,pos:e}};this.rSMO(P4.HH33,this.GT1,this),this.sSM(i)},t.prototype.GT1=function(t){this.apF(G2.A16,t)},t.prototype.GR1=function(){var t={type:P4.F66,body:{}};this.rSMO(P4.F67,this.GR2,this),this.sSM(t)},t.prototype.GR2=function(t){this.apF(G2.A8,t)},t.prototype.GW30=function(t){var e={type:P4.L6,body:{hids:t}};this.rSMO(P4.L7,this.GW31,this),this.sSM(e)},t.prototype.GW31=function(t){this.apF(G2.A26,t)},t.prototype.GT2=function(t){var e={type:P4.HH34,body:{hids:t}};this.rSMO(P4.HH35,this.GT3,this),this.sSM(e)},t.prototype.GT3=function(t){this.apF(G2.A18,t)},t.prototype.GL28=function(t){var e={type:P4.C48,body:{sType:t}};this.rSMO(P4.C49,this.GL29,this),this.sSM(e)},t.prototype.GL29=function(t){this.apF(G2.A2,t)},t.prototype.GW32=function(t){var e={type:P4.L8,body:{pid:t}};this.rSMO(P4.L9,this.GW33,this),this.sSM(e)},t.prototype.GW33=function(t){this.apF(G2.A28,t)},t.prototype.push=function(t){this.apF(G2.A35,t)},t.prototype.GR3=function(t){var e={type:P4.F68,body:{hids:t}};this.rSMO(P4.F69,this.GR4,this),this.sSM(e)},t.prototype.GR4=function(t){this.apF(G2.A10,t)},t}(TG80);__reflect(TE1.prototype,"TE1");var TE2=function(){function e(){}return Object.defineProperty(e,"model",{get:function(){return App.CM.gtM(O6.B5)},enumerable:!0,configurable:!0}),e.getChooseChapter=function(){var t=this.model,e=TD42.passGroup[t.chooseCheckId],i=[];for(var s in e)i.push(e[s]);return i.reverse(),i},e.isOpen=function(){App.CM.gtM(O6.B82);var t=App.CM.gtM(O6.B43),e=O4.getLv();return t.serOpenDay+1>=TD42.openDay&&e>=TD42.openLv},e.FL35=function(){return this.model.getRed()},e.getBoxList=function(){var t=this.model,e=[];for(var i in t.dailyChest)e.push(t.dailyChest[i]);return e.sort(this.sortBoxList),e},e.sortBoxList=function(t,e){return t.state!=e.state?t.state-e.state:t.targetNum-e.targetNum},e.getReadyHeroList=function(){var t=this.model,e=App.CM.gtM(O6.C12),i=P7.copyTab(e.heroList),s=[];for(var o in i)i[o].isOwn&&(t.hpHeroData[o]?i[o].ratio=t.hpHeroData[o].ratio:i[o].ratio=1,s.push(i[o]));return s.sort(this.sortReadyHeroList),s},e.sortReadyHeroList=function(t,e){return e.quality-t.quality},e.getNullPos=function(){var t=this.model,e=0,i=[];for(var s in t.battleHeroData)t.battleHeroData[s].heroId&&i.push(t.battleHeroData[s].index);for(var o=1;o<=5;o++)if(-1==i.indexOf(o)){e=o;break}return e},e.getBattleHeroList=function(){var t=this.model,e=[];for(var i in t.battleHeroData)e.push(t.battleHeroData[i]);return e},e.getHeroHp=function(t){var e=this.model,i=1;return e.hpHeroData[t]&&(i=e.hpHeroData[t].ratio),i},e.isCheckCure=function(t){return-1!=this.model.cureHeroList.indexOf(t)},e.isReviveCure=function(t){return-1!=this.model.reviveHeroList.indexOf(t)},e.isStrengChoose=function(t){return this.model.recordIndex==t},e.getCheckHeroList=function(){var t=this.model,e=App.CM.gtM(O6.C12),i=P7.copyTab(e.heroList),s=[];for(var o in i)if(i[o].isOwn&&t.hpHeroData[o]){var r=t.hpHeroData[o].ratio;0<r&&r<1&&s.push(i[o])}return s.sort(this.sortReadyHeroList),s},e.getReviveHeroList=function(){var t=this.model,e=App.CM.gtM(O6.C12),i=P7.copyTab(e.heroList),s=[];for(var o in i){if(i[o].isOwn&&t.hpHeroData[o])0==t.hpHeroData[o].ratio&&s.push(i[o])}return s.sort(this.sortReadyHeroList),s},e.getStrengHeroList=function(){var t=this.model,e=[];for(var i in t.strengData)e.push(t.strengData[i]);return e},e.setHeroHids=function(t){var e="";for(var i in t)e+=t[i]+";";return e=e.substring(0,e.length-1)},e.setHighchapter=function(){var t=this.model,e=TD42.pass[t.checkId],i=TD42.pass[t.checkId+1],s=1;if(!t.checkId)return s;(s=e.chapter,i)||TD42.pass[e.nextid]&&s++;return s},e.setNowHighchapter=function(){var t=this.model,e=O4.getLv(),i=TD42.pass[t.checkId],s=TD42.pass[t.checkId+1],o=1;if(!t.checkId)return o;if(o=i.chapter,!s){var r=TD42.pass[i.nextid];r&&r.level<=e&&o++}return o},e.getNowChapterName=function(){var t=this.model;return TD42.passGroup[t.chooseCheckId][1].name},e.getNowChapterMode=function(){var t=this.model;return t.chooseCheckId||(t.chooseCheckId=e.setNowHighchapter()),TD42.passGroup[t.chooseCheckId][1].difficulty},e.getNextChapterIsopen=function(t){this.model;var e=O4.getLv(),i=TD42.passGroup[t][1].level;return{boo:i<=e,lv:i}},e.FL71=function(t,e,i,s){var o=!1;if(670<=e&&e<=790){var r=this.getPos(t);r&&s!=r&&(App.CM.apF(O6.B5,G2.A15,i,r),o=!0)}return o},e.getPos=function(t){for(var e=[100,183,269,355,440],i=0,s=0;s<e.length;s++){if(e[s]<=t&&t<e[s]+83){i=s+1;break}}return i},e.isOpenChoose=function(t){var e,i=this.model,s=TD42.pass[i.checkId];if(i.checkId)if(TD42.pass[i.checkId+1])e=i.checkId+1;else{var o=TD42.passGroup[s.chapter+1];e=o?o[1].id:i.checkId}else e=TD42.passGroup[1][1].id;return t<=e},e.isOverdue=function(t){var e,i=this.model,s=TD42.pass[i.checkId];if(i.checkId)if(TD42.pass[i.checkId+1])e=i.checkId+1;else{var o=TD42.passGroup[s.chapter+1];e=o?o[1].id:i.checkId}else e=TD42.passGroup[1][1].id;return t<e||t==i.checkId},e.isCanChallenge=function(t){var e=this.model,i=0;if(e.checkId){var s=TD42.pass[e.checkId];if(TD42.pass[e.checkId+1])i=e.checkId+1;else{var o=TD42.passGroup[s.chapter+1];o&&(i=o[1].id)}}else i=TD42.passGroup[1][1].id;return i==t},e.isHaveHospital=function(t){this.model;var e=!1,i=TD42.pass[t-1],s=TD42.pass[t];if(i)e=!!i.hospital;else{var o=TD42.passGroup[s.chapter-1];o&&(e=!!o[TD42.positionNum].hospital)}return e},e.ZV46=function(t){var e=this.model,i=!1;if(!e.checkId)return i;var s=TD42.pass[e.checkId];return i=TD42.pass[e.checkId+1]?t<s.chapter:t<=s.chapter},e.hasPassCurMapIndex=function(t){var e=this.model,i=1;if(e.checkId){var s=TD42.pass[e.checkId];if(t==s.chapter){var o=s.passid+1;i=o>TD42.positionNum?TD42.positionNum:o}else t<s.chapter&&(i=TD42.positionNum)}return i},e.isBattleHero=function(t){var e=this.model,i=!1;for(var s in e.battleHeroData)if(e.battleHeroData[s].heroId==t){i=!0;break}return i},e.isToplimit=function(){var t=this.model,e=t.nowBattleHeroList.length;for(var i in t.battleHeroData){var s=t.battleHeroData[i].heroId;s&&-1==t.nowBattleHeroList.indexOf(s)&&e++}return TD42.heroNum==e},e.isAllDown=function(){var t=this.model,e=!0;for(var i in t.battleHeroData)if(!t.battleHeroData[i].heroId){e=!1;break}return e},e.getBattleHids=function(){var t=this.model,e=App.CM.gtM(O6.C12),i=(P7.copyTab(e.heroList),0),s=0,o=[];for(var r in t.battleHeroData){var n=t.battleHeroData[r].heroId;n?-1==t.nowBattleHeroList.indexOf(n)&&s++:i++}var a=this.getReadyHeroList(),h=TD42.heroNum-t.nowBattleHeroList.length-s;for(var r in a)if(a[r].isOwn&&!this.isBattleHero(a[r].id)&&0<a[r].ratio){if(!h)break;if(-1==t.nowBattleHeroList.indexOf(a[r].id)&&0<h&&h--,o.push(a[r].id),i==o.length)break}var p=i-o.length;if(p)for(var r in a)if(a[r].isOwn&&-1==o.indexOf(a[r].id)&&0<a[r].ratio&&-1!=t.nowBattleHeroList.indexOf(a[r].id)&&!this.isBattleHero(a[r].id)){if(!p)break;p--,o.push(a[r].id)}return this.setHeroHids(o)},e.getStengnCost=function(){var t=this.model;return t.strengData[t.recordIndex+1].getCost()},e.getStrengCureNum=function(){var t,e=this.model,i=0,s=P7.copyTab(e.cureNum+1),o=e.cureHeroList.length;for(var r in TD42.treatCost)t=parseInt(r);if(t>e.cureNum){for(var n=0;s<t&&++n<=o;s++)i+=TD42.treatCost[s].v;var a=o-n;0<a&&(i+=a*TD42.treatCost[t].v)}else i=o*TD42.treatCost[t].v;return i},e.getStrengCureOneNum=function(){var t,e=this.model,i=TD42.treatCost[e.cureNum+1];if(i)t=i.v;else for(var s in TD42.treatCost)t=TD42.treatCost[s].v;return t},e.getStrengReviveNum=function(){var t,e=this.model,i=0,s=P7.copyTab(e.reviveNum+1),o=e.reviveHeroList.length;for(var r in TD42.reviveCost)t=parseInt(r);if(t>e.reviveNum){for(var n=0;s<t&&++n<=o;s++)i+=TD42.reviveCost[s].v;var a=o-n;0<a&&(i+=a*TD42.reviveCost[t].v)}else i=o*TD42.reviveCost[t].v;return i},e.getStrengReviveOneNum=function(){var t=this.model,e=0,i=TD42.reviveCost[t.reviveNum+1];if(i)e=i.v;else for(var s in TD42.reviveCost)e=TD42.reviveCost[s].v;return e},e.isOpenHospital=function(t){var e=this.model;return e.checkId==t&&e.hospitalId!=t},e.isNoEmpty=function(){var t=this.model,e=!1;for(var i in t.battleHeroData){if(!t.battleHeroData[i].heroId){e=!0;break}}return e},e}();__reflect(TE2.prototype,"TE2");var ExpEditionChapterVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){for(var e in t)this[e]=t[e];this.ZX81()},t.prototype.ZX81=function(){if(!this.firstData){M18.FL28(this.first,";",":");for(var t in this.firstData=[],daily){(i=new avatar.AttribVo).k=parseInt(daily[t][0]),i.v=parseInt(daily[t][1]),this.firstData.push(i)}}if(!this.dailyData){var e=M18.FL28(this.dailyshow,";",":");for(var t in this.dailyData=[],e){var i;(i=new avatar.AttribVo).k=parseInt(e[t][0]),i.v=parseInt(e[t][1]),this.dailyData.push(i)}}},t.prototype.update=function(t){},t}();__reflect(ExpEditionChapterVo.prototype,"ExpEditionChapterVo");var ExpEditionDailyVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.targetNum=parseInt(t[0]);var e=M18.FL28(t[1],";",":");for(var i in this.itemList=[],e){var s=new avatar.AttribVo;s.k=parseInt(e[i][0]),s.v=parseInt(e[i][1]),this.itemList.push(s)}this.state=C3.A1},t.prototype.updateData=function(t,e){-1!=t.indexOf(this.targetNum)?this.state=C3.A2:e>=this.targetNum&&(this.state=C3.A3)},t}();__reflect(ExpEditionDailyVo.prototype,"ExpEditionDailyVo");var ExpEditionHeroVo=function(){function t(t,e){this.updateData(t,e)}return t.prototype.updateData=function(t,e){e?(this.heroId=t,this.heroData=N14.FF4(this.heroId)):this.index=t},t.prototype.getRatio=function(){return TE2.getHeroHp(this.heroId)},t}();__reflect(ExpEditionHeroVo.prototype,"ExpEditionHeroVo");var ExpEditionHpHeoVo=function(){function t(t,e){this.updateData(t,e)}return t.prototype.updateData=function(t,e){this.heroId=t,this.ratio=e,this.heroData=N14.FF4(this.heroId)},t}();__reflect(ExpEditionHpHeoVo.prototype,"ExpEditionHpHeoVo");var ExpEditionLvupVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){for(var e in t)this[e]=t[e]},t}();__reflect(ExpEditionLvupVo.prototype,"ExpEditionLvupVo");var ExpEditionStrengVo=function(){function t(){this.lv=0}return t.prototype.updateData=function(t){this.lv=null!=t?t:this.lv},t.prototype.getCost=function(){new avatar.AttribVo;var t=TD42.lvup[this.lv+1];return t||(t=TD42.lvup[this.lv]),t.item},t}();__reflect(ExpEditionStrengVo.prototype,"ExpEditionStrengVo");var ExpEditionCityItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionCityItemSkin",TG36.FK33(t,.5),TG36.FK34(t,.5),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t.lbStr1.textFlow=M18.HTP.parser(O3.tr(6882)),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.setData=function(t){this.data=t;var e=App.CM.gtM(O6.B5),i=0!=e.checkId&&e.checkId>=t.id;this.imgPass.visible=i,this.grpHospital.visible=!!t.hospital,this.grpHospital.visible&&P16.sGF(this.grpHospital,!TE2.isOpenHospital(t.id)),this.lbChapterName.textFlow=M18.HTP.parser(O3.tr(6881,t.name+"-"+t.passid)),this.imgIcon.source=t.icon||"v1_btn_yzxyguanqia_png",this.imgArrow.visible=TE2.isCanChallenge(t.id),this.setPos()},t.prototype.setPos=function(){this.x=TD42.position[this.data.passid].x,this.y=TD42.position[this.data.passid].y},t.prototype.onBegin=function(t){var e=this;if(TG40.playClickEffect(),this.grpHospital.visible&&140<=t.localX&&t.localX<=192&&58<=t.localY&&t.localY<=102)this.grpHospital.filters?TE2.isOverdue(this.data.id)?P18.sDP(O3.tr(6916)):P18.sDP(O3.tr(6914)):App.CM.apF(O6.B5,G2.A14);else if(TE2.isOpenChoose(this.data.id)){var i=function(){App.CM.apF(O6.B5,G2.A12,e.data.id)};TE2.isCanChallenge(this.data.id)&&TE2.isHaveHospital(this.data.id)?App.VM.open(O7.HH38,M18.FG71(O3.tr(6915)),this,i):i()}else P18.sDP(O3.tr(6986))},t}(eui.Button);__reflect(ExpEditionCityItemView.prototype,"ExpEditionCityItemView");var ExpEditionCureItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionChooseHeroItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.cbOn.addEventListener(egret.Event.CHANGE,this.ZV28,this)},t.prototype.onRemoveStage=function(){this.cbOn.removeEventListener(egret.Event.CHANGE,this.ZV28,this)},t.prototype.ZV28=function(){var t=App.CM.gtM(O6.B5);if(this.cbOn.selected)t.cureHeroList.push(this.data.id);else{var e=t.cureHeroList.indexOf(this.data.id);-1!=e&&t.cureHeroList.splice(e,1)}t.notify()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.hpBar.maximum=100,this.hpBar.slideDuration=0},t.prototype.dataChanged=function(){this.hpBar.value=100*TE2.getHeroHp(this.data.id),this.cbOn.selected=TE2.isCheckCure(this.data.id),this.imgIcon.source=this.data.icon,this.imgBg.source=N12.getBox(this.data.quality),O5.FB13(this.lbName,this.data.name,this.data.quality)},t}(eui.ItemRenderer);__reflect(ExpEditionCureItemView.prototype,"ExpEditionCureItemView");var ExpEditionLineupItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionLineupItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.ZV28=function(){if(!this.imgSelected.visible){var t=App.CM.gtM(O6.B5);t.recordIndex=this.itemIndex,t.notify()}},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t,e,i;switch(this.data.type){case B13.A1:t=O3.tr(6896,this.data.lv),e=O3.tr(6966,(100*this.data.rate).toFixed(0)),i="i60321_png";break;case B13.A2:t=O3.tr(6964,this.data.lv),e=O3.tr(6967,(100*this.data.rate).toFixed(0)),i="i60322_png"}this.imgSelected.visible=TE2.isStrengChoose(this.itemIndex),this.imgIcon.source=i,this.lbLv.textFlow=M18.HTP.parser(t),this.lbDesc.textFlow=M18.HTP.parser(e)},t}(eui.ItemRenderer);__reflect(ExpEditionLineupItemView.prototype,"ExpEditionLineupItemView");var ExpEditionOutwillItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionHeroItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.ZV28=function(){if(this.data.ratio&&!TE2.isBattleHero(this.data.id)){var t=TE2.getNullPos();t?App.CM.apF(O6.B5,G2.A15,this.data.id,t):this.filters&&P18.sDP(O3.tr(6975))}},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.hpBar.maximum=100,this.hpBar.slideDuration=0,this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6996))},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.B5);this.data.ratio?(this.hpBar.value=100*this.data.ratio,TE2.isBattleHero(this.data.id)||-1!=t.nowBattleHeroList.indexOf(this.data.id)||!t.isToplimit&&!TE2.isToplimit()?P16.sGF(this,!1):P16.sGF(this,!0)):(P16.sGF(this,!0),this.hpBar.value=0),this.imgIcon.source=this.data.icon,this.imgBg.source=N12.getBox(this.data.quality),this.grpBattle.visible=TE2.isBattleHero(this.data.id),P7.FM14()?this.lbName.visible=!1:(this.lbName.visible=!0,O5.FB13(this.lbName,this.data.name,this.data.quality))},t}(eui.ItemRenderer);__reflect(ExpEditionOutwillItemView.prototype,"ExpEditionOutwillItemView");var ExpEditionPreviewItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionPreviewItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){(this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF,P7.FM14())&&(this.btnGet.labelDisplay.size=20)},t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this),this.dataSource.removeAll()},t.prototype.onClickBtn=function(){this.data.state==C3.A3&&App.CM.apF(O6.B5,G2.A23,this.data.targetNum)},t.prototype.dataChanged=function(){switch(this.imgGot.visible=!1,this.btnGet.visible=!1,this.data.state){case C3.A3:this.btnGet.imgNew.visible=this.btnGet.visible=!0,this.btnGet.label=O3.tr(3885),this.btnGet.enabled=!0,P16.sGF(this.btnGet,!1);break;case C3.A1:this.btnGet.imgNew.visible=!1,this.btnGet.visible=!0,this.btnGet.label=O3.tr(6922),this.btnGet.enabled=!1,P16.sGF(this.btnGet,!0);break;case C3.A2:this.imgGot.visible=!0}this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6900,this.data.targetNum)),this.ZJ81(this.data.itemList)},t.prototype.ZJ81=function(t){var e=[];for(var i in t){var s={itemData:{data:N12.gID(t[i].k),ct:t[i].v},isBottom:!1};e.push(s)}this.dataSource.replaceAll(e)},t}(eui.ItemRenderer);__reflect(ExpEditionPreviewItemView.prototype,"ExpEditionPreviewItemView");var ExpEditionPtionItemView=function(e){function t(){var t=e.call(this)||this;return t.isSelected=!1,t.touchEnabled=!1,t.skinName="ExpEditionPtionItemSkin",t.touchEnabled=!1,t.imgSelected.visible=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.setData=function(t){var e,i="";switch(this.index=t){case 0:i=O3.tr(6886),e="v1_img_cure_png";break;case 1:i=O3.tr(6887),e="v1_img_revive_png";break;case 2:i=O3.tr(6888),e="v1_img_strengthenhero_png"}this.imgHead.source=e,this.lbName.textFlow=M18.HTP.parser(i)},Object.defineProperty(t.prototype,"selected",{get:function(){return this.isSelected},set:function(t){this.isSelected=t,this.imgSelected.visible=this.isSelected},enumerable:!0,configurable:!0}),t.prototype.ZU35=function(){this.selectHandler&&this.selectHandler.call(this.selectCallObj,this)},t.prototype.ZK29=function(t,e){this.selectHandler=t,this.selectCallObj=e},t}(eui.Component);__reflect(ExpEditionPtionItemView.prototype,"ExpEditionPtionItemView");var ExpEditionRankItemView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this),this.skinName="ExpEditionRankItemSkin"},e.prototype.dataChanged=function(){this.imgBg.visible=this.data.nRank%2==1,this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6906,this.data.nRank)),this.lbStr2.textFlow=M18.HTP.parser(O3.tr(6906,this.data.sName)),this.lbStr3.textFlow=M18.HTP.parser(O3.tr(6907,this.data.nPower)),this.lbStr4.textFlow=M18.HTP.parser(O3.tr(6908,this.data.on))},e}(eui.ItemRenderer);__reflect(ExpEditionRankItemView.prototype,"ExpEditionRankItemView");var ExpEditionReviveItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionChooseHeroItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.cbOn.addEventListener(egret.Event.CHANGE,this.ZV28,this)},t.prototype.onRemoveStage=function(){this.cbOn.removeEventListener(egret.Event.CHANGE,this.ZV28,this)},t.prototype.ZV28=function(){var t=App.CM.gtM(O6.B5);if(this.cbOn.selected)t.reviveHeroList.push(this.data.id);else{var e=t.reviveHeroList.indexOf(this.data.id);-1!=e&&t.reviveHeroList.splice(e,1)}t.notify()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.hpBar.maximum=100,this.hpBar.slideDuration=0,this.hpBar.value=0},t.prototype.dataChanged=function(){P16.sGF(this,!0),this.cbOn.selected=TE2.isReviveCure(this.data.id),this.imgIcon.source=this.data.icon,this.imgBg.source=N12.getBox(this.data.quality),O5.FB13(this.lbName,this.data.name,this.data.quality)},t}(eui.ItemRenderer);__reflect(ExpEditionReviveItemView.prototype,"ExpEditionReviveItemView");var ExpEditionShutHeroItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionHeroItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.updateUI()},t.prototype.updateUI=function(){this.hpBar.maximum=100,this.hpBar.slideDuration=0,this.lbName.visible=!1},t.prototype.dataChanged=function(){this.imgBg.source="v1_img_kuang_bai_png";var t=App.CM.gtM(O6.B5).npcHeroData[TD42.fightPos[this.itemIndex]];t?(this.hpBar.visible=!0,this.imgCorner.visible=!0,this.hpBar.value=100*t.ratio,P16.sGF(this,0==t.ratio),this.imgIcon.source=t.heroData.icon,this.imgCorner.source=1==t.heroData.traintype?"com_dan_png":"com_qun_png"):(this.hpBar.visible=!1,this.imgCorner.visible=!1,this.imgIcon.source="")},t}(eui.ItemRenderer);__reflect(ExpEditionShutHeroItemView.prototype,"ExpEditionShutHeroItemView");var ExpEditionUpperItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionHeroItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.dragEvent=function(t){if(this.data.heroId)switch(t.type){case egret.TouchEvent.TOUCH_MOVE:if(!this.copyGpIcon){this.copyGpIcon=new eui.Group,this.copyGpIcon.width=this.copyGpIcon.height=80;var e=new eui.Image;e.touchEnabled=!0,e.source=this.data.heroData.icon;var i=new eui.Image;i.touchEnabled=!0,i.source=N12.getBox(this.data.heroData.quality),e.horizontalCenter=e.verticalCenter=i.horizontalCenter=i.verticalCenter=0,this.copyGpIcon.addChild(i),this.copyGpIcon.addChild(e),this.stage.addChild(this.copyGpIcon);var s=this.data.getRatio();this.gpIcon.visible=!1,s?P16.sGF(this.copyGpIcon,!1):P16.sGF(this.copyGpIcon,!0)}this.copyGpIcon.x=t.stageX-this.width/2,this.copyGpIcon.y=t.stageY-this.height/2,this.recordOldXY={},this.recordOldXY.x=this.copyGpIcon.x,this.recordOldXY.y=this.copyGpIcon.y;break;case egret.TouchEvent.TOUCH_END:this.playSwopAui(t);break;case egret.TouchEvent.TOUCH_BEGIN:this.ZW51()}},t.prototype.playSwopAui=function(t){if(this.ZL25(),this.copyGpIcon){var e=TE2.FL71(this.copyGpIcon.x,this.copyGpIcon.y,this.data.heroId,this.data.index);this.gpIcon.visible=!e,this.stage.removeChild(this.copyGpIcon),this.copyGpIcon.removeChildren(),this.copyGpIcon=null,this.recordOldXY=null}},t.prototype.ZL25=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragEvent,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.dragEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.ZW51=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.dragEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.ZV28=function(){this.data.heroId?this.recordOldXY||App.CM.apF(O6.B5,G2.A15,this.data.heroId,0):P18.sDP(O3.tr(6919))},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.hpBar.maximum=100,this.hpBar.slideDuration=0,this.lbName.visible=!1},t.prototype.dataChanged=function(){if(this.gpIcon.visible=!0,this.data.heroId){this.hpBar.visible=!0,this.imgIcon.source=this.data.heroData.icon,this.imgBg.source=N12.getBox(this.data.heroData.quality);var t=this.data.getRatio();this.hpBar.value=100*t,t?P16.sGF(this,!1):P16.sGF(this,!0)}else P16.sGF(this,!1),this.imgIcon.source="v1_img_jia_png",this.imgBg.source="v1_img_kuang_bai_png",this.hpBar.visible=!1},t}(eui.ItemRenderer);__reflect(ExpEditionUpperItemView.prototype,"ExpEditionUpperItemView");var ExpEditionWarItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpEditionHeroItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.ZV28=function(){App.CM.apF(O6.B5,G2.A20)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.hpBar.maximum=100,this.hpBar.slideDuration=0,this.lbName.visible=!1},t.prototype.dataChanged=function(){if(this.data.heroId){this.hpBar.visible=!0,this.imgIcon.source=this.data.heroData.icon,this.imgBg.source=N12.getBox(this.data.heroData.quality);var t=this.data.getRatio();this.hpBar.value=100*t,t?P16.sGF(this,!1):P16.sGF(this,!0)}else P16.sGF(this,!1),this.imgIcon.source="v1_img_jia_png",this.imgBg.source="v1_img_kuang_bai_png",this.hpBar.visible=!1},t}(eui.ItemRenderer);__reflect(ExpEditionWarItemView.prototype,"ExpEditionWarItemView");var ExpEditionHospitalView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ExpEditionHospitalSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.touchEnabled=!1,this.dlg.title=O3.tr(6885);var t=N12.gID(N12.itemId.exped);this.imgItem.setData(t);var e={render:ExpEditionCureItemView,tileLayout:!0,verticalGap:8,horizontalGap:4,width:this.listGroup0.width,height:this.listGroup0.height};this.listView0=new CommonListBase(e),this.listGroup0.addChild(this.listView0),this.listView0.verticalCenter=0,this.listView0.horizontalCenter=0;var i={render:ExpEditionReviveItemView,tileLayout:!0,verticalGap:8,horizontalGap:4,width:this.listGroup1.width,height:this.listGroup1.height};this.listView1=new CommonListBase(i),this.listGroup1.addChild(this.listView1),this.listView1.verticalCenter=0,this.listView1.horizontalCenter=0;var s={render:ExpEditionLineupItemView,tileLayout:!0,verticalGap:0,horizontalGap:0,width:this.listGroup2.width,height:this.listGroup2.height};this.listView2=new CommonListBase(s),this.listGroup2.addChild(this.listView2),this.listView2.verticalCenter=0,this.listView2.horizontalCenter=0,this.initItems()},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.listView0.open(),this.listView1.open(),this.listView2.open(),this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ14(this.closeSelf,this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSend,this);var i=this.grpItem.getChildAt(0);this.updateUI(),this.firstSelect(i)},t.prototype.ZS13=function(){for(var t=0;t<3;t++){var e=this.grpItem.getChildAt(t);e&&(e.selected=!1)}},t.prototype.firstSelect=function(t){this.selectedSkill&&(this.selectedSkill.selected=!1),this.selectedSkill=t,this.selectedSkill.selected=!0,this.ZQ39()},t.prototype.GW87=function(t){this.selectedSkill&&(this.selectedSkill.selected=!1),this.selectedSkill=t,this.selectedSkill.selected=!0,this.ZQ39()},t.prototype.initItems=function(){for(var t=0;t<3;t++){var e=this.grpItem.getChildAt(t);e&&(e.index=t,e.ZK29(this.GW87,this),e.setData(t),null==this.selectedSkill&&(this.selectedSkill=e,this.selectedSkill.selected=!0))}},t.prototype.ZO35=function(t){this.listGroup0.visible=!0,this.listGroup1.visible=this.listGroup2.visible=!1;var e=N12.FK5(TD42.treatCost[1].k);this.lbTips.textFlow=M18.HTP.parser(O3.tr(6889,e)),this.lbText.textFlow=M18.HTP.parser(O3.tr(6893,t.cureHeroList.length)),this.lbPay.textFlow=M18.HTP.parser(O3.tr(6895,TE2.getStrengCureNum()));var i=N12.gID(TD42.treatCost[1].k);this.imgCost.setData(i),this.btnSend.label=O3.tr(6891);var s=TE2.getCheckHeroList();this.listView0.rfL(s)},t.prototype.ZG76=function(t){this.listGroup1.visible=!0,this.listGroup0.visible=this.listGroup2.visible=!1;var e=N12.FK5(TD42.reviveCost[1].k);this.lbTips.textFlow=M18.HTP.parser(O3.tr(6890,e)),this.lbText.textFlow=M18.HTP.parser(O3.tr(6894,t.reviveHeroList.length)),this.lbPay.textFlow=M18.HTP.parser(O3.tr(6895,TE2.getStrengReviveNum()));var i=N12.gID(TD42.reviveCost[1].k);this.imgCost.setData(i),this.btnSend.label=O3.tr(6892);var s=TE2.getReviveHeroList();this.listView1.rfL(s)},t.prototype.ZL26=function(t){this.listGroup2.visible=!0,this.listGroup1.visible=this.listGroup0.visible=!1,this.lbTips.textFlow=null,this.lbText.textFlow=null;var e=TE2.getStengnCost(),i=(N12.giC(e.k),N12.gID(e.k));this.imgCost.setData(i),this.lbPay.textFlow=M18.HTP.parser(O3.tr(6895,e.v)),this.btnSend.label=O3.tr(6899);var s=TE2.getStrengHeroList();this.listView2.rfL(s)},t.prototype.ZI52=function(){var t=N12.giC(N12.itemId.exped);this.lbNum.textFlow=M18.HTP.parser(O3.tr(6925,t))},t.prototype.ZQ39=function(){var t=App.CM.gtM(O6.B5);if(this.selectedSkill)switch(this.selectedSkill.index){case 0:this.ZO35(t);break;case 1:this.ZG76(t);break;case 2:this.ZL26(t)}},t.prototype.onClickSend=function(){var t=this.btnSend.label,e=App.CM.gtM(O6.B5);switch(t){case O3.tr(6891):if(N12.giC(TD42.treatCost[1].k)<TE2.getStrengCureNum())P18.sDP(O3.tr(6920));else(i=TE2.setHeroHids(e.cureHeroList)).length&&this.aCF(O6.B5,G2.A25,i);break;case O3.tr(6892):var i;if(N12.giC(TD42.reviveCost[1].k)<TE2.getStrengReviveNum())P18.sDP(O3.tr(6920));else(i=TE2.setHeroHids(e.reviveHeroList)).length&&this.aCF(O6.B5,G2.A17,i);break;case O3.tr(6899):var s=TE2.getStengnCost();N12.giC(s.k)<s.v?P18.sDP(O3.tr(6920)):this.aCF(O6.B5,G2.A1,e.recordIndex+1)}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof THH9)switch(s){case P4.V43:this.updateUI()}t instanceof TD99&&(this.ZI52(),this.ZQ39())},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B5);this.ZO35(t),this.ZG76(t),this.ZL26(t),this.ZI52()},t.prototype.close=function(){o.prototype.close.call(this),this.listView0.close(),this.listView1.close(),this.listView2.close(),this.btnSend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSend,this)},t.prototype.closeSelf=function(){this.aCF(O6.B5,G2.A4)},t}(BaseEuiView);__reflect(ExpEditionHospitalView.prototype,"ExpEditionHospitalView");var ExpEditionOutwillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ExpEditionOutwillSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.touchEnabled=!1;var t={render:ExpEditionOutwillItemView,tileLayout:!0,verticalGap:6,horizontalGap:26,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.upperData.dataProvider=this.upperCollection=new eui.ArrayCollection,this.upperData.itemRenderer=ExpEditionUpperItemView,this.dlg.title=O3.tr(6875),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6924))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t),this.listView.open(),this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ14(this.closeSelf,this),this.btnAllDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS14,this),this.updateUI()},t.prototype.updateUI=function(){this.listView.rfL(TE2.getReadyHeroList()),this.upperCollection.replaceAll(TE2.getBattleHeroList());var t=App.CM.gtM(O6.B5);this.lbDispatch.textFlow=M18.HTP.parser(O3.tr(6976,t.nowBattleHeroList.length,TD42.heroNum)),TE2.isAllDown()?this.btnAllDown.label=O3.tr(6884):this.btnAllDown.label=O3.tr(6998)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof TD99&&this.updateUI()},t.prototype.closeSelf=function(){this.aCF(O6.B5,G2.A13)},t.prototype.ZS14=function(){if(TE2.isAllDown())this.aCF(O6.B5,G2.A7);else{var t=TE2.getBattleHids();t.length?this.aCF(O6.B5,G2.A9,t):TE2.isNoEmpty()&&P18.sDP(O3.tr(7016))}},t.prototype.close=function(){s.prototype.close.call(this),this.listView.close(),this.btnAllDown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS14,this)},t}(BaseEuiView);__reflect(ExpEditionOutwillView.prototype,"ExpEditionOutwillView");var ExpEditionPreviewView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ExpEditionPreviewSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.touchEnabled=!1;var t={render:ExpEditionPreviewItemView,gap:6,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.dlg.title=O3.tr(6901),this.btnReceive.label=O3.tr(6897),this.btnReceive.imgNew.visible=!0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.apply(this,t),this.listView.open(),this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ14(this.closeSelf,this);var i=App.CM.gtM(O6.B5);this.btnReceive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR54,this),this.updateUI(i)},t.prototype.updateUI=function(t){var e=TE2.getBoxList();this.listView.rfL(e),this.btnReceive.visible=t.dailyRed(),this.lbAdopt.textFlow=M18.HTP.parser(O3.tr(6999,t.clearanceNum))},t.prototype.ZR54=function(){this.aCF(O6.B5,G2.A5)},t.prototype.closeSelf=function(){this.aCF(O6.B5,G2.A11)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TD99)switch(s){case P4.L5:case P4.F65:this.updateUI(t)}},t.prototype.close=function(){o.prototype.close.call(this),this.listView.close(),this.btnReceive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR54,this)},t}(BaseEuiView);__reflect(ExpEditionPreviewView.prototype,"ExpEditionPreviewView");var ExpEditionRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ExpEditionRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.touchEnabled=!1;var t={render:ExpEditionRankItemView,horizontalGap:0,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.dlg.title=O3.tr(6911),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6902)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(6903)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(6904)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(6905))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t),this.listView.open(),this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ14(this.closeSelf,this),this.ZU17()},t.prototype.ZU17=function(){var t={type:RankType.expEdition,currPage:1};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.uBM=function(t){t instanceof THH11&&this.ZHH63(t)},t.prototype.ZHH63=function(t){if(t.nType==RankType.expEdition){if(t.myRankList){var e=void 0;e=0<t.myRankList.nRank?M18.HTP.parse(O3.tr(6909,t.myRankList.nRank)):M18.HTP.parse(O3.tr(6909,0)),this.lbRanking.textFlow=e,this.lbShut.textFlow=M18.HTP.parse(O3.tr(6910,t.myRankList.on))}else this.lbRanking.textFlow=M18.HTP.parse(O3.tr(6909,0)),this.lbShut.textFlow=M18.HTP.parse(O3.tr(6910,0));var i=t.rankList||[];this.listView.rfL(i)}},t.prototype.closeSelf=function(){this.aCF(O6.B5,G2.A29)},t.prototype.close=function(){s.prototype.close.call(this),this.listView.close()},t}(BaseEuiView);__reflect(ExpEditionRankView.prototype,"ExpEditionRankView");var ExpEditionShutNameView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ExpEditionShutNameSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.touchEnabled=!1;var t={render:ExpEditionShutHeroItemView,tileLayout:!0,verticalGap:-10,horizontalGap:6,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.btnOpen.label=O3.tr(6912)},t.prototype.open=function(t){s.prototype.open.call(this),this.listView.open(),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnOpen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOpen,this),this.updateUI(t),this.aCF(O6.B5,G2.A27,t)},t.prototype.updateUI=function(t){var e=TD42.pass[t];this.lbName.textFlow=M18.HTP.parser(O3.tr(6913,e.name+"-"+e.passid)),this.btnOpen.visible=TE2.isCanChallenge(t)},t.prototype.close=function(){s.prototype.close.call(this),this.listView.close(),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnOpen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOpen,this)},t.prototype.uBM=function(t){t instanceof TD99&&this.ZB75()},t.prototype.ZB75=function(){for(var t=[],e=0;e<10;e++)t.push({});this.listView.rfL(t)},t.prototype.onClickOpen=function(){this.aCF(O6.B5,G2.A21)},t.prototype.closeSelf=function(){this.aCF(O6.B5,G2.A3)},t}(BaseEuiView);__reflect(ExpEditionShutNameView.prototype,"ExpEditionShutNameView");var ExpEditionView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sGN("release_expedition"),i.skinName="ExpEditionSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.CM.gtM(O6.B5).chooseCheckId=TE2.setNowHighchapter(),this.touchEnabled=!1,this.btnSweep.label=O3.tr(6876),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6924)),this.lbStr2.textFlow=M18.HTP.parser(O3.tr(6879)),this.lbStr3.textFlow=M18.HTP.parser(O3.tr(6880)),P7.FD57(O3.tr(6997),this.btnChallengeBox.lbName),this.btnUp.label=O3.tr(6877),this.btnDown.label=O3.tr(6878),this.warData.itemRenderer=ExpEditionWarItemView,this.warData.dataProvider=this.warCollection=new eui.ArrayCollection,this.clearanceData.itemRenderer=ItemIcon,this.clearanceData.dataProvider=this.clearanceCollection=new eui.ArrayCollection,this.firstData.itemRenderer=ItemIcon,this.firstData.dataProvider=this.firstCollection=new eui.ArrayCollection,this.setMapDatas(),this.setMapBg()},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.btnDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDown,this),this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnChallengeBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF30,this),this.btnSweep.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSweep,this),this.scMap.addEventListener(eui.UIEvent.CHANGE_END,this.updateArrow,this),this.updateUI()},t.prototype.updateArrow=function(){this.scMap.validateNow(),this.grpArrL.visible=0<this.scMap.viewport.scrollH,this.grpArrR.visible=this.scMap.width+this.scMap.viewport.scrollH<this.scMap.viewport.contentWidth},t.prototype.onClickSweep=function(){this.aCF(O6.B5,G2.A31)},t.prototype.onClickUp=function(){App.CM.gtM(O6.B5).chooseCheckId--,this.updateUI()},t.prototype.onClickDown=function(){var t=App.CM.gtM(O6.B5),e=TE2.getNextChapterIsopen(t.chooseCheckId+1);if(e.boo)t.chooseCheckId++,this.updateUI();else{var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e.lv]))}},t.prototype.onClickRank=function(){this.aCF(O6.B5,G2.A30)},t.prototype.ZF30=function(){this.aCF(O6.B5,G2.A19)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TD99)switch(s){case P4.L9:break;case P4.Q90:t.chooseCheckId=TE2.setNowHighchapter(),this.updateUI();break;default:this.updateUI()}},t.prototype.updateUI=function(){var t=TE2.getBattleHeroList();this.warCollection.replaceAll(t),this.setMap();var e=TE2.getNowChapterName();this.lbChapterName.textFlow=M18.HTP.parser(O3.tr(6881,e));var i,s=App.CM.gtM(O6.B5);if(this.firstGet.visible=s.isFirstAdopt,this.lbDispatch.textFlow=M18.HTP.parser(O3.tr(6974,s.nowBattleHeroList.length,TD42.heroNum)),this.btnUp.visible=1!=s.chooseCheckId,this.btnDown.visible=s.chooseCheckId!=TE2.setHighchapter(),this.btnChallengeBox.imgNew.visible=s.dailyRed(),this.btnSweep.imgNew.visible=s.canSweep,P16.sGF(this.btnSweep,!s.canSweep),s.checkId){var o=TD42.pass[s.checkId],r=TD42.pass[o.nextid];i=r||o}else i=TD42.passGroup[1][1];var n=i.firstData,a=[];for(var h in n){var p={itemData:{data:N12.gID(n[h].k),ct:n[h].v},isBottom:!1};a.push(p)}this.firstCollection.replaceAll(a);var l=i.dailyData,c=[];for(var h in l){p={itemData:{data:N12.gID(l[h].k),ct:l[h].v},isBottom:!1};c.push(p)}this.clearanceCollection.replaceAll(c),this.lbShutNum.textFlow=M18.HTP.parser(O3.tr(6883,i.passid)),this.updateDragonMainTitle()},t.prototype.updateDragonMainTitle=function(){var t=App.VM.gOV(O7.G46);if(t){var e=1==TE2.getNowChapterMode()?O3.tr(6875):O3.tr(8812);t.updateTitle(e)}},t.prototype.setMap=function(){this.setCities(),this.ZK55()},t.prototype.setCities=function(){var t=TE2.getChooseChapter();if(this.grpMap.numChildren>this.worldMapDatas.length)for(var e=this.worldMapDatas.length;e<this.grpMap.numChildren;e++){this.grpMap.getChildAt(e).setData(t[e-this.worldMapDatas.length])}else for(var i in t){var s=new ExpEditionCityItemView;s.setData(t[i]),this.grpMap.addChild(s)}},t.prototype.setMapBg=function(){var i=this,s=0;this.worldMapDatas.forEach(function(t){var e=new eui.Image;e.source=t,e.x=s,e.y=0,i.grpMap.addChild(e),s+=600})},t.prototype.setMapDatas=function(){this.worldMapDatas=["com_yzxiyi2_jpg","com_yzxiyi3_jpg"];TE2.getChooseChapter()},t.prototype.ZK55=function(){var t=TE2.getChooseChapter(),e=600*this.worldMapDatas.length-this.scMap.width;if(TE2.ZV46(t[1].chapter))return this.scMap.viewport.scrollH=0,void this.updateArrow();var i=TE2.hasPassCurMapIndex(t[1].chapter),s=TD42.position[i].x-100;s<0?s=0:e<s&&(s=e),this.scMap.viewport.scrollH=s,this.updateArrow()},t.prototype.close=function(){o.prototype.close.call(this),this.btnUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.btnDown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDown,this),this.btnRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnChallengeBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF30,this),this.btnSweep.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSweep,this),this.scMap.removeEventListener(eui.UIEvent.CHANGE_END,this.updateArrow,this),this.removeTween()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this)},t}(BaseEuiView);__reflect(ExpEditionView.prototype,"ExpEditionView");var TG19=function(){function t(){}return t.FK35=function(t){this.init=t.fabao_init,this.base=t.fabao_base,this.skill=t.fabao_skill,this.cell=t.fabao_cell,this.level=t.fabao_level,this.star=t.fabao_star,this.upgrade=t.fabao_upgrade,this.qiling=t.fabao_qiling,this.qilingUp=t.fabao_qilingup,this.aidfabao=t.fabao_aidfabao,this.starImgGroup=this.FE96(),this.starGroup=this.FI42(),this.skillGroup=this.FHH26(),this.setBaseData(),this.planNames.push(O3.tr(7025)),this.planNames.push(O3.tr(7026)),this.planNames.push(O3.tr(7027))},t.setBaseData=function(){if(this.init){this.qilingLv=this.FE59("qilingLv"),this.cuilingLv=this.FE59("cuilingLv"),this.qilingItem1=this.FE59("qilingItem1"),this.qilingItem2=this.FE59("qilingItem2");var t=this.gIV("cuilingItem1").split(":");this.quenchItem=parseInt(t[0]),this.quenchNum=parseInt(t[1]);var e=this.gIV("cuilingItem2").split(":");this.quenchHightItem=parseInt(e[0]),this.quenchHightNum=parseInt(e[1]),this.elixirItem=this.FE59("elixirItem");var i=M18.FL28(this.gIV("elixirAttr"),";",":");for(var s in i){var o=i[s],r=parseInt(o[0]),n=parseInt(o[1]);this.elixirAttr[r]={k:r,v:n}}}},t.FE96=function(){var t=[];if(!this.init)return t;var e=M18.FL28(this.gIV("starImg"),";",":");for(var i in e){var s={num:parseInt(e[i][0]),icon:e[i][1]};t.push(s)}return t},t.gIV=function(t){var e="";return this.init?e=this.init[t].value:e},t.FE59=function(t){var e;return this.init?e=parseInt(this.init[t].value):e},t.FHH26=function(){var t={};if(!this.skill)return t;for(var e in this.skill)t[this.skill[e].symbolid]||(t[this.skill[e].symbolid]={}),t[this.skill[e].symbolid][this.skill[e].needupgrade]=this.skill[e];return t},t.FI42=function(){var t={};if(!this.star)return t;for(var e in this.star)t[this.star[e].startype]||(t[this.star[e].startype]={}),t[this.star[e].startype][this.star[e].starlv]=this.star[e];return t},t.elixirAttr={},t.planNames=[],t}();__reflect(TG19.prototype,"TG19");var N9=function(){function t(){}return t.A35=10001,t.A36=10002,t.A5=10003,t.A6=10004,t.A8=10005,t.A9=10006,t.A13=10007,t.A14=10008,t.A23=10009,t.A24=10010,t.A28=10011,t.A29=10012,t.A25=10013,t.A26=10014,t.A30=10015,t.A31=10016,t.A10=10017,t.A11=10018,t.A1=10019,t.A2=10020,t.A3=10021,t.A4=10022,t.A15=10023,t.A16=10024,t.A17=10025,t.A18=10026,t.A37=10027,t.A32=20001,t.A27=20002,t.A21=20003,t.A19=20004,t.A22=20005,t.A20=20006,t.A34=20007,t.A33=20008,t.A12=20009,t.A7=20010,t}();__reflect(N9.prototype,"N9");var TE3=function(i){function t(){var t=i.call(this)||this,e=new TG62(t);return e.aLV(O7.I80),e.aLV(O7.I39),e.aLV(O7.G58),e.aLV(O7.G45),e.aLV(O7.HH27),e.aLV(O7.HH1),e.aLV(O7.G25),e.aLV(O7.HH74),e.aLV(O7.I30),App.VM.register(O7.HH27,"FaBaoMainView",t,K17.UI_Main_TOP),App.VM.register(O7.F26,"FaBaoAllAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.F25,"FaBaoOneAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.I30,"FaBaoDanView",t,K17.UI_Main_TOP),App.VM.register(O7.D64,"FaBaoSkillTipsView",t,K17.UI_Main_TOP),App.VM.register(O7.G35,"FaBaoQneTipView",t,K17.UI_Popup),t.proxy=new TG63(t),t.rgF(N9.A32,t.GL32,t),t.rgF(N9.A27,t.GJ51,t),t.rgF(N9.A21,t.GF75,t),t.rgF(N9.A19,t.GE59,t),t.rgF(N9.A22,t.GF76,t),t.rgF(N9.A20,t.GE60,t),t.rgF(N9.A34,t.GN26,t),t.rgF(N9.A33,t.GL33,t),t.rgF(N9.A12,t.GD64,t),t.rgF(N9.A7,t.GC75,t),t.rgF(N9.A35,t.loadReq,t),t.rgF(N9.A36,t.loadRes,t),t.rgF(N9.A5,t.GX31,t),t.rgF(N9.A6,t.GX32,t),t.rgF(N9.A8,t.breakReq,t),t.rgF(N9.A9,t.breakRes,t),t.rgF(N9.A13,t.GS52,t),t.rgF(N9.A14,t.GS53,t),t.rgF(N9.A23,t.GY24,t),t.rgF(N9.A24,t.GY25,t),t.rgF(N9.A28,t.GX33,t),t.rgF(N9.A29,t.GX34,t),t.rgF(N9.A3,t.GT4,t),t.rgF(N9.A4,t.GT5,t),t.rgF(N9.A25,t.GW34,t),t.rgF(N9.A26,t.GW35,t),t.rgF(N9.A30,t.GX55,t),t.rgF(N9.A31,t.GX56,t),t.rgF(N9.A10,t.GR5,t),t.rgF(N9.A11,t.GR6,t),t.rgF(N9.A1,t.GL30,t),t.rgF(N9.A2,t.GL31,t),t.rgF(N9.A15,t.GT6,t),t.rgF(N9.A16,t.GT7,t),t.rgF(N9.A17,t.GT8,t),t.rgF(N9.A18,t.GT9,t),t.rgF(N9.A37,t.GT10,t),t}return __extends(t,i),t.prototype.loadReq=function(){this.proxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.X51)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GX31=function(t,e){this.proxy.GX31(t,e)},t.prototype.GX32=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.K89)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.breakReq=function(t,e){this.proxy.breakReq(t,e)},t.prototype.breakRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.M86)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GS52=function(t,e){this.proxy.GS52(t,e)},t.prototype.GS53=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.P10)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GY24=function(t){this.proxy.GY24(t)},t.prototype.GY25=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.U7)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GX33=function(t){this.proxy.GX33(t)},t.prototype.GX34=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.V9)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW34=function(t,e){this.gtM().pos=e,this.proxy.GW34(t,e)},t.prototype.GW35=function(t){var e=this.gtM();200!=t.head.state?P18.sDP(K18.getTips(t.head.state)):e.setData(t.body),e.notify(P4.U9)},t.prototype.GX55=function(t,e,i){this.proxy.GX55(t,e,i)},t.prototype.GX56=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.V11)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GR5=function(t){this.proxy.GR5(t)},t.prototype.GR6=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.M88)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT4=function(){this.proxy.GT4()},t.prototype.GT5=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.I96)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GL30=function(){this.proxy.GL30()},t.prototype.GL31=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.HH24)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT6=function(t){this.proxy.GT6(t)},t.prototype.GT7=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.P12)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT8=function(t){this.proxy.GT8(t)},t.prototype.GT9=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.P14)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT10=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.X98)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GL32=function(t,e){App.VM.open(O7.HH27,t,e)},t.prototype.GJ51=function(){App.VM.close(O7.HH27)},t.prototype.GF75=function(){App.VM.open(O7.F26)},t.prototype.GE59=function(){App.VM.close(O7.F26)},t.prototype.GF76=function(){App.VM.open(O7.F25)},t.prototype.GE60=function(){App.VM.close(O7.F25)},t.prototype.GN26=function(){App.VM.open(O7.I30)},t.prototype.GL33=function(){App.VM.close(O7.I30)},t.prototype.GD64=function(){App.VM.open(O7.D64)},t.prototype.GC75=function(){App.VM.close(O7.D64)},t}(TE11);__reflect(TE3.prototype,"TE3");var FaBaoData=function(){function t(t){this.lv=0,this.isOwn=!1,this.isNeedSave=!1,this.quenchPower=0,this.power=0,this.initDataByDB(t)}return t.prototype.ZK75=function(t){this.lv=t.lv,this.isOwn=1<=t.lv,this.type=P7.getValue(t.ai,this.type),this.cd=P7.getValue(t.cd,this.cd);var e=1<=t.lv?t.lv:1,i=TG19.upgrade[e];switch(this.quality){case 4:this.quenchAttr=THH1.FI55(i.attrpurple);break;case 5:this.quenchAttr=THH1.FI55(i.attrorange);break;case 6:this.quenchAttr=THH1.FI55(i.attrred)}if(t.fps)for(var s in t.fps)this.fabaoParData[s].updateData(t.fps[s]),this.fabaoParData[s].isOwn=!0;this.updateServer(t),this.setPower()},t.prototype.updateServer=function(t){if(t.sa){if(this.quenchPower=0,this.allAttrVo=new FabaoAttrVo(t.sa),!this.allAttrVo.ats.length)for(var e in this.quenchAttr){var i=new avatar.AttribVo;i.k=parseInt(e),i.v=0,this.allAttrVo.ats.push(i)}for(var s=this.allAttrVo.ats,o=K18.attribute,r=0;r<s.length;r++){var n=o[s[r].k].power,a=s[r].v*n;this.quenchPower+=a}this.quenchPower=Math.floor(this.quenchPower)}t.ta&&(this.whileAttrVo=new FabaoAttrVo(t.ta),this.isNeedSave=0<this.whileAttrVo.ats.length)},t.prototype.getSkillIcon=function(){var t;for(var e in this.skillGroup)if(!t){t=this.skillGroup[e].icon;break}return t},t.prototype.getSkillInfo=function(t){var e;if(t)for(var i=0;i<this.skillGroupNum.length&&this.skillGroupNum[i]<=t;i++)e=this.skillGroup[this.skillGroupNum[i]];return e},t.prototype.getSkillDesc=function(){var t=this.getSkillInfo(this.lv);return t?t.desc:""},t.prototype.initDataByDB=function(t){for(var e in t)this[e]=t[e];this.cellidAny=this.cellid.split(","),this.fabaoParData={};for(var i=0;i<this.cellidAny.length;i++){var s={pos:parseInt(this.cellidAny[i]),lv:0,star:0};this.fabaoParData[this.cellidAny[i]]=new FabaoPartVo(s)}for(var e in this.addItemId=TG19.FE59("fabaoUpId"),this.skillGroup=TG19.skillGroup[this.symbolid],this.skillGroupNum=[],this.skillGroup)this.skillGroupNum.push(parseInt(e))},t.prototype.setPower=function(){var t=TG19.upgrade[this.lv];for(var e in this.power=0,this.isOwn&&(this.power+=M10.gAG(this.attr)),this.fabaoParData){var i=TG19.cell[this.fabaoParData[e].pos].startype,s=TG19.starGroup[i][this.fabaoParData[e].star],o=this.fabaoParData[e].lv;this.fabaoParData[e].isOwn&&(this.power+=M10.gAG(this.fabaoParData[e].baseAttr)),o&&(this.power+=M10.gAG(TG19.level[o].attr)),s&&(this.power+=M10.gAG(s.attr))}t&&(this.power=this.power*(1+parseFloat(t.ratio))),this.lv&&(this.power+=M10.gAG(this.attrgrow)*this.lv),this.power=Math.floor(this.power)},t.prototype.skinUpgrade=function(t){this.lv=t.lv,this.setPower()},t.prototype.getCanUnlock=function(){var t=!1,e=0;if(!this.isOwn&&1!=this.type){for(var i in this.fabaoParData)this.fabaoParData[i].isOwn&&(e+=1);t=4==e}return t},t.prototype.FL57=function(){var t=!1,e=0;if(this.isOwn&&1!=this.type){var i=TG19.upgrade[this.lv+1];if(i){for(var s in this.fabaoParData)if(this.fabaoParData[s].lv>=i.needlv&&this.fabaoParData[s].star>=i.needstar){var o=TG19.FE59("fabaoUpId");N12.gID(o);N12.giC(o)>=TG19.upgrade[this.lv+1].num&&(e+=1)}t=4==e}}return t},t.prototype.getCanAchieve=function(){var t=!1,e=0;if(this.isOwn&&1!=this.type){var i=TG19.upgrade[this.lv+1];if(i){for(var s in this.fabaoParData)this.fabaoParData[s].lv>=i.needlv&&this.fabaoParData[s].star>=i.needstar&&(e+=1);t=4==e}}return t},t.prototype.isHighestStar=function(t){var e=TG19.cell[t].startype;return!TG19.starGroup[e][this.fabaoParData[t].star+1]},t.prototype.isHighestUpgrade=function(t){return!TG19.level[this.fabaoParData[t].lv+1]},t.prototype.isHighestClass=function(){return!TG19.upgrade[this.lv+1]},t.prototype.getCanStar=function(){var t=!1;for(var e in this.fabaoParData){var i=TG19.cell[this.fabaoParData[e].pos],s=TG19.starGroup[i.startype][this.fabaoParData[e].star+1];if(s&&this.fabaoParData[e].isOwn){N12.gID(i.item);if(N12.giC(i.item)>=s.num){t=!0;break}}}return t},t.prototype.getCanUpgrade=function(){var t=!1;if(1!=this.type)for(var e in this.fabaoParData)if(this.fabaoParData[e].isOwn){var i=TG19.FE59("cellLvId"),s=(N12.gID(i),N12.giC(i)),o=(TG19.level[this.fabaoParData[e].lv],TG19.level[this.fabaoParData[e].lv+1]);if(o&&s>=o.num){t=!0;break}}else{var r=TG19.cell[this.fabaoParData[e].pos];N12.gID(r.item);if((s=N12.giC(r.item))>=r.reqnum){t=!0;break}}return t},t.prototype.isCanPosUpgrade=function(t){return this.fabaoParData[t].isOwn},t.prototype.FL35=function(){return this.getCanUnlock()?1:this.FL57()?1:this.getCanStar()?1:this.getCanUpgrade()?1:0},t.prototype.getPower=function(){return this.power},t.prototype.getUpAttr=function(t){return this.lv?TG19.upgrade[this.lv][t]:0},t.prototype.getNextUpAttr=function(t){return TG19.upgrade[this.lv+1][t]},t.prototype.getAddNum=function(){return TG19.upgrade[this.lv+1].num},t.prototype.getSkillName=function(){var t="";if(this.lv)for(var e=0;e<this.skillGroupNum.length&&this.skillGroupNum[e]<=this.lv;e++)t=this.skillGroup[this.skillGroupNum[e]].name;return t},t.prototype.getNextSkillName=function(){for(var t,e=this.lv+1,i=0;i<this.skillGroupNum.length;i++)if(this.skillGroupNum[i]>e){t=this.skillGroup[this.skillGroupNum[i-1]].name;break}return t},t.prototype.getInitSkillName=function(){var t,e=this.lv?this.lv:1;for(var i in this.skillGroup){if(!(parseInt(i)<=e))break;t=this.skillGroup[i].name}return t},t.prototype.getHightSkillName=function(){var t;for(var e in this.skillGroup)t=this.skillGroup[e].name;return t},t.prototype.getIsCanQuench=function(){var t=!1;if(this.isOwn&&this.allAttrVo)if(0<this.allAttrVo.ats.length)for(var e in this.allAttrVo.ats){var i=this.allAttrVo.ats[e].k;if(this.allAttrVo.ats[e].v<this.quenchAttr[i]){t=!0;break}}else t=!0;return t},t.prototype.FI15=function(){var t=[];for(var e in this.skillGroup)t.push(this.skillGroup[e]);return t},__decorate([Common.timeRefresh(!1)],t.prototype,"cd",void 0),t}();__reflect(FaBaoData.prototype,"FaBaoData");var TG62=function(i){function t(t){var e=i.call(this,t)||this;return e.danNum=0,e.armLv=0,e.organExp=0,e.checkIndex=1,e.useTips=!1,e}return __extends(t,i),t.prototype.setData=function(t){(t.fs&&(this.ZL27(t.fs),this.initPackList()),t.f)&&((e=this.skinList[t.f.id])&&e.ZK75(t.f),this.skillNum&&-1!=this.skillNum.indexOf(t.f.id)?this.packList[t.f.id]&&(this.packList[t.f.id]=e):0<t.f.lv&&(this.packList[t.f.id]=e));if(t.fid){var e=this.skinList[t.fid];if(t.fp)for(var i in e.fabaoParData){var s=e.fabaoParData[i];s.pos==t.fp.pos&&(s.updateData(t.fp),s.isOwn=!0)}t.sa&&e.updateServer(t),t.ta&&e.updateServer(t),e.setPower()}if(t.lp&&(this.lp=t.lp),this.danNum=null!=t.en?t.en:this.danNum,this.organExp=null!=t.qlExp?t.qlExp:this.organExp,null!=t.qlLv&&(this.armLv=t.qlLv,this.isHightArms=!TG19.qilingUp[this.armLv+1]),t.rf){if(this.skillList)for(var i in this.skillList){(o=this.skillList[i].fid)&&(this.packList||(this.packList={}),this.skinList[o].isOwn&&(this.packList[o]=this.skinList[o]))}for(var i in this.ZO37(),this.skillNum=[],t.rf){var o;this.skillNum.push(t.rf[i]),(o=this.skillList[i].fid)&&o!==t.rf[i]&&(this.packList||(this.packList={}),this.packList[o]=this.skinList[o]),this.skillList[i].initServerData(t.rf[i])}this.ZS15()}if(void 0!==t.cp&&(this.checkIndex=t.cp),t.pn){if(!this.skillPlanList){this.skillPlanList={};for(var r=1;r<=3;r++)this.skillPlanList[r]=new FaBaoPlanVo(r)}for(r=1;r<=3;r++)t.pn[r]&&this.skillPlanList[r].updataDataName(t.pn[r])}},t.prototype.ZS15=function(){var t=[];for(var e in this.skillList){var i=this.skillList[e].fid;i&&t.push(i)}for(var e in this.packList)-1!=t.indexOf(this.packList[e].id)&&(this.packList[e]=null,delete this.packList[e])},t.prototype.initPackList=function(){for(var t in this.packList={},this.skinList)0<this.skinList[t].lv&&(this.packList[t]=this.skinList[t])},Object.defineProperty(t.prototype,"skinViewId",{get:function(){return this._skinViewId},set:function(t){this._skinViewId=t,this.notify("changeSkin")},enumerable:!0,configurable:!0}),t.prototype.ZO36=function(){var t=TG19.base;for(var e in this.skinList={},this.allFaBaoNum=0,t){var i=t[e],s=new FaBaoData(i);this.skinList[i.id]=s,this.allFaBaoNum+=1}for(var e in TG19.aidfabao){i=TG19.aidfabao[e],s=new FaBaoData(i);this.skinList[i.id]=s,this.allFaBaoNum+=1}},t.prototype.ZO37=function(){this.skillList={};for(var t=1;t<5;t++)this.skillList[t]=new FabaoSkillVo({pos:t})},t.prototype.ZL27=function(t){this.skinList||this.ZO36();var e=Object.keys(t).map(function(t){return t+""});for(var i in this.skinList)e.indexOf(i)<0&&this.skinList[i].isOwn&&this.skinList[i].ZK75({lv:0});for(var s in t){var o=t[s],r=this.skinList[s];r&&r.ZK75(o)}},t.prototype.getRed=function(){if(TG64.FI45()){if(this.getRedNum1())return!0;if(this.getRedNum2())return!0;if(this.getRedNum3())return!0;if(this.getRedNum4())return!0}return!1},t.prototype.getRedNum1=function(){var t=0,e=App.CM.gtM(O6.B82),i=TG19.FE59("openLv");if(e.avatarInfo.l>=i)for(var s in this.skinList){if(this.skinList[s].FL35()){t=1;break}}return t},t.prototype.getRedNum2=function(){var t=0;if(this.skillList){for(var e in this.skillList)this.skillList[e].updateIsOwn();var i=TG64.FHH31();if(TG64.FHH32()-i)0<TG64.FK79().length&&(t=1)}return t},t.prototype.getRedNum3=function(){var t=!1;for(var e in this.skinList)if(this.skinList[e].getIsCanQuench()){t=!0;break}var i=O4.getLv();if(t&&i>=TG19.qilingLv){var s=N12.giC(TG19.quenchItem);if(s>=TG19.quenchNum)return 1;if((s=N12.giC(TG19.quenchHightItem))>=TG19.quenchHightNum)return 1}return 0},t.prototype.getRedNum4=function(){var t=0;if(O4.getLv()>=TG19.qilingLv&&TG19.qiling[this.lp.k]){var e=void 0,i=void 0;if(this.lp.v<=8){N12.gID(TG19.qilingItem1);e=N12.giC(TG19.qilingItem1),i=TG19.qiling[this.lp.k].item}else{N12.gID(TG19.qilingItem2);e=N12.giC(TG19.qilingItem2),i=TG19.qiling[this.lp.k].item2}i<=e&&t++,TG64.haveUseDan()&&t++}return t},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TG62.prototype,"TG62");var TG63=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.X98,e.GT10,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X50,body:{}};s.rSMO(P4.X51,function(t){s.apF(N9.A36,t),e("加载法宝信息完成")},s),s.sSM(i)})},t.prototype.GX31=function(t,e){var i={type:P4.K88,body:{fid:t,pos:e}};this.rSMO(P4.K89,this.partRes,this),this.sSM(i)},t.prototype.partRes=function(t){this.apF(N9.A6,t)},t.prototype.breakReq=function(t,e){var i={type:P4.M85,body:{fid:t,pos:e}};this.rSMO(P4.M86,this.ZS16,this),this.sSM(i)},t.prototype.ZS16=function(t){this.apF(N9.A9,t)},t.prototype.GS52=function(t,e){var i={type:P4.P9,body:{fid:t,pos:e}};this.rSMO(P4.P10,this.GY68,this),this.sSM(i)},t.prototype.GY68=function(t){this.apF(N9.A14,t)},t.prototype.GY24=function(t){var e={type:P4.U6,body:{fid:t}};this.rSMO(P4.U7,this.GW49,this),this.sSM(e)},t.prototype.GW49=function(t){this.apF(N9.A24,t)},t.prototype.GX33=function(t){var e={type:P4.V8,body:{fid:t}};this.rSMO(P4.V9,this.GX86,this),this.sSM(e)},t.prototype.GX86=function(t){this.apF(N9.A29,t)},t.prototype.GW34=function(t,e){var i={type:P4.U8,body:{fid:t,round:e}};this.rSMO(P4.U9,this.GW35,this),this.sSM(i)},t.prototype.GW35=function(t){this.apF(N9.A26,t)},t.prototype.GX55=function(t,e,i){var s={type:P4.V10,body:{fid:t,high:e,num:i}};this.rSMO(P4.V11,this.GX56,this),this.sSM(s)},t.prototype.GX56=function(t){this.apF(N9.A31,t)},t.prototype.GR5=function(t){var e={type:P4.M87,body:{fid:t}};this.rSMO(P4.M88,this.GR6,this),this.sSM(e)},t.prototype.GR6=function(t){this.apF(N9.A11,t)},t.prototype.GL30=function(){var t={type:P4.HH23,body:{}};this.rSMO(P4.HH24,this.GL31,this),this.sSM(t)},t.prototype.GL31=function(t){this.apF(N9.A2,t)},t.prototype.GT4=function(){var t={type:P4.I95,body:{}};this.rSMO(P4.I96,this.GT5,this),this.sSM(t)},t.prototype.GT5=function(t){this.apF(N9.A4,t)},t.prototype.GT6=function(t){var e={type:P4.P11,body:{page:t}};this.rSMO(P4.P12,this.GT7,this),this.sSM(e)},t.prototype.GT7=function(t){this.apF(N9.A16,t)},t.prototype.GT8=function(t){var e={type:P4.P13,body:{name:t}};this.rSMO(P4.P14,this.GT9,this),this.sSM(e)},t.prototype.GT9=function(t){this.apF(N9.A18,t)},t.prototype.GT10=function(t){this.apF(N9.A37,t)},t}(TG80);__reflect(TG63.prototype,"TG63");var TG64=function(){function o(){}return Object.defineProperty(o,"model",{get:function(){return App.CM.gtM(O6.C7)},enumerable:!0,configurable:!0}),o.FJ45=function(){return this.FHH27()+this.FI43()+this.FB71()},o.FHH27=function(){var t=0,e=App.CM.gtM(O6.C7);for(var i in e.skinList)t+=e.skinList[i].getPower();return Math.floor(t)},o.FB71=function(){var t=0,e=App.CM.gtM(O6.C7);for(var i in e.skinList)t+=e.skinList[i].quenchPower;return Math.floor(t)},o.FI43=function(){for(var t=0,e=App.CM.gtM(O6.C7),i=e.lp.k,s=e.lp.v-1,o=i-1;0<o;o--){var r=TG19.qiling[o];if(r)for(var n=1;n<=9;n++)t+=M10.gAG(r["attr"+n])}var a=TG19.qiling[i];for(o=s;0<o;o--)t+=M10.gAG(a["attr"+o]);t+=M10.FHH19(TG19.elixirAttr)*e.danNum;var h=this.getAddAttr();return t+=M10.FHH20(h),Math.floor(t)},o.getAddAttr=function(){for(var t=App.CM.gtM(O6.C7),e=t.lp.k,i=t.lp.v-1,s={101:0,102:0,103:0},o=e-1;0<o;o--){var r=TG19.qiling[o];if(r)for(var n=1;n<=9;n++){var a=this.getBaseAttr(r["attr"+n]);for(var h in a)null!=s[h]&&(s[h]+=a[h])}}var p=TG19.qiling[e];for(o=i;0<o;o--){a=this.getBaseAttr(p["attr"+o]);for(var h in a)null!=s[h]&&(s[h]+=a[h])}return s},o.getBaseAttr=function(t){var e={101:0,102:0,103:0},i=M18.FL28(t,";",":");for(var s in i)null!=e[i[s][0]]&&(e[i[s][0]]+=parseInt(i[s][1]));return e},o.getArmRatio=function(){var t=this.model;return parseFloat(TG19.qilingUp[t.armLv].ratio)},o.getArmNextRatio=function(){var t=this.model;return parseFloat(TG19.qilingUp[t.armLv+1].ratio)},o.FHH28=function(){var t=App.CM.gtM(O6.C7),e=0;for(var i in t.skinList)t.skinList[i].isOwn&&1!=t.skinList[i].type&&(e+=1);return e},o.FJ73=function(t,e){return t.k-e.k},o.FG13=function(){return App.CM.gtM(O6.C7).allFaBaoNum},o.FI14=function(t,e){if(!t.isOwn&&e.isOwn)return 1;if(t.isOwn&&!e.isOwn)return-1;if(t.isOwn||e.isOwn){if(t.isOwn&&e.isOwn){if(t.quality!=e.quality)return e.quality-t.quality;e.aptitude,t.aptitude}}else{if(t.FL35()!=e.FL35())return e.FL35()-t.FL35();if(t.quality!=e.quality)return t.quality-e.quality;t.aptitude,e.aptitude}},o.FHH29=function(t){var e,i,s=[],o=[],r=[];for(var n in t)if(t[n].isOwn)o.push(t[n]);else if(e)i==t[n].quality?o.push(t[n]):(o.sort(function(t,e){return t.aptitude-e.aptitude}),s=s.concat(o),(o=[]).push(t[n]),i=t[n].quality);else{for(var a in o)i?i==o[a].quality?r.push(o[a]):(r.sort(function(t,e){return e.aptitude-t.aptitude}),s=s.concat(r),(r=[]).push(o[a]),i=o[a].quality):(i=o[a].quality,r.push(o[a]));r&&1<r.length&&r.sort(function(t,e){return e.aptitude-t.aptitude}),s=s.concat(r),r=[],(o=[]).push(t[n]),i=t[n].quality,e=!0}if(e)o&&1<o.length&&o.sort(function(t,e){return t.aptitude-e.aptitude}),s=s.concat(o);else{for(var a in o)i?i==o[a].quality?r.push(o[a]):(r.sort(function(t,e){return e.aptitude-t.aptitude}),s=s.concat(r),(r=[]).push(o[a]),i=o[a].quality):(i=o[a].quality,r.push(o[a]));r&&1<r.length&&r.sort(function(t,e){return e.aptitude-t.aptitude}),s=s.concat(r)}return s.sort(function(t,e){return e.type-t.type})},o.FG3=function(){var t=[],e=o.FI46();for(var i in e){var s=e[i];t.push(s)}return t},o.FK79=function(){var t=[],e=App.CM.gtM(O6.C7);for(var i in e.packList){var s=e.packList[i];t.push(s)}return t},o.FL69=function(t){return M18.FL28(t,";",":")},o.FI44=function(t,e){for(var i in t)t[i][1]=parseInt(t[i][1])+parseInt(e[i][1]);return t},o.FJ74=function(t,e){for(var i in t)t[i][1]=parseInt(t[i][1])*(1+e);return t},o.FL70=function(t){var e="";for(var i in t){var s=K18.attribute[t[i][0]].name;e+=O3.tr(6110,s,t[i][1])}return e},o.FK80=function(t){var e="";for(var i in t){var s=K18.attribute[t[i][0]].name;e+=O3.tr(6111,s,t[i][1])}return e},o.FK81=function(t){var e={},i=App.CM.gtM(O6.C7);switch(t){case 1:for(var s in i.skinList){var o=i.skinList[s],r=0,n=TG19.upgrade[o.lv];for(var a in n&&(r=parseFloat(n.ratio)),o.fabaoParData){if((v=o.fabaoParData[a]).lv){var h=THH1.FI55(v.baseAttr);for(var p in h){var l=O4.FD72(parseInt(p)),c=parseInt(h[p]);null==e[p]&&(e[p]={value:0,name:l}),e[p].value=e[p].value+c*(1+r)}for(var p in h=THH1.FI55(v.lvAttr)){var u=O4.FD72(parseInt(p));c=parseInt(h[p]);null==e[p]&&(e[p]={value:0,name:u}),e[p].value=e[p].value+c*(1+r)}}else if(v.isOwn){h=THH1.FI55(v.baseAttr);for(var p in h){var d=O4.FD72(parseInt(p));c=parseInt(h[p]);null==e[p]&&(e[p]={value:0,name:d}),e[p].value=e[p].value+c*(1+r)}}}}break;case 2:for(var s in i.skinList){o=i.skinList[s],r=0,n=TG19.upgrade[o.lv];for(var a in n&&(r=parseFloat(n.ratio)),o.fabaoParData){var v=o.fabaoParData[a];h=THH1.FI55(v.starAttr);for(var p in h){var f=O4.FD72(parseInt(p));c=parseInt(h[p]);null==e[p]&&(e[p]={value:0,name:f}),e[p].value=e[p].value+c*(1+r)}}}break;case 3:for(var s in i.skinList){if((o=i.skinList[s]).lv){h=THH1.FI55(o.attr);for(var p in h){var g=O4.FD72(parseInt(p));c=parseInt(h[p]);null==e[p]&&(e[p]={value:0,name:g}),e[p].value=e[p].value+c}for(var p in h=THH1.FI55(o.attrgrow)){var m=O4.FD72(parseInt(p));c=parseInt(h[p])*(o.lv-1);null==e[p]&&(e[p]={value:0,name:m}),e[p].value=e[p].value+c}}}}for(var y=1;y<=3;y++)switch(y){case 1:e[avatar.AttributeKey.ATK]||(e[avatar.AttributeKey.ATK]={},e[avatar.AttributeKey.ATK].value=0,e[avatar.AttributeKey.ATK].name=O4.FD72(avatar.AttributeKey.ATK));break;case 2:e[avatar.AttributeKey.DEF]||(e[avatar.AttributeKey.DEF]={},e[avatar.AttributeKey.DEF].value=0,e[avatar.AttributeKey.DEF].name=O4.FD72(avatar.AttributeKey.DEF));break;case 3:e[avatar.AttributeKey.HP]||(e[avatar.AttributeKey.HP]={},e[avatar.AttributeKey.HP].value=0,e[avatar.AttributeKey.HP].name=O4.FD72(avatar.AttributeKey.HP))}for(var s in e)e[s].value=Math.round(e[s].value);return e},o.FK82=function(t){var e={},i=App.CM.gtM(O6.C7),s=i.skinList[i._skinViewId],o=0,r=TG19.upgrade[s.lv];switch(r&&(o=parseFloat(r.ratio)),t){case 1:for(var n in s.fabaoParData){if((d=s.fabaoParData[n]).lv){var a=THH1.FI55(d.baseAttr);for(var h in a){var p=O4.FD72(parseInt(h)),l=parseInt(a[h]);null==e[h]&&(e[h]={value:0,name:p}),e[h].value=e[h].value+l*(1+o)}for(var h in a=THH1.FI55(d.lvAttr)){var c=O4.FD72(parseInt(h));l=parseInt(a[h]);null==e[h]&&(e[h]={value:0,name:c}),e[h].value=e[h].value+l*(1+o)}}else if(d.isOwn){a=THH1.FI55(d.baseAttr);for(var h in a){var u=O4.FD72(parseInt(h));l=parseInt(a[h]);null==e[h]&&(e[h]={value:0,name:u}),e[h].value=e[h].value+l*(1+o)}}}break;case 2:for(var n in s.fabaoParData){var d=s.fabaoParData[n];a=THH1.FI55(d.starAttr);for(var h in a){var v=O4.FD72(parseInt(h));l=parseInt(a[h]);null==e[h]&&(e[h]={value:0,name:v}),e[h].value=e[h].value+l*(1+o)}}break;case 3:if(s.lv){a=THH1.FI55(s.attr);for(var h in a){var f=O4.FD72(parseInt(h));l=parseInt(a[h]);null==e[h]&&(e[h]={value:0,name:f}),e[h].value=e[h].value+l}for(var h in a=THH1.FI55(s.attrgrow)){var g=O4.FD72(parseInt(h));l=parseInt(a[h])*(s.lv-1);null==e[h]&&(e[h]={value:0,name:g}),e[h].value=e[h].value+l}}}for(var m=1;m<=3;m++)switch(m){case 1:e[avatar.AttributeKey.ATK]||(e[avatar.AttributeKey.ATK]={},e[avatar.AttributeKey.ATK].value=0,e[avatar.AttributeKey.ATK].name=O4.FD72(avatar.AttributeKey.ATK));break;case 2:e[avatar.AttributeKey.DEF]||(e[avatar.AttributeKey.DEF]={},e[avatar.AttributeKey.DEF].value=0,e[avatar.AttributeKey.DEF].name=O4.FD72(avatar.AttributeKey.DEF));break;case 3:e[avatar.AttributeKey.HP]||(e[avatar.AttributeKey.HP]={},e[avatar.AttributeKey.HP].value=0,e[avatar.AttributeKey.HP].name=O4.FD72(avatar.AttributeKey.HP))}for(var y in e)e[y].value=Math.round(e[y].value);return e},o.getPos=function(t){for(var e=[25,168,301,444],i=0,s=0;s<e.length;s++){if(e[s]<=t&&t<e[s]+143){i=s+1;break}}return i},o.FL71=function(t,e,i){var s=App.CM.gtM(O6.C7),o=!1;if(500<=e&&e<=720){var r=this.getPos(t);r&&(s.skillList[r].isOwn?(App.CM.apF(O6.C7,N9.A25,i,r),o=!0):P18.sDP(O3.tr(6228)))}return o},o.FHH30=function(t,e,i,s){var o=App.CM.gtM(O6.C7),r=!1;if(500<=e&&e<=720){var n=this.getPos(t);if(n&&s!==n)return o.skillList[s].isOwn?(App.CM.apF(O6.C7,N9.A25,i,n),!0):(P18.sDP(O3.tr(6228)),!1)}return 650<=e&&e<=900&&(App.CM.apF(O6.C7,N9.A25,0,s),r=!0),r},o.FK83=function(t){return App.CM.gtM(O6.C7).skillList[t].skin},o.FHH31=function(){var t=App.CM.gtM(O6.C7).skillList,e=0;for(var i in t)t[i].fid&&(e+=1);return e},o.FHH32=function(){var t=App.CM.gtM(O6.C7).skillList,e=0;for(var i in t)t[i].isOwn&&(e+=1);return e},o.FI45=function(){App.CM.gtM(O6.B82);var t=App.CM.gtM(O6.B43),e=O4.getLv(),i=t.serOpenDay+1,s=TG19.FE59("openLv"),o=!0;return(i<TG19.FE59("openDay")||e<s)&&(o=!1),o},o.FK84=function(){for(var t={},e=App.CM.gtM(O6.C7),i=e.lp.k,s=e.lp.v-1,o=i-1;0<o;o--){var r=TG19.qiling[o];if(r)for(var n=1;n<=9;n++){var a=THH1.FI55(r["attr"+n]);for(var h in a){var p=O4.FD72(parseInt(h)),l=parseInt(a[h]);null==t[h]&&(t[h]={value:0,name:p}),t[h].value+=l}}}var c=TG19.qiling[i];if(c)for(o=s;0<o;o--){a=THH1.FI55(c["attr"+o]);for(var h in a){var u=O4.FD72(parseInt(h));l=parseInt(a[h]);null==t[h]&&(t[h]={value:0,name:u}),t[h].value+=l}}for(var d in TG19.elixirAttr){var v=TG19.elixirAttr[d],f=O4.FD72(v.k);null==t[v.k]&&(t[v.k]={value:0,name:f}),t[v.k].value+=v.v*e.danNum}var g=this.getAddAttr();for(var d in g)t[d].value+=g[d]*this.getArmRatio();var m=[];for(var d in t)t[d].value=Math.round(t[d].value),m.push(t[d]);return m},o.FK85=function(){var t={},e=App.CM.gtM(O6.C7),i=e.lp.k,s=e.lp.v,o=TG19.qiling[i];if(o){var r=THH1.FI55(o["attr"+s]);for(var n in r){var a=O4.FD72(parseInt(n)),h=parseInt(r[n]);null==t[n]&&(t[n]={value:0,name:a}),t[n].value+=h}}var p=[];for(var l in t)t[l].value=Math.round(t[l].value),p.push(t[l]);return p},o.haveUseDan=function(){var t=!1,e=this.model,i=N12.giC(TG19.elixirItem);return!e.isHightArms&&i&&(t=!0),t},o.FJ34=function(){var t=this.model,e=[];for(var i in t.skillPlanList)e.push(t.skillPlanList[i]);return e},o.FJ35=function(){var t=this.model;return t.skillPlanList[t.checkIndex].name},o.FI46=function(t){void 0===t&&(t=!1);var e=App.CM.gtM(O6.C7),i={};for(var s in e.skinList){var o=e.skinList[s];(o.isOwn||0==o.type)&&(i[s]=o)}return i},o}();__reflect(TG64.prototype,"TG64");var FabaoAttrVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.serialVersionUID=null!=t.serialVersionUID?t.serialVersionUID:this.serialVersionUID,this.ats=null!=t.ats?t.ats:this.ats,this.ats.sort(TG64.FJ73)},t}();__reflect(FabaoAttrVo.prototype,"FabaoAttrVo");var FabaoPartVo=function(){function t(t){this.isOwn=!1,this.updateData(t)}return t.prototype.updateData=function(t){if(this.lv=null!=t.lv?t.lv:this.lv,this.pos=null!=t.pos?t.pos:this.pos,this.star=null!=t.star?t.star:this.star,this.lv&&(this.lvAttr=TG19.level[this.lv].attr,this.num=TG19.level[this.lv].num),this.star){var e=TG19.cell[this.pos].startype,i=TG19.starGroup[e][this.star];this.starAttr=i.attr}this.baseAttr=TG19.cell[this.pos].baseattr,this.itemid=TG19.cell[this.pos].item,this.itemUpgradeid=TG19.FE59("cellLvId")},t.prototype.isOpen=function(){return this.isOwn},t.prototype.getCanPosStar=function(){var t=!1,e=TG19.cell[this.pos].startype,i=TG19.starGroup[e][this.star+1];if(this.isOwn&&i){N12.gID(this.itemid);t=N12.giC(this.itemid)>=i.num}return t},t.prototype.getCanPosUpgrade=function(){var t=!1;if(this.isOwn){var e=TG19.FE59("cellLvId"),i=(N12.gID(e),N12.giC(e)),s=(TG19.level[this.lv],TG19.level[this.lv+1]);s&&(t=i>=s.num)}else{var o=TG19.cell[this.pos];N12.gID(o.item);t=(i=N12.giC(o.item))>=o.reqnum}return t},t.prototype.FL35=function(){return this.getCanPosStar()?1:this.getCanPosUpgrade()?1:0},t.prototype.getUpgradeNum=function(){return TG19.level[this.lv+1].num},t}();__reflect(FabaoPartVo.prototype,"FabaoPartVo");var FaBaoPlanVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.index=t,this.name=TG19.planNames[this.index-1]},t.prototype.updataDataName=function(t){this.name=t},t}();__reflect(FaBaoPlanVo.prototype,"FaBaoPlanVo");var FabaoSkillVo=function(){function t(t){this.isOwn=!1,this.initData(t)}return t.prototype.initData=function(t){if(this.pos=t.pos,1!=this.pos){var e=TG19.gIV("unlocked"+this.pos).split(",");this.unlock={lv:e[0],v:e[1]},this.updateIsOwn()}else this.isOwn=!0},t.prototype.updateIsOwn=function(){var t=App.CM.gtM(O6.B82);this.unlock&&(this.isOwn=t.avatarInfo.v>=parseInt(this.unlock.v)||t.avatarInfo.l>=parseInt(this.unlock.lv))},t.prototype.initServerData=function(t){this.fid=t,this.isOwn=!0;var e=TG19.base[this.fid]||TG19.aidfabao[this.fid];for(var i in this.skillGroup=TG19.skillGroup[e.symbolid],this.skillGroupNum=[],this.skillGroup)this.skillGroupNum.push(parseInt(i));if(this.updateServerData(),e)for(var i in e)this[i]=e[i]},t.prototype.updateServerData=function(){for(var t,e=App.CM.gtM(O6.C7).skinList[this.fid].lv,i=[],s=0;s<this.skillGroupNum.length;s++)this.skillGroupNum[s]<=e&&i.push(this.skillGroupNum[s]);var o=P7.FD54(i);if(t=this.skillGroup[o])for(var r in t)this[r]=t[r]},t.prototype.isOpen=function(){return this.isOwn},t.prototype.getSkillName=function(){var t,e=App.CM.gtM(O6.C7).skinList[this.fid].lv;if(e){for(var i=[],s=0;s<this.skillGroupNum.length;s++)this.skillGroupNum[s]<=e&&i.push(this.skillGroupNum[s]);var o=P7.FD54(i);t=this.skillGroup[o].name}return t},t.prototype.getSkillDesc=function(){var t,e=App.CM.gtM(O6.C7).skinList[this.fid].lv;if(e){for(var i=[],s=0;s<this.skillGroupNum.length;s++)this.skillGroupNum[s]<=e&&i.push(this.skillGroupNum[s]);var o=P7.FD54(i);t=this.skillGroup[o].desc}return t},t}();__reflect(FabaoSkillVo.prototype,"FabaoSkillVo");var FaBaoAddSkillItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this)},e.prototype.dataChanged=function(){var t,e=this.data.nowNum,i=e+"";t=-1==i.indexOf(".")?e:e.toFixed(1),this.data.boo?this.lbAttr.textFlow=(new egret.HtmlTextParser).parser(O3.tr(3721,this.data.desc,t)):this.lbAttr.textFlow=(new egret.HtmlTextParser).parser(O3.tr(3721,this.data.desc,t+"%"));var s=this.data.nextNum;this.data.nextNum&&0<this.data.nextNum?(this.grpAdd.visible=!0,t=-1==(i=this.data.nextNum+"").indexOf(".")?this.data.nextNum:s.toFixed(1),this.data.boo?this.lbAdd.textFlow=(new egret.HtmlTextParser).parser(O3.tr(3722,t)):this.lbAdd.textFlow=(new egret.HtmlTextParser).parser(O3.tr(3722,t+"%"))):this.grpAdd.visible=!1},e}(eui.ItemRenderer);__reflect(FaBaoAddSkillItem.prototype,"FaBaoAddSkillItem");var FaBaoAllAttrItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this),this.skinName="FaBaoAttrItemSkin"},e.prototype.dataChanged=function(){this.lbAttr.textFlow=M18.HTP.parser(O3.tr(6393,this.data.name,this.data.value))},e}(eui.ItemRenderer);__reflect(FaBaoAllAttrItem.prototype,"FaBaoAllAttrItem");var FaBaoArmsItem=function(e){function t(){var t=e.call(this)||this;return t.isSelected=!1,t.isInit=!1,t.skinName="FaBaoArmsItemSkin",t.touchEnabled=!1,t.imgSelected.visible=!1,t.imgNew.visible=!1,t}return __extends(t,e),t.prototype.destroy=function(){App.THH33.rEf(this,"iconSkill"),this.closeMainAui()},t.prototype.playAui=function(){this.isInit&&App.THH33.aUE(this,"iconSkill",-this.width/2+3,-this.height/2+3,1)},t.prototype.playMainAui=function(){App.THH33.aUE(this,"circle_qicai",-40,-40)},t.prototype.closeMainAui=function(){App.THH33.rEf(this,"circle_qicai")},Object.defineProperty(t.prototype,"selected",{get:function(){return this.isSelected},set:function(t){this.isSelected=t,this.imgSelected.visible=this.isSelected},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(FaBaoArmsItem.prototype,"FaBaoArmsItem");var FaBaoAttrItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this),this.skinName="FaBaoAttrItemSkin"},e.prototype.dataChanged=function(){this.lbAttr.textFlow=M18.HTP.parser(O3.tr(6392,this.data.name,this.data.value))},e}(eui.ItemRenderer);__reflect(FaBaoAttrItem.prototype,"FaBaoAttrItem");var FaBaoHurdlesItem=function(e){function t(){var t=e.call(this)||this;return t.isSelected=!1,t.touchEnabled=!1,t.skinName="FaBaoHurdlesItemSkin",t.touchEnabled=!1,t.imgSelected.visible=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this),App.THH33.rEf(this.gpEffect,"iconSkill"),this.oldStar=null,this.oldLv=null},t.prototype.setData=function(t,e){this.data&&this.data.pos==t.pos&&this.id==e&&(this.oldStar!==t.star&&App.THH33.aUE(this.gpEffect,"iconSkill",-54,-61,1),this.oldLv!==t.lv&&App.THH33.aUE(this.gpEffect,"iconSkill",-54,-61,1)),this.id=e;var i=TG19.base[e]||TG19.aidfabao[e];this.ai=!!i.type,this.data=t,this.oldStar=t.star,this.oldLv=t.lv;var s=TG19.cell[this.data.pos];this.imgHead.source=s.icon,this.imgLevelbg.visible=this.lbLevel.visible=!0,this.ai?(this.imgLevelbg.visible=this.lbLevel.visible=!1,P16.sGF(this.imgHead,!1)):this.data.isOwn?(this.lbLevel.textFlow=M18.HTP.parser(O3.tr(6100,this.data.lv)),P16.sGF(this.imgHead,!1)):(P16.sGF(this.imgHead,!0),this.lbLevel.textFlow=M18.HTP.parser(O3.tr(6142)));var o=TG19.starImgGroup;if(this.data.star){this.grpStar.visible=!0;var r=this.data.star%5,n=Math.floor(this.data.star/5);if(n){for(var a=0;a<this.grpStar.numChildren;a++){(h=this.grpStar.getChildAt(a)).visible=h.includeInLayout=!0,h.source=o[n-1].icon}for(a=0;a<r;a++){(h=this.grpStar.getChildAt(a)).source=o[n].icon}}else for(a=0;a<this.grpStar.numChildren;a++){var h;(h=this.grpStar.getChildAt(a)).visible=h.includeInLayout=a<r&&(h.source=o[0].icon,!0)}}else this.grpStar.visible=!1;this.imgRed.visible=!this.ai&&0<this.data.FL35()},Object.defineProperty(t.prototype,"selected",{get:function(){return this.isSelected},set:function(t){this.isSelected=t,this.imgSelected.visible=this.isSelected},enumerable:!0,configurable:!0}),t.prototype.ZU35=function(){this.selectHandler&&this.selectHandler.call(this.selectCallObj,this)},t.prototype.ZK29=function(t,e){this.selectHandler=t,this.selectCallObj=e},t}(eui.Component);__reflect(FaBaoHurdlesItem.prototype,"FaBaoHurdlesItem");var FaBaoIconItem=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName=IconHeroSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.imgRed.visible=0<this.data.FL35(),this.imgIcon.source=this.data.icon,this.imgBg.source=N12.getBox(this.data.quality),P7.FM14()?this.lbName.visible=!1:(this.lbName.visible=!0,this.lbName.text=this.data.name,O5.FB13(this.lbName,this.data.name,this.data.quality)),this.data.isOwn?(P16.sGF(this.imgIcon,!1),this.lbLv.visible=!0,this.data.type?this.lbLv.textFlow=O3.tr2(8462):(this.lbLv.text=O3.tr(6141,this.data.lv),O5.FB13(this.lbLv,this.lbLv.text,this.data.quality))):(this.lbLv.visible=!1,P16.sGF(this.imgIcon,!0))},t.prototype.onClick=function(){TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(FaBaoIconItem.prototype,"FaBaoIconItem");var FaBaoItemIcon=function(e){function i(){var t=e.call(this)||this;return t.skinName="FaBaoItemIconSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(i,e),i.prototype.open=function(){this.rect.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},i.prototype.dragEvent=function(t){switch(t.type){case egret.TouchEvent.TOUCH_MOVE:if(!this.copyfaBaoItemIcon)App.CM.gtM(O6.C7).selectId=this.data.id,this.copyfaBaoItemIcon=new i,this.copyfaBaoItemIcon.touchEnabled=!0,this.copyfaBaoItemIcon.lbMove.text=O3.tr(1148,this.data.lv),this.copyfaBaoItemIcon.lbName.text=this.data.name,O5.FB13(this.copyfaBaoItemIcon.lbName,this.data.name,this.data.quality),this.copyfaBaoItemIcon.imgBg.source=N12.getBox(this.data.quality),this.copyfaBaoItemIcon.imgIcon.source=this.data.icon,this.stage.addChild(this.copyfaBaoItemIcon);this.visible=!1,this.copyfaBaoItemIcon.x=t.stageX-this.width/2,this.copyfaBaoItemIcon.y=t.stageY-this.height/2;break;case egret.TouchEvent.TOUCH_END:this.playSwopAui(t);break;case egret.TouchEvent.TOUCH_BEGIN:this.ZW51()}},i.prototype.playSwopAui=function(t){if(this.ZL25(),this.copyfaBaoItemIcon){var e=this.copyfaBaoItemIcon.x,i=this.copyfaBaoItemIcon.y,s=App.VM.gOV(O7.HH1);if(s){var o=s.localToGlobal(0,0);e=this.copyfaBaoItemIcon.x-(o.x-20),i=this.copyfaBaoItemIcon.y-(o.y-114)}var r=TG64.FL71(e,i,this.data.id);this.visible=!r,this.stage.removeChild(this.copyfaBaoItemIcon),this.copyfaBaoItemIcon=null}},i.prototype.ZL25=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragEvent,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.dragEvent,this),this.rect.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this);var t=this.parent.parent;10<this.parent.numChildren&&(t.scrollPolicyV=eui.ScrollPolicy.ON)},i.prototype.ZW51=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.dragEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this),this.parent.parent.scrollPolicyV=eui.ScrollPolicy.OFF},i.prototype.close=function(){this.rect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},i.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},i.prototype.dataChanged=function(){this.visible=!0,1==this.data.type?this.lbMove.textFlow=O3.tr2(8506):this.lbMove.text=O3.tr(1148,this.data.lv),this.lbName.text=this.data.name,O5.FB13(this.lbName,this.data.name,this.data.quality),this.imgBg.source=N12.getBox(this.data.quality),this.imgIcon.source=this.data.icon},i}(eui.ItemRenderer);__reflect(FaBaoItemIcon.prototype,"FaBaoItemIcon");var FaBaoPlanItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="AvatarSkillPlanItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV28,this)},t.prototype.ZV28=function(){this.imgSelection.visible||App.CM.apF(O6.C7,N9.A15,this.data.index)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C7);this.imgSelection.visible=t.checkIndex==this.data.index,this.lbName.textFlow=M18.HTP.parse(O3.tr(7024,this.data.name))},t}(eui.ItemRenderer);__reflect(FaBaoPlanItemView.prototype,"FaBaoPlanItemView");var FaBaoPositionItem=function(e){function t(){var t=e.call(this)||this;return t.isSelected=!1,t.skinName="FaBaoPositionItemSkin",t.touchEnabled=!0,t.imgSelected.visible=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.dragEvent=function(t){switch(t.type){case egret.TouchEvent.TOUCH_MOVE:if(!this.img)App.CM.gtM(O6.C7).selectId=this.data.pos,this.img=new eui.Image,this.img.touchEnabled=!0,this.img.source=this.data.icon,this.stage.addChild(this.img),this.imgHead.visible=!1;this.img.x=t.stageX-this.width/2,this.img.y=t.stageY-this.height/2;break;case egret.TouchEvent.TOUCH_END:this.playSwopAui(t);break;case egret.TouchEvent.TOUCH_BEGIN:this.ZW51()}},t.prototype.playSwopAui=function(t){if(this.ZL25(),this.img){var e=TG64.FHH30(this.img.x,this.img.y,this.data.fid,this.data.pos);this.imgHead.visible=!e,this.stage.removeChild(this.img),this.img=null}},t.prototype.ZL25=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragEvent,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.dragEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.ZW51=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.dragEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.dragEvent,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.setData=function(t){this.data=t,this.lbRound.textFlow=M18.HTP.parser(O3.tr(6130,t.pos)),P16.sGF(this.imgBg,!t.isOwn),this.imgHead.visible=!0,this.lbUnlock.visible=!t.isOwn,t.isOwn?t.icon?this.imgHead.source=t.icon:this.imgHead.source=null:(this.imgHead.source=null,this.lbUnlock.textFlow=M18.HTP.parser(O3.tr(6131,t.unlock.lv,t.unlock.v))),this.imgBg.source=this.imgHead.source?"v1_img_dz_fb2_png":"v1_img_dz_fb_png"},Object.defineProperty(t.prototype,"selected",{get:function(){return this.isSelected},set:function(t){this.isSelected=t,this.imgSelected.visible=this.isSelected},enumerable:!0,configurable:!0}),t.prototype.ZU35=function(){this.isClick=!0,this.selectHandler&&this.selectHandler.call(this.selectCallObj,this)},t.prototype.ZK29=function(t,e){this.selectHandler=t,this.selectCallObj=e},t}(eui.Component);__reflect(FaBaoPositionItem.prototype,"FaBaoPositionItem");var FaBaoProBarItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this),this.skinName=FaBaoProBarSkin,this.proBar.slideDuration=0},e.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId],i=O4.FD72(this.data.k);if(e.isNeedSave){for(var s=e.whileAttrVo.ats,o=0;o<s.length;o++)if(s[o].k==this.data.k){0<=s[o].v?this.lbtext.textFlow=M18.HTP.parser(O3.tr(6389,i,this.data.v,s[o].v)):this.lbtext.textFlow=M18.HTP.parser(O3.tr(6390,i,this.data.v,s[o].v));break}}else this.lbtext.textFlow=M18.HTP.parser(O3.tr(6388,i,this.data.v));var r=parseInt(e.quenchAttr[this.data.k]);this.proBar.value=this.data.v,this.proBar.maximum=r},e}(eui.ItemRenderer);__reflect(FaBaoProBarItem.prototype,"FaBaoProBarItem");var FaBaoSkillItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this),this.skinName="FaBaoSkillItemSkin"},e.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t._skinViewId];this.lbDesc.textFlow=M18.HTP.parser(O3.tr(7061,this.data.desc)),this.data.needupgrade<=e.lv?this.lbName.textFlow=M18.HTP.parser(O3.tr(7059,this.data.name)):this.lbName.textFlow=M18.HTP.parser(O3.tr(7060,this.data.name,this.data.needupgrade))},e}(eui.ItemRenderer);__reflect(FaBaoSkillItem.prototype,"FaBaoSkillItem");var FaBaoTabBarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FaBaoTabBarSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.dataChanged=function(){"up"==this.currentState?this.lbName.textFlow=M18.HTP.parser(O3.tr(this.data.up)):this.lbName.textFlow=M18.HTP.parser(O3.tr(this.data.down))},t.prototype.setRed=function(t){this.imgRed.visible=t},t}(eui.ItemRenderer);__reflect(FaBaoTabBarItem.prototype,"FaBaoTabBarItem");var FaBaoAllAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.GX5()},t.prototype.GX5=function(){var t=O3.tr(6192);this.lbPowerTop.text=TG64.FJ45()+"";var e=App.CM.gtM(O6.C7),i=e.skinList[e._skinViewId];this.setData(i),this.setDlgInfo(N9.A19,t,!0),this.setListView()},t.prototype.setListView=function(){for(var t=[],e=0;e<3;e++){var i={},s={};switch(e){case 0:s=TG64.FK81(1),i.title=O3.tr(6193);break;case 1:s=TG64.FK81(2),i.title=O3.tr(6194);break;case 2:s=TG64.FK81(3),i.title=O3.tr(6195)}var o=1;for(var r in s)i["value"+o]=O3.tr(1489,s[r].name,s[r].value),o++;t.push(i)}this.dataSource.replaceAll(t)},t}(FaBaoHeroInfoBaseView);__reflect(FaBaoAllAttrView.prototype,"FaBaoAllAttrView");var FaBaoArmsView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=FaBaoArmsSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.touchEnabled=!1,this.btnUse.label=O3.tr(6119),this.itemIcon=new ItemIcon,this.iconGp.addChild(this.itemIcon),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6391)),this.lbStr2.textFlow=M18.HTP.parser(O3.tr(6444)),this.allAttrData.dataProvider=this.allCollection=new eui.ArrayCollection,this.allAttrData.itemRenderer=FaBaoAllAttrItem,this.nowAttrData.dataProvider=this.nowCollection=new eui.ArrayCollection,this.nowAttrData.itemRenderer=FaBaoAttrItem;for(var t=["com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba_png","com_fabaotuba2_png"],e=0;e<this.grpPellets.numChildren;e++){this.grpPellets.getChildAt(e).imgDan.source=t[e]}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUse,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDan,this),this.ZG21()},t.prototype.onClickUse=function(){var t,e,i=App.CM.gtM(O6.C7),s=0;TG19.qiling[i.lp.k]?s=i.lp.v<=8?(t=TG19.qilingItem1,TG19.qiling[i.lp.k].item):(t=TG19.qilingItem2,TG19.qiling[i.lp.k].item2):t=i.lp.v<=8?TG19.qilingItem1:TG19.qilingItem2,s<=(e=N12.giC(t))?this.apF(N9.A1):App.VM.open(O7.G87,t,s-e)},t.prototype.onClickDan=function(){this.apF(N9.A34)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof THH9)switch(s){case P4.V43:this.ZG21()}if(t instanceof TG62)switch(s){case P4.I96:case P4.HH24:this.ZG21()}},t.prototype.ZG21=function(){var t=App.CM.gtM(O6.C7);this.lbClass.textFlow=M18.HTP.parser(O3.tr(6394,t.lp.k-1));var e=TG64.FK84();this.allCollection.replaceAll(e),this.allAttrData.validateNow();var i=this.allAttrData.layout;switch(this.btnDan.imgNew.visible=TG64.haveUseDan(),this.allAttrData.numChildren){case 3:i instanceof eui.VerticalLayout&&(i.gap=14);break;case 4:i instanceof eui.VerticalLayout&&(i.gap=6);break;case 5:i instanceof eui.VerticalLayout&&(i.gap=2)}var s=TG64.FK85();this.nowCollection.replaceAll(s),this.lbScore.text=TG64.FI43()+"";for(var o=0;o<this.grpPellets.numChildren;o++){var r=this.grpPellets.getChildAt(o);o+1==this.grpPellets.numChildren?(r.selected=!1,t.lp.v-1==o?r.playMainAui():r.closeMainAui()):r.selected=t.lp.v-1==o;var n=t.lp.v-1<=o;r.imgDan.filters&&!n&&r.playAui(),t.lp.v-1==0&&o+1==this.grpPellets.numChildren&&r.playAui(),1<t.lp.k&&o+1==this.grpPellets.numChildren||!TG19.qiling[t.lp.k]?P16.sGF(r.imgDan,!1):P16.sGF(r.imgDan,n),r.isInit||(r.isInit=!0)}if(TG19.qiling[t.lp.k])if(P16.sGF(this.btnUse,!1),t.lp.v<=8){var a=N12.gID(TG19.qilingItem1),h=N12.giC(TG19.qilingItem1),p={itemData:{data:a,ct:0},isBottom:!1};this.itemIcon.data=p;var l=TG19.qiling[t.lp.k].item;this.btnUse.imgNew.visible=l<=h,this.lbNum.textFlow=l<=h?M18.HTP.parser(O3.tr(6384,h,l)):M18.HTP.parser(O3.tr(6385,h,l))}else{a=N12.gID(TG19.qilingItem2),h=N12.giC(TG19.qilingItem2),p={itemData:{data:a,ct:0},isBottom:!1};this.itemIcon.data=p;l=TG19.qiling[t.lp.k].item2;this.btnUse.imgNew.visible=l<=h,this.lbNum.textFlow=l<=h?M18.HTP.parser(O3.tr(6384,h,l)):M18.HTP.parser(O3.tr(6385,h,l))}else if(this.btnUse.imgNew.visible=!1,P16.sGF(this.btnUse,!0),t.lp.v<=8){a=N12.gID(TG19.qilingItem1),h=N12.giC(TG19.qilingItem1),p={itemData:{data:a,ct:0},isBottom:!1};this.itemIcon.data=p,this.lbNum.textFlow=M18.HTP.parser(O3.tr(6384,h,0))}else{a=N12.gID(TG19.qilingItem2),h=N12.giC(TG19.qilingItem2),p={itemData:{data:a,ct:0},isBottom:!1};this.itemIcon.data=p,this.lbNum.textFlow=M18.HTP.parser(O3.tr(6384,h,0))}},t.prototype.close=function(){o.prototype.close.call(this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUse,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDan,this)},t}(BaseEuiView);__reflect(FaBaoArmsView.prototype,"FaBaoArmsView");var FaBaoDanView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=FaBaoDanSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(7033)),this.lbStr2.textFlow=M18.HTP.parser(O3.tr(7034)),this.lbStr3.textFlow=M18.HTP.parser(O3.tr(7035)),this.lbStr4.textFlow=M18.HTP.parser(O3.tr(7036)),this.btnAdd.label=O3.tr(7042),this.barProgress.slideDuration=0},t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.updateUI()},t.prototype.close=function(){this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this)},t.prototype.closeSelf=function(){this.apF(N9.A33)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C7),e=N12.gID(TG19.elixirItem),i=N12.giC(TG19.elixirItem);this.dlg.title=O3.tr(7044),this.imgQuality.source=N12.getBox(e.quality),O5.FB13(this.lbName,e.name,e.quality),this.imgHead.source=N12.FJ86(e.id),this.barProgress.labelDisplay.textFlow=M18.HTP.parser(O3.tr(7046,this.barProgress.labelDisplay.text)),P16.sGF(this.btnAdd,t.isHightArms),this.lbLv.textFlow=M18.HTP.parser(O3.tr(7039,t.armLv));var s="",o=TG64.getAddAttr();if(t.isHightArms)this.barProgress.value=this.barProgress.maximum=TG19.qilingUp[t.armLv-1].num,this.btnAdd.imgNew.visible=!1,this.lbNextBaseAttr.textFlow=M18.HTP.parser(O3.tr(7043)),this.lbDemand.textFlow=M18.HTP.parser(O3.tr(7041,i,0));else{this.barProgress.maximum=TG19.qilingUp[t.armLv].num,this.barProgress.value=t.organExp,this.btnAdd.imgNew.visible=0<i,this.lbDemand.textFlow=0<i?M18.HTP.parser(O3.tr(7041,i,1)):M18.HTP.parser(O3.tr(7040,0,1)),s="";var r=TG64.getArmNextRatio();for(var n in o){var a=K18.attribute[n].name;s+=O3.tr(7037,a,(100*r).toFixed(0),Math.floor(o[n]*r))}this.lbNextBaseAttr.textFlow=M18.HTP.parser(s)}if(s="",t.armLv)for(var n in o){var h=K18.attribute[n].name;s+=O3.tr(7037,h,(100*TG64.getArmRatio()).toFixed(0),Math.floor(o[n]*TG64.getArmRatio()))}else for(var n in o){var p=K18.attribute[n].name;s+=O3.tr(7038,p,0)}this.lbNowBaseAttr.textFlow=M18.HTP.parser(s);var l=0;for(var n in TG19.elixirAttr){var c=TG19.elixirAttr[n].v*t.danNum;this["lbAttr"+l].textFlow=M18.HTP.parser(O3.tr(7045,K18.attribute[n].name,Math.floor(c))),l++}},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TG62&&this.updateUI()},t.prototype.startUse=function(){this.apF(N9.A3)},t.prototype.ZQ49=function(){var t=N12.gID(TG19.elixirItem);P5.FC75(t)},t}(BaseEuiView);__reflect(FaBaoDanView.prototype,"FaBaoDanView");var FaBaoGoIngView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName=FaBaoGoIngSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.touchEnabled=!1;var t={render:FaBaoItemIcon,tileLayout:!0,verticalGap:0,horizontalGap:-10,width:this.listGroup.width,height:this.listGroup.height};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6134)),this.tabBar.dataProvider=this.tabCollection=new eui.ArrayCollection,this.planData.dataProvider=this.planCol=new eui.ArrayCollection,this.planData.itemRenderer=FaBaoPlanItemView,this.tabBar.itemRenderer=FaBaoTabBarItem,this.tabCollection.replaceAll([{up:6219,down:6220,type:"main"}]),this.ZS17()},t.prototype.ZS17=function(){for(var t=0;t<4;t++){var e=this.grpPos.getChildAt(t);e&&e.ZK29(this.GW87,this)}},t.prototype.GW87=function(t){t.data.isOwn?(this.selectedSkill&&(this.selectedSkill.selected=!1),this.selectedSkill=t,this.selectedSkill.selected=!0,this.ZQ39()):P18.sDP(O3.tr(6228))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this),this.listView.open(),this.showAction();var i=App.CM.gtM(O6.C7);this.ZG21(i),this.choosePlan(),this.imgArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickArrow,this),this.testText.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusTest,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBg,this),this.downState()},t.prototype.choosePlan=function(){for(var t=App.CM.gtM(O6.C7),e=0,i=0;i<4;i++){if(this.grpPos.getChildAt(i))if(t.skillList[i+1].fid){e=i;break}}var s=this.grpPos.getChildAt(e);t.pos=e+1,this.firstSelect(s)},t.prototype.onClickBg=function(){this.downState()},t.prototype.downState=function(){0==this.planData.y&&(this.planData.y=-this.grp.height,this.imgArrow.source="v1_btn_shangyi_zjm_png")},t.prototype.onClickArrow=function(){0==this.planData.y?this.downState():(this.imgArrow.touchEnabled=!1,this.upState())},t.prototype.upState=function(){var t=this;egret.Tween.get(this.planData).to({y:0},100).call(function(){t.imgArrow.touchEnabled=!0,t.imgArrow.source="v1_btn_xiala_zjm_png"})},t.prototype.onFocusTest=function(){this.aCF(O6.C7,N9.A17,this.testText.text)},t.prototype.setPackData=function(){var t=TG64.FK79();this.listView.rfL(t)},t.prototype.firstSelect=function(t){this.selectedSkill&&(this.selectedSkill.selected=!1),this.selectedSkill=t,this.selectedSkill.selected=!0,this.ZQ39()},t.prototype.ZQ39=function(){this.selectedSkill&&this.selectedSkill.data&&this.updateUI()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG62)switch(s){case P4.U9:this.ZG21(t),this.updateUI();var o=this.grpPos.getChildAt(t.pos-1);this.firstSelect(o);break;case P4.P14:this.ZG21(t),this.updateUI();break;case P4.P12:this.ZG21(t),this.updateUI(),this.choosePlan()}},t.prototype.showAction=function(){var t=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],e={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.grpMy.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(e),t.bt=BehaviourType.Stand_d,this.objBoss.setData(t,this.grpMy),this.objBoss.name=null,this.objBoss.titleId=null},t.prototype.ZN1=function(){var t=TG64.FK83(this.selectedSkill.data.pos);if(t){if(this.grpFaBao.visible=!0,this.objFaBao||(this.objFaBao=new FightGameObject),!this.objFaBao.body||this.objFaBao.body.id!=t){var e={id:t,x:0,y:0,dir:Dir.br,objType:P13.A6};this.objFaBao.setData(e,this.grpFaBao)}}else this.grpFaBao.visible=!1},t.prototype.ZG21=function(t){for(var e=0;e<4;e++){var i=this.grpPos.getChildAt(e);if(i){var s=t.skillList[e+1];i.setData(s),s&&s.isOpen()&&null==this.selectedSkill&&(this.selectedSkill=i,this.selectedSkill.selected=!0)}}},t.prototype.updateUI=function(){var t=this.selectedSkill.data;App.CM.gtM(O6.C7);if(t.name){var e=new eui.Label;e.size=20;for(var i="";i+="　",e.textFlow=M18.HTP.parse(i),e.width<this.imgText.width-15;);var s=t.getSkillDesc(),o=i+O3.tr(6263,t.pos,s),r=M18.HTP.parse(o);this.lbDesc.textFlow=r,this.lbSkillName.textFlow=M18.HTP.parse(O3.tr(6223,t.getSkillName()))}else this.lbSkillName.textFlow=null,this.lbDesc.textFlow=null;this.setPackData(),this.ZN1(),this.planCol.replaceAll(TG64.FJ34()),this.testText.textFlow=M18.HTP.parse(O3.tr(7024,TG64.FJ35()))},t.prototype.close=function(){r.prototype.close.call(this),this.grpMy.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.grpFaBao.removeChildren(),this.objFaBao&&(this.objFaBao.destory(),this.objFaBao=null),this.removeTween(),this.listView.close(),this.imgArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickArrow,this),this.testText.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusTest,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBg,this)},t.prototype.removeTween=function(){egret.Tween.removeTweens(this)},t}(BaseEuiView);__reflect(FaBaoGoIngView.prototype,"FaBaoGoIngView");var FaBaoIcon=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName=IconHeroSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.imgRed.visible=0<this.data.FL35(),this.imgIcon.source=this.data.icon,this.imgBg.source=N12.getBox(this.data.quality),this.lbName.text=this.data.name,O5.FB13(this.lbName,this.data.name,this.data.quality),this.data.isOwn?(P16.sGF(this.imgIcon,!1),this.lbLv.visible=!0,this.lbLv.text="Lv."+this.data.lv):(this.lbLv.visible=!1,P16.sGF(this.imgIcon,!0))},t.prototype.onClick=function(){TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(FaBaoIcon.prototype,"FaBaoIcon");var FaBaoMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.HH27,O7.I80,"FaBaoView",this.content),App.VM.rgS(O7.HH27,O7.HH1,"FaBaoGoIngView",this.content),App.VM.rgS(O7.HH27,O7.G25,"FaBaoQuenchView",this.content),App.VM.rgS(O7.HH27,O7.HH74,"FaBaoArmsView",this.content),this.title=O3.tr(6133);var t=[O3.tr(6132),O3.tr(6137),O3.tr(6138),O3.tr(6139)],e=[O7.I80,O7.HH1,O7.G25,O7.HH74];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0,this.titleStr=O3.tr(1831)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.topContent=new FaoBaoSkinIconList,this.content.addChild(this.topContent),this.topContent.top=-8;App.CM.gtM(O6.C7);this.topContent.listData=TG64.FI46(!0),this.topContent.updateDot(),this.updateBtnRed();var i=t[0]||O7.I80;t[1]&&(this.index=t[1]),this.ZQ23(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG62&&(this.topContent.listData=TG64.FG3()),this.updateBtnRed()},t.prototype.ZQ23=function(t){var e=O4.getLv();switch(t){case O7.I80:this.helpBtn.visible=!0,this.topContent.$setVisible(!0),this.btnList.ZM66(t),this.contentStr=O3.tr(6206);break;case O7.HH1:this.helpBtn.visible=!0,this.topContent.$setVisible(!1),this.btnList.ZM66(t),this.contentStr=O3.tr(6490);break;case O7.G25:e>=TG19.cuilingLv?(this.helpBtn.visible=!0,this.topContent.$setVisible(!0),this.btnList.ZM66(t),this.topContent.endScroller(),this.contentStr=O3.tr(6491)):P18.sDP(O3.tr(400,TG19.cuilingLv));break;case O7.HH74:e>=TG19.qilingLv?(this.helpBtn.visible=!1,this.topContent.$setVisible(!1),this.btnList.ZM66(t),this.topContent.endScroller()):P18.sDP(O3.tr(400,TG19.qilingLv))}this.content.setChildIndex(this.topContent,this.content.numChildren-1)},t.prototype.updateBtnRed=function(){var t=App.CM.gtM(O6.C7);this.btnList.ZHH58(O7.I80,t.getRedNum1()),this.btnList.ZHH58(O7.HH1,t.getRedNum2()),this.btnList.ZHH58(O7.G25,t.getRedNum3()),this.btnList.ZHH58(O7.HH74,t.getRedNum4())},t.prototype.openHelpView=function(){var t={title:this.titleStr,content:this.contentStr};this.aCF(O6.C18,O10.A24,t)},t.prototype.close=function(){s.prototype.close.call(this),App.CM.gtM(O6.C7)._skinViewId=null,this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),P7.FK28(),this.content.removeChildren(),this.topContent.listData=null,this.topContent=null},t}(BasePanelView);__reflect(FaBaoMainView.prototype,"FaBaoMainView");var FaBaoOneAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.GX5()},t.prototype.GX5=function(){var t=O3.tr(6191),e=App.CM.gtM(O6.C7),i=e.skinList[e._skinViewId];this.lbPowerTop.text=i.getPower()+"",this.setData(i),this.setDlgInfo(N9.A20,t,!0);for(var s=[],o=0;o<3;o++){var r={},n={};switch(o){case 0:n=TG64.FK82(1),r.title=O3.tr(6193);break;case 1:n=TG64.FK82(2),r.title=O3.tr(6194);break;case 2:n=TG64.FK82(3),r.title=O3.tr(6195)}var a=1;for(var h in n)r["value"+a]=O3.tr(1489,n[h].name,n[h].value),a++;s.push(r)}this.dataSource.replaceAll(s)},t}(FaBaoHeroInfoBaseView);__reflect(FaBaoOneAttrView.prototype,"FaBaoOneAttrView");var FaBaoQneTipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ShootRangeTipSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.C7)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.lbTitle.text=O3.tr(7104),this.ckDot.label=O3.tr(7793),this.btnConfirm.label=O3.tr(7794),this.btnCancel.label=O3.tr(7795),this.labItem.text=O3.tr(8026),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.ckDot.selected=this.model.useTips},t.prototype.open=function(t){s.prototype.open.call(this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),s.prototype.close.apply(this,t)},t.prototype.save=function(){this.model.useTips=this.ckDot.selected},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.ZQ58=function(){App.VM.GY64(this),this.save();var t=this.model,e=t.skinList[t.skinViewId];this.apF(N9.A30,e.id,1,10)},t}(BaseEuiView);__reflect(FaBaoQneTipView.prototype,"FaBaoQneTipView");var FaBaoQuenchView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=FaBaoQuenchSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.touchEnabled=!1,this.btnQuench.label=O3.tr(6138),this.btnQuenchT.label=O3.tr(8025),this.btnHighQuench.label=O3.tr(6386),this.btnDeposit.label=O3.tr(6387),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6395)),this.lbStr2.textFlow=M18.HTP.parser(O3.tr(6395)),this.lbStr0.textFlow=M18.HTP.parser(O3.tr(6395)),this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6383)),this.attrData.dataProvider=this.attrCollection=new eui.ArrayCollection,this.attrData.itemRenderer=FaBaoProBarItem;var t=N12.gID(TG19.quenchItem);this.imgQuench.setData(t),this.imgQuenchT.setData(t),t=N12.gID(TG19.quenchHightItem),this.imgHighQuench.setData(t),this.lbdesc.textFlow=O3.tr2(8810)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.btnQuench.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW52,this),this.btnQuenchT.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS18,this),this.btnHighQuench.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI53,this),this.btnDeposit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS19,this),this.updateUI()},t.prototype.ZW52=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId],i=N12.giC(TG19.quenchItem);if(e.isOwn)if(e.getIsCanQuench())i>=TG19.quenchNum?this.apF(N9.A30,e.id,1,1):App.VM.open(O7.G87,TG19.quenchItem,TG19.quenchNum-i);else{var s=O3.tr(8029);P18.sDP(s)}else{s=O3.tr(8031);P18.sDP(s)}},t.prototype.ZS18=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId],i=N12.giC(TG19.quenchItem);if(e.isOwn)if(e.getIsCanQuench())i>=10*TG19.quenchNum?t.useTips?this.apF(N9.A30,e.id,1,10):App.VM.open(O7.G35):App.VM.open(O7.G87,TG19.quenchItem,10*TG19.quenchNum-i);else{var s=O3.tr(8029);P18.sDP(s)}else{s=O3.tr(8031);P18.sDP(s)}},t.prototype.ZI53=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId],i=N12.giC(TG19.quenchHightItem),s=10*TG19.quenchHightNum<=i?10:1;if(e.isOwn)if(e.getIsCanQuench())i>=TG19.quenchHightNum?this.apF(N9.A30,e.id,2,s):App.VM.open(O7.G87,TG19.quenchHightItem,TG19.quenchHightNum-i);else{var o=O3.tr(8029);P18.sDP(o)}else{o=O3.tr(8031);P18.sDP(o)}},t.prototype.ZS19=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId];this.apF(N9.A10,e.id)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof THH9)switch(s){case P4.V43:this.ZG21()}if(t instanceof TG62)switch(s){case P4.M88:case P4.V11:this.ZG21();break;case"changeSkin":this.updateUI()}},t.prototype.ZG21=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId];if(this.gPower.visible=this.gq.visible=!0,this.labStr.visible=!1,e.type)this.gq.visible=this.gPower.visible=!1,this.labStr.visible=!0,this.labStr.textFlow=O3.tr2(8464);else{this.lbPowerTop.text=e.quenchPower.toString();var i=N12.giC(TG19.quenchItem);i>=TG19.quenchNum&&e.getIsCanQuench()?(this.btnQuench.imgNew.visible=!0,this.btnQuench.bgStr="v1_btn_yellow_1_png",this.lbQuench.textFlow=M18.HTP.parser(O3.tr(6396,i,TG19.quenchNum))):(this.btnQuench.imgNew.visible=!1,this.btnQuench.bgStr="v1_btn_green_1_png",this.lbQuench.textFlow=M18.HTP.parser(O3.tr(6397,i,TG19.quenchNum))),i>=10*TG19.quenchNum&&e.getIsCanQuench()?(this.btnQuenchT.imgNew.visible=!0,this.btnQuenchT.bgStr="v1_btn_yellow_1_png",this.lbQuenchT.textFlow=M18.HTP.parser(O3.tr(6396,i,10*TG19.quenchNum))):(this.btnQuenchT.imgNew.visible=!1,this.btnQuenchT.bgStr="v1_btn_green_1_png",this.lbQuenchT.textFlow=M18.HTP.parser(O3.tr(6397,i,10*TG19.quenchNum))),i=N12.giC(TG19.quenchHightItem);var s=10*TG19.quenchHightNum;this.btnHighQuench.label=O3.tr(6386),i>=TG19.quenchHightNum&&e.getIsCanQuench()?(this.btnHighQuench.imgNew.visible=!0,this.btnHighQuench.bgStr="v1_btn_yellow_1_png",this.lbHighQuench.textFlow=M18.HTP.parser(O3.tr(6396,i,TG19.quenchHightNum)),s<=i&&(this.btnHighQuench.label=O3.tr(6870))):(this.btnHighQuench.imgNew.visible=!1,this.btnHighQuench.bgStr="v1_btn_green_1_png",this.lbHighQuench.textFlow=M18.HTP.parser(O3.tr(6397,i,TG19.quenchHightNum))),P16.sGF(this.btnDeposit,!e.isNeedSave),this.btnDeposit.enabled=e.isNeedSave;var o=P7.copyTab(e.allAttrVo.ats);this.attrCollection.replaceAll(o)}},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t.skinViewId];this.imgIconBg.source=e.iconbg,this.ZG21(),e.getCanUnlock()?(P16.sGF(this.imgIconBg,!0),this.lbName.textFlow=M18.HTP.parser(O3.tr(6102,e.name))):e.isOwn?(P16.sGF(this.imgIconBg,!1),this.lbName.textFlow=M18.HTP.parser(O3.tr(6101,e.name))):(P16.sGF(this.imgIconBg,!0),this.lbName.textFlow=M18.HTP.parser(O3.tr(6201,e.name)))},t.prototype.playAui=function(){App.THH32.rEf(this.grpAui,"wdsg_fzjmtx_lg_001")},t.prototype.close=function(){o.prototype.close.call(this),this.btnQuench.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW52,this),this.btnHighQuench.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI53,this),this.btnDeposit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS19,this),this.btnQuenchT.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS18,this),this.removeTween(),App.THH32.rEf(this.grpAui,"wdsg_fzjmtx_lg_001"),App.THH32.rEf(this.grpAui,"wdsg_fzjmtx_lg_002")},t.prototype.removeTween=function(){egret.Tween.removeTweens(this)},t}(BaseEuiView);__reflect(FaBaoQuenchView.prototype,"FaBaoQuenchView");var FaBaoSkillTipsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="FaBaoSkillTipsSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:FaBaoSkillItem,gap:14,width:this.listGrp.width,height:this.listGrp.height};this.listView=new CommonListBase(t),this.listGrp.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.skill.enabled=!1},t.prototype.open=function(t){s.prototype.open.call(this),this.listView.open(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updataUI()},t.prototype.updataUI=function(){var t=App.CM.gtM(O6.C7),e=t.skinList[t._skinViewId];this.lbName.textFlow=M18.HTP.parser(O3.tr(7058,e.getInitSkillName())),this.listView.rfL(e.FI15()),this.skill.imgIcon.source=e.getSkillIcon()},t.prototype.closeSelf=function(){this.apF(N9.A7)},t.prototype.close=function(){s.prototype.close.call(this),this.listView.close(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(FaBaoSkillTipsView.prototype,"FaBaoSkillTipsView");var FaBaoView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName=FaBaoSkin,i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.touchEnabled=!1,this.btnOpen.label=O3.tr(6118),this.btnUnlock.label=O3.tr(6119),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(6109)),this.lbStr2.textFlow=M18.HTP.parser(O3.tr(6113)),this.lbStr4.textFlow=M18.HTP.parser(O3.tr(6108)),this.itemIcon=new ItemIcon,this.iconGp.addChild(this.itemIcon),this.ZS17(),this.tabBar.dataProvider=this.tabCollection=new eui.ArrayCollection,this.tabBar.itemRenderer=FaBaoTabBarItem,this.tabCollection.replaceAll([{up:6120,down:6121,type:"up"},{up:6122,down:6123,type:"star"}])},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this),this.skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSkill,this),this.btnAllPower.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAll,this),this.btnNowPower.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickNow,this),this.btnOpen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOpen,this),this.btnSend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSend,this),this.grpUnlock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW53,this),this.tabBar.addEventListener(eui.UIEvent.CHANGE,this.tabBarChange,this),this.imgIconBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW54,this);App.CM.gtM(O6.C7);var i=this.grpHurdles.getChildAt(0);this.updateUI(),this.firstSelect(i),this.faBaoData.type&&this.ZW54(),this.timer=this.timer||App.K16.doTimer(1e3,0,this.GX42,this),this.GX42()},t.prototype.ZG21=function(t){for(var e=t.skinList[t._skinViewId],i=0;i<4;i++){var s=this.grpHurdles.getChildAt(i);if(s){var o=e.fabaoParData[e.cellidAny[i]];s.setData(o,t._skinViewId),o&&o.isOpen()&&null==this.selectedSkill&&(this.selectedSkill=s,this.selectedSkill.selected=!0)}}},t.prototype.showSkillBtn=function(t){this.skill.visible=t},t.prototype.ZS13=function(){for(var t=0;t<4;t++){var e=this.grpHurdles.getChildAt(t);e&&(e.selected=!1)}this.showSkillBtn(!0)},t.prototype.firstSelect=function(t){this.selectedSkill&&(this.selectedSkill.selected=!1),this.selectedSkill=t,this.selectedSkill.selected=!0,this.ZQ39(),this.showSkillBtn(!1);var e=App.CM.gtM(O6.C7),i=e.skinList[e.skinViewId];this.skill.imgIcon.source=i.getSkillIcon()},t.prototype.GW87=function(t){this.selectedSkill&&(this.selectedSkill.selected=!1),this.faBaoData.type||(this.selectedSkill=t,this.selectedSkill.selected=!0,this.ZQ39(),this.setTabData(),this.showSkillBtn(!1))},t.prototype.ZS17=function(){for(var t=0;t<4;t++){var e=this.grpHurdles.getChildAt(t);e&&e.ZK29(this.GW87,this)}},t.prototype.changeUp=function(){if(this.lbTitle.visible=!1,this.tabBar.visible=!0,this.grpUnlock.visible=!1,this.lbDemand.visible=!1,this.lbFull.horizontalCenter=0,this.lbFull.visible=!1,this.faBaoData.isCanPosUpgrade(this.selectedSkill.data.pos)){var t=TG19.FE59("cellLvId");p=N12.gID(t),l=N12.giC(t);this.btnSend.label=O3.tr(6116);var e=TG19.level[this.selectedSkill.data.lv],i=TG19.level[this.selectedSkill.data.lv+1];if(this.faBaoData.isHighestUpgrade(this.selectedSkill.data.pos))this.grpOpen.visible=!1,this.grpAdd.visible=!1,this.lbFull.visible=!0,this.lbFull.textFlow=M18.HTP.parser(O3.tr(6147));else{l>=i.num?this.lbAmount.textFlow=M18.HTP.parser(O3.tr(6114,l,i.num)):this.lbAmount.textFlow=M18.HTP.parser(O3.tr(6115,l,i.num)),P16.sGF(this.btnSend,!1),this.btnSend.enabled=!0;var s=TG64.FL69(this.selectedSkill.data.baseAttr);if(e){var o=TG64.FL69(e.attr),r=TG64.FI44(o,s);this.lbNowBaseAttr.textFlow=M18.HTP.parser(TG64.FL70(r))}else this.lbNowBaseAttr.textFlow=M18.HTP.parser(TG64.FL70(s));var n=TG64.FL69(i.attr),a=TG64.FI44(n,s);this.lbNextBaseAttr.textFlow=M18.HTP.parser(TG64.FK80(a)),this.imgItem.setData(p),this.grpOpen.visible=!1,this.grpAdd.visible=!0}}else{this.grpAdd.visible=!1,this.grpOpen.visible=!0,this.btnSend.label=O3.tr(6116);var h=TG19.cell[this.selectedSkill.data.pos],p=N12.gID(h.item),l=N12.giC(h.item),c={itemData:{data:p,ct:0},isBottom:!1};this.itemIcon.data=c,this.lbItemName.textFlow=M18.HTP.parser(O3.tr(6128,p.name)),l>=h.reqnum?this.lbSource.textFlow=M18.HTP.parser(O3.tr(6135,l,h.reqnum)):this.lbSource.textFlow=M18.HTP.parser(O3.tr(6136,l,h.reqnum)),this.btnOpen.imgNew.visible=l>=h.reqnum}},t.prototype.changeStar=function(){if(this.lbTitle.visible=!1,this.grpUnlock.visible=!1,this.grpOpen.visible=!1,this.lbDemand.visible=!1,this.lbFull.visible=!1,this.lbFull.horizontalCenter=0,this.faBaoData.isHighestStar(this.selectedSkill.data.pos))this.lbFull.visible=!0,this.grpAdd.visible=!1,this.lbFull.textFlow=M18.HTP.parser(O3.tr(6149));else{var t=TG19.cell[this.selectedSkill.data.pos].startype,e=TG19.starGroup[t],i=e[this.selectedSkill.data.star],s=e[this.selectedSkill.data.star+1];this.grpAdd.visible=!0,this.tabBar.visible=!0;var o=N12.gID(this.selectedSkill.data.itemid),r=N12.giC(this.selectedSkill.data.itemid);if(this.btnSend.label=O3.tr(6117),r>=s.num?this.lbAmount.textFlow=M18.HTP.parser(O3.tr(6114,r,s.num)):this.lbAmount.textFlow=M18.HTP.parser(O3.tr(6115,r,s.num)),i){var n=TG64.FL69(i.attr);this.lbNowBaseAttr.textFlow=M18.HTP.parser(TG64.FL70(n))}else this.lbNowBaseAttr.textFlow=M18.HTP.parser(O3.tr(6202));var a=TG64.FL69(s.attr);this.lbNextBaseAttr.textFlow=M18.HTP.parser(TG64.FK80(a)),this.imgItem.setData(o)}},t.prototype.changeUnlock=function(){this.lbTitle.visible=!0,this.lbFull.visible=!1,this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6107)),this.grpOpen.visible=!1,this.grpAdd.visible=!1,this.tabBar.visible=!1,this.grpUnlock.visible=!0,this.skill.bottom=10,P16.sGF(this.btnUnlock,!this.faBaoData.getCanUnlock()),this.btnUnlock.enabled=this.faBaoData.getCanUnlock(),this.btnUnlock.imgNew.visible=this.faBaoData.getCanUnlock();var t=this.faBaoData.getNextSkillName();this.lbStr3.textFlow=M18.HTP.parser(O3.tr(6140,t))},t.prototype.changeAddUp=function(){this.lbTitle.visible=!0,this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6106)),this.grpOpen.visible=!1,this.tabBar.visible=!1,this.grpUnlock.visible=!1,this.lbFull.visible=!1,this.lbFull.horizontalCenter=0;var t=N12.gID(this.faBaoData.addItemId),e=N12.giC(this.faBaoData.addItemId);this.btnSend.label=O3.tr(6146);var i=TG19.upgrade[this.faBaoData.lv],s=TG19.upgrade[this.faBaoData.lv+1];if(this.skill.bottom=10,1==this.faBaoData.type)this.skill.bottom=70,this.lbFull.horizontalCenter=30,this.lbFull.visible=!0,this.lbFull.textFlow=M18.FG71(this.faBaoData.getSkillName()+"\n"+this.faBaoData.getSkillDesc()),this.lbTitle.textFlow=O3.tr2(8459);else if(this.faBaoData.isHighestClass())this.lbFull.visible=!0,this.lbFull.textFlow=M18.HTP.parser(O3.tr(6148)),this.grpAdd.visible=!1,this.lbDemand.visible=!1;else{this.grpAdd.visible=!0,this.lbDemand.visible=!0,e>=s.num?this.lbAmount.textFlow=M18.HTP.parser(O3.tr(6114,e,s.num)):this.lbAmount.textFlow=M18.HTP.parser(O3.tr(6115,e,s.num)),P16.sGF(this.btnSend,!1),this.btnSend.enabled=!0,this.faBaoData.getCanAchieve()?this.lbDemand.textFlow=M18.HTP.parser(O3.tr(6203,s.needlv,s.needstar)):this.lbDemand.textFlow=M18.HTP.parser(O3.tr(6112,s.needlv,s.needstar));var o=TG64.FJ74(TG64.FL69(this.faBaoData.attrgrow),parseFloat(i.ratio)),r=TG64.FL69(this.faBaoData.attr),n=(TG64.FI44(o,r),Math.floor(100*parseFloat(this.faBaoData.getUpAttr("ratio")))),a=O3.tr(6204,n),h=this.faBaoData.getSkillName();h&&(a+=O3.tr(6269,h)),this.lbNowBaseAttr.textFlow=M18.HTP.parser(a);var p=TG64.FJ74(TG64.FL69(this.faBaoData.attrgrow),parseFloat(s.ratio)),l=Math.floor(100*parseFloat(this.faBaoData.getNextUpAttr("ratio")));TG64.FI44(p,r);a=O3.tr(6205,l),(h=this.faBaoData.getNextSkillName())&&(a+=O3.tr(6270,h)),this.lbNextBaseAttr.textFlow=M18.HTP.parser(a),this.imgItem.setData(t),this.lbFull.visible=!1}},t.prototype.tabBarChange=function(){switch(this.tabBar.selectedItem.type){case"up":this.changeUp();break;case"star":this.selectedSkill.data.isOwn?this.changeStar():(this.noStar(),P18.sDP(O3.tr(6144)))}},t.prototype.tabBarReset=function(){this.changeUp(),this.noStar(),this.setTabData(),this.playAui()},t.prototype.noStar=function(){var t=this;App.DelayOptManager.ZE59(this,function(){t.tabBar.selectedIndex=0})},t.prototype.ZQ39=function(){this.selectedSkill&&this.selectedSkill.data&&this.tabBarReset()},t.prototype.onClickSend=function(){switch(this.btnSend.label){case O3.tr(6116):var t=this.selectedSkill.data.itemUpgradeid,e=N12.giC(t);(o=N12.giC(t))<(r=this.selectedSkill.data.getUpgradeNum())?App.VM.open(O7.G87,t,r-o):this.apF(N9.A8,this.faBaoData.id,this.selectedSkill.data.pos);break;case O3.tr(6117):var i=TG19.cell[this.selectedSkill.data.pos].startype,s=TG19.starGroup[i][this.selectedSkill.data.star+1];(e=N12.giC(this.selectedSkill.data.itemid))>=s.num?this.apF(N9.A13,this.faBaoData.id,this.selectedSkill.data.pos):App.VM.open(O7.G87,this.selectedSkill.data.itemid,s.num-e);break;case O3.tr(6146):var o,r;e=N12.giC(this.faBaoData.addItemId);(o=N12.giC(this.faBaoData.addItemId))<(r=this.faBaoData.getAddNum())?App.VM.open(O7.G87,this.faBaoData.addItemId,r-o):this.apF(N9.A28,this.faBaoData.id)}},t.prototype.onClickOpen=function(){var t=TG19.cell[this.selectedSkill.data.pos],e=(N12.gID(t.item),N12.giC(t.item));e>=t.reqnum?this.apF(N9.A5,this.faBaoData.id,this.selectedSkill.data.pos):App.VM.open(O7.G87,t.item,t.reqnum-e)},t.prototype.ZW53=function(){this.apF(N9.A23,this.faBaoData.id)},t.prototype.onClickAll=function(){this.apF(N9.A21)},t.prototype.onClickSkill=function(){this.apF(N9.A12)},t.prototype.onClickNow=function(){this.apF(N9.A22)},t.prototype.ZW54=function(){this.ZS13(),this.playAui(),this.faBaoData.isOwn?this.changeAddUp():this.changeUnlock()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof THH9)switch(s){case P4.V43:var o=this.btnSend.label;o==O3.tr(6116)?this.changeUp():o==O3.tr(6146)&&this.changeAddUp()}if(t instanceof TG62)switch(this.updateUI(),this.GX42(),s){case P4.M86:case P4.K89:this.changeUp();break;case P4.P10:this.changeStar();break;case P4.V9:this.changeAddUp();break;case P4.U7:this.changeAddUp(),App.THH32.aUE(this.grpAui,"wdsg_fzjmtx_lg_002",this.grpAui.width/2,this.grpAui.height/2,1,null,null,null,this.playAui.bind(this));break;case"changeSkin":this.tabBarReset();var r=this.grpHurdles.getChildAt(0);this.firstSelect(r),this.faBaoData.type&&this.ZW54()}},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C7);this.faBaoData=t.skinList[t.skinViewId],this.lbBattle.textFlow=M18.HTP.parser(O3.tr(6105,TG64.FHH31(),TG64.FHH32())),this.lbAllPower.textFlow=M18.HTP.parser(O3.tr(6103,TG64.FJ45())),this.lbActivation.textFlow=M18.HTP.parser(O3.tr(6104,TG64.FHH28())),this.faBaoData.type?this.gPower.visible=!1:(this.gPower.visible=!0,this.lbAptitude.textFlow=M18.HTP.parser(O3.tr(7063,this.faBaoData.aptitude)),this.lbPowerTop.text=this.faBaoData.power.toString()),this.imgIconBg.source=this.faBaoData.iconbg,this.ZG21(t),this.faBaoData.getCanUnlock()?(P16.sGF(this.imgIconBg,!0),this.lbName.textFlow=M18.HTP.parser(O3.tr(6102,this.faBaoData.name))):this.faBaoData.isOwn?(P16.sGF(this.imgIconBg,!1),this.lbName.textFlow=M18.HTP.parser(O3.tr(6101,this.faBaoData.name))):(P16.sGF(this.imgIconBg,!0),this.lbName.textFlow=M18.HTP.parser(O3.tr(6201,this.faBaoData.name))),this.playAui(),App.DelayOptManager.ZE59(this,this.setTabData)},t.prototype.setTabData=function(){if(!this.faBaoData.type)for(var t=0;t<this.tabBar.numChildren;t++){var e=this.tabBar.getChildAt(t);switch(t){case 0:e.setRed(this.selectedSkill.data.getCanPosUpgrade());break;case 1:e.setRed(this.selectedSkill.data.getCanPosStar())}}},t.prototype.playAui=function(){this.faBaoData.getCanUnlock()||this.faBaoData.FL57()?App.THH32.aUE(this.grpAui,"wdsg_fzjmtx_lg_001",this.grpAui.width/2,this.grpAui.height/2):App.THH32.rEf(this.grpAui,"wdsg_fzjmtx_lg_001")},t.prototype.GX42=function(){this.faBaoData&&this.faBaoData.isOwn&&this.faBaoData.type&&(this.lbAptitude.textFlow=O3.tr2(8463,P6.FJ11(this.faBaoData.cd,5)))},t.prototype.close=function(){n.prototype.close.call(this),this.btnAllPower.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAll,this),this.btnNowPower.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickNow,this),this.imgIconBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW54,this),this.btnOpen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOpen,this),this.btnSend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSend,this),this.grpUnlock.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW53,this),this.tabBar.removeEventListener(eui.UIEvent.CHANGE,this.tabBarChange,this),App.K16.rBH(this.timer),delete this.timer,this.removeTween(),App.THH32.rEf(this.grpAui,"wdsg_fzjmtx_lg_001"),App.THH32.rEf(this.grpAui,"wdsg_fzjmtx_lg_002")},t.prototype.removeTween=function(){egret.Tween.removeTweens(this)},t}(BaseEuiView);__reflect(FaBaoView.prototype,"FaBaoView");var FaoBaoSkinIconList=function(e){function t(){var t=e.call(this)||this;return t._listData=[],t.skinName=HeroIconListSkin,t.initUI(),t}return __extends(t,e),t.prototype.initUI=function(){var t=this.listIcon.layout;this.listGap=t.gap,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),this.listIcon.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.scIconList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.scIconList.viewport=this.listIcon,this.scIconList.scrollPolicyV=eui.ScrollPolicy.OFF,this.createList()},t.prototype.createList=function(){this.dataSource=new eui.ArrayCollection(this._listData),this.listIcon.itemRenderer=FaBaoIconItem,this.listIcon.dataProvider=this.dataSource},Object.defineProperty(t.prototype,"listData",{get:function(){return this._listData},set:function(t){t?this.initIconList(t):this.dataSource.removeAll()},enumerable:!0,configurable:!0}),t.prototype.initIconList=function(t){for(var e in this._listData=[],t){(o=t[e])&&this._listData.push(o)}this._listData.sort(TG64.FI14),this._listData=TG64.FHH29(this._listData),this.dataSource.replaceAll(this._listData),this.curIndex=0;var i=App.CM.gtM(O6.C7);if(i.skinViewId)for(var s=0;s<this.listData.length;s++){var o;(o=this._listData[s]).id==i.skinViewId&&(this.curIndex=s)}this.listIcon.selectedIndex=this.curIndex,i.skinViewId!=this.listData[this.curIndex].id&&(i.skinViewId=this.listData[this.curIndex].id,0==this.curIndex&&(this.scIconList.viewport.scrollH=0)),this.ZR52(0,5)},t.prototype.ZN17=function(t){this.curIndex=t.itemIndex;var e=App.CM.gtM(O6.C7);this.listData[this.curIndex].id!=e.skinViewId&&(e.skinViewId=this.listData[this.curIndex].id)},t.prototype.ZK80=function(){if(!(this.listData.length<=5)){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor((this.listIcon.scrollH+5*t)/t);e>=this.listData.length-5&&(e=this.listData.length-5),this.listIcon.scrollH=e*t;var i=Math.min(e+4,this.listData.length);this.ZR52(e,i)}},t.prototype.ZN74=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.ceil((this.listIcon.scrollH-5*t)/t);e<0&&(e=0),this.listIcon.scrollH=e*t,this.listIcon.scrollH=e*t;var i=Math.min(e+5,this.listData.length);this.ZR52(e,i)},t.prototype.endScroller=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor(this.listIcon.scrollH/t);e<0&&(e=0);var i=Math.min(e+5,this.listData.length);this.ZR52(e,i)},t.prototype.ZR52=function(t,e){for(var i={left:0,right:0},s=0;s<t;s++){if(0<this.listData[s].FL35()){i.left=1;break}}for(s=e;s<this.listData.length;s++){if(0<this.listData[s].FL35()){i.right=1;break}}this.imgRedL.visible=0<i.left,this.imgRedR.visible=0<i.right},t.prototype.updateDot=function(){var t=this;App.K16.doFrame(1,1,function(){return t.ZR52(0,5)},this,function(){return App.K16.removeAll(t)})},t}(eui.Component);__reflect(FaoBaoSkinIconList.prototype,"FaoBaoSkinIconList");var N16=function(){function r(){}return r.FK35=function(t){r.init=t.faqi_init,r.base=t.faqi_base,r.skin=t.faqi_skin,r.skill=t.faqi_skill,r.reward=t.faqi_reward,r.skillGroup=this.FI15(),r.expDanData=this.FHH33()},r.FI47=function(){var t;t=r.reward;var e=[];for(var i in t)e.push(t[i]);return e},r.getData=function(t){for(var e=[],i=t.split(";"),s=0;s<i.length;s++)e[s]={},e[s][i[s].split(":")[0]]=i[s].split(":")[1];return e},r.FHH90=function(t){var e=[];if(t)for(var i in r.skin)-1==r.skin[i].itemid&&e.push(r.skin[i]);else for(var i in r.skin)-1!=r.skin[i].itemid&&e.push(r.skin[i]);return e},r.FI15=function(){var t={};for(var e in r.skill){var i=r.skill[e],s=[],o=i.skillid+"";t[o]?t[o].push(i):(s.push(i),t[o]=s)}return t},r.FHH33=function(){var t={};if(!this.init)return t;for(var e=this.init.expItem.value.split(";"),i=0;i<e.length;i++){var s=[],o=e[i].split(":"),r=o[0];t[r]||(s.push(o[1]),t[r]=s)}return t},r}();__reflect(N16.prototype,"N16");var O15=function(){function t(){}return t.A25=10001,t.A26=10002,t.A29=10003,t.A15=10004,t.A16=10005,t.A9=10006,t.A10=10007,t.A11=10008,t.A12=10009,t.A19=10010,t.A27=10011,t.A22=10012,t.A4=10013,t.A23=10014,t.A24=10015,t.A20=10016,t.A2=10017,t.A28=10018,t.A5=10019,t.A17=10020,t.A21=11003,t.A18=11004,t.A13=11005,t.A6=11006,t.A3=11007,t.A1=11008,t.A14=11009,t.A7=11010,t.A8=11011,t}();__reflect(O15.prototype,"O15");var TE80=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I43,"FaqiDan",t,K17.UI_Main_TOP),t.rgF(O15.A21,t.GP18,t),t.rgF(O15.A18,t.GN27,t),App.VM.register(O7.HH33,"FaqiDerma",t,K17.UI_Main_TOP),t.rgF(O15.A13,t.GL34,t),t.rgF(O15.A6,t.GJ52,t),App.VM.register(O7.HH34,"FaqiSkill",t,K17.UI_Main_TOP),t.rgF(O15.A14,t.GL35,t),t.rgF(O15.A7,t.GJ53,t),App.VM.register(O7.F77,"FaqiEverAdd",t,K17.UI_Main_TOP),t.rgF(O15.A3,t.GHH61,t),t.rgF(O15.A1,t.GF77,t),t.rgF(O15.A8,t.GJ54,t);var e=new TG96(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.I87),e.aLV(O7.I43),e.aLV(O7.HH33),e.aLV(O7.F77),e.aLV(O7.HH34),e.aLV(O7.I1),e.aLV(O7.G58),e.aLV(O7.G45),e.aLV(O7.F86),e.aLV(O7.I17),e.aLV(O7.I39),e.aLV(O7.I70),t.faqiProxy=new TG97(t),t.rgF(O15.A25,t.loadReq,t),t.rgF(O15.A26,t.loadRes,t),t.rgF(O15.A17,t.GQ35,t),t.rgF(O15.A15,t.GR7,t),t.rgF(O15.A16,t.GR8,t),t.rgF(O15.A23,t.GW36,t),t.rgF(O15.A24,t.GW37,t),t.rgF(O15.A20,t.GT11,t),t.rgF(O15.A2,t.GT12,t),t.rgF(O15.A22,t.GU79,t),t.rgF(O15.A4,t.GU80,t),t.rgF(O15.A19,t.GT13,t),t.rgF(O15.A27,t.GT14,t),t.rgF(O15.A28,t.GX57,t),t.rgF(O15.A5,t.GX58,t),t.rgF(O15.A11,t.GW38,t),t.rgF(O15.A12,t.GW39,t),t.rgF(O15.A9,t.GP19,t),t.rgF(O15.A10,t.GP20,t),t.rgF(O15.A29,t.faqiPush,t),t}return __extends(t,i),t.prototype.GP18=function(){App.VM.open(O7.I43)},t.prototype.GN27=function(){App.VM.close(O7.I43)},t.prototype.GHH61=function(t){App.VM.open(O7.F77,t)},t.prototype.GF77=function(){App.VM.close(O7.F77)},t.prototype.GL34=function(t){App.VM.open(O7.HH33,t)},t.prototype.GJ52=function(){App.VM.close(O7.HH33)},t.prototype.GL35=function(t){App.VM.open(O7.HH34,t)},t.prototype.GJ53=function(){App.VM.close(O7.HH34)},t.prototype.loadReq=function(){App.CM.gtM(O6.B97).account;return this.faqiProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.notify(P4.X70)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.faqiPush=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.isShowImgNew(),e.notify(P4.Y24)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR7=function(t){this.faqiProxy.upgredeRes(t)},t.prototype.GR8=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.faqi=t.body.faqi,t.body.co&&(e.initFaqiData.co=t.body.co),e.isShowImgNew(),e.notify(P4.V62)}else{238==t.head.state?App.VM.gOV(O7.I87).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GT11=function(t){this.faqiProxy.unlockReq(t)},t.prototype.GT12=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.faqi=t.body.faqi,e.isShowImgNew(),App.CM.apF(O6.C17,O15.A8),e.notify(P4.R64)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW36=function(){this.faqiProxy.rmaxReq()},t.prototype.GW37=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.faqi=t.body.faqi,t.body.co&&(e.initFaqiData.co=t.body.co),e.isShowImgNew(),e.notify(P4.X8),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU79=function(t){this.faqiProxy.awardReq(t)},t.prototype.GU80=function(t){if(200==t.head.state){t.body.ob&&P5.sIs(t.body.ob);var e=this.gtM();e.initFaqiData.ho=t.body.h,e.isShowImgNew(),e.notify(P4.T21)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT13=function(t){this.faqiProxy.changeReq(t)},t.prototype.GT14=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.faqi=t.body.faqi,e.notify(P4.X72)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX57=function(t){this.faqiProxy.danReq(t)},t.prototype.GX58=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.en=t.body.en,e.isShowImgNew(),e.notify(P4.T23)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW38=function(){this.faqiProxy.wearReq()},t.prototype.GW39=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.faqi=t.body.faqi,App.CM.gtM(O6.B98).ZL13(t.body.es),e.isShowImgNew(),e.notify(P4.U45)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP19=function(t){this.faqiProxy.GX33(t)},t.prototype.GP20=function(t){if(200==t.head.state){var e=this.gtM();e.initFaqiData.faqi=t.body.faqi,e.isShowImgNew(),e.notify(P4.V64)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ35=function(t){App.VM.gOV(O7.HH33).ZQ91(t)},t.prototype.GJ54=function(){var t=this.gtM(),e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],i=t.initFaqiData.faqi.k,s={objData:{id:e.id,h:e.h,we:e.we,wi:e.wi,f:i,x:0,y:0,dir:Dir.br,objType:P13.A6}};App.VM.open(O7.G69,s)},t}(TE11);__reflect(TE80.prototype,"TE80");var TG96=function(i){function t(t){var e=i.call(this,t)||this;return e.initFaqiData={},e.isHong=0,e.isUseNow=!1,e.isOpenUseYbView=!0,e}return __extends(t,i),t.prototype.ZD48=function(t){t&&(null!=this.pointData?this.pointData.initActData(t):this.pointData=new RevealVo(t))},t.prototype.updateRed=function(){this.isShowImgNew()},t.prototype.FL35=function(){var t=0,e=this.initFaqiData.faqi.lv;if(L3.advancedLv>e||!this.pointData)return t;var i=L3.FI89(this.pointData.lv);if(i.advancelv<0&&this.pointData.s==L3.starNum)return t;if(this.pointData&&L3.openLv<=O4.getLv())if(this.pointData.s!=L3.starNum){var s=N12.giC(parseInt(N16.init.advancedItem.value))+N12.giC(parseInt(N16.init.timeItem.value)),o=i.starcost.split(":"),r=N12.giC(parseInt(o[0]));t=s>=i.pillcost&&r>=parseInt(o[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var n=i.breakcost.split(":");t=N12.giC(parseInt(n[0]))>=parseInt(n[1])&&i.advancelv<=e?1:0}return t},t.prototype.initData=function(t){this.initFaqiData=t},t.prototype.isShowImgNew=function(){this.isHong=0;var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l;if(this.initFaqiData&&this.initFaqiData.faqi&&parseInt(N16.init.unlockLevel.value)<=e){var i=this.initFaqiData.faqi.lv;if((null==this.preLv||i>this.preLv)&&(TF13.FE57(E5.A13),this.preLv=i),this.redNum=this.FL35(),this.redNum)this.isHong=1;else{if(-1!=N16.base[i+""].exp){var s,o=N16.base[i+""].cash<=t.avatarInfo.co;s=N16.base[i+""].elixir;var r=N12.giC(parseInt(N16.init.advancedItem.value))+N12.giC(parseInt(N16.init.timeItem.value))>=s;if(o&&r)return void(this.isHong=1);var n=N12.giC(parseInt(N16.init.elixirItem.value)),a=K18.init.attrUseMax.value;if(n&&this.initFaqiData.en<a)return void(this.isHong=1);if(N12.giC(parseInt(N16.init.shootUpItem.value)))return void(this.isHong=1);if(N16.expDanData[i+""])if(N12.giC(N16.expDanData[i+""]))return void(this.isHong=1)}for(var h=N16.FHH90(!1),p=0;p<h.length;p++)if(0<N12.giC(h[p].itemid)&&-1==this.initFaqiData.faqi.ss.indexOf(h[p].id))return void(this.isHong=1);if(App.CM.gtM(O6.B98).canFaqiEquip.length)this.isHong=1;else{var l=this.initFaqiData.faqi.sk.concat().sort(function(t,e){return t.si-e.si}),c=N16.skillGroup;for(p=0;p<l.length;p++){if(N12.giC(parseInt(N16.init.skillItem.value))>=c[l[p].si+""][l[p].sl-1+""].cost&&-1!=c[l[p].si+""][l[p].sl-1+""].cost)return void(this.isHong=1)}var u=this.initFaqiData.ho.length,d=this.initFaqiData.co.length;u==d||0===d||(this.isHong=1)}}}},t.prototype.ZC47=function(){var t=0,e=0;return this.initFaqiData.ho&&(t=this.initFaqiData.ho.length),this.initFaqiData.co&&(e=this.initFaqiData.co.length),t!=e&&0!==e?1:0},t.prototype.haveSkin=function(t){var e=!1;return this.initFaqiData&&this.initFaqiData.faqi&&this.initFaqiData.faqi.ss?e=-1!=this.initFaqiData.faqi.ss.indexOf(t):e},t.prototype.FJ45=function(){var t=parseInt(N16.init.unlockLevel.value);if(O4.getLv()<t)return 0;var e=this.getSkinPower(),i=this.getDanPower(),s=this.FHH78(),o=this.ZV1(),r=this.FJ47();return Math.round(e+i+s+r+o)},t.prototype.getSkinPower=function(){for(var t=[],e=0,i=this.initFaqiData,s=0;s<i.faqi.ss.length;s++)-1!=N16.skin[i.faqi.ss[s]+""].itemid&&(t.push(i.faqi.ss[s]),e+=M10.gAG(N16.skin[i.faqi.ss[s]+""].attr));return e},t.prototype.getDanPower=function(){var t=N16.init.elixirAttr.value,e=N13.getData(t),i=0,s=this.initFaqiData;for(var o in e)for(var r in e[o]){i+=parseInt(e[o][r])*K18.attribute[r].power*s.en}return i},t.prototype.FHH78=function(){for(var t=this.initFaqiData.faqi.sk,e=0,i=0;i<t.length;i++)e+=M10.gAG(N16.skillGroup[t[i].si+""][t[i].sl-1+""].attr);return e},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).faqiEquip.sort(function(t,e){return t.i-e.i}),e=0,i=0;i<t.length;i++){var s=M10.FD92(t[i].i+"",t[i].t);e+=M10.gAG(s.attr)+M10.gAG(s.addattr)*s.addlevel}return e},t.prototype.FJ47=function(){var t=this.initFaqiData,e=t.faqi.lv,i=t.faqi.exp,s=0;this.count=0,this.getCount(e);for(var o=0;o<this.count;o++){var r=N16.base[e-o+""].baseattr,n=N16.base[e-o+""].addattr,a=e-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){s+=parseInt(p[l][c])*i/N16.init.advancedExp.value*K18.attribute[c].power}else for(var l in p)for(var c in p[l])s+=parseInt(p[l][c])*N16.base[a+""].exp/N16.init.advancedExp.value*K18.attribute[c].power;for(var l in h)for(var c in h[l])s+=parseInt(h[l][c])*K18.attribute[c].power}return s+=s*P7.FA54(E5.A13)},t.prototype.getCount=function(t){N16.base[t+""]&&(this.count+=1,this.getCount(t-1))},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TG96.prototype,"TG96");var TG97=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y24,e.push,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X69,body:{}};s.rSMO(P4.X70,function(t){s.apF(O15.A26,t),e("加载法器加载完成")},s),s.sSM(i)})},t.prototype.upgredeRes=function(t){var e={type:P4.V61,body:{t:t}};this.rSMO(P4.V62,this.GX86,this),this.sSM(e)},t.prototype.GX86=function(t){this.apF(O15.A16,t)},t.prototype.rmaxReq=function(){var t={type:P4.X7,body:{}};this.rSMO(P4.X8,this.rmaxRes,this),this.sSM(t)},t.prototype.rmaxRes=function(t){this.apF(O15.A24,t)},t.prototype.unlockReq=function(t){var e={type:P4.R63,body:{skinId:t}};this.rSMO(P4.R64,this.GY69,this),this.sSM(e)},t.prototype.GY69=function(t){this.apF(O15.A2,t)},t.prototype.awardReq=function(t){var e={type:P4.T20,body:{tid:t}};this.rSMO(P4.T21,this.awardRes,this),this.sSM(e)},t.prototype.awardRes=function(t){this.apF(O15.A4,t)},t.prototype.changeReq=function(t){var e={type:P4.X71,body:{skinId:t}};this.rSMO(P4.X72,this.changeRes,this),this.sSM(e)},t.prototype.changeRes=function(t){this.apF(O15.A27,t)},t.prototype.danReq=function(t){var e={type:P4.T22,body:{num:t}};this.rSMO(P4.T23,this.danRes,this),this.sSM(e)},t.prototype.danRes=function(t){this.apF(O15.A5,t)},t.prototype.wearReq=function(){var t={type:P4.U44,body:{}};this.rSMO(P4.U45,this.wearRes,this),this.sSM(t)},t.prototype.wearRes=function(t){this.apF(O15.A12,t)},t.prototype.GX33=function(t){var e={type:P4.V63,body:{sid:t}};this.rSMO(P4.V64,this.GX34,this),this.sSM(e)},t.prototype.GX34=function(t){this.apF(O15.A10,t)},t.prototype.push=function(t){this.apF(O15.A29,t)},t}(TG80);__reflect(TG97.prototype,"TG97");var FaqiView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.haveNum=0,i.timerArray=[],i.skinPower=0,i.danPower=0,i.raiPower=0,i.skillPower=0,i.equipPower=0,i.isNewSkin=!1,i.canAdd=!0,i.isAutoSelfRai=!1,i.skinName=WingViewSkin,i.sGN("release_faqi"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skillData.dataProvider=this.skillCollection=new eui.ArrayCollection,this.skillData.itemRenderer=FaqiSkillDataItem,this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=AttrEquipDataItem,this.btnChange.label=O3.tr(4706),this.btnEquip.label=O3.tr(4707),this.btnRaising.label=O3.tr(4692),this.btnSelfRai.label=O3.tr(4693),this.btnStop.label=O3.tr(4694),this.cbAutoSmelt.label=O3.tr(4699),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4695)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4696)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4697)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4698))},t.prototype.open=function(){var t=App.CM.gtM(O6.B82);this.avatarModel=t.avatarInfo.us[J11.A7],this.getData(),this.updateMain(),this.ZN26(),this.initPBarPro(),this.useExpDan(),this.ZN25(),this.btnSkin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this)},t.prototype.close=function(){this.btnSkin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.closeHandler(),this.stopAuto(),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.isNewSkin=!1,this.avatarModel=null,this.nowModel=null,this.num=null,this.skinPower=null,this.danPower=null,this.raiPower=null,this.skillPower=null,this.equipPower=null,this.count=null,this.isNewSkin=null,this.canAdd=null,this.isAutoSelfRai=null,egret.Tween.removeTweens(this.pBarPro.imgShort),egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.GI10=function(){TG76.FI91(E5.A13),App.CM.apF(O6.B95,M4.A4,this.arr)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.raising=function(){this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.autoUpgrade(!1)},t.prototype.openDanHint=function(){this.btnAddOne.imgNew.visible&&this.addOne()},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.aKeyPull=function(){this.aCF(O6.C17,O15.A11)},t.prototype.canChange=function(){this.aCF(O6.C17,O15.A19,N16.base[this.num+""].skinid)},t.prototype.addOne=function(){this.aCF(O6.C18,O10.A5)},t.prototype.useExpDan=function(){this.btnExpDan.visible&&this.apF(O10.A5,O10.A38,!0)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C17);this.btnReveal.imgNew.visible=!!t.redNum},t.prototype.getData=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.C17).initFaqiData;t&&!this.isAutoSelfRai&&(this.num=t.faqi.lv,this.ZK15())},t.prototype.dressUpdate=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.C17).initFaqiData;t&&(this.num=t.faqi.lv,this.ZK15())},t.prototype.openSkinView=function(){this.sureStop(),this.aCF(O6.C17,O15.A13)},t.prototype.openDanView=function(){this.sureStop(),this.aCF(O6.C17,O15.A21)},t.prototype.ZV5=function(){this.sureStop(),App.CM.apF(O6.C12,O8.A93,O8.B4.FAQI)},t.prototype.openAddView=function(){this.aCF(O6.C17,O15.A3,{power:this.scoreLb.text,index:1})},t.prototype.showPhase=function(t){var e,i=App.CM.gtM(O6.C17).initFaqiData;switch(t.target.name){case"-":0<this.num&&(this.num-=1,this.btnRight.enabled=!0,P16.sGF(this.btnRight,!1)),this.btnRight.imgEnd.visible=this.num>=i.faqi.lv,e=1==this.num,P16.sGF(this.btnLeft,e),this.btnLeft.enabled=!e;break;case"+":e=this.num<=i.faqi.lv&&N16.base[this.num+1+""],this.num!=i.faqi.lv&&N16.base[this.num+1+""]||(this.btnRight.enabled=!1,P16.sGF(this.btnRight,!0)),e&&(this.num+=1,P16.sGF(this.btnLeft,!1),this.btnLeft.enabled=!0),this.btnRight.imgEnd.visible=this.num>=i.faqi.lv}this.realTime()},t.prototype.updateChange=function(t){if(!(this.num>t.faqi.lv)){var e=N16.base[this.num+""].skinid-t.faqi.k;e<0||0<e?(this.btnChange.visible=!this.btnEquip.visible,this.grpHave.visible=this.grpAddPower.visible=!1):0==e&&(this.btnChange.visible=this.grpAddPower.visible=!1,this.btnEquip.visible||(this.grpHave.visible=!0))}},t.prototype.realTime=function(){this.lbName.text=N16.skin[N16.base[this.num+""].skinid+""].name,this.nowModel||(this.nowModel=new TF39);var t=App.CM.gtM(O6.C17).initFaqiData;this.nowModel.id=this.avatarModel.id,this.nowModel.h=this.avatarModel.h,this.nowModel.wi=this.avatarModel.wi,this.nowModel.we=this.avatarModel.we,this.nowModel.f=N16.base[this.num+""].skinid,this.nowModel.bt=BehaviourType.Stand_d;var e={id:N16.base[this.num+""].skinid,x:0,y:0,dir:Dir.br,objType:P13.A6};if(this.objBoss||(this.objBoss=new FightGameObject),this.objBoss.setBaseData(e),this.objBoss.setData(this.nowModel,this.gpBoss),this.lbClass.text=O3.tr(1332,N16.base[this.num+""].level),this.updateChange(t),this.num==t.faqi.lv+1){this.btnChange.visible=this.grpHave.visible=!1,this.btnEquip.visible||(this.grpAddPower.visible=!0);var i=N16.base[this.num+""].baseattr,s=N16.base[this.num-1+""].addattr;this.lbPower.text=Math.floor(M10.gAG(i)+M10.gAG(s)*N16.base[this.num-1+""].exp/N16.init.advancedExp.value)+""}},t.prototype.updatePower=function(){this.getSkinPower(),this.getDanPower(),this.FJ47(),this.FHH78(),this.ZV1(),this.scoreLb.text=this.getPower()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.ZN25(),t instanceof TG96)switch(e){case P4.V62:this.canAdd=!0,this.littleAddExp(t),this.ZN26();break;case P4.X8:this.addExp(),this.ZN26();break;case P4.X72:case P4.R64:this.ZN26(),this.updateChange(t.initFaqiData);break;case P4.Y24:this.getData(),this.initPBarPro();break;case P4.V64:case P4.T23:case P4.T21:this.getData();break;case P4.U45:this.dressUpdate()}t instanceof THH9&&this.getData(),t instanceof TF73&&this.ZN26()},t.prototype.ZN26=function(){this.btnExpDan.visible=!1;var t=TG7.FA82(J12.A6,parseInt(N16.init.shootUpItem.value));this.btnAddOne.$setVisible(t);var e=App.CM.gtM(O6.C17).initFaqiData.faqi.lv;N16.expDanData[e+""]&&-1!==N16.base[e+""].exp&&(N12.giC(N16.expDanData[e+""])&&(this.btnExpDan.visible=this.btnExpDan.imgNew.visible=!0,this.btnAddOne.$setVisible(!1)))},t.prototype.littleAddExp=function(t){this.enabledBtn(!1);var e=this.pBarPro.value,i=0,s=1;e+(i=t.initFaqiData.faqi.exp>=e?t.initFaqiData.faqi.exp-e:this.pBarPro.maximum-e+t.initFaqiData.faqi.exp)>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){this.btnRaising.enabled=this.btnAddOne.enabled=this.btnSelfRai.enabled=t},t.prototype.addExp=function(){var t=App.CM.gtM(O6.C17),e=t.initFaqiData.faqi.lv,i=t.initFaqiData.faqi.le,s=N16.base[e+""].level,o=this.pBarPro.value,r=0,n=1;o+(r=t.isUseNow?this.hisLe<i?i-this.hisLe:this.pBarPro.maximum-o+i:s<=6&&0==t.initFaqiData.faqi.exp?this.pBarPro.maximum-o:parseInt(N16.init.shootUpExp.value))>this.pBarPro.maximum&&(n+=1),this.updataExp(o,r,n)},t.prototype.ZK15=function(){var t;t=1==this.num,P16.sGF(this.btnLeft,t),P16.sGF(this.btnRight,!1);var e=App.CM.gtM(O6.C17),i=e.initFaqiData;this.updatePower(),this.btnLeft.enabled=!t,this.btnRight.enabled=!0,i.co&&i.co.length&&(this.btnAward.imgNew.visible=i.co.length!=i.ho.length),-1!=N16.base[this.num+""].exp&&(this.pBarPro.maximum=N16.base[this.num+""].exp,this.pBarPro.value=i.faqi.exp),this.summit();var s=N12.giC(parseInt(N16.init.elixirItem.value)),o=!1;K18.init.attrUseMax.value>e.initFaqiData.en&&(o=!!s),this.btnDan.imgNew.visible=o;var r=[],n=i.faqi.sk.length;r=i.faqi.sk.concat().sort(function(t,e){return t.si-e.si});var a,h=1;if(n)for(l=r.length;l<4;l++){a=i.faqi.sk[n-1].si+h,h+=1;c=this.ZV2(l+1);r.push({si:a,sl:0,count:c})}else{for(var p in N16.skillGroup){a=parseInt(p);break}for(var l=1;l<=4;l++){var c=this.ZV2(l);r.push({si:a,sl:0,count:c}),a+=1}}this.skillCollection.replaceAll(r),this.btnEquip.visible=!1,this.btnSkin.imgNew.visible=!1;var u=N16.FHH90(!1);for(l=0;l<u.length;l++)if(0<N12.giC(u[l].itemid)&&-1==i.faqi.ss.indexOf(u[l].id)){this.btnSkin.imgNew.visible=!0;break}for(var d=[{},{},{},{}],v=App.CM.gtM(O6.B98),f=v.faqiEquip.sort(function(t,e){return t.i-e.i}),g=1;g<=d.length;g++){for(var m=0;m<f.length;m++){if(g==M10.FD92(f[m].i+"",f[m].t).pos){d[g-1]={i:f[m].i,ok:!0,isNew:!1,t:f[m].t};break}}if("{}"==JSON.stringify(d[g-1]))for(var p in M10.faqi)if(M10.faqi[p].pos==g){d[g-1]={i:M10.faqi[p].id,ok:!1,isNew:!1,t:M10.faqi[p].equiptype};break}}var y=v.canFaqiEquip;for(m=1;m<=d.length;m++)0<=y.indexOf(m.toString())&&(d[m-1].isNew=this.btnEquip.visible=this.btnEquip.imgNew.visible=!0,this.grpHave.visible=this.btnChange.visible=!1);this.realTime(),this.equipCollection.replaceAll(d)},t.prototype.getPower=function(){var t=this.skinPower+this.danPower+this.raiPower+this.skillPower+this.equipPower;return Math.round(t)+""},t.prototype.initPBarPro=function(){this.pBarPro.slideDuration=0;var t=App.CM.gtM(O6.C17).initFaqiData.faqi.le;this.hisLe=t,this.lbShort.visible=!!t,this.pBarPro.imgShort.width=t?this.pBarPro.width*(t/this.pBarPro.maximum):0,this.pBarPro.imgShort.x=this.pBarPro.width*(this.pBarPro.value/this.pBarPro.maximum)-this.pBarPro.imgShort.width},t.prototype.ZV2=function(t){var e;for(var i in N16.base){if((N16.base[i].skillid?N16.base[i].skillid.split(","):"").length==t){e=N16.base[i].level;break}}return e},t.prototype.updateMain=function(){N13.type;this.skillName.text=O3.tr(1329);var t=N12.gID(N16.init.advancedItem.value);this.imgDan.setData(t);var e=N12.gID(N16.init.advancedCash.value);this.imgGlod.setData(e)},t.prototype.canExpend=function(){var t=this,e=App.CM.gtM(O6.C17);if(e.isOpenUseYbView)if(this.btnRaising.filters){var i=function(){t.autoUpgrade(!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else{i=function(){t.ZQ92(!1,!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else this.autoUpgrade(!0)},t.prototype.ZQ92=function(t,e){if(!this.canAdd)return!1;if(this.isNewSkin)return this.stopAuto(),!1;var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.C17),o=s.initFaqiData,r=N12.giC(parseInt(N16.init.timeItem.value)),n=N12.giC(parseInt(N16.init.advancedItem.value))+r,a=1,h=N16.base[o.faqi.lv].elixir-n;if(0<h&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,N16.init.advancedItem.value,h),t&&this.stopAuto(),!1;if(N16.base[o.faqi.lv].cash>i.avatarInfo.co||1!=a)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&N16.base[o.faqi.lv].cash<=i.avatarInfo.co&&0<h){var p=parseInt(N16.init.advancedItem.value),l=N15.FA50(p),c=N15.FB92(p),u=N16.base[o.faqi.lv+""].elixir;if(i.avatarInfo.bg>=l)a=2;else{if(!e&&s.isOpenUseYbView)return this.canExpend(),this.closeHandler(),!1;if(!(i.avatarInfo.g>=c*(n?u-n:u)))return P7.FA78(),this.stopAuto(),!1;a=3}}return this.aCF(O6.C17,O15.A15,a),t&&(this.canAdd=!1),s.isUseNow=0<r,!0},t.prototype.autoUpgrade=function(t){var e=this;this.isAutoSelfRai=!0,this.btnStop.visible=!0,this.btnSelfRai.visible=!1,this.isNewSkin=!1,this.canAdd=!0,this.btnRaising.imgNew.visible=!1,this.btnRaising.filters||P16.sGF(this.btnRaising,!0),this.enabledBtn(!1);var i,s=this;if(t||(i=this.ZQ92(!0,!1)),t||i){var o=App.K16.doTimer(300,0,function(){s.ZQ92(!0,t)},s,function(){e.stopAuto()});this.timerArray.push(o)}},t.prototype.sureStop=function(){this.btnStop.visible&&this.stopAuto()},t.prototype.stopAuto=function(){this.btnSelfRai.visible=!0,this.btnStop.visible=!1,this.canAdd=!0,this.isAutoSelfRai=!1,this.isNewSkin=!1,this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible,P16.sGF(this.btnRaising,!1),this.closeHandler(),this.enabledBtn(!0)},t.prototype.clearSkin=function(){this.aCF(O6.C17,O15.A8)},t.prototype.summit=function(){var t=App.CM.gtM(O6.C17).initFaqiData;if(-1==N16.base[t.faqi.lv+""].exp)return this.grpExpend.visible=this.lbShort.visible=!1,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.pBarPro.maximum=this.pBarPro.value=100,this.pBarPro.imgShort.width=0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnSelfRai,!0),this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=this.btnRaising.enabled=this.btnSelfRai.enabled=!1,!1;this.pBarPro.labelFunction=null,this.lbPay.text=N16.base[this.num+""].cash+"",this.haveNum=N12.giC(parseInt(N16.init.advancedItem.value))+N12.giC(parseInt(N16.init.timeItem.value));var e;e=N16.base[this.num+""].elixir,this.haveNum>=e?this.lbAmount.textColor=2987793:this.lbAmount.textColor=15669836;var i=App.CM.gtM(O6.B82);return N16.base[this.num+""].cash<=i.avatarInfo.co?this.lbPay.textColor=2987793:this.lbPay.textColor=15669836,this.lbAmount.text=this.haveNum+"/"+e,this.haveNum>=e&&N16.base[this.num+""].cash<=i.avatarInfo.co?(this.btnRaising.filters||(this.btnRaising.imgNew.visible=!0),this.btnSelfRai.imgNew.visible=!0):this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=!1,this.btnAddOne.imgNew.visible=0<N12.giC(parseInt(N16.init.shootUpItem.value)),!0},t.prototype.updataExp=function(t,e,i){var h=this,p=App.CM.gtM(O6.C17),l=p.initFaqiData.faqi.le;if(!this.summit())return this.getData(),this.clearSkin(),void this.enabledBtn(!1);var c=this,u=function(t,e,i){var s,o=0,r=c.num;s=200,(s=((o=e+i>=c.pBarPro.maximum?(i-=c.pBarPro.maximum-e,c.pBarPro.maximum):i+e)-c.pBarPro.value)/c.pBarPro.maximum*1e3)<200&&(s=200);var n=c.pBarPro.width*(l/c.pBarPro.maximum),a=c.pBarPro.width*((o-l)/c.pBarPro.maximum);p.isUseNow?(c.hisLe>l&&(n=c.pBarPro.width-c.pBarPro.imgShort.x),c.hisLe=l,egret.Tween.get(c.pBarPro.imgShort).to({width:n},s)):(c.hisLe>l&&(a=c.pBarPro.width-c.pBarPro.imgShort.width),egret.Tween.get(c.pBarPro.imgShort).to({x:a},s),c.hisLe=l),o==c.pBarPro.maximum&&(h.isNewSkin=!0),egret.Tween.get(c.pBarPro).to({value:o},s).wait(20).call(function(){(egret.Tween.removeTweens(c.pBarPro),c.lbAddExp.text="+"+N16.init.advancedExp.value,c.lbShort.visible=!!l,c.pBarPro.value==c.pBarPro.maximum)&&(e=0,r+=1,c.pBarPro.maximum=N16.base[r+""].exp,egret.Tween.removeTweens(c.pBarPro.imgShort),c.pBarPro.value=c.pBarPro.slideDuration=c.pBarPro.imgShort.width=c.pBarPro.imgShort.x=0,0<t-1&&u(--t,e,i),App.CM.gtM(O6.B98).ZW35(),c.clearSkin(),c.stopAuto(),c.getData());egret.Tween.get(c.lbAddExp).to({visible:!0}).to({y:c.lbAddExp.y-15},150).call(function(){egret.Tween.removeTweens(c.lbAddExp),c.lbAddExp.y=60,c.lbAddExp.visible=!1,c.updatePower()}),c.enabledBtn(!0)})};u(i,t,e)},t.prototype.getSkinPower=function(){var t=[];this.skinPower=0;for(var e=App.CM.gtM(O6.C17).initFaqiData,i=0;i<e.faqi.ss.length;i++)-1!=N16.skin[e.faqi.ss[i]+""].itemid&&(t.push(e.faqi.ss[i]),this.skinPower+=M10.gAG(N16.skin[e.faqi.ss[i]+""].attr))},t.prototype.getDanPower=function(){var t=N16.init.elixirAttr.value,e=N13.getData(t);this.danPower=0;var i=App.CM.gtM(O6.C17).initFaqiData;for(var s in e)for(var o in e[s]){var r=parseInt(e[s][o])*K18.attribute[o].power*i.en;this.danPower+=r}},t.prototype.FHH78=function(){for(var t=App.CM.gtM(O6.C17).initFaqiData.faqi.sk,e=this.skillPower=0;e<t.length;e++)this.skillPower+=M10.gAG(N16.skillGroup[t[e].si+""][t[e].sl-1+""].attr)},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).faqiEquip.sort(function(t,e){return t.i-e.i}),e=this.equipPower=0;e<t.length;e++){var i=M10.FD92(t[e].i+"",t[e].t),s=M10.gAG(i.attr)+M10.gAG(i.addattr)*i.addlevel;this.equipPower+=s}},t.prototype.FJ47=function(){var t=App.CM.gtM(O6.C17).initFaqiData,e=t.faqi.lv,i=t.faqi.exp;this.raiPower=0,this.count=0,this.arr={101:0,102:0,103:0},this.getCount(e);for(var s=0;s<this.count;s++){var o=N16.base[e-s+""].baseattr,r=N16.base[e-s+""].addattr,n=e-s,a=N13.getData(o),h=N13.getData(r);if(0==s)for(var p in h)for(var l in h[p]){var c=parseInt(h[p][l])*i/N16.init.advancedExp.value*K18.attribute[l].power;this.raiPower+=c;var u=parseInt(h[p][l])*i/N16.init.advancedExp.value;0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=u)}else for(var p in h)for(var l in h[p]){this.raiPower+=parseInt(h[p][l])*N16.base[n+""].exp/N16.init.advancedExp.value*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(h[p][l])*N16.base[n+""].exp/N16.init.advancedExp.value)}for(var p in a)for(var l in a[p]){var d;this.raiPower+=parseInt(a[p][l])*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(a[p][l]))}}var v=P7.FA54(E5.A13);this.raiPower+=this.raiPower*v},t.prototype.getCount=function(t){N16.base[t+""]&&(this.count+=1,this.getCount(t-1))},t}(BaseEuiView);__reflect(FaqiView.prototype,"FaqiView");var FaqiSkillDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.ZV3=function(){App.CM.apF(O6.C17,O15.A14,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){App.CM.gtM(O6.C17);this.imgHead.source=N16.init["skillIcon"+(this.itemIndex+1)].value;var t=N16.skillGroup[this.data.si+""][this.data.sl-1],e=N16.skillGroup[this.data.si+""].length,i=N12.giC(parseInt(N16.init.skillItem.value))+"";this.data.sl?(this.grpCount.visible=!0,this.lbNum.text=this.data.sl+"",this.lbNum.textColor=16777215,this.grpNot.visible=!1,this.imgNew.visible=t.cost<=i&&e>t.level):(this.grpNot.visible=!0,this.grpCount.visible=!1,this.lbCount.text=O3.tr(1320,this.data.count))},t}(eui.ItemRenderer);__reflect(FaqiSkillDataItem.prototype,"FaqiSkillDataItem");var FaqiSkinDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this),App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t.prototype.ZV4=function(){App.CM.apF(O6.C17,O15.A17,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C17).initFaqiData.faqi;if(0<=t.ss.indexOf(this.data.id))this.imgGet.visible=!0,this.imgNew.visible=!1,this.lbName.textColor=11481344;else{this.imgGet.visible=!1,this.lbName.textColor=11301691;var e=N12.giC(this.data.itemid);this.imgNew.visible=0<e}this.grpHave.visible=t.k==this.data.id,this.imgOn.visible=this.data.isShow,this.lbName.text=this.data.name,this.data.isShow?P7.FM14()?App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",157,43):App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",53.5,157):App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t}(eui.ItemRenderer);__reflect(FaqiSkinDataItem.prototype,"FaqiSkinDataItem");var FaqiDan=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingDanSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4700)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4701)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4702)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4703)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4704)),this.btnUse.label=O3.tr(4705)},t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.updateUI()},t.prototype.close=function(){this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.num=null},t.prototype.closeSelf=function(){App.CM.apF(O6.C17,O15.A18)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C17).initFaqiData,e=N12.gID(N16.init.elixirItem.value);this.num=N12.giC(parseInt(N16.init.elixirItem.value)),this.lbOwn.text=O3.tr(1321,this.num);N12.base[N16.init.elixirItem.value].batchusenum;var i=K18.init.attrUseMax.value;if(t.en>=i)this.lbCount.text="0";else{var s=i-t.en;this.lbCount.text=String(this.num>s?s:this.num)}this.dlg.title=e.name,this.imgQuality.source=N12.getBox(e.quality),O5.FB13(this.lbName,e.name,e.quality),this.imgHead.source=N12.FJ86(e.id),this.lbNum.text=t.en+"";var o=N16.init.elixirAttr.value,r=N13.getData(o);for(var n in r)for(var a in r[n]){var h=parseInt(r[n][a])*t.en;this["lbAttr"+n].text=K18.attribute[a].name+"：",this["lbCount"+n].text=h}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG96)switch(e){case P4.T23:this.updateUI()}},t.prototype.changeUse=function(t){var e=parseInt(this.lbCount.text),i=N16.init.elixirItem.value,s=(N12.base[i].batchUse,App.CM.gtM(O6.C17)),o=K18.init.attrUseMax.value,r=s.initFaqiData.en,n=o-r,a=n<=this.num?n:this.num;if(!(o<=r))switch(t.target.name){case"-":0<e-1&&(this.lbCount.text=(e-1).toString());break;case"+":e+1<=a&&(this.lbCount.text=(e+1).toString());break;case"--":var h=parseInt(this.btnBigMinus.label);this.lbCount.text=0<e+h?(e+h).toString():(0<a?1:0)+"";break;case"++":var p=parseInt(this.btnBigAdd.label);this.lbCount.text=e+p<=a?(e+p).toString():a+""}},t.prototype.startUse=function(){var t=App.CM.gtM(O6.C17);K18.init.attrUseMax.value<=t.initFaqiData.en?P18.sDP(O3.tr(1333)):0!=parseInt(this.lbCount.text)?this.apF(O15.A28,parseInt(this.lbCount.text)):P18.sDP(O3.tr(1318))},t.prototype.ZQ49=function(){var t=N12.gID(N16.init.elixirItem.value);this.aCF(O6.C11,O14.A15,t,this.num)},t}(BaseEuiView);__reflect(FaqiDan.prototype,"FaqiDan");var FaqiDerma=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.index=null,i.pageSize=6,i.itemWidth=95,i.skinName=WingDermaSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skinData.dataProvider=this.skinCollection=new eui.ArrayCollection,this.skinData.itemRenderer=FaqiSkinDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5128)),this.btnActivate.label=O3.tr(6407),this.btnChange.label=O3.tr(4987),P7.FM14()&&(this.itemWidth=186.75,this.pageSize=3)},t.prototype.open=function(t){t&&(this.argId=t),this.scrRoll.addEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this);var e=App.CM.gtM(O6.B82);this.avatarModel=e.avatarInfo.us[J11.A7],this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.updateUI(),t&&this.ZW55()},t.prototype.close=function(){this.scrRoll.removeEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.classData=null,this.regularData=null,this.init=null,this.base=null,this.skins=null,this.skinCollection.removeAll(),this.avatarModel=null,this.nowModel=null,this.index=null},t.prototype.ZW55=function(){for(var t=N16.FHH90(!1),e=0,i=0;i<t.length;i++)t[i].id==this.argId&&(e=i);this.scrRoll.validateNow();var s=Math.ceil((e+1)/6)-1;this.scrRoll.viewport.scrollH=this.scrRoll.width*s-10;var o=Math.floor(t.length/6);this.scrRoll.viewport.scrollH<0&&(this.scrRoll.viewport.scrollH=0),this.btnLeft.visible=!!s,o<=s&&(this.btnRight.visible=!1),this.isShowHong()},t.prototype.isShowHong=function(){var t=App.CM.gtM(O6.C17).initFaqiData.faqi;this.btnLeft.imgNew.visible=this.btnRight.imgNew.visible=!1;for(var e=this.getStartIndex,i=this.skinCollection.source,s=e,o=e+1+6,r=0;r<s;r++){if(N12.giC(i[r].itemid)&&t.ss.indexOf(i[r].id)<0){this.btnLeft.imgNew.visible=!0;break}}for(var n=this.skinCollection.source.length-1;o<n;n--){if(N12.giC(i[n].itemid)){this.btnRight.imgNew.visible=!0;break}}},t.prototype.goShopPing=function(){var t={sLink:parseInt(this.lbSource.name)};TG84.goToDlg(t)},t.prototype.closeSelf=function(){this.apF(O15.A6)},t.prototype.activate=function(){this.apF(O15.A20,this.classData[this.index+""].id)},t.prototype.canChange=function(){this.apF(O15.A19,this.classData[this.index+""].id)},t.prototype.ZQ91=function(t){for(var e=0;e<this.skinCollection.length;e++)this.skinCollection.getItemAt(e).isShow=!1;this.index=t,this.skinCollection.getItemAt(t).isShow=!0,this.skinCollection.replaceAll(this.classData),this.ZN22(t)},t.prototype.updateUI=function(){this.lbTitle.text=O3.tr(1306),this.lbAllText.text=O3.tr(1322),this.lbOnText.text=O3.tr(1323);var t=App.CM.gtM(O6.C17).initFaqiData.faqi;if(this.classData=this.adjust(N16.FHH90(!1).concat()),this.regularData=N16.FHH90(!1),this.init=N16.init,this.base=N16.base,this.skins=N16.skin,this.skinCollection.replaceAll(this.classData),this.classData.length<=6&&(this.btnRight.visible=!1),this.index=0,this.argId){for(var e=0;e<this.classData.length;e++)if(this.classData[e].id==this.argId){this.index=e;break}}else for(e=0;e<this.classData.lenght;e++)if(this.classData[e].id==t.k){this.index=e;break}this.ZQ91(this.index)},t.prototype.adjust=function(t){for(var e=[],i=App.CM.gtM(O6.C17).initFaqiData.faqi,s=t.length-1;0<=s;s--){if(t[s].state=0,t[s].id==i.k||0<=i.ss.indexOf(t[s].id))t[s].id==i.k?t[s].state=2:t[s].state=1,e.push(t[s]),t.splice(s,1);else 1<=N12.giC(t[s].itemid)&&(t[s].state=3,e.unshift(t[s]),t.splice(s,1))}return e.sort(function(t,e){return e.state-t.state}),e=e.concat(t)},t.prototype.ZN22=function(t){var e=App.CM.gtM(O6.C17).initFaqiData.faqi;this.index=t,this.nowModel||(this.nowModel=new TF39),this.nowModel.id=this.avatarModel.id,this.nowModel.h=this.avatarModel.h,this.nowModel.wi=this.avatarModel.wi,this.nowModel.we=this.avatarModel.we,this.nowModel.f=this.classData[t+""].id,this.nowModel.bt=BehaviourType.Stand_d;var i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),this.objBoss.setData(this.nowModel,this.gpBoss),this.lbName.text=this.classData[t+""].name,this.lbSource.text=this.classData[t+""].gainway,this.lbSource.name=this.classData[t+""].showid,0<this.classData[t+""].showid?M18.FHH83(this.lbSource):M18.FF64(this.lbSource),this.imgQuality.source=N12.getBox(N12.gID(this.classData[t+""].itemid+"").quality),this.imgHead.source=N12.FJ86(this.classData[t+""].itemid),this.imgHead.name=this.classData[t+""].itemid+"";var s=N12.giC(this.classData[t+""].itemid);0==(this.num=s)?(this.lbNum.text="(0/1)",this.lbNum.textColor=14164514,this.btnActivate.visible=this.btnChange.visible=this.grpHave.visible=!1,this.grpNoLive.visible=this.grpShow.visible=this.grpDetail.visible=!0):(this.lbNum.textColor=7716890,this.lbNum.text="("+s+"/1)",this.grpNoLive.visible=this.btnActivate.visible=this.grpDetail.visible=!0,this.grpShow.visible=this.grpHave.visible=this.btnChange.visible=!1),0<=e.ss.indexOf(this.classData[t+""].id)&&(this.grpHave.visible=this.grpDetail.visible=this.grpNoLive.visible=!1,this.btnChange.visible=!0),e.k==this.classData[t+""].id&&(this.btnChange.visible=this.grpNoLive.visible=this.grpDetail.visible=!1,this.grpHave.visible=!0),this.scoreLb.text=M10.gAG(this.classData[t+""].attr)+"";var o=N13.getData(this.classData[t+""].attr);for(var r in o)for(var n in o[r])this["lbAttr"+r].text=K18.attribute[n].name+":"+o[r][n];this.grpHave.visible||this.btnChange.visible?this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=7716890:this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=16458017;var a=0,h=0;for(var r in e.ss)-1!=this.skins[e.ss[r]+""].itemid&&(h+=1,a+=M10.gAG(this.skins[e.ss[r]+""].attr));this.lbAllPower.text=a+"",this.lbHave.text=h+""},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG96)switch(e){case P4.X72:case P4.R64:this.updateUI()}if(t instanceof THH14)switch(e){case P4.U59:this.ZQ91(this.index)}},t.prototype.doLeft=function(){var t=this.getStartIndex,e=Math.max(0,t-this.pageSize);this.scrRoll.viewport.scrollH=e*this.itemWidth,this.isShowHong(),this.ZQ72()},Object.defineProperty(t.prototype,"getStartIndex",{get:function(){return Math.floor(this.scrRoll.viewport.scrollH/this.itemWidth)},enumerable:!0,configurable:!0}),t.prototype.doRight=function(){var t=this.getStartIndex,e=this.skinCollection.length-this.pageSize,i=Math.min(e,t+this.pageSize);this.scrRoll.viewport.scrollH=e===i?this.scrRoll.viewport.contentWidth-this.scrRoll.width:i*this.itemWidth,this.isShowHong(),this.ZQ72()},t.prototype.ZQ72=function(){var t=this.scrRoll.viewport;this.btnLeft.visible=0!=t.scrollH,this.btnRight.visible=Math.abs(t.scrollH+this.scrRoll.width)<t.contentWidth},t.prototype.showNextData=function(t){switch(t.target.name){case"-":this.doLeft();break;case"+":this.doRight()}},t.prototype.openAddView=function(){this.apF(O15.A3,{power:0,index:0,skinId:this.classData[this.index+""].id})},t.prototype.ZQ49=function(){var t=N12.gID(this.imgHead.name);this.aCF(O6.C11,O14.A15,t,this.num),TG40.playClickEffect()},t}(BaseEuiView);__reflect(FaqiDerma.prototype,"FaqiDerma");var FaqiEverAdd=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinPower=0,i.getIndex=1,i.array=[],i.strs=[O3.tr(5742),O3.tr(5743),O3.tr(5744)],i.skinName=WingEverAddSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.attrAddData.dataProvider=this.attrAddCollection=new eui.ArrayCollection},t.prototype.open=function(t){this.num=t.index,this.power=t.power,this.skinId=t.skinId,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.attrAddCollection.removeAll(),this.num=null,this.power=null,this.skinId=null,this.fitDreData=null,this.skinPower=null,this.array=null,this.nowModel=null},t.prototype.closeSelf=function(){this.apF(O15.A1)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B98),e=App.CM.gtM(O6.C17),i=(e.initFaqiData,this.skinId?this.skinId:e.initFaqiData.faqi.k);this.nowModel||(this.nowModel=new TF39);var s=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7];this.nowModel.id=s.id,this.nowModel.f=i,this.nowModel.bt=BehaviourType.Stand_d;var o={id:i,x:0,y:30,dir:Dir.br,objType:P13.A6};this.objBoss||(this.objBoss=new FightGameObject),this.objBoss.setBaseData(o),this.objBoss.setData(this.nowModel,this.gpBoss);for(var r=this.gpBoss.getChildAt(0),n=0;n<r.numChildren;n++){var a=r.getChildAt(n);a.fight_st&&"f"!=a.fight_st&&(a.visible=!1)}this.fitDreData=t.faqiEquip.sort(function(t,e){return t.i-e.i}),this.lbTitle.text=O3.tr(1324),this.skinPower=0;var h=this.getSkinPower(),p=this.getDanPower(),l=this.FJ47(),c=this.ZV1();this.array=[],this.num?(this.scoreLb.text=this.power+"",this.array.push({name:O3.tr(1326)+O3.tr(2412),n0:l.n0,n1:l.n1,n2:l.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1327)+O3.tr(2412),n0:c.n0,n1:c.n1,n2:c.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1328)+O3.tr(2412),n0:p.n0,n1:p.n1,n2:p.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})):(this.scoreLb.text=Math.round(this.skinPower)+"",this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})),this.attrAddCollection.replaceAll(this.array)},t.prototype.getSkinPower=function(){for(var t=[],e={n0:0,n1:0,n2:0},i=App.CM.gtM(O6.C17).initFaqiData,s=0;s<i.faqi.ss.length;s++)-1!=N16.skin[i.faqi.ss[s]+""].itemid&&(t.push(i.faqi.ss[s]),this.skinPower+=M10.gAG(N16.skin[i.faqi.ss[s]+""].attr));for(s=0;s<t.length;s++){var o=N13.getData(N16.skin[t[s]+""].attr);for(var r in o)for(var n in o[r]){var a=this.strs.indexOf(K18.attribute[n].name);0<=a&&(e["n"+a]+=parseInt(o[r][n]))}}return e},t.prototype.getDanPower=function(){var t={n0:0,n1:0,n2:0},e=N16.init.elixirAttr.value,i=N13.getData(e),s=App.CM.gtM(O6.C17).initFaqiData;for(var o in i)for(var r in i[o]){var n=parseInt(i[o][r])*s.en,a=this.strs.indexOf(K18.attribute[r].name);0<=a&&(t["n"+a]=n)}return t},t.prototype.ZV1=function(){for(var t={n0:0,n1:0,n2:0},e=this.fitDreData,i=0;i<e.length;i++){var s=M10.FD92(e[i].i,e[i].t),o=N13.getData(s.attr),r=N13.getData(s.addattr);for(var n in o)for(var a in o[n]){0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a]))}for(var n in r)for(var a in r[n]){var h;0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a])*s.addlevel)}}return t},t.prototype.getCount=function(t){N16.base[t-1+""]&&(this.getIndex+=1,this.getCount(t-1))},t.prototype.FJ47=function(){var t={n0:0,n1:0,n2:0},e=App.CM.gtM(O6.C17).initFaqiData,i=e.faqi.lv,s=e.faqi.exp;this.getIndex=1,this.getCount(i);for(var o=0;o<this.getIndex;o++){var r=N16.base[i-o+""].baseattr,n=N16.base[i-o+""].addattr,a=i-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){var u=parseInt(p[l][c])*s/N16.init.advancedExp.value;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=u)}else for(var d in p)for(var c in p[d]){0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(p[d][c])*N16.base[a+""].exp/N16.init.advancedExp.value)}for(var v in h)for(var c in h[v]){var f;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(h[v][c]))}}var g=P7.FA54(E5.A13);for(var c in t)t[c]+=Math.floor(t[c]*g);return t},t}(BaseEuiView);__reflect(FaqiEverAdd.prototype,"FaqiEverAdd");var faqi,FaqiSkill=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingSkillSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.grps=[this.grp0,this.grp1,this.grp2,this.grp3],this.grpEffects=[this.grpEffect0,this.grpEffect1,this.grpEffect2],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5098)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5099)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5100)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5101)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5102)),this.lbReach.textFlow=M18.HTP.parse(O3.tr(5103)),this.btnUpgrade.label=O3.tr(5104)},t.prototype.open=function(t){this.index=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var e=0;e<this.grps.length;e++){this.grps[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this),this.grps[e].getChildByName("imgOpt").visible=e==this.index}this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var t=0;t<this.grps.length;t++)this.grps[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this);this.index=null,this.skillData=null},t.prototype.closeSelf=function(){this.apF(O15.A7)},t.prototype.GT53=function(){var t=N12.gID(N16.init.skillItem.value);this.aCF(O6.C11,O14.A15,t,this.lbOwn.text)},t.prototype.upgrade=function(){if(this.lbOwn.textColor!=_cc.red){var t=this.skillData[this.index].si;N16.skillGroup[t+""][0].wid;this.apF(O15.A9,t)}else{var e=parseInt(N16.init.skillItem.value);App.VM.open(O7.G87,e,1,P12.A26)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG96)switch(e){case P4.R64:this.updateUI();break;case P4.V64:this.updateUI(!0)}else t instanceof THH9&&this.updateUI()},t.prototype.updateUI=function(t){void 0===t&&(t=!1);var e=App.CM.gtM(O6.C17);this.skillData=[];var i=e.initFaqiData;this.lbTitle.text=O3.tr(1329);var s=i.faqi.sk.length;this.skillData=i.faqi.sk.concat().sort(function(t,e){return t.si-e.si});var o;if(s)for(n=this.skillData.length;n<4;n++){o=this.skillData[this.skillData.length-1].si+1;a=this.ZV2(n+1);this.skillData.push({si:o,sl:0,count:a})}else{for(var r in N16.skillGroup){o=parseInt(r);break}for(var n=1;n<=4;n++){var a=this.ZV2(n);this.skillData.push({si:o,sl:0,count:a}),o+=1}}for(n=0;n<this.grps.length;n++){var h=this.grps[n].getChildByName("imgHead"),p=this.grps[n].getChildByName("grpCount"),l=this.grps[n].getChildByName("grpNotOpen");h.source=N16.init["skillIcon"+(n+1)].value;N16.skillGroup[this.skillData[n].si+""][this.skillData[n].sl-1],N12.giC(parseInt(N16.init.skillItem.value)),N16.skillGroup[this.skillData[n].si+""].length;if(this.skillData[n].sl){var c=p.getChildAt(p.numChildren-1);p.visible=!0;var u=parseInt(c.text),d=this.grps[n].getChildByName("effect");this.skillData[n].sl>u&&t&&App.THH33.aUE(d,"iconSkill",-d.width/2+5,-d.height/2+5,1),c.text=""+this.skillData[n].sl,l.visible=!1}else{l.visible=!0,p.visible=!1,l.getChildAt(l.numChildren-1).text=O3.tr(1320,this.skillData[n].count)}}this.updateInfo(this.skillData[this.index])},t.prototype.updateInfo=function(t){var e=N16.init["skillName"+(this.index+1)].value;if(this.lbName.text=e,this.lbNowAttr1.text=this.lbNowNum1.text=this.lbNextAttr1.text=this.lbNextNum1.text="",t.sl){var i=N16.skillGroup[t.si+""][t.sl-1];this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!0,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!1,this.lbClass.text=O3.tr(1331,t.sl);var s=O3.tr(1300,N12.base[N16.init.skillItem.value].name,i.cost);this.lbExpend.textFlow=(new egret.HtmlTextParser).parser(s),this.lbOwn.text=N12.giC(parseInt(N16.init.skillItem.value))+"",this.lbOwn.textColor=parseInt(this.lbOwn.text)>=i.cost?_cc.green:_cc.red,this.btnUpgrade.imgNew.visible=parseInt(this.lbOwn.text)>=i.cost,this.imgHead.source=N12.FJ86(N16.init.skillItem.value),this.imgQuality.source=N12.getBox(N12.base[N16.init.skillItem.value].quality);var o=N13.getData(i.attr);for(var r in o)for(var n in o[r])this["lbNowAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNowNum"+r].text=o[r][n]}else{this.lbClass.text="",this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!1,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!0;(i=N16.skillGroup[t.si+""][t.sl]).name;var a=WingLangs.typeMaps[N13.type].name;this.lbCondition.text=O3.tr(1316,a,t.count)}var h=N16.skillGroup[t.si+""][t.sl+""];if(h&&t.sl!=N16.skillGroup[t.si+""].length){this.grpData.visible=!0,this.lbReach.visible=!1;o=N13.getData(h.attr);for(var r in o)for(var n in o[r])this["lbNextAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNextNum"+r].text=o[r][n]}else this.grpUpgrade.visible=this.grpData.visible=!1,this.lbReach.visible=!0},t.prototype.ZV2=function(t){var e;for(var i in N16.base){if((N16.base[i].skillid?N16.base[i].skillid.split(","):"").length==t){e=N16.base[i].level;break}}return e},t.prototype.skillNew=function(t){var e=parseInt(t.target.name);this.index=e;for(var i=0;i<this.grps.length;i++){this.grps[i].getChildByName("imgOpt").visible=i==e}this.updateInfo(this.skillData[this.index]),TG40.playClickEffect()},t}(BaseEuiView);__reflect(FaqiSkill.prototype,"FaqiSkill"),function(t){var e=function(){};t.FaqiVo=e,__reflect(e.prototype,"faqi.FaqiVo");var i=function(){};t.FaqiSkillVo=i,__reflect(i.prototype,"faqi.FaqiSkillVo")}(faqi||(faqi={}));var FightBattleDirector=function(){function t(t){this.mySite=1,this.curWaveIndex=0,this.curAnys={},this.fabaoFly={},this.fabaoEffect={},this.immortalImg={},this.batView=t,this.ctr=ObjectPool.pop("FightCompPlayCtrl"),FightCompManager.addComponent(this.ctr),this.bossTalk=new BossTalk,this.childrenTalk=new BossTalk}return t.prototype.setBossTalk=function(t){this.bossTalk.setTalkMsg(t)},t.prototype.setReport=function(t,e,i){if(this.tReport=t,this.roundLimit=e,null!=this.tReport&&this.tReport.ws&&this.tReport.aas&&0!==this.tReport.aas.length&&this.tReport.pas&&0!==this.tReport.pas.length){var s=App.CM.gtM(O6.B82);this.initMySite(i&&i.sideAid||s.avatarInfo.id),this.curWaveIndex=0,this.curRoundIndex=0,this.curWave=null,this.ZS30()}else this.ZI59()},t.prototype.initMySite=function(t){if(this.mySite=1,this.tReport.pis)for(var e=0;e<this.tReport.pis.length;e++)if(t&&this.tReport.pis[e]===t){this.mySite=2;break}},t.prototype.ZS29=function(p,l,c,u){var d=this,v=(p==this.mySite?this.tReport.aas:this.tReport.pas)[l];v.cpus=P7.copyTab(v.pus),v.us.forEach(function(t,e){var i=TF40.FHH37(p,t);if(c){var s=i.x,o=i.y,r=FightD.BT_ENTER_DIS,n=TG67.FD5(i.s,r,s,o);i.x=n.x,i.y=n.y;var a,h=d.ZW64(i,l,p,t.p);e==v.us.length-1&&(a=u),h.action=Action.Move,egret.Tween.get(h).to({x:s,y:o},P17.A36/FightD.BT_PLAY_SPEED).call(function(){h.action=Action.Stand,a&&a.call(d)},d)}else t.ty==J11.A10||d.ZW64(i,l,p,t.p)})},t.prototype.ZW62=function(p,l){var c=this,t=p==this.mySite?this.tReport.aas:this.tReport.pas,e=P7.copyTab(t[l]),u=this;e.us.forEach(function(t,e){var i=null!=u.curRoundIndex?u.curRoundIndex+1:1,s=i%4==0?4:i%4;if(t.ty!=J11.A10||t.r!=s);else{var o=TF40.FHH37(p,t);c.ZW64(o,l,p,t.p);var r=c.curWaveIndex+"_"+p+"_"+t.r;if(c.fabaoFly[r]){var n=c.fabaoFly[r];c.fabaoFly[r]=null,delete c.fabaoFly[r];var a=egret.setTimeout(function(t){c.fabaoHurt(t),egret.clearTimeout(a)},c,400,n)}else if(c.fabaoEffect[r]){n=c.fabaoEffect[r];c.fabaoEffect[r]=null,delete c.fabaoEffect[r];var h=egret.setTimeout(function(t){c.ZL32(t),egret.clearTimeout(h)},c,400,n)}}})},t.prototype.ZW63=function(h,t){var p=this,e=h==this.mySite?this.tReport.aas:this.tReport.pas,l=P7.copyTab(e[t]),c=0,u=this,i=function(t){var e=l.us[t],i=null!=u.curRoundIndex?u.curRoundIndex+1:1,s=i%4==0?4:i%4;if(e.ty==J11.A10&&e.r==s){c=e.id;var o=d.curWaveIndex+"_"+h+"_"+e.r;if(d.fabaoFly[o]){var r=d.fabaoFly[o];d.fabaoFly[o]=null,delete d.fabaoFly[o];var n=egret.setTimeout(function(t){p.fabaoHurt(t),egret.clearTimeout(n)},d,400,r)}else if(d.fabaoEffect[o]){r=d.fabaoEffect[o];d.fabaoEffect[o]=null,delete d.fabaoEffect[o];var a=egret.setTimeout(function(t){p.ZL32(t),egret.clearTimeout(a)},d,400,r)}return"break"}},d=this;for(var s in l.us){if("break"===i(s))break}return c},t.prototype.setInitFaBao=function(t,e){var i=t==this.mySite?this.tReport.aas:this.tReport.pas,s=P7.copyTab(i[e]);for(var o in s.us){var r=s.us[o];if(r.ty==J11.A10){var n=TF40.FHH37(t,r);this.ZW64(n,e,t,r.p).getComponent(J14.C_Avatar).body.visible=!1;break}}return 0},t.prototype.doObjFill=function(s,t){var o=this,e=this.curWave.ai,i=this.curWave.pi;2==this.mySite&&(e=this.curWave.pi,i=this.curWave.ai);var r=1==s?e:i,n=(s==this.mySite?this.tReport.aas:this.tReport.pas)[r];if(n.cpus&&n.cpus[t]&&0<n.cpus[t].length){var a=n.cpus[t].splice(0,1)[0],h=TF40.FHH37(s,a),p=h.x,l=h.y,c=TG67.FD5(h.s,FightD.BT_FILL_DIS,p,l);h.x=c.x,h.y=c.y;var u=this.ZW64(h,r,s,a.p);u.action=Action.Move,u.batMoving=!0,egret.Tween.get(u).to({x:p,y:l},P17.A36/FightD.BT_PLAY_SPEED).call(function(){if(u.batMoving=!1,u.action=Action.Stand,o.doWaitAtk(u),u.bodyType==J11.A5){var t=o.curRoundIndex+1,e=o.curWaveIndex+"_"+s+"_"+t,i=o.immortalImg[e];i&&(o.ZL33(i,u),o.immortalImg[e]=null,delete o.immortalImg[e])}},this)}},t.prototype.doObjFreeze=function(t,e){var i=this.ZI57(t,e);if(i){i.ZO52();var s=i.getComponent(J14.C_Avatar);s&&s.setFreeze(!1)}},t.prototype.ZF33=function(t,e,i,s){var o=new FightGameObject;1==e?t.bt=BehaviourType.Fight_u:2==e&&(t.bt=BehaviourType.Fight_d),o.setData(t,this.batView.ZR68(),this.batView),o.ZW75(),this.divideGameObjs||(this.divideGameObjs={});var r=this.divideGameObjs[s];if(r)var n=egret.setTimeout(function(t){egret.Tween.removeTweens(t),t.destory(),egret.clearTimeout(n)},this,500,r);return this.divideGameObjs[s]=o},t.prototype.ZW64=function(t,e,i,s){if(null==t)return null;var o=new FightGameObject,r=this.getFightType();1==i?t.bt=BehaviourType.Fight_u:2==i&&(t.bt=BehaviourType.Fight_d),o.setData(t,this.batView.ZR68(),this.batView);var n=o.getComponent(J14.C_Avatar);if(o.bodyType==J11.A10||o.ZW75(),2===i&&8===s&&r===P15.A22){var a=this.bossTalk;a.talkmsg.text?(a.x=-60,a.top=-85,n.body.addChild(a),egret.Tween.get(a).wait(5e3).call(function(){egret.Tween.removeTweens(a),App.TF56.ZJ66(a)})):App.TF56.ZJ66(a)}if(null==this.gameObjs&&(this.gameObjs={}),o[FightD.BT_PKEY]=this.getObjKey(e,i,s),this.gameObjs[o[FightD.BT_PKEY]]){var h=this.gameObjs[o[FightD.BT_PKEY]];h[FightD.BT_PKEY]=null,delete h[FightD.BT_PKEY],h.destory(),this.gameObjs[o[FightD.BT_PKEY]]=null,delete this.gameObjs[o[FightD.BT_PKEY]]}(this.gameObjs[o[FightD.BT_PKEY]]=o).getComponent(J14.C_Blood);return this.ZO46(o.bodyType,o.hp,o.thp),o.bodyType!=J11.A13||this.getFightType()!=P15.A10&&this.getFightType()!=P15.A31||(o.method="wdsg_kffzs_a_001"),o},t.prototype.ZW65=function(t,e){var i=0;this.curWave&&(i=1==t?this.curWave.ai:this.curWave.pi);var s=1==this.mySite?t:3-t;return this.gameObjs[this.getObjKey(i,s,e)]},t.prototype.ZI57=function(t,e){var i=0;return this.curWave&&(i=1==t?this.curWave.ai:this.curWave.pi),this.gameObjs[this.getObjKey(i,t,e)]},t.prototype.getObjKey=function(t,e,i){return t+"_"+e+"_"+i},t.prototype.ZF34=function(){var i=this;this.gameObjs&&Object.keys(this.gameObjs).forEach(function(t){var e=i.gameObjs[t];egret.Tween.removeTweens(e),e.destory(),i.gameObjs[t]=null,delete i.gameObjs[t]});this.gameObjs={}},t.prototype.ZI58=function(){if(this.divideGameObjs)for(var t in this.divideGameObjs){var e=this.divideGameObjs[t];egret.Tween.removeTweens(e),e.destory(),this.divideGameObjs[t]=null,delete this.divideGameObjs[t]}this.divideGameObjs=null},t.prototype.ZE2=function(t){if(this.divideGameObjs){var e=this.divideGameObjs[t];e&&(egret.Tween.removeTweens(e),e.destory()),this.divideGameObjs[t]=null,delete this.divideGameObjs[t]}},t.prototype.ZO42=function(){var t=!1;for(var e in this.divideGameObjs)if(this.divideGameObjs[e]||null!=this.curAtkObj){t=!0;break}return t},t.prototype.setFaBaoObj=function(){var t=this.ZW63(1,this.curWave.ai),e=this.ZW63(2,this.curWave.pi),i=!1,s=!1;if(this.gameObjs)for(var o in this.gameObjs){if((a=this.gameObjs[o]).bodyType==J11.A10){var r=1==this.mySite?this.mySite:3-this.mySite;if(a.side==r)i=!0,a.getComponent(J14.C_Avatar).body.visible=!!t&&(a.bodyId=t,!0);else s=!0,a.getComponent(J14.C_Avatar).body.visible=!!e&&(a.bodyId=e,!0)}}if(t)i||this.ZW62(1,this.curWave.ai);else{var n=!1;if(this.gameObjs)for(var o in this.gameObjs){if((a=this.gameObjs[o]).bodyType==J11.A10){r=1==this.mySite?this.mySite:3-this.mySite;if(a.side==r)n=!(a.getComponent(J14.C_Avatar).body.visible=!1)}}n||this.setInitFaBao(1,this.curWave.ai)}if(e)s||this.ZW62(2,this.curWave.pi);else{n=!1;if(this.gameObjs)for(var o in this.gameObjs){var a;if((a=this.gameObjs[o]).bodyType==J11.A10){r=1==this.mySite?this.mySite:3-this.mySite;if(a.side!=r)n=!(a.getComponent(J14.C_Avatar).body.visible=!1)}}n||this.setInitFaBao(2,this.curWave.pi)}},t.prototype.ZL29=function(t){if(null!=t){var e=t[FightD.BT_PKEY];t[FightD.BT_PKEY]=null,delete t[FightD.BT_PKEY],t.destory(),this.gameObjs[e]=null,delete this.gameObjs[e]}},t.prototype.ZL30=function(){var i=this;this.gameObjs&&Object.keys(this.gameObjs).forEach(function(t){var e=i.gameObjs[t];e&&e.hp<=0&&(egret.Tween.removeTweens(e),i.ZL29(e))})},t.prototype.ZF35=function(t){var e=t[FightD.BT_PKEY];this.gameObjs[e]=null,delete this.gameObjs[e];var i=t.getComponent(J14.C_Avatar);egret.Tween.get(i.body).to({alpha:1},P17.A30/FightD.BT_PLAY_SPEED).to({alpha:0},P17.A31/FightD.BT_PLAY_SPEED).to({alpha:.5},P17.A32/FightD.BT_PLAY_SPEED).to({alpha:0},P17.A33/FightD.BT_PLAY_SPEED).call(function(){egret.Tween.removeTweens(i.body),t[FightD.BT_PKEY]=null,delete t[FightD.BT_PKEY],t.destory()})},t.prototype.ZI59=function(){var t=this;this.ctr.wait(P17.A35).call(function(){t.batView.ZS38()},this)},t.prototype.destroy=function(){egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.bossTalk),FightCompManager.ZN95(this.ctr),this.ctr.stop(),ObjectPool.push(this.ctr),FightCompManager.ZC48(J14.C_Skill),FightCompManager.ZC48(J14.C_Hit),this.ZF34(),this.curAtkObj=null,this.curWaitAtkObj=null,this.recDieObjDatas=null,this.freezeObjDatas=null},t.prototype.getFightType=function(){return this.tReport&&this.tReport.sl?this.tReport.sl:1},t.prototype.getUnitData=function(t,e){var i=1==t?this.curWave.ai:this.curWave.pi,s=(1==t?this.tReport.aas:this.tReport.pas)[i];if(s.pus&&s.pus[e]&&0<s.pus[e].length){var o=(r=s.pus[e].length-1)-(s.cpus[e]?s.cpus[e].length-1:0);if(0<o)return s.pus[e][o-1]}if(s.us)for(var r=0;r<s.us.length;r++)if(s.us[r].p==e)return s.us[r];return null},t.prototype.getWave=function(){return this.curWaveIndex<this.tReport.ws.length?this.tReport.ws[this.curWaveIndex]:null},t.prototype.getRoundData=function(){return this.curRoundIndex<this.roundLimit&&this.curRoundIndex<this.curWave.rs.length?this.curWave.rs[this.curRoundIndex]:null},t.prototype.getOrder=function(){return this.curRound&&this.curRound.ro<=this.roundLimit&&this.curRound.ars&&this.curOrderIndex<this.curRound.ars.length?this.curRound.ars[this.curOrderIndex]:null},t.prototype.getAtkData=function(){return this.curOrder&&this.curOrder.ats&&this.curAtkIndex<this.curOrder.ats.length?this.curOrder.ats[this.curAtkIndex]:null},t.prototype.ZL31=function(t){return this.curOrder&&this.curOrder.sps&&this.curAnys[t].index<this.curOrder.sps[t].ats.length?this.curOrder.sps[t].ats[this.curAnys[t].index]:null},t.prototype.getAtkObj=function(){return this.curOrder?this.ZW65(this.curOrder.as,this.curOrder.ap):null},t.prototype.FI15=function(t,e){var i=TF40.getSkill(t,1==this.mySite?e:3-e);return null==i&&(i=TF40.getSkill(1010001,e)),i},t.prototype.addWave=function(){this.curWaveIndex++,this.enterSiteCt=0,this.enterSiteFinishCt=0},t.prototype.ZS30=function(){this.fabaoFly={},this.fabaoEffect={},this.immortalImg={};var t=this.getFightType(),e=this.getWave();if(null!=e){var i=e.ai,s=e.pi;if(2==this.mySite&&(i=e.pi,s=e.ai),this.curWave){t==P15.HeroBattle||t==P15.HeroBattleReplay?this.ZF34():this.ZL30();var o=this.curWave.ai,r=this.curWave.pi;2==this.mySite&&(o=this.curWave.pi,r=this.curWave.ai),o!=i&&(this.enterSiteCt++,this.ZS29(1,i,!0,this.enterFinish)),r!=s&&(this.enterSiteCt++,this.ZS29(2,s,!0,this.enterFinish))}else{this.ZF34(),this.ZS29(1,i,!1),this.ZS29(2,s,!1);var n=this.getFightType();n!=P15.A3&&n!=P15.A14&&n!=P15.A25&&n!=P15.A19&&n!=P15.A18&&n!=P15.A40&&n!=P15.A9&&n!=P15.A33&&n!=P15.A21&&App.CM.apF(O6.B99,N1.A2),this.ctr.wait(P17.A37).call(this.play,this)}this.ZW62(1,i),this.ZW62(2,s),this.curWave=e}else this.ZI59()},t.prototype.doNextWave=function(){this.addWave(),this.ZS30()},t.prototype.enterFinish=function(){this.enterSiteFinishCt++,this.enterSiteFinishCt>=this.enterSiteCt&&(this.enterSiteFinishCt=0,this.enterSiteCt=999999,this.ctr.wait(P17.A23).call(this.play,this))},t.prototype.play=function(){this.curRoundIndex=0,this.curRound=null,this.batView.setCurRound(this.curRoundIndex+1),this.ZO43()},t.prototype.addRound=function(){this.curRoundIndex++,this.curRoundIndex>=this.roundLimit||this.curRoundIndex>=this.curWave.rs.length||this.batView.setCurRound(this.curRoundIndex+1)},t.prototype.ZO43=function(){this.curRound=this.getRoundData(),null!=this.curRound?(this.ZW68(1,this.curRound.rbes),this.curOrderIndex=0,this.curOrder=null,this.ZO44(),this.setFaBaoObj()):this.doNextWave()},t.prototype.finishRound=function(){var t=this;this.ZW68(6,this.curRound.rees),this.ZI60(),this.ZO45(function(){t.addRound(),t.ZO43()})||(this.addRound(),this.ZO43())},t.prototype.addOrder=function(){this.curOrderIndex++},t.prototype.ZO44=function(){var t;if(this.curOrder=this.getOrder(),null!=this.curOrder)if(null==(t=this.getAtkObj())||t.hp<=0)this.doNextActionByOrder();else{if(this.ZW68(2,this.curOrder.abes),this.curOrder&&this.curOrder.sps)for(var e=0;e<this.curOrder.sps.length;e++){var i=t.side,s=t.batPos,o=void 0,r=i==this.mySite?this.tReport.aas:this.tReport.pas,n=P7.copyTab(r[this.curWave.ai]);if(n.us)for(var a=0;a<n.us.length;a++)if(n.us[a].p==s){o=n.us[a];break}this.ZF33(o,i,s,e);var h=this.divideGameObjs[e];h.getComponent(J14.C_Avatar).body.alpha=.6,h.hp=null,this.curAnys[e]={index:0,curAtk:this.curOrder.sps[e].ats[0]},h.ZN95(J14.C_Blood),this.ZF36(e)}this.curOrder.ats&&0<this.curOrder.ats.length?(this.curAtkIndex=0,this.curAtk=null,this.ZW66()):this.doNextActionByOrder()}else this.finishRound()},t.prototype.doNextActionByOrder=function(){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(t){switch(t.label){case 0:return this.curOrder&&this.curOrder.sps&&this.ZO42()?[4,new Promise(function(t,e){App.K16.doTimer(500,1,function(){t()},i)})]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.ZW68(6,this.curOrder.aees),this.ZO45(function(){i.addOrder(),i.ZO44()})?[2]:(this.addOrder(),this.ZO44(),[2])}})})},t.prototype.ZO45=function(t){var e=this;return!!(this.recDieObjDatas&&0<this.recDieObjDatas.length)&&(this.recDieObjDatas.forEach(function(t){e.doObjFill(t.s,t.p)}),this.recDieObjDatas=[],this.ctr.wait(P17.A10).call(function(){t&&t()},this),!0)},t.prototype.ZI60=function(){var e=this;return!!(this.freezeObjDatas&&0<this.freezeObjDatas.length)&&(this.freezeObjDatas.forEach(function(t){e.doObjFreeze(t.s,t.p)}),this.freezeObjDatas=[],!0)},t.prototype.addAtk=function(){this.curAtkIndex++},t.prototype.ZW66=function(){if(!this.curWaitAtkObj)if(this.curAtk=this.getAtkData(),null!=this.curAtk){var t=this.getAtkObj();null==t||t.hp<=0?this.doNextActionByOrder():this.curAtkObj&&this.curAtkObj!=t&&this.curAtkObj.hp&&0<this.curAtkObj.hp?this.ZV26(this.curAtkObj):(this.curAtkObj=t,this.canAtkNow(t)&&(this.ZW68(3,this.curAtk.atbes),this.moveToAtkPos(t)))}else this.curAtkObj&&this.curAtkObj.hp&&0<this.curAtkObj.hp?this.ZV26(this.curAtkObj):this.doNextActionByOrder()},t.prototype.ZF36=function(t){this.curAnys[t].curAtk=this.ZL31(t),null!=this.curAnys[t].curAtk?(this.ZW68(3,this.curAnys[t].curAtk.atbes),this.moveToAtkPos(this.divideGameObjs[t],t)):this.ZE2(t)},t.prototype.ZI61=function(){this.addAtk(),this.ZW66()},t.prototype.ZB76=function(t){this.curAnys[t].index++,this.ZF36(t)},t.prototype.canAtkNow=function(t){return!t.batMoving||(this.curWaitAtkObj=t,!1)},t.prototype.doWaitAtk=function(t){this.curWaitAtkObj==t&&(this.moveToAtkPos(this.curWaitAtkObj),this.curWaitAtkObj=null)},t.prototype.moveToAtkPos=function(t,e){var i=this,s=this.FI15(this.curOrder.ask,this.curOrder.as),o=this.getObjAtkPos(t,s,e);o.x===t.x&&o.y===t.y?null!=e?this.divideAttack(e):this.attack():(t.batMoving=!0,t.action=Action.Move,t.setAtkShowLv(!0),egret.Tween.get(t).to({x:o.x,y:o.y},P17.A24/FightD.BT_PLAY_SPEED,egret.Ease.circOut).wait(P17.A34/FightD.BT_PLAY_SPEED).call(function(){t.batMoving=!1,t.action!=Action.Die&&(t.action=Action.Stand),null!=e?i.divideAttack(e):i.attack()}))},t.prototype.getObjAtkPos=function(t,e,i){var s={x:0,y:0};switch(e.attackRage){case 2:s.x=t.x,s.y=t.y;break;case 3:var o=FightD.BT_P_ATK_C[2-this.curOrder.as];s.x=o.x,s.y=o.y;break;case 1:default:var r=void 0;r=null!=i?this.curAnys[i].curAtk.ds[0].p:this.curAtk.ds[0].p;var n=this.ZW65(3-this.curOrder.as,r);n?s=TG67.FL75(t,n):(s.x=t.x,s.y=t.y)}return s},t.prototype.attack=function(){var i=this;this.getAtkObj().action=Action.Attack,this.ctr.wait(P17.A22).call(function(){var t=i.getAtkObj(),e=i.FI15(i.curOrder.ask,i.curOrder.as);e.picture&&0<e.picture.length?(i.playSkillAni(t,e),i.playHurt(P17.A17,e)):i.playHurt(P17.A18,e),0==i.curAtkIndex&&i.ZW69(t,e)},this)},t.prototype.divideAttack=function(t){this.divideGameObjs[t].action=Action.Attack;var e=this.divideGameObjs[t],i=this.FI15(this.curOrder.ask,this.curOrder.as);i.picture&&0<i.picture.length?(this.playSkillAni(e,i,t),this.ZS31(P17.A17/2,i,t)):this.ZS31(P17.A18/2,i,t),0==this.curAnys[t].index&&this.ZW69(e,i)},t.prototype.ZS31=function(t,s,o){var r=this;egret.Tween.get(this.divideGameObjs[o]).wait(t).call(function(){for(var t in r.ZW68(5,r.curAnys[o].curAtk.atees),r.curPracticeEff||(r.curPracticeEff=[]),r.curAnys[o].curAtk.ds)r.ZI62(r.curAnys[o].curAtk.ds[t].es);var e=3-r.curOrder.as,i=1===e?Dir.br:Dir.tl;r.ZI63({data:s,dir:i,site:e,ds:r.curAnys[o].curAtk.ds},o)},this)},t.prototype.playHurt=function(t,s){var o=this;this.ctr.wait(t).call(function(){for(var t in o.ZW68(5,o.curAtk.atees),o.curPracticeEff=[],o.curAtk.ds)o.ZI62(o.curAtk.ds[t].es);var e=3-o.curOrder.as,i=1===e?Dir.br:Dir.tl;o.playHurtAni({data:s,dir:i,site:e,ds:o.curAtk.ds})},this)},t.prototype.ZI62=function(t){var e=this;t.forEach(function(t){t.pt&&0<t.pv&&(e.curPracticeEff[e.ZW67(t.s,t.p)]={k:t.pt,v:t.pv})})},t.prototype.ZW67=function(t,e){var i=0;this.curWave&&(i=1==t?this.curWave.ai:this.curWave.pi);var s=1==this.mySite?t:3-t;return this.getObjKey(i,s,e)},t.prototype.playSkillAni=function(t,i,e){var s=this,o=3-this.curOrder.as;switch(i.skillTarget){case 0:o=1==this.mySite?o:3-o,this.playOneSkill(i,TG67.FJ77(i,o),o);break;default:var r=P7.copyTab(this.curAtk.ds);void 0!==e&&(r=P7.copyTab(this.curAnys[e].curAtk.ds));var n=this.ZW65(o,r[0].p);(n&&1==n.side?r:r.sort(function(t,e){return e.p-t.p})).forEach(function(t){var e=s.ZW65(o,t.p);e&&s.playOneSkill(i,TG67.FJ77(i,o,e),o)})}},t.prototype.playOneSkill=function(t,e,i){var s=1===i?Dir.br:Dir.tl,o=ObjectPool.pop(J14.C_Skill);o.setParams({data:t,x:e.x,y:e.y,dir:s,gameView:this.batView}),o.start()},t.prototype.playHurtAni=function(a){var h=this,p=!1;this.ctr.wait(P17.A19).call(function(){h.ZI61()},this),a.ds.forEach(function(t){var e=h.ZW65(a.site,t.p);if(e&&e.hp&&0<e.hp){if(e.hp>t.d&&h.stepBackward(e),t.m)h.showSb(e);else{var i=h.curPracticeEff[h.ZW67(a.site,t.p)];t.c?(p=!0,h.showBj(e,t.d,i)):t.pu?h.showPoji(e,t.d):h.showPg(e,t.d,i);var s=i&&0<i.v?t.d+i.v:t.d;h.lossBlood(e,s,t.es)}if(a.data.hitResName&&0<a.data.hitResName.length){var o=ObjectPool.pop(J14.C_Hit),r=TF40.FJ80(a.data),n=e.getComponent(J14.C_Avatar).getHitPoint();o.setParams({data:r,x:n.x,y:n.y,dir:a.dir,site:a.site,gameView:h.batView}),o.start()}h.ZW68(4,t.es,e)}}),p&&this.batView.shockGround()},t.prototype.ZI63=function(a,t){var h=this,p=!1;egret.Tween.get(this.divideGameObjs[t]).wait(P17.A19).call(function(){h.ZB76(t)},this),a.ds.forEach(function(t){var e=h.ZW65(a.site,t.p);if(e&&e.hp&&0<e.hp){if(e.hp>t.d&&h.stepBackward(e),t.m)h.showSb(e);else{var i=h.curPracticeEff[h.ZW67(a.site,t.p)];t.c?(p=!0,h.showBj(e,t.d,i)):t.pu?h.showPoji(e,t.d):h.showPg(e,t.d,i);var s=i&&0<i.v?t.d+i.v:t.d;h.lossBlood(e,s,t.es)}if(a.data.hitResName&&0<a.data.hitResName.length){var o=ObjectPool.pop(J14.C_Hit),r=TF40.FJ80(a.data),n=e.getComponent(J14.C_Avatar).getHitPoint();o.setParams({data:r,x:n.x,y:n.y,dir:a.dir,site:a.site,gameView:h.batView}),o.start()}h.ZW68(4,t.es,e)}}),p&&this.batView.shockGround()},t.prototype.ZV26=function(t){var e=this,i=t.getComponent(J14.C_Avatar),s=TF40.FG17(t.side,t.batPos);i.body.x==s.x&&i.body.y==s.y?this.curAtkObj==t&&(this.curAtkObj=null,this.ZW66()):(t.batMoving=!0,t.action=Action.Move,egret.Tween.get(t).to({x:s.x,y:s.y},P17.A20/FightD.BT_PLAY_SPEED,egret.Ease.circOut).call(function(){t.action!=Action.Die&&(t.action=Action.Stand)}).wait(P17.A9/FightD.BT_PLAY_SPEED).call(function(){t.setAtkShowLv(!1),t.batMoving=!1,e.curAtkObj==t&&(e.curAtkObj=null,e.ZW66())}))},t.prototype.ZI64=function(t){var e=this,i=(t.getComponent(J14.C_Avatar),TF40.FG17(t.side,t.batPos));t.batMoving=!0,t.action=Action.Move,egret.Tween.get(t).to({x:i.x,y:i.y},P17.A20/FightD.BT_PLAY_SPEED,egret.Ease.circOut).call(function(){t.action!=Action.Die&&(t.action=Action.Stand),t.setAtkShowLv(!1),t.batMoving=!1,null!=t.hp&&t.hp<=0&&e.ZL29(t)})},t.prototype.ZW68=function(i,t,e){var s=this;null!=t&&0!=t.length&&(e=e||this.getAtkObj(),t.forEach(function(t){var e=!0;t.sk&&(e=s.playPasSkill(t)),e&&(t.ts&&0<t.ts.length?t.ts.forEach(function(t){var e=s.ZW65(t.s,t.p);5==i&&e&&e.bodyType==J11.A10?s.fabaoHurt(t):(s.ZL32(t),s.playNestedEffect(t))}):s.playEffect(t))}))},t.prototype.playNestedEffect=function(t){var e=this;!t||!t.ts||t.ts.length<=0||t.ts.forEach(function(t){e.ZL32(t)})},t.prototype.playPasSkill=function(t){var e=!0,i=this.ZW65(t.s,t.p),s=i.getComponent(J14.C_Avatar);if(i.bodyType==J11.A4){var o=TF35.FI15(t.sk);if(o&&2==o.type){var r=this.childrenTalk,n=o.yell.split("|"),a=n[Math.round(Math.random()*(n.length-1))];this.childrenTalk.setImgMsg(a),r.x=-70,r.top=-98,s.body.addChild(r),egret.Tween.get(r).wait(1500).call(function(){egret.Tween.removeTweens(r),App.TF56.ZJ66(r)})}}switch(t.et){case P14.A1:case P14.A2:this.ZI65(t,i);break;case P14.A6:case P14.A4:case P14.A3:e=!1;break;case P14.A5:this.ZB40(t,i);break;default:var h=this.FI15(t.sk,t.s);h.skillFlow&&0<h.skillFlow.length&&(this.curOrder&&this.curOrder.ask==h.id||this.ZW69(i,h))}return e},t.prototype.ZI65=function(a,h){var p=this;this.ctr.stop();var t=2*P17.A21;t=t>P17.A19?t:P17.A19,this.ctr.wait(t+P17.A8).call(function(){h.action=Action.Attack,p.ctr.wait(P17.A22+P17.A18).call(function(){p.ctr.wait(P17.A19).call(function(){p.ZI61()},p);var t=p.getAtkObj();if(t&&t.hp&&0<t.hp){var e=a.ts[0];t.hp>e.av.v&&p.stepBackward(t),e.m?p.showSb(t):(e.c?(p.showBj(t,-e.av.v),p.batView.shockGround()):p.showPg(t,-e.av.v),p.lossBlood(t,-e.av.v,e.ts));var i=p.FI15(p.curOrder.ask,p.curOrder.as);if(i.hitResName&&0<i.hitResName.length){var s=ObjectPool.pop(J14.C_Hit),o=TF40.FJ80(i),r=t.getComponent(J14.C_Avatar),n=r.body.y;s.setParams({data:o,x:r.body.x,y:n,dir:h.dir,site:h.side,gameView:p.batView}),s.start()}}},p);var t=p.FI15(a.sk,a.s);t.skillFlow&&0<t.skillFlow.length&&p.ZW69(h,t)},this)},t.prototype.ZB40=function(e,i){var s=this;if(i&&i.hp&&0<i.hp){var t=e.ts[0],o=this.ZW65(t.s,t.p),r=this.getAtkObj(),n=TG67.FL75(r,o);n.x+30!==i.x&&n.y+30!==i.y&&(i.batMoving=!0,i.action=Action.Move,i.setAtkShowLv(!0),egret.Tween.get(i).to({x:n.x+30,y:n.y+30},P17.A24/FightD.BT_PLAY_SPEED,egret.Ease.circOut).wait(P17.A17/FightD.BT_PLAY_SPEED).call(function(){s.ZL32(e),i.hp>e.av.v&&s.stepBackward(i);var t=s.FI15(e.sk,e.s);t.skillFlow&&0<t.skillFlow.length&&(s.curOrder&&s.curOrder.ask==t.id||s.ZW69(i,t)),i.batMoving=!1}).wait(P17.A17/FightD.BT_PLAY_SPEED).call(function(){s.ZI64(i)}))}},t.prototype.revive=function(t){var e=this;egret.Tween.get(this).wait(0).call(function(){e.doRevive(t)},this)},t.prototype.doRevive=function(a){var h=this;egret.Tween.get(this).wait(0).call(function(){var t=1==h.mySite?a.s:3-a.s,e=0;h.curWave&&(e=1==a.s?h.curWave.ai:h.curWave.pi);var i=h.ZW65(a.s,a.p);i&&h.ZL29(i);var s=h.getUnitData(a.s,a.p),o=TF40.FHH37(t,s),r=h.ZW64(o,e,t,a.p),n=r.getComponent(J14.C_Blood);n&&n.setBlood(r.hp),r.hp=0,egret.Tween.get(h).wait(0).call(function(){a.ts&&0<a.ts.length?a.ts.forEach(function(t){h.ZL32(t)}):h.playEffect(a);var t=h.FI15(a.sk,a.s);t.skillFlow&&0<t.skillFlow.length&&h.ZW69(r,t)},h)},this)},t.prototype.AllRevive=function(t){var e=this;if(t.ts&&!(t.ts.length<=0)){var i=t.sk;egret.Tween.get(this).wait(0).call(function(){t.ts.forEach(function(t){e.doAllRevive(t,i)})},this)}},t.prototype.doAllRevive=function(a,h){var p=this;egret.Tween.get(this).wait(0).call(function(){var t=1==p.mySite?a.s:3-a.s,e=0;p.curWave&&(e=1==a.s?p.curWave.ai:p.curWave.pi);var i=p.ZW65(a.s,a.p);if(i&&i.hp<=0){p.ZL29(i);var s=p.getUnitData(a.s,a.p),o=TF40.FHH37(t,s),r=p.ZW64(o,e,t,a.p),n=r.getComponent(J14.C_Blood);n&&n.setBlood(r.hp),r.hp=0}egret.Tween.get(p).wait(0).call(function(){a.ts&&0<a.ts.length?a.ts.forEach(function(t){p.ZL32(t)}):p.playEffect(a);var t=p.FI15(h,a.s);t.skillFlow&&0<t.skillFlow.length&&p.ZW69(i,t)},p)},this)},t.prototype.playEffect=function(t){var e=this;t.ts&&0<t.ts.length?t.ts.forEach(function(t){e.ZL32(t)}):this.ZL32(t)},t.prototype.ZL32=function(t){var e=this.ZW65(t.s,t.p);if(t.sp){var i=TG67.FG14(t.sp);if(i=i.replace("_png",".png"),(u=TG67.FI49(i,FightD.AV_RES_PATH+"immortal/")).x=-50,u.y=-50,e&&e.action!=Action.Die)this.ZL33(u,e);else{var s=this.curRoundIndex+1,o=this.curWaveIndex+"_"+t.s+"_"+s;this.immortalImg[o]=u}}if(e){if(null!=t.sd){e.sd=t.sd;var r=e.getComponent(J14.C_Blood);r&&r.ZS24(e.sd)}if(!this.rEf(t,e)&&!e.hasEffect(t)){var n=TG29.FL95(t.eid);if(n){var a=e.getComponent(J14.C_Avatar),h=void 0;if(n.effectname&&0<n.effectname.length){901==n.id&&e.action!=Action.Die&&(e.action=Action.Attack),h=TG67.FD96(a,n.effectposition),1001!=n.id&&2001!=n.id||t.s!=this.mySite||(h.x=-h.x),1201==n.id&&e.hp&&(this.freezeObjDatas||(this.freezeObjDatas=[]),this.freezeObjDatas.push({s:e.side,p:e.batPos}),e.addPauseComp(),a.setFreeze(!0));var p=ObjectPool.pop(J14.C_Effect),l={data:{picture:n.effectname,type:FightResType.buff,anchorx:n.anchorx,anchory:n.anchory},x:h.x,y:h.y,dir:e.side,av:a};1==n.duringtype&&(l.loop=!0,e.addEffect(t,p)),p.setParams(l),p.start()}var c=void 0,u=void 0;if(n.iconname&&0<n.iconname.length&&(c=TG67.FD95(),TG36.FL33(c,.5),u=TG67.FI49(n.iconname,FightD.AV_RES_PATH+"name/"),c.addChild(u)),t.av){null==c&&(c=TG67.FD95(),TG36.FL33(c,.5));var d="v1_fonts_zhandou_zdjm_baijiahao",v=25,f=31;0<t.av.v&&(d="v1_fonts_zhandou_zdjm_lujiahao",v=25,f=26);var g=TG67.FHH35(TG67.FHH36(t.av.k,t.av.v),d,-6,v,f);g.x=u?FightD.BT_BUFF_ICON_W:0,c.addChild(g),103==t.av.k&&(0<t.av.v?this.addBlood(e,t.av.v):(e.action!=Action.Die&&(e.action=Action.Attacked),this.lossBlood(e,-t.av.v,t.ts)))}if(c)h=TG67.FD96(a,n.fontposition),c.x=a.body.x+h.x,c.y=a.body.y+h.y,this.batView.ZW78().addChild(c),TG67.FJ78(c)}}}},t.prototype.ZL33=function(t,e){e.getComponent(J14.C_Avatar).body.addChild(t);var i=egret.setTimeout(function(){egret.clearTimeout(i),App.TF56.ZJ66(t)},this,1e3)},t.prototype.fabaoHurt=function(t){var e=t.eid,i=t.ro,s=this.ZW65(t.s,t.p),o=s.getComponent(J14.C_Avatar),r=this.curRoundIndex+1;switch(r=r%4==0?4:r%4,e){case 0:this.showSb(s);break;case 110:if(r==i){var n=s.x,a=s.y,h=1;1==s.side?App.K16.doFrame(1,15,function(){s.x+=2*h,s.y+=2*h,h++},this,function(){o.body.visible=!1,s.x=n,s.y=a},this):App.K16.doFrame(1,15,function(){s.x-=2*h,s.y-=2*h,h++},this,function(){o.body.visible=!1,s.x=n,s.y=a},this)}else{var p=P7.copyTab(t),l=this.curWaveIndex+"_"+t.s+"_"+i;this.fabaoFly[l]=p}break;case 2001:if(r==i)this.ZL32(t);else{p=P7.copyTab(t),l=this.curWaveIndex+"_"+t.s+"_"+i;this.fabaoEffect[l]=p}break;default:this.ZL32(t)}},t.prototype.rEf=function(t,e){var i=!1;return 1==t.r&&(e.rEf(t),i=!0),i},t.prototype.addBlood=function(t,e){var i=t.getComponent(J14.C_Blood);if(i){var s=t.hp+e;t.hp=s<t.thp?s:t.thp,i.setBlood(0<=t.hp?t.hp:0)}},t.prototype.lossBlood=function(t,e,i){var s=this,o=t.getComponent(J14.C_Blood);if(this.batView&&this.batView.pbarShield.value&&t.bodyType==J11.A13)t.action=Action.Attacked;else if(t.bodyType==J11.A13&&this.getFightType()==P15.A10)o&&(t.hp=TD94.FL65(t.hp,e),o.setBlood(t.hp));else if(t.sd){if(t.sd>=e)t.sd=t.sd-e;else{var r=t.hp-(e-t.sd);t.hp=0<r?r:0,o.setBlood(t.hp),t.sd=0}o.ZS24(t.sd)}else if(o){r=t.hp-e;t.hp=0<r?r:0,o.setBlood(t.hp)}var n=this.getFightType(),a=0;if(n===P15.A26&&(a=UltimateBattle.Utils.FL96()),this.ZO46(t.bodyType,t.hp,t.thp,a,e),t.hp<=0){if(t.ZN95(J14.C_Blood),n===P15.A22&&2===t.side&&8===t.batPos&&egret.Tween.get(this.bossTalk).wait(500).call(function(){egret.Tween.removeTweens(s.bossTalk),App.TF56.ZJ66(s.bossTalk)}),null==this.recDieObjDatas&&(this.recDieObjDatas=[]),2==t.side&&t.bodyType==J11.A14){var h=Math.random();1==Math.round(h)?this.showDie(t):t.action=Action.Die}else t.action=Action.Die;var p=!0;if(i)if(i instanceof fight.Effect){if(i.et==P14.A6)return this.revive(i),t.bodyType=J11.A9,void(p=!1)}else for(var l=0;l<i.length;l++){var c=i[l];c.et==P14.A6&&(t.bodyType=J11.A9,this.revive(c),p=!1),c.et==P14.A4&&(t.bodyType=J11.A9,this.AllRevive(c),p=!1),c.et==P14.A3&&(t.bodyType=J11.A9,this.revive(c),p=!1)}p&&(this.recDieObjDatas.push({s:t.side,p:t.batPos}),this.batView.roleDie(t,t.side===this.mySite))}},t.prototype.ZO46=function(t,e,i,s,o){if(void 0===s&&(s=0),void 0===o&&(o=0),t==J11.A13||t==J11.A3||t==J11.A2)switch(this.getFightType()){case P15.A29:this.batView.ZO46(e,i),this.batView.updateBossHr(o);break;case P15.A17:this.batView&&this.batView.ZE5(e,i);break;case P15.A10:this.batView&&this.batView.ZD7(e,i);break;case P15.A31:this.batView&&this.batView.ZD8(e,i);break;case P15.A27:case P15.A26:case P15.A20:this.batView&&this.batView.ZE4(e,i,s)}},t.prototype.stepBackward=function(t){var e=this,i=(t.getComponent(J14.C_Avatar),TG67.FD5(t.side,FightD.BT_BACK_DIS,t.x,t.y));t.batMoving=!0,t.action=Action.Attacked,egret.Tween.get(t).to(i,P17.A21/FightD.BT_PLAY_SPEED).call(function(){t.action!=Action.Die&&(t.action=Action.Move)}).to({x:t.x,y:t.y},P17.A21/FightD.BT_PLAY_SPEED).call(function(){t.batMoving=!1,t.action!=Action.Die&&(t.action=Action.Stand),e.doWaitAtk(t)})},t.prototype.showSb=function(t){var e=TG67.FD95();TG36.FL33(e,.5);var i=TG67.FI49("v1_fonts_zhandou_zdjm_shanbi_png");e.addChild(i),this.FL76(t,e,1)},t.prototype.showDie=function(t){var e=this;t.getComponent(J14.C_Avatar).setRotate();var i=M14.FJ76(t.batPos),s=App.TG81.getDistance(t.x,t.y,i.coord1.x,i.coord1.y),o=App.TG81.getDistance(i.coord1.x,i.coord1.y,i.coord2.x,i.coord2.y),r=App.TG81.getDistance(i.coord2.x,i.coord2.y,i.coord3.x,i.coord3.y);this.isRotate=!0;var n=App.CM.gtM(O6.B82).setting.indexOf(L17.A25)<0?.5:.8,a=Math.floor(1e3*s/i.speed)*n,h=Math.floor(1e3*o/i.speed)*n,p=Math.floor(1e3*r/i.speed)*n;egret.Tween.get(t).to({x:i.coord1.x,y:i.coord1.y},a).to({x:i.coord2.x,y:i.coord2.y},h).to({x:i.coord3.x,y:i.coord3.y},p).call(function(){e.isRotate=null,t&&(egret.Tween.removeTweens(t),e.ZL29(t))})},t.prototype.showBj=function(t,e,i){var s=TG67.FD95();TG36.FL33(s,.5);var o=TG67.FI49("v1_fonts_zhandou_zdjm_baoji_png"),r=TG67.FHH35(e+"","v1_fonts_zhandou_zdjm_jiahao",-16,36,42);if(o.x=0,r.x=o.width-9,s.addChild(o),s.addChild(r),i&&0<i.v){var n=TG67.FI49(this.ZO47(i.k)),a=TG67.FHH35(i.v+"","v1_fonts_xiulian",0,15,22);n.x=r.x+r.width+15,a.x=n.x+n.width,s.addChild(n),s.addChild(a)}this.FL76(t,s,1)},t.prototype.showPg=function(t,e,i){var s=TG67.FD95();TG36.FL33(s,.5);var o=TG67.FHH35(e+"","v1_fonts_zhandou_zdjm_baijiahao",-6,25,31);if(o.x=0,s.addChild(o),i&&0<i.v){var r=TG67.FI49(this.ZO47(i.k)),n=TG67.FHH35(i.v+"","v1_fonts_xiulian",0,13,17);r.x=o.x+o.width+10,n.x=r.x+r.width+5,s.addChild(r),s.addChild(n)}this.FL76(t,s,1)},t.prototype.showPoji=function(t,e){var i=TG67.FD95();TG36.FL33(i,.5);var s=TG67.FHH35(e+"","v1_fonts_zhandou_poji_",-10,38,42);s.x=0,i.addChild(s),this.FL76(t,i,1)},t.prototype.ZO47=function(t){switch(t){case Practice.Const.practiceType.control:return"v1_fonts_xiuliantong_png";case Practice.Const.practiceType.power:return"v1_fonts_xiulianwu_png";case Practice.Const.practiceType.wisdom:return"v1_fonts_xiulianzhi_png"}},t.prototype.ZW69=function(t,e){if(e.skillFlow&&0<e.skillFlow.length){var i=TG67.FD95();TG36.FK33(i,.5),TG36.FK34(i,1);var s=FightD.AV_RES_PATH+"name/",o=TG67.FI49(e.skillFlow,s);i.addChild(o);var r=t.getComponent(J14.C_Avatar);i.x=r.body.x,i.y=r.body.y-r.body.height,this.batView.ZW78().addChild(i),TG67.FJ78(i)}},t.prototype.FL76=function(t,e,i){var s=t.getComponent(J14.C_Avatar);switch(e.x=s.body.x,e.y=s.body.y-s.body.height-20,i){case 2:e.y=s.body.y-s.body.height-20;break;case 1:default:e.y=s.body.y-s.body.height/2}this.batView.ZW78().addChild(e),TG67.FL76(e)},t}();__reflect(FightBattleDirector.prototype,"FightBattleDirector");var M9=function(){function t(){}return t.A2=0,t.A1=1,t}();__reflect(M9.prototype,"M9");var M14=function(){function s(){}return s.FK35=function(t){s.init=t.fight_init||{},s.style=t.fight_style||{},s.dead=t.fight_dead||{},s.deadData=this.getDeadKey()},s.FI6=function(t){return s.init[t]?s.init[t].value:null},s.FJ75=function(t){var e=s.style[t];return e||s.style[1]},s.getDeadKey=function(){var t={};if(!s.dead)return t;for(var e in s.dead){t[e]={},t[e].speed=s.dead[e].speed,t[e].id=s.dead[e].id;var i=void 0;i=s.dead[e].coordinate1.split(","),t[e].coord1={},t[e].coord1.x=parseInt(i[0]),t[e].coord1.y=parseInt(i[1]),i=s.dead[e].coordinate2.split(","),t[e].coord2={},t[e].coord2.x=parseInt(i[0]),t[e].coord2.y=parseInt(i[1]),i=s.dead[e].coordinate3.split(","),t[e].coord3={},t[e].coord3.x=parseInt(i[0]),t[e].coord3.y=parseInt(i[1])}return t},s.FJ76=function(t){var e={};return s.deadData?e=s.deadData[t]:e},s}();__reflect(M14.prototype,"M14");var N1=function(){function t(){}return t.A12="challenge",t.A13="grpGround",t.A14="below",t.A7=10001,t.A8=10002,t.A11=10003,t.A6=10004,t.A9=10005,t.A10=10006,t.A5=10007,t.A2=10008,t.A1=10009,t.A3=10010,t.A4=20001,t}();__reflect(N1.prototype,"N1");var BehaviourType=function(){function t(){}return t.Fight_u=1,t.Fight_d=2,t.Attack_u=3,t.Attack_d=4,t.Move=5,t.Stand=6,t.Stand_u=7,t.Stand_d=8,t}();__reflect(BehaviourType.prototype,"BehaviourType");var FightObjectEvent=function(){function t(){}return t.ROLE_MOVE="ROLE_MOVE",t.CAMERA_MOVE="CAMERA_MOVE",t}();__reflect(FightObjectEvent.prototype,"FightObjectEvent");var ActionName={Stand_u:"stand_u",Stand_d:"stand_d",Move:"move",Attackd:"attack_d",Attacku:"attack_u"},mapWH={SET_360_450:"set_360_450",SET_600_450:"set_600_450",SET_576_622:"set_576_622",SET_720_685:"set_720_685",SET_1086_450:"set_1086_450",SET_576_647:"set_576_647",SET_405_458:"set_405_458",SET_405_622:"set_405_622",SET_405_420:"set_405_420",SET_960_540:"set_960_540",SET_1065_450:"set_1065_450",SET_789_333:"set_789_333",SET_830_450:"set_830_450"},SET_MAP_WH={};SET_MAP_WH[mapWH.SET_360_450]=[360,450],SET_MAP_WH[mapWH.SET_600_450]=[600,450],SET_MAP_WH[mapWH.SET_576_622]=[576,622],SET_MAP_WH[mapWH.SET_720_685]=[720,685],SET_MAP_WH[mapWH.SET_1086_450]=[1086,450],SET_MAP_WH[mapWH.SET_576_647]=[576,647],SET_MAP_WH[mapWH.SET_960_540]=[960,540],SET_MAP_WH[mapWH.SET_1065_450]=[1065,450],SET_MAP_WH[mapWH.SET_789_333]=[789,333],SET_MAP_WH[mapWH.SET_830_450]=[830,450],SET_MAP_WH[mapWH.SET_405_458]=[405,458],SET_MAP_WH[mapWH.SET_405_622]=[405,622],SET_MAP_WH[mapWH.SET_405_420]=[405,420];var TE4=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I76,"FightHandUpView",t,K17.Fight),App.VM.setAutoClose(O7.I76,!1),App.VM.register(O7.D93,"OpeningRewardView",t,K17.UI_Tips_Top),App.VM.register(O7.I61,"FightBattleView",t,K17.Fight),t.rgF(N1.A7,t.GS71,t),t.rgF(N1.A8,t.GQ72,t),t.rgF(N1.A11,t.GP21,t),t.rgF(N1.A6,t.GJ56,t),App.VM.register(O7.F74,"FightResultView",t,K17.UI_Main_TOP),t.rgF(N1.A9,t.GHH62,t),t.rgF(N1.A10,t.GF78,t),t.rgF(N1.A5,t.GT15,t),App.VM.register(O7.G61,"FightStartBattleView",t,K17.UI_Popup),t.rgF(N1.A2,t.GJ57,t),t.rgF(N1.A1,t.GHH63,t),t.rgF(N1.A3,t.GJ55,t),App.VM.register(O7.HH20,"IllegalTipView",t,K17.UI_Popup);var e=new TG65(t);return e.aLV(O7.I76),e.aLV(O7.E31),e.aLV(O7.G82),e.aLV(O7.I85),e.aLV(O7.D54),t.proxy=new TG66(t),t.rgF(N1.A4,t.GX60,t),t}return __extends(t,i),t.prototype.GJ55=function(){var t=App.VM.gOV(O7.G60);t&&t.setChallenge(!1);var e=App.VM.gOV(O7.D17);e&&e.setChallenge(!1)},t.prototype.GS71=function(){var t=this.gtM();t.openingMap=!0,App.VM.open(O7.I76),t.isFighting&&(App.VM.setAutoClose(O7.I61,!1),App.VM.open(O7.I61)),t.isSpFighting?t.notify(FightD.FC_Close_UI):App.CM.apF(O6.B64,J18.A41)},t.prototype.GQ72=function(){var t=this.gtM();(t.openingMap=!1,App.VM.gOV(O7.I76).setVisible(!1),t.isFighting)&&App.VM.gOV(O7.I61).setVisible(!1)},t.prototype.GP21=function(t,e,i,s){var o=this;if(this.gtM().isFighting){var r=App.VM.gOV(O7.I61);r&&r.endPlay(!1,!0),App.K16.doFrame(1,1,function(){o.GX59(t,e,i,s)},this)}else this.GX59(t,e,i,s)},t.prototype.GX59=function(t,e,i,s){e=e||{};var o=this.gtM();o.isFighting=!0,o.fightType=t.sl;var r,n=App.VM.gOV(O7.I89);if(n&&o.fightType!==P15.A3){n.ZF91();var a=App.VM.gOV(O7.G54);a&&App.DelayOptManager.ZE59(a,function(){a.showNotice(!1)})}if(r=App.VM.gOV(O7.I76),null==e.mapName){e.mapName=TG67.CUR_HANDUP_MAP;var h=TG67.CUR_HANDUP_CAMERA;e.x=h.x,e.y=h.y}switch(t.sl){case P15.A3:o.isSpFighting=!1;break;case P15.A2:case P15.A22:o.isSpFighting=!0;break;default:o.isSpFighting=!0,this.ZT94(O6.B64,J18.A37,!1)}r&&r.stopHandup();var p=App.CM.gtM(O6.C10);o.isSpFighting?(p.homeFightState="battle",e.isAuto||(App.SceneManager.runScene(M2.A4),o.notify(FightD.FC_Close_UI),App.VM.ZT95())):p.homeFightState="fight",p.notify(),App.VM.isOpen(O7.E31)||App.VM.isOpen(O7.G82)||App.VM.isOpen(O7.G60)||App.VM.isOpen(O7.D17)||App.VM.isOpen(O7.C36)||App.VM.isOpen(O7.B67)||App.VM.isOpen(O7.C75)||App.VM.isOpen(O7.C24)||App.VM.isOpen(O7.D54)||App.VM.isOpen(O7.SurvivalMap)||this.apF(N1.A7),App.EventCenter.dispatch(GameEvent.ENTRY_BATTLE,o),App.VM.isOpen(O7.I61)||App.VM.open(O7.I61),App.VM.gOV(O7.I61).GX59(t,e,i,s)},t.prototype.GJ56=function(){var t=this.gtM();t.isSpFighting&&(this.apF(N1.A4),t.notify(FightD.FC_Update_UI)),t.isFighting=!1,t.isSpFighting=!1;var e=App.VM.gOV(O7.I89);e&&t.fightType!==P15.A3&&e.iscbAutoJoin();var i=App.VM.gOV(O7.G54);i&&App.DelayOptManager.ZE59(i,function(){i.showNotice(!0)}),App.VM.setAutoClose(O7.I61,!0),App.VM.close(O7.I61);var s=App.CM.gtM(O6.C10);s.homeFightState="fight",s.notify(),App.EventCenter.dispatch(GameEvent.EXIT_BATTLE,t);var o=App.SceneManager.getCurrScene();t.fightSceneType==I4.A8&&o==M2.A4&&(App.CM.apF(O6.C20,K2.A10),App.CM.apF(O6.B64,J18.A34))},t.prototype.GT15=function(t){void 0===t&&(t=!0);var e=App.VM.gOV(O7.I76);if(e){App.SceneManager.getCurrScene();t?e.startHandup():e.stopHandup()}},t.prototype.GHH62=function(t,e){e.type==P15.A25?App.VM.open(O7.A18,t,e):e.type==P15.HeroBattle?App.VM.open(O7.HeroBattleResult,t,e):App.VM.open(O7.F74,t,e)},t.prototype.GF78=function(){App.VM.close(O7.F74)},t.prototype.GJ57=function(){App.VM.open(O7.G61)},t.prototype.GHH63=function(){App.VM.close(O7.G61)},t.prototype.GX60=function(){this.proxy.GX60()},__decorate([Ioc.Listener(GameEvent.EXIT_BATTLE)],t.prototype,"GT15",null),t=__decorate([Ioc.MVC],t)}(TE11);__reflect(TE4.prototype,"TE4");var FightD=function(){function t(){}return t.MAP_ROW=4,t.MAP_COL=3,t.MAP_CLIP_W=512,t.MAP_CLIP_H=512,t.MAP_TW=32,t.MAP_TH=32,t.MAP_IMG_S=".jpg",t.MAP_KEY="map_",t.MAP_UL="_",t.MAP_RES_PATH="resource/map/",t.MAP_CLIP="/clipmap/",t.MAP_BS="/",t.MAP_RES_JSON="map.json",t.AV_GROUP="mode_group_",t.AV_RES_PATH="resource/model/",t.AV_RES_KEY="model_",t.AV_ANI="ani",t.AV_HORSE_H="head",t.AV_ST="fight_st",t.FC_Update_UI="FC_Update_UI",t.FC_Close_UI="FC_Close_UI",t.FC_WalkSpeed=130,t.CC_WalkSpeed=70,t.FC_Dir_MinT=5e3,t.FC_Dir_MaxT=1e4,t.FC_FollowDis=100,t.FC_Cood=15,t.BT_PKEY="batPosKey",t.BT_POS=[[{x:133,y:474},{x:216,y:429},{x:300,y:384},{x:384,y:340},{x:468,y:295},{x:53,y:435},{x:136,y:390},{x:220,y:345},{x:304,y:301},{x:388,y:256},{x:-27,y:396},{x:56,y:351},{x:140,y:306},{x:224,y:272},{x:308,y:217}],[{x:191,y:704},{x:274,y:659},{x:358,y:614},{x:442,y:570},{x:526,y:525},{x:269,y:744},{x:352,y:699},{x:436,y:654},{x:520,y:610},{x:604,y:565},{x:347,y:784},{x:430,y:739},{x:514,y:694},{x:598,y:650},{x:682,y:605}]],t.BT_P_HIT_C=[{x:255,y:339},{x:383,y:615}],t.BT_P_ATK_C=[{x:329,y:497},{x:329,y:470}],t.BT_ACT="act",t.BT_ROUND_LIMIT=30,t.BT_ROUND_SHOW_SKIP=5,t.BT_ANGLE=28,t.BT_ANGLE_RIGHT=60,t.BT_BACK_DIS=20,t.BT_ENTER_DIS=150,t.BT_OPENING_ENTER_DIS=300,t.BT_FILL_DIS=30,t.BT_FLY_R=50,t.BT_TTT=44,t.BT_BUFF_ICON_W=40,t.BT_AV_ST="fight_battle_st",t.BT_RES_KEY="fight_battle_res_key",t.BT_RES_PATH="resource/assets/fight/",t.BT_PLAY_SPEED=(t.BT_PLAY_SPEED_LIST=[1.7,1.9])[0],t.RS_CLOSE_CD=6,t.DF_CLOSE_CD=11,t.BT_PLAYING=!1,t}();__reflect(FightD.prototype,"FightD");var TE81=function(){function t(){}return t.FI48=function(){for(var t=[[133,474],[53,435],[191,704],[269,744]],e=App.TG81.getRadian(FightD.BT_ANGLE),i=95*Math.cos(e),s=95*Math.sin(e),o=[],r=0;r<4;r++){var n=t[r];o[r]=[];for(var a=0;a<5;a++)o[r].push([Math.floor(n[0]+i*a),Math.floor(n[1]-s*a)])}var h="";o.forEach(function(t,i){0!=i&&2!=i||(h+="["),t.forEach(function(t,e){h+="{x: "+t[0]+", y: "+t[1]+"}",h+=1!=i&&3!=i||4!=e?",":"], \n"}),0!=i&&2!=i||(h+="\n")}),console.log(h)},t.FL72=function(s,t){for(var o=[],e=function(t,e,i){o[t]||(o[t]=[]),o[t].push({x:Math.round(e),y:Math.round(i+s)})},i=App.TG81.getRadian(t),r=Math.cos(i),n=Math.sin(i),a=50,h=90*n,p=90*r,l=640-400*r,c=l*Math.atan(i),u=0;u<5;u++){var d=a*r,v=a*n;e(1,d,350-v),e(0,d+h,350-v+p),e(2,d+l-h,350-v+c-p),e(3,d+l,350-v+c),a+=60}var f=[],g=[];return f.push(g),o.forEach(function(t,e){t.forEach(function(t,e){g.push(t)}),1===e&&(g=[],f.push(g))}),f},t.FL73=function(){var t={m:this.getMapId(),r:0,v:0,f:.5<Math.random()?1:2,aus:this.getFUnits(1),dus:this.getFUnits(2),rs:[]};return this.startFight(t),t},t.getFUnits=function(t){for(var e=[],i=0;i<10;i++){var s={f:this.ZS33(i),p:i+1,hp:Math.ceil(100*Math.random())+50};s.ttthp=s.hp,s.thp=s.hp,3===s.p?s.n="宠物":8===s.p&&(s.n="玩家名字很长",s.ty=1==t?J11.A7:J11.A13,s.we=this.getWuqiId(),s.g=this.ZW70(),s.h=this.getZuoqiId(),s.t=this.ZW71(),s.wi=this.getChibangId()),e.push(s)}return e},t.startFight=function(t){this.fightRound(t,1)},t.fightRound=function(t,e){var i,s,o={ro:e,ars:[]};s=1===t.f?(i=t.aus,t.dus):(i=t.dus,t.aus),this.fightForUs(t,t.f,o.ars,i,s)&&(t.rs.push(o),this.fightRound(t,e+1))},t.fightForUs=function(t,e,i,s,o){var r;(r=this.attackForUs(e,i,s,o))?t.v=0:this.attackForUs(3-e,i,o,s)&&(t.v=1);return!r},t.attackForUs=function(t,e,i,s){for(var o=!0,r=0;r<i.length;r++){var n=i[r];if(!this.isDie(n)){var a=this.getAtkSkill(),h=this.findDUS(s,a);if(!(h&&0<h.length))break;this.atk(t,e,n,h,a),o=!1}}return o},t.atk=function(t,e,i,s,o){var r=this,n={as:t,ap:i.p,sk:o,ds:[]};s.forEach(function(t){r.hurt(n.ds,t)}),e.push(n)},t.hurt=function(t,e){var i={p:e.p,d:0};if(i.m=.95<Math.random()?1:0,1!==i.m){i.c=.7<Math.random()?1:0;var s=1===i.c?100:30,o=Math.ceil(30*Math.random())+s;i.d=o>e.ttthp?e.ttthp:o,t.push(i),e.ttthp-=o,e.ttthp<=0&&(e.isDie=!0)}else t.push(i)},t.isDie=function(t){return!t.isDie&&t.ttthp<=0&&(t.isDie=!0),t.isDie},t.findDUS=function(t,e){if(!t||0===t.length)return null;for(var i=[],s=0;s<t.length;s++){var o=t[s];this.isDie(o)||i.push(o)}if(0<i.length){var r=this.ZS32(e);r=r>i.length?i.length:r;var n=[];for(s=0;s<r;s++){var a=Math.floor(Math.random()*i.length);a=a>i.length-1?i.length-1:a;var h=i.splice(a,1);n.push(h[0])}return n}return null},t.getMapId=function(){return 10001},t.ZS32=function(t){var e=1;return 2===t?e=2:3===t&&(e=10),e},t.getAtkSkill=function(){return 1e3},t.ZS33=function(t){var e=this._szId.length,i=Math.floor(Math.random()*e);return this._szId[i]},t.getWuqiId=function(){return 1e3},t.ZW70=function(){return 1e3},t.getZuoqiId=function(){return 1e3},t.ZW71=function(){return 1e3},t.getChibangId=function(){return 1e3},t._szId=[1e3,1001],t}();__reflect(TE81.prototype,"TE81");var P13=function(){function t(){}return t.A5=1,t.A3=2,t.A6=3,t.A4=4,t.A1=5,t.A2=6,t}();__reflect(P13.prototype,"P13");var FightGOIndex=function(){function t(){}return t.u_shadow=0,t.u_fi=1,t.u_h=2,t.u_b=3,t.u_we=4,t.u_wi=5,t.u_hh=6,t.u_t=7,t.u_f=8,t.u_n_1=9,t.u_n_2=10,t.u_bl=11,t.u_buff=12,t.u_fu=13,t.u_spectral=14,t.d_shadow=0,t.d_fi=1,t.d_h=2,t.d_wi=3,t.d_b=4,t.d_hh=5,t.d_we=6,t.d_t=7,t.d_f=8,t.d_n_1=9,t.d_n_2=10,t.d_bl=11,t.d_buff=12,t.d_fu=13,t.d_spectral=14,t}();__reflect(FightGOIndex.prototype,"FightGOIndex");var TG65=function(i){function t(t){var e=i.call(this,t)||this;return e.fightSceneType=I4.A8,e}return __extends(t,i),t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t.prototype.canReqAtk=function(){return!this.isSpFighting},t}(TG79);__reflect(TG65.prototype,"TG65");var TG66=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.L96,e.illegalPush,e),e}return __extends(t,i),t.prototype.illegalPush=function(t){var e=O3.tr(8109);t&&t.body&&2==t.body.s&&(e=O3.tr(8110)),App.VM.open(O7.HH20,M18.FG71(e))},t.prototype.GX60=function(){var t={type:P4.U42,body:{}};this.sSM(t)},t}(TG80);__reflect(TG66.prototype,"TG66");var FightResType={body:"body",horses:"horses",weapon:"weapon",wing:"wing",magicthing:"magicthing",title:"title",formation:"formation",skill:"skill",hit:"hit",buff:"buff"},FightRes=function(){function c(){}return c.ZG78=function(t,e){if(c.hasPreadLoadBtRes)t&&t.call(e);else{c.hasPreadLoadBtRes=!0;var i=FightD.BT_RES_KEY,s=[];[{name:"v1_fonts_zhandou_zdjm_baoji",type:"png"},{name:"v1_fonts_zhandou_zdjm_shanbi",type:"png"},{name:"v1_fonts_zhandou_poji_po",type:"png"}].forEach(function(t){var e=t.name+"_"+t.type;App.TF3.ZQ10(e,t.type,platform.resUrl+FightD.BT_RES_PATH+t.name+"."+t.type),s.push(e)}),App.TF3.createGroup(i,s);var o=[i];App.TF3.loadGroups(i,o,t,function(t,e){},e)}},c.ZO48=function(t,e){var i=FightD.MAP_KEY+t;this.ZO49(t,i);var s=[i];App.TF3.loadGroups(i,s,e,function(t,e){},null)},c.ZO49=function(i,t){var s=this,o=FightD.MAP_RES_PATH+i+FightD.MAP_BS,r=[];[{name:i+".json",type:"json"}].forEach(function(t){var e=s.getMapResKey(i);App.TF3.ZQ10(e,t.type,platform.resUrl+o+t.name),r.push(e)}),App.TF3.createGroup(t,r)},c.getMapResKey=function(t){return FightD.MAP_KEY+t+FightD.MAP_UL+t+"_json"},c.getAniResKey=function(t,e){return e=e||"",null==t?FightD.AV_RES_KEY+FightD.AV_ANI+"_"+e:FightD.AV_RES_KEY+(t.type||"")+"_"+t.picture+"_"+e},c.ZO50=function(t){var e=FightD.AV_GROUP+(t.type||"")+"_"+(t.picture||"");return t.action&&(e+="_"+t.action),e},c.ZS34=function(t){var e=new AniGroup,i=t.type,s=t.picture,o=t.action;e.name=c.ZO50(t);var r=FightD.AV_RES_PATH+i+"/"+s+"/",n=FightD.AV_RES_KEY+i+"_"+s+"_",a=platform.resUrl+r+s+"."+c.jsonSuffix,h=n+c.jsonSuffix,p=platform.resUrl+r+s+"."+c.pngSuffix,l=n+c.pngSuffix;return o&&(a=platform.resUrl+r+o+"."+c.jsonSuffix,h=n+o+"_"+c.jsonSuffix,p=platform.resUrl+r+o+"."+c.pngSuffix,l=n+o+"_"+c.pngSuffix),e.item.push({subkey:h,type:c.jsonSuffix,path:a}),e.item.push({subkey:l,type:"image",path:p}),e},c.loadRes=function(t,e,i){if(null!=t){var s=c.ZO50(t),o=this._completeList[s];if(o)return e.call(i,o.factory,s),void o.hit();var r=this._loadingList[s];if(r)r.loading.push([e,i]);else{var n=c.ZS34(t);(this._loadingList[s]=n).loading.push([e,i]);var a=[];n.item.forEach(function(t){a.push(t.subkey),App.TF3.ZQ10(t.subkey,t.type,t.path)}),App.TF3.createGroup(s,a),App.TF3.loadGroup(s,this.ZF37,this.ZF38,this)}}else e.call(i,null)},c.ZF37=function(t){var e=this._loadingList[t];delete this._loadingList[t];var i=e.loading,s=RES.getRes(e.item[0].subkey),o=RES.getRes(e.item[1].subkey);for(s&&o?(e.factory=new egret.MovieClipDataFactory(s,o),e.factory.enableCache=!0,this._completeList[t]=e):console.error("资源加载失败!!@"+e.item[0].subkey);0<i.length;){var r=i.pop(),n=e.factory;r[0].call(r[1],n,t),n&&e.hit()}},c.ZF38=function(t){},c.ZS35=function(e,t,i){null!=i&&(App.TF3.ZQ10(t,"image",platform.resUrl+i),RES.getResAsync(t,function(t){e.texture=t},e))},c.getGrp=function(t){return this._completeList[t]},c.destroyGrp=function(t,e){var i=this._loadingList[t];if(i)for(var s=i.loading,o=0;o<s.length;o++)s[o][1]==e&&s.splice(o,1);(i=this._completeList[t])&&i.hit(!1)},c.destroyRes=function(){for(var t in this._completeList){var e=this._completeList[t];e.ref<1&&48e3<egret.getTimer()-e.last&&(delete this._completeList[t],e.destroy())}},c._completeList={},c._loadingList={},c.jsonSuffix="json",c.pngSuffix="png",c}();__reflect(FightRes.prototype,"FightRes");var AniGroup=function(){function t(){this.item=[],this.last=0,this.ref=0,this.loading=[]}return t.prototype.hit=function(t){void 0===t&&(t=!0),t?(this.ref++,this.last=egret.getTimer()):this.ref--},t.prototype.destroy=function(){this.item=[],this.last=0,this.ref=0,RES.destroyRes(this.name),this.factory.clearCache(),this.factory=null,this.name=null},t}();__reflect(AniGroup.prototype,"AniGroup");var P15=function(){function t(){}return t.A3=1,t.A22=2,t.A4=3,t.A12=4,t.A7=5,t.A13=6,t.A14=7,t.A28=8,t.A29=9,t.A8=10,t.A35=11,t.A23=12,t.A24=13,t.A15=14,t.A30=15,t.A16=16,t.A45=18,t.A39=20,t.A40=21,t.A17=22,t.A18=23,t.A36=24,t.A37=25,t.A19=26,t.A9=27,t.A10=28,t.A42=29,t.A1=30,t.A46=31,t.A11=32,t.A31=33,t.A47=34,t.A2=36,t.A43=37,t.A32=38,t.A20=39,t.A21=40,t.A25=41,t.A33=42,t.A41=43,t.A44=44,t.A5=45,t.A34=46,t.A38=47,t.A26=48,t.A6=49,t.A27=50,t.HeroBattle=51,t.HeroBattleReplay=53,t.SurvivalChallenge=52,t}();__reflect(P15.prototype,"P15");var FightSoundManager=function(){function i(){}return i.playBg=function(t,e){void 0===e&&(e=!1),t!=i.curPlayIndex&&(e&&(i.enterGame=!0,this.ZO51()),i.enterGame&&(i.curPlayIndex=t=null==t?i.curPlayIndex:t,this.ZI66(),App.SoundManager.playBg(i.bgList[t])))},i.pause=function(){App.SoundManager.setBgOn(!1)},i.resume=function(){this.ZO51()},i.ZO51=function(){if(i.enterGame){var t=App.CM.gtM(O6.B82);t.setting&&App.SoundManager.setBgOn(!(-1!=t.setting.indexOf(L17.A31)))}},i.ZI66=function(){if(i.enterGame&&!i.hasPlayed){var t=App.CM.gtM(O6.B82);t.setting&&-1==t.setting.indexOf(L17.A31)&&(i.hasPlayed=!0)}},i.ZL34=function(){if(!i.hasPlayed){var t=App.CM.gtM(O6.B82);t&&t.setting&&-1!=t.setting.indexOf(L17.A31)&&(i.hasPlayed=!0,App.SoundManager.setBgOn(!0),App.SoundManager.playBg(i.bgList[i.curPlayIndex]))}},i.curPlayIndex=-1,i.bgList=["base_mp3","fight_mp3"],i.enterGame=!1,i}();__reflect(FightSoundManager.prototype,"FightSoundManager");var P17=function(){function t(){}return t.A37=2e3,t.A36=500,t.A23=500,t.A24=300,t.A34=50,t.A22=0,t.A17=660,t.A18=660,t.A19=660,t.A8=50,t.A4=300,t.A2=100,t.A3=50,t.A1=200,t.A20=300,t.A10=100,t.A9=600,t.A21=300,t.A35=300,t.A30=200,t.A31=400,t.A32=200,t.A33=100,t.A11=230,t.A12=500,t.A13=350,t.A14=300,t.A15=400,t.A16=250,t.A5=130,t.A6=420,t.A7=250,t.A25=340,t.A26=150,t.A27=190,t.A28=250,t.A29=660,t}();__reflect(P17.prototype,"P17");var TG67=function(){function p(){}return p.FK86=function(t,e){var i="u";switch(t){case Dir.tl:case Dir.tr:i="u";break;case Dir.bl:case Dir.br:i="d"}return FightGOIndex[i+"_"+e]},p.getDirUD=function(t){var e="u";switch(t){case Dir.tl:case Dir.tr:e="u";break;case Dir.bl:case Dir.br:e="d"}return e},p.FE97=function(t,e){return this._convertPoint.x=(t+.5)*FightD.MAP_TW,this._convertPoint.y=(e+.5)*FightD.MAP_TH,this._convertPoint},p.FE98=function(t,e){return this._convertPoint.x=Math.round(t/FightD.MAP_TW),this._convertPoint.y=Math.round(e/FightD.MAP_TH),this._convertPoint},p.FHH34=function(t,e,i,s){var o,r=App.TG81.getRadian2(t,e,i,s),n=App.TG81.getAngle(r);return 0<=n&&n<90?o=Dir.br:90<=n&&n<=180?o=Dir.bl:-90<=n&&n<0?o=Dir.tr:-180<=n&&n<-90&&(o=Dir.tl),o},p.FL74=function(t){t&&0!==t.length||Log.trace("paths is null: ",t);var e="";t.forEach(function(t){e+=t.x+","+t.y+"|"}),Log.trace("paths: ",e)},p.FL75=function(t,e){var i=t.body.size,s=i*Math.tan(App.TG81.getRadian(FightD.BT_ANGLE)),o=TF40.FG17(e.side,e.batPos),r=1==t.side?1:-1;return{x:o.x+i*r,y:o.y+s*r-t.body.sizey}},p.FD5=function(t,e,i,s){var o=App.TG81.getRadian(FightD.BT_ANGLE),r=App.TG81.getRadian(FightD.BT_ANGLE_RIGHT),n=1==t?1:-1;return{x:i+e*Math.sin(o)*n,y:s+e*Math.cos(r)*n}},p.FJ77=function(t,e,i){var s={};switch(t.skillTarget){case 0:var o=FightD.BT_P_HIT_C[2-e];s.x=o.x,s.y=o.y;break;default:s.y=(s.x=i.x,i.y)}return s},p.FE99=function(){var t=App.VM.gOV(O7.I76);t?(t.stopHandup(),t.visible=!1):App.SceneManager.runScene(M2.A4);var e=App.VM.gOV(O7.G82);e&&(e.visible=!1)},p.FK87=function(){var t=App.VM.gOV(O7.I76);t&&(t.startHandup(),t.visible=!0)},p.FI49=function(t,e){var i=ObjectPool.pop("egret.Bitmap");return RES.hasRes(t)?i.texture=RES.getRes(t):e&&FightRes.ZS35(i,t,e+t),i.x=0,TG36.FK33(i,0),TG36.FK34(i,.5),i},p.FHH35=function(t,e,i,s,o){var r=ObjectPool.pop("BMLabel");return r.fontSizeWidth=s,r.fontSizeHeight=o,r.cap=i,r.type=e,r.text=t,TG36.FK33(r,0),TG36.FK34(r,.5),r},p.FD95=function(){return ObjectPool.pop("egret.DisplayObjectContainer")},p.FL76=function(e){e.alpha=1,e.scaleX=e.scaleY=.7,egret.Tween.get(e).to({y:e.y-10,scaleX:1,scaleY:1},P17.A14/FightD.BT_PLAY_SPEED).to({y:e.y-28,scaleX:.7,scaleY:.7},P17.A15/FightD.BT_PLAY_SPEED).wait(P17.A16/FightD.BT_PLAY_SPEED).call(function(){for(;0<e.numChildren;){var t=e.getChildAt(e.numChildren-1);App.TF56.ZJ66(t),t.scaleX=1,t.scaleY=1,ObjectPool.push(t)}egret.Tween.removeTweens(e),e.alpha=1,e.scaleX=1,e.scaleY=1,App.TF56.ZJ66(e),ObjectPool.push(e)})},p.FJ78=function(e){e.scaleX=e.scaleY=1,egret.Tween.get(e).to({scaleX:.9,scaleY:.9},P17.A5/FightD.BT_PLAY_SPEED).wait(P17.A6/FightD.BT_PLAY_SPEED).to({y:e.y-15,alpha:0},P17.A7/FightD.BT_PLAY_SPEED).call(function(){for(;0<e.numChildren;){var t=e.getChildAt(e.numChildren-1);App.TF56.ZJ66(t),ObjectPool.push(t)}egret.Tween.removeTweens(e),e.alpha=1,e.scaleX=e.scaleY=1,App.TF56.ZJ66(e),ObjectPool.push(e)})},p.FHH36=function(t,e){var i=0<e?"+":"";return i+=200<=t||t<0?Math.round(100*Math.abs(e))+"%":Math.abs(e)},p.FD96=function(t,e){var i={x:0,y:0};switch(e){case 1:i.x=t.body.width/2-20,i.y=-t.body.height;break;case 2:i.x=0,i.y=-t.body.height/2;break;case 3:i.x=0,i.y=-15;break;case 4:i.x=0,i.y=-t.body.height;break;case 5:i.x=20,i.y=-t.body.height/2-10}return i},p.whirlOut=function(t){var e=t.getComponent(J14.C_Avatar);e.body.parent;egret.Tween.get(e.body,{loop:!0}).to({rotation:360},100);var i=App.TG81.getRadian(FightD.BT_ANGLE),s=e.body.y>e.body.x*Math.tan(i)+FightD.BT_TTT?1:-1;p.doWirlOut(t,i,s,0)},p.doWirlOut=function(t,e,i,s){var o=t.getComponent(J14.C_Avatar);if(3<=Math.abs(s))return egret.Tween.removeTweens(o.body),void t.destory();s+=i;var r=0,n=FightD.BT_TTT;switch(s){case 1:r=o.body.x-(o.body.y-n)*p.cot(e);break;case 2:n+=o.body.x*Math.tan(e);break;case 3:r=App.TG37.getWidth(),n=o.body.y+r*Math.tan(e);break;case-1:n=o.body.y-o.body.x*Math.tan(e);break;case-2:r=(o.body.y-n)*p.cot(e);break;case-3:var a=App.TG37.getWidth();r=o.body.x+a,n=o.body.y+a*Math.tan(e)}var h=App.TG81.getDistance(o.body.x,o.body.y,r,n)/100;egret.Tween.get(o.body).to({x:r,y:n},300*h).call(function(){t.x=r,t.y=n,o.body.x=r,o.body.y=n,p.doWirlOut(t,e,i,s)})},p.cot=function(t){return Math.tan(Math.PI/2-t)},p.ZW72=function(t,e,i,s,o,r){App.TG81.getRadian2(i,s,o,r),App.TG81.getDistance(i,s,o,r);return 1},p.FG14=function(t){return 1==t?TE91.gIV("SuppressIcon"):2==t?TE91.gIV("SuppressIcon2"):void 0},p._convertPoint=new egret.Point,p.isShowReward=!1,p.showFigerAct=!0,p.curFightSceneType=I4.A8,p.CUR_HANDUP_MAP=void 0,p.CUR_HANDUP_CAMERA=void 0,p}();__reflect(TG67.prototype,"TG67");var BossTalk=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossTalkSkin",t}return __extends(t,e),t.prototype.setTalkMsg=function(t){this.talkmsg.visible=!0,this.talkmsg.text=t;var e=this.talkmsg.height;this.talkImg.height=e+30,this.scaleX=.9,this.scaleY=.9},t.prototype.setImgMsg=function(t){this.talkmsg.visible=!1,null==this.richLabel&&(this.richLabel=com.RichLabel.create(),this.richLabel.maxWidth=200,this.richLabel.color=16448142,this.richLabel.size=20,this.richLabel.rowSpacing=12,this.richLabel.horizontalCenter=0,this.addChild(this.richLabel),this.richLabel.bottom=25),this.richLabel.text=t,this.richLabel.validateNow(),this.talkImg.height=(this.richLabel.height<=20?this.richLabel.height+8:this.richLabel.height)+30},t}(eui.Component);__reflect(BossTalk.prototype,"BossTalk");var CrossCampCompCamera=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.background=this.entity.gameView.getBgMap(),this.gpBase=this.entity.gameView.ZR69(),this.moveObjs=[],this.moveObjs.push(this.entity.parentView),this.moveObjs.push(this.background),this.moveObjs.push(this.gpBase)},t.prototype.stop=function(){e.prototype.stop.call(this),this.moveObjs=null,this.background=null,this.playerX=null,this.playerY=null,this.gpBase=null},t.prototype.update=function(t){e.prototype.update.call(this,t),(this.ZO38()||this.entity.resetCamera)&&(this.entity.resetCamera=!1,this.playerX=this.entity.x,this.playerY=this.entity.y,this.dealMoveObjs())},t.prototype.ZO38=function(){return this.playerX!=this.entity.x||this.playerY!=this.entity.y},t.prototype.dealMoveObjs=function(){var e=Math.max(this.playerX-.5*App.TG37.getWidth(),0),i=Math.max(this.playerY-.5*App.TG37.getHeight(),0);e=Math.min(this.background.width-App.TG37.getWidth(),e),i=Math.min(this.background.height-App.TG37.getHeight(),i),this.moveObjs.forEach(function(t){t.scrollH=e,t.scrollV=i})},t}(FightComponent);__reflect(CrossCampCompCamera.prototype,"CrossCampCompCamera");var FightCompAutoAtk=function(e){function t(){var t=e.call(this)||this;return t.starting=!1,t}return __extends(t,e),t.prototype.start=function(){this.starting||(this.starting=!0,e.prototype.start.call(this),this.type=J14.C_AutoAtk,this.updateInfo(),FightCompManager.addComponent(this))},t.prototype.stop=function(){this.starting&&(FightCompManager.ZN95(this),e.prototype.stop.call(this),this.starting=!1)},t.prototype.updateInfo=function(){var t;t=1==App.CM.gtM(O6.B64).FL64().id?J15.FI6("metFixCD"):J15.FI6("metCD"),this.dealInterval=1e3*(parseInt(t)||10)},t.prototype.update=function(t){(e.prototype.update.call(this,t),App.CM.gtM(O6.B99).isFighting)||App.CM.gtM(O6.B64).autoAtk()&&App.CM.apF(O6.B64,J18.A19)},t}(FightComponent);__reflect(FightCompAutoAtk.prototype,"FightCompAutoAtk");var FightCompAvatar=function(o){function t(){var t=o.call(this)||this;return t.mcFactoryMap={},t.index=0,t.shadow=new eui.Image,t}return __extends(t,o),t.prototype.start=function(){o.prototype.start.call(this),this.body=ObjectPool.pop("eui.Group"),this.body.width=80,this.body.height=10,TG36.FK33(this.body,.5),TG36.FK34(this.body,1),this.entity.parentView.addChild(this.body),this.entity.objType==P13.A3&&(this.body[FightD.BT_AV_ST]=0),this.body.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBody,this),this.mc=ObjectPool.pop("FightMovieClip"),this.scale=this.entity.getScale(),this.mc.standRound=this.entity.standRound,this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.body.scaleX=this.scale,this.body.scaleY=this.scale,this.body.touchChildren=!1,this.mc.touchChildren=!1,this.body.touchEnabled=!1,this.body.visible=!0,this.isRotate||this.mc.ZI67(this.ZS20,this),this.mc.ZL35(this.ZW56,this),this.addShowComps(this.mc,"b");RES.getResAsync("wdsg_jdxdyz_tongy_001_png",function(t){this.texture=t;var e=this.parent,i=!0;if(e){for(var s=0;s<e.numChildren;s++){var o=e.getChildAt(s);if(o.fight_st&&"h"==o.fight_st){i=!1;break}}i&&(this.x=(this.parent.width-this.width)/2,this.bottom=20-this.height)}},this.shadow),this.addShowComps(this.shadow,"shadow"),this.startLoad()},t.prototype.setRotate=function(){this.isRotate=!0},t.prototype.setFreeze=function(t){this.isFreeze=t},t.prototype.setState=function(){switch(this.entity.action=Action.Attacked,this.index){case 0:this.entity.dir=Dir.tr,this.index+=1;break;case 1:this.entity.dir=Dir.tl,this.index+=1;break;case 2:this.entity.dir=Dir.br,this.index+=1;break;case 3:this.entity.dir=Dir.bl,this.index=0}},t.prototype.stop=function(){var i=this;this.isSplit()?this.ZS22().forEach(function(t){var e={type:i.entity.body.type,picture:i.entity.body.picture,action:t};FightRes.destroyGrp(FightRes.ZO50(e),i)}):FightRes.destroyGrp(this.entity.body,this);o.prototype.stop.call(this),this.mcFactoryMap={},this.mc.destroy(),this.mc=null,this.atkCallback=null,this.atkCallTarget=null,this.atkEndCallback=null,this.atkEndCallTarget=null,this.scale=null,delete this.body[FightD.BT_AV_ST],App.TF56.ZJ66(this.body),this.body.rotation=0,this.body.alpha=1,this.body.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBody,this),ObjectPool.push(this.body),this.body.removeChildren(),this.body=null,App.TF56.ZJ66(this.shadow),this.shadow.texture=null,this.resetAction=!1,this.isRotate=null,this.isFreeze=null},t.prototype.update=function(t){o.prototype.update.call(this,t);for(var e=this.entity.leadObj;e&&e.leadObj;)e=e.leadObj;e||(e=this.entity);var i=e.getComponent(J14.C_Pretend);this.entity.objType===P13.A5&&i&&(this.entity.action=Action.Stand),this.isFreeze&&(this.entity.action=Action.Attacked),this.isRotate&&this.setState(),this.setPos(),(this.entity.action!=this.mc.ZW73()||this.entity.dir!=this.mc.getCurrDir()||this.resetAction)&&(this.entity.dir!=this.mc.getCurrDir()&&this.isRuning&&TG67.getDirUD(this.entity.dir)!=TG67.getDirUD(this.mc.getCurrDir())&&this.ZW57(),this.swithcMcData(),this.isSplit()&&this.entity.temHorsesId&&this.entity.action==Action.Move?this.mc.gotoAction(Action.Stand,this.entity.dir,this.resetAction):this.mc.gotoAction(this.entity.action,this.entity.dir,this.resetAction),this.resetAction=!1);var s=t;switch(this.entity.objType){case P13.A3:s=t*FightD.BT_PLAY_SPEED;break;case P13.A1:s=2*t;break;default:s=this.entity.action===Action.Move?1.5*t:t}this.mc.runAction(s),this.ZW57()},t.prototype.ZS20=function(){if(this.mc.ZW73()==Action.Die)this.isRuning=!1,this.entity.bodyType==J11.A7||this.entity.bodyType==J11.A13||this.entity.bodyType==J11.A9||this.entity.bodyType==J11.A4||this.entity.bodyType==J11.A8||this.entity.bodyType==J11.A6?this.entity.removeForDie():this.entity.gameView&&this.entity.gameView.director.ZF35(this.entity);else{if(this.entity.action==Action.Attack&&this.atkEndCallback&&this.atkEndCallback.call(this.atkEndCallTarget,this.entity),this.entity.action==Action.Stand&&this.entity.standRound)return this.entity.standRound=null,this.mc.standRound=null,void(this.entity.action=Action.Attack);this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir)}},t.prototype.ZW56=function(){this.entity.action==Action.Attack&&this.atkCallback&&this.atkCallback.call(this.atkCallTarget,this.entity)},t.prototype.ZS21=function(t,e){this.atkCallback=t,this.atkCallTarget=e},t.prototype.ZI54=function(t,e){this.atkEndCallback=t,this.atkEndCallTarget=e},t.prototype.setPos=function(){this.body.x!=this.entity.x&&(this.body.x=this.entity.x),this.body.y!=this.entity.y&&(this.body.y=this.entity.y)},t.prototype.startLoad=function(){var i=this;if(this.body.height=this.entity.body.height*this.scale,this.body.validateNow(),this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2,this.isSplit()){var t=this.ZS22();t.forEach(function(t){i.loadCountHit()}),t.forEach(function(t){var e={type:i.entity.body.type,picture:i.entity.body.picture,action:t};FightRes.loadRes(e,i.ZS23,i)})}else this.loadCountHit(),FightRes.loadRes(this.entity.body,this.ZS23,this)},t.prototype.ZS22=function(){var t=this.entity.bt,e=this.entity.temHorsesId;switch(t){case BehaviourType.Fight_d:return e?[ActionName.Stand_d,ActionName.Attackd,ActionName.Attacku]:[ActionName.Stand_d,ActionName.Move,ActionName.Attackd,ActionName.Attacku];case BehaviourType.Fight_u:return e?[ActionName.Stand_u,ActionName.Attacku]:[ActionName.Stand_u,ActionName.Move,ActionName.Attacku];case BehaviourType.Attack_u:return[ActionName.Stand_u,ActionName.Attacku];case BehaviourType.Attack_d:return[ActionName.Stand_d,ActionName.Attackd];case BehaviourType.Move:return e?[ActionName.Stand_d,ActionName.Stand_u]:[ActionName.Stand_d,ActionName.Stand_u,ActionName.Move];case BehaviourType.Stand_d:return[ActionName.Stand_d];case BehaviourType.Stand_u:return[ActionName.Stand_u];default:return null}},t.prototype.isSplit=function(){return!!(this.entity&&this.entity.bt&&this.entity.body&&"body"==this.entity.body.type)},t.prototype.ZS23=function(t,e){if(this.loadCountHit(!1),this.isSplit()){if(!t)return void(this.isRuning=!1);if(!this.isRuning)return;for(var i=this.ZS22(),s=0;s<i.length;s++){var o=i[s];if(-1<e.indexOf(o)){this.mcFactoryMap[o]=t;break}}this.swithcMcData()}else{if(!t)return void(this.isRuning=!1);if(!this.isRuning)return;this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI))}this.mc.anchorOffsetX=this.entity.body.anchorx||0,this.mc.anchorOffsetY=this.entity.body.anchory||0,this.resetAction=!0},t.prototype.swithcMcData=function(){if(this.isSplit()){var t=this.entity.action;switch(this.entity.action){case Action.Stand:this.entity.dir==Dir.bl||this.entity.dir==Dir.br?t=ActionName.Stand_d:this.entity.dir!=Dir.tl&&this.entity.dir!=Dir.tr||(t=ActionName.Stand_u);break;case Action.Attack:case Action.Attacked:case Action.Die:this.entity.dir==Dir.bl||this.entity.dir==Dir.br?t=ActionName.Attackd:this.entity.dir!=Dir.tl&&this.entity.dir!=Dir.tr||(t=ActionName.Attacku);break;case Action.Move:this.entity.temHorsesId?this.entity.dir==Dir.bl||this.entity.dir==Dir.br?t=ActionName.Stand_d:this.entity.dir!=Dir.tl&&this.entity.dir!=Dir.tr||(t=ActionName.Stand_u):t=ActionName.Move;break;default:t=ActionName.Stand_d}var e=this.mcFactoryMap[t];e&&this.mc.getMcData()!=e.generateMovieClipData(FightD.AV_ANI)&&this.mc.setMcData(e.generateMovieClipData(FightD.AV_ANI))}},t.prototype.getHitPoint=function(){return{x:this.body.x+(this.entity.body.hitpointx-this.entity.body.anchorx)*this.scale,y:this.body.y+(this.entity.body.hitpointy-this.entity.body.anchory)*this.scale}},t.prototype.addShowComps=function(t,e){t[FightD.AV_ST]=e,this.body.addChild(t),this.ZW57()},t.prototype.ZW57=function(){var o=this;this.body.$children.sort(function(t,e){var i=TG67.FK86(o.entity.dir,t[FightD.AV_ST]),s=TG67.FK86(o.entity.dir,e[FightD.AV_ST]);return s<i?1:i<s?-1:0})},t.prototype.ZI55=function(t,e){var i=TG67.FK86(this.entity.dir,t[FightD.AV_ST]),s=TG67.FK86(this.entity.dir,e[FightD.AV_ST]);return s<i?1:i<s?-1:0},t.prototype.onClickBody=function(t){this.entity&&this.entity.clickCallback&&(this.entity.clickCallback(),t.stopPropagation())},t}(FightComponent);__reflect(FightCompAvatar.prototype,"FightCompAvatar");var FightCompBlood=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this);var t=this.entity.getComponent(J14.C_Avatar);this.body=t.body,this.pbarBlood=new eui.ProgressBar,this.pbarBlood.skinName=skins.ProgressBarSkin,this.pbarBlood.width=52,this.pbarBlood.height=this.pbarBlood.bgLan.height=this.pbarBlood.thumb.height=10,this.setVisible(!0),this.entity.bodyType==J11.A13?this.pbarBlood.top=-10:this.entity.bodyType==J11.A3||this.entity.bodyType==J11.A2?this.setVisible(!1):this.pbarBlood.top=-25,this.pbarBlood.horizontalCenter=0,this.pbarBlood.labelDisplay.visible=!1,t.addShowComps(this.pbarBlood,"bl"),this.pbarBlood.maximum=this.entity.thp,this.pbarBlood.value=this.entity.hp,this.pbarBlood.bg.source="v1_bar_zhandou_zdjm_hongdi_png",this.pbarBlood.bgLan.source="v1_bar_zhandou_zdjm2_lan_png",this.entity.dir===Dir.tl?this.pbarBlood.thumb.source="v1_bar_zhandou_zdjm_lu_png":this.pbarBlood.thumb.source="v1_bar_zhandou_zdjm_hong_png"},t.prototype.stop=function(){e.prototype.stop.call(this),delete this.pbarBlood[FightD.AV_ST],App.TF56.ZJ66(this.pbarBlood),this.pbarBlood=null,this.body=null},t.prototype.setBlood=function(t){this.pbarBlood.value=t},t.prototype.ZS24=function(t){var e=this.pbarBlood.bgLan;t?(t>=this.pbarBlood.maximum?e.width=this.pbarBlood.width:e.width=this.pbarBlood.width*t/this.pbarBlood.maximum,this.pbarBlood.value+t<=this.pbarBlood.maximum?e.x=this.pbarBlood.width*this.pbarBlood.value/this.pbarBlood.maximum:e.x=this.pbarBlood.width-e.width):e.width=0},t.prototype.setVisible=function(t){this.pbarBlood.visible=t},t}(FightComponent);__reflect(FightCompBlood.prototype,"FightCompBlood");var FightCompCamera=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.background=this.entity.gameView.getBgMap(),this.moveObjs=[],this.moveObjs.push(this.entity.parentView),this.moveObjs.push(this.background)},t.prototype.stop=function(){e.prototype.stop.call(this),this.moveObjs=null,this.background=null,this.playerX=null,this.playerY=null},t.prototype.update=function(t){e.prototype.update.call(this,t),this.ZO38()&&(this.playerX=this.entity.x,this.playerY=this.entity.y,this.dealMoveObjs())},t.prototype.ZO38=function(){return this.playerX!=this.entity.x||this.playerY!=this.entity.y},t.prototype.dealMoveObjs=function(){var e=Math.max(this.playerX-.5*App.TG37.getWidth(),0),i=Math.max(this.playerY-.5*App.TG37.getHeight(),0);e=Math.min(this.background.width-App.TG37.getWidth(),e),i=Math.min(this.background.height-App.TG37.getHeight(),i),this.moveObjs.forEach(function(t){t.x=-e,t.y=-i}),this.entity.gameView instanceof egret.EventDispatcher&&this.entity.gameView.dispatchEventWith(FightObjectEvent.CAMERA_MOVE,!1,[this.playerX,this.playerY])},t}(FightComponent);__reflect(FightCompCamera.prototype,"FightCompCamera");var FightCompCloud=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){if(i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"cl"),this.entity.objType==P13.A3)this.body.setChildIndex(this.mc,0);else{var t=this.body.numChildren;this.body.setChildIndex(this.mc,t-1)}this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.cloudId),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null,this.scale=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){var i=this;this.ZS22().forEach(function(t){var e=i.entity.cloudId;e.action=t,FightRes.loadRes(e,i.ZS23,i)})},t.prototype.ZS22=function(){switch(this.entity.bt){case BehaviourType.Fight_d:case BehaviourType.Attack_d:case BehaviourType.Stand_d:return[ActionName.Stand_d];case BehaviourType.Fight_u:case BehaviourType.Attack_u:case BehaviourType.Stand_u:return[ActionName.Stand_u];default:return null}},t.prototype.ZS23=function(t){t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.cloudId.anchorx||0,this.mc.anchorOffsetY=this.entity.cloudId.anchory||0,this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2):this.isRuning=!1},t}(FightComponent);__reflect(FightCompCloud.prototype,"FightCompCloud");var FightCompControl=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.entity.gameView.touchEnabled=!0,this.entity.gameView.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mapData=this.entity.gameView.FK54()},t.prototype.stop=function(){this.entity.gameView.touchEnabled=!1,this.entity.gameView.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.mapData=null,e.prototype.stop.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.ZS25=function(t,e){var i=this,s=TE69.FI22(t,e);if(s){var o=s.x,r=s.y,n=G10.FHH4(o,r);if(n.country==this.entity.country||0==n.country){var a=TE69.FHH6(),h=function(){if(TE69.FHH5(n.id)){var t={handler:function(){App.CM.apF(O6.B22,G12.A48,n.id,o,r)},content:O3.tr(820)};App.K16.doTimer(100,1,function(){App.VM.open(O7.C54,t)},i)}else App.CM.apF(O6.B22,G12.A48,n.id,o,r)};if(a){var p={handler:function(){h()},content:O3.tr(822)};return void App.VM.open(O7.C54,p)}h()}else{var l=void 0;switch(n.country){case C19.A1:l=O3.tr(805);break;case C19.A2:l=O3.tr(804);break;case C19.A3:l=O3.tr(806)}p={handler:null,content:O3.tr(823,l)};App.VM.open(O7.C54,p)}}},t.prototype.onClick=function(t){if(t.target instanceof eui.Group){t.target.name==N1.A13&&App.CM.apF(O6.B99,N1.A3);var e=t.localX,i=t.localY;this.entity.objType==P13.A2?this.ZS25(e,i):(this.entity.objType==P13.A4&&(App.CM.apF(O6.C6,N5.A36,e,i),App.CM.apF(O6.B16,G13.A47,e,i),App.CM.apF(O6.A99,F14.A48,e,i),App.CM.apF(O6.B89,L11.B51,e,i)),this.moveTo(e,i))}},t.prototype.moveTo=function(t,e){var i,s=this.entity.x,o=this.entity.y,r=TG67.FE98(s,o),n=r.x,a=r.y,h=TG67.FE98(t,e),p=h.x,l=h.y;if((i=this.entity.objType==P13.A4||this.entity.objType==P13.A2?this.mapData.ZS28(n,a,p,l,!0):this.mapData.findPath(n,a,p,l))&&1<i.length){i.shift();var c=TG67.FE97(i[0].x,i[0].y);App.CM.apF(O6.C6,N5.A17,c),this.entity.path=i}else this.entity.path=null},t}(FightComponent);__reflect(FightCompControl.prototype,"FightCompControl");var FightCompEffect=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.type=J14.C_Effect,this.body=ObjectPool.pop("eui.Group"),this.body.width=2,this.body.height=2,TG36.FL33(this.body,.5);var t=this.params.av;this.body.x=t.body.width/2+this.params.x,this.body.y=-this.params.y,t.addShowComps(this.body,"buff"),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.mc.x=0,this.mc.y=0,this.body.addChild(this.mc),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.params.data),this),i.prototype.stop.call(this),delete this.body[FightD.AV_ST],this.mc.destroy(),this.mc=null,App.TF56.ZJ66(this.body),TG36.FL33(this.body,0),ObjectPool.push(this.body),this.body.removeChildren(),this.body=null},t.prototype.update=function(t){i.prototype.update.call(this,t);var e=t*FightD.BT_PLAY_SPEED;this.mc.runAction(e)},t.prototype.ZS20=function(){this.params.loop?this.mc.gotoAction(Action.Act,this.params.dir,!0):(FightCompManager.ZN95(this),this.stop())},t.prototype.startLoad=function(){FightRes.loadRes(this.params.data,this.ZS23,this)},t.prototype.ZS23=function(t){if(!t)return this.isRuning=!1,void this.ZS20();this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.params.data.anchorx||0,this.mc.anchorOffsetY=this.params.data.anchory||0,this.mc.gotoAction(Action.Act,this.params.dir),FightCompManager.addComponent(this))},t}(FightComponent);__reflect(FightCompEffect.prototype,"FightCompEffect");var FightCompFollow=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.dirInterval=150,this.actInterval=0},e.prototype.stop=function(){t.prototype.stop.call(this)},e.prototype.update=function(t){if(this.entity.leadObj){var e=App.TG81.getDistance(this.entity.leadObj.x,this.entity.leadObj.y,this.entity.x,this.entity.y);if(this.actInterval-=t,Math.floor(e)<=FightD.FC_FollowDis)return this.entity.action=Action.Stand,void(this.actInterval=150);if(!(0<this.actInterval)){this.actInterval=0;var i=FightD.FC_FollowDis/e,s=this.entity.x-this.entity.leadObj.x,o=this.entity.y-this.entity.leadObj.y,r=0!==s?i*Math.pow(Math.abs(s),2)/s+this.entity.leadObj.x:this.entity.leadObj.x,n=0!==o?i*Math.pow(Math.abs(o),2)/o+this.entity.leadObj.y:this.entity.leadObj.y;this.dirInterval-=t,this.dirInterval<0&&(this.dirInterval=150,this.entity.dir=TG67.FHH34(this.entity.x,this.entity.y,r,n)),this.entity.x=r,this.entity.y=n,this.entity.action=Action.Move}}},e}(FightComponent);__reflect(FightCompFollow.prototype,"FightCompFollow");var FightCompFormation=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"fi"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.formation),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null,this.scale=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){FightRes.loadRes(this.entity.formation,this.ZS23,this)},t.prototype.ZS23=function(t){t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.formation.anchorx||0,this.mc.anchorOffsetY=this.entity.formation.anchory||0,this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2):this.isRuning=!1},t}(FightComponent);__reflect(FightCompFormation.prototype,"FightCompFormation");var FightCompFull=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"fu"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.full),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null,this.scale=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){FightRes.loadRes(this.entity.full,this.ZS23,this)},t.prototype.ZS23=function(t){t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetY=170,this.mc.anchorOffsetX=(this.body.width-this.mc.width)/2,this.mc.y=this.body.height/2,this.mc.x=this.body.width*this.scale/2):this.isRuning=!1},t}(FightComponent);__reflect(FightCompFull.prototype,"FightCompFull");var FightCompHandup=function(e){function t(){var t=e.call(this)||this;return t.tttt=0,t.starting=!1,t}return __extends(t,e),t.prototype.start=function(){this.starting||(this.starting=!0,e.prototype.start.call(this),this.type=J14.C_Handup,this.updateInfo(),FightCompManager.addComponent(this))},t.prototype.updateInfo=function(){var t;t=1==App.CM.gtM(O6.B64).FL64().id?J15.FI6("metFixCD"):J15.FI6("metCD"),this.dealInterval=1e3*(parseFloat(t)||10)},t.prototype.stop=function(){this.starting&&(FightCompManager.ZN95(this),e.prototype.stop.call(this),this.starting=!1)},t.prototype.update=function(t){(e.prototype.update.call(this,t),this.tttt+=this.dealInterval,App.CM.gtM(O6.B99).isFighting)||(App.CM.gtM(O6.B64).autoAtk()?App.CM.apF(O6.B64,J18.A19,!0):App.CM.apF(O6.B64,J18.A7))},t}(FightComponent);__reflect(FightCompHandup.prototype,"FightCompHandup");var FightCompHit=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.type=J14.C_Hit,this.body=ObjectPool.pop("eui.Group"),this.body.width=2,this.body.height=2,TG36.FL33(this.body,.5),this.body.x=this.params.x,this.body.y=this.params.y,this.params.gameView.ZV27().addChild(this.body),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.mc.x=0,this.mc.y=0,this.body.addChild(this.mc),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.params.data),this),i.prototype.stop.call(this),this.mc.destroy(),this.mc=null,App.TF56.ZJ66(this.body),TG36.FL33(this.body,0),ObjectPool.push(this.body),this.body.removeChildren(),this.body=null},t.prototype.update=function(t){i.prototype.update.call(this,t);var e=t*FightD.BT_PLAY_SPEED;this.mc.runAction(e)},t.prototype.ZS20=function(){FightCompManager.ZN95(this),this.stop()},t.prototype.startLoad=function(){FightRes.loadRes(this.params.data,this.ZS23,this)},t.prototype.ZS23=function(t){if(!t)return this.isRuning=!1,void this.ZS20();this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.params.data.anchorx||0,this.mc.anchorOffsetY=this.params.data.anchory||0,this.mc.gotoAction(Action.Act,this.params.dir),FightCompManager.addComponent(this))},t}(FightComponent);__reflect(FightCompHit.prototype,"FightCompHit");var FightCompHitNew=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.type=J14.C_HitNew,this.body=ObjectPool.pop("eui.Group"),this.body.width=2,this.body.height=2,TG36.FL33(this.body,.5),this.body.x=this.params.x,this.body.y=this.params.y,this.params.gameView.ZV27().addChild(this.body),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.mc.x=0,this.mc.y=0,this.body.addChild(this.mc),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.params.data),this),i.prototype.stop.call(this),this.mc.destroy(),this.mc=null,App.TF56.ZJ66(this.body),TG36.FL33(this.body,0),ObjectPool.push(this.body),this.body.removeChildren(),this.body=null},t.prototype.update=function(t){i.prototype.update.call(this,t);var e=t*FightD.BT_PLAY_SPEED_LIST[0];this.mc.runAction(e)},t.prototype.ZS20=function(){FightCompManager.ZN95(this),this.stop()},t.prototype.startLoad=function(){FightRes.loadRes(this.params.data,this.ZS23,this)},t.prototype.ZS23=function(t){if(!t)return this.isRuning=!1,void this.ZS20();this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.params.data.anchorx||0,this.mc.anchorOffsetY=this.params.data.anchory||0,this.mc.gotoAction(Action.Act,this.params.dir),FightCompManager.addComponent(this))},t}(FightComponent);__reflect(FightCompHitNew.prototype,"FightCompHitNew");var FightCompHorse=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.start=function(){n.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.touchEnabled=!1,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"h"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.horses),this),n.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.mcHead&&(this.mcHead.destroy(),this.mcHead=null),this.body=null},t.prototype.update=function(t){n.prototype.update.call(this,t);for(var e=this.entity.leadObj;e&&e.leadObj;)e=e.leadObj;e||(e=this.entity);var i=e.getComponent(J14.C_Pretend);if(this.entity.objType===P13.A5&&(this.entity.action=i?Action.Stand:Action.Move),this.entity.action!=this.mc.ZW73()||this.entity.dir!=this.mc.getCurrDir()||this.mcHead&&this.mcHead.ZW73()!=this.mc.ZW73()||this.mcHead&&this.mcHead.getCurrDir()!=this.mc.getCurrDir()){var s=this.entity.action;this.mc.gotoAction(s,this.entity.dir),this.mcHead&&(this.mcHead.visible=this.mcHead.gotoAction(s,this.entity.dir))}var o=this.entity._horses;this.av.shadow.bottom=20-this.av.shadow.height+o.shadowy,this.av.shadow.x=(this.av.shadow.parent.width-this.av.shadow.width)/2+o.shadowx;var r=t;switch(this.entity.objType){case P13.A3:r=t*FightD.BT_PLAY_SPEED;break;case P13.A1:r=2*t;break;default:r=this.entity.action===Action.Move?1.5*t:t}this.mc.runAction(r),this.mcHead&&this.mcHead.runAction(r)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.ZE1=function(){this.mcHead.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mcHead.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){this.loadCountHit(),FightRes.loadRes(this.entity.horses,this.ZS23,this)},t.prototype.ZS23=function(t){if(this.loadCountHit(!1),t){if(this.isRuning){this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.horses.anchorx||0,this.mc.anchorOffsetY=this.entity.horses.anchory||0,this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2;var e=t.generateMovieClipData(FightD.AV_HORSE_H);e&&e.mcData?(null==this.mcHead&&(this.mcHead=ObjectPool.pop("FightMovieClip"),this.mcHead.scaleX=this.scale,this.mcHead.scaleY=this.scale,this.mcHead.ZI67(this.ZE1,this),this.av.addShowComps(this.mcHead,"hh")),this.mcHead.setMcData(e),this.mcHead.anchorOffsetX=this.mc.anchorOffsetX,this.mcHead.anchorOffsetY=this.mc.anchorOffsetY,this.mcHead.x=this.mc.x,this.mcHead.y=this.mc.y):this.mcHead&&(this.mcHead.destroy(),this.mcHead=null)}}else this.isRuning=!1},t}(FightComponent);__reflect(FightCompHorse.prototype,"FightCompHorse");var FightCompMagicthing=function(i){function r(){return i.call(this)||this}return __extends(r,i),r.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"f"),this.startLoad()},r.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.magicthing),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null,this.scale=null},r.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||(this.mc.gotoAction(this.entity.action,this.entity.dir),this.gotoDir(this.entity.dir));var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},r.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},r.prototype.startLoad=function(){FightRes.loadRes(this.entity.magicthing,this.ZS23,this)},r.prototype.ZS23=function(t){t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.magicthing.anchorx||0,this.mc.anchorOffsetY=this.entity.magicthing.anchory||0,this.mc.y=this.body.height/2,this.mc.x=this.body.width*this.scale/2,this.gotoDir(this.entity.dir)):this.isRuning=!1},r.prototype.gotoDir=function(t){var e=r.pos[t],i=this.av.mc.x+e[0],s=e[1],o=App.TG81.getDistance(i,s,this.mc.x,this.mc.y);egret.Tween.get(this.mc).to({x:i,y:s},o/r.speed)},r.pos=[[-45,0],[45,0],[-50,0],[50,0]],r.speed=.1,r}(FightComponent);__reflect(FightCompMagicthing.prototype,"FightCompMagicthing");var FightCompManager=function(){function t(){}return t.addComponent=function(t){this._comps[t.type]||(this._comps[t.type]=[]),t instanceof FightCompHandup&&1<=this._comps[t.type].length||this._comps[t.type].push(t)},t.ZN95=function(t){if(this._comps[t.type]){var e=this._comps[t.type].indexOf(t);-1!=e&&this._comps[t.type].splice(e,1)}},t.ZC48=function(t){if(this._comps[t])for(;0<this._comps[t].length;){this._comps[t].pop().stop()}},t.start=function(){this.isStart||(this.isStart=!0,App.K16.doFrame(1,0,this.ZU1,this))},t.stop=function(){this.isStart&&(this.isStart=!1),App.K16.remove(this.ZU1,this)},t.ZU1=function(t){this.dealComps(this._comps[J14.C_Horse],t),this.dealComps(this._comps[J14.C_Weapon],t),this.dealComps(this._comps[J14.C_Wing],t),this.dealComps(this._comps[J14.C_Spectral],t),this.dealComps(this._comps[J14.C_Formation],t),this.dealComps(this._comps[J14.C_Cloud],t),this.dealComps(this._comps[J14.C_Magicthing],t),this.dealComps(this._comps[J14.C_Avatar],t),this.dealComps(this._comps[J14.C_MoveToTarget],t),this.dealComps(this._comps[J14.C_MoveToTargetPos],t),App.VM.isOpen(O7.E31)&&(this.dealComps(this._comps[J14.C_CrossCampIcon],t),this.dealComps(this._comps[J14.C_CrossCampCamera],t),this.dealComps(this._comps[J14.C_CrossCampMoveLine],t)),App.VM.isOpen(O7.D16)&&(this.dealComps(this._comps[J14.C_SkillNew],t),this.dealComps(this._comps[J14.C_HitNew],t)),App.VM.isOpen(O7.E40)&&(this.dealComps(this._comps[J14.C_SkillNew],t),this.dealComps(this._comps[J14.C_HitNew],t),this.dealComps(this._comps[J14.C_Effect],t)),FightD.BT_PLAYING?(this.dealComps(this._comps[J14.C_SortB],t),this.dealComps(this._comps[J14.C_Skill],t),this.dealComps(this._comps[J14.C_Hit],t),this.dealComps(this._comps[J14.C_Effect],t),this.dealComps(this._comps[J14.C_PlayCtrl],t)):(this.dealComps(this._comps[J14.C_Sort],t),this.dealComps(this._comps[J14.C_Handup],t),this.dealComps(this._comps[J14.C_AutoAtk],t),this.dealComps(this._comps[J14.C_Camera],t),this.dealComps(this._comps[J14.C_Move],t),this.dealComps(this._comps[J14.C_RandomDir],t),this.dealComps(this._comps[J14.C_Follow],t),this.dealComps(this._comps[J14.C_Full],t),this.dealComps(this._comps[J14.C_Pretend],t))},t.dealComps=function(t,e){t&&t.forEach(function(t){t.isRuning&&(t.dealTime+=e,t.dealTime>=t.dealInterval&&(t.dealTime=0,t.update(e)))})},t.isStart=!1,t._comps={},t}();__reflect(FightCompManager.prototype,"FightCompManager");var FightCompMethod=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),App.THH32.aUE(this.body,this.entity.method,45*this.scale,(this.body.height/2+44)*this.scale,0,null,null,null,null,"Animation1",!1,0)},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.method),this),e.prototype.stop.call(this),this.body=null,this.scale=null},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.ZS20=function(){this.entity.method=null},t}(FightComponent);__reflect(FightCompMethod.prototype,"FightCompMethod");var FightCompMove=function(h){function t(){return h.call(this)||this}return __extends(t,h),t.prototype.start=function(){h.prototype.start.call(this),this.mapData=this.entity.gameView.FK54()},t.prototype.stop=function(){h.prototype.stop.call(this),this.endX=null,this.endY=null,this.radian=null,this.distance=null,this.node=null,this.mapData=null},t.prototype.update=function(t){h.prototype.update.call(this,t);var e=this.entity.getComponent(J14.C_Pretend);if(this.entity.objType!==P13.A5||!e)if(this.entity.pathChange&&(this.entity.pathChange=!1,this.node=null),this.node)this.isStop=!1,this.move(t);else{if(!this.entity.path&&this.entity.objType==P13.A5){this.isStop=!1;var i=this.entity.x,s=this.entity.y,o=TG67.FE98(i,s),r=o.x,n=o.y,a=this.mapData.findNextPath(r,n);return void(a&&1<a.length&&(a.shift(),this.entity.path=a))}if(!this.entity.path&&!this.isStop)switch(this.entity.objType){case P13.A4:return this.isStop=!0,void App.CM.apF(O6.B89,L11.B12);case P13.A2:return this.isStop=!0,void(this.entity.isMySelf&&App.CM.apF(O6.B22,G12.A21))}if(this.entity.path&&!this.entity.path.length||!this.entity.path)return void(this.entity.path=null);this.nextNode(),this.node&&(this.isStop=!1,this.move(t))}},t.prototype.move=function(t){App.VM.isOpen(O7.B83)&&this.entity.objType==P13.A4&&App.CM.apF(O6.B89,L11.A56,!0),App.VM.isOpen(O7.D88)&&this.entity.objType==P13.A4&&App.CM.apF(O6.B16,G13.A27,!0),App.VM.isOpen(O7.C39)&&this.entity.objType==P13.A4&&App.CM.apF(O6.B89,L11.B58,!0);var e=this.entity.speed*(t/1e3);if(this.distance>e){var i=Math.cos(this.radian)*e,s=Math.sin(this.radian)*e;this.entity.x+=i,this.entity.y+=s,this.distance-=e,this.entity.action=Action.Move}else this.entity.x=this.endX,this.entity.y=this.endY,this.entity.col=this.node.x,this.entity.row=this.node.y,this.node=null,this.entity.action=Action.Stand;if(this.entity.objType==P13.A2&&this.entity.isMySelf){var o=App.CM.gtM(O6.B22);o.myPos.x=Math.round(this.entity.x),o.myPos.y=Math.round(this.entity.y),this.entity.endX&&!this.entity.endY||(this.entity.endX=this.endX,this.entity.endY=this.endY)}this.entity.gameView instanceof egret.EventDispatcher&&this.entity.gameView.dispatchEventWith(FightObjectEvent.ROLE_MOVE)},t.prototype.nextNode=function(){this.node=this.entity.path.shift();var t=TG67.FE97(this.node.x,this.node.y);this.endX=t.x,this.endY=t.y,this.radian=App.TG81.getRadian2(this.entity.x,this.entity.y,this.endX,this.endY),this.distance=App.TG81.getDistance(this.entity.x,this.entity.y,this.endX,this.endY),this.entity.dir=TG67.FHH34(this.entity.x,this.entity.y,this.endX,this.endY)},t}(FightComponent);__reflect(FightCompMove.prototype,"FightCompMove");var FightCompMoveToTarget=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.mapData=this.entity.gameView.FK54(),this.isGetTarget=!1,this.goToTarget(0)},t.prototype.stop=function(){i.prototype.stop.call(this),this.endX=null,this.endY=null,this.radian=null,this.distance=null,this.node=null,this.mapData=null},t.prototype.update=function(t){if(i.prototype.update.call(this,t),!this.entity.path){if(FightCompManager.ZN95(this),this.entity.targetObj){var e=this.entity.targetObj.getTargetPos();this.entity.ZO54(e.x,e.y)&&this.entity.objType==P13.A4&&this.entity.targetObj.targetCallback&&(this.entity.targetObj.targetCallback(),this.entity.targetObj.targetCallback=null)}this.entity.ZN95(J14.C_MoveToTarget)}},t.prototype.goToTarget=function(t){if(this.entity.pathChange&&(this.entity.pathChange=!1,this.node=null),!this.node){if(!this.entity.path){var e=this.entity.x,i=this.entity.y,s=TG67.FE98(e,i),o=s.x,r=s.y,n=this.entity.targetObj.getTargetPos(),a=n.x,h=n.y,p=TG67.FE98(a,h),l=p.x,c=p.y;if(this.mapData.ZW60(l,c)){var u=this.mapData.ZS28(o,r,l,c);u&&1<u.length&&(u.shift(),this.entity.path=u,this.isGetTarget=!0)}else App.CM.apF(O6.B89,L11.B86);return}if(!this.entity.path.length)return void(this.entity.path=null)}},t}(FightComponent);__reflect(FightCompMoveToTarget.prototype,"FightCompMoveToTarget");var FightCompMoveToTargetPos=function(d){function t(){return d.call(this)||this}return __extends(t,d),t.prototype.start=function(){d.prototype.start.call(this),this.mapData=this.entity.gameView.FK54()},t.prototype.stop=function(){d.prototype.stop.call(this),this.mapData=null},t.prototype.update=function(t){if(d.prototype.update.call(this,t),!this.entity.path&&this.entity.targetPos){var e=this.entity.x,i=this.entity.y,s=TG67.FE98(e,i),o=s.x,r=s.y,n=this.entity.targetPos,a=n.x,h=n.y,p=TG67.FE98(a,h),l=p.x,c=p.y;if(this.mapData.ZW60(l,c)&&(o!=l||r!=c)){var u=this.mapData.ZS28(o,r,l,c);u&&1<u.length&&(u.shift(),this.entity.path=u)}}},t}(FightComponent);__reflect(FightCompMoveToTargetPos.prototype,"FightCompMoveToTargetPos");var FightCompName=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this);var t=this.entity.getComponent(J14.C_Avatar);this.body=t.body,this.imgBg=new eui.Image("v1_bar_zhandou_zdjm_mzdi_png"),this.imgBg.bottom=-47,this.imgBg.horizontalCenter=0,this.imgBg.scale9Grid=new egret.Rectangle(10,5,10,5),t.addShowComps(this.imgBg,"n_1"),this.lbName=new eui.Label,this.lbName.bottom=-45,this.lbName.horizontalCenter=0,this.lbName.size=18,t.addShowComps(this.lbName,"n_2"),this.setName(this.entity.name,1)},t.prototype.stop=function(){e.prototype.stop.call(this),delete this.lbName[FightD.AV_ST],delete this.imgBg[FightD.AV_ST],App.TF56.ZJ66(this.lbName),App.TF56.ZJ66(this.imgBg),this.lbName=null,this.imgBg=null,this.body=null},t.prototype.setName=function(t,e){this.lbName.text=t||"",t==O3.tr(5813)||t==O3.tr(5814)||t==O3.tr(5815)?this.lbName.textColor=14164514:this.entity.bodyType==J11.A12&&this.entity.elv&&4<=this.entity.elv?O5.FB13(this.lbName,t,this.entity.elv+1):this.lbName.textColor=1===e?6483518:15058860,this.lbName.validateNow(),this.imgBg.width=this.lbName.width+8,this.imgBg.height=this.lbName.height+4},t.prototype.startLoad=function(){this.lbName.text=this.entity.name,this.imgBg.width=this.lbName.width+8,this.imgBg.height=this.lbName.height+4},t}(FightComponent);__reflect(FightCompName.prototype,"FightCompName");var FightCompPause=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.dealInterval=500,this.av=this.entity.getComponent(J14.C_Avatar),this.pauseAui()},t.prototype.stop=function(){e.prototype.stop.call(this),this.continueAui()},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.pauseAui=function(){this.av.body.$children.forEach(function(t){t instanceof FightMovieClip&&t.setSuspendAui(!0)})},t.prototype.continueAui=function(){this.av.body&&this.av.body.$children.forEach(function(t){t instanceof FightMovieClip&&t.setSuspendAui(!1)})},t}(FightComponent);__reflect(FightCompPause.prototype,"FightCompPause");var FightCompPlayCtrl=function(e){function t(){var t=e.call(this)||this;return t.type=J14.C_PlayCtrl,t}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.dealCallTime=0},t.prototype.stop=function(){e.prototype.stop.call(this),this.callTime=null,this.dealCallTime=null,this.callFunc=null,this.callObj=null},t.prototype.update=function(t){e.prototype.update.call(this,t),this.dealCallTime+=t*FightD.BT_PLAY_SPEED,this.dealCallTime>=this.callTime&&(this.isRuning=!1,this.callFunc&&this.callFunc.call(this.callObj))},t.prototype.wait=function(t){return this.stop(),this.callTime=t,this},t.prototype.call=function(t,e){this.callFunc=t,this.callObj=e,this.start()},t}(FightComponent);__reflect(FightCompPlayCtrl.prototype,"FightCompPlayCtrl");var FightCompPretend=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"pretend"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.pretend),this),i.prototype.stop.call(this),App.TF56.ZJ66(this.mc),this.av=null,this.mc.destroy(),this.mc=null,this.body=null,this.scale=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir,!1,2);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.entity.pretend=null},t.prototype.startLoad=function(){FightRes.loadRes(this.entity.pretend,this.ZS23,this)},t.prototype.ZS23=function(t){t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=50,"wxgame"===platform.name?this.mc.anchorOffsetY=230:this.mc.anchorOffsetY=280,this.mc.y=this.body.height,this.mc.x=(this.body.width*this.scale-this.mc.width)/2):this.isRuning=!1},t}(FightComponent);__reflect(FightCompPretend.prototype,"FightCompPretend");var FightCompRandomDir=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.mapData=this.entity.gameView.FK54(),this.update(0)},e.prototype.stop=function(){t.prototype.stop.call(this),this.mapData=null},e.prototype.update=function(t){this.ZG77();var e=this.entity.x,i=this.entity.y,s=TG67.FE98(e,i),o=s.x,r=s.y,n=this.mapData.findNextPath(o,r);n&&1<n.length&&(n.shift(),this.entity.path=n)},e.prototype.ZG77=function(){this.dealInterval=Math.floor(Math.random()*(FightD.FC_Dir_MaxT-FightD.FC_Dir_MinT))+FightD.FC_Dir_MinT},e}(FightComponent);__reflect(FightCompRandomDir.prototype,"FightCompRandomDir");var FightCompSkill=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.type=J14.C_Skill,this.body=ObjectPool.pop("eui.Group"),this.body.width=2,this.body.height=2,TG36.FK33(this.body,.5),TG36.FK34(this.body,.5),this.body.x=this.params.x,this.body.y=this.params.y,this.params.gameView.ZV27().addChild(this.body),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.mc.ZL35(this.ZW56,this),!this.params.data||1010004!=this.params.data.id&&1010014!=this.params.data.id&&1010024!=this.params.data.id?(this.body.scaleX=1,this.body.scaleY=1):(this.body.scaleX=1.25,this.body.scaleY=1.25),this.mc.x=0,this.mc.y=0,this.body.addChild(this.mc),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.params.data),this),i.prototype.stop.call(this),this.mc.destroy(),this.mc=null,this.atkCallback=null,this.atkCallTarget=null,App.TF56.ZJ66(this.body),TG36.FL33(this.body,0),ObjectPool.push(this.body),this.body.removeChildren(),this.body=null},t.prototype.update=function(t){var e=t*FightD.BT_PLAY_SPEED;i.prototype.update.call(this,e),this.mc.runAction(e)},t.prototype.ZS20=function(){this.endCallback&&this.endCallback.call(this.endCallTarget,this.entity),FightCompManager.ZN95(this),this.stop()},t.prototype.ZW56=function(){this.atkCallback&&this.atkCallback.call(this.atkCallTarget,this.params)},t.prototype.ZS21=function(t,e){this.atkCallback=t,this.atkCallTarget=e},t.prototype.ZS26=function(t,e){this.endCallback=t,this.endCallTarget=e},t.prototype.startLoad=function(){FightRes.loadRes(this.params.data,this.ZS23,this)},t.prototype.ZS23=function(t){if(!t)return this.isRuning=!1,this.ZW56(),void this.ZS20();this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI),J14.C_Skill),this.mc.anchorOffsetX=this.params.data.anchorx||0,this.mc.anchorOffsetY=this.params.data.anchory||0,this.mc.gotoAction(Action.Act,this.params.dir),FightCompManager.addComponent(this))},t}(FightComponent);__reflect(FightCompSkill.prototype,"FightCompSkill");var FightCompSkillNew=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.type=J14.C_SkillNew,this.body=ObjectPool.pop("eui.Group"),this.body.width=2,this.body.height=2,TG36.FK33(this.body,.5),TG36.FK34(this.body,.5),this.body.x=this.params.x,this.body.y=this.params.y,this.params.gameView.ZV27().addChild(this.body),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.ZI67(this.ZS20,this),this.mc.ZL35(this.ZW56,this),this.mc.x=0,this.mc.y=0,this.body.addChild(this.mc),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.params.data),this),e.prototype.stop.call(this),this.mc.destroy(),this.mc=null,this.atkCallback=null,this.atkCallTarget=null,App.TF56.ZJ66(this.body),TG36.FL33(this.body,0),ObjectPool.push(this.body),this.body.removeChildren(),this.body=null},t.prototype.update=function(t){e.prototype.update.call(this,t);FightD.BT_PLAY_SPEED;this.mc.runAction(t)},t.prototype.ZS20=function(){this.endCallback&&this.endCallback.call(this.endCallTarget,this.entity),FightCompManager.ZN95(this),this.stop()},t.prototype.ZW56=function(){this.atkCallback&&this.atkCallback.call(this.atkCallTarget,this.params)},t.prototype.ZS21=function(t,e){this.atkCallback=t,this.atkCallTarget=e},t.prototype.ZS26=function(t,e){this.endCallback=t,this.endCallTarget=e},t.prototype.startLoad=function(){FightRes.loadRes(this.params.data,this.ZS23,this)},t.prototype.ZS23=function(t){if(!t)return this.isRuning=!1,this.ZW56(),void this.ZS20();this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI),J14.C_SkillNew),this.mc.anchorOffsetX=this.params.data.anchorx||0,this.mc.anchorOffsetY=this.params.data.anchory||0,this.mc.gotoAction(Action.Act,this.params.dir),FightCompManager.addComponent(this))},t}(FightComponent);__reflect(FightCompSkillNew.prototype,"FightCompSkillNew");var FightCompSort=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.dealInterval=500},t.prototype.stop=function(){e.prototype.stop.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.sortGameObjs()},t.prototype.sortGameObjs=function(){this.entity.parentView.$children.sort(this.sortF)},t.prototype.sortF=function(t,e){return t.name==N1.A12&&e.name!==N1.A12?1:t.name!==N1.A12&&e.name==N1.A12?-1:t.y>e.y?1:t.y<e.y?-1:0},t}(FightComponent);__reflect(FightCompSort.prototype,"FightCompSort");var FightCompSortB=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.dealInterval=500},t.prototype.stop=function(){e.prototype.stop.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.sortGameObjs()},t.prototype.sortGameObjs=function(){this.entity.parentView.$children.sort(this.sortF)},t.prototype.sortF=function(t,e){return t[FightD.BT_AV_ST]==e[FightD.BT_AV_ST]?t.y>e.y?1:t.y<e.y?-1:0:t[FightD.BT_AV_ST]>e[FightD.BT_AV_ST]?1:-1},t}(FightComponent);__reflect(FightCompSortB.prototype,"FightCompSortB");var FightCompSpectral=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"spectral"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.spectral),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){this.loadCountHit(),FightRes.loadRes(this.entity.spectral,this.ZS23,this)},t.prototype.ZS23=function(t){this.loadCountHit(!1),t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.spectral.anchorx||0,this.mc.anchorOffsetY=this.entity.spectral.anchory||0,this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2,this.mc.temX=this.mc.x,this.mc.temY=this.mc.y):this.isRuning=!1},t}(FightComponent);__reflect(FightCompSpectral.prototype,"FightCompSpectral");var FightCompTitle=function(e){function t(){var t=e.call(this)||this;return t.imgTitle=new eui.Image,t}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this);var t=this.entity.getComponent(J14.C_Avatar);this.body=t.body,this.entity.objType==P13.A3?this.imgTitle.top=-80:this.imgTitle.top=-65,this.imgTitle.horizontalCenter=0,t.addShowComps(this.imgTitle,"t"),this.updateTitle()},t.prototype.stop=function(){e.prototype.stop.call(this),delete this.imgTitle[FightD.AV_ST],App.TF56.ZJ66(this.imgTitle),this.imgTitle.texture=null,this.body=null},t.prototype.startLoad=function(){this.updateTitle()},t.prototype.updateTitle=function(){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(t){switch(t.label){case 0:return this.imgTitle.source==this.entity.title.picture?[3,2]:(e=FightD.AV_RES_PATH+this.entity.title.type+"/"+this.entity.title.picture,App.TF3.ZQ10(this.entity.title.picture,"image",platform.resUrl+e),[4,RES.getResAsync(this.entity.title.picture)]);case 1:t.sent(),this.entity&&this.entity.title&&this.entity.title.picture&&(i=RES.getRes(this.entity.title.picture),this.imgTitle.texture=i,this.entity.objType==P13.A3?this.imgTitle.top=-this.imgTitle.height-30:this.imgTitle.top=-this.imgTitle.height-20),t.label=2;case 2:return[2]}})})},t}(FightComponent);__reflect(FightCompTitle.prototype,"FightCompTitle");var J14=function(){function t(){}return t.C_Handup="FightCompHandup",t.C_AutoAtk="FightCompAutoAtk",t.C_Avatar="FightCompAvatar",t.C_Move="FightCompMove",t.C_Control="FightCompControl",t.C_Sort="FightCompSort",t.C_SortB="FightCompSortB",t.C_Camera="FightCompCamera",t.C_RandomDir="FightCompRandomDir",t.C_Follow="FightCompFollow",t.C_Blood="FightCompBlood",t.C_Name="FightCompName",t.C_Skill="FightCompSkill",t.C_SkillNew="FightCompSkillNew",t.C_Hit="FightCompHit",t.C_HitNew="FightCompHitNew",t.C_Horse="FightCompHorse",t.C_Weapon="FightCompWeapon",t.C_Wing="FightCompWing",t.C_Formation="FightCompFormation",t.C_Cloud="FightCompCloud",t.C_Spectral="FightCompSpectral",t.C_Magicthing="FightCompMagicthing",t.C_Title="FightCompTitle",t.C_Effect="FightCompEffect",t.C_PlayCtrl="FightCompPlayCtrl",t.C_MoveToTarget="FightCompMoveToTarget",t.C_MoveToTargetPos="FightCompMoveToTargetPos",t.C_Full="FightCompFull",t.C_Pretend="FightCompPretend",t.C_CrossCampIcon="CrossCampCompIcon",t.C_CrossCampCamera="CrossCampCompCamera",t.C_CrossCampMoveLine="CrossCampCompMoveLine",t.C_Method="FightCompMethod",t.C_Pause="FightCompPause",t}();__reflect(J14.prototype,"J14");var FightCompWeapon=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"we"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.weapon),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null,this.scale=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){this.loadCountHit(),FightRes.loadRes(this.entity.weapon,this.ZS23,this)},t.prototype.ZS23=function(t){this.loadCountHit(!1),t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.weapon.anchorx||0,this.mc.anchorOffsetY=this.entity.weapon.anchory||0,this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2):this.isRuning=!1},t}(FightComponent);__reflect(FightCompWeapon.prototype,"FightCompWeapon");var FightCompWing=function(i){function t(){return i.call(this)||this}return __extends(t,i),t.prototype.start=function(){i.prototype.start.call(this),this.av=this.entity.getComponent(J14.C_Avatar),this.body=this.av.body,this.scale=this.entity.getScale(),this.mc=ObjectPool.pop("FightMovieClip"),this.mc.scaleX=this.scale,this.mc.scaleY=this.scale,this.mc.ZI67(this.ZS20,this),this.av.addShowComps(this.mc,"wi"),this.startLoad()},t.prototype.stop=function(){FightRes.destroyGrp(FightRes.ZO50(this.entity.wing),this),i.prototype.stop.call(this),this.av=null,this.mc.destroy(),this.mc=null,this.body=null},t.prototype.update=function(t){i.prototype.update.call(this,t),this.entity.action==this.mc.ZW73()&&this.entity.dir==this.mc.getCurrDir()||this.mc.gotoAction(this.entity.action,this.entity.dir);var e=t;switch(this.entity.objType){case P13.A3:e=t*FightD.BT_PLAY_SPEED;break;case P13.A1:e=2*t;break;default:e=t}this.mc.runAction(e)},t.prototype.ZS20=function(){this.mc.ZW73()==Action.Die||(this.entity.action=Action.Stand,this.mc.gotoAction(this.entity.action,this.entity.dir))},t.prototype.startLoad=function(){this.loadCountHit(),FightRes.loadRes(this.entity.wing,this.ZS23,this)},t.prototype.ZS23=function(t){this.loadCountHit(!1),t?this.isRuning&&(this.mc.setMcData(t.generateMovieClipData(FightD.AV_ANI)),this.mc.anchorOffsetX=this.entity.wing.anchorx||0,this.mc.anchorOffsetY=this.entity.wing.anchory||0,this.mc.y=this.body.height,this.mc.x=this.body.width*this.scale/2,this.mc.temX=this.mc.x,this.mc.temY=this.mc.y):this.isRuning=!1},t}(FightComponent);__reflect(FightCompWing.prototype,"FightCompWing");var P14=function(){function t(){}return t.A1=5,t.A6=11,t.A5=15,t.A2=25,t.A4=27,t.A3=29,t}();__reflect(P14.prototype,"P14");var FightMapData=function(){function r(){this.rows=0,this.cols=0}return r.prototype.setData=function(t){if(null!=t){this.tiles=t.tiles,this.npcPos=[];for(var e=null!=t.npc?t.npc:[],i=0;i<e.length;i++){var s=e[i];this.npcPos.push(new egret.Point(s.x,s.y))}this.tiles&&(this.rows=this.tiles.length,this.cols=0<this.rows?this.tiles[0].length:this.cols)}},r.prototype.getMapWidth=function(){return this.cols*FightD.MAP_TW},r.prototype.getMapHeight=function(){return this.rows*FightD.MAP_TW},r.prototype.ZS27=function(){var t=App.TG81.randInt(0,this.npcPos.length);return this.npcPos[t]},r.prototype.ZW58=function(){var t=this.ZS27();return TG67.FE98(t.x,t.y)},r.prototype.ZW59=function(){var t=this.npcPos[0];return TG67.FE98(t.x,t.y)},r.prototype.ZW60=function(t,e){var i=this.tiles;return!!(0<=t&&0<=e&&i&&e<i.length&&t<i[e].length)&&1===i[e][t]},r.prototype.findPath=function(t,e,i,s,o){for(var r,n,a,h,p,l=[],c={},u=t<i?1:-1,d=e<s?1:-1,v=t,f=e,g=0,m=0,y=!1;v==i&&f==s&&o&&l.length<2&&(i+=o[0],s+=o[1]),(g=App.TG81.getDistance(v+u,f,i,s))==(m=App.TG81.getDistance(v,f+d,i,s))?(v+=u,f+=d):g<m?v+=u:f+=d,this.ZW60(v,f)?(a=l,void 0,(h=c)[p=(r=v)+"_"+(n=f)]||(a.push({x:r,y:n}),h[p]=1)):y=!0,!y;);return 2<=l.length?[{x:t,y:e},l.pop()]:null},r.prototype.ZS28=function(t,e,i,s,o){if(void 0===o&&(o=!1),t!=i||e!=s){for(var r,n,a,h,p,l=[],c={},u=t<i?1:-1,d=e<s?1:-1,v=t,f=e,g=0,m=0,y=!1;(g=App.TG81.getDistance(v+u,f,i,s))==(m=App.TG81.getDistance(v,f+d,i,s))?(v+=u,f+=d):g<m?v+=u:f+=d,this.ZW60(v,f)?(v==i&&f==s&&(y=!0),a=l,void 0,(h=c)[p=(r=v)+"_"+(n=f)]||(a.push({x:r,y:n}),h[p]=1)):o&&(y=!0),!y;);return 2<=l.length?[{x:t,y:e},l.pop()]:null}},r.prototype.findNextPath=function(t,e,i){void 0===i&&(i={});var s=r.getRandomDir(i);if(null==s)return null;var o=this.findPath(t,e,t+s[0],e+s[1],s);return!o||o.length<2?this.findNextPath(t,e,i):o},r.getRandomDir=function(t){var e=Math.floor(8*Math.random());return t[e]?8==Object.keys(t).length?null:r.getRandomDir(t):(t[e]=1,r.randomDir[e])},r.prototype.FK69=function(t,e,i,s){var o=!1;if(t==i&&e==s)return o;for(var r=t<i?1:-1,n=e<s?1:-1,a=t,h=e,p=0,l=0,c=!1;(p=App.TG81.getDistance(a+r,h,i,s))==(l=App.TG81.getDistance(a,h+n,i,s))?(a+=r,h+=n):p<l?a+=r:h+=n,this.ZW60(a,h)?a==i&&h==s&&(c=!0):c=o=!0,!c;);return o},r.randomDir=[[0,1],[0,-1],[1,0],[1,-1],[1,1],[-1,0],[-1,-1],[-1,1]],r}();__reflect(FightMapData.prototype,"FightMapData");var FightMovePlayTeam=function(){function e(t,e,i,s){this.count=0,this.teams=[],this.base={objType:t,dir:e,row:i,col:s}}return e.prototype.setTeamData=function(n,a,h,t,p){var l,c=this,u=this.base.dir==Dir.bl||this.base.dir==Dir.br?-3:3;this.count=0,e.showType.forEach(function(t,e){c.FG91(t);n[t]&&c.loadCountHit()}),e.showType.forEach(function(t,e){var i=c.FG91(t),s=n[t];if(s){if(null==i){i=new FightGameObject,c.completeCallback=p||null;var o={objType:c.base.objType,dir:c.base.dir,row:c.base.row,col:c.base.col+u*e};i.setBaseData(o),c.teams.push(i)}if(s.bt=BehaviourType.Move,i.ZI68(c.reduceHit.bind(c)),i.setData(s,a.ZR68(),a),i.leadObj=l,h){i.clickCallback=h;var r=i.getObjView();r.touchEnabled=!0,r.touchChildren=!0}l=i}else i&&c.ZL28(t)})},e.prototype.ZF31=function(t){this.completeCallback=t},e.prototype.reduceHit=function(){this.loadCountHit(!1)},e.prototype.loadCountHit=function(t){void 0===t&&(t=!0),t?this.count+=1:(this.count-=1,this.count<=0&&this.completeCallback&&this.completeCallback())},e.prototype.FG91=function(t){if(this.teams)for(var e=0;e<this.teams.length;e++)if(e==t)return this.teams[e];return null},e.prototype.ZL28=function(t){if(this.teams)for(var e=this.teams.length-1;0<=e;e--){if(e==t)this.teams.splice(e,1)[0].destory()}},e.prototype.ZF32=function(){if(this.teams)for(;0<this.teams.length;){this.teams.pop().destory()}this.teams=null},e.prototype.ZO39=function(t,e){if(this.teams){for(var i=0;i<this.teams.length;i++){this.teams[i].targetObj=t}this.targetName=e}},e.prototype.updateTarget=function(t,e){var i,s=this.FG91(E4.A1),o=s.gameView.FK54(),r=s.x,n=s.y,a=TG67.FE98(r,n),h=a.x,p=a.y,l=TG67.FE98(t,e),c=l.x,u=l.y;if((i=s.objType==P13.A4||s.objType==P13.A2?o.ZS28(h,p,c,u,!0):o.findPath(h,p,c,u))&&1<i.length){i.shift();TG67.FE97(i[0].x,i[0].y);s.path=i}else s.path=null},e.prototype.ZO40=function(t){if(this.teams)for(var e=0;e<this.teams.length;e++){this.teams[e].targetPos=t}},e.prototype.ZO41=function(){if(this.teams)for(var t=0;t<this.teams.length;t++){this.teams[t].targetPos=null}},e.prototype.isRoundNpc=function(t,e){if(this.teams){for(var i=0;i<this.teams.length;i++){if(this.teams[i].ZO54(t,e))return!0}return!1}return!1},e.prototype.ZW61=function(){return this.targetName},e.prototype.destroy=function(){this.ZF32(),this.count=0},e.showType=[E4.A1,E4.A2,E4.A3],e}();__reflect(FightMovePlayTeam.prototype,"FightMovePlayTeam");var FightMoveTeam=function(){function d(t,e,i,s){this.count=0,this.teams=[],this.base={objType:t,dir:e,row:i,col:s}}return d.prototype.setTeamData=function(r,n,t,e,i,a){var h,p=this,l=this.base.dir==Dir.bl||this.base.dir==Dir.br?-3:3;if(t)this.count=0,d.showType.forEach(function(t,e){p.FG91(t);r[t]&&p.loadCountHit()}),d.showType.forEach(function(t,e){var i=p.FG91(t),s=r[t];if(s){if(null==i){i=new FightGameObject,p.completeCallback=a||null;var o={objType:p.base.objType,dir:p.base.dir,row:p.base.row,col:p.base.col+l*e};i.setBaseData(o),p.teams.push(i)}s.bt=BehaviourType.Move,i.ZI68(p.reduceHit.bind(p)),i.setData(s,n.ZR68(),n),i.leadObj=h,h=i}else i&&p.ZL28(t)});else{var s=this.FG91(J11.A7),o=r;if(o){if(null==s){s=new FightGameObject;var c={objType:this.base.objType,dir:this.base.dir,row:this.base.row,col:this.base.col};s.setBaseData(c),this.teams.push(s)}var u;if(o.bt=BehaviourType.Move,s.setData(o,n.ZR68(),n),i&&s.ZF39(o,i),s.leadObj=h,h=s,e)s.clickCallback=e,(u=s.getObjView()).touchEnabled=!0,u.touchChildren=!0;else(u=s.getObjView()).touchEnabled=!1,u.touchChildren=!1}else s&&this.ZL28(J11.A7)}},d.prototype.ZF31=function(t){this.completeCallback=t},d.prototype.reduceHit=function(){this.loadCountHit(!1)},d.prototype.loadCountHit=function(t){void 0===t&&(t=!0),t?this.count+=1:(this.count-=1,this.count<=0&&this.completeCallback&&this.completeCallback())},d.prototype.FG91=function(t){if(this.teams)for(var e=0;e<this.teams.length;e++)if(this.teams[e].bodyType==t)return this.teams[e];return null},d.prototype.ZL28=function(t){if(this.teams)for(var e=this.teams.length-1;0<=e;e--){if(this.teams[e].bodyType==t)this.teams.splice(e,1)[0].destory()}},d.prototype.ZF32=function(){if(this.teams)for(;0<this.teams.length;){this.teams.pop().destory()}this.teams=null},d.prototype.ZO39=function(t,e){if(this.teams){for(var i=0;i<this.teams.length;i++){this.teams[i].targetObj=t}this.targetName=e}},d.prototype.ZO40=function(t){if(this.teams)for(var e=0;e<this.teams.length;e++){this.teams[e].targetPos=t}},d.prototype.ZO41=function(){if(this.teams)for(var t=0;t<this.teams.length;t++){this.teams[t].targetPos=null}},d.prototype.isRoundNpc=function(t,e){if(this.teams){for(var i=0;i<this.teams.length;i++){if(this.teams[i].ZO54(t,e))return!0}return!1}return!1},d.prototype.ZW61=function(){return this.targetName},d.prototype.destroy=function(){this.ZF32(),this.count=0},d.showType=[J11.A7,J11.A12,J11.A6,J11.A4,J11.A5],d}();__reflect(FightMoveTeam.prototype,"FightMoveTeam");var fight,TF39=function(){};__reflect(TF39.prototype,"TF39"),function(t){var e=function(){};t.Report=e,__reflect(e.prototype,"fight.Report");var i=function(){};t.Army=i,__reflect(i.prototype,"fight.Army");var s=function(){};t.Wave=s,__reflect(s.prototype,"fight.Wave");var o=function(){};t.Round=o,__reflect(o.prototype,"fight.Round");var r=function(){};t.Order=r,__reflect(r.prototype,"fight.Order");var n=function(){};t.AtkData=n,__reflect(n.prototype,"fight.AtkData");var a=function(){};t.Damage=a,__reflect(a.prototype,"fight.Damage");var h=function(){};t.pos=h,__reflect(h.prototype,"fight.pos");var p=function(){};t.Effect=p,__reflect(p.prototype,"fight.Effect")}(fight||(fight={}));var FightSceneNpc=function(){function n(){this.objNpc=new FightGameObject}return n.prototype.setData=function(t,e,i,s,o){switch(this.base=t,this.type=i,this.type){case n.npcType.MODEL:var r;if(t.bt=BehaviourType.Stand_d,this.objNpc.setData(t,e.ZR68(),e),o)this.objNpc.clickCallback=o,(r=this.objNpc.getObjView()).touchEnabled=!0,r.touchChildren=!0;else(r=this.objNpc.getObjView()).touchEnabled=!1,r.touchChildren=!1;break;case n.npcType.IMAGE:this.imgTarget||(this.imgTarget=new eui.Image,this.imgTarget.name=t.npcN,e.ZR68().addChild(this.imgTarget),o&&(this.clickCallback=o,this.imgTarget.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCallback,this))),this.imgTarget.x=t.x,this.imgTarget.y=t.y,this.imgTarget.source=t.id}this.targetCallback=s},n.prototype.getTargetPos=function(){return{x:this.base.x,y:this.base.y}},n.prototype.setShowNpc=function(t){if(this.objNpc){var e=this.objNpc.getObjView();e&&(e.visible=t)}},n.prototype.getNpcObj=function(){return this.objNpc},n.prototype.destroy=function(){this.objNpc&&(this.objNpc.destory(),this.objNpc=null),this.imgTarget&&(this.imgTarget.parent.removeChild(this.imgTarget),this.imgTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCallback,this),this.imgTarget=null)},n.prototype.ZI56=function(t){this.targetCallback=t},n.npcName={LEGION_MINE:"LEGION_MINE",LEGION_ROBBER:"LEGION_ROBBER",DAILY_MOSTER_:"DAILY_MOSTER_",CLIMB_MOSTER_:"CLIMB_MOSTER_",CROSSBOSS_NPC:"CROSSBOSS_NPC",CROSSBOSS_BOX_:"CROSSBOSS_BOX_",CROSSFIELD_NPC:"CROSSFIELD_NPC"},n.npcType={MODEL:1,IMAGE:2},n}();__reflect(FightSceneNpc.prototype,"FightSceneNpc");var Dir,FightMovieClip=function(e){function t(){var t=e.call(this)||this;return t.McFrameTime=125,t.image=new eui.Image,t.addChild(t.image),t}return __extends(t,e),t.prototype.setBitmap=function(t,e){this.image.texture=t,this[FightD.AV_ST]&&"spectral"==this[FightD.AV_ST]?this.scaleX=this.scaleY=1:(this.scaleX=e,this.scaleY=Math.abs(e));var i=this.mcData.getKeyFrameData(this.currFrame);this.image.x=i.x,this.image.y=i.y},t.prototype.setMcData=function(t,e){var i=(this.mcData=t).frameRate||8;this.McFrameTime=1e3/i},t.prototype.getMcData=function(){return this.mcData},t.prototype.runAction=function(t,e){if(this.mcData&&!(this.mcData&&this.isEnd&&this.isInit&&"buff"!=this[FightD.AV_ST])&&(this.currFrameTime+=t,this.currFrameTime>=this.McFrameTime))if(this.currFrameTime=0,this.currFrame++,this.currFrame>this.endFrame&&(this.currFrame=this.startFrame,this.currPlayNum++),this.frameCall(),this.totalPlayNum&&this.currPlayNum>=this.totalPlayNum)this.ZS20&&this.ZS20.apply(this.complateActionObj);else{if(!this.currFrame)return;if("wi"==this[FightD.AV_ST]&&this.currAction==Action.Attack){var i=Math.ceil((this.endFrame-this.startFrame)/2)+this.startFrame;switch(this.currDir){case Dir.bl:this.currFrame<i?(this.rotation-=1,this.y-=.5):(this.rotation+=1,this.y+=.5);break;case Dir.br:this.currFrame<i?(this.rotation+=1,this.y-=.5):(this.rotation-=1,this.y+=.5);break;case Dir.tl:this.currFrame<i?(this.rotation+=1.2,this.skewX-=2,this.skewY+=2,this.x+=2,this.y-=2):(this.rotation-=1.2,this.skewX+=2,this.skewY-=2,this.x-=2,this.y+=2);break;case Dir.tr:this.currFrame<i?(this.rotation+=.8,this.skewX+=2,this.skewY-=2,this.x-=2,this.y-=2):(this.rotation-=.8,this.skewX-=2,this.skewY+=2,this.x+=2,this.y+=2)}}var s=this.mcData.getTextureByFrame(this.currFrame);this.setBitmap(s,this.scaleX),this.isInit=!0}},t.prototype.setSuspendAui=function(t){this.isEnd=t},t.prototype.gotoAction=function(t,e,i,s){if(void 0===i&&(i=!1),void 0===s&&(s=0),!this.mcData)return!1;if(this.mcData&&this.isEnd&&this.isInit&&"buff"!=this[FightD.AV_ST])return!1;if(!i&&this.currAction==t&&this.currDir==e)return!1;var o,r;e==Dir.tr?(o="u",r=-1):e==Dir.tl?(o="u",r=1):e==Dir.br?(o="d",r=1):e==Dir.bl&&(o="d",r=-1),t==Action.Attack||t==Action.Attacked||t==Action.Die||t==Action.Act?s=1:this.standRound&&t==Action.Stand&&(s=this.standRound);var n=t;t!=Action.Act&&(n+="_"+o);var a=this.getCurLabel(n);if(a&&this.isEnd)this.currFrameTime=9999;else if(!a&&(null==this.currFrame&&t!=Action.Act&&(a=this.getCurLabel(Action.Stand+"_"+o)),null==a))return!1;this.currAction!=t||i?(this.currFrame=a.frame,this.currFrameTime=0):this.currFrame=a.frame+(this.currFrame-this.startFrame),this.startFrame=a.frame,this.endFrame=a.end,this.currAction=t,this.currDir=e,this.totalPlayNum=s,this.currPlayNum=0,this.rotation=0,this.skewX=0,this.skewY=0,"wi"==this[FightD.AV_ST]&&(this.x=this.temX||this.x,this.y=this.temY||this.y);var h=this.mcData.getTextureByFrame(this.currFrame);return this.setBitmap(h,r),!0},t.prototype.getCurLabel=function(t){for(var e,i=0;i<this.mcData.labels.length;i++)t==this.mcData.labels[i].name&&(e=this.mcData.labels[i]);return e},t.prototype.ZI67=function(t,e){this.ZS20=t,this.complateActionObj=e},t.prototype.ZL35=function(t,e){this.ZW56=t,this.frameCallbackObj=e},t.prototype.frameCall=function(){var t=this.mcData.events[this.currFrame];t&&""!=t&&this.ZW56&&this.ZW56.apply(this.frameCallbackObj)},t.prototype.destroy=function(){egret.Tween.removeTweens(this),delete this[FightD.AV_ST],App.TF56.ZJ66(this),ObjectPool.push(this),this.image.texture=null,this.visible=!0,this.mcData=null,this.currAction=null,this.currDir=null,this.currFrame=null,this.startFrame=null,this.endFrame=null,this.currFrameTime=null,this.totalPlayNum=null,this.currPlayNum=null,this.ZS20=null,this.complateActionObj=null,this.ZW56=null,this.frameCallbackObj=null,this.temX=null,this.temY=null,this.standRound=null,this.isEnd=null,this.isInit=null},t.prototype.ZW73=function(){return this.currAction},t.prototype.getCurrDir=function(){return this.currDir},t}(egret.DisplayObjectContainer);__reflect(FightMovieClip.prototype,"FightMovieClip"),function(t){t[t.tr=0]="tr",t[t.tl=1]="tl",t[t.br=2]="br",t[t.bl=3]="bl"}(Dir||(Dir={}));var Action=function(){function t(){}return t.Stand="stand",t.Move="move",t.Attack="attack",t.Attacked="attacked",t.Die="die",t.Act="act",t}();__reflect(Action.prototype,"Action");var FightGameObject=function(){function t(){this.speed=FightD.FC_WalkSpeed,this.manAbs=FightD.FC_Cood,this.batMoving=!1,this.loadCount=0,this._comps={}}return t.prototype.setBaseData=function(t){if(this.dir=null==t.dir?this.dir:t.dir,this.col=null==t.col?this.col:t.col,this.row=null==t.row?this.row:t.row,this.objType=null==t.objType?this.objType:t.objType,null!=t.x&&null!=t.y)this.x=t.x,this.y=t.y;else if(null==this.x||null==this.y){var e=TG67.FE97(this.col,this.row);this.x=e.x,this.y=e.y}},t.prototype.setData=function(t,e,i){this.setBaseData(t),this.addCount(t),this.standRound=t.sr,this.bt=t.bt||this.bt,this.hp=null==t.hp?this.hp:t.hp,this.thp=null==t.thp?this.thp:t.thp,this.side=null==t.s?this.side:t.s,this.batPos=null==t.p?this.batPos:t.p,this.parentView=e,this.gameView=i,this.action=this.action||Action.Stand,this.temHorsesId=t.h,this.bodyType=null==t.ty?J11.A11:t.ty,this.bodyId=t.id,this.elv=t.elv,this.name=t.n,this.weaponId=t.we,this.horsesId=t.h,this.wingId=t.wi,this.titleId=t.t||t.gi||t.itl,this.magicthingId=t.f||t.ss||t.ass,this.formationId=t.fi||t.aps||t.ps,this.cloudId=t.ics,this.method=t.mth,this.spectral=t.sp,this.aid=t.aid,this.ZW74()},t.prototype.ZI68=function(t){this.completeCallback=t},t.prototype.addCount=function(t){!t.id||null!=this._body&&this._body.id==t.id||this.loadCountHit(),!t.h||null!=this._horses&&this._horses.id==t.h||this.loadCountHit(),!t.wi||null!=this._wing&&this._wing.id==t.wi||this.loadCountHit(),!t.we||null!=this._weapon&&this._weapon.id==t.we||this.loadCountHit()},t.prototype.ZF39=function(t,e){this.wingId=null,this.magicthingId=null,this.formationId=null,this.cloudId=null,this.fullId=t.fs?e.effectId:null,e.firstRankId&&e.firstRankId==t.aid?this.titleId=e.topTitle:this.titleId=null},t.prototype.ZW74=function(){this.objType==P13.A3?this.addComponent(J14.C_SortB):this.addComponent(J14.C_Sort)},t.prototype.ZG79=function(){this.addComponent(J14.C_Control),this.addComponent(J14.C_Camera)},t.prototype.ZI69=function(){this.addComponent(J14.C_RandomDir)},t.prototype.ZW75=function(){this.addComponent(J14.C_Blood)},t.prototype.addPauseComp=function(){this.addComponent(J14.C_Pause)},t.prototype.ZO52=function(){this.ZN95(J14.C_Pause)},t.prototype.ZF40=function(){this.addComponent(J14.C_MoveToTarget)},t.prototype.addMFullComp=function(){this.addComponent(J14.C_Full)},t.prototype.ZS36=function(){this.addComponent(J14.C_Pretend)},t.prototype.addPosComp=function(){this.addComponent(J14.C_MoveToTargetPos)},t.prototype.destory=function(){this.ZO53(),this.ZG61(),this.objType=null,this.bodyType=null,this.dir=null,this.bt=null,this.x=null,this.y=null,this.col=null,this.row=null,this.path=null,this.gameView=null,this.parentView=null,this.side=null,this.batPos=null,this.hp=null,this.thp=null,this.batMoving=!1,this._leadObj=null,this._name=null,this._body=null,this._weapon=null,this._magicthing=null,this._horses=null,this.temHorsesId=null,this._title=null,this._wing=null,this._formation=null,this._cloud=null,this._full=null,this._clickCallback=null,this.targetObj=null,this.targetPos=null,this.completeCallback=null,this.loadCount=0,this.standRound=null},t.prototype.resetData=function(){this.name=null,this.weaponId=null,this.horsesId=null,this.wingId=null,this.titleId=null,this.magicthingId=null,this.formationId=null,this.cloudId=null,this.method=null},t.prototype.loadCountHit=function(t){void 0===t&&(t=!0),t?this.loadCount+=1:(this.loadCount-=1,this.loadCount<=0&&this.completeCallback&&this.completeCallback())},t.prototype.addComponent=function(t){if(!this._comps[t]){var e=ObjectPool.pop(t);e.type=t,e.entity=this,e.start(),FightCompManager.addComponent(e),this._comps[t]=e}},t.prototype.ZG61=function(){for(var t=Object.keys(this._comps);t.length;){var e=t[0];this.ZN95(e),t=Object.keys(this._comps)}},t.prototype.ZN95=function(t){var e=this._comps[t];e&&(FightCompManager.ZN95(e),e.stop(),ObjectPool.push(e),this._comps[t]=null,delete this._comps[t])},t.prototype.getComponent=function(t){return this._comps[t]},Object.defineProperty(t.prototype,"leadObj",{get:function(){return this._leadObj},set:function(t){this._leadObj=t,this._leadObj?(this.ZN95(J14.C_Move),this.addComponent(J14.C_Follow)):(this.ZN95(J14.C_Follow),this.addComponent(J14.C_Move))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._path},set:function(t){this._path=t,this.pathChange=!0,this._path?this.action=Action.Move:this.action=Action.Stand},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aid",{get:function(){return this._aid},set:function(t){this._aid=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elv",{get:function(){return this._elv},set:function(t){this._elv=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){null==t?(this.ZN95(J14.C_Name),this._name=null):null!=this._name&&this._name==t||(this.ZN95(J14.C_Name),this._name=t,this.addComponent(J14.C_Name))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bodyId",{set:function(t){if(null==t)this.ZN95(J14.C_Avatar),this._body=null;else if(null==this._body||this._body.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Avatar),this.resetData(),this._body=e,this.addComponent(J14.C_Avatar)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weaponId",{set:function(t){if(null==t)this.ZN95(J14.C_Weapon),this._weapon=null;else if(null==this._weapon||this._weapon.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Weapon),this._weapon=e,this.addComponent(J14.C_Weapon)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weapon",{get:function(){return this._weapon},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magicthingId",{set:function(t){if(null==t)this.ZN95(J14.C_Magicthing),this._magicthing=null;else if(null==this._magicthing||this._magicthing.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Magicthing),this._magicthing=e,this.addComponent(J14.C_Magicthing)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._full},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullId",{set:function(t){if(null==t)this.ZN95(J14.C_Full),this._full=null;else if(null==this._full||this._full.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Full),this._full=e,this.addComponent(J14.C_Full)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magicthing",{get:function(){return this._magicthing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horsesId",{set:function(t){if(t){if(null==this._horses||this._horses.id!=t){this.temHorsesId=t;var e=O1.getSkin(t);if(null==e)return;this.getComponent(J14.C_Avatar);this.ZN95(J14.C_Horse),this._horses=e,this.addComponent(J14.C_Horse)}}else this.ZN95(J14.C_Horse),this._horses=null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horses",{get:function(){return this._horses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wingId",{set:function(t){if(null==t)this.ZN95(J14.C_Wing),this._wing=null;else if(null==this._wing||this._wing.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Wing),this._wing=e,this.addComponent(J14.C_Wing)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wing",{get:function(){return this._wing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleId",{set:function(t){if(null==t)this.ZN95(J14.C_Title),this._title=null;else if(null==this._title||this._title.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Title),this._title=e,this.addComponent(J14.C_Title)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formationId",{set:function(t){if(null==t)this.ZN95(J14.C_Formation),this._formation=null;else if(null==this._formation||this._formation.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Formation),this._formation=e,this.addComponent(J14.C_Formation)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cloudId",{get:function(){return this._cloud},set:function(t){if(null==t)this.ZN95(J14.C_Cloud),this._cloud=null;else if(null==this._cloud||this._cloud.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Cloud),this._cloud=e,this.addComponent(J14.C_Cloud)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spectral",{get:function(){return this._spectral},set:function(t){if(null==t)this.ZN95(J14.C_Spectral),this._spectral=null;else if(null==this._spectral||this._spectral.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Spectral),this._spectral=e,this.addComponent(J14.C_Spectral)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pretend",{get:function(){return this._pretend},set:function(t){if(null==t)this.ZN95(J14.C_Pretend),this._pretend=null;else if(null==this._pretend||this._pretend.id!=t){var e=O1.getSkin(t);if(null==e)return;this.ZN95(J14.C_Pretend),this._pretend=e,this.addComponent(J14.C_Pretend)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formation",{get:function(){return this._formation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetObj",{get:function(){return this._targetObj},set:function(t){this._targetObj=t,this._targetObj?this.addComponent(J14.C_MoveToTarget):(this.ZN95(J14.C_MoveToTarget),this._targetObj=null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetPos",{get:function(){return this._targetPos},set:function(t){this._targetPos=t,this._targetPos?this.addComponent(J14.C_MoveToTargetPos):(this.ZN95(J14.C_MoveToTargetPos),this._targetPos=null)},enumerable:!0,configurable:!0}),t.prototype.getObjView=function(){var t=this.getComponent(J14.C_Avatar);return t?t.body:null},t.prototype.getScale=function(){return this.objType==P13.A3||this.objType==P13.A5?this.bodyType==J11.A13?1.1:.9:this.objType==P13.A4?this.bodyType==J11.A13?1.1:.9:this.objType!=P13.A6||this.bodyType!=J11.A1&&this.bodyType!=J11.A2?1:1.2},t.prototype.setAtkShowLv=function(t){var e=this.getComponent(J14.C_Avatar);e&&(e.body[FightD.BT_AV_ST]=t?1:0)},t.prototype.addEffect=function(t,e){null==this.effectList&&(this.effectList=[]),this.effectList.push({e:t,c:e})},t.prototype.hasEffect=function(t){var e=!1;if(null==this.effectList)return e;for(var i=this.effectList.length-1;0<=i;i--){if(this.effectList[i].e.eid==t.eid){e=!0;break}}return e},t.prototype.rEf=function(t){if(null!=this.effectList)for(var e=this.effectList.length-1;0<=e;e--){var i=this.effectList[e];if(i.e.eid==t.eid){i.c.stop(),this.effectList.splice(e,1);break}}},t.prototype.ZO53=function(){if(null!=this.effectList)for(var t=this.effectList.length-1;0<=t;t--){this.effectList[t].c.stop(),this.effectList.splice(t,1)}},t.prototype.removeForDie=function(){if(this.weaponId=null,this.horsesId=null,this.wingId=null,this.magicthingId=null,this.titleId=null,this.formationId=null,(this.cloudId=null)!=this.effectList)for(var t=this.effectList.length-1;0<=t;t--){var e=this.effectList[t];switch(e.e.eid){case 104:e.c.stop(),this.effectList.splice(t,1)}}},t.prototype.ZO54=function(t,e){if(this.leadObj)return!1;var i=TG67.FE98(this.x,this.y),s=i.x,o=i.y,r=TG67.FE98(t,e),n=Math.abs(s-r.x),a=Math.abs(o-r.y);return n*n+a*a<=8},Object.defineProperty(t.prototype,"clickCallback",{get:function(){return this._clickCallback},set:function(t){this._clickCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this._method},set:function(t){null==t?(this.ZN95(J14.C_Pretend),this._method=null):null!=this._method&&this._method==t||(this.ZN95(J14.C_Method),this._method=t,this.addComponent(J14.C_Method))},enumerable:!0,configurable:!0}),t}();__reflect(FightGameObject.prototype,"FightGameObject");var TF40=function(){function r(){}return r.FHH37=function(t,e){var i=this.FG17(t,e.p);return e.s=t,e.dir=1===t?Dir.tl:Dir.br,e.x=i.x,e.y=i.y,e.objType=P13.A3,e},r.FI50=function(i){var s=this,o={};return r._robotTeamType.forEach(function(t){var e;switch(t){case J11.A7:e=s.FI51(i);break;case J11.A12:case J11.A6:}e&&(o[t]=e)}),o},r.FG15=function(i){var s={};return r._robotTeamType.forEach(function(t){var e;switch(t){case J11.A7:e={n:i,ty:J11.A7,id:.5<Math.random()?7615:7806,h:12803};break;case J11.A12:case J11.A6:}e&&(s[t]=e)}),s},r.FI51=function(t){var e=r.FG16();switch(e){case K18.init.avatarMaleSkin1:case K18.init.avatarMaleSkin2:case K18.init.avatarMaleSkin3:case K18.init.avatarFemaleSkin1:case K18.init.avatarFemaleSkin2:case K18.init.avatarFemaleSkin3:return{n:t,ty:J11.A7,id:e}}return{n:t,ty:J11.A7,id:e,h:r.FF2(),t:r.ZO55(),f:r.ZE3(),wi:r.ZS37(),we:r.ZL36(e)}},r.FJ79=function(){return{id:r.ZW76()}},r.FF1=function(){return{id:r.ZI70()}},r.FG16=function(){var t=O1.npcSkins[1];return t[Math.floor(Math.random()*t.length)]},r.ZW76=function(){var t=O1.npcSkins[3];return t[Math.floor(Math.random()*t.length)]},r.ZI70=function(){var t=O1.npcSkins[4];return t[Math.floor(Math.random()*t.length)]},r.FF2=function(){var t=O1.npcSkins[5];return t[Math.floor(Math.random()*t.length)]},r.ZL36=function(t){var e;switch(t){case Number(K18.init.avatarMaleMount1.value):e=K18.init.avatarMaleWeapon1.value;break;case Number(K18.init.avatarFemaleMount1.value):e=K18.init.avatarFemaleWeapon1.value;break;case Number(K18.init.avatarMaleMount2.value):e=K18.init.avatarMaleWeapon2.value;break;case Number(K18.init.avatarFemaleMount2.value):e=K18.init.avatarFemaleWeapon2.value;break;case Number(K18.init.avatarMaleMount3.value):e=K18.init.avatarMaleWeapon3.value;break;case Number(K18.init.avatarFemaleMount3.value):e=K18.init.avatarFemaleWeapon3.value;break;default:var i=O1.npcSkins[8];e=i[Math.floor(Math.random()*i.length)]}return e},r.ZO55=function(){var t=O1.npcSkins[2];return t[Math.floor(Math.random()*t.length)]},r.ZE3=function(){var t=O1.npcSkins[7];return t[Math.floor(Math.random()*t.length)]},r.ZS37=function(){var t=O1.npcSkins[6];return t[Math.floor(Math.random()*t.length)]},r.FG17=function(t,e){return FightD.BT_POS[2-t][e-1]},r.getSkill=function(t,e){void 0===e&&(e=1);var i=TG29.getSkill(t),s={id:i.refid,type:FightResType.skill,skillFlow:i.skillflow,attackRage:i.attackrage,skillTarget:i.skilltarget};return s.hitAnchorY=1==e?(s.picture=i.attackeffectu,s.anchorx=i.atkanchorux,s.anchory=i.atkanchoruy,s.hitResName=i.hiteffectu,s.hitAnchorX=i.hitanchorux,i.hitanchoruy):(s.picture=i.attackeffectd,s.anchorx=i.atkanchordx,s.anchory=i.atkanchordy,s.hitResName=i.hiteffectd,s.hitAnchorX=i.hitanchordx,i.hitanchordy),s},r.FJ80=function(t){return{picture:t.hitResName,anchorx:t.hitAnchorX,anchory:t.hitAnchorY,type:FightResType.hit}},r._robotTeamType=[J11.A7,J11.A12,J11.A6],r}();__reflect(TF40.prototype,"TF40");var FightBattleView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.dieCount=0,i.skinName=FightBattleViewSkin,i.director=new FightBattleDirector(i),i.hrGroup.itemRenderer=FightRankItemView,i.dataSource=new eui.ArrayCollection,i.hrGroup.dataProvider=i.dataSource,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbRound.type="v1_fonts_zhandou_zdjm_",this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5118)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5119)),this.btnSkip.label=O3.tr(5120),this.power.text="0"},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){o.prototype.open.call(this),this.forceSet(),this.visible=!0,this.regMsg(),this.grpMain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this);var t=App.CM.gtM(O6.B82);this.uBM(t,P4.S94),App.CM.gtM(O6.B99).isSpFighting&&FightSoundManager.playBg(M9.A1),this.showBgEff(),this.openUI(),this.ZS39(),this.setHandUpObj(!1)},t.prototype.forceSet=function(){var t=this.parent,e=t.numChildren;t.getChildIndex(this)<=0&&t.setChildIndex(this,e-1)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.close=function(){o.prototype.close.call(this),this.unregMsg(),this.grpMain.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),FightSoundManager.playBg(M9.A2),this.closeUI(),this.dataSource.removeAll(),this.setHandUpObj(!0)},t.prototype.showBgEff=function(){this.imgBg.alpha=0,this.imgBlack.alpha=0,egret.Tween.get(this.imgBg).to({alpha:1},400),egret.Tween.get(this.imgBlack).to({alpha:1},400)},t.prototype.regMsg=function(){this.btnSkip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSkip,this)},t.prototype.unregMsg=function(){this.btnSkip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSkip,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TG12&&this.ZE70(t,s)},t.prototype.ZE70=function(t,e){switch(e){case P4.S94:-1!=t.setting.indexOf(L17.A26)?FightD.BT_PLAY_SPEED=FightD.BT_PLAY_SPEED_LIST[1]:FightD.BT_PLAY_SPEED=FightD.BT_PLAY_SPEED_LIST[0]}},t.prototype.openUI=function(){if(this.tReport){var t=App.VM.gOV(O7.I85);if(t){var e=App.VM.gOV(O7.HH56);if(e&&e.parent){var i=e.parent.getChildIndex(e),s=e.parent.getChildIndex(t);i<s&&e.parent.swapChildrenAt(i,s)}switch(App.VM.close(O7.I9),App.VM.close(O7.HH40),App.VM.close(O7.A48),this.tReport.sl){case P15.A3:App.VM.close(O7.I9),App.VM.close(O7.HH40);break;case P15.A2:case P15.A22:var o=App.CM.gtM(O6.B64),r=M14.FJ75(P15.A22).show;App.VM.open(O7.I9,o.ZE94(),r);break;case P15.A4:var n=this.params.did,a=(h=L1.material[n]).name;r=M14.FJ75(P15.A4).show;App.VM.open(O7.I9,a,r);break;case P15.A12:n=this.params.did;var h=L1.sky[n];a=O3.tr(5379,h.name),r=M14.FJ75(P15.A12).show;App.VM.open(O7.I9,a,r);break;case P15.A13:n=this.params.did,h=L1.tongque[n],a=O3.tr(5380,h.name),r=M14.FJ75(P15.A13).show;App.VM.open(O7.I9,a,r);break;case P15.A7:n=this.params.did,h=L1.through[n],a=O3.tr(5381,h.name),r=M14.FJ75(P15.A7).show;App.VM.open(O7.HH40,a,r);break;case P15.A29:a=O3.tr(5382),r=M14.FJ75(P15.A29).show;App.VM.open(O7.I9,a,r);break;case P15.A28:a=O3.tr(5383),r=M14.FJ75(P15.A28).show;App.VM.open(O7.I9,a,r);break;case P15.A35:a=O3.tr(5384),r=M14.FJ75(P15.A35).show;App.VM.open(O7.I9,a,r);break;case P15.A23:a=O3.tr(5385),r=M14.FJ75(P15.A23).show;App.VM.open(O7.I9,a,r);break;case P15.A14:a=O3.tr(5386),r=M14.FJ75(P15.A14).show;App.VM.open(O7.I9,a,r);break;case P15.A24:var p=App.CM.gtM(O6.C23),l=40;null!==p.hisId&&(l=N19.awardData[p.hisId].level);a=O3.tr(5387,l),r=M14.FJ75(P15.A24).show;App.VM.open(O7.I9,a,r);break;case P15.A45:a=O3.tr(5388),r=M14.FJ75(P15.A45).show;App.VM.open(O7.I9,a,r);break;case P15.A8:a=O3.tr(5389),r=M14.FJ75(P15.A8).show;App.VM.open(O7.I9,a,r);break;case P15.A40:a=O3.tr(5390),r=M14.FJ75(P15.A40).show;App.VM.open(O7.I9,a,r);break;case P15.A39:a=O3.tr(5391),r=M14.FJ75(P15.A39).show;App.VM.open(O7.I9,a,r);break;case P15.A17:a=O3.tr(5392),r=M14.FJ75(P15.A17).show;App.VM.open(O7.I9,a,r);break;case P15.A18:a=O3.tr(5393),r=M14.FJ75(P15.A18).show;App.VM.open(O7.I9,a,r);break;case P15.A36:a=O3.tr(5394),r=M14.FJ75(P15.A18).show;App.VM.open(O7.I9,a,r);break;case P15.A37:a=O3.tr(5395),r=M14.FJ75(P15.A37).show;App.VM.open(O7.I9,a,r);break;case P15.A19:a=O3.tr(5396),r=M14.FJ75(P15.A19).show;App.VM.open(O7.I9,a,r);break;case P15.A42:a=O3.tr(5435),r=M14.FJ75(P15.A42).show;App.VM.open(O7.I9,a,r);break;case P15.A1:a=O3.tr(6222),r=M14.FJ75(P15.A1).show;App.VM.open(O7.I9,a,r);break;case P15.A10:a=O3.tr(5575),r=M14.FJ75(P15.A10).show;App.VM.open(O7.I9,a,r);break;case P15.A9:a=O3.tr(5576),r=M14.FJ75(P15.A9).show;App.VM.open(O7.I9,a,r);break;case P15.A46:a=O3.tr(6158),r=M14.FJ75(P15.A46).show;App.VM.open(O7.I9,a,r);break;case P15.A11:a=O3.tr(6314),r=M14.FJ75(P15.A11).show;App.VM.open(O7.I9,a,r);break;case P15.A31:a=O3.tr(6314),r=M14.FJ75(P15.A31).show;App.VM.open(O7.I9,a,r);break;case P15.A47:a=O3.tr(6493),r=M14.FJ75(P15.A47).show;App.VM.open(O7.I9,a,r);break;case P15.A43:App.VM.open(O7.A48);break;case P15.A32:a=O3.tr(6875),r=M14.FJ75(P15.A32).show;App.VM.open(O7.I9,a,r);break;case P15.A21:a=O3.tr(7336),r=M14.FJ75(P15.A21).show;App.VM.open(O7.I9,a,r);break;case P15.A33:a=O3.tr(7581),r=M14.FJ75(P15.A33).show;App.VM.open(O7.I9,a,r);break;case P15.A20:a=O3.tr(7335),r=M14.FJ75(P15.A20).show;App.VM.open(O7.I9,a,r);break;case P15.A25:a=O3.tr(7469),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A41:a=O3.tr(7635),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A44:a=O3.tr(7876),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A5:a=O3.tr(7980),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A34:a=O3.tr(8808),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A38:a=O3.tr(8034),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A26:case P15.A6:a=O3.tr(8195),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.A27:a=O3.tr(8783),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r);break;case P15.HeroBattle:case P15.HeroBattleReplay:a=O3.tr(8829),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.HeroBattleFight,this.tReport),App.VM.open(O7.I9,a,r);break;case P15.SurvivalChallenge:a=O3.tr(8982),r=M14.FJ75(this.tReport.sl).show;App.VM.open(O7.I9,a,r)}}}},t.prototype.closeUI=function(){if(this.tReport&&this.tReport.sl)switch(this.tReport.sl){case P15.A3:break;case P15.A22:case P15.A4:case P15.A12:case P15.A13:case P15.A29:case P15.A28:case P15.A35:case P15.A23:case P15.A24:case P15.A45:case P15.A39:case P15.A40:case P15.A17:case P15.A18:case P15.A37:case P15.A8:case P15.A36:case P15.A19:case P15.A10:case P15.A9:case P15.A11:case P15.A31:case P15.A2:case P15.A32:case P15.A20:case P15.A21:case P15.A33:case P15.A25:case P15.A41:case P15.A44:case P15.A5:case P15.A34:case P15.A38:case P15.A26:case P15.A6:case P15.A27:case P15.SurvivalChallenge:case P15.A14:App.VM.close(O7.I9);break;case P15.A7:App.VM.close(O7.HH40);break;case P15.HeroBattle:case P15.HeroBattleReplay:App.VM.close(O7.I9),App.VM.close(O7.HeroBattleFight);break;case P15.A43:App.VM.close(O7.A48)}},t.prototype.GX59=function(t,e,i,s){this.hasDestroy=!1,FightD.BT_PLAYING=!0,this.tReport=t,this.params=e,this.finishedCallback=i,this.callbackObj=s,this.setMapName(this.params);var o=this.tReport?this.tReport.sl:1;this.updateState(o),this.skipData=M14.FJ75(o);var r=this.skipData?this.skipData.turnlimit:FightD.BT_ROUND_LIMIT;if(P15.A22===this.tReport.sl||P15.A2===this.tReport.sl){var n=J15.FK56(this.params.oid);n&&n.talk?this.director.setBossTalk(n.talk):this.director.setBossTalk("")}else this.director.setBossTalk("");this.director.setReport(this.tReport,r,{sideAid:e.sideAid}),this.ZW77(r),egret.Tween.get(this).wait(1e3).call(this.showSkipBtn,this),this.upadteViews(),this.openUI(),this.resetBattle()},t.prototype.updateState=function(t){switch(t){case P15.A29:this.currentState="bossblood";break;case P15.A31:case P15.A17:case P15.A10:this.currentState="crossboss";break;case P15.A27:case P15.A26:case P15.A20:this.currentState="crossteam";break;default:this.currentState="normal"}},t.prototype.upadteViews=function(){},t.prototype.resetBattle=function(){this.alpha=1,this.btnSkip.visible=!1,this.dieCount=0,this.setCurRound(1),this.tReport.sl==P15.A26&&this.ZE4(0,0,UltimateBattle.Utils.FL96())},t.prototype.setMapName=function(t){t&&(this.grpBg.setMapName(t.mapName),this.grpBg.x=this.width/2-(t.x||0),this.grpBg.y=this.height/2-(t.y||0),P7.FJ17()&&(this.grpBg.visible=!1))},t.prototype.setCurRound=function(t){this.curRound=t,this.totalRound&&(this.lbRound.text=this.curRound+"i"+this.totalRound),this.showSkipBtn();var e=App.VM.gOV(O7.HH40);e&&this.tReport.sl==P15.A7&&e.ZM95((11-this.curRound)/10*100);var i=App.VM.gOV(O7.A48);i&&i.set(void 0,this.curRound);var s=App.VM.gOV(O7.HeroBattleFight);s&&s.set(this.director.curWaveIndex)},t.prototype.roleDie=function(t,e){if(e){this.dieCount+=1;var i=App.VM.gOV(O7.A48);i&&i.set(this.dieCount)}},t.prototype.ZW77=function(t){this.totalRound=t,this.totalRound?this.grpRound.visible=!0:this.grpRound.visible=!1},t.prototype.ZO46=function(t,e){this.pbarBlood&&(this.pbarBlood.maximum=e,this.pbarBlood.value=t)},t.prototype.ZE4=function(t,e,i){void 0===i&&(i=0),this.power&&(this.power.text=i+(e-t)+"")},t.prototype.ZE5=function(t,e){var i=App.CM.gtM(O6.B16),s=i.crossBossHp;if(this.oldHp&&t>=this.oldHp)s.drhp=t-this.oldHp;else if(this.isParInit){var o=this.oldHp-t;if(o){p=t/s.thp;var r=i.overNum[i.overNum.length-1];if(i.overNum.length&&p<r){var n=s.thp*r;s.dthp||(this.isAct=!0,i.overNum.splice(i.overNum.length-1,1),s.dthp=s.thp*G9.shieldHp,s.drhp=s.thp*G9.shieldHp),s.drhp=s.drhp-(n-t),this.pbarHp.value=n}else if(s.dthp)if(s.drhp>=o)s.drhp-=o;else{var a=0;i.huDunNum&&(a+=i.huDunNum),this.isAct&&(a+=s.thp*G9.shieldHp),this.pbarHp.value=t+a+o-s.drhp,s.dthp=0,s.drhp=0}else{var h=0;i.huDunNum&&(h+=i.huDunNum),this.isAct&&(h+=s.thp*G9.shieldHp),this.pbarHp.value=t+h}this.oldHp=this.pbarHp.value}}else{this.isParInit=!0,this.oldHp=s.rhp,this.pbarHp&&(this.pbarHp.maximum=s.thp,this.pbarHp.value=s.rhp);for(var p=s.rhp/s.thp,l=i.overNum.length-1;0<=l&&!(p>i.overNum[l]);l--)i.overNum.splice(l,1)}0<s.drhp?(this.grpShield.visible=!0,this.pbarShield.value=s.drhp,this.pbarShield.maximum=s.dthp,this.pbarShield.lbNum.text=(100*s.drhp/s.dthp).toFixed(2)+"%"):this.grpShield.visible=!1},t.prototype.ZD7=function(t,e){var i=App.CM.gtM(O6.A99),s=i.crossBossHp;if(this.oldHp&&t>=this.oldHp)s.drhp-=1;else{if(this.isParInit){o=t/s.thp,a=i.overNum[i.overNum.length-1];if(i.overNum.length&&o<=a){h=s.thp*a;s.drhp||(i.overNum.splice(i.overNum.length-1,1),s.dthp=i.bossData.shield,s.drhp=i.bossData.shield),this.pbarHp.value=h}else 0<s.drhp?s.drhp-=1:(this.pbarHp.value=t,s.dthp=0,s.drhp=0)}else{this.isParInit=!0,this.oldHp=s.rhp,this.pbarHp&&(this.pbarHp.maximum=s.thp,this.pbarHp.value=s.rhp);for(var o=s.rhp/s.thp,r=i.overNum.length-1;0<=r&&!(o>i.overNum[r]);r--)i.overNum.splice(r,1);var n=t/s.thp,a=i.overNum[i.overNum.length-1];if(i.overNum.length&&n<=a){var h=s.thp*a;s.dthp||(i.overNum.splice(i.overNum.length-1,1),s.dthp=i.bossData.shield,s.drhp=i.bossData.shield),this.pbarHp.value=h}}this.oldHp=this.pbarHp.value}0<s.drhp?(this.grpShield.visible=!0,this.pbarShield.value=s.drhp,this.pbarShield.maximum=s.dthp,this.pbarShield.lbNum.text=(100*s.drhp/s.dthp).toFixed(2)+"%"):(this.pbarShield.value=0,this.grpShield.visible=!1)},t.prototype.ZD8=function(t,e){this.grpShield.visible=!1,this.pbarHp&&(this.pbarHp.maximum=e,this.pbarHp.value=t)},t.prototype.updateBossHr=function(t){var e=THH25.FJ40();t&&0<t&&THH25.addHarm(t),e&&(this.dataSource.replaceAll(e.hr),this.myHrRank&&(this.myHrRank.setName(e.me.name),this.myHrRank.setScore(e.me.harm),this.myHrRank.setRank(e.me.rank)))},t.prototype.showSkipBtn=function(){!this.btnSkip.visible&&this.skipData&&this.params&&(this.params.skip&&this.curRound>=this.params.skip||this.curRound>=this.skipData.skipturn)&&(this.btnSkip.alpha=0,this.btnSkip.visible=!0,this.sendOverMsg(),egret.Tween.get(this.btnSkip).to({alpha:1},250))},t.prototype.shockGround=function(){this.shockView(this.grpBg),this.shockView(this.imgBlack)},t.prototype.shockView=function(t){egret.Tween.get(t).to({x:t.x+3,y:t.y+2},33).to({x:t.x+1,y:t.y+1},33).to({x:t.x-3,y:t.y-1},67).to({x:t.x-2,y:t.y},33).to({x:t.x+3,y:t.y+4},33).to({x:t.x-1,y:t.y},67).to({x:t.x-4,y:t.y-2},33).to({x:t.x,y:t.y},34).call(function(){egret.Tween.removeTweens(t)})},t.prototype.ZR68=function(){return this.grpGround},t.prototype.ZV27=function(){return this.grpSkill},t.prototype.ZW78=function(){return this.grpToast},t.prototype.onClickSkip=function(){switch(this.tReport.sl){case P15.A7:if(1==this.params.skip&&!TG57.FHH17())return void P18.sDP(O3.tr(5673));break;case P15.A29:if(!THH25.FG94())return}this.sendOverMsg(),egret.Tween.removeTweens(this),this.alpha=0,this.endPlay()},t.prototype.sendOverMsg=function(){App.CM.gtM(O6.C6).isTower&&App.CM.apF(O6.C6,N5.A15)},t.prototype.ZS38=function(){this.sendOverMsg(),egret.Tween.get(this).to({alpha:0},500).call(function(){this.endPlay(!0)},this),this.dealResult(!0)},t.prototype.endPlay=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.hasDestroy||(App.CM.apF(O6.B99,N1.A1),this.hasDestroy=!0,this.closeUI(),this.stopTweens(),this.director.destroy(),this.ZW79(),this.visible=!1,t||this.dealResult(!1,e),this.oldHp=null,this.isAct=null,this.isParInit=null,this.skipData=null,this.curRound=null,this.tReport=null)},t.prototype.ZI71=function(t){FightD.BT_PLAYING=!1,App.CM.apF(O6.B99,N1.A6),this.finishedCallback&&this.finishedCallback.call(this.callbackObj,this.params,t),this.params=null,this.finishedCallback=null,this.callbackObj=null},t.prototype.stopTweens=function(){egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.grpBg),egret.Tween.removeTweens(this.imgBlack),egret.Tween.removeTweens(this.imgBg)},t.prototype.dealResult=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i,s=this.tReport&&this.tReport.v,o=0;if(this.params&&(this.params.did&&(o=TG57.FJ71(this.params.did)),i={rewards:this.params.rewards,help:this.params.help,needResult:this.params.needResult,closeCallback:this.ZI71,closeCallbackObj:this,isNotClose:e,star:this.params.star||o,type:this.params.type,extra:this.params.extra}),i&&(i.needResult?this.apF(N1.A9,s,i):(this.params.rewards&&(this.params.type==P15.A3?P5.sIs(this.params.rewards,!1):P5.sIs(this.params.rewards)),t?egret.Tween.get(this).wait(500).call(function(){this.ZI71(!0)},this):this.ZI71(!0)),i.type!=P15.A3)){var r=App.CM.gtM(O6.B27);r.fightFinishId&&0<r.fightFinishId.length&&TE55.FB17(r.fightFinishId)}var n=App.VM.gOV(O7.I76);n&&n.ZS42()},t.prototype.ZW79=function(){this.grpGround.removeChildren(),this.grpSkill.removeChildren(),this.grpToast.removeChildren(),FightRes.destroyRes(),App.THH33.destory()},t.prototype.ZL37=function(t){var e=this;egret.Tween.get(this.hpskinGp).to({bottom:t},300).wait(50).call(function(){e.ZS39()})},t.prototype.ZS39=function(){var t=App.VM.gOV(O7.I85);if(t&&t.chartGroup.height==ChatView.maxHeig)this.hpskinGp.bottom=490;else{var e=P7.FJ17();this.hpskinGp.bottom=e?240:360}},t.prototype.setHandUpObj=function(t){if(P7.FJ17()){var e=App.VM.gOV(O7.I76);if(e)e.ZR68().visible=t}},t}(BaseEuiView);__reflect(FightBattleView.prototype,"FightBattleView");var FightClimbView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sceneType=I4.A10,i._robotNames={},i.npcList={},i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.grpMap=new FightMapView,this.addChild(this.grpMap),this.grpGround=new eui.Group,this.grpGround.width=1080,this.grpGround.height=1800,this.addChild(this.grpGround),this.mapData=new FightMapData;var t=App.CM.gtM(O6.C12);t.activeHero&&P5.sIs(t.activeHero)},t.prototype.setChallenge=function(t){this.challenge&&(this.challenge.setBoo=t)},t.prototype.open=function(){if(o.prototype.open.call(this),this.grpMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),null==this.showMapName){var t=App.CM.gtM(O6.B64).FL64();this.setSceneData(t.resource)}this.openSceneUI()},t.prototype.close=function(){o.prototype.close.call(this),this.closeSceneUI(),this.grpMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),App.CM.gtM(O6.B99).fightSceneType=I4.A8},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.ZS41(),this.removeAllNpc()},t.prototype.setSceneData=function(t){null!=t&&(this.curMapName=t,this.loadMapRes())},t.prototype.loadMapRes=function(){this.isInit()&&null!=this.curMapName&&(this.showMapName&&this.curMapName==this.showMapName?this.ZL38(!0):(this.showMapName?(FightRes.ZO48(this.curMapName,this.ZI4.bind(this)),this.grpMap.setMapName(this.curMapName)):this.grpMap.setMapName(this.curMapName,this.ZD89.bind(this),mapWH.SET_1086_450),this.showMapName=this.curMapName))},t.prototype.ZD89=function(){FightRes.ZO48(this.curMapName,this.ZI4.bind(this))},t.prototype.ZI4=function(){this.mapData.setData(RES.getRes(FightRes.getMapResKey(this.curMapName))),this.grpMap.width=this.grpGround.width=this.mapData.getMapWidth(),this.grpMap.height=this.grpGround.height=this.mapData.getMapHeight(),this.grpMap.x=0,this.grpMap.y=0,this.grpGround.x=0,this.grpGround.y=0,this.ZL38(null,!0)},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.getMapName=function(){return this.curMapName},t.prototype.ZO56=function(){var t=this.ZR68();return{x:this.width/2-t.x,y:this.height/2-t.y}},t.prototype.getBgMap=function(){return this.grpMap},t.prototype.ZR68=function(){return this.grpGround},t.prototype.FK54=function(){return this.mapData},t.prototype.ZO57=function(t){this.sceneType!=t&&(this.closeSceneUI(),this.sceneType=t,this.openSceneUI(),App.CM.gtM(O6.B99).fightSceneType=this.sceneType);this.grpGround.name=N1.A13},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.openSceneUI=function(){App.VM.isOpen(O7.I64)||(this.ZK39(),App.CM.apF(O6.C6,N5.A18),App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.C10,O16.A5),App.CM.apF(O6.B63,K7.A8),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9))},t.prototype.closeSceneUI=function(){App.CM.apF(O6.C6,N5.A11)},t.prototype.ZL38=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!0),!t||this.sceneType!=this.showSceneType){this.showSceneType=this.sceneType,this.ZS41();var i=App.CM.gtM(O6.C6);this.ZG80(i),this.ZD9(i.playerObjData)}},t.prototype.hideRobots=function(){if(this._gameObjs&&0!=Object.keys(this._gameObjs).length){var t=-1!==App.CM.gtM(O6.B82).setting.indexOf(L17.A24);for(var e in this._gameObjs){var i=this._gameObjs[e].teams;if(i&&0!=i.length)for(var s=0;s<i.length;s++){i[s].getComponent(J14.C_Avatar).body.visible=!t}}}},t.prototype.ZW80=function(){var t=!1;if(null==this._selfTeam){var e=P13.A4,i=this.mapData.ZW59();this._selfTeam=new FightMoveTeam(e,Dir.tl,i.y,i.x),t=!0}var s=App.CM.gtM(O6.B82);if(this._selfTeam.setTeamData(s.avatarInfo.us,this,!1),t){var o=this._selfTeam.FG91(J11.A7);o.ZG79(),o.ZI69()}},t.prototype.ZG80=function(t){var e=!1;if(null==this._selfTeam){var i=P13.A4,s=TG67.FE98(t.myPlayerObjData.sx,t.myPlayerObjData.sy);this._selfTeam=new FightMoveTeam(i,Dir.tl,s.y,s.x),e=!0}var o={};(o.effectId=parseInt(M16.gIV("fightEffect")),o.firstRankId=t.firstRankId,o.topTitle=parseInt(M16.gIV("topTitle")),this._selfTeam.setTeamData(t.myPlayerObjData,this,!1,void 0,o),e)&&this._selfTeam.FG91(J11.A7).ZG79()},t.prototype.setMyTeamPos=function(){if(this._selfTeam){var t=this._selfTeam.FG91(J11.A7);if(t){App.CM.gtM(O6.C6);if(!t.x||!t.y)return;App.CM.apF(O6.C6,N5.A29,t.x,t.y)}}},t.prototype.ZD9=function(n){var a=this;for(var t in null==this._gameObjs&&(this._gameObjs={}),this._gameObjs){var e=this._gameObjs[t];null==n[t]&&(this._gameObjs[t]=null,delete this._gameObjs[t],e.destroy())}var h=!1,i=function(t){var e=n[t],i=p._gameObjs[t];if(h=!1,null==i){var s=TG67.FE98(e.sx,e.sy);i=new FightMoveTeam(P13.A6,Dir.tl,s.y,s.x),p._gameObjs[t]=i,h=!0}var o={},r=App.CM.gtM(O6.C6);if(o.effectId=parseInt(M16.gIV("fightEffect")),o.firstRankId=r.firstRankId,o.topTitle=parseInt(M16.gIV("topTitle")),i.setTeamData(e,p,!1,function(){var t=i.teams[0];a.challenge.x=t.x,a.challenge.y=t.y+6,a.challenge.setHander(function(){App.CM.apF(O6.C6,N5.A27,t.aid)})},o),e.ex){s={x:e.ex,y:e.ey};i.ZO40(s)}h&&i.FG91(J11.A7).addPosComp()},p=this;for(var t in n)i(t)},t.prototype.createNpc=function(t,e,i,s,o,r,n){var a;void 0===n&&(n=null),this.npcList[i]?a=this.npcList[i]:(a=new FightSceneNpc,this.npcList[i]=a);var h={id:t,objType:P13.A6,dir:Dir.br,x:e.x,y:e.y,n:n,ty:e.ty?e.ty:null,npcN:i,bt:BehaviourType.Stand_d};a.setData(h,this,s,o,r)},t.prototype.isNpcInPos=function(t){for(var e in this.npcList){var i=this.npcList[e].getTargetPos();if(i.x==t.x&&i.y==t.y)return!0}return!1},t.prototype.getSceneNpc=function(t){return this.npcList[t]},t.prototype.ZS40=function(n){for(var a=this,h=n.npcs,p=[],t=function(t){var e=h[t-1],i=M16.FL59(n.tierNum),s=N17.FI2(i),o={x:e.x,y:e.y},r=FightSceneNpc.npcName.CLIMB_MOSTER_+t+s.id;p.push(r);l.createNpc(s.image,o,r,FightSceneNpc.npcType.MODEL,void 0,function(){a.challenge.x=e.x,a.challenge.y=e.y+2,a.challenge.setHander(function(){App.CM.apF(O6.C6,N5.A25,e.id)})},O3.tr(5815))},l=this,e=1;e<=h.length;e++)t(e);for(var i in this.npcList)-1==p.indexOf(i)&&this.ZO58(i)},t.prototype.getRobotName=function(){var t=K18.FD58();return this._robotNames[t]?this.getRobotName():(this._robotNames[t]=1,t)},t.prototype.ZS41=function(){this.ZL39(),this._selfTeam&&(this._selfTeam.destroy(),this._selfTeam=null)},t.prototype.removeAllNpc=function(){for(var t in this.npcList)this.ZO58(t);this.npcList={}},t.prototype.ZL39=function(){var i=this;this._gameObjs&&Object.keys(this._gameObjs).forEach(function(t){var e=i._gameObjs[t];e&&e.destroy(),i._gameObjs[t]=null,delete i._gameObjs[t]});this._robotNames&&Object.keys(this._robotNames).forEach(function(t){i._robotNames[t]=null,delete i._robotNames[t]})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TG12?this.ZE70(t,s):t instanceof TG65?this.ZG47(t,s):t instanceof TG10||t instanceof TG51&&this.ZG57(t,s)},t.prototype.ZG47=function(t,e){switch(e){case FightD.FC_Update_UI:this.openSceneUI();break;case FightD.FC_Close_UI:this.closeSceneUI(),App.VM.isOpen(O7.B83)&&App.CM.apF(O6.B89,L11.A56,!0)}},t.prototype.ZE70=function(t,e){switch(e){case P4.J63:this.ZW80();break;case P4.S94:FightSoundManager.ZO51(),this.hideRobots()}},t.prototype.ZG57=function(t,e){switch(e){case P4.X32:this.ZC49(),this.ZS41(),this.removeAllNpc();var i=M16.gIV("mapId");this.setSceneData(i),this.ZO57(I4.A10),this.challenge||(this.challenge=new ClimbChallenge,this.challenge.name=N1.A12,this.grpGround.addChild(this.challenge)),this.ZD9(t.playerObjData),this.ZG80(t),this.ZS40(t);break;case P4.X34:if(this.removeAllNpc(),this.ZS41(),this.ZO57(I4.A8),this.challenge){var s=this.grpGround.getChildByName(N1.A12);s&&this.grpGround.removeChild(s),this.challenge=null}break;case P4.Q48:case P4.W77:case P4.W78:this.ZG80(t),this.ZD9(t.playerObjData);break;case P4.Q47:this.removeAllNpc(),this.ZS40(t);break;case P4.W2:this.removeAllNpc(),t.isUpdate&&(this.ZL39(),t.isUpdate=!1),this.ZS40(t),this.ZD9(t.playerObjData);break;case P4.Q48:case P4.W4:this.removeAllNpc(),t.isUpdate&&(this.ZL39(),t.isUpdate=!1),this.ZS40(t),this.ZD9(t.playerObjData)}},t.prototype.ZC49=function(){this._selfTeam&&this._selfTeam.ZO39(null,null)},t.prototype.ZO58=function(t){var e=this.getSceneNpc(t);e&&(this._selfTeam&&this._selfTeam.ZW61()==t&&this.ZC49(),e.destroy(),e=null,delete this.npcList[t])},t.prototype.getSceneType=function(){return this.sceneType},t}(BaseEuiView);__reflect(FightClimbView.prototype,"FightClimbView");var FightCrossBossView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sceneType=I4.A4,i._robotNames={},i.npcList={},i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.grpMap=new FightMapView,this.addChild(this.grpMap),this.grpGround=new eui.Group,this.grpGround.width=1080,this.grpGround.height=1800,this.addChild(this.grpGround),this.mapData=new FightMapData;var t=App.CM.gtM(O6.C12);t.activeHero&&P5.sIs(t.activeHero)},t.prototype.setChallenge=function(t){this.challenge&&(this.challenge.setBoo=t)},t.prototype.open=function(){o.prototype.open.call(this),this.grpMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this);var t=App.CM.gtM(O6.B16),e=App.VM.gOV(O7.C35),i=App.CM.gtM(O6.B89);t.isTower||!e||i.myLegion||t.notify(P4.T82),this.openSceneUI()},t.prototype.close=function(){o.prototype.close.call(this),this.closeSceneUI(),this.grpMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),App.CM.gtM(O6.B99).fightSceneType=I4.A8,egret.Tween.removeTweens(this)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.ZS41(),this.removeAllNpc()},t.prototype.setSceneData=function(t){null!=t&&(this.curMapName=t,this.loadMapRes())},t.prototype.loadMapRes=function(){this.isInit()&&null!=this.curMapName&&(this.showMapName&&this.curMapName==this.showMapName?this.ZL38(!0):(this.showMapName?(FightRes.ZO48(this.curMapName,this.ZI4.bind(this)),this.grpMap.setMapName(this.curMapName)):this.grpMap.setMapName(this.curMapName,this.ZD89.bind(this),mapWH.SET_830_450),this.showMapName=this.curMapName))},t.prototype.ZD89=function(){FightRes.ZO48(this.curMapName,this.ZI4.bind(this))},t.prototype.ZI4=function(){this.mapData.setData(RES.getRes(FightRes.getMapResKey(this.curMapName))),this.grpMap.width=this.grpGround.width=this.mapData.getMapWidth(),this.grpMap.height=this.grpGround.height=this.mapData.getMapHeight(),this.grpMap.x=0,this.grpMap.y=0,this.grpGround.x=0,this.grpGround.y=0,this.ZL38(null,!0)},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.getMapName=function(){return this.curMapName},t.prototype.ZO56=function(){var t=this.ZR68();return{x:this.width/2-t.x,y:this.height/2-t.y}},t.prototype.getBgMap=function(){return this.grpMap},t.prototype.ZR68=function(){return this.grpGround},t.prototype.FK54=function(){return this.mapData},t.prototype.ZO57=function(t){this.sceneType!=t&&(this.closeSceneUI(),this.sceneType=t,this.openSceneUI(),App.CM.gtM(O6.B99).fightSceneType=this.sceneType);this.grpGround.name=N1.A13},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.openSceneUI=function(){if(!App.VM.isOpen(O7.I64)){this.ZK39(),App.CM.apF(O6.B16,G13.A25),App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.C10,O16.A5),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9);var t=App.CM.gtM(O6.B16),e=App.CM.gtM(O6.B99);t.lefeCD&&!e.isFighting?App.CM.apF(O6.B16,G13.A2):App.CM.apF(O6.B16,G13.A46,!1),t.openBoxCD&&App.CM.apF(O6.B16,G13.A35)}},t.prototype.closeSceneUI=function(){App.CM.apF(O6.B16,G13.A15)},t.prototype.ZL38=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!0),!t||this.sceneType!=this.showSceneType){this.showSceneType=this.sceneType,this.ZS41();var i=App.CM.gtM(O6.B16);this.ZC50(i)}},t.prototype.hideRobots=function(){if(this._gameObjs&&0!=Object.keys(this._gameObjs).length){var t=-1!==App.CM.gtM(O6.B82).setting.indexOf(L17.A24);for(var e in this._gameObjs){var i=this._gameObjs[e].teams;if(i&&0!=i.length)for(var s=0;s<i.length;s++){i[s].getComponent(J14.C_Avatar).body.visible=!t}}}},t.prototype.ZW80=function(){var t=!1;if(null==this._selfTeam){var e=P13.A4,i=this.mapData.ZW59();this._selfTeam=new FightMoveTeam(e,Dir.tl,i.y,i.x),t=!0}var s=App.CM.gtM(O6.B82);if(this._selfTeam.setTeamData(s.avatarInfo.us,this,!1),t){var o=this._selfTeam.FG91(J11.A7);o.ZG79(),o.ZI69()}},t.prototype.ZC50=function(t){var e=!1;if(null==this._selfTeam){var i=P13.A4,s=TG67.FE98(t.myPlayerObjData.sx,t.myPlayerObjData.sy);this._selfTeam=new FightMoveTeam(i,Dir.tl,s.y,s.x),e=!0}var o={};(o.effectId=parseInt(M16.gIV("fightEffect")),this._selfTeam.setTeamData(t.myPlayerObjData,this,!1,void 0,o),e)&&this._selfTeam.FG91(J11.A7).ZG79()},t.prototype.ZI72=function(){if(this._selfTeam){var t=this._selfTeam.FG91(J11.A7);t&&App.CM.apF(O6.B16,G13.A33,t.x,t.y)}},t.prototype.ZB4=function(a){var h=this;for(var t in null==this._gameObjs&&(this._gameObjs={}),this._gameObjs){var e=this._gameObjs[t];null==a[t]&&(this._gameObjs[t]=null,delete this._gameObjs[t],e.destroy())}var p=!1,i=function(t){var e=a[t],i=l._gameObjs[t];if(p=!1,null==i){var s=TG67.FE98(e.sx,e.sy);i=new FightMoveTeam(P13.A6,Dir.tl,s.y,s.x),l._gameObjs[t]=i,p=!0}var o={};o.effectId=parseInt(M16.gIV("fightEffect")),i.setTeamData(e,l,!1,function(){if(App.CM.gtM(O6.B16).activityState){h.setChallenge(!1);var t=i.teams[0];App.CM.apF(O6.B16,G13.A11,t.aid)}},o);var r=i.teams[0].getComponent(J14.C_Avatar),n=App.CM.gtM(O6.B16);if(r.body.visible=!n.isShowMy,e.ex){s={x:e.ex,y:e.ey};i.ZO40(s)}p&&i.FG91(J11.A7).addPosComp()},l=this;for(var t in a)i(t)},t.prototype.createNpc=function(t,e,i,s,o,r,n){var a;void 0===n&&(n=null),this.npcList[i]?a=this.npcList[i]:(a=new FightSceneNpc,this.npcList[i]=a);var h={id:t,objType:P13.A6,dir:Dir.br,x:e.x,y:e.y,n:n,ty:e.ty?e.ty:null,npcN:i,bt:BehaviourType.Stand_d};a.setData(h,this,s,o,r)},t.prototype.isNpcInPos=function(t){for(var e in this.npcList){var i=this.npcList[e].getTargetPos();if(i.x==t.x&&i.y==t.y)return!0}return!1},t.prototype.getSceneNpc=function(t){return this.npcList[t]},t.prototype.ZG81=function(t){var r=this;switch(t){case 1:var e=G9.gIV("bossId"),i=N17.FF93(parseInt(e)),s=FightSceneNpc.npcName.CROSSBOSS_NPC,o=P7.copyTab(G9.bossPos);o.ty=J11.A3;0<App.CM.gtM(O6.B16).bossHp.rhp&&(this.createNpc(i.image,o,s,FightSceneNpc.npcType.MODEL,function(){var t=App.CM.gtM(O6.B16);if(t.activityState&&!t.isAutoLife){r.setChallenge(!0);var e=G9.getScale();r.challenge.x=o.x+80*(e-1),r.challenge.y=o.y+30,r.challenge.setHander(function(){App.CM.apF(O6.B16,G13.A31)})}else r.setChallenge(!1)}),this.npcList[s]);break;case 2:for(var n=App.CM.gtM(O6.B16).boxList,a=function(t){var i=n[t-1],e={x:i.x,y:i.y},s=FightSceneNpc.npcName.CROSSBOSS_BOX_+i.id,o=G9.gIV("boxResources");h.createNpc(o,e,s,FightSceneNpc.npcType.IMAGE,function(){App.CM.apF(O6.B16,G13.A29,i.id)},function(){var t=App.CM.gtM(O6.B16);t.boxName=FightSceneNpc.npcName.CROSSBOSS_BOX_+i.id;var e=r.getSceneNpc(t.boxName);r._selfTeam.ZO39(e,t.boxName)})},h=this,p=1;p<=n.length;p++)a(p)}},t.prototype.ZO59=function(t,e){var i;if(t)i=t;else for(var s=void 0;i=this.mapData.ZS27(),s=TG67.FE98(i.x,i.y),!this.mapData.ZW60(s.x,s.y)||e&&Math.sqrt(e.x-i.x)+Math.sqrt(e.y-i.y)<=10;);return i},t.prototype.ZS41=function(){this.ZL39(),this._selfTeam&&(this._selfTeam.destroy(),this._selfTeam=null)},t.prototype.removeAllNpc=function(){for(var t in this.npcList)this.ZO58(t);this.npcList={}},t.prototype.ZL39=function(){var i=this;this._gameObjs&&Object.keys(this._gameObjs).forEach(function(t){var e=i._gameObjs[t];e&&e.destroy(),i._gameObjs[t]=null,delete i._gameObjs[t]});this._robotNames&&Object.keys(this._robotNames).forEach(function(t){i._robotNames[t]=null,delete i._robotNames[t]})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TG12?this.ZE70(t,s):t instanceof TG65?this.ZG47(t,s):t instanceof TE64&&this.ZC51(t,s)},t.prototype.ZG47=function(t,e){switch(e){case FightD.FC_Update_UI:this.openSceneUI();break;case FightD.FC_Close_UI:this.closeSceneUI(),App.VM.isOpen(O7.B83)&&App.CM.apF(O6.B89,L11.A56,!0)}},t.prototype.ZE70=function(t,e){switch(e){case P4.J63:this.ZW80();break;case P4.S94:FightSoundManager.ZO51(),this.hideRobots();break;default:var i=App.CM.gtM(O6.B99);if(i.isFighting&&i.fightType!=P15.A3)return}},t.prototype.ZW81=function(){for(var t in this.npcList)t!=FightSceneNpc.npcName.CROSSBOSS_NPC&&this.ZO58(t)},t.prototype.ZC51=function(t,e){var i=this;switch(e){case P4.T80:t.isFirst=!0,this.ZC49(),this.ZS41(),this.removeAllNpc();var s=G9.gIV("mapId");this.setSceneData(s),this.ZO57(I4.A4),this.challenge||(this.challenge=new ClimbChallenge,this.challenge.name=N1.A12,this.grpGround.addChild(this.challenge)),this.ZC50(t),this.ZG81(1),this.ZG81(2);break;case P4.T82:this.removeAllNpc(),this.ZS41(),this.ZO57(I4.A8),App.CM.apF(O6.B16,G13.A27,!1),App.CM.apF(O6.B16,G13.A1);App.CM.gtM(O6.B64);if(this.challenge){var o=this.grpGround.getChildByName(N1.A12);o&&this.grpGround.removeChild(o),this.challenge=null}break;case P4.O71:case P4.I72:case P4.S23:this.ZC50(t),this.ZG81(1),this.ZG81(2),t.isShowMy?null!=this._gameObjs&&this.ZB4(t.playerObjData):this.ZB4(t.playerObjData);break;case P4.I71:this.ZW81(),this.ZG81(2);break;case B19.A3:this.ZO58(FightSceneNpc.npcName.CROSSBOSS_NPC);break;case P4.Q60:case B19.A1:this.setChallenge(!1);break;case E6.A14:if(this.sceneType==I4.A4)if(t.isFirst)t.isFirst=!1;else{this.ZD10(t);var r=App.CM.gtM(O6.B99);if(!t.isAutoChallenge||r.isFighting||t.lefeCD)this.ZC49();else{if(this.isBoosNpcPos())return this.ZC49(),void egret.Tween.get(this).wait(2e3).call(function(){var t=App.CM.gtM(O6.B99),e=App.CM.gtM(O6.B16);!t.isFighting&&e.isAutoChallenge&&i.isBoosNpcPos()&&App.CM.apF(O6.B16,G13.A31)});this.ZC49();var n=FightSceneNpc.npcName.CROSSBOSS_NPC,a=this.getSceneNpc(n);a&&this._selfTeam.ZO39(a,n)}}}},t.prototype.ZC49=function(){this._selfTeam&&this._selfTeam.ZO39(null,null)},t.prototype.ZO58=function(t){var e=this.getSceneNpc(t);e&&(this._selfTeam&&this._selfTeam.ZW61()==t&&this.ZC49(),e.destroy(),e=null,delete this.npcList[t])},t.prototype.isBoosNpcPos=function(){var t=!1,e=this.getSceneNpc(FightSceneNpc.npcName.CROSSBOSS_NPC);if(e){var i=e.getTargetPos();t=this._selfTeam.isRoundNpc(i.x,i.y)}return t},t.prototype.ZD10=function(t){var e=this.getSceneNpc(FightSceneNpc.npcName.CROSSBOSS_NPC);if(e){var i=e.getTargetPos();if(this._selfTeam.isRoundNpc(i.x+40,i.y))return e.targetCallback&&(e.targetCallback(),e.targetCallback=null),!0}if(t.boxName){var s=this.npcList[t.boxName];if(s){i=s.getTargetPos();if(this._selfTeam.isRoundNpc(i.x,i.y)&&s.targetCallback)return s.targetCallback(),!(t.boxName=null)}}return!1},t.prototype.getSceneType=function(){return this.sceneType},t}(BaseEuiView);__reflect(FightCrossBossView.prototype,"FightCrossBossView");var FightCrossCliffView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sceneType=I4.A3,i.skinName=CrossCliffFightSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.gMapScroller.width=App.TG37.getWidth(),this.mapMgr=new CrossCliffMap(this.gMapScroller)},t.prototype.open=function(){o.prototype.open.call(this),this.openSceneUI()},t.prototype.close=function(){o.prototype.close.call(this),this.closeSceneUI(),App.CM.gtM(O6.B99).fightSceneType=I4.A8,egret.Tween.removeTweens(this)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.ZO57=function(t){this.sceneType!=t&&(this.closeSceneUI(),this.sceneType=t,this.openSceneUI(),App.CM.gtM(O6.B99).fightSceneType=this.sceneType)},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.openSceneUI=function(){if(!App.VM.isOpen(O7.I64)){this.ZK39(),App.CM.apF(O6.B8,G5.A27),App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.C10,O16.A5),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9);var t=App.CM.gtM(O6.B8),e=App.CM.gtM(O6.B99);t.FJ60()&&!e.isFighting&&App.CM.apF(O6.B8,G5.A8)}},t.prototype.closeSceneUI=function(){App.CM.apF(O6.B8,G5.A21),App.CM.apF(O6.B8,G5.A7),App.CM.apF(O6.B8,G5.A11),App.CM.apF(O6.B8,G5.A22),App.CM.apF(O6.C18,O10.A18)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TG65?this.ZG47(t,s):t instanceof TD88&&this.ZB77(t,s)},t.prototype.ZG47=function(t,e){switch(e){case FightD.FC_Update_UI:this.openSceneUI();break;case FightD.FC_Close_UI:this.closeSceneUI(),App.VM.isOpen(O7.B83)&&App.CM.apF(O6.B89,L11.A56,!0)}},t.prototype.ZB77=function(t,e){switch(e){case P4.L35:t.isFirst=!0,this.ZO57(I4.A3),egret.Tween.get(this).wait(1e3).call(function(){App.CM.apF(O6.B8,G5.A49,!1)});break;case P4.S73:this.ZO57(I4.A8),App.CM.apF(O6.B8,G5.A7),this.gMapScroller.removeChildren(),egret.Tween.removeTweens(this);break;case G5.A50:this.mapMgr.ZG62();break;case"hideFriend":this.mapMgr.updateData(),this.mapMgr.ZG62();break;default:this.mapMgr.updateData()}},t.prototype.setMapData=function(t,e){this.mapMgr.sendMyPos(t,e)},t.prototype.FHH9=function(t,e){return this.mapMgr.FHH9(t,e)},t.prototype.FK69=function(t,e){return this.mapMgr.FK69(t,e)},t.prototype.setMapStartData=function(){this.mapMgr.sendMyStartPos()},t}(BaseEuiView);__reflect(FightCrossCliffView.prototype,"FightCrossCliffView");var FightCrossFieldView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sceneType=I4.A1,i._robotNames={},i.npcList={},i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.grpMap=new FightMapView,this.addChild(this.grpMap),this.grpGround=new eui.Group,this.grpGround.width=1080,this.grpGround.height=1800,this.addChild(this.grpGround),this.mapData=new FightMapData},t.prototype.setChallenge=function(t){this.challenge&&(this.challenge.setBoo=t)},t.prototype.open=function(){if(o.prototype.open.call(this),this.grpMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),null==this.showMapName){var t=TD94.FL64();this.setSceneData(t)}this.openSceneUI()},t.prototype.close=function(){o.prototype.close.call(this),this.closeSceneUI(),this.grpMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),App.CM.gtM(O6.B99).fightSceneType=I4.A8,egret.Tween.removeTweens(this)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.ZS41(),this.removeAllNpc()},t.prototype.setSceneData=function(t){null!=t&&(this.curMapName=t,this.loadMapRes())},t.prototype.loadMapRes=function(){if(this.isInit()&&null!=this.curMapName)if(this.showMapName&&this.curMapName==this.showMapName)this.ZL38(!0);else{if(this.showMapName)FightRes.ZO48(this.curMapName,this.ZI4.bind(this)),this.grpMap.setMapName(this.curMapName);else{var t=App.CM.gtM(O6.A99);this.grpMap.setMapName(this.curMapName,this.ZD89.bind(this),t.bossData.mapsize)}this.showMapName=this.curMapName}},t.prototype.ZD89=function(){FightRes.ZO48(this.curMapName,this.ZI4.bind(this))},t.prototype.ZI4=function(){this.mapData.setData(RES.getRes(FightRes.getMapResKey(this.curMapName))),this.grpMap.width=this.grpGround.width=this.mapData.getMapWidth(),this.grpMap.height=this.grpGround.height=this.mapData.getMapHeight(),this.grpMap.x=0,this.grpMap.y=0,this.grpGround.x=0,this.grpGround.y=0,this.ZL38(null,!0)},t.prototype.getMapName=function(){return this.curMapName},t.prototype.ZO56=function(){var t=this.ZR68();return{x:this.width/2-t.x,y:this.height/2-t.y}},t.prototype.getBgMap=function(){return this.grpMap},t.prototype.ZR68=function(){return this.grpGround},t.prototype.FK54=function(){return this.mapData},t.prototype.ZO57=function(t){this.sceneType!=t&&(this.closeSceneUI(),this.sceneType=t,this.openSceneUI(),App.CM.gtM(O6.B99).fightSceneType=this.sceneType);this.grpGround.name=N1.A13},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.openSceneUI=function(){if(!App.VM.isOpen(O7.I64)){this.ZK39(),App.CM.apF(O6.A99,F14.A22),App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.C10,O16.A5),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9);var t=App.CM.gtM(O6.A99),e=App.CM.gtM(O6.B99);t.lifeCD&&!e.isFighting&&App.CM.apF(O6.A99,F14.A6)}},t.prototype.closeSceneUI=function(){App.CM.apF(O6.A99,F14.A16),App.CM.apF(O6.A99,F14.A4),App.CM.apF(O6.A99,F14.A10),App.CM.apF(O6.A99,F14.A17),App.CM.apF(O6.C18,O10.A18)},t.prototype.ZL38=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!0),!t||this.sceneType!=this.showSceneType){this.showSceneType=this.sceneType,this.ZS41();var i=App.CM.gtM(O6.A99);this.ZL40(i.playerObjData),this.ZW80(i)}},t.prototype.hideRobots=function(){if(this._gameObjs&&0!=Object.keys(this._gameObjs).length){var t=-1!==App.CM.gtM(O6.B82).setting.indexOf(L17.A24);for(var e in this._gameObjs){var i=this._gameObjs[e].teams;if(i&&0!=i.length)for(var s=0;s<i.length;s++){i[s].getComponent(J14.C_Avatar).body.visible=!t}}}},t.prototype.ZE70=function(t,e){switch(e){case P4.S94:FightSoundManager.ZO51(),this.hideRobots()}},t.prototype.ZW80=function(t){var e=!1,i=TG67.FE98(t.myPlayerObjData[0].ex,t.myPlayerObjData[0].ey);if(null==this._selfTeam){var s=P13.A4;this._selfTeam=new FightMovePlayTeam(s,Dir.tl,i.y,i.x),e=!0}(this._selfTeam.setTeamData(t.myPlayerObjData,this),TD94.FL60()||this._selfTeam.updateTarget(t.myPlayerObjData[0].ex,t.myPlayerObjData[0].ey),e)&&this._selfTeam.FG91(E4.A1).ZG79()},t.prototype.ZL40=function(o){var r=this;for(var t in null==this._gameObjs&&(this._gameObjs={}),this._gameObjs){var e=this._gameObjs[t];null==o[t]&&(this._gameObjs[t]=null,delete this._gameObjs[t],e.destroy())}var n=!1,i=function(t){var e=o[t],i=a._gameObjs[t];if(n=!1,null==i){var s=TG67.FE98(e[0].ex,e[0].ey);i=new FightMovePlayTeam(P13.A6,Dir.tl,s.y,s.x),a._gameObjs[t]=i,n=!0}if(i.setTeamData(e,a,function(){if(App.CM.gtM(O6.A99).bossRhp){r.setChallenge(!0);var t=i.teams[0];r.challenge.x=t.x,r.challenge.y=t.y+6,r.challenge.setHander(function(){App.CM.apF(O6.A99,F14.A41,t.aid)})}else r.setChallenge(!1)}),e[0].ex){s={x:e[0].ex,y:e[0].ey};i.ZO40(s)}n&&i.FG91(E4.A1).addPosComp()},a=this;for(var t in o)i(t)},t.prototype.createNpc=function(t,e,i,s,o,r,n){var a;void 0===n&&(n=null),this.npcList[i]?a=this.npcList[i]:(a=new FightSceneNpc,this.npcList[i]=a);var h={id:t,objType:P13.A6,dir:Dir.br,x:e.x,y:e.y,n:n,ty:e.ty?e.ty:null,npcN:i,bt:BehaviourType.Stand_d,mth:"wdsg_kffzs_a_001"};a.setData(h,this,s,o,r)},t.prototype.getSceneNpc=function(t){return this.npcList[t]},t.prototype.ZW82=function(){var t=this,e=App.CM.gtM(O6.A99).bossData,i=FightSceneNpc.npcName.CROSSFIELD_NPC,s=e.pos;s.ty=J11.A1;0<App.CM.gtM(O6.A99).bossRhp?this.createNpc(e.modelid,s,i,FightSceneNpc.npcType.MODEL,function(){App.CM.gtM(O6.A99);t.setChallenge(!0);t.challenge.x=s.x+80*(1.2-1),t.challenge.y=s.y+30,t.challenge.setHander(function(){App.CM.apF(O6.A99,F14.A35)})}):this.removeAllNpc()},t.prototype.ZS41=function(){this.ZL39(),this._selfTeam&&(this._selfTeam.destroy(),this._selfTeam=null)},t.prototype.removeAllNpc=function(){for(var t in this.npcList)this.ZO58(t);this.npcList={}},t.prototype.ZL39=function(){var i=this;this._gameObjs&&Object.keys(this._gameObjs).forEach(function(t){var e=i._gameObjs[t];e&&e.destroy(),i._gameObjs[t]=null,delete i._gameObjs[t]});this._robotNames&&Object.keys(this._robotNames).forEach(function(t){i._robotNames[t]=null,delete i._robotNames[t]})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TG65?this.ZG47(t,s):t instanceof TG12?this.ZE70(t,s):t instanceof TD92&&this.ZB78(t,s)},t.prototype.ZG47=function(t,e){switch(e){case FightD.FC_Update_UI:this.openSceneUI();break;case FightD.FC_Close_UI:this.closeSceneUI(),App.VM.isOpen(O7.B83)&&App.CM.apF(O6.B89,L11.A56,!0)}},t.prototype.ZB78=function(t,e){var i=this;switch(e){case P4.K67:t.isFirst=!0,this.ZC49(),this.ZS41(),this.removeAllNpc(),this.ZO57(I4.A1),this.challenge||(this.challenge=new ClimbChallenge,this.challenge.name=N1.A12,this.grpGround.addChild(this.challenge)),this.ZL40(t.playerObjData),this.ZW80(t),this.ZW82();break;case P4.K69:this.removeAllNpc(),this.ZS41(),this.ZO57(I4.A8),App.CM.apF(O6.A99,F14.A4);App.CM.gtM(O6.B64);if(this.challenge){var s=this.grpGround.getChildByName(N1.A12);s&&this.grpGround.removeChild(s),this.challenge=null}break;case P4.E30:case P4.Q78:this.ZL40(t.playerObjData),this.ZW80(t),this.ZW82(),TD94.FL60()||this.setChallenge(!1);break;case B11.A3:this.ZO58(FightSceneNpc.npcName.CROSSFIELD_NPC),this.setChallenge(!1);break;case P4.O95:case B11.A1:this.setChallenge(!1);break;case E6.A14:if(this.sceneType==I4.A1)if(t.isFirst)t.isFirst=!1;else{this.ZL41(t);var o=App.CM.gtM(O6.B99);if(!t.isAutoChallenge||o.isFighting||t.lifeCD)this.ZC49();else{if(this.isBoosNpcPos())return this.ZC49(),void egret.Tween.get(this).wait(2e3).call(function(){var t=App.CM.gtM(O6.B99),e=App.CM.gtM(O6.A99);!t.isFighting&&e.isAutoChallenge&&i.isBoosNpcPos()&&App.CM.apF(O6.A99,F14.A35)});this.ZC49();var r=FightSceneNpc.npcName.CROSSFIELD_NPC,n=this.getSceneNpc(r);if(n)if(this._selfTeam.ZO39(n,r),this._selfTeam.FG91(J11.A7)){var a=n.getTargetPos();App.CM.apF(O6.A99,F14.A48,a.x,a.y)}}}}},t.prototype.ZC49=function(){this._selfTeam&&this._selfTeam.ZO39(null,null)},t.prototype.ZO58=function(t){var e=this.getSceneNpc(t);e&&(this._selfTeam&&this._selfTeam.ZW61()==t&&this.ZC49(),e.destroy(),e=null,delete this.npcList[t])},t.prototype.isBoosNpcPos=function(){var t=!1,e=this.getSceneNpc(FightSceneNpc.npcName.CROSSFIELD_NPC);if(e){var i=e.getTargetPos();t=this._selfTeam.isRoundNpc(i.x,i.y)}return t},t.prototype.ZL41=function(t){var e=this.getSceneNpc(FightSceneNpc.npcName.CROSSFIELD_NPC);if(e){var i=e.getTargetPos();if(this._selfTeam.isRoundNpc(i.x+40,i.y))return e.targetCallback&&(e.targetCallback(),e.targetCallback=null),!0}return!1},t}(BaseEuiView);__reflect(FightCrossFieldView.prototype,"FightCrossFieldView");var FightHandUpView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sceneType=I4.A8,i._robotNames={},i.npcList={},i.teamDelay=3,i.robotInit=!1,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.grpMap=new FightMapView,this.addChild(this.grpMap),this.grpGround=new eui.Group,this.grpGround.width=1080,this.grpGround.height=1800,this.addChild(this.grpGround),this.mapData=new FightMapData,this.handup=new FightCompHandup,this.addEventListener(FightObjectEvent.CAMERA_MOVE,this.onAutoHide,this),this.addEventListener(FightObjectEvent.ROLE_MOVE,this.onAutoHide,this);var t=App.CM.gtM(O6.C12);t.activeHero&&P5.sIs(t.activeHero)},t.prototype.open=function(){if(o.prototype.open.call(this),App.CM.gtM(O6.B99).fightSceneType=I4.A8,this.grpMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),null==this.showMapName){var t=App.CM.gtM(O6.B64).FL64();this.setSceneData(t.resource)}this.grpGround.visible=!0},t.prototype.close=function(){o.prototype.close.call(this),App.K16.remove(this.pretendFight,this),egret.Tween.removeTweens(this),this.grpMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.removeEventListener(FightObjectEvent.CAMERA_MOVE,this.onAutoHide,this),this.removeEventListener(FightObjectEvent.ROLE_MOVE,this.onAutoHide,this)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.stopHandup(),this.ZK39(),this.ZS41(),this.removeAllNpc(),this.sceneType=I4.A8},t.prototype.setSceneData=function(t){if(null!=t){var e=P7.FJ17();this.curMapName=e?"10000":t,this.loadMapRes()}},t.prototype.loadMapRes=function(){if(this.isInit()&&null!=this.curMapName)if(this.showMapName&&this.curMapName==this.showMapName)this.ZL38(!0);else{var t=P7.FJ17();this.showMapName?(FightRes.ZO48(this.curMapName,this.ZI4.bind(this)),this.grpMap.setMapName(this.curMapName)):this.grpMap.setMapName(this.curMapName,this.ZD89.bind(this),t?mapWH.SET_1065_450:mapWH.SET_360_450),this.showMapName=this.curMapName,TG67.CUR_HANDUP_MAP=this.getMapName(),TG67.CUR_HANDUP_CAMERA=this.ZO56()}},t.prototype.ZD89=function(){FightRes.ZO48(this.curMapName,this.ZI4.bind(this))},t.prototype.ZI4=function(){this.mapData.setData(RES.getRes(FightRes.getMapResKey(this.curMapName))),this.grpMap.width=this.grpGround.width=this.mapData.getMapWidth(),this.grpMap.height=this.grpGround.height=this.mapData.getMapHeight(),this.grpMap.x=0,this.grpMap.y=0,this.grpGround.x=0,this.grpGround.y=0,this.ZL38(null,!0)},t.prototype.getMapName=function(){return this.curMapName},t.prototype.ZO56=function(){var t=this.ZR68();return{x:this.width/2-t.x,y:this.height/2-t.y}},t.prototype.getBgMap=function(){return this.grpMap},t.prototype.ZR68=function(){return this.grpGround},t.prototype.FK54=function(){return this.mapData},t.prototype.startHandup=function(){App.CM.gtM(O6.B99).fightSceneType==I4.A8&&this.handup.start()},t.prototype.updateHandup=function(){this.handup&&this.handup.updateInfo()},t.prototype.stopHandup=function(){this.handup&&this.handup.stop()},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.ZL38=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),t&&this.sceneType==this.showSceneType||(this.showSceneType=this.sceneType,this.startChapter(),this.sceneType==I4.A8?this.handup.isRuning?this.updateHandup():this.startHandup():this.stopHandup())},t.prototype.startChapter=function(){this.ZS41(),this.removeAllNpc(),this.ZW80(),this.ZG82()},t.prototype.initRobot=function(){"wxgame"===platform.name?this.ZS43():this.createRobots()},t.prototype.hideRobots=function(){if(this._gameObjs&&0!=Object.keys(this._gameObjs).length){var t=-1!==App.CM.gtM(O6.B82).setting.indexOf(L17.A24);for(var e in this._gameObjs){var i=this._gameObjs[e].teams;if(i&&0!=i.length)for(var s=0;s<i.length;s++){i[s].getComponent(J14.C_Avatar).body.visible=!t}}}},t.prototype.ZW80=function(){var t=!1;if(null==this._selfTeam){var e=P13.A5,i=this.mapData.ZW59();this._selfTeam=new FightMoveTeam(e,Dir.tl,i.y,i.x),t=!0,this.robotInit=!0}var s=App.CM.gtM(O6.B82);if(this._selfTeam.setTeamData(s.avatarInfo.us,this,this.isShowFloow()),t){var o=this._selfTeam.FG91(J11.A7);o.ZG79(),o.ZI69()}for(var r=this._selfTeam.teams,n=0;n<r.length;n++){var a=r[n];if(a.leadObj)a.getComponent(J14.C_Avatar).body.visible=!1}},t.prototype.ZS42=function(){this.robotInit&&(this.robotInit=!1,this.initRobot())},t.prototype.isShowFloow=function(){return!0},t.prototype.createNpc=function(t,e,i,s,o,r,n){var a;void 0===n&&(n=null),this.npcList[i]?a=this.npcList[i]:(a=new FightSceneNpc,this.npcList[i]=a);var h={id:t,objType:P13.A6,dir:Dir.br,x:e.x,y:e.y,n:n,ty:e.ty?e.ty:null,npcN:i};a.setData(h,this,s,o,r)},t.prototype.isNpcInPos=function(t){for(var e in this.npcList){var i=this.npcList[e].getTargetPos();if(i.x==t.x&&i.y==t.y)return!0}return!1},t.prototype.getSceneNpc=function(t){return this.npcList[t]},t.prototype.ZG82=function(){if("wxgame"!==platform.name){var r=App.CM.gtM(O6.C5).rt;if(null!=r){for(var t=parseInt(I6.gIV("maxRebelWave")),e=function(t){for(var e=n.mapData.ZS27();n.isNpcInPos(e);)e=n.mapData.ZS27();var i=r.rebelVos[t-1],s=N17.FF93(i.bossId),o=(i.bossId,FightSceneNpc.npcName.DAILY_MOSTER_+t);n.createNpc(s.image,e,o,FightSceneNpc.npcType.MODEL,void 0,function(){r.setFromScene(!0),App.CM.apF(O6.C5,N3.A50,i)},O3.tr(5813))},n=this,i=1;i<=r.rebelVos.length;i++)e(i);for(i=r.rebelsNum+1;i<=t;i++){var s=FightSceneNpc.npcName.DAILY_MOSTER_+i;this.ZO58(s)}}}},t.prototype.getRobotName=function(){var t=K18.FD58();return this._robotNames[t]?this.getRobotName():(this._robotNames[t]=1,t)},t.prototype.createRobots=function(){this._gameObjs||(this._gameObjs={});App.CM.gtM(O6.B64);this.teamCount=0,this.crateTeam(),App.K16.doTimer(8e3,0,this.pretendFight,this)},t.prototype.crateTeam=function(){this.teamCount+=1,(parseInt(J15.FI6("robotNum"))||10)>=this.teamCount&&egret.Tween.get(this).wait(1e3*this.teamDelay).call(function(){var t=this.mapData.ZW58(),e=Math.floor(4*Math.random()),i=new FightMoveTeam(P13.A5,e,t.y,t.x),s=this.getRobotName(),o=TF40.FI50(s);i.setTeamData(o,this,this.isShowFloow(),null,null,this.crateTeam.bind(this)),i.FG91(J11.A7).ZI69();for(var r=-1!==App.CM.gtM(O6.B82).setting.indexOf(L17.A24),n=i.teams,a=0;a<n.length;a++){n[a].getComponent(J14.C_Avatar).body.visible=!r}this._gameObjs[s]=i},this)},t.prototype.ZS43=function(){this._gameObjs||(this._gameObjs={}),this.teamCount=0,this.crateWxTeam(),App.K16.doTimer(8e3,0,this.pretendFight,this)},t.prototype.crateWxTeam=function(){var h=this;this.teamCount+=1,(parseInt(J15.FI6("robotNum"))||10)>=this.teamCount&&egret.Tween.get(this).wait(1e3*this.teamDelay).call(function(){var t=h.mapData.ZW58(),e=Math.floor(4*Math.random()),i=new FightMoveTeam(P13.A5,e,t.y,t.x),s=h.getRobotName(),o=TF40.FG15(s);i.setTeamData(o,h,h.isShowFloow(),null,null,h.crateWxTeam.bind(h)),i.FG91(J11.A7).ZI69();for(var r=-1!==App.CM.gtM(O6.B82).setting.indexOf(L17.A24),n=i.teams,a=0;a<n.length;a++){n[a].getComponent(J14.C_Avatar).body.visible=!r}h._gameObjs[s]=i},this)},t.prototype.pretendFight=function(){if(this._gameObjs){var t=Object.keys(this._gameObjs);if(t&&0!=t.length&&this.sceneType===I4.A8){for(var e=[];e.length<Math.min(t.length,3);){var i=Math.random()*t.length,s=t[i=Math.floor(i)];-1===e.indexOf(s)&&e.push(s)}for(var o=0;o<e.length;o++){var r=e[o];this._gameObjs[r].FG91(J11.A7).pretend=17501}}}},t.prototype.ZS41=function(){this.ZL39(),this._selfTeam&&(this._selfTeam.destroy(),this._selfTeam=null)},t.prototype.removeAllNpc=function(){for(var t in this.npcList)this.ZO58(t);this.npcList={}},t.prototype.ZL39=function(){var i=this;this._gameObjs&&Object.keys(this._gameObjs).forEach(function(t){var e=i._gameObjs[t];e&&e.destroy(),i._gameObjs[t]=null,delete i._gameObjs[t]});this._robotNames&&Object.keys(this._robotNames).forEach(function(t){i._robotNames[t]=null,delete i._robotNames[t]})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TF80?this.ZD73(t,s):t instanceof TG12?this.ZE70(t,s):t instanceof TG54&&this.ZG83(t,s)},t.prototype.ZD73=function(t,e){switch(e){case P4.I7:var i=t.FL64();this.setSceneData(i.resource)}},t.prototype.ZE70=function(t,e){switch(e){case P4.J63:this.ZW80();break;case P4.S94:FightSoundManager.ZO51(),this.hideRobots()}},t.prototype.ZG83=function(t,e){switch(e){case P4.F2:case P4.C4:this.sceneType==I4.A8&&this.ZG82()}},t.prototype.ZO58=function(t){var e=this.getSceneNpc(t);e&&(e.destroy(),e=null,delete this.npcList[t])},t.prototype.getSceneType=function(){return this.sceneType},t.prototype.onAutoHide=function(t){},t.prototype.ZI73=function(){var r=Math.abs(this.grpMap.x),n=Math.abs(this.grpMap.y),a=App.TG37.getWidth(),h=App.TG37.getHeight(),t=App.CM.gtM(O6.B82);for(var e in this.grpMap.imgMapTiles.forEach(function(t){var e=t.x,i=t.y,s=e+t.width,o=i+t.height;t.visible=r<s&&e<r+a&&n<o&&i<n+h}),this.npcList){var i=this.npcList[e].getNpcObj().getObjView(),s=i.x,o=i.y,p=s<r-40||r+a+40<s||o<n-40||n+h+40<o;i.visible=!p}if(!(-1!==t.setting.indexOf(L17.A24)))for(var e in this._gameObjs)this._gameObjs[e].teams.forEach(function(t){var e=t.getObjView(),i=e.x,s=e.y,o=i<r-40||r+a+40<i||s<n-40||n+h+40<s;e.visible=!o})},t}(BaseEuiView);__reflect(FightHandUpView.prototype,"FightHandUpView");var FightMapView=function(e){function t(){var t=e.call(this)||this;return t.finishNum=0,t}return __extends(t,e),t.prototype.setMapName=function(i,t,e){if(this.completeHandler=t,null==this.imgMapTiles||0==this.imgMapTiles.length){this.imgMapTiles=[];for(var s=0;s<FightD.MAP_COL;s++)for(var o=0;o<FightD.MAP_ROW;o++){var r=new FightMapTile;r.setData(i,s,o,this.complete.bind(this),e),this.addChild(r),this.imgMapTiles.push(r)}}else this.imgMapTiles.forEach(function(t,e){t.setData(i)})},t.prototype.complete=function(){this.finishNum+=1,this.finishNum==FightD.MAP_COL*FightD.MAP_ROW&&(console.log("地图加载完成!"),this.completeHandler&&this.completeHandler(),this.finishNum=0)},t.prototype.ZS44=function(r){for(var n=this,a=0;a<4;a++)for(var t=function(t){var e=a+FightD.MAP_UL+t+FightD.MAP_IMG_S,i=FightD.MAP_RES_PATH+r+FightD.MAP_CLIP+e,s=FightD.MAP_KEY+r+e;App.TF3.ZQ10(s,"image",platform.resUrl+i);var o=h.ZW83(a,t);App.TF3.getAsset(s,function(t){var e=new eui.Image(t);n.addChild(e),e.x=o.x,e.y=o.y},h)},h=this,e=0;e<3;e++)t(e)},t.prototype.ZW83=function(t,e){var i={};switch(t+"_"+e){case"0_0":i.x=0,i.y=0;break;case"0_1":i.x=790,i.y=0;break;case"0_2":i.x=1579,i.y=0;break;case"1_0":i.x=0,i.y=333;break;case"1_1":i.x=790,i.y=333;break;case"1_2":i.x=1579,i.y=333;break;case"2_0":i.x=0,i.y=666;break;case"2_1":i.x=790,i.y=666;break;case"2_2":i.x=1579,i.y=666;break;case"3_0":i.x=0,i.y=999;break;case"3_1":i.x=790,i.y=999;break;case"3_2":i.x=1579,i.y=999}return i},t}(eui.Group);__reflect(FightMapView.prototype,"FightMapView");var FightRankItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="FightRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.numLab.text=this.itemIndex+1+"",this.nameLab.text=this.data.name,this.scoLab.text=(this.data.harm||0)+"")},t.prototype.setRank=function(t){this.numLab.text=t+""},t.prototype.setName=function(t){this.nameLab.text=t},t.prototype.setScore=function(t){this.scoLab.text=t+""},t}(eui.ItemRenderer);__reflect(FightRankItemView.prototype,"FightRankItemView");var FightResultView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=FightResultViewSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dgRewards.dataProvider=this.rewardsCollection=new eui.ArrayCollection,this.dgRewards.itemRenderer=ItemIcon,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5121)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5122)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5123)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5124)),this.lbTips.textFlow=M18.HTP.parse(O3.tr(5125)),this.lbHelpTips.textFlow=M18.HTP.parse(O3.tr(5126)),this.btnHelp.label=O3.tr(5127),P7.FD57(O3.tr(6663),this.strength.lbName)},t.prototype.open=function(t,e){this.win=t,this.params=e,this.canOpenOtherByClose=!0,this.win?(this.closeCD=FightD.RS_CLOSE_CD,this.currentState="win",App.THH32.aUE(this.grpWinDB,"wdsg_jsjm_sl_01",this.grpWinDB.width/2,this.grpWinDB.height/2),egret.Tween.get(this.imgDi,{loop:!0}).to({alpha:0}).to({alpha:.25},650).to({alpha:0},650),egret.Tween.get(this.imgTi,{loop:!0}).to({alpha:0}).to({alpha:.25},650).to({alpha:0},650)):(e.rewards&&e.type===P15.A46?(this.closeCD=FightD.DF_CLOSE_CD,this.currentState="loss2"):(this.closeCD=FightD.DF_CLOSE_CD,this.currentState="loss"),App.THH33.aUE(this.grpLossMC,"fail",0,-this.grpLossMC.height/2),egret.Tween.get(this.imgTi,{loop:!0}).to({scaleX:1,scaleY:1}).to({scaleX:1.01,scaleY:1.01},500).to({scaleX:1,scaleY:1},500),egret.Tween.get(this.imgText,{loop:!0}).to({scaleX:1,scaleY:1}).to({scaleX:.96,scaleY:.96},500).to({scaleX:1,scaleY:1},500)),this.validateNow(),"loss_help"!=this.currentState&&"loss"!=this.currentState||P7.FD57(O3.tr(6714),this.btnIcon1.lbName),App.CM.apF(O6.B18,HH4.A1),this.regMsg()},t.prototype.uBM=function(t){this.updateViews()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),App.K16.remove(this.ZU23,this),this.bRegSkipTimer=null,this.unregMsg(),P5.sIs(this.params.rewards),this.params&&!this.params.isNotClose&&this.params.closeCallback&&this.params.closeCallback.call(this.params.closeCallbackObj,this.canOpenOtherByClose),this.win=null,this.params=null,this.closeCD=null,this.canOpenOtherByClose=null,this.imgDi.source=null,this.imgTi.source=null,this.imgText.source=null,this.rewardsCollection.removeAll(),egret.Tween.removeTweens(this.imgDi),egret.Tween.removeTweens(this.imgTi),egret.Tween.removeTweens(this.imgText),App.THH32.rEf(this.grpWinDB,"wdsg_jsjm_sl_01"),App.THH33.rEf(this.grpLossMC,"fail"),this.imgBan.source="",this.viewGroup.removeChildren(),this.itemArray=null;var i=App.CM.gtM(O6.B79);i.toOpenId&&0<i.toOpenId.length&&(App.CM.apF(O6.B79,NewGift.Const.opNewGiftView,i.toOpenId[0]),i.openedId.push(i.toOpenId[0]),i.toOpenId=null)},t.prototype.regMsg=function(){this.imgDlgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSeekHelp,this),this.strength.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO60,this),this.btnSetting.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doGoSetting,this),this.imgBan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doJump,this)},t.prototype.unregMsg=function(){this.imgDlgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSeekHelp,this),this.strength.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO60,this),this.btnSetting.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doGoSetting,this),this.imgBan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doJump,this);for(var t=0;t<this.grpWays.numChildren;t++)this.grpWays.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickWay,this)},t.prototype.ZS45=function(){for(var t=0;t<this.grpWays.numChildren;t++)this.grpWays.getChildAt(t).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickWay,this)},t.prototype.updateViews=function(){this.win?(this.currentState="win",this.confirmStr=O3.tr(5748),this.params.star?(this.groupStar.visible=!0,this.ZS46()):this.groupStar.visible=!1,this.ZU24()):this.params.rewards&&this.params.type===P15.A46?(this.currentState="loss2",this.ZU24(),this.confirmStr=O3.tr(5748)):(this.currentState="loss",this.ZS47(),this.ZL42(),!this.oneList||0==this.oneList.length||this.isIosWxSp()?this.gpHeight.height=this.viewGroup.height+185:this.gpHeight.height=this.viewGroup.height+276,this.confirmStr=O3.tr(5749)),this.validateNow(),this.ZS45(),this.ZJ83()},t.prototype.ZS46=function(){1<=this.params.star?this.star1.source="v1_img_starx1_png":this.star1.source="v1_img_starx2_png",2<=this.params.star?this.star2.source="v1_img_starx1_png":this.star2.source="v1_img_starx2_png",3<=this.params.star?this.star3.source="v1_img_starx1_png":this.star3.source="v1_img_starx2_png"},t.prototype.ZJ83=function(){var t;this.ZU23(),t="loss"==this.currentState||"loss2"==this.currentState?FightD.DF_CLOSE_CD:FightD.RS_CLOSE_CD,this.bRegSkipTimer||(this.bRegSkipTimer=!0,App.K16.doTimer(1e3,t,this.ZU23,this))},t.prototype.ZU23=function(){this.closeCD--,this.closeCD<=0?this.ZQ58():this.btnConfirm.label=this.confirmStr+"("+this.closeCD+")"},t.prototype.ZU24=function(){var s=[],o=!0;P7.FM14()&&(o=!1),this.params&&this.params.rewards&&0<this.params.rewards.length&&this.params.rewards.forEach(function(t){var e=N12.gID(t.k);if(e){var i={itemData:{data:e,ct:t.v},isBottom:o,pack:!1};s.push(i)}}),s.sort(function(t,e){var i=t.itemData.data,s=e.itemData.data;return i.quality==s.quality?i.type==s.type?i.id>s.id?-1:1:1==i.type&&2==s.type?-1:2==i.type&&1==s.type?1:i.type>s.type?-1:1:i.quality>s.quality?-1:1}),this.rewardsCollection.replaceAll(s)},t.prototype.ZO60=function(){var t=TE5.init.level.value;O4.getLv()<t?P18.sDP(O3.tr(5674)):(App.VM.close(O7.F74),App.VM.ZT95(),App.VM.open(O7.G55,O7.B35))},t.prototype.doGoSetting=function(){App.VM.ZT95(),App.VM.open(O7.G45,O7.D16)},t.prototype.isIosWxSp=function(){return P7.FG67()},t.prototype.ZL42=function(){this.ZW84(),!this.oneList||0==this.oneList.length||this.isIosWxSp()?this.imgBan.source="":(this.imgBan.source=this.oneList.icon,this.imgBan.validateNow())},t.prototype.ZW84=function(){var t=TE84.FG18(),e=0,i=App.CM.gtM(O6.A57);if(null!=i&&1==i.openState&&1!=i.closeEnter){var s=i.rechargeGiftData;if(null!=s.zeroCD&&0<s.zeroCD&&0==s.hasBuyList.length)return void(this.oneList=t[e])}e+=1;var o=App.CM.gtM(O6.A44);if(null!=o&&1==o.openState&&TC56.FHH86()<2)this.oneList=t[e];else{e+=1;var r=THH23.FJ6(void 0,"WomenView");if(r)for(var n=0;n<r.length;n++)if(11011==r[n].id&&0==r[n].have)return void(this.oneList=t[n])}},t.prototype.ZS47=function(){var t=TE84.FHH38();if(t&&!(t.length<0)){var e=3;t.length<3&&(e=t.length),this.itemArray=[];for(var i=0;i<e;i++)if(!this.itemArray[i]){var s=new GrowGuideRenderSmall;this.itemArray.push(s),this.itemArray[i].setData(t[i]),this.viewGroup.addChild(this.itemArray[i])}}},t.prototype.doJump=function(){if(this.oneList&&this.oneList.id)switch(App.VM.ZT95(),this.oneList.id){case 1:this.ZE6();break;case 2:this.ZD11();break;case 3:this.ZL43()}},t.prototype.ZE6=function(){App.CM.apF(O6.A57,D11.A4)},t.prototype.ZD11=function(){App.CM.apF(O6.A44,C17.A4)},t.prototype.ZL43=function(){TG84.goToDlg({sLink:2001})},t.prototype.ZQ58=function(){App.VM.close(O7.F74)},t.prototype.onSeekHelp=function(){App.CM.apF(O6.B64,J18.A45)},t.prototype.onClickWay=function(t){switch(this.canOpenOtherByClose=!1,t.target.name){case"dayRecharge":this.aCF(O6.A13,B5.A4);break;case"hero":App.CM.apF(O6.C12,O8.A83,0);break;case"equipShop":App.VM.open(O7.HH98,O7.HH28);break;case"skillSet":App.VM.open(O7.G45,O7.D16)}},t}(BaseEuiView);__reflect(FightResultView.prototype,"FightResultView");var FightStartBattleView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.bgWidth=782,i.bossWidth=304,i.skinName=FightStartBattleViewSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(){s.prototype.open.call(this),this.initState(),this.play()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),egret.Tween.removeTweens(this.imgBg),egret.Tween.removeTweens(this.imgBoss)},t.prototype.initState=function(){this.grpCnt.validateNow(),0<this.imgBg.width&&(this.bgWidth=this.imgBg.width),0<this.imgBoss.width&&(this.bossWidth=this.imgBoss.width),this.imgBg.x=(-this.bgWidth+this.grpCnt.width)/2+410,this.imgBoss.x=(-this.bossWidth+this.grpCnt.width)/2-385,this.imgBg.alpha=0,this.imgBoss.alpha=0},t.prototype.play=function(){egret.Tween.get(this.imgBg).to({x:(-this.bgWidth+this.grpCnt.width)/2-6,alpha:1},P17.A11).wait(P17.A12).to({x:(-this.bgWidth+this.grpCnt.width)/2-732,alpha:0},P17.A13),egret.Tween.get(this.imgBoss).to({x:(-this.bossWidth+this.grpCnt.width)/2-176,alpha:1},P17.A11).wait(P17.A12).to({x:(-this.bossWidth+this.grpCnt.width)/2-900,alpha:0},P17.A13).call(function(){App.CM.apF(O6.B99,N1.A1)})},t}(BaseEuiView);__reflect(FightStartBattleView.prototype,"FightStartBattleView");var IllegalTipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="IllegalTipSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5352)),this.btnConfirm.label=O3.tr(5355)},t.prototype.open=function(t){s.prototype.open.call(this),this.msg.textFlow=t,this.lbStr1.touchEnabled=this.msg.touchEnabled=!1,this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doConfirm,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doConfirm,this)},t.prototype.doConfirm=function(){App.Socket.close(),this.closeSelf();var t=App.CM.gtM(O6.B97);t&&(t.reconnect=!1),App.CM.apF(O6.B97,N8.A9)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(IllegalTipView.prototype,"IllegalTipView");var LegionCampView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i._robotNames={},i.npcList={},i.isOpenMap=!1,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.grpMap=new FightMapView,this.addChild(this.grpMap),this.grpGround=new eui.Group,this.grpGround.width=1080,this.grpGround.height=1800,this.addChild(this.grpGround),this.mapData=new FightMapData},t.prototype.open=function(){o.prototype.open.call(this),App.CM.gtM(O6.B99).fightSceneType=I4.A9,this.grpMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9),App.CM.apF(O6.C10,O16.A5);var t=L4.gIV("campMap");this.setSceneData(t)},t.prototype.close=function(){o.prototype.close.call(this),this.closeSceneUI(),this.grpMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.ZS41(),this.removeAllNpc()},t.prototype.setSceneData=function(t){null!=t&&(this.curMapName=t,this.loadMapRes())},t.prototype.loadMapRes=function(){if(this.isInit()&&null!=this.curMapName){if(this.showMapName&&this.curMapName==this.showMapName)return this.openSceneUI(),void this.ZW80();this.showMapName?(FightRes.ZO48(this.curMapName,this.ZI4.bind(this)),this.grpMap.setMapName(this.curMapName)):this.grpMap.setMapName(this.curMapName,this.ZD89.bind(this),mapWH.SET_830_450),this.showMapName=this.curMapName}},t.prototype.ZD89=function(){FightRes.ZO48(this.curMapName,this.ZI4.bind(this))},t.prototype.ZI4=function(){this.mapData.setData(RES.getRes(FightRes.getMapResKey(this.curMapName))),this.grpMap.width=this.grpGround.width=this.mapData.getMapWidth(),this.grpMap.height=this.grpGround.height=this.mapData.getMapHeight(),this.grpMap.x=0,this.grpMap.y=0,this.grpGround.x=0,this.grpGround.y=0,this.openSceneUI(),this.ZW80()},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.getMapName=function(){return this.curMapName},t.prototype.ZO56=function(){var t=this.ZR68();return{x:this.width/2-t.x,y:this.height/2-t.y}},t.prototype.getBgMap=function(){return this.grpMap},t.prototype.ZR68=function(){return this.grpGround},t.prototype.FK54=function(){return this.mapData},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.openSceneUI=function(){if(this.isOpenMap=!0,!App.VM.isOpen(O7.I64)){this.ZK39(),App.CM.apF(O6.B89,L11.B28),App.CM.apF(O6.B63,K7.A7);var t=App.CM.gtM(O6.B89);0<t.mindingCd&&App.CM.apF(O6.B89,L11.A62),this.ZO61(t)}},t.prototype.closeSceneUI=function(){this.removeAllNpc(),App.CM.apF(O6.B89,L11.B3)},t.prototype.ZL38=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this.ZW80();var i=App.CM.gtM(O6.B89);this.ZR62(i.campTeams),i.myLegion.mineState==C2.A1&&this.ZW85(1),i.myLegion.robState==C2.A1&&this.ZW85(2)},t.prototype.ZW80=function(){var t=!1;if(null==this._selfTeam){var e=P13.A4,i=this.mapData.ZW59();this._selfTeam=new FightMoveTeam(e,Dir.tl,i.y,i.x),t=!0}var s=App.CM.gtM(O6.B82);(this._selfTeam.setTeamData(s.avatarInfo.us,this,!0),t)&&this._selfTeam.FG91(J11.A7).ZG79()},t.prototype.ZR62=function(t){for(var e in null==this._gameObjs&&(this._gameObjs={}),this._gameObjs){var i=this._gameObjs[e];null==(o=t[e])&&(this._gameObjs[e]=null,delete this._gameObjs[e],i.destroy())}var s=!1;for(var e in t){var o=t[e],r=this._gameObjs[e];if(s=!1,null==r){var n=this.mapData.ZW58(),a=Math.floor(4*Math.random());r=new FightMoveTeam(P13.A5,a,n.y,n.x),this._gameObjs[e]=r,s=!0}if(r.setTeamData(o,this,!0),s)r.FG91(J11.A7).ZI69()}},t.prototype.createNpc=function(t,e,i,s,o,r,n){var a;void 0===n&&(n=null),this.npcList[i]?a=this.npcList[i]:(a=new FightSceneNpc,this.npcList[i]=a);var h={id:t,objType:P13.A6,dir:Dir.br,x:e.x,y:e.y,n:n,ty:e.ty?e.ty:null,npcN:i};a.setData(h,this,s,o,r)},t.prototype.isNpcInPos=function(t){for(var e in this.npcList){var i=this.npcList[e].getTargetPos();if(i.x==t.x&&i.y==t.y)return!0}return!1},t.prototype.getSceneNpc=function(t){return this.npcList[t]},t.prototype.ZW85=function(t){switch(t){case 1:var e=App.CM.gtM(O6.B89),i=void 0;(n=this.npcList[FightSceneNpc.npcName.LEGION_MINE])&&(i=n.getTargetPos());var s=this.ZO59(e.minePos,i);e.minePos=s;var o=L4.gIV("mineResources"),r=function(){App.CM.apF(O6.B89,L11.A62)};this.createNpc(o,s,FightSceneNpc.npcName.LEGION_MINE,FightSceneNpc.npcType.IMAGE,r);break;case 2:var n;e=App.CM.gtM(O6.B89),i=void 0;(n=this.npcList[FightSceneNpc.npcName.LEGION_ROBBER])&&(i=n.getTargetPos());s=this.ZO59(e.robPos,i);e.robPos=s;var a=L4.FD22();r=function(){App.CM.apF(O6.B89,L11.A86,a.boss)};this.createNpc(a.image,s,FightSceneNpc.npcName.LEGION_ROBBER,FightSceneNpc.npcType.MODEL,r,null,O3.tr(5814))}},t.prototype.ZO59=function(t,e){var i;if(t)i=t;else for(var s=void 0;i=this.mapData.ZS27(),s=TG67.FE98(i.x,i.y),!this.mapData.ZW60(s.x,s.y)||e&&Math.sqrt(e.x-i.x)+Math.sqrt(e.y-i.y)<=10;);return i},t.prototype.ZS41=function(){this.ZL39(),this._selfTeam&&(this._selfTeam.destroy(),this._selfTeam=null)},t.prototype.removeAllNpc=function(){for(var t in this.npcList)this.ZO58(t);this.npcList={}},t.prototype.ZL39=function(){var i=this;this._gameObjs&&Object.keys(this._gameObjs).forEach(function(t){var e=i._gameObjs[t];e&&e.destroy(),i._gameObjs[t]=null,delete i._gameObjs[t]});this._robotNames&&Object.keys(this._robotNames).forEach(function(t){i._robotNames[t]=null,delete i._robotNames[t]})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TF80||(t instanceof TG12?this.ZE70(t,s):t instanceof TG20?this.ZE88(t,s):t instanceof TG65&&this.ZG47(t,s))},t.prototype.ZG47=function(t,e){switch(e){case FightD.FC_Update_UI:this.openSceneUI();break;case FightD.FC_Close_UI:this.closeSceneUI(),App.VM.isOpen(O7.B83)&&App.CM.apF(O6.B89,L11.A56,!0)}},t.prototype.ZE70=function(t,e){switch(e){case P4.J63:this.ZW80()}},t.prototype.ZE88=function(e,t){var i=this;switch(t){case P4.O54:break;case P4.O56:this.ZO58(FightSceneNpc.npcName.LEGION_ROBBER),this.ZO58(FightSceneNpc.npcName.LEGION_MINE),App.CM.gtM(O6.B99).fightSceneType=I4.A8,App.CM.apF(O6.B89,L11.B76,!0),App.SceneManager.runScene(M2.A5);break;case P4.V92:this.ZL38(!1,!1);break;case E6.A5:e.isAutoDoCampTask?this.ZL44():this.ZC49();break;case P4.C23:case P4.D2:case P4.M41:e.minePos=null,this.ZO61(e);break;case P4.C25:case P4.D4:case P4.M43:e.robPos=null,this.ZO61(e);break;case E6.A14:var s=!1;e.myLegion.mineState!=C2.A1&&e.myLegion.robState!=C2.A1||(s=this.ZG84()),!s&&e.isAutoDoCampTask&&this.ZL44();break;case E6.A9:this.ZO58(FightSceneNpc.npcName.LEGION_ROBBER),this.ZO58(FightSceneNpc.npcName.LEGION_MINE);break;case P4.C23:this.ZO58(FightSceneNpc.npcName.LEGION_MINE);break;case P4.C25:this.ZO58(FightSceneNpc.npcName.LEGION_ROBBER);break;case E6.A12:var o=this.getSceneNpc(FightSceneNpc.npcName.LEGION_MINE);if(o){o.ZI56(function(){App.CM.apF(O6.B89,L11.A62)})}else this.ZO61(e);App.K16.doTimer(4e3,1,function(){var t=!1;e.myLegion.mineState!=C2.A1&&e.myLegion.robState!=C2.A1||(t=i.ZG84()),!t&&e.isAutoDoCampTask&&i.ZL44()},this);break;case E6.A6:e.minePos=null,e.robPos=null,this.ZO61(e)}},t.prototype.ZO61=function(t){var e=this,i=!1;t.myLegion.mineState==C2.A1?(i=!0,this.ZW85(1)):this.ZO58(FightSceneNpc.npcName.LEGION_MINE),t.myLegion.robState==C2.A1?(i=!0,this.ZW85(2)):this.ZO58(FightSceneNpc.npcName.LEGION_ROBBER),App.K16.doTimer(500,1,function(){e.ZI74(t,i)},this)},t.prototype.ZI74=function(t,e){t.isAutoDoCampTask&&e?this.ZL44():(e||App.CM.apF(O6.B89,L11.A21,!1),this.ZC49())},t.prototype.ZL44=function(){if(!this.ZG84()){this.ZC49();var t=FightSceneNpc.npcName.LEGION_MINE,e=this.getSceneNpc(t);e?this._selfTeam.ZO39(e,t):(t=FightSceneNpc.npcName.LEGION_ROBBER,(e=this.getSceneNpc(t))&&this._selfTeam.ZO39(e,t))}},t.prototype.ZC49=function(){this._selfTeam&&this._selfTeam.ZO39(null,null)},t.prototype.ZO58=function(t){var e=this.getSceneNpc(t);e&&(this._selfTeam&&this._selfTeam.ZW61()==t&&this.ZC49(),e.destroy(),e=null,delete this.npcList[t])},t.prototype.ZG84=function(){var t=this.getSceneNpc(FightSceneNpc.npcName.LEGION_MINE);if(t){var e=t.getTargetPos();if(this._selfTeam.isRoundNpc(e.x,e.y))return t.targetCallback&&(t.targetCallback(),t.targetCallback=null),!0}if(t=this.getSceneNpc(FightSceneNpc.npcName.LEGION_ROBBER)){e=t.getTargetPos();if(this._selfTeam.isRoundNpc(e.x,e.y)){if(t.targetCallback)t.targetCallback(),App.CM.gtM(O6.B89).robPos=null,t.targetCallback=null;return!0}}return!1},t}(BaseEuiView);__reflect(LegionCampView.prototype,"LegionCampView");var GearBeastConfig=function(){function e(){}return e.FK35=function(t){e.init=t.machine_init,e.attribute=t.machine_attribute,e.base=t.machine_base,e.level=t.machine_level,e.talent=t.machine_talent,e.tactic=t.machine_tactic,e.tacticlv=t.machine_tacticlv,this.saveNewConfig()},e.gIV=function(t){var e;return this.init?e=this.init[t].value:e},e.getGearData=function(t){return this.base[t]},e.getArrayData=function(t){return this.tactic[t]},e.getLevelAttr=function(t){var e=[],i={attr:this.getlevelByLv(1).addattr,scale:0};e.push(i);for(var s=1;s<=t;s++){var o={attr:this.getlevelByLv(s).addattr};e.push(o)}var r=this.countAttr(e);return this.FL55(r)},e.gettalentAttr=function(t,e,i){var s=[],o={attr:this.getNew_talentByTL(t,1).attr,scale:0};s.push(o);for(var r=0;r<=e;r++)if(r==e){if(i){var n={attr:(a=this.getNew_talentByTL(t,r+1)).attr,scale:i};s.push(n)}}else{n={attr:(a=this.getNew_talentByTL(t,r+1)).attr,scale:5};var a,h={attr:a.breakattr};s.push(n),s.push(h)}var p=this.countAttr(s);this.FL55(p);return p},e.getArrayAttr=function(t,e){var i=[],s={attr:this.getNew_tacticlvByTL(t,1).tacticattr,scale:0};i.push(s);for(var o=1;o<=e;o++){var r={attr:this.getNew_tacticlvByTL(t,o).tacticattr};i.push(r)}var n=this.countAttr(i);this.FL55(n);return n},e.getArrayLvAttr=function(t,e){var i=[],s={attr:this.getNew_tacticlvByTL(t,1).levelattr,scale:0};i.push(s);for(var o=1;o<=e;o++){var r={attr:this.getNew_tacticlvByTL(t,o).levelattr};i.push(r)}var n=this.countAttr(i);return this.FL55(n)},e.getRecycleReq=function(t,e){var i=[],s={attr:this.getlevelByLv(1).reqnum,scale:0};i.push(s);for(var o=0;o<=t;o++)if(o==t){var r={attr:(n=this.getlevelByLv(t+1)).reqnum,scale:Number(e)/10};i.push(r)}else{var n;r={attr:(n=this.getlevelByLv(t+1)).reqnum,scale:Number(n.exp)/10};i.push(r)}var a=this.countAttr(i),h=Number(this.gIV("recycle"))/100;return this.FL55(a,h)},e.saveNewConfig=function(){for(var t in this.new_talent={},this.talent){var e=this.talent[t];this.new_talent[e.talenttype]=this.new_talent[e.talenttype]||{},this.new_talent[e.talenttype][e.lv]=e}for(var t in this.new_tacticlv={},this.tacticlv){e=this.tacticlv[t];this.new_tacticlv[e.id]=this.new_tacticlv[e.id]||{},this.new_tacticlv[e.id][e.lv]=e}},e.getlevelByLv=function(t){return this.level[t]},e.getNew_talentByTL=function(t,e){return this.new_talent[t][e]},e.getNew_tacticlvByTL=function(t,e){return this.new_tacticlv[t][e]},e.getArrayLvMax=function(t){var e=this.new_tacticlv[t],i=0;for(var s in e)i++;return i},e.getLvMax=function(){var t=this.level,e=0;for(var i in t)e++;return e},e.getRemouldMax=function(t){var e=this.new_talent[t],i=0;for(var s in e)i++;return i},e.countAttr=function(t){var e=[];for(var i in t){var s=t[i].attr,o=0<=t[i].scale?t[i].scale:1,r=this.FL56(s);for(var n in r){var a=this.isInList(r[n].k,e);if("-1"==a){var h={k:r[n].k,v:Number(r[n].v)*o};e.push(h)}else e[a].v=Number(e[a].v)+Number(r[n].v)*o}}return e.sort(function(t,e){return t.k-e.k}),e},e.isInList=function(t,e){for(var i in e)if(e[i].k==t)return i;return"-1"},e.FL56=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={k:o[0],v:o[1]};e.push(r)}return e},e.FL55=function(t,e){void 0===e&&(e=1);var i="";for(var s in t)"0"!=s&&(i+=";"),i+=t[s].k+":"+Math.round(Number(t[s].v)*e);return i},e.quickSort=function(t){var e=t.concat();return this.sort(e),e},e.sort=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length-1),!(i<=e)){for(var s=e,o=i,r=t[o];s<o;){for(;s<o&&t[s]<=r;)s++;for(t[o]=t[s];s<o&&t[o]>=r;)o--;t[s]=t[o]}t[o]=r,this.sort(t,e,o-1),this.sort(t,o+1,i)}},e}();__reflect(GearBeastConfig.prototype,"GearBeastConfig");var GearBeastConst=function(){function t(){}return t.MACHINE_LOAD_REQ=101,t.MACHINE_LOAD_RES=120,t.MACHINE_MAKE_REQ=103,t.MACHINE_MAKE_RES=104,t.MACHINE_LVUP_REQ=105,t.MACHINE_LVUP_RES=106,t.MACHINE_TRANSFORM_REQ=107,t.MACHINE_TRANSFORM_RES=108,t.MACHINE_RECYCLE_REQ=109,t.MACHINE_RECYCLE_RES=110,t.MACHINE_TACTIC_POS_LVUP_REQ=111,t.MACHINE_TACTIC_POS_LVUP_RES=112,t.MACHINE_TACTIC_LVUP_REQ=113,t.MACHINE_TACTIC_LVUP_RES=114,t}();__reflect(GearBeastConst.prototype,"GearBeastConst");var GearBeastController=function(s){function t(){var t=s.call(this)||this,e=t,i=new GearBeastModel(t);return i.aLV(O7.GearBeastMain),i.aLV(O7.GearBeastMakeView),i.aLV(O7.GearBeastMakeChildView),i.aLV(O7.GearBeastLvUpView),i.aLV(O7.GearBeastRecycleView),i.aLV(O7.GearBeastRemouldView),i.aLV(O7.GearBeastArrayView),i.aLV(O7.GearBeastBrokeArrayView),App.VM.register(O7.GearBeastMain,"GearBeastMainView",e,K17.UI_Main),App.VM.register(O7.GearBeastMakeView,"GearBeastMakeView",e,K17.UI_Main_TOP),App.VM.register(O7.GearBeastLvUpView,"GearBeastLvUpView",e,K17.UI_Main_TOP),App.VM.register(O7.GearBeastRecycleView,"GearBeastRecycleView",e,K17.UI_Main_TOP),App.VM.register(O7.GearBeastRemouldView,"GearBeastRemouldView",e,K17.UI_Main_TOP),App.VM.register(O7.GearBeastMakeChildView,"GearBeastMakeChildView",e,K17.UI_Main_TOP),App.VM.register(O7.GearBeastBrokeArrayView,"GearBeastBrokeArrayView",e,K17.UI_Main_TOP),e.GearBeastProxy=new GearBeastProxy(e),e.rgF(GearBeastConst.MACHINE_LOAD_REQ,e.loadReq,e),e.rgF(GearBeastConst.MACHINE_LOAD_RES,e.loadRes,e),e.rgF(GearBeastConst.MACHINE_MAKE_REQ,e.loadReq,e),e.rgF(GearBeastConst.MACHINE_MAKE_RES,e.loadRes,e),e.rgF(GearBeastConst.MACHINE_LVUP_REQ,e.loadReq,e),e.rgF(GearBeastConst.MACHINE_LVUP_RES,e.loadRes,e),e.rgF(GearBeastConst.MACHINE_TRANSFORM_REQ,e.loadReq,e),e.rgF(GearBeastConst.MACHINE_TRANSFORM_RES,e.loadRes,e),e.rgF(GearBeastConst.MACHINE_RECYCLE_REQ,e.loadReq,e),e.rgF(GearBeastConst.MACHINE_RECYCLE_RES,e.loadRes,e),e.rgF(GearBeastConst.MACHINE_TACTIC_POS_LVUP_REQ,e.loadReq,e),e.rgF(GearBeastConst.MACHINE_TACTIC_POS_LVUP_RES,e.loadRes,e),t}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.loadReq=function(t){return this.GearBeastProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.makeReq=function(t){this.GearBeastProxy.makeReq(t)},t.prototype.makeRes=function(t){200==t.head.state?(this.model.updataMake(t.body),this.model.notify(P4.MACHINE_MAKE_RES)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.lvUpReq=function(t){this.GearBeastProxy.lvUpReq(t)},t.prototype.lvUpRes=function(t){200==t.head.state?(this.model.updataLvUp(t.body),this.model.notify(P4.MACHINE_LVUP_RES)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.transformReq=function(t){this.GearBeastProxy.transformReq(t)},t.prototype.transformRes=function(t){200==t.head.state?(this.model.GQ12(t.body),this.model.notify(P4.MACHINE_TRANSFORM_RES)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.recycleReq=function(t){this.GearBeastProxy.recycleReq(t)},t.prototype.recycleRes=function(t){200==t.head.state?(this.model.updataRecycle(t.body),this.model.notify(P4.MACHINE_RECYCLE_RES)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.tacticLvUpReq=function(t,e){this.GearBeastProxy.tacticLvUpReq(t,e)},t.prototype.tacticLvUpRes=function(t){200==t.head.state?(this.model.GQ12(t.body),this.model.notify(P4.MACHINE_TACTIC_POS_LVUP_RES)):App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(GearBeastController.prototype,"GearBeastController");var GearBeastModel=function(i){function t(t){return i.call(this,t)||this}return __extends(t,i),t.prototype.GQ12=function(t){t&&(this.macs=t.macs?t.macs:this.macs,this.trs=t.trs?t.trs:this.trs,this.tacs=t.tacs?t.tacs:this.tacs)},t.prototype.updataMake=function(t){if(t&&t.mav){for(var e=0,i=this.macs;e<i.length;e++){var s=i[e];if(s.mid==t.mav.mid)return void(s.lv=t.mav.lv)}var o=t.mav;this.macs.push(o)}},t.prototype.updataLvUp=function(t){if(t&&t.mav)for(var e=0,i=this.macs;e<i.length;e++){var s=i[e];if(s.mid==t.mav.mid)return void(s.lv=t.mav.lv)}},t.prototype.updataRecycle=function(t){if(t&&t.mav){for(var e in this.macs){if(this.macs[e].mid==t.mav.mid){e;break}}}},t.prototype.getRemouldById=function(t){return{l:0,lv:0}},t.prototype.updateRed=function(){},t.prototype.getWorkShopRed=function(){},t.prototype.getMakeRed=function(){var i=GearBeastConfig.base,t=function(t){var e=i[t],s=1;if(P7.str2kv(e.itemnum1).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(s=0)}),P7.str2kv(e.itemnum2).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(s=0)}),s)return{value:1}};for(var e in i){var s=t(e);if("object"==typeof s)return s.value}return 0},t.prototype.getLvUpRed=function(){},t.prototype.getLvUpRedByLv=function(t){var e=GearBeastConfig.getLvMax(),s=1;if(e<=t)return 0;var i=GearBeastConfig.getlevelByLv(Number(t)+1);return P7.str2kv(i.reqnum).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(s=0)}),s},t.prototype.getRemouldRed=function(){var t,e=((t={})[1]={type:1,lv:0,l:1},t);for(var i in e){if(this.getRemouldRedByData(e[i]))return 1}return 0},t.prototype.getRemouldRedByData=function(t){var e=GearBeastConfig.getRemouldMax(t.type);if(t.lv>=e)return 0;GearBeastConfig.getNew_talentByTL(t.type,Number(t.lv)+1);var s=1;return 5<=t.l?P7.str2kv(t.breaknum).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(s=0)}):P7.str2kv(t.itemnum).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(s=0)}),s},t.prototype.getArrayRed=function(){var t,e,i=((t={})[1]=((e={})[2]=1,e[4]=0,e[6]=1,e),t);for(var s in i){if(this.getArrayRedByData(s,i[s]))return 1}return 0},t.prototype.getArrayRedByData=function(t,e){for(var i=GearBeastConfig.getArrayData(t),s=1;s<=6;s++){var o=Number(i["num"+s]);if(o){var r=this.array&&this.array[o]&&this.array[o][s]?this.array[o][s]:0,n=GearBeastConfig.getNew_tacticlvByTL(o,Number(r)+1);if(this.getGearNumById(o)<Number(n.reqnum))return 0}}return 1},t.prototype.getArrayLv=function(t){if(!this.array)return 0;if(!this.array[t])return 0;for(var e=GearBeastConfig.getArrayData(t),i=10,s=1;s<=6;s++){if(Number(e["num"+s])){var o=this.array[t][s]?this.array[t][s]:0;o<=i&&(i=o)}}return i},t.prototype.getGearNumById=function(t){return 0},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(GearBeastModel.prototype,"GearBeastModel");var GearBeastProxy=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.MACHINE_LOAD_REQ,body:{}};s.rSMO(P4.MACHINE_LOAD_RES,function(t){s.apF(GearBeastConst.MACHINE_LOAD_RES,t),e("加载机关兽数据完成")},s),s.sSM(i)})},t.prototype.makeReq=function(t){var e={type:P4.MACHINE_MAKE_REQ,body:{tid:t}};this.rSMO(P4.MACHINE_MAKE_RES,this.makeRes,this),this.sSM(e)},t.prototype.makeRes=function(t){this.apF(GearBeastConst.MACHINE_MAKE_RES,t)},t.prototype.lvUpReq=function(t){var e={type:P4.MACHINE_LVUP_REQ,body:{mid:t}};this.rSMO(P4.MACHINE_LVUP_RES,this.lvUpRes,this),this.sSM(e)},t.prototype.lvUpRes=function(t){this.apF(GearBeastConst.MACHINE_LVUP_RES,t)},t.prototype.transformReq=function(t){var e={type:P4.MACHINE_TRANSFORM_REQ,body:{type:t}};this.rSMO(P4.MACHINE_TRANSFORM_RES,this.transformRes,this),this.sSM(e)},t.prototype.transformRes=function(t){this.apF(GearBeastConst.MACHINE_TRANSFORM_RES,t)},t.prototype.recycleReq=function(t){var e={type:P4.MACHINE_RECYCLE_REQ,body:{mid:t}};this.rSMO(P4.MACHINE_RECYCLE_RES,this.recycleRes,this),this.sSM(e)},t.prototype.recycleRes=function(t){this.apF(GearBeastConst.MACHINE_RECYCLE_RES,t)},t.prototype.tacticLvUpReq=function(t,e){var i={type:P4.MACHINE_TACTIC_POS_LVUP_REQ,body:{tid:t,pos:e}};this.rSMO(P4.MACHINE_TACTIC_POS_LVUP_RES,this.tacticLvUpRes,this),this.sSM(i)},t.prototype.tacticLvUpRes=function(t){this.apF(GearBeastConst.MACHINE_TACTIC_POS_LVUP_RES,t)},t}(TG80);__reflect(GearBeastProxy.prototype,"GearBeastProxy");var GearBeastUtils=function(){function t(){}return Object.defineProperty(t,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.getMakeUse=function(t,e){if(t){var i=GearBeastConfig.getGearData(t).itemnum2.split(";");for(var s in i){var o=i[s].split(":");if(e==o[0])return Number(o[1])}}return 0},t.getMakeList=function(){var t=GearBeastConfig.base,e=[];for(var i in t){var s=t[i],o=s.itemnum1.split(":");N12.giC(o[0])&&e.push(s.id)}return e},t.getArrayList=function(){var t=GearBeastConfig.tactic,e=[];for(var i in t){var s={id:t[i].id,t:this.model.array&&this.model.array[i]?this.model.array[i]:[]};e.push(s)}return e},t}();__reflect(GearBeastUtils.prototype,"GearBeastUtils");var GearBeastArrayItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GearBeastArrayItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.open=function(){this.btnBroke.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnBrokeEvent,this)},t.prototype.close=function(){this.itemCollection.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.itemCollection=new eui.ArrayCollection,this.dataGrp.dataProvider=this.itemCollection,this.dataGrp.itemRenderer=GearBeastItem,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.dataChanged=function(){var t=GearBeastConfig.getArrayData(this.data.id);this.lbName.text=t.name;var e=this.getArrayList(t,this.data.t);this.lbLv.text=this.model.getArrayLv(this.data.id)+"",this.itemCollection.replaceAll(e)},t.prototype.getArrayList=function(t,e){for(var i=[],s=1;s<=6;s++){var o=Number(t["num"+s]);if(o){var r={id:o,lv:e[s]?e[s]:0,isClick:!1};i.push(r)}}return i},t.prototype.btnBrokeEvent=function(){App.VM.open(O7.GearBeastBrokeArrayView,this.data.id)},t}(eui.ItemRenderer);__reflect(GearBeastArrayItem.prototype,"GearBeastArrayItem");var GearBeastBrokeArrayItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GearBeastBrokeArrayItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEvent,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEvent,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){if(this.data.id){var t=GearBeastConfig.getGearData(this.data.id);this.imgBg.source=N12.getBox(t.quality),this.imgIcon.source="",t.icon}else this.imgIcon.source="v1_img_jianzhusuo_png"},t.prototype.onClickEvent=function(){this.data.id&&this.model.notify("Select_Array",this.data.pos)},t}(eui.ItemRenderer);__reflect(GearBeastBrokeArrayItem.prototype,"GearBeastBrokeArrayItem");var GearBeastItem=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName="GearBeastItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=GearBeastConfig.getGearData(this.data.id);this.imgBg.source=N12.getBox(t.quality),this.lbName.textFlow=M18.FG71(O5.FD52(t.name,t.quality,1,!0)),this.lbLv.text="Lv."+this.data.lv},t}(eui.ItemRenderer);__reflect(GearBeastItem.prototype,"GearBeastItem");var GearBeastMakeChildItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GearBeastMakeChildItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onclick,this)},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=this.data,e=GearBeastConfig.getGearData(t).itemnum1.split(":"),i=N12.gID(e[0]);this.imgBg.source=N12.getBox(i.quality),this.imgIcon.source=i.icon,this.lbName.textFlow=M18.FG71(O5.FD52(i.name,i.quality,1,!0)),this.lbCount.text=""+N12.giC(e[0]),this.imgSel.visible=t==this.model.makeSelect},t.prototype.onclick=function(){if(!this.imgSel.visible){var t=this.data;this.model.makeSelect=t,this.model.notify("MakeSelect",t)}},t}(eui.ItemRenderer);__reflect(GearBeastMakeChildItem.prototype,"GearBeastMakeChildItem");var GearBeastMakeItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GearBeastMakeItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){if(this.data.id){this.imgNull.visible=!1,this.itemCost.visible=!0;var t=N12.gID(this.data.id);this.itemCost.setData(t),this.lbItem.text=t.name;var e=N12.giC(this.data.id);this.data.cost?this.lbCost.text=e+"/"+this.data.cost:this.lbCost.text=e+"/???"}else this.imgNull.visible=!0,this.itemCost.visible=!1,this.lbItem.text="请选择图纸",this.lbCost.text=""},t}(eui.ItemRenderer);__reflect(GearBeastMakeItem.prototype,"GearBeastMakeItem");var GearBeastArrayAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalComSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ImmortalComItem,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8169)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.GearBeast);this.ZHH77(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){var e=TE91.FK95();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastArrayAttrView)},t}(BaseEuiView);__reflect(GearBeastArrayAttrView.prototype,"GearBeastArrayAttrView");var GearBeastArrayView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastArraySkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:GearBeastArrayItem,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.GearBeast);this.ZHH77(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){var e=GearBeastUtils.getArrayList();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastArrayView)},t}(BaseEuiView);__reflect(GearBeastArrayView.prototype,"GearBeastArrayView");var GearBeastAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalComSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.GearBeast);this.ZHH77(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){var e=TE91.FK95();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastAttrView)},t}(BaseEuiView);__reflect(GearBeastAttrView.prototype,"GearBeastAttrView");var GearBeastBrokeArrayView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="GearBeastBrokeArraySkin",i}return __extends(t,o),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t,e=this;e.dlg.ZM69(e.closeSelf.bind(e),e),e.dlg.title=O3.tr(8169),e.itemS=((t={})[1]=e.item1,t[2]=e.item2,t[3]=e.item3,t[4]=e.item4,t[5]=e.item5,t[6]=e.item6,t)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.arrayId=t[0];var i=GearBeastConfig.getArrayData(this.arrayId);this.setItems(i);var s=this.getArrayFPos(i);this.onClickArray(s),this.ZHH77(this.model)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&"Select_Array"==e[0]&&this.onClickArray(e[1])},t.prototype.ZHH77=function(t){var e=t.getArrayLv(this.arrayId),i=GearBeastConfig.getArrayLvMax(this.arrayId);this.setStar(this.gStars,e,!0);var s=GearBeastConfig.getArrayData(this.arrayId);if(i<=e)this.lbLvDesc.text="已满级";else{var o=e+1;this.lbLvDesc.text="所有阵位达到"+o+"级时，"+s.name+"提升至"+o+"级"}},t.prototype.getArrayFPos=function(t){for(var e=1;e<=6;e++){if(Number(t["num"+e]))return e}},t.prototype.setItems=function(t){for(var e=1;e<=6;e++){var i={pos:e,id:Number(t["num"+e])};this.itemS[e].data=i}},t.prototype.onClickArray=function(t){this.showPos=t;var e=GearBeastConfig.getArrayData(this.arrayId),i=this.model.array&&this.model.array[this.arrayId]&&this.model.array[this.arrayId][t]?this.model.array[this.arrayId][t]:0,s=e["num"+t],o=GearBeastConfig.getGearData(s),r=GearBeastConfig.getArrayLvMax(this.arrayId);this.lbNameL.text=o.name+(i?"+"+i:"");var n=GearBeastConfig.getArrayAttr(this.arrayId,i);if(this.lbAttrL.text=P7.FM5(n,"\n",{},GearBeastConfig.attribute),r<=i)this.btnBroke.verticalCenter=0,this.grpL.horizontalCenter=-85,this.lbAttrL.left=160,this.lbCost.visible=this.lbCount.visible=!1,this.itemBroke.visible=this.lbDesc.visible=!1,this.imgJt.visible=this.grpN.visible=this.lbAttrN.visible=!1,this.btnBroke.label="已满级";else{this.btnBroke.verticalCenter=70,this.grpL.horizontalCenter=-190,this.lbAttrL.left=50,this.lbCost.visible=this.lbCount.visible=!0,this.itemBroke.visible=this.lbDesc.visible=!0,this.imgJt.visible=this.grpN.visible=this.lbAttrN.visible=!0,this.btnBroke.label="升  级",this.itemBroke.data={id:s,lv:0};var a=GearBeastConfig.getArrayAttr(this.arrayId,i+1);this.lbAttrN.text=P7.FM5(a,"\n",{},GearBeastConfig.attribute),this.lbNameN.text=o.name+"+"+(Number(i)+1);var h=GearBeastConfig.getNew_tacticlvByTL(this.arrayId,Number(i)+1);this.lbCost.text="消耗:"+h.reqnum;var p=this.model.getGearNumById(s);this.lbCount.text="拥有:"+p}},t.prototype.close=function(){o.prototype.close.call(this)},t.prototype.btnBrokeEvent=function(){var t=GearBeastConfig.getArrayData(this.arrayId),e=this.model.array&&this.model.array[this.arrayId]&&this.model.array[this.arrayId][this.showPos]?this.model.array[this.arrayId][this.showPos]:0;if(!(GearBeastConfig.getArrayLvMax(this.arrayId)<=e)){var i=t["num"+this.showPos],s=GearBeastConfig.getNew_tacticlvByTL(this.arrayId,Number(e)+1);this.model.getGearNumById(i);Number(s.reqnum)}},t.prototype.setStar=function(t,e,i){void 0===i&&(i=!1);for(var s=L5.FG33(e-5),o=L5.FG33(e),r=5*Math.ceil(e/5)-5,n=0;n<5;n+=1){var a=t.getChildAt(n);a.includeInLayout=a.visible=i||(!(e<5)||n<e),a.source=r+n<e?o:s}},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastBrokeArrayView)},t}(BaseEuiView);__reflect(GearBeastBrokeArrayView.prototype,"GearBeastBrokeArrayView");var GearBeastLvUpView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastLvUpSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:GearBeastItem,width:this.gpList.width,height:this.gpList.height,arrowScale:1,tileLayout:!0,verticalGap:30,horizontalGap:20};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8169)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),this.ZHH77(this.model)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel)switch(e[0]){case P4.R30:break;case"GEARBEAST_LVUP_AUTO":App.K16.doTimer(300,1,function(){},self);break;case"GEARBEAST_STOP_AUTO":this.ZU92()}},t.prototype.ZHH77=function(t){},t.prototype.ZM27=function(){},t.prototype.doAutoUp=function(){},t.prototype.ZU92=function(){},t.prototype.ZP69=function(){},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close(),this.model.makeSelectQ=null},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastLvUpView)},t}(BaseEuiView);__reflect(GearBeastLvUpView.prototype,"GearBeastLvUpView");var GearBeastMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.GearBeastMain,O7.GearBeastWorkShopView,"GearBeastWorkShopView",this.content),App.VM.rgS(O7.GearBeastMain,O7.GearBeastArrayView,"GearBeastArrayView",this.content);var t=[O7.GearBeastWorkShopView,O7.GearBeastArrayView];this.btnList=new ButtonList(["工坊","战阵"],t,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.GearBeastWorkShopView;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){switch(this.viewId=t){case O7.GearBeastWorkShopView:this.btnList.ZM66(t),this.title="工坊";break;case O7.GearBeastArrayView:this.btnList.ZM66(t),this.title="战阵"}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t.prototype.openHelpView=function(){var t,e;this.viewId==O7.GearBeastWorkShopView?(t=O3.tr(8267),e=O3.tr(8268)):this.viewId==O7.GearBeastArrayView&&(t=O3.tr(8267),e=O3.tr(8268));var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t}(BasePanelView);__reflect(GearBeastMainView.prototype,"GearBeastMainView");var GearBeastMakeChildView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastMakeChildSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:GearBeastMakeChildItem,width:this.gpList.width,height:this.gpList.height,arrowScale:1,tileLayout:!0,verticalGap:30,horizontalGap:20};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.btnOkEvent.bind(this),this),this.dlg.title="图    纸"},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=GearBeastUtils.getMakeList();this.model.makeSelect=this.model.makeSelectQ?this.model.makeSelectQ:i[0],this.ZHH77(this.model)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&"MakeSelect"==e[0]&&this.ZHH77(t)},t.prototype.ZHH77=function(t){var e=GearBeastUtils.getMakeList();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.btnOkEvent=function(){if(this.model.makeSelect)this.model.makeSelectQ=this.model.makeSelect,this.model.notify("MakeSelectQ");else{P18.sDP("请选择任意图纸",!0)}},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastMakeChildView)},t}(BaseEuiView);__reflect(GearBeastMakeChildView.prototype,"GearBeastMakeChildView");var GearBeastMakeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastMakeSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:GearBeastItem,width:this.gpList.width,height:this.gpList.height,arrowScale:1,tileLayout:!0,verticalGap:30,horizontalGap:20};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.item0.itemCost.enabled=!1,this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8169)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),this.updataItem(this.model),this.btnMake.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnMakeEvent,this),this.item0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnSelectEvent,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&"MakeSelectQ"==e[0]&&this.updataItem(t)},t.prototype.ZHH77=function(t){this.updataItem(t)},t.prototype.updataItem=function(t){var e=GearBeastConfig.getGearData(this.model.makeSelectQ),i=e?e.itemnum1.split(":")[0]:null;this.item0.data={id:i,cost:e?e.itemnum1.split(":")[1]:null},this.item1.data={id:GearBeastConfig.gIV("makeItem1"),cost:GearBeastUtils.getMakeUse(this.model.makeSelectQ,GearBeastConfig.gIV("makeItem1"))},this.item2.data={id:GearBeastConfig.gIV("makeItem2"),cost:GearBeastUtils.getMakeUse(this.model.makeSelectQ,GearBeastConfig.gIV("makeItem2"))},this.item3.data={id:GearBeastConfig.gIV("makeItem3"),cost:GearBeastUtils.getMakeUse(this.model.makeSelectQ,GearBeastConfig.gIV("makeItem3"))},this.item4.data={id:GearBeastConfig.gIV("makeItem4"),cost:GearBeastUtils.getMakeUse(this.model.makeSelectQ,GearBeastConfig.gIV("makeItem4"))}},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close(),this.model.makeSelectQ=null},t.prototype.btnSelectEvent=function(){App.VM.open(O7.GearBeastMakeChildView)},t.prototype.btnMakeEvent=function(){if(this.model.makeSelectQ){var t=GearBeastConfig.getGearData(this.model.makeSelectQ),e=P7.str2kv(t.itemnum1);for(var i in e){var s=e[i];if((r=N12.giC(s.k))<s.v)return void App.VM.open(O7.G87,s.k,Number(s.v)-r)}var o=P7.str2kv(t.itemnum2);for(var i in o){var r;s=o[i];if((r=N12.giC(s.k))<s.v)return void App.VM.open(O7.G87,s.k,Number(s.v)-r)}console.log("制作")}else{P18.sDP("请选择图纸",!1)}},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastMakeView)},t}(BaseEuiView);__reflect(GearBeastMakeView.prototype,"GearBeastMakeView");var GearBeastRecycleView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastRecycleSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ImmortalComItem,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8169)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.GearBeast);this.ZHH77(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){var e=TE91.FK95();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastRecycleView)},t}(BaseEuiView);__reflect(GearBeastRecycleView.prototype,"GearBeastRecycleView");var GearBeastRemouldView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastRemouldSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8169)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);for(var i=1;i<=4;i++)this["btn"+i].addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnSelect.bind(this,i),this);this.btnSelect(1)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.btnSelect=function(t){this.selectId=t;for(var e=1;e<=4;e++)this["img"+e].visible=e==t;this.updataByID(t)},t.prototype.updataByID=function(t){var e=this.model.getRemouldById(t),i=GearBeastConfig.getRemouldMax(t),s=GearBeastConfig.gettalentAttr(t,e.lv,e.l);if(this.lbAttrL.text=P7.FM5(s,"\n",{},GearBeastConfig.attribute),e.lv>=i)this.grpMax.visible=!0,this.grpBroke.visible=!1,this.grpLvUp.visible=!1,this.imgJt.visible=!1,this.grpHeadL.horizontalCenter=-85,this.lbAttrL.left=150,this.grpHeadN.visible=this.lbAttrN.visible=!1;else{this.grpMax.visible=!1,this.imgJt.visible=!0,this.grpHeadL.horizontalCenter=-190,this.lbAttrL.left=50,this.grpHeadN.visible=this.lbAttrN.visible=!0;var o=GearBeastConfig.getNew_talentByTL(t,e.lv+1),r=void 0,n=void 0,a=void 0;for(var h in a=5<=e.l?(this.grpBroke.visible=!0,this.grpLvUp.visible=!1,r=GearBeastConfig.gettalentAttr(t,e.lv+1,0),n=P7.str2kv(o.breaknum),"itemBroke"):(this.grpBroke.visible=!1,this.grpLvUp.visible=!0,r=GearBeastConfig.gettalentAttr(t,e.lv,e.l+1),n=P7.str2kv(o.itemnum),"itemLvUp"),this.lbAttrN.text=P7.FM5(r,"\n",{},GearBeastConfig.attribute),n){var p=n[h],l=N12.gID(p.k);this[a+h].data={itemData:{data:l,ct:0},isBottom:!1},this[a+h].imgNameBg.visible=!1,this[a+h].lbName.visible=!0,this[a+h].lbName.size=24;var c=N12.giC(p.k);c>=p.v?this[a+h].lbName.textFlow=M18.HTP.parse(O3.tr(8935,"",c+"/"+p.v)):this[a+h].lbName.textFlow=M18.HTP.parse(O3.tr(8935,c,"/"+p.v))}}},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastRemouldView)},t}(BaseEuiView);__reflect(GearBeastRemouldView.prototype,"GearBeastRemouldView");var GearBeastWorkShopView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="GearBeastWorkShopSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.GearBeast)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=this;i.btnMake.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.btnMakeEvent,i),i.btnLvUp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.btnLvUpEvent,i),i.btnRemould.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.btnRemouldEvent,i),i.btnRecycle.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.btnRecycleEvent,i),i.ZHH77(i.model)},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.btnMakeEvent=function(){App.VM.open(O7.GearBeastMakeView)},t.prototype.btnLvUpEvent=function(){App.VM.open(O7.GearBeastLvUpView)},t.prototype.btnRemouldEvent=function(){App.VM.open(O7.GearBeastRemouldView)},t.prototype.btnRecycleEvent=function(){App.VM.open(O7.GearBeastRecycleView)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof GearBeastModel&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){},t.prototype.closeSelf=function(){App.VM.close(O7.GearBeastWorkShopView)},t}(BaseEuiView);__reflect(GearBeastWorkShopView.prototype,"GearBeastWorkShopView");var GrowGuideBtnList=function(s){function t(t,e,i){return s.call(this,t,e,i)||this}return __extends(t,s),t.prototype.ZQ36=function(){for(var t=0;t<this.dataArray.length;t++){var e=this.getElementAt(t);e&&(this.selectedIndex==t?e.ZO62("down"):e.ZO62("up"))}},t}(ButtonList);__reflect(GrowGuideBtnList.prototype,"GrowGuideBtnList");var TE5=function(){function e(){}return e.FK35=function(t){e.init=t.guide_init,e.guide=t.guide_guide,e.levelup=t.guide_levelup,e.defeatguide=t.guide_defeatguide},e}();__reflect(TE5.prototype,"TE5");var HH4=function(){function t(){}return t.A1=10001,t.A2=10002,t.A3=10003,t}();__reflect(HH4.prototype,"HH4");var TB82=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.G55,"GrowGuideView",t,K17.UI),t.growGuideProxy=new TE83(t);var e=new TE82(t);return e.aLV(O7.HH30),e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.F74),t.rgF(HH4.A1,t.GU81,t),t.rgF(HH4.A2,t.GU82,t),t.rgF(HH4.A3,t.GY51,t),t}return __extends(t,i),t.prototype.GU81=function(){this.growGuideProxy.ZL45()},t.prototype.GU82=function(t){var e=this.gtM();e.initData(t.body),e.notify()},t.prototype.GY51=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TB82.prototype,"TB82");var TE82=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.initData=function(t){this.ts=t},t.prototype.notify=function(t){e.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TE82.prototype,"TE82");var TE83=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y19,e.ZW86,e),e.rSM(P4.X41,e.ZL46,e),e}return __extends(t,i),t.prototype.ZL45=function(){var t={type:P4.X40,body:{}};this.sSM(t)},t.prototype.ZL46=function(t){this.apF(HH4.A2,t)},t.prototype.ZW86=function(t){this.apF(HH4.A3,t)},t}(TG80);__reflect(TE83.prototype,"TE83");var GrowGuideRender=function(i){function t(){var t=i.call(this)||this;t.skinName="GrowGuideRenderSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t.grps=[t.gpAct1,t.gpAct2,t.gpAct3,t.gpAct4];for(var e=0;e<4;e++)t.grps[e].visible=t.grps[e].includeInLayout=!1;return t}return __extends(t,i),t.prototype.onAddToStage=function(){this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.onRemoveStage=function(){this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.dataChanged=function(){var t=M18.FL28(this.data.explain,"|");this.imgIcon.source=this.data.icon,this.showStar(this.data.star),this.showWay(),this.lbName.text=t[0],this.lbDes.text=t[1],this.btnGo.label=O3.tr(4482)},t.prototype.showWay=function(){if(-1==this.data.shortcut&&-1==this.data.activity)return this.currentState="state1",void(this.height=130);var t=M18.FL28(this.data.shortcut,","),e=M18.FL28(this.data.activity,","),i=0;if(this.resetLabel(),-1!=this.data.shortcut){for(var s=0,o=0;o<t.length;o++){var r=M18.FL28(t[o],":")[0],n=M18.FL28(t[o],":")[1];if(TE84.FG22(parseInt(n)))s+=1,this.grps[i].getChildAt(0).text=O3.tr(4478),(h=this.grps[i].getChildAt(o+1)).text=r,h.name=M18.FL28(t[o],":")[1],h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpTo,this),M18.FHH83(h)}0<s&&(i+=1)}if(-1!=this.data.activity){var a=0;for(o=0;o<e.length;o++){var h=this.grps[i].getChildAt(o+1),p=M18.FL28(e[o],";")[0],l=M18.FL28(e[o],";")[2];r=M18.FL28(p,":")[0],n=M18.FL28(p,":")[1];if(TE84.FG23(parseInt(n),this.data.type,l))a+=1,this.grps[i].getChildAt(0).text=O3.tr(4479),h.text=r,h.name=M18.FL28(p,":")[1],h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpTo,this),M18.FHH83(h)}0<a&&(i+=1)}this.currentState="state2";for(o=0;o<i;o++)this.grps[o].visible=this.grps[o].includeInLayout=!0;this.imgDown.height=20+20*i+8*(i-1),this.height=133+this.imgDown.height,this.isLbTextNull()||(this.currentState="state1",this.height=130)},t.prototype.isLbTextNull=function(){for(var t=0;t<4;t++)for(var e=1;e<4;e++){if(""!=this.grps[t].getChildAt(e).text)return!0}return!1},t.prototype.resetLabel=function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){this.grps[t].getChildAt(e).text=""}},t.prototype.showStar=function(t){this.imgSt0.source=1<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt1.source=2<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt2.source=3<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt3.source=4<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt4.source=5<=t?"v1_img_star1_png":"v1_img_star2_png"},t.prototype.onClickGo=function(){null!=this.data.sLink&&TG84.goToDlg(this.data)},t.prototype.jumpTo=function(t){var e={sLink:t.currentTarget.name};TG84.goToDlg(e)},t}(eui.ItemRenderer);__reflect(GrowGuideRender.prototype,"GrowGuideRender");var GrowGuideRenderSmall=function(i){function t(){var t=i.call(this)||this;t.skinName="GrowGuideSmallRenderSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t.grps=[t.gpAct1,t.gpAct2,t.gpAct3,t.gpAct4];for(var e=0;e<4;e++)t.grps[e].visible=t.grps[e].includeInLayout=!1;return t}return __extends(t,i),t.prototype.onAddToStage=function(){this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.onRemoveStage=function(){this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.setData=function(t){this.data=t;var e=M18.FL28(this.data.explain,"|");this.imgIcon.source=this.data.icon,this.showStar(this.data.star),this.showWay(),this.lbName.text=e[0],this.lbDes.text=e[1],this.btnGo.label=O3.tr(6413)},t.prototype.showWay=function(){if(-1==this.data.shortcut&&-1==this.data.activity)return this.currentState="state1",void(this.height=130);var t=M18.FL28(this.data.shortcut,","),e=M18.FL28(this.data.activity,","),i=0;if(this.resetLabel(),-1!=this.data.shortcut){for(var s=0,o=0;o<t.length;o++){var r=M18.FL28(t[o],":")[0],n=M18.FL28(t[o],":")[1];if(TE84.FG22(parseInt(n)))s+=1,this.grps[i].getChildAt(0).text=O3.tr(6414),(h=this.grps[i].getChildAt(o+1)).text=r,h.name=M18.FL28(t[o],":")[1],h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpTo,this),M18.FHH83(h)}0<s&&(i+=1)}if(-1!=this.data.activity){var a=0;for(o=0;o<e.length;o++){var h=this.grps[i].getChildAt(o+1),p=M18.FL28(e[o],";")[0],l=M18.FL28(e[o],";")[2];r=M18.FL28(p,":")[0],n=M18.FL28(p,":")[1];if(TE84.FG23(parseInt(n),this.data.type,l))a+=1,this.grps[i].getChildAt(0).text=O3.tr(6415),h.text=r,h.name=M18.FL28(p,":")[1],h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpTo,this),M18.FHH83(h)}0<a&&(i+=1)}this.currentState="state2";for(o=0;o<i;o++)this.grps[o].visible=this.grps[o].includeInLayout=!0;this.imgDown.height=20+20*i+8*(i-1),this.height=133+this.imgDown.height,this.isLbTextNull()||(this.currentState="state1",this.height=130)},t.prototype.isLbTextNull=function(){for(var t=0;t<4;t++)for(var e=1;e<4;e++){if(""!=this.grps[t].getChildAt(e).text)return!0}return!1},t.prototype.resetLabel=function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){this.grps[t].getChildAt(e).text=""}},t.prototype.showStar=function(t){this.imgSt0.source=1<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt1.source=2<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt2.source=3<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt3.source=4<=t?"v1_img_star1_png":"v1_img_star2_png",this.imgSt4.source=5<=t?"v1_img_star1_png":"v1_img_star2_png"},t.prototype.onClickGo=function(){App.VM.ZT95(),null!=this.data.sLink&&TG84.goToDlg(this.data)},t.prototype.jumpTo=function(t){App.VM.ZT95();var e={sLink:t.currentTarget.name};TG84.goToDlg(e)},t}(eui.ItemRenderer);__reflect(GrowGuideRenderSmall.prototype,"GrowGuideRenderSmall");var GrowGuideStrengthView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_guide_strength"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e);var i=TE84.FHH38();this.getList(i)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t}(GrowGuideListView);__reflect(GrowGuideStrengthView.prototype,"GrowGuideStrengthView");var GrowGuideTab=function(e){function t(){var t=e.call(this)||this;return t.skinName=GrowGuideTabSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.ZO62=function(t){var e="";if("up"==t)switch(this.data.name){case O3.tr(4100):e="v1_fonts_wybqc_png";break;case O3.tr(4101):e="v1_fonts_wysjc_png";break;case O3.tr(4102):e="v1_fonts_sxzc_png"}if("down"==t)switch(this.data.name){case O3.tr(4100):e="v1_fonts_wybq_png";break;case O3.tr(4101):e="v1_fonts_wysj_png";break;case O3.tr(4102):e="v1_fonts_sxz_png"}this.imgName.source=e},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgRedPoint.$setVisible(0<this.data.isShowRed),this.visible=this.includeInLayout=this.data.isShow},t}(eui.ItemRenderer);__reflect(GrowGuideTab.prototype,"GrowGuideTab");var GrowGuideUpgradeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_guide_level"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e);var i=TE84.FHH39();this.getList(i)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t}(GrowGuideListView);__reflect(GrowGuideUpgradeView.prototype,"GrowGuideUpgradeView");var TE84=function(){function u(){}return u.FHH38=function(){this.stList=[];var t=TE5.guide;for(var e in t){var i=t[e].lv,s=parseInt(M18.FL28(i,",")[0]),o=parseInt(M18.FL28(i,",")[1]);if(O4.getLv()>=s&&O4.getLv()<=o){var r={id:t[e].id,type:t[e].type,icon:t[e].icon,star:this.getStar(this.FK88(t[e].type),t[e].type,t[e].star),shortcut:t[e].shortcut,activity:this.FJ81(t[e]),explain:t[e].explain,sLink:t[e].jump,power:this.FK88(t[e].type)};this.stList.push(r)}}if(this.FG19(),this.stList&&!(this.stList.length<=0))return this.stList.sort(function(t,e){return t.star==e.star?t.id-e.id:e.star-t.star}),this.stList},u.FJ81=function(t){return"wxgame"!==platform.name?t.activity:t.activitywechat},u.FHH39=function(){this.upList=[];var t=TE5.levelup;for(var e in t){var i=t[e].lv,s=parseInt(M18.FL28(i,",")[0]),o=parseInt(M18.FL28(i,",")[1]);if(O4.getLv()>=s&&O4.getLv()<=o){var r={id:t[e].id,type:t[e].type,icon:t[e].icon,star:this.getStar(this.FK88(t[e].type),t[e].type,t[e].star),shortcut:t[e].shortcut,activity:t[e].activity,explain:t[e].explain,sLink:t[e].jump,power:this.FK88(t[e].type)};this.upList.push(r)}}if(this.FI52(),this.upList&&!(this.upList.length<=0))return this.upList.sort(function(t,e){return t.star==e.star?t.id-e.id:e.star-t.star}),this.upList},u.FG18=function(){var t=TE5.defeatguide,e=[];for(var i in t){var s={icon:t[i].icon,id:t[i].id,order:t[i].order};e.push(s)}return e},u.getStar=function(t,e,i){var s,o=0,r=parseInt(i);if(0<r&&r<=5)return r;s=7==e?t/r:t/u.FD6(e);var n=i,a=M18.FL28(n,"|")[0],h=M18.FL28(n,"|")[1],p=M18.FL28(n,"|")[2],l=M18.FL28(n,"|")[3],c=M18.FL28(n,"|")[4];return a<=s&&s<h?o=5:h<=s&&s<p?o=4:p<=s&&s<l?o=3:l<=s&&s<c?o=2:c<=s&&(o=1),o},u.FK88=function(t){var e=0,i=App.CM.gtM(O6.B98);switch(t){case 13:e=App.CM.gtM(O6.B91).ZHH92();break;case 18:e=App.CM.gtM(O6.C2).FJ45();break;case 20:e=App.CM.gtM(O6.C17).FJ45();break;case 19:e=App.CM.gtM(O6.B83).FJ45();break;case 21:e=App.CM.gtM(O6.C18).FJ45();break;case 22:e=i.ZF27();break;case 23:e=i.ZD98();break;case 25:e=i.ZD97();break;case 24:e=i.ZL14();break;case 16:e=O4.FC79();break;case 17:e=O4.FA85();break;case 4:e=THH1.FF8();break;case 6:e=THH23.FE49();break;case 1:e=O4.suitAttr();break;case 2:e=O4.FG86();break;case 7:e=THH23.FD51();break;case 9:e=O4.FA56();break;case 11:e=TF83.FHH56();break;case 14:e=O4.FF87();break;case 15:e=TC81.FB3()}return e},u.FD6=function(t){var e,i=App.CM.gtM(O6.B18).ts;if(i&&i.ts)for(var s in i.ts)if(s==t.toString()){e=i.ts[s];break}return e},u.FG19=function(){this.FI54(),this.FD97(),this.FD8(),this.FG21(),this.FC29(),this.FF3(),this.FG20(),this.FB30()},u.FI52=function(){this.FHH41(),this.FI53(),this.FHH40(),this.FD7()},u.FD7=function(){TG57.FI34()&&null!=this.FA26(27)&&this.upList.splice(this.FA26(27),1)},u.FHH40=function(){var t=App.CM.gtM(O6.C20).ZT31();t&&0<t.length&&t.length==TF47.FHH62()&&t[t.length-1].isFinish()&&null!=this.FA26(28)&&this.upList.splice(this.FA26(28),1)},u.FI53=function(){var t=TG73.FK2();if(!t)for(var e in t=[],L8.mission){var i=new MasterTaskVo;i.initData(L8.mission[e]),t.push(i)}if(0<t.length){for(var s=0;s<t.length;s++)if(!t[s].isFinish())return;null!=this.FA26(26)&&this.upList.splice(this.FA26(26),1)}},u.FHH41=function(){var t=App.CM.gtM(O6.B66);if(0<t.sanguoTake.length){for(var e=0,i=0;i<t.sanguoTake.length;i++)2==t.sanguoTake[i].v&&(e+=1);3==e&&null!=this.FA26(29)&&this.upList.splice(this.FA26(29),1)}},u.FA26=function(t){var e=0;if(this.upList&&0<this.upList.length)for(var i=0;i<this.upList.length;i++)if(this.upList[i].type==t){e=i;break}return e},u.FF3=function(){if(this.stList&&0<this.stList.length)for(var t=0;t<this.stList.length;t++)this.stList[t].power>=u.FD6(this.stList[t].type)&&null!=this.FC30(this.stList[t].type)&&this.stList.splice(this.FC30(this.stList[t].type),1)},u.FG20=function(){for(var t=App.CM.gtM(O6.B98).avaEquip,e=0,i=0;i<t.length;i++){if(t[i])e+=M10.ava[t[i].i.toString()].quality}50!=e&&60!=e||this.stList[0]&&null!=this.FC30(this.stList[0].type)&&this.stList.splice(this.FC30(this.stList[0].type),1)},u.FB30=function(){THH23.FD51()==parseInt(TE5.guide[7].star)&&this.stList[7]&&null!=this.FC30(this.stList[7].type)&&this.stList.splice(this.FC30(this.stList[7].type),1)},u.FC29=function(){App.CM.gtM(O6.B91);var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l,i=t.avatarInfo.v;(parseInt(K19.gIV("animalLv"))<=e||1==K18.vip[i].openanimal)&&null!=this.FC30(8)&&this.stList.splice(this.FC30(8),1)},u.FG21=function(){App.CM.gtM(O6.B42);TF83.FJ99()&&null!=this.FC30(10)&&this.stList.splice(this.FC30(10),1)},u.FD8=function(){var t=App.CM.gtM(O6.C3);t.war&&2==t.war.length&&null!=this.FC30(5)&&this.stList.splice(this.FC30(5),1)},u.FD97=function(){3==App.CM.gtM(O6.C12).battleList.length&&null!=this.FC30(3)&&this.stList.splice(this.FC30(3),1)},u.FI54=function(){var t=App.CM.gtM(O6.B89);t.myLegion&&t.myLegion.legion&&null!=this.FC30(12)&&this.stList.splice(this.FC30(12),1)},u.FC30=function(t){var e;if(this.stList&&0<this.stList.length)for(var i=0;i<this.stList.length;i++)if(this.stList[i].type==t){e=i;break}return e},u.FG22=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.l;switch(t){case 903:if(N17.FF90()<=e)return!0;break;case 1603:if(parseInt(L7.gIV("needLevel"))<=e)return!0;break;case 1711:return!0}},u.FG23=function(t,e,i){void 0===e&&(e=0);var s=TF59.FB15(F7.A56),o=TF59.FB15(F7.A10),r=TF59.FB15(F7.A14),n=App.CM.gtM(O6.B82).avatarInfo.l;switch(t){case 2001:if(r.openState&&Number(I8.gIV("openLevel"))<=n)if(r.treasureData.parVer==i)return!0;break;case 2002:if(s.openState)if(s.dialData.parVer==i)return!0;break;case 2003:if(o.openState&&Number(TD79.gIV("openLevel"))<=n)if(o.pointsetsData.parVer==i)return!0;break;case 3101:var a=App.CM.gtM(O6.B46);if(a.openState)if(a.godTrialData.parVer==i)return!0;break;case 2402:var h=App.CM.gtM(O6.A16);if(h.openState)if(h.data.parVer==i)return!0;break;case 2403:var p=App.CM.gtM(O6.B67);if(18==e&&null!=p.shootupData&&p.shootupData.parVer==J12.A5&&p.openState&&1!=p.closeEnter)return!0;if(19==e&&null!=p.shootupData&&p.shootupData.parVer==J12.A4&&p.openState&&1!=p.closeEnter)return!0;if(20==e&&null!=p.shootupData&&p.shootupData.parVer==J12.A6&&p.openState&&1!=p.closeEnter)return!0;if(21==e&&null!=p.shootupData&&p.shootupData.parVer==J12.A7&&p.openState&&1!=p.closeEnter)return!0}return!1},u}();__reflect(TE84.prototype,"TE84");var GrowGuideView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="GrowGuideSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.VM.rgS(O7.G55,O7.B35,"GrowGuideStrengthView",this.updateGroup),App.VM.rgS(O7.G55,O7.B92,"GrowGuideUpgradeView",this.updateGroup),App.VM.rgS(O7.G55,O7.F22,"GrowGuideAimView",this.updateGroup);var t=[O3.tr(4100),O3.tr(4101),O3.tr(4102)],e=[O7.B35,O7.B92,O7.F22];this.btnList=new GrowGuideBtnList(t,e,this.ZQ23.bind(this)),this.btnList.init(GrowGuideTab),this.gpBtn.addChild(this.btnList),this.btnList.setListGap(-3),this.bttip.textFlow=M18.HTP.parse(O3.tr(4487))},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var i=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),App.DelayOptManager.ZE59(this,function(){if(i.parent&&App.VM.isOpen(O7.I4)){var t=App.VM.gOV(O7.I4),e=t.parent.getChildIndex(t);i.parent.setChildIndex(i,e-1)}});var s=t[0]||O7.F22;2==t.length?this.tid=t[1]:this.tid=void 0,this.ZQ23(s),App.K16.doFrame(1,1,function(){i.btnList.ZQ36()},this),this.imgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.uBM=function(t,e){o.prototype.uBM.call(this,t,e)},t.prototype.ZQ23=function(t){var e,i=App.CM.gtM(O6.B82).avatarInfo;switch(t){case O7.B35:case O7.B92:this.btnList.ZM66(t),this.bttip.visible=!0;break;case O7.F22:var s=App.CM.gtM(O6.B27);e=TD83.init.unlockLv.value;var o=TD83.init.unlockDate.value;if(i.l<e||s.day<o){var r=K18.init.commonDesc1.value;return P18.sDP(M18.format(r,[e])),-1}this.btnList.ZM66(t,this.tid),this.bttip.visible=!1}this.btnList.ZQ36()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.imgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.ZL47=function(){return this.btnClose.parent.localToGlobal(this.btnClose.x,this.btnClose.y)},t}(BaseEuiView);__reflect(GrowGuideView.prototype,"GrowGuideView");var N4=function(){function r(){}return r.ZS48=function(t){switch(t){case r.avartar_fit_btn:return[{x:298,y:686}];case r.skill_lvUp_btn:return[{x:303,y:754}];case r.chapter_boss_btn:return[{x:304,y:846,content:"baseGroup"}];case r.hero_aotoUpgrade_btn:return[{x:448,y:736}];case r.forge_strong_btn:return[{x:300,y:752}];case r.chat_send_btn:App.VM.gOV(O7.I85);return[{x:461,y:138,content:"figerGp",dir:2}];case r.horse_autoUpgrade_btn:return[{x:432,y:724}];case r.smelt_btn:return[{x:466,y:722,content:"baseGroup"}];case r.wrold_dingjun_btn:return[{x:60,y:150,content:"grpMap"}];case r.battle_auto_btn:return[{x:68,y:125,content:"baseGroup"}];case r.equip_refine_btn:case r.equip_forging_btn:case r.equip_gen_btn:return[{x:300,y:752}];case r.single_boss_btn:return[{x:510,y:135,content:"baseGroup"}];case r.throughdragon_btn:return[{x:448,y:760}];case r.hero_active_btn:return[{x:307,y:729}];case r.hero_battle_btn:return[{x:488,y:465}];case r.chapter_boss_btn_2:return[{x:304,y:846,content:"baseGroup"}];case r.seven_login_btn:return[{x:480,y:80,content:"listView"}];case r.aim_btn:return[{x:210,y:50,content:"scroll"}]}},r.getClosePos=function(t){switch(t){case r.basePanel:return{x:569,y:882};case r.commondlg:return{x:50,y:40};case r.smelt:return{x:569,y:882};case r.battle:return{x:96,y:162};case r.battle2:return{x:488,y:305};case r.modelShape:return{x:266,y:449};case r.heroGuide:return{x:205,y:-100};case r.battleClose:return{x:457,y:-90};case r.growGuideAimClose:var e=600,i=140,s=App.VM.gOV(O7.G55);if(s){var o=s.ZL47();e=P7.FJ17()?o.x+35:o.x<=600?600:700,i=o.y<200?140:250}return{x:e,y:i}}},r.avartar_fit_btn=1,r.skill_lvUp_btn=2,r.chapter_boss_btn=3,r.hero_aotoUpgrade_btn=4,r.forge_strong_btn=5,r.chat_send_btn=6,r.horse_autoUpgrade_btn=7,r.smelt_btn=8,r.wrold_dingjun_btn=9,r.battle_auto_btn=10,r.equip_refine_btn=11,r.equip_forging_btn=12,r.equip_gen_btn=13,r.single_boss_btn=14,r.throughdragon_btn=15,r.hero_active_btn=16,r.hero_battle_btn=17,r.chapter_boss_btn_2=998,r.seven_login_btn=993,r.aim_btn=994,r.basePanel=100,r.commondlg=101,r.smelt=1e3,r.battle=1001,r.battle2=1002,r.modelShape=1003,r.heroGuide=1004,r.battleClose=1005,r.growGuideAimClose=1006,r}();__reflect(N4.prototype,"N4");var GuideMaskBackgroud=function(e){function t(){var t=e.call(this)||this;return t._stageWidth=0,t._stageHeight=0,t._bgs=new Array,t.touchEnabled=!0,t}return __extends(t,e),t.prototype.init=function(t,e){this._stageWidth=t,this._stageHeight=e},t.prototype.draw=function(t){this.cacheAsBitmap=!1,this._deductRec=t,this.ZS49();var e=Math.max(t.x,0),i=Math.max(t.y,0),s=Math.min(t.x+t.width,this._stageWidth),o=Math.min(t.y+t.height,this._stageHeight);this.addBg(0,0,this._stageWidth,i),this.addBg(0,i,e,t.height),this.addBg(s,i,this._stageWidth-s,t.height),this.addBg(0,o,this._stageWidth,this._stageHeight-o),this.width=this._stageWidth,this.height=this._stageHeight,this.cacheAsBitmap=!0},t.prototype.destroy=function(){this.removeChildren(),this._bgs=[]},t.prototype.ZS49=function(){for(;this.numChildren;){var t=this.removeChildAt(0);this._bgs.push(t)}},t.prototype.addBg=function(t,e,i,s){var o;this._bgs.length?(o=this._bgs.pop()).graphics.clear():o=new egret.Shape,o.graphics.beginFill(0,.5),o.graphics.drawRect(t,e,i,s),o.graphics.endFill(),this.addChild(o)},t.prototype.hitTest=function(t,e,i){return this._deductRec&&this._deductRec.contains(t,e)?null:this},t}(egret.Sprite);__reflect(GuideMaskBackgroud.prototype,"GuideMaskBackgroud");var TG68=function(t){function h(){return null!==t&&t.apply(this,arguments)||this}return __extends(h,t),h.FG24=function(t){return this.finger&&this.finger.parent&&App.TF56.ZJ66(this.finger),this.finger||this.FG25(),t.addChild(this.finger),this.guideView=t,this.finger},h.FL77=function(t,e,i,s){if(void 0===s&&(s=1),!TG67.showFigerAct)return!1;var o=h.FG24(t);return o.x=e,o.y=i,o.visible=!0,o.showEff(),o.setDir(s),!0},h.FHH42=function(t,e){var i,s;switch(e){case N4.basePanel:case N4.smelt:var o=App.VM.gOV(t);if(o&&o.getByName("baseGroup")){if(!(i=o.getByName("baseGroup")))return;s=N4.getClosePos(e)}}this.FG24(i);var r=this.FG25();r.setDir(1),r.x=s.x,r.y=s.y,r.moveTo(s)},h.FJ82=function(t,e){var i,s;switch(e){case N4.basePanel:case N4.smelt:if((o=App.VM.gOV(t))&&o.getByName("baseGroup")){if(!(i=o.getByName("baseGroup")))return;s=N4.getClosePos(e)}break;case N4.growGuideAimClose:var o;if(o=App.VM.gOV(t)){if(!(i=o))return;s=N4.getClosePos(e)}}var r=new egret.Point;r.x=this.finger.x,r.y=this.finger.y;var n=P7.FJ14(r,this.finger,i);this.FG24(i);var a=this.FG25();a.setDir(1),a.x=n.x,a.y=n.y,a.moveTo(s)},h.FK89=function(){this.finger&&(h.guideView=null,App.TF56.ZJ66(this.finger))},h.FD98=function(t){h.finger&&(h.finger.visible=t)},h.FG25=function(){return this.finger||(this.finger=new GuideFinger,this.finger.touchEnabled=!1,this.finger.anchorOffsetX=119,this.finger.anchorOffsetY=119),this.finger},h.FL78=function(){if(this.currStepId){var t=App.CM.gtM(O6.C20).ZM12();if("993"!=t.fingerId||t.nFinish)if("994"!=t.fingerId||t.nFinish)if("995"!=t.fingerId&&"992"!=t.fingerId||t.nFinish)if("991"!=t.fingerId||t.nFinish){var e=App.VM.gOV(O7.I86);if(e){if("998"==t.fingerId){var i=App.CM.gtM(O6.B64),s=i.ZV44();i.chData.s>=s.time&&0==i.chData.p?h.FD98(!0):h.FD98(!1)}else h.FD98(!0);this.FK90(e.homeTaskLayer,e.lyTask.width/2,e.lyTask.height/2,1)}else this.FK89()}else{(r=App.VM.gOV(O7.HH30))&&r.daily.visible&&this.FK90(r.daily)}else{var o=App.VM.gOV(O7.I39);this.FK90(o.mainCity,void 0,void 0)}else{var r;(r=App.VM.gOV(O7.HH30))&&r.strength.visible&&this.FK90(r.strength)}else(r=App.VM.gOV(O7.HH30))&&r.sevenLogin.visible&&this.FK90(r.sevenLogin)}else this.FK89()},h.FK90=function(t,e,i,s){if(void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===s&&(s=1),t){var o=this.FG25(),r=new egret.Point;if(void 0===e&&(e=t.width/2),void 0===i&&(i=t.height/2),o.parent){r.x=o.x,r.y=o.y;var n=P7.FJ14(r,o,t);o.x=n.x,o.y=n.y}else o.x=e,o.y=i;this.FG24(t),o.setDir(s);var a=new egret.Point;a.x=e,a.y=i,o.moveTo(a)}else Log.trace("错误的view")},h.pause=function(){h.pauseState=!!h.finger&&h.finger.visible,h.finger.visible=!1},h.resume=function(){h.finger&&(h.finger.visible=h.pauseState)},h.FD99=function(t,e){return!!t.guide_finger_msg&&1==t.guide_finger_msg[e]},h.FD9=function(t,e,i,s){if(void 0===i&&(i=!1),t&&e){if(!this.currStepId)return;if(App.CM.gtM(O6.C20).ZJ29(this.currStepId))return;if(this.temSetps&&this.temSetps[0]&&this.temSetps[0]==e){var o=this.FG25();if(o.visible=!s||s.visible,t.parent){t.currStepId=this.currStepId;var r=N4.ZS48(e)[0];if(!r)return;if(this.guideView){var n=new egret.Point;n.x=this.finger.x,n.y=this.finger.y;var a=this.FG25();a.setDir(r.dir||1);var h=void 0,p=void 0;if(p=r.content?t.getByName(r.content):t,h=P7.FJ14(n,a,p),this.FG24(p),e==N4.chat_send_btn){var l=P7.FJ17();if(r.x=l?590:App.TG37.getStage().stageWidth-50,g=App.VM.gOV(O7.I85)){var c=N18.FC84(),u=0;for(var d in c)u+=1;var v=Math.ceil(Math.random()*u)||1;g.setInputText(c[v].content)}}if(this.guideView==p&&a.x==r.x&&a.y==r.y)return;a.x=h.x,a.y=h.y,a.moveTo(r)}else{var f=this.FG25();f.setDir(r.dir||1);h=void 0,p=void 0;if(p=r.content?t.getByName(r.content):t,this.FG24(p),e==N4.chat_send_btn){var g;l=P7.FJ17();if(r.x=l?590:App.TG37.getStage().stageWidth-50,g=App.VM.gOV(O7.I85)){c=N18.FC84(),u=0;for(var d in c)u+=1;v=Math.ceil(Math.random()*u);g.setInputText(c[v].content)}}f.x=r.x,f.y=r.y}}}}},h.FG26=function(t){var e=t.getFingerIds();e&&e[0]&&0!=parseInt(e[0])?(this.temSetps=P7.copyTab(e),this.currStepId!=t.nId&&(this.currStepId=t.nId)):this.currStepId=null},h.update=function(t){var e=(t=t||App.CM.gtM(O6.C20)).ZM12();if(e){var i=App.SceneManager.getCurrScene();if(i==M2.A5){if("992"==e.fingerId)(a=App.VM.gOV(O7.I64))&&a.ZM96(t);else if("995"==e.fingerId){if((a=App.VM.gOV(O7.I39))&&a.ZI95(t),t.homeExtra){var s=App.VM.gOV(O7.I64);s&&s.ZM96(t)}}}else if(i==M2.A4){var o=App.VM.gOV(O7.I86);if(h.currStepId==e.nId)if("999"==e.fingerId)t.ZJ29(e.nId)?o.ZT32():h.FK89();else if("998"==e.fingerId)if(t.ZJ29(e.nId))h.guideView?h.FD98(!0):o.ZT32();else{var r=App.CM.gtM(O6.B64),n=r.ZV44();r.chData.s>=n.time&&0==r.chData.p?h.guideView?h.FD98(!0):o.ZT32():h.FK89()}else if("3"==e.fingerId)h.guideView?h.FD98(!0):o.ZT32();else if("993"==e.fingerId||"994"==e.fingerId||"995"==e.fingerId||"991"==e.fingerId){var a;h.guideView==o.homeTaskLayer&&h.FL78(),(a="995"==e.fingerId?App.VM.gOV(O7.I39):App.VM.gOV(O7.HH30))?a.ZI95(t):o.ZT32(),t.ZJ29(e.nId)&&(h.guideView||o.ZT32())}else"992"==e.fingerId||t.homeExtra?t.ZJ29(e.nId)?o.ZT32():h.guideView!=o.homeTaskLayer&&h.guideView||h.FL78():h.guideView||o.ZT32();else h.FK89()}}},h.fingerUis={},h}(BaseClass);__reflect(TG68.prototype,"TG68");var GuideFinger=function(e){function t(){var t=e.call(this)||this;return t.type=1,t.skinName="guideFingerSkin",t}return __extends(t,e),t.prototype.showEff=function(){egret.Tween.removeTweens(this),this.bg.visible=!0,this.bg.scaleX=1,this.bg.scaleY=1,this.finger.visible=!0;var t=1==this.type?1:-1;this.finger.scaleX=t,this.finger.scaleY=t,egret.Tween.get(this.bg,{loop:!0}).to({scaleX:.65,scaleY:.65},600).to({scaleX:1,scaleY:1},600),egret.Tween.get(this.finger,{loop:!0}).to({scaleX:.8*t,scaleY:.8*t},600).to({scaleX:1*t,scaleY:1*t},600)},t.prototype.stopEff=function(){egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.finger),this.bg.visible=!1,this.finger.scaleX=1,this.finger.scaleY=1},t.prototype.moveTo=function(t,e){void 0===e&&(e=300),this.stopEff(),egret.Tween.removeTweens(this),egret.Tween.get(this).to({x:t.x,y:t.y},e).call(this.showEff,this)},t.prototype.setDir=function(t){if(this.type!=t){switch(t){case 1:this.finger.scaleX=1,this.finger.scaleY=1,this.finger.x=178,this.finger.y=186;break;case 2:this.finger.scaleX=-1,this.finger.scaleY=-1,this.finger.x=60,this.finger.y=42}this.type=t}},t.prototype.destroy=function(){egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.finger)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.width=0,this.height=0},t}(eui.Component);__reflect(GuideFinger.prototype,"GuideFinger");var N14=function(){function a(){}return a.FK35=function(t){a.init=t.hero_init,a.base=t.hero_base,a.aptitude=t.hero_aptitude,a.apti_lv=t.hero_apti_lv,a.lv=t.hero_lv,a.evo=t.hero_evo,a.skill_evo=t.hero_skill_evo,a.skill_base=t.hero_skill_base,a.skill_mono=t.hero_skill_mono,a.skill_group=t.hero_skill_group,a.skill_star=t.hero_skill_star,a.collection=t.hero_collection,a.soul_base=t.hero_soul_base,a.soul_skill=t.hero_soul_skill,a.soul_reward=t.hero_soul_reward,a.prestige_base=t.hero_prestige_base,a.prestige_skill=t.hero_prestige_skill,a.prestige_reward=t.hero_prestige_reward,a.prestigeTempExpPill=this.FHH33(1),a.soulTempExpPill=this.FHH33(2),a.lvAttr=this.FK91()},a.FF4=function(t){return a.base[t]},a.FJ83=function(){return a.base},a.getHeroByModel=function(t){for(var e in a.base)if(a.base[e].model==t)return a.base[e]},a.FK91=function(){parseInt(a.init.lvExp.value);a.lvAttr=[];var t=this.FHH44();for(var e in t){0<t[e].reqexp&&parseInt(e)}for(var i=1;i<this.lv;i++){var s=a.lv[i];M10.gAG(s.add)}},a.FF5=function(t){return a.aptitude[t]},a.FF6=function(t){return a.apti_lv[t]},a.FJ84=function(){return a.apti_lv},a.FL79=function(t,e){for(var i in a.evo){var s=a.evo[i];if(s.lv==t&&s.costtype==e)return s}},a.FHH43=function(){return a.collection},a.gIV=function(t){return a.init[t].value},a.FD10=function(t){return a.lv[t]},a.FHH44=function(){return a.lv},a.FHH33=function(t){var e={};if(!this.init)return e;switch(t){case 1:for(var i=a.gIV("expItem1"),s=M18.FL28(i,";",":"),o=0;o<s.length;o++){e[(r=s[o])[0]]=r}break;case 2:for(i=a.gIV("expItem2"),s=M18.FL28(i,";",":"),o=0;o<s.length;o++){var r;e[(r=s[o])[0]]=r}}return e},a.FG27=function(t,e){switch(e){case 1:return this.prestigeTempExpPill[t];case 2:return this.soulTempExpPill[t]}},a.FB72=function(t){return a.soul_base[t]},a.FA46=function(t){return a.prestige_base[t]},a.FE1=function(t){return a.skill_base[t]},a.FA68=function(t){var e=a.FF4(t);if(e){var i=new HeroData(e);if(i){for(var s=i.beSkillList,o=[],r=0;r<s.length;r++){var n={skillData:a.FE1(s[r]),isLock:!1};o.push(n)}for(r=s.length;r<6;r++){n={isLock:!0};o.push(n)}return o}}},a.FB73=function(t){var e=void 0;for(var i in a.base){var s=a.base[i];if(s&&s.compose){var o=s.compose.split(";");if(o&&2==o.length&&o[0].split(":")[0]==t)return e=s}}return e},a}();__reflect(N14.prototype,"N14");var O8=function(){function t(){}return t.A96=12,t.B4={HORSE:1,FAQI:2,WEAPON:3,WING:4,FORMATE:5,GENERERAL:6,PRESTIGE:7,SOUL:8,ANIMAL:9,PSYCHIC:10,SPIRIT:11,ASOUL:12},t.B10={PRESTIGE:1,SOUL:2},t.A83=10001,t.A77=10002,t.B5=10003,t.B6=10004,t.B7=10005,t.B8=10006,t.A97=10007,t.A98=10008,t.A78=10009,t.A79=10010,t.A86=10011,t.A87=10012,t.A34=10013,t.A35=10014,t.A56=10015,t.A57=10016,t.A69=10017,t.A70=10018,t.A58=10019,t.A44=10020,t.A45=10021,t.A36=10022,t.A71=10023,t.A65=10024,t.A99=10025,t.A88=10026,t.A37=10027,t.A27=10028,t.A66=10029,t.A59=10030,t.A46=10031,t.A47=10032,t.A20=10033,t.A11=10034,t.B1=10035,t.A89=10036,t.A90=10037,t.A91=10038,t.A38=10039,t.A39=10040,t.A12=10041,t.A13=10042,t.A48=10043,t.A49=10044,t.A21=10045,t.A14=10046,t.A60=10047,t.A50=10048,t.A3=10049,t.A4=10050,t.A22=10051,t.A23=10052,t.A67=10053,t.A61=10054,t.A1=10055,t.A2=10056,t.A15=10057,t.A16=10058,t.A5=10059,t.A6=10060,t.A28=10061,t.A29=10062,t.B2=10063,t.A92=10064,t.A84=10065,t.A80=10066,t.A62=10067,t.A51=10068,t.A24=10069,t.A17=10070,t.A52=10071,t.A53=10072,t.A18=10073,t.A19=10074,t.B11=10075,t.A93=10076,t.A85=10077,t.A30=10078,t.A31=10079,t.A7=10080,t.A8=10081,t.A94=10082,t.A95=10083,t.A81=10084,t.A72=10085,t.A40=10086,t.A41=10087,t.A9=10088,t.A10=10090,t.A82=10091,t.A73=10092,t.A74=10093,t.A68=10094,t.B3=10095,t.A32=10096,t.A33=10097,t.A25=10098,t.A26=10099,t.A42=10100,t.A43=10101,t.A63=10102,t.A64=10103,t.A75=10104,t.A76=10105,t.B9=10106,t.A54=10107,t.A55=10108,t.HEROVEIN_LOADDATA_REQ=10109,t.HEROVEIN_LOADDATA_RES=10110,t.HEROVEIN_LVUP_REQ=10111,t.HEROVEIN_LVUP_RES=10112,t.HEROVEIN_UPGRADE_REQ=10113,t.HEROVEIN_UPGRADE_RES=10114,t}();__reflect(O8.prototype,"O8");var TE85=function(i){function t(){var t=i.call(this)||this,e=new TG98(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.HH96),e.aLV(O7.I13),e.aLV(O7.E3),e.aLV(O7.G70),e.aLV(O7.I62),e.aLV(O7.D20),e.aLV(O7.F85),e.aLV(O7.B74),e.aLV(O7.G48),e.aLV(O7.A38),e.aLV(O7.B75),e.aLV(O7.C44),e.aLV(O7.G71),e.aLV(O7.E69),e.aLV(O7.E70),e.aLV(O7.A39),e.aLV(O7.F86),e.aLV(O7.C45),e.aLV(O7.E4),e.aLV(O7.B76),e.aLV(O7.E90),e.aLV(O7.G72),e.aLV(O7.G73),e.aLV(O7.B27),e.aLV(O7.D21),e.aLV(O7.A62),e.aLV(O7.I39),e.aLV(O7.I70),e.aLV(O7.E66),e.aLV(O7.HeroVeinMain),e.aLV(O7.HeroVeinLvView),e.aLV(O7.HeroVeinClassView),App.VM.register(O7.HH96,"HeroMainView",t,K17.UI_Main),App.VM.register(O7.I13,"HeroAttrInfoView",t,K17.UI_Main_TOP),App.VM.register(O7.E3,"HeroTotalAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.G70,"DlgHeroRenameView",t,K17.UI_Popup),App.VM.register(O7.I62,"DlgHeroZzView",t,K17.UI_Main_TOP),App.VM.register(O7.D20,"HeroXiulianInfo",t,K17.UI_Popup),App.VM.register(O7.F85,"DlgHeroSkillView",t,K17.UI_Main_TOP),App.VM.register(O7.B74,"HeroSkillInfoPopView",t,K17.UI_Tips),App.VM.register(O7.G48,"DlgHeroJxView",t,K17.UI_Main_TOP),App.VM.register(O7.A38,"HeroPrestigeAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.B75,"HeroSoulAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.C44,"DlgHeroAttrDanView",t,K17.UI_Main_TOP),App.VM.register(O7.G71,"DlgHeroGoBattle",t,K17.UI_Popup),App.VM.register(O7.E69,"DlgHeroTjSjView",t,K17.UI_Main_TOP),App.VM.register(O7.E70,"DlgHeroTujianInfo",t,K17.UI_Tips),App.VM.register(O7.A39,"DlgHeroSkillUpgradeView",t,K17.UI_Main_TOP),App.VM.register(O7.F86,"DlgHeroAchieveView",t,K17.UI_Main_TOP),App.VM.register(O7.C34,"HeroShareDetailView",t,K17.UI_Main_TOP),App.VM.register(O7.E66,"HeroCardMergeView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroVeinMain,"HeroVeinMainView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroVeinClassTipView,"HeroVeinClassTipView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroVeinClassLvView,"HeroVeinClassLvView",t,K17.UI_Main_TOP),t.heroProxy=new TG99(t),t.rgF(O8.A83,t.GN32,t),t.rgF(O8.A77,t.GL39,t),t.rgF(O8.A58,t.GN33,t),t.rgF(O8.A44,t.GL40,t),t.rgF(O8.A45,t.GE64,t),t.rgF(O8.A36,t.GD71,t),t.rgF(O8.A71,t.GJ63,t),t.rgF(O8.A65,t.GHH68,t),t.rgF(O8.A99,t.GR11,t),t.rgF(O8.A88,t.GP27,t),t.rgF(O8.A37,t.GD72,t),t.rgF(O8.A27,t.GC77,t),t.rgF(O8.A66,t.GHH69,t),t.rgF(O8.A59,t.GF85,t),t.rgF(O8.A20,t.GB93,t),t.rgF(O8.A11,t.GB28,t),t.rgF(O8.B1,t.GR12,t),t.rgF(O8.A89,t.GP28,t),t.rgF(O8.A21,t.GB94,t),t.rgF(O8.A14,t.GB29,t),t.rgF(O8.A60,t.GF86,t),t.rgF(O8.A50,t.GE65,t),t.rgF(O8.A67,t.GHH70,t),t.rgF(O8.A61,t.GF87,t),t.rgF(O8.B2,t.GR13,t),t.rgF(O8.A92,t.GP29,t),t.rgF(O8.A84,t.GN34,t),t.rgF(O8.A80,t.GL41,t),t.rgF(O8.A62,t.GF88,t),t.rgF(O8.A51,t.GE66,t),t.rgF(O8.A24,t.GB95,t),t.rgF(O8.A17,t.GB30,t),t.rgF(O8.A93,t.GP30,t),t.rgF(O8.A85,t.GN35,t),t.rgF(O8.A82,t.GL42,t),t.rgF(O8.A73,t.GJ64,t),t.rgF(O8.A74,t.GJ65,t),t.rgF(O8.B9,t.GX61,t),t.rgF(O8.B5,t.GW40,t),t.rgF(O8.B6,t.GT16,t),t.rgF(O8.B7,t.GW41,t),t.rgF(O8.B8,t.GT17,t),t.rgF(O8.A97,t.GU83,t),t.rgF(O8.A98,t.GR9,t),t.rgF(O8.A78,t.GP22,t),t.rgF(O8.A79,t.GHH64,t),t.rgF(O8.A86,t.GT18,t),t.rgF(O8.A87,t.GP23,t),t.rgF(O8.A34,t.GF79,t),t.rgF(O8.A35,t.GD65,t),t.rgF(O8.A56,t.GL36,t),t.rgF(O8.A57,t.GHH65,t),t.rgF(O8.A69,t.GN28,t),t.rgF(O8.A70,t.GJ58,t),t.rgF(O8.A46,t.GHH66,t),t.rgF(O8.A47,t.GE61,t),t.rgF(O8.A90,t.GT19,t),t.rgF(O8.A91,t.GP24,t),t.rgF(O8.A38,t.GN29,t),t.rgF(O8.A39,t.GJ59,t),t.rgF(O8.A12,t.GHH67,t),t.rgF(O8.A13,t.GE62,t),t.rgF(O8.A48,t.GP25,t),t.rgF(O8.A49,t.GL37,t),t.rgF(O8.A3,t.GB27,t),t.rgF(O8.A4,t.GA65,t),t.rgF(O8.A22,t.GE63,t),t.rgF(O8.A23,t.GC76,t),t.rgF(O8.A1,t.GD66,t),t.rgF(O8.A2,t.GB89,t),t.rgF(O8.A15,t.GJ60,t),t.rgF(O8.A16,t.GF80,t),t.rgF(O8.A5,t.GB90,t),t.rgF(O8.A6,t.GA94,t),t.rgF(O8.A28,t.GF81,t),t.rgF(O8.A29,t.GD67,t),t.rgF(O8.A18,t.GD68,t),t.rgF(O8.A19,t.GB91,t),t.rgF(O8.A52,t.GJ61,t),t.rgF(O8.A53,t.GF82,t),t.rgF(O8.B11,t.GT16,t),t.rgF(O8.A7,t.GB92,t),t.rgF(O8.A8,t.GA95,t),t.rgF(O8.A30,t.GF83,t),t.rgF(O8.A31,t.GD69,t),t.rgF(O8.A94,t.GT20,t),t.rgF(O8.A95,t.GP26,t),t.rgF(O8.A9,t.GF84,t),t.rgF(O8.A10,t.GD70,t),t.rgF(O8.A40,t.GN30,t),t.rgF(O8.A41,t.GJ62,t),t.rgF(O8.A32,t.GR10,t),t.rgF(O8.A33,t.GN31,t),t.rgF(O8.B3,t.GR14,t),t.rgF(O8.A25,t.GF90,t),t.rgF(O8.A26,t.GF91,t),t.rgF(O8.A42,t.GT21,t),t.rgF(O8.A43,t.GT22,t),t.rgF(O8.A63,t.GL43,t),t.rgF(O8.A64,t.GL44,t),t.rgF(O8.A75,t.heroProxy.ZO69,t.heroProxy),t.rgF(O8.A76,t.GL38,t),t.rgF(O8.A54,t.GN37,t),t.rgF(O8.A55,t.GN38,t),t.rgF(O8.HEROVEIN_LOADDATA_REQ,t.heroVeinLoadReq,t),t.rgF(O8.HEROVEIN_LOADDATA_RES,t.heroVeinLoadRes,t),t.rgF(O8.HEROVEIN_LVUP_REQ,t.heroVeinLvUpReq,t),t.rgF(O8.HEROVEIN_LVUP_RES,t.heroVeinLvUpRes,t),t.rgF(O8.HEROVEIN_UPGRADE_REQ,t.heroVeinUpGradeReq,t),t.rgF(O8.HEROVEIN_UPGRADE_RES,t.heroVeinUpGradeRes,t),t}return __extends(t,i),t.prototype.GW40=function(){this.gtM();return this.heroProxy.ZO66()},t.prototype.GT16=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();if(e.loadHeroData(t.body),"wxgame"===platform.name){var i=0;if(!e.heroList)return;for(var s in e.heroList)e.heroList[s].isOwn&&i++;var o={num:i};"P0004185"===platform.gameId||"P0004186"===platform.gameId||"P0004389"===platform.gameId||"P0004390"===platform.gameId||"P0004758"===platform.gameId||"P0004803"===platform.gameId||"P0004870"===platform.gameId||"P0004869"===platform.gameId||"P0004890"===platform.gameId||"P0004891"===platform.gameId||"P0004901"===platform.gameId||"P0004896"===platform.gameId||"P0004973"===platform.gameId||"P0004983"===platform.gameId||"P0005515"===platform.gameId||"P0005516"===platform.gameId||"P0006016"===platform.gameId||"P0006017"===platform.gameId||platform.setSort(o)}}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW41=function(t,e){this.heroProxy.ZO67(t,e)},t.prototype.GT17=function(t){if(200==t.head.state){var e=this.gtM();e.heroUpgrade(t.body),e.notify(P4.X76)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU83=function(t){this.gtM();this.heroProxy.ZL54(t)},t.prototype.GR9=function(t){},t.prototype.GP22=function(t,e){this.heroProxy.ZF46(t,e)},t.prototype.GHH64=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.heroUpBattle(t.body),e.notify(P4.U47)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT18=function(t){this.heroProxy.ZI81(t)},t.prototype.GP23=function(t){if(t&&t.head&&200==t.head.state){P18.sDP(O3.tr(1418)),this.apF(O8.A65);var e=this.gtM();e.heroRename(t.body),e.notify(P4.W28)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GF79=function(t){this.heroProxy.ZB42(t)},t.prototype.GD65=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZG85(t.body),e.notify(P4.L98)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GL36=function(t,e,i){this.heroProxy.ZD14(t,e,i)},t.prototype.GHH65=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZS50(t.body),e.notify(P4.P84)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GN28=function(t,e){this.heroProxy.ZE10(t,e)},t.prototype.GJ58=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZW87(t.body),e.notify(P4.T25,t.body.sl)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GHH66=function(t){this.heroProxy.ZB82(t)},t.prototype.GE61=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZL49(t.body),e.notify(P4.N95)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GT19=function(t){this.heroProxy.ZI83(t)},t.prototype.GP24=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.heroJxLvUp(t.body),e.notify(P4.W30)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN29=function(t){this.heroProxy.ZE11(t)},t.prototype.GJ59=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.heroJxLvUp(t.body),e.notify(P4.M1),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH67=function(t){this.heroProxy.ZB83(t)},t.prototype.GE62=function(t){if(200==t.head.state){var e=this.gtM();this.GF89(t.body.lv),e.ZL52(t.body),e.notify(P4.G46)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP25=function(t){this.heroProxy.ZF47(t)},t.prototype.GL37=function(t){if(200==t.head.state){var e=this.gtM();this.GN36(t.body.lv),e.heroSoulLvUp(t.body),e.notify(P4.N97)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB27=function(t){this.heroProxy.ZA30(t)},t.prototype.GA65=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZC52(t.body),e.notify(P4.C75)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE63=function(t){this.heroProxy.ZB5(t)},t.prototype.GC76=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZG86(t.body),e.notify(P4.I13)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD66=function(t){this.heroProxy.ZA77(t)},t.prototype.GB89=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZF41(t.body),e.notify(P4.B94)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ60=function(t){this.heroProxy.ZC56(t)},t.prototype.GF80=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZO63(t.body),e.notify(P4.G44)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB90=function(){this.heroProxy.ZA42()},t.prototype.GA94=function(t){if(t&&t.head&&200==t.head.state){this.GF89(t.body.lv);var e=this.gtM();e.ZD12(t.body),e.notify(P4.D66),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF81=function(){this.heroProxy.ZB43()},t.prototype.GD67=function(t){if(t&&t.head&&200==t.head.state){this.GN36(t.body.lv);var e=this.gtM();e.ZI77(t.body),e.notify(P4.J90),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD68=function(t){this.heroProxy.ZA78(t)},t.prototype.GB91=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZF42(t.body),e.notify(P4.G48)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ61=function(t){this.heroProxy.ZC57(t)},t.prototype.GF82=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZO64(t.body),e.notify(P4.N99)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB92=function(t){this.heroProxy.ZA43(t)},t.prototype.GA95=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZD13(t.body),e.notify(P4.D64)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF83=function(t){this.heroProxy.ZB44(t)},t.prototype.GD69=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZI78(t.body),e.notify(P4.J88)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT20=function(t){this.heroProxy.ZI84(t)},t.prototype.GP26=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.heroInvite(t.body),this.apF(O8.A74,t.body.h.id),e.notify(P4.W32)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF84=function(){this.heroProxy.ZB45()},t.prototype.GD70=function(t){200==t.head.state?(App.CM.gtM(O6.B98).ZL13(t.body.es),this.gtM().notify(P4.E87)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN30=function(t){this.heroProxy.ZE12()},t.prototype.GJ62=function(t){200==t.head.state?(App.CM.gtM(O6.B98).ZL13(t.body.es),this.gtM().notify(P4.M3)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR10=function(t){this.heroProxy.ZG91(t)},t.prototype.GN31=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZI79(t.body),e.notify(P4.J92)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GL38=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.heroEvoBreak(t.body),e.notify(P4.T27)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN32=function(t){App.VM.open(O7.HH96,t)},t.prototype.GL39=function(){App.VM.close(O7.HH96)},t.prototype.GN33=function(t){App.VM.open(O7.I13,t)},t.prototype.GL40=function(){App.VM.close(O7.I13)},t.prototype.GE64=function(t){App.VM.open(O7.E3,t)},t.prototype.GD71=function(){App.VM.close(O7.E3)},t.prototype.GJ63=function(t){App.VM.open(O7.G70,t)},t.prototype.GHH68=function(){App.VM.close(O7.G70)},t.prototype.GR11=function(t){App.VM.open(O7.I62,t)},t.prototype.GP27=function(){App.VM.close(O7.I62)},t.prototype.GD72=function(t){App.VM.open(O7.D20,t)},t.prototype.GC77=function(){App.VM.close(O7.D20)},t.prototype.GHH69=function(t){App.VM.open(O7.F85,t)},t.prototype.GF85=function(){App.VM.close(O7.F85)},t.prototype.GB93=function(t){App.VM.open(O7.B74,t)},t.prototype.GB28=function(){App.VM.close(O7.B74)},t.prototype.GR12=function(t){App.VM.open(O7.G48,t)},t.prototype.GP28=function(){App.VM.close(O7.G48)},t.prototype.GB94=function(){App.VM.open(O7.A38)},t.prototype.GB29=function(){App.VM.close(O7.A38)},t.prototype.GF86=function(){App.VM.open(O7.B75)},t.prototype.GE65=function(){App.VM.close(O7.B75)},t.prototype.GHH70=function(t){App.VM.open(O7.C44,t)},t.prototype.GF87=function(){App.VM.close(O7.C44)},t.prototype.GR13=function(t){App.VM.open(O7.G71,t)},t.prototype.GP29=function(){App.VM.close(O7.G71)},t.prototype.GN34=function(t){App.VM.open(O7.E69,t)},t.prototype.GL41=function(){App.VM.close(O7.E69)},t.prototype.GF88=function(t){App.VM.open(O7.E70,t)},t.prototype.GE66=function(){App.VM.close(O7.E70)},t.prototype.GB95=function(t,e){App.VM.open(O7.A39,t,e)},t.prototype.GB30=function(){App.VM.close(O7.A39)},t.prototype.GP30=function(t){App.VM.open(O7.F86,t)},t.prototype.GN35=function(){App.VM.close(O7.F86)},t.prototype.GL42=function(t){App.VM.open(O7.C34,t)},t.prototype.GJ64=function(){App.VM.close(O7.C34)},t.prototype.GJ65=function(t){var e={objData:{id:this.gtM().heroList[t].heroModel,x:0,y:0,dir:Dir.br,objType:P13.A6},titleImg:"v1_fonts_zmxwj_png"};App.VM.open(O7.G69,e)},t.prototype.GX61=function(t){var e=this.gtM();if(e.baseHeroList[t]){var i=P7.copyTab(e.baseHeroList[t]);i.jxLv=0,i.skillEvoType?App.CM.apF(O6.C12,O8.A82,i):App.CM.apF(O6.C12,O8.A62,i)}else Log.trace("武将id异常",t)},t.prototype.GR14=function(t){this.gtM().notify("curView:"+t)},t.prototype.GF89=function(t){if(t>this.gtM().prestigeLv){var e=THH1.FE4(),i=N14.FA46(t);if(i){var s={objData:{id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,ps:i.skin}};App.VM.open(O7.G69,s)}}},t.prototype.GN36=function(t){if(t>this.gtM().soulLv){var e=THH1.FE4(),i=N14.FB72(t);if(i){var s={objData:{id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,ss:i.skin}};App.VM.open(O7.G69,s)}}},t.prototype.GF90=function(){this.heroProxy.GF90()},t.prototype.GF91=function(t){t&&t.head&&200==t.head.state?this.gtM().frs=t.body.frs:P18.sDP(O3.tr(5675))},t.prototype.GT21=function(t){this.gtM().selectHid=t,this.heroProxy.GT21(t)},t.prototype.GT22=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.nc=t.body.nc,e.activeHero=t.body.ob,App.SceneManager.runScene(M2.A4),P7.FL25(60)}else P18.sDP(O3.tr(5676))},t.prototype.GL43=function(){this.heroProxy.GL43()},t.prototype.GL44=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ng=t.body.ng,e.notify("heroGuide")}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GN37=function(t){this.heroProxy.GN37(t)},t.prototype.GN38=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.O4)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.heroVeinLoadReq=function(){return this.heroProxy.sendHeroVeinLoadReq()},t.prototype.heroVeinLoadRes=function(t){t&&t.head&&200==t.head.state?this.gtM().loadHeroVeinData(t.body):P18.sDP(K18.getTips(t.head.state))},t.prototype.heroVeinLvUpReq=function(t,e,i){this.heroProxy.heroVeinLvUpReq(t,e,i)},t.prototype.heroVeinLvUpRes=function(t,e){if(t&&t.head&&200==t.head.state){var i=this.gtM();i.loadHeroVeinData(t.body),i.notify(P4.V38,t.body.id),0!=t.body.le&&e?i.notify("HEROVEIN_UP_AUTO"):e&&i.notify("HEROVEIN_STOP_AUTO")}else{App.CM.apF(O6.B87,L10.A4,t);var s=this.gtM();e&&s.notify("HEROVEIN_STOP_AUTO")}},t.prototype.heroVeinUpGradeReq=function(t,e,i){this.heroProxy.heroVeinUpGradeReq(t,e,i)},t.prototype.heroVeinUpGradeRes=function(t,e){var i=this.gtM();if(!t||!t.head||200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void(e&&i.notify("HEROVEIN_CLASS_STOP_AUTO"));i.loadHeroVeinData(t.body),t.body.id%4==0&&0==t.body.ge&&i.heroVeinBTX(),i.notify(P4.R30,t.body.id);var s=HeroVeinConfig.getNew_LvUpByLv(t.body.g);t.body.ge!=s.exp&&e?i.notify("HEROVEIN_ClASS_AUTO"):e&&i.notify("HEROVEIN_CLASS_STOP_AUTO")},t}(TE11);__reflect(TE85.prototype,"TE85");var HeroData=function(){function t(t){this.id=0,this.lv=0,this.exp=0,this.state=0,this.xiulianNum=0,this.xiulianStar=0,this.zzLv=0,this.zzExp=0,this.jxLv=0,this.jxExp=0,this.jxSkinLv=0,this.jxSkillList=[],this.beSkillList=[],this.xiulianSkillList=[],this.lockSkillList=[],this.evoSkinLv=0,this.isOwn=!1,this.power=0,this.reqItem=[],this.heroLive=0,this.heroAttk=0,this.heroDef=0,this.zzLive=0,this.zzAttk=0,this.zzDef=0,this.jxLive=0,this.jxAttk=0,this.jxDef=0,this.heroAttr={},this.zzAttr={},this.evoAttr={},this.skillId=0,this.skillList=[],this.isInTj=!1,this.initDataByDB(t)}return t.prototype.ZK75=function(t){this.lv=t.lv,this.exp=t.e,this.state=t.st,this.attrVo=t.as,this.zzLv=t.tlv,this.zzExp=t.tex,this.jxLv=t.elv,this.jxExp=t.ee,this.jxSkinLv=t.es,this.xiulianNum=t.te,this.xiulianStar=t.ts,this.beSkillList=t.pss,this.xiulianSkillList=t.tss,this.lockSkillList=t.lss,this.jxSkillList=t.ess,this.isBreakEvo=P7.getValue(t.ib,this.isBreakEvo),t.n&&(this.name=t.n),this.isOwn=!0,this.setPower(),this.ZL48()},t.prototype.initDataByDB=function(t){this.id=t.id,this.name=t.name,this.quality=t.quality,this.order=t.order,this.icon=t.icon,this.isGold=1==t.isgold,this.skillEvoUpType=t.skillevoup,this.power=0,this.aptiType=t.aptitype,this.initAttribute=t.initattribute,this.skillId=t.skillbase,this.beSkillList=M18.FL28(t.skillinit,"|");for(var e=M18.FL28(t.reqitem,","),i=0;i<e.length;i++)this.reqItem.push(parseInt(e[i]));this.activateItem=t.activateitem,this.isHandbook=t.ishandbook,this.isList=t.idlist,this.skillEvoType=t.skillevotype,this.qualityName=t.qualityname,this.trainStarInit=t.trainstarinit,this.heroModel=t.model,this.heroJxModel=t.evomodel,this.ZL48(),this.setPower()},t.prototype.setPower=function(){var t=App.CM.gtM(O6.C12),e=M10.gAG(this.initAttribute);this.power=e;for(var i=0,s=(parseInt(N14.init.lvExp.value),1);s<this.lv;s++){var o=N14.lv[s];i+=M10.gAG(o.add)*(1+t.getVeinScale())}var r=0,n=0,a=0;if(this.isOwn){var h=N14.FF5(this.aptiType),p=M10.gAG(h.add),l=Math.min(this.zzLv-1,4),c=Math.max(this.zzLv-l-1,0);if(r=(l*h.reqnum+c*h.reqmore+this.zzExp)*p,this.skillEvoType){var u=parseInt(N14.init.advancedExp.value);for(s=0;s<this.jxLv;s++){var d=N14.FL79(s,this.skillEvoUpType),v=M10.gAG(d.add);n+=M10.gAG(d.advanced)+v*d.reqexp/u}var f=N14.FL79(this.jxLv,this.skillEvoUpType);n+=M10.gAG(f.add)*this.jxExp/u,this.isBreakEvo&&(a=M10.gAG(N14.gIV("breakAttr")))}}this.power=Math.floor(this.power+i+r+n+a)},t.prototype.ZL48=function(){var t=App.CM.gtM(O6.C12);for(var e in this.heroAttr)this.heroAttr[e]=0;var i=THH1.FI55(this.initAttribute);for(var e in i)null==this.heroAttr[e]&&(this.heroAttr[e]=0),this.heroAttr[e]=parseInt(i[e]);parseInt(N14.init.lvExp.value);for(var s=1;s<this.lv;s++){var o=N14.lv[s],r=THH1.FI55(o.add);for(var e in r)this.heroAttr[e]=this.heroAttr[e]+parseInt(r[e])*(1+t.getVeinScale())}for(var s in this.heroAttr)this.heroAttr[s]=Math.round(this.heroAttr[s]);if(this.isOwn){for(var e in this.zzLive=0,this.zzAttk=0,this.zzDef=0,this.zzAttr)this.zzAttr[e]=0;var n=N14.FF5(this.aptiType),a=THH1.FI55(n.add),h=Math.min(this.zzLv-1,4),p=Math.max(this.zzLv-h-1,0);for(var e in a)this.zzAttr[e]=(h*n.reqnum+p*n.reqmore+this.zzExp)*parseInt(a[e]);if(this.skillEvoType){for(var e in this.zzAttr)this.evoAttr[e]=0;var l=parseInt(N14.init.advancedExp.value);for(s=0;s<this.jxLv;s++){var c=N14.FL79(s,this.skillEvoUpType),u=THH1.FI55(c.add),d=THH1.FI55(c.advanced);for(var e in u)null==this.evoAttr[e]&&(this.evoAttr[e]=0),this.evoAttr[e]=this.evoAttr[e]+parseInt(u[e])*c.reqexp/l;for(var e in d)this.evoAttr[e]=this.evoAttr[e]+parseInt(d[e])}var v=N14.FL79(this.jxLv,this.skillEvoUpType);if(0<v.reqexp){u=THH1.FI55(v.add);for(var e in u)null==this.evoAttr[e]&&(this.evoAttr[e]=0),this.evoAttr[e]=this.evoAttr[e]+parseInt(u[e])*this.jxExp/l}}}},t.prototype.heroVein=function(){this.setPower(),this.ZL48()},t.prototype.heroUpgrade=function(t){this.lv=t.lv,this.exp=t.e,this.setPower(),this.ZL48()},t.prototype.heroRename=function(t){this.name=t.n},t.prototype.ZG85=function(t){this.zzLv=t.tlv,this.zzExp=t.te,this.setPower(),this.ZL48()},t.prototype.ZW87=function(t){for(var e=!1,i=0;i<this.lockSkillList.length;i++)t.sl==this.lockSkillList[i]&&(this.lockSkillList.splice(i,1),e=!0);e||this.lockSkillList.push(t.sl)},t.prototype.ZS50=function(t){this.xiulianNum=t.te,this.xiulianStar=t.ts,this.xiulianSkillList=t.tss},t.prototype.ZL49=function(t){this.beSkillList=t.pss,this.xiulianSkillList=t.tss},t.prototype.heroJxLvUp=function(t){this.jxLv=t.el,this.jxExp=t.ee,this.setPower(),this.ZL48()},t.prototype.heroEvoBreak=function(t){this.isBreakEvo=t.ib,this.setPower(),this.ZL48()},t.prototype.ZW88=function(t){this.state=t},t.prototype.isSkillLock=function(t){for(var e=0;e<this.lockSkillList.length;e++)if(t==this.lockSkillList[e])return!0;return!1},t.prototype.ZL50=function(t){var e;void 0===t&&(t=!1),t||(e=this.isOwn);for(var i=this.beSkillList,s=[],o=0;o<i.length;o++){var r={skillData:N14.FE1(i[o]),isLock:!1,isOwn:e};s.push(r)}for(o=i.length;o<6;o++){r={isLock:!0};s.push(r)}return s},t.prototype.ZL51=function(){if(this.isOwn){if(O4.FF89(L17.A12))return 0;var t=N14.lv[this.lv];if(t.reqnum<0)return 0;var e=t.reqnum,i=App.CM.gtM(O6.B82),s=t.reqcoin,o=parseInt(N14.init.upgradeItem.value);return e<=N12.giC(o)&&i.avatarInfo.co>=s?1:0}return 1<=N12.giC(this.activateItem)?1:0},t.prototype.ZE7=function(){return 0<this.ZL51()?1:0<this.getZzRedNum()?1:this.ZI76()?1:this.getJxRedNum()},t.prototype.ZS51=function(){if(this.isOwn){var t=M18.FL28(N14.init.skillItem.value,"|",":",","),e=parseInt(t[0][0]),i=N12.giC(e),s=parseInt(t[0][1]),o=parseInt(t[1][0]),r=N12.giC(o),n=parseInt(t[1][1]);if(s<=i)return 1;if(n<=r)return 1}return 0},t.prototype.getJxRedNum=function(){if(O4.FF89(L17.A33))return 0;if(this.isOwn&&this.skillEvoType){var t=Number(N14.gIV("breakLv")),e=THH1.FC32(this.skillEvoType);if(e.length>=t&&!this.isBreakEvo&&this.jxLv==t-1)return this.ZI75();var i=parseInt(N14.init.evoItem.value),s=N12.giC(i),o=N14.FL79(this.jxLv,this.skillEvoUpType);if(this.jxLv<e.length){var r=o.reqcoin,n=App.CM.gtM(O6.B82);if(1<=s&&n.avatarInfo.co>=r)return 1}}return 0},t.prototype.ZI75=function(){var t=App.CM.gtM(O6.B82).setting;if(!t||0==t.length)return 0;if(t.indexOf(L17.A2)<0){var e=P7.str2kv1(N14.gIV("breakItem")),i=e.k,s=e.v;if(N12.giC(i)>=Number(s))return 1}return 0},t.prototype.getZzRedNum=function(){if(this.isOwn&&!THH1.FL80(this.zzLv))for(var t=0;t<this.reqItem.length;t++){if(1<=N12.giC(this.reqItem[t]))return 1}return 0},t.prototype.getAllRedNum=function(){if(1==this.isList)return 0<this.ZE7()?1:App.CM.gtM(O6.C12).isOpenSkillView?0:this.ZS51()},t.prototype.ZI76=function(){var t=App.CM.gtM(O6.C12);return 0==this.state&&this.isOwn&&t.battleList.length<3?1:0},t}();__reflect(HeroData.prototype,"HeroData");var TG98=function(i){function t(t){var e=i.call(this,t)||this;return e.battleList=[],e.soulLv=0,e.soulSkin=0,e.tSoulExp=0,e.soulExp=0,e.soulDanUseNum=0,e.soulSkillList=[],e.soulReward=[],e.prestigeLv=0,e.prestigeExp=0,e.tPrestigeExp=0,e.prestigeSkin=0,e.prestigeDanUseNum=0,e.prestigeSkillList=[],e.prestigeReward=[],e.pIsUsingTempPill=!1,e.sIsUsingTempPill=!1,e.isSkillAlert4=!0,e.isSkillAlert5=!0,e.isSkillAlert6=!0,e.isSkillAlert7=!0,e.isLvUpGoldAlert=!0,e.isPrestigeGoldAlert=!0,e.isSoulGoldAlert=!0,e.isOpenSkillView=!1,e.isOpenBattle=!1,e.modelFiger=!1,e.vein={},e}return __extends(t,i),t.prototype.ZD48=function(t){if(t)switch(t.sys){case E5.A7:null!=this.pointSoulData?this.pointSoulData.initActData(t):this.pointSoulData=new RevealVo(t);break;case E5.A6:null!=this.pointPrestigeData?this.pointPrestigeData.initActData(t):this.pointPrestigeData=new RevealVo(t)}},t.prototype.updateRed=function(){switch(App.CM.gtM(O6.B95).riseConst){case E5.A7:this.ZW89();break;case E5.A1:this.ZI80();break;default:this.ZW89(),this.ZI80()}},Object.defineProperty(t.prototype,"heroViewId",{get:function(){return this._heroViewId},set:function(t){this._heroViewId=t,this.notify("changeHero")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heroZzViewId",{get:function(){return this._heroZzViewId},set:function(t){this._heroZzViewId=t,this.notify("changeZzHero")},enumerable:!0,configurable:!0}),t.prototype.ZS52=function(){var t=N14.FJ83();for(var e in this.heroList={},t){var i=t[e],s=new HeroData(i);this.heroList[i.id]=s}if(!this.baseHeroList)for(var e in this.baseHeroList={},t){i=t[e],s=new HeroData(i);this.baseHeroList[i.id]=s}},t.prototype.loadHeroData=function(t){var e=t.hs;if(this.heroList&&!e||this.ZS52(),e&&0<e.length)for(var i=0;i<e.length;i++){var s=e[i];this.heroList[s.id]&&this.heroList[s.id].ZK75(s)}var o=t.ubs;null!=o&&0<o.length&&(this.battleList=o,this.battleList.sort(function(t,e){return t.k>e.k?1:-1})),this.soulLv=t.slv||this.soulLv,this.soulSkin=t.ss||this.soulSkin,this.soulExp=t.se||this.soulExp,this.tSoulExp=t.sle||this.tSoulExp,this.soulDanUseNum=t.sap||this.soulDanUseNum,this.soulSkillList=t.sss||this.soulSkillList,this.soulReward=t.sag||[],this.prestigeLv=t.plv||this.prestigeLv,this.prestigeExp=t.pe||this.prestigeExp,this.tPrestigeExp=t.ple||this.tPrestigeExp,this.prestigeSkin=t.ps||this.prestigeSkin,this.prestigeDanUseNum=t.pap||this.prestigeDanUseNum,this.prestigeSkillList=t.pss||this.prestigeSkillList,this.prestigeReward=t.pag||[],this.nc=t.nc,this.ng=t.ng},t.prototype.loadHeroVeinData=function(t){if(this.vein=t.hvs||this.vein,t.id)if(this.vein[t.id]){var e=this.vein[t.id],i={id:t.id,l:0<=t.l?t.l:e.l,le:0<=t.le?t.le:e.le,g:0<=t.g?t.g:e.g,ge:0<=t.ge?t.ge:e.ge};this.vein[t.id]=i}else{i={id:t.id,l:t.l||0,le:t.le||0,g:t.g||0,ge:t.ge||0};this.vein[t.id]=i}},t.prototype.heroVeinBTX=function(){for(var t in this.heroList)this.heroList[t].heroVein()},t.prototype.heroUpgrade=function(t){this.heroList[t.hid]&&this.heroList[t.hid].heroUpgrade(t)},t.prototype.heroRename=function(t){this.heroList[t.hid]&&this.heroList[t.hid].heroRename(t)},t.prototype.ZG85=function(t){this.heroList[t.hid]&&this.heroList[t.hid].ZG85(t)},t.prototype.ZW87=function(t){this.heroList[t.hid]&&this.heroList[t.hid].ZW87(t)},t.prototype.ZS50=function(t){this.heroList[t.hid]&&this.heroList[t.hid].ZS50(t)},t.prototype.ZL49=function(t){this.heroList[t.hid]&&this.heroList[t.hid].ZL49(t)},t.prototype.heroJxLvUp=function(t){this.heroList[t.hid]&&this.heroList[t.hid].heroJxLvUp(t)},t.prototype.ZL52=function(t){this.prestigeLv<t.lv&&App.CM.apF(O6.C12,O8.A3,t.lv),this.prestigeLv=t.lv,this.prestigeExp=t.e,this.tPrestigeExp=t.le,this.prestigeSkillList=t.ss,(null==this.prePrestigeLv||this.prestigeLv>this.prePrestigeLv)&&(TF13.FE57(E5.A6),this.prePrestigeLv=this.prestigeLv)},t.prototype.heroSoulLvUp=function(t){this.soulLv<t.lv&&App.CM.apF(O6.C12,O8.A22,t.lv),this.soulLv=t.lv,this.soulExp=t.e,this.tSoulExp=t.le,this.soulSkillList=t.ss,(null==this.preSoulLv||this.soulLv>this.preSoulLv)&&(TF13.FE57(E5.A7),this.preSoulLv=this.soulLv)},t.prototype.ZC52=function(t){this.prestigeSkin=t.s},t.prototype.ZG86=function(t){this.soulSkin=t.s},t.prototype.ZF41=function(t){this.prestigeDanUseNum=t.pn},t.prototype.ZO63=function(t){this.soulDanUseNum=t.pn},t.prototype.ZD12=function(t){this.prestigeLv<t.lv&&App.CM.apF(O6.C12,O8.A3,t.lv),this.prestigeLv=t.lv,this.prestigeExp=t.e,this.tPrestigeExp=null==t.le?this.tPrestigeExp:t.le,this.prestigeSkillList=t.ss,(null==this.prePrestigeLv||this.prestigeLv>this.prePrestigeLv)&&(TF13.FE57(E5.A6),this.prePrestigeLv=this.prestigeLv)},t.prototype.ZI77=function(t){this.soulLv<t.lv&&App.CM.apF(O6.C12,O8.A22,t.lv),this.soulLv=t.lv,this.soulExp=t.e,this.tSoulExp=null==t.le?this.tSoulExp:t.le,this.soulSkillList=t.ss,(null==this.preSoulLv||this.soulLv>this.preSoulLv)&&(TF13.FE57(E5.A7),this.preSoulLv=this.soulLv)},t.prototype.heroUpBattle=function(t){for(var e in this.battleList=t.ubs,this.battleList.sort(function(t,e){return t.k>e.k?1:-1}),this.heroList){var i=!1;for(var s in this.battleList)if(this.battleList[s].v==e){this.heroList[e].ZW88(this.battleList[s].k),i=!0;break}i||this.heroList[e].ZW88(0)}},t.prototype.ZF42=function(t){for(var e=0;e<this.prestigeSkillList.length;e++){this.prestigeSkillList[e].sid==t.as.sid&&(this.prestigeSkillList[e]=t.as)}},t.prototype.ZO64=function(t){for(var e=0;e<this.soulSkillList.length;e++){this.soulSkillList[e].sid==t.as.sid&&(this.soulSkillList[e]=t.as)}},t.prototype.ZD13=function(t){this.prestigeReward=t.al||[]},t.prototype.ZI78=function(t){this.soulReward=t.al||[]},t.prototype.heroInvite=function(t){this.heroList[t.h.id].ZK75(t.h),this.ng=t.ng},t.prototype.ZI79=function(t){this.heroList[t.hid].jxSkinLv=t.s},t.prototype.heroEvoBreak=function(t){this.heroList[t.hid]&&this.heroList[t.hid].heroEvoBreak(t)},t.prototype.ZL53=function(){for(var t in this.heroList){if(0<this.heroList[t].getAllRedNum())return 1}return 0<this.ZI80()?1:this.getVeinLvRedNum()||this.getVeinClassRedNum()?1:this.ZW89()},t.prototype.ZB79=function(){for(var t in this.heroList){if(0<this.heroList[t].ZE7())return 1}return 0},t.prototype.ZI80=function(){if(0<this.prestigeLv)return this.redNum2=this.getRedNum2(),0<this.redNum2?1:0<this.ZF43()?1:0<this.ZC53()?1:0<this.ZB80()?1:0<this.ZC54()?1:0<this.ZC55()?1:0<this.ZB41()?1:this.ZB81()},t.prototype.ZF43=function(){var t=N14.prestige_base[this.prestigeLv];if(t.exp<0)return 0;var e=parseInt(N14.init.prestigeItem.value),i=N12.giC(e),s=t.pill,o=t.coin,r=parseInt(N14.init.timeItem1.value),n=N12.giC(r);return App.CM.gtM(O6.B82).avatarInfo.co>=o&&0<t.exp&&(s<=i||s<=n)?1:0},t.prototype.ZO65=function(){var t=N14.soul_base[this.soulLv];if(t.exp<0)return 0;var e=parseInt(N14.init.soulItem.value),i=N12.giC(e),s=t.pill,o=t.coin,r=parseInt(N14.init.timeItem2.value),n=N12.giC(r);return App.CM.gtM(O6.B82).avatarInfo.co>=o&&0<t.exp&&(s<=i||s<=n)?1:0},t.prototype.ZW89=function(){if(0<this.soulLv)return this.redNum1=this.getRedNum1(),0<this.redNum1?1:0<this.ZO65()?1:0<this.ZG87()?1:0<this.ZF44()?1:0<this.ZG88()?1:0<this.ZG89()?1:0<this.ZE8()?1:this.ZF45()},t.prototype.ZC53=function(){var t=K18.init.attrUseMax.value;if(parseInt(t)-this.prestigeDanUseNum<=0)return 0;var e=N14.init.prestigeAttrPill.value;return 0<N12.giC(e)?1:THH1.FD13(this,1)?1:0},t.prototype.ZG87=function(){var t=K18.init.attrUseMax.value;if(parseInt(t)-this.soulDanUseNum<=0)return 0;var e=N14.init.soulAttrPill.value;return 0<N12.giC(e)?1:0},t.prototype.ZB41=function(){return THH1.FD13(this,1)&&0<=N14.prestige_base[this.prestigeLv+""].exp?1:0},t.prototype.ZE8=function(){return THH1.FD13(this,2)&&0<=N14.soul_base[this.soulLv+""].exp?1:0},t.prototype.ZB80=function(){var t=N14.prestige_reward;for(var e in t){var i=void 0;if(parseInt(e)<=this.prestigeLv){i=1;for(var s=0;s<this.prestigeReward.length;s++){var o=this.prestigeReward[s];if(parseInt(e)==o){i=0;break}}}if(1==i)return i}return 0},t.prototype.ZF44=function(){var t=N14.soul_reward;for(var e in t){var i=void 0;if(parseInt(e)<=this.soulLv){i=1;for(var s=0;s<this.soulReward.length;s++){var o=this.soulReward[s];if(parseInt(e)==o){i=0;break}}}if(1==i)return i}return 0},t.prototype.ZC54=function(){for(var t=App.CM.gtM(O6.B98),e=1;e<=4;e++)if(0<=t.canPrestigeEquip.indexOf(e.toString()))return 1;return 0},t.prototype.ZG88=function(){for(var t=App.CM.gtM(O6.B98),e=1;e<=4;e++)if(0<=t.canSoulEquip.indexOf(e.toString()))return 1;return 0},t.prototype.ZB81=function(){var t=N14.gIV("prestigeUpPill");return TG7.FA82(J12.A3,parseInt(t))?0<N12.giC(t)?1:-1:0},t.prototype.ZF45=function(){var t=N14.gIV("soulUpPill");return TG7.FA82(J12.A8,parseInt(t))?0<N12.giC(t)?1:-1:0},t.prototype.ZC55=function(){var t=THH1.FA27(2),e=N14.gIV("prestigeSkill"),i=N12.giC(parseInt(e));if(0<i)for(var s=0;s<t.length;s++){var o=t[s];if(0==o.openLevel&&0<o.skillData.cost&&o.skillData.cost<=i)return 1}return 0},t.prototype.ZG89=function(){var t=THH1.FB31(2),e=N14.gIV("soulSkill"),i=N12.giC(parseInt(e));if(0<i)for(var s=0;s<t.length;s++){var o=t[s];if(0==o.openLevel&&0<o.skillData.cost&&o.skillData.cost<=i)return 1}return 0},t.prototype.getRedNum1=function(){var t=0,e=this.soulLv;if(L3.advancedLv>e||!this.pointSoulData)return t;var i=L3.FI89(this.pointSoulData.lv);if(i.advancelv<0&&this.pointSoulData.s==L3.starNum)return t;if(this.pointSoulData&&L3.openLv<=O4.getLv())if(this.pointSoulData.s!=L3.starNum){var s=parseInt(N14.init.timeItem2.value),o=N12.giC(s),r=N12.giC(parseInt(N14.init.soulItem.value))+o,n=i.starcost.split(":"),a=N12.giC(parseInt(n[0]));t=r>=i.pillcost&&a>=parseInt(n[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var h=i.breakcost.split(":");t=N12.giC(parseInt(h[0]))>=parseInt(h[1])&&i.advancelv<=e?1:0}return t},t.prototype.getRedNum2=function(){var t=0,e=this.prestigeLv;if(L3.advancedLv>e||!this.pointPrestigeData)return t;var i=L3.FI89(this.pointPrestigeData.lv);if(i.advancelv<0&&this.pointPrestigeData.s==L3.starNum)return t;if(this.pointPrestigeData&&L3.openLv<=O4.getLv())if(this.pointPrestigeData.s!=L3.starNum){var s=parseInt(N14.init.timeItem1.value),o=N12.giC(s),r=N12.giC(parseInt(N14.init.prestigeItem.value))+o,n=i.starcost.split(":"),a=N12.giC(parseInt(n[0]));t=r>=i.pillcost&&a>=parseInt(n[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var h=i.breakcost.split(":");t=N12.giC(parseInt(h[0]))>=parseInt(h[1])&&i.advancelv<=e?1:0}return t},t.prototype.getZzRedNum=function(){for(var t in this.heroList){if(0<this.heroList[t].getZzRedNum())return 1}return 0},t.prototype.getVeinLvRedNum=function(){for(var t in this.vein){var e=this.vein[t];if(HeroVeinUtils.getLvPosRed(e.id))return 1}return 0},t.prototype.getVeinClassRedNum=function(){for(var t in this.vein){var e=this.vein[t];if(HeroVeinUtils.getClassPosRed(e.id))return 1}return 0},t.prototype.countVeinLvPower=function(){var t=0;for(var e in this.vein){var i=this.vein[e],s=i.id%4?HeroVeinConfig.getBonusByPG(i.id,i.g)+1:1,o=HeroVeinConfig.getBaseAttr(i.id,i.l,i.le,s);t+=M10.gAG(o)}return Math.floor(t)},t.prototype.countVeinClassvPower=function(){var t=0;for(var e in this.vein){var i=this.vein[e],s=HeroVeinConfig.getLvUpAttr(i.id,i.g,i.ge),o=M10.gAG(s),r=0,n=void 0;if(i.id%4){n=HeroVeinConfig.getBonusByPG(i.id,i.g);var a=HeroVeinConfig.getBaseAttr(i.id,i.l,i.le,n);r=M10.gAG(a)}else n=HeroVeinConfig.getBonusByPG(i.id,i.g),r=this.getHeroLvAttr()*n;t+=o+r}return Math.floor(t)},t.prototype.getPartInfo=function(t){for(var e in this.vein)if(this.vein[e].id==t)return this.vein[e];return{id:t,l:0,le:0,g:0,ge:0}},t.prototype.getVeinScale=function(){var t=0;for(var e in this.vein)this.vein[e].id%4==0&&(t+=HeroVeinConfig.getBonusByPG(this.vein[e].id,this.vein[e].g));return t},t.prototype.getHeroLvAttr=function(){var t=0;for(var e in this.heroList){parseInt(N14.init.lvExp.value);for(var i=this.heroList[e],s=1;s<i.lv;s++){var o=N14.lv[s];t+=M10.gAG(o.add)}}return t},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TG98.prototype,"TG98");var TG99=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.X76,e.heroLvUpRes,e),e.rSM(P4.X10,e.heroShareRes,e),e.rSM(P4.U47,e.ZO68,e),e.rSM(P4.W28,e.ZW90,e),e.rSM(P4.L98,e.ZE9,e),e.rSM(P4.P84,e.ZI82,e),e.rSM(P4.T25,e.ZL55,e),e.rSM(P4.N95,e.ZL49,e),e.rSM(P4.W30,e.heroJxLvUp,e),e.rSM(P4.M1,e.ZW91,e),e.rSM(P4.G46,e.ZL52,e),e.rSM(P4.N97,e.heroSoulLvUp,e),e.rSM(P4.C75,e.ZC52,e),e.rSM(P4.I13,e.ZG90,e),e.rSM(P4.B94,e.ZF41,e),e.rSM(P4.G44,e.ZO63,e),e.rSM(P4.D66,e.ZD12,e),e.rSM(P4.J90,e.ZI77,e),e.rSM(P4.G48,e.ZF42,e),e.rSM(P4.N99,e.ZO64,e),e.rSM(P4.Y25,e.heroPush,e),e.rSM(P4.D64,e.ZD13,e),e.rSM(P4.J88,e.ZI78,e),e.rSM(P4.W32,e.heroInvite,e),e.rSM(P4.E87,e.ZI85,e),e.rSM(P4.M3,e.ZW92,e),e.rSM(P4.J92,e.ZI79,e),e}return __extends(t,i),t.prototype.ZO66=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X73,body:{}};s.rSMO(P4.X74,function(t){s.apF(O8.B6,t),e("加载武将数据完成")},s),s.sSM(i)})},t.prototype.heroPush=function(t){this.apF(O8.B11,t)},t.prototype.ZO67=function(t,e){var i={type:P4.X75,body:{hid:t,way:e}};this.sSM(i)},t.prototype.heroLvUpRes=function(t){this.apF(O8.B8,t)},t.prototype.ZL54=function(t){var e={type:P4.X9,body:{}};this.sSM(e)},t.prototype.heroShareRes=function(t){this.apF(O8.A98,t)},t.prototype.ZF46=function(t,e){var i={type:P4.U46,body:{hid:t,st:e}};this.sSM(i)},t.prototype.ZO68=function(t){this.apF(O8.A79,t)},t.prototype.ZI81=function(t){var e={type:P4.W27,body:{hid:t.hid,name:t.name}};this.sSM(e)},t.prototype.ZW90=function(t){this.apF(O8.A87,t)},t.prototype.ZB42=function(t){var e={type:P4.L97,body:{hid:t.hid}};this.sSM(e)},t.prototype.ZE9=function(t){this.apF(O8.A35,t)},t.prototype.ZD14=function(t,e,i){var s={type:P4.P83,body:{hid:t,high:e,way:i}};this.sSM(s)},t.prototype.ZI82=function(t){this.apF(O8.A57,t)},t.prototype.ZE10=function(t,e){var i={type:P4.T24,body:{hid:t,slot:e}};this.sSM(i)},t.prototype.ZL55=function(t){this.apF(O8.A70,t)},t.prototype.ZB82=function(t){var e={type:P4.N94,body:{hid:t}};this.sSM(e)},t.prototype.ZL49=function(t){this.apF(O8.A47,t)},t.prototype.ZI83=function(t){var e={type:P4.W29,body:{hid:t}};this.sSM(e)},t.prototype.heroJxLvUp=function(t){this.apF(O8.A91,t)},t.prototype.ZE11=function(t){var e={type:P4.L99,body:{hid:t}};this.sSM(e)},t.prototype.ZW91=function(t){this.apF(O8.A39,t)},t.prototype.ZB83=function(t){var e={type:P4.G45,body:{way:t}};this.sSM(e)},t.prototype.ZL52=function(t){this.apF(O8.A13,t)},t.prototype.ZF47=function(t){var e={type:P4.N96,body:{way:t}};this.sSM(e)},t.prototype.heroSoulLvUp=function(t){this.apF(O8.A49,t)},t.prototype.ZA30=function(t){var e={type:P4.C74,body:{skin:t}};this.sSM(e)},t.prototype.ZC52=function(t){this.apF(O8.A4,t)},t.prototype.ZB5=function(t){var e={type:P4.I12,body:{skin:t}};this.sSM(e)},t.prototype.ZG90=function(t){this.apF(O8.A23,t)},t.prototype.ZA77=function(t){var e={type:P4.B93,body:{num:t}};this.sSM(e)},t.prototype.ZF41=function(t){this.apF(O8.A2,t)},t.prototype.ZC56=function(t){var e={type:P4.G43,body:{num:t}};this.sSM(e)},t.prototype.ZO63=function(t){this.apF(O8.A16,t)},t.prototype.ZA42=function(){var t={type:P4.D65,body:{}};this.sSM(t)},t.prototype.ZD12=function(t){this.apF(O8.A6,t)},t.prototype.ZB43=function(){var t={type:P4.J89,body:{}};this.sSM(t)},t.prototype.ZI77=function(t){this.apF(O8.A29,t)},t.prototype.ZA78=function(t){var e={type:P4.G47,body:{sid:t}};this.sSM(e)},t.prototype.ZF42=function(t){this.apF(O8.A19,t)},t.prototype.ZC57=function(t){var e={type:P4.N98,body:{sid:t}};this.sSM(e)},t.prototype.ZO64=function(t){this.apF(O8.A53,t)},t.prototype.ZA43=function(t){var e={type:P4.D63,body:{lv:t}};this.sSM(e)},t.prototype.ZD13=function(t){this.apF(O8.A8,t)},t.prototype.ZB44=function(t){var e={type:P4.J87,body:{lv:t}};this.sSM(e)},t.prototype.ZI78=function(t){this.apF(O8.A31,t)},t.prototype.ZI84=function(t){var e={type:P4.W31,body:{hid:t}};this.sSM(e)},t.prototype.heroInvite=function(t){this.apF(O8.A95,t)},t.prototype.ZB45=function(){var t={type:P4.E86,body:{}};this.sSM(t)},t.prototype.ZI85=function(t){this.apF(O8.A10,t)},t.prototype.ZE12=function(){var t={type:P4.M2,body:{}};this.sSM(t)},t.prototype.ZW92=function(t){this.apF(O8.A41,t)},t.prototype.ZG91=function(t){var e={type:P4.J91,body:{hid:t}};this.sSM(e)},t.prototype.ZI79=function(t){this.apF(O8.A33,t)},t.prototype.GF90=function(){var t={type:P4.O1,body:{}};this.rSMO(P4.O2,this.GF91,this),this.sSM(t)},t.prototype.GF91=function(t){this.apF(O8.A26,t)},t.prototype.GT21=function(t){var e={type:P4.W33,body:{hid:t}};this.rSMO(P4.W34,this.GT22,this),this.sSM(e)},t.prototype.GT22=function(t){this.apF(O8.A43,t)},t.prototype.GL43=function(){var t={type:P4.P85,body:{}};this.rSMO(P4.P86,this.GL44,this),this.sSM(t)},t.prototype.GL44=function(t){this.apF(O8.A64,t)},t.prototype.ZO69=function(t){var e={type:P4.T26,body:{hid:t}};this.rSMO(P4.T27,this.GL38,this),this.sSM(e)},t.prototype.GL38=function(t){this.apF(O8.A76,t)},t.prototype.GN37=function(t){var e={type:P4.O3,body:{hid:t}};this.rSMO(P4.O4,this.GN38,this),this.sSM(e)},t.prototype.GN38=function(t){this.apF(O8.A55,t)},t.prototype.sendHeroVeinLoadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.P66,body:{}};s.rSMO(P4.P67,function(t){s.apF(O8.HEROVEIN_LOADDATA_RES,t),e("加载武将将纹数据完成")},s),s.sSM(i)})},t.prototype.heroVeinLvUpReq=function(t,e,i){var s={type:P4.V37,body:{hvId:t,t:e}};this.rSMO(P4.V38,this.heroVeinLvUpRes,this,i),this.sSM(s)},t.prototype.heroVeinLvUpRes=function(t,e){this.apF(O8.HEROVEIN_LVUP_RES,t,e)},t.prototype.heroVeinUpGradeReq=function(t,e,i){var s={type:P4.R29,body:{hvId:t,t:e}};this.rSMO(P4.R30,this.heroVeinUpGradeRes,this,i),this.sSM(s)},t.prototype.heroVeinUpGradeRes=function(t,e){this.apF(O8.HEROVEIN_UPGRADE_RES,t,e)},t}(TG80);__reflect(TG99.prototype,"TG99");var THH1=function(){function E(){}return E.FC31=function(t){var e=N14.init.heroQuality.value.split("|");if(e[t-1])return e[t-1]},E.FF7=function(t){var e=N14.init.heroQuality.value.split("|");if(e[t-1])return e[t-1]},E.FD11=function(){var t=0,e=App.CM.gtM(O6.C12);for(var i in e.heroList){var s=e.heroList[i];s.isOwn&&(t+=s.power)}return t},E.FE2=function(t){var e={},i=App.CM.gtM(O6.C12);for(var s in i.heroList){var o=i.heroList[s];if(o.isOwn)switch(t){case 1:for(var r in o.heroAttr)null==e[r]&&(e[r]=0),e[r]=e[r]+o.heroAttr[r];break;case 2:for(var n in o.zzAttr)null==e[n]&&(e[n]=0),e[n]=e[n]+o.zzAttr[n];break;case 3:for(var a in o.evoAttr)null==e[a]&&(e[a]=0),e[a]=e[a]+o.evoAttr[a]}}return e},E.FD12=function(t){var e=0;for(var i in t.heroList){t.heroList[i].isOwn&&(e+=1)}return e},E.FL80=function(t){for(var e in N14.FJ84())if(parseInt(e)>t)return!1;return!0},E.FI55=function(t){if(!t||0==t.length)return{};for(var e=t.split(";"),i={},s=0;s<e.length;s++){var o=e[s].split(":");i[o[0]]=o[1]}return i},E.FC32=function(t){var e=[],i=[],s=N14.skill_evo;for(var o in s)s[o].skillevotype==t&&i.push(s[o]);i.sort(function(t,e){return parseInt(t.id)-parseInt(e.id)});for(var r=0;r<i.length;r++){var n={skill:N14.FE1(i[r].skillevoshow),replaceType:i[r].replacetype};e.push(n)}return e},E.FC33=function(t){for(var e=App.CM.gtM(O6.C12).heroList[t],i=parseInt(N14.init.advancedExp.value),s=0,o=0,r=0;r<e.jxLv;r++){var n=N14.FL79(r,e.skillEvoUpType),a=n.reqexp/i;s+=a,o+=a*n.reqcoin}s+=e.jxExp/i;var h=N14.FL79(e.jxLv,e.skillEvoUpType);return{item:s,coin:o+=e.jxExp/i*h.reqcoin}},E.FA27=function(t){for(var e=App.CM.gtM(O6.C12),i=M18.FL28(N14.init.prestigeSkillIcon.value,"|",";"),s=M18.FL28(N14.init.prestigeSkillName.value,"|",";"),o=N14.prestige_base,r=[],n=0,a=0;a<e.prestigeSkillList.length;a++){var h=e.prestigeSkillList[a];for(var p in N14.prestige_skill){(l=N14.prestige_skill[p]).skillid==h.sid&&l.level==h.lv&&(r.push({skillData:l,openLevel:0,name:s[n][1],icon:i[n][1],viewType:t,skillType:O8.B10.PRESTIGE}),n++)}}for(var p in o){var l;if((l=o[p]).skillid&&l.level>e.prestigeLv)for(var c in N14.prestige_skill){h=N14.prestige_skill[c];l.skillid==h.skillid&&1==h.level&&(r.push({skillData:h,openLevel:l.level,name:s[n][1],icon:i[n][1],viewType:t,skillType:O8.B10.PRESTIGE}),n++)}}return r.sort(function(t,e){return t.openLevel-e.openLevel}),r},E.FB31=function(t){for(var e=App.CM.gtM(O6.C12),i=M18.FL28(N14.init.soulSkillIcon.value,"|",";"),s=M18.FL28(N14.init.soulSkillName.value,"|",";"),o=N14.soul_base,r=[],n=0,a=0;a<e.soulSkillList.length;a++){var h=e.soulSkillList[a];for(var p in N14.soul_skill){(l=N14.soul_skill[p]).skillid==h.sid&&l.level==h.lv&&(r.push({skillData:l,openLevel:0,name:s[n][1],icon:i[n][1],viewType:t,skillType:O8.B10.SOUL}),n++)}}for(var p in o){var l;if((l=o[p]).skillid&&l.level>e.soulLv)for(var c in N14.soul_skill){h=N14.soul_skill[c];l.skillid==h.skillid&&1==h.level&&(r.push({skillData:h,openLevel:l.level,name:s[n][1],icon:i[n][1],viewType:t,skillType:O8.B10.SOUL}),n++)}}return r.sort(function(t,e){return t.openLevel-e.openLevel}),r},E.FE3=function(){var t=parseInt(N14.init.prestigeLevel.value);if(O4.getLv()<t)return 0;for(var e=App.CM.gtM(O6.C12),i=0,s=parseInt(N14.init.advancedExp.value),o=1;o<e.prestigeLv;o++){var r=N14.prestige_base[o];i=i+M10.gAG(r.baseattr)+M10.gAG(r.addattr)*r.exp/s}var n=N14.prestige_base[e.prestigeLv];i=i+M10.gAG(n.baseattr)+M10.gAG(n.addattr)*e.prestigeExp/s;var a=P7.FA54(L13.A72.prestige);i+=Math.floor(i*a);var h=N14.init.prestigeAtbs.value,p=M10.gAG(h),l=0,c=App.CM.gtM(O6.B98).prestigeEquip;for(o=0;o<c.length;o++){var u=M10.FD92(c[o].i.toString(),c[o].t);l+=M10.gAG(u.attr)+M10.gAG(u.addattr)*u.addlevel}var d=0;for(o=0;o<e.prestigeSkillList.length;o++){var v=e.prestigeSkillList[o];for(var f in N14.prestige_skill){var g=N14.prestige_skill[f];g.skillid==v.sid&&g.level==v.lv&&(d+=M10.gAG(g.attr))}}return i=i+p*e.prestigeDanUseNum+l+d},E.FI56=function(){var t=parseInt(N14.init.soulLevel.value);if(O4.getLv()<t)return 0;for(var e=App.CM.gtM(O6.C12),i=0,s=parseInt(N14.init.advancedExp.value),o=1;o<e.soulLv;o++){var r=N14.soul_base[o];i=i+M10.gAG(r.baseattr)+M10.gAG(r.addattr)*r.exp/s}var n=N14.soul_base[e.soulLv];i=i+M10.gAG(n.baseattr)+M10.gAG(n.addattr)*e.soulExp/s;var a=N14.init.soulAtbs.value,h=M10.gAG(a),p=0,l=App.CM.gtM(O6.B98).soulEquip;for(o=0;o<l.length;o++){var c=M10.FD92(l[o].i.toString(),l[o].t);p+=M10.gAG(c.attr)+M10.gAG(c.addattr)*c.addlevel}var u=0;for(o=0;o<e.soulSkillList.length;o++){var d=e.soulSkillList[o];for(var v in N14.soul_skill){var f=N14.soul_skill[v];f.skillid==d.sid&&f.level==d.lv&&(u+=M10.gAG(f.attr))}}return i=i+h*e.soulDanUseNum+p+u},E.FF8=function(){return this.FD11()+this.FE3()+this.FI56()},E.FF9=function(t){var e={},i=App.CM.gtM(O6.C12);switch(t){case 1:for(var s=parseInt(N14.init.advancedExp.value),o=1;o<i.prestigeLv;o++){var r=N14.prestige_base[o],n=E.FI55(r.baseattr);for(var a in n){var h=O4.FD72(parseInt(a)),p=parseInt(n[a]);null==e[a]&&(e[a]={value:0,name:h}),e[a].value=e[a].value+p}var l=E.FI55(r.addattr);for(var a in l){var c=O4.FD72(parseInt(a));p=parseInt(l[a]);null==e[a]&&(e[a]={value:0,name:c}),e[a].value=e[a].value+p*r.exp/s}}var u=N14.prestige_base[i.prestigeLv],d=E.FI55(u.baseattr);for(var a in d){var v=O4.FD72(parseInt(a));p=parseInt(d[a]);null==e[a]&&(e[a]={value:0,name:v}),e[a].value=e[a].value+p}var f=E.FI55(u.addattr);for(var a in f){var g=O4.FD72(parseInt(a));p=parseInt(f[a]);null==e[a]&&(e[a]={value:0,name:g}),e[a].value=e[a].value+p*i.prestigeExp/s;var m=P7.FA54(L13.A72.prestige);e[a].value=e[a].value+Math.floor(e[a].value*m)}break;case 2:var y=App.CM.gtM(O6.B98).prestigeEquip.sort(function(t,e){return t.i-e.i});for(o=0;o<y.length;o++){var A=M10.FD92(y[o].i.toString(),y[o].t),b=E.FI55(A.attr);for(var a in b){var T=O4.FD72(parseInt(a));p=parseInt(b[a]);null==e[a]&&(e[a]={value:0,name:T}),e[a].value=e[a].value+p}var C=E.FI55(A.addattr);for(var a in C){var w=O4.FD72(parseInt(a));p=parseInt(C[a]);null==e[a]&&(e[a]={value:0,name:w}),e[a].value=e[a].value+p*A.addlevel||0}}break;case 3:var O=N14.init.prestigeAtbs.value,M=E.FI55(O);for(var a in M){var _=O4.FD72(parseInt(a));p=parseInt(M[a]);null==e[a]&&(e[a]={value:0,name:_}),e[a].value=e[a].value+p*i.prestigeDanUseNum}}for(var F=1;F<=3;F++)switch(F){case 1:e[avatar.AttributeKey.ATK]||(e[avatar.AttributeKey.ATK]={},e[avatar.AttributeKey.ATK].value=0,e[avatar.AttributeKey.ATK].name=O4.FD72(avatar.AttributeKey.ATK));break;case 2:e[avatar.AttributeKey.DEF]||(e[avatar.AttributeKey.DEF]={},e[avatar.AttributeKey.DEF].value=0,e[avatar.AttributeKey.DEF].name=O4.FD72(avatar.AttributeKey.DEF));break;case 3:e[avatar.AttributeKey.HP]||(e[avatar.AttributeKey.HP]={},e[avatar.AttributeKey.HP].value=0,e[avatar.AttributeKey.HP].name=O4.FD72(avatar.AttributeKey.HP))}return e},E.FJ85=function(t){var e={},i=App.CM.gtM(O6.C12);switch(t){case 1:for(var s=parseInt(N14.init.advancedExp.value),o=1;o<i.soulLv;o++){var r=N14.soul_base[o],n=E.FI55(r.baseattr);for(var a in n){var h=O4.FD72(parseInt(a)),p=parseInt(n[a]);null==e[a]&&(e[a]={value:0,name:h}),e[a].value=e[a].value+p}var l=E.FI55(r.addattr);for(var a in l){var c=O4.FD72(parseInt(a));p=parseInt(l[a]);null==e[a]&&(e[a]={value:0,name:c}),e[a].value=e[a].value+p*r.exp/s}}var u=N14.soul_base[i.soulLv],d=E.FI55(u.baseattr);for(var a in d){var v=O4.FD72(parseInt(a));p=parseInt(d[a]);null==e[a]&&(e[a]={value:0,name:v}),e[a].value=e[a].value+p}var f=E.FI55(u.addattr);for(var a in f){var g=O4.FD72(parseInt(a));p=parseInt(f[a]);null==e[a]&&(e[a]={value:0,name:g}),e[a].value=e[a].value+p*i.prestigeExp/s;var m=P7.FA54(L13.A72.soul);e[a].value=e[a].value+Math.floor(e[a].value*m)}break;case 2:var y=App.CM.gtM(O6.B98).soulEquip.sort(function(t,e){return t.i-e.i});for(o=0;o<y.length;o++){var A=M10.FD92(y[o].i.toString(),y[o].t),b=E.FI55(A.attr);for(var a in b){var T=O4.FD72(parseInt(a));p=parseInt(b[a]);null==e[a]&&(e[a]={value:0,name:T}),e[a].value=e[a].value+p}var C=E.FI55(A.addattr);for(var a in C){var w=O4.FD72(parseInt(a));p=parseInt(C[a]);null==e[a]&&(e[a]={value:0,name:w}),e[a].value=e[a].value+p*A.addlevel||0}}break;case 3:var O=N14.init.soulAtbs.value,M=E.FI55(O);for(var a in M){var _=O4.FD72(parseInt(a));p=parseInt(M[a]);null==e[a]&&(e[a]={value:0,name:_}),e[a].value=e[a].value+p*i.soulDanUseNum}}for(var F=1;F<=3;F++)switch(F){case 1:e[avatar.AttributeKey.ATK]||(e[avatar.AttributeKey.ATK]={},e[avatar.AttributeKey.ATK].value=0,e[avatar.AttributeKey.ATK].name=O4.FD72(avatar.AttributeKey.ATK));break;case 2:e[avatar.AttributeKey.DEF]||(e[avatar.AttributeKey.DEF]={},e[avatar.AttributeKey.DEF].value=0,e[avatar.AttributeKey.DEF].name=O4.FD72(avatar.AttributeKey.DEF));break;case 3:e[avatar.AttributeKey.HP]||(e[avatar.AttributeKey.HP]={},e[avatar.AttributeKey.HP].value=0,e[avatar.AttributeKey.HP].name=O4.FD72(avatar.AttributeKey.HP))}return e},E.FA69=function(){var t=App.CM.gtM(O6.C12),e=N14.prestige_base[t.prestigeLv+1];if(0<e.exp){var i=N14.prestige_base[t.prestigeLv+1],s=N14.gIV("advancedExp"),o=M10.gAG(e.addattr),r=M10.gAG(i.baseattr);return e.exp/s*o+r}},E.FC34=function(){var t=App.CM.gtM(O6.C12),e=N14.prestige_base[t.soulLv+1];if(0<e.exp){var i=N14.prestige_base[t.soulLv+1],s=N14.gIV("advancedExp"),o=M10.gAG(e.addattr),r=M10.gAG(i.baseattr);return e.exp/s*o+r}},E.FI57=function(t,e){var i,s;if(s=t.heroData?(i=t.heroData,e.heroData):(i=t,e),i.isOwn||s.isOwn){if(!i.isOwn&&0<i.ZL51())return-1;if(!s.isOwn&&0<s.ZL51())return 1}else{if(i.ZL51()!=s.ZL51())return s.ZL51()-i.ZL51();if(0<i.ZL51())return i.quality!=s.quality?i.quality-s.quality:i.order!=s.order?i.order-s.order:i.id-s.id}return i.isOwn&&s.isOwn?i.state!=s.state?0==i.state?1:0==s.state?-1:i.state-s.state:i.quality!=s.quality?s.quality-i.quality:i.order!=s.order?i.order-s.order:i.id-s.id:i.isOwn||s.isOwn?i.isOwn?-1:1:i.quality!=s.quality?i.quality-s.quality:i.order!=s.order?i.order-s.order:i.id-s.id},E.FF10=function(){var t=TF59.FB15(F7.A10),e=t&&t.openState?t.pointsetsData.s:1,i=App.CM.gtM(O6.C12),s=[];for(var o in i.heroList){var r=i.heroList[o],n=TD79.FE60(r.id);if(!(n&&n.type>e)){if(7<=r.quality){var a=O4.getLv(),h=App.CM.gtM(O6.B43),p=parseInt(N14.gIV("godOpenDay")),l=parseInt(N14.gIV("godOpenLv")),c=p<=a&&h.serOpenDay+1>=l,u=this.FF11();if(!(2<=e||r.isOwn||0<N12.giC(r.activateItem)||c||u))continue}1==r.isGold&&1==r.isList&&s.push(r)}}return s.sort(E.FI57),s},E.FC35=function(t,e){var i;switch(e){case 1:i=N14.prestige_skill;break;case 2:i=N14.soul_skill}for(var s in i){var o=i[s];if(o.skillid==t.skillid&&o.level==t.level+1)return o}return null},E.FA95=function(t){var e=App.CM.gtM(O6.C12),i=e.heroList[e.heroViewId];if(i.isSkillLock(t))return!0;for(var s=0,o=0;o<i.beSkillList.length;o++){i.isSkillLock(o+1)&&s++}return!(s>=i.beSkillList.length-1)},E.FA47=function(){var t=App.CM.gtM(O6.C12),e=t.heroList[t.heroViewId],i=e.xiulianSkillList.length;if(i<=0)return!1;for(var s=0;s<i;s++){var o=N14.FE1(e.xiulianSkillList[s]);if(4<=o.quality&&!e.isSkillLock(s+1))return o}return null},E.FG28=function(){var t=TF59.FB15(F7.A10),e=t&&t.openState?t.pointsetsData.s:1,i=[],s=App.CM.gtM(O6.C12);for(var o in s.heroList){var r=s.heroList[o],n=TD79.FE60(r.id);if(!(n&&n.type>e)){if(7<=r.quality){var a=O4.getLv(),h=App.CM.gtM(O6.B43),p=parseInt(N14.gIV("godOpenDay")),l=parseInt(N14.gIV("godOpenLv")),c=p<=a&&h.serOpenDay+1>=l,u=this.FF11();if(!(2<=e||r.isOwn||0<N12.giC(r.activateItem)||c||u))continue}1==r.isList&&i.push(r)}}return i},E.FF11=function(){var t=N14.gIV("godOpenLimit").split(";");for(var e in t)if(N12.giC(t[e]))return!0;return!1},E.FB74=function(t){var e="v1_img_kuang_jinengbai_png";switch(t){case 1:e="v1_img_kuang_jinengbai_png";break;case 2:e="v1_img_kuang_jinenglv_png";break;case 3:e="v1_img_kuang_jinenglan_png";break;case 4:e="v1_img_kuang_jinengzi_png";break;case 5:e="v1_img_kuang_jinengcheng_png";break;case 6:e="v1_img_kuang_jinenghong_png";break;case 7:e="v1_img_kuang_jinengqicai_png"}return e},E.FC86=function(t){var e;switch(t){case 1:e="e5c7ac";break;case 2:e="75c01a";break;case 3:e="44b6fe";break;case 4:e="d234ff";break;case 5:e="ef6e0f";break;case 6:e="fb2121";break;default:e="e5c7ac"}return e},E.FE4=function(){var t,e=App.CM.gtM(O6.C12);if(e.battleList&&0<e.battleList.length)t=e.heroList[e.battleList[0].v];else{var i=E.FG28();t=(i=i.sort(E.FI57))[0]}return t.heroModel},E.FD13=function(t,e){switch(e){case 1:if(i=N14.FG27(t.prestigeLv,1))if(0<N12.giC(i[1]))return!0;break;case 2:var i;if(i=N14.FG27(t.soulLv,2)){if(0<N12.giC(i[1]))return!0;break}}},E.FB32=function(t,e){var i={};i.title=e;for(var s=1;s<=3;s++)switch(s){case 1:t[avatar.AttributeKey.ATK]||(t[avatar.AttributeKey.ATK]=0);break;case 2:t[avatar.AttributeKey.DEF]||(t[avatar.AttributeKey.DEF]=0);break;case 3:t[avatar.AttributeKey.HP]||(t[avatar.AttributeKey.HP]=0)}var o=1;for(var r in t){var n=O4.FD72(parseInt(r));i["value"+o]=O3.tr(1489,n,t[r]),o++}return i},E.FI58=function(t){var e=N14.init.firstHero.value.split(","),i=e[0];switch(t){case 1:i=e[0];break;case 2:i=e[1];break;case 3:i=e[2]}return parseInt(i)},E.FHH45=function(){var t=App.CM.gtM(O6.C12);if(t.battleList&&0<t.battleList.length)for(var e=0;e<t.battleList.length;e++){if(1==t.battleList[e].k)return!0}return!1},E.FD14=function(){var t=App.CM.gtM(O6.C12);if(t.battleList&&0<t.battleList.length)for(var e=0;e<t.battleList.length;e++){if(1==t.battleList[e].k&&2<=t.battleList.length)return!0}return!1},E.FI59=function(){for(var t=App.CM.gtM(O6.C12),e={101:0,102:0,103:0},i=parseInt(N14.init.advancedExp.value),s=1;s<t.soulLv;s++){var o=N14.soul_base[s],r=E.FI55(o.baseattr);for(var n in r){O4.FD72(parseInt(n));var a=parseInt(r[n]);null==e[n]&&(e[n]=a),e[n]+=a}var h=E.FI55(o.addattr);for(var n in h){O4.FD72(parseInt(n)),a=parseInt(h[n]);null==e[n]&&(e[n]=a),e[n]+=a*o.exp/i}}var p=N14.soul_base[t.soulLv],l=E.FI55(p.baseattr);for(var n in l){O4.FD72(parseInt(n)),a=parseInt(l[n]);null==e[n]&&(e[n]=a),e[n]+=a}var c=E.FI55(p.addattr);for(var n in c){O4.FD72(parseInt(n)),a=parseInt(c[n]);null==e[n]&&(e[n]=a),e[n]+=a*t.prestigeExp/i;var u=P7.FA54(L13.A72.soul);e[n]+=Math.floor(e[n]*u)}return e},E.FI60=function(){for(var t=App.CM.gtM(O6.C12),e={101:0,102:0,103:0},i=parseInt(N14.init.advancedExp.value),s=1;s<t.prestigeLv;s++){var o=N14.prestige_base[s],r=E.FI55(o.baseattr);for(var n in r){O4.FD72(parseInt(n));var a=parseInt(r[n]);null==e[n]&&(e[n]=a),e[n]+=a}var h=E.FI55(o.addattr);for(var n in h){O4.FD72(parseInt(n)),a=parseInt(h[n]);null==e[n]&&(e[n]=a),e[n]+=a*o.exp/i}}var p=N14.prestige_base[t.prestigeLv],l=E.FI55(p.baseattr);for(var n in l){O4.FD72(parseInt(n)),a=parseInt(l[n]);null==e[n]&&(e[n]=a),e[n]+=a}var c=E.FI55(p.addattr);for(var n in c){O4.FD72(parseInt(n)),a=parseInt(c[n]);null==e[n]&&(e[n]=a),e[n]+=a*t.prestigeExp/i;var u=P7.FA54(L13.A72.prestige);e[n]+=Math.floor(e[n]*u)}return e},E}();__reflect(THH1.prototype,"THH1");var HeroVeinConfig=function(){function o(){}return o.FK35=function(t){var e,i;o.init=t.herovein_init,o.base=t.herovein_base,o.lvUp=t.herovein_lvup,o.understand=t.herovein_understand,this.saveNewConfig(),o.tep=((e={})[4]={id:1,name:O3.tr(8907),show:0,initAttr:0,growAttr:0,power:0},e[8]={id:1,name:O3.tr(8908),show:0,initAttr:0,growAttr:0,power:0},e[12]={id:1,name:O3.tr(8909),show:0,initAttr:0,growAttr:0,power:0},e),o.attr=((i={})[4]=101,i[8]=102,i[12]=103,i)},o.gIV=function(t){var e;return this.init?e=this.init[t].value:e},o.saveNewConfig=function(){for(var t in this.new_base={},o.base){var e=o.base[t];this.new_base[e.lv]=e}for(var t in this.new_lvUp={},o.lvUp){e=o.lvUp[t];this.new_lvUp[e.lv]=e}for(var t in this.new_understand={},o.understand){e=o.understand[t];var i=this.getLockLv(e.lv),s={lv:e.lv,attrper:e.attrper,locklv:i};this.new_understand[e.lv]=s}},o.getNew_BaseByLv=function(t){return this.new_base[t]},o.getNew_LvUpByLv=function(t){return this.new_lvUp[t]},o.getNew_understandByLv=function(t){return this.new_understand[t]},o.getBonusByPG=function(t,e){if(e<=0)return 0;var i=this.getNew_LvUpByLv(e-1);return t%4?Number(i.bonus2):Number(i.bonus1)},o.getBaseAttr=function(t,e,i,s){void 0===s&&(s=1);var o=this.getBasePosD(t),r=o.add1,n=o.add2,a=[],h={attr:this.getNew_BaseByLv(0)[r],scale:0};a.push(h);for(var p=0;p<=e;p++)if(p==e){var l={attr:(c=this.getNew_BaseByLv(p))[r],scale:Math.floor(Number(i)/10)};a.push(l)}else{l={attr:(c=this.getNew_BaseByLv(p))[r],scale:Math.floor(Number(c.exp)/10)};var c,u={attr:c[n]};a.push(l),a.push(u)}var d=this.countAttr(a);return this.FL55(d,s)},o.getLvUpAttr=function(t,e,i){var s=this.getLvUpPosD(t),o=s.add1,r=s.add2,n=[],a={attr:this.getNew_LvUpByLv(0)[o],scale:0};n.push(a);for(var h=0;h<=e;h++)if(h==e){var p={attr:(l=this.getNew_LvUpByLv(h))[o],scale:Math.floor(Number(i)/10)};n.push(p)}else{p={attr:(l=this.getNew_LvUpByLv(h))[o],scale:Math.floor(Number(l.exp)/10)};var l,c={attr:l[r]};n.push(p),n.push(c)}var u=this.countAttr(n);return this.FL55(u)},o.countAttr=function(t){var e=[];for(var i in t){var s=t[i].attr,o=0<=t[i].scale?t[i].scale:1,r=this.FL56(s);for(var n in r){var a=this.isInList(r[n].k,e);if("-1"==a){var h={k:r[n].k,v:Number(r[n].v)*o};e.push(h)}else e[a].v=Number(e[a].v)+Number(r[n].v)*o}}return e.sort(function(t,e){return t.k-e.k}),e},o.getBasePosD=function(t){var e;switch(t){case 1:case 5:case 9:e={add1:"addattr1",add2:"addbttr1"};break;case 2:case 6:case 10:e={add1:"addattr2",add2:"addbttr2"};break;case 3:case 7:case 11:e={add1:"addattr3",add2:"addbttr3"};break;case 4:e={add1:"addattr4",add2:"addbttr4"};break;case 8:e={add1:"addattr5",add2:"addbttr5"};break;case 12:e={add1:"addattr6",add2:"addbttr6"}}return e},o.getLvUpPosD=function(t){var e;switch(t){case 1:case 5:case 9:e={add1:"attr1",add2:"bttr1"};break;case 2:case 6:case 10:e={add1:"attr2",add2:"bttr2"};break;case 3:case 7:case 11:e={add1:"attr3",add2:"bttr3"};break;case 4:e={add1:"attr4",add2:"bttr4"};break;case 8:e={add1:"attr5",add2:"bttr5"};break;case 12:e={add1:"attr6",add2:"bttr6"}}return e},o.getWXLvByG=function(t){if(t<=0)return 0;var e=0;for(var i in this.new_understand){if(!(t>=Number(this.new_understand[i].locklv)))return e;e++}return e},o.getLockLv=function(t){for(var e in this.lvUp){var i=this.lvUp[e];if(i.undlv==t)return Number(i.lv)+1}},o.isInList=function(t,e){for(var i in e)if(e[i].k==t)return i;return"-1"},o.FL56=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={k:o[0],v:o[1]};e.push(r)}return e},o.FL55=function(t,e){void 0===e&&(e=1);var i="";for(var s in t)"0"!=s&&(i+=";"),i+=t[s].k+":"+Math.round(Number(t[s].v)*e);return i},o}();__reflect(HeroVeinConfig.prototype,"HeroVeinConfig");var HeroVeinUtils=function(){function h(){}return h.isOpenVein=function(t){var e=O4.getLv(),i=parseInt(HeroVeinConfig.gIV("openLv").split(";")[0]),s=parseInt(HeroVeinConfig.gIV("openDay"));if(e<i){K18.init.commonDesc1.value;return t&&P18.sDP(O3.tr(3370,s,i)),!1}return!(App.CM.gtM(O6.B43).serOpenDay+1<s)||(t&&P18.sDP(O3.tr(3370,s,i)),!1)},h.getLvPosRed=function(t){var e=O4.getLv(),i=h.getDataByVeinP(t);if(!(e<Number(i.lvS))){var s=App.CM.gtM(O6.C12).getPartInfo(t),o=HeroVeinConfig.getNew_BaseByLv(s.l);if("-1"!=o.exp){var r=o.cost.split(":"),n=r[0];if(Number(r[1])<=N12.giC(n))return 1}return 0}},h.getClassPosRed=function(t){var e=O4.getLv(),i=h.getDataByVeinP(t);if(!(e<Number(i.lvS))){var s=App.CM.gtM(O6.C12).getPartInfo(t),o=HeroVeinConfig.getNew_LvUpByLv(s.g),r=h.getClassCostD(t);if("-1"!=o.exp)if(this.getIsS(t)){if(Number(o.exp)==s.ge){var n=1;return P7.str2kv(o[r.cost2]).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(n=0)}),n}var a=1;return P7.str2kv(o[r.cost1]).forEach(function(t){var e=t.k,i=t.v;N12.giC(e)<i&&(a=0)}),a}return 0}},h.getIsS=function(t){var e;HeroVeinConfig.gIV("openLv").split(";");switch(Number(t)){case 1:case 2:case 3:case 5:case 6:case 7:case 9:case 10:case 11:e=1;break;case 4:e=this.bijiao(t,[1,2,3]);break;case 8:e=this.bijiao(t,[5,6,7]);break;case 12:e=this.bijiao(t,[9,10,11])}return e},h.bijiao=function(t,e){var i=App.CM.gtM(O6.C12),s=i.getPartInfo(t),o=HeroVeinConfig.getNew_LvUpByLv(s.g),r=Number(o.conditions);for(var n in e){if(i.getPartInfo(e[n]).g<r)return 0}return 1},h.getNextC=function(t){return HeroVeinConfig.getNew_LvUpByLv(t).conditions},h.getDataByVeinP=function(t){var e,i=HeroVeinConfig.gIV("openLv").split(";");switch(Number(t)){case 1:e={icon:"wulue_tian_png",lvS:i[0],part:t};break;case 2:e={icon:"wulue_di_png",lvS:i[0],part:t};break;case 3:e={icon:"wulue_ren_png",lvS:i[0],part:t};break;case 5:e={icon:"moulue_tian_png",lvS:i[1],part:t};break;case 6:e={icon:"moulue_di_png",lvS:i[1],part:t};break;case 7:e={icon:"moulue_ren_png",lvS:i[1],part:t};break;case 9:e={icon:"zhihui_tian_png",lvS:i[2],part:t};break;case 10:e={icon:"zhihui_di_png",lvS:i[2],part:t};break;case 11:e={icon:"zhihui_ren_png",lvS:i[2],part:t};break;case 4:e={icon:"jw_wulue_png",lvS:i[0],part:t};break;case 8:e={icon:"jw_moulue_png",lvS:i[1],part:t};break;case 12:e={icon:"jw_zhihui_png",lvS:i[2],part:t}}return e},h.getNameByVeinP=function(t){var e;HeroVeinConfig.gIV("openLv").split(";");switch(Number(t)){case 1:e=O3.tr(8874)+O3.tr(8877);break;case 2:e=O3.tr(8874)+O3.tr(8878);break;case 3:e=O3.tr(8874)+O3.tr(8879);break;case 5:e=O3.tr(8875)+O3.tr(8877);break;case 6:e=O3.tr(8875)+O3.tr(8878);break;case 7:e=O3.tr(8875)+O3.tr(8879);break;case 9:e=O3.tr(8876)+O3.tr(8877);break;case 10:e=O3.tr(8876)+O3.tr(8878);break;case 11:e=O3.tr(8876)+O3.tr(8879);break;case 4:e=O3.tr(8874);break;case 8:e=O3.tr(8875);break;case 12:e=O3.tr(8876)}return e},h.getClassCostD=function(t){var e;switch(Number(t)){case 1:case 2:case 3:case 5:case 6:case 7:case 9:case 10:case 11:e={cost1:"cost1",cost2:"cost3"};break;case 4:e={cost1:"cost2",cost2:"cost4"};break;case 8:e={cost1:"cost2",cost2:"cost5"};break;case 12:e={cost1:"cost2",cost2:"cost6"}}return e},h.getClassName=function(t){var e,i,s;switch(Number(t)){case 1:case 2:case 3:case 5:case 6:case 7:case 9:case 10:case 11:(i={})[1]={id:1,name:O3.tr(8881),show:0,initAttr:0,growAttr:0,power:0},e=i;break;case 4:case 8:case 12:(s={})[1]={id:1,name:O3.tr(8880),show:0,initAttr:0,growAttr:0,power:0},e=s}return e},h.getClassTX=function(t){var e;switch(Number(t)){case 4:e=O3.tr(8874);break;case 8:e=O3.tr(8875);break;case 12:e=O3.tr(8876);break;default:e=""}return e},h}();__reflect(HeroVeinUtils.prototype,"HeroVeinUtils");var AttrInfoPopView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.list=[],i.skinName=SkillInfoSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.initUI=function(){this.initList(),this.createList(),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5107)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5108))},t.prototype.createList=function(){this.attrList.itemRenderer=AttrInfoLabel,this.dataSource=new eui.ArrayCollection(this.list),this.attrList.dataProvider=this.dataSource,this.scView.viewport=this.attrList},t.prototype.initList=function(){for(var t=0;t<7;t++){var e={value:O3.tr(5109)+t,index:t};this.list.push(e)}},t.prototype.close=function(){this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.dataSource.removeAll(),this.list=null},t.prototype.closeSelf=function(){App.CM.apF(O6.C15,O17.A11)},t}(BaseEuiView);__reflect(AttrInfoPopView.prototype,"AttrInfoPopView");var AttrInfoLabel=function(e){function t(){var t=e.call(this)||this;return t.skinName=SkillInfoLabelSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.lbValue.text=this.data.value},t}(eui.ItemRenderer);__reflect(AttrInfoLabel.prototype,"AttrInfoLabel");var AttrLabel=function(e){function t(){var t=e.call(this)||this;return t.skinName=AttrLabelSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.lbTitle.$setText(this.data.title);var t=1;for(var e in 0<this.gpAttr.numChildren&&this.gpAttr.removeChildren(),this.data)if("title"!=e&&this.data["value"+t]){var i=new eui.Label;i.size=20,i.textFlow=(new egret.HtmlTextParser).parser(this.data["value"+t]),this.gpAttr.addChild(i),t++}this.height=this.gpTitle.height+this.gpAttr.height+15;this.gpAttr.layout;this.gpAttr.visible=!0},t}(eui.ItemRenderer);__reflect(AttrLabel.prototype,"AttrLabel");var BtnList=function(i){function t(t){var e=i.call(this)||this;return e.direction=F4.A1,e.listBtnData=[],e.views=[],e.btnRenderer=ItemRankTabView,e.curIndex=0,e.handler=t.handler,e.views=t.views,e.names=t.names,e.setDirection(t.direction,t.gap),e.ZO70(t.index),e}return __extends(t,i),t.prototype.initList=function(t){this.itemRenderer=this.btnRenderer,this.btnDataSource=new eui.ArrayCollection(this.listBtnData),this.dataProvider=this.btnDataSource,this.ZU43(t),this.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.btnHandler,this)},Object.defineProperty(t.prototype,"names",{set:function(t){this.initList(t)},enumerable:!0,configurable:!0}),t.prototype.btnHandler=function(t){this.openView(t.itemIndex)},t.prototype.openView=function(t){this.handler||console.log("按钮集未设置响应接口---");var e=this.handler(t);null!=e&&0<=e?(null!=this.views&&0<this.views.length&&App.VM.open(this.views[e]),this.curIndex=t):this.selectedIndex=this.curIndex},t.prototype.ZO70=function(t){this.curIndex=t,this.selectedIndex=t,this.openView(this.curIndex)},t.prototype.setDirection=function(t,e){this.direction=t||F4.A1,this.ZO71(e)},t.prototype.ZO71=function(t){switch(this.direction){case F4.A1:(e=new eui.HorizontalLayout).gap=t||-5,this.layout=e,this.$setHeight(P16.btnTabSize.height),this.$setWidth(P16.btnTabSize.width*this.listBtnData.length);break;case F4.A2:var e;(e=new eui.VerticalLayout).gap=t||5,this.layout=e,this.$setHeight(P16.btnTabSize.height*this.listBtnData.length),this.$setWidth(P16.btnTabSize.width)}},t.prototype.getCurIndex=function(){return this.curIndex},t.prototype.ZHH58=function(t,e){for(var i=0;i<this.listBtnData.length;i++)if(i==t){this.listBtnData[i].isShowRed=e,this.btnDataSource.itemUpdated(this.listBtnData[i]);break}},t.prototype.getBtnData=function(t){return this.listBtnData[t]},t.prototype.ZU43=function(t){this.listBtnData=[];for(var e=0;e<t.length;e++){var i={index:e,name:t[e],isShowRed:0,redType:1,isShow:!0};this.listBtnData.push(i)}this.btnDataSource.replaceAll(this.listBtnData)},t}(eui.List);__reflect(BtnList.prototype,"BtnList");var BtnTab=function(e){function t(){var t=e.call(this)||this;return t.skinName=SocialTabSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbName.text=this.data.name,this.imgRedPoint.$setVisible(0<this.data.isShowRed),this.labRedNum.text=this.data.isShowRed.toString(),this.labRedNum.visible=this.data.showRedCount,this.imgDouble.$setVisible(0<this.data.isShowDou),this.imgZhiKou.$setVisible(0<this.data.isShowZhiK),this.gpTip.$setVisible(this.data.isActivity||!1),this.visible=this.includeInLayout=this.data.isShow,this.gpTip.visible&&(this.lbTip.text=this.data.actTip)},t}(eui.ItemRenderer);__reflect(BtnTab.prototype,"BtnTab");var DlgHeroAchieveView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.btnListData=[],i.contentListData=[],i.skinName=DlgHeroAchieveSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.createList()},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.contentListView.open(),this.dlg.ZM69(this.closeSelf,this),this.curIndex=t[0]-1,this.ZU43(),this.ZI86(),this.btnList.ZO70(this.curIndex)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];switch(s.prototype.uBM.call(this,t,e),e[0]){case P4.R90:this.ZQ44(O3.tr(1440));break;case P4.T21:this.ZQ44(O3.tr(1443));break;case P4.Q9:this.ZQ44(O3.tr(1327));break;case P4.T11:this.ZQ44(O3.tr(1444));break;case P4.D64:this.ZQ44(O3.tr(1411));break;case P4.J88:this.ZQ44(O3.tr(1410));break;case P4.P92:this.ZQ44(O3.tr(100));break;case P4.C83:this.ZQ44(O3.tr(101));break;case P4.D74:this.ZQ44(O3.tr(102));break;case P4.G58:this.ZQ44(O3.tr(103));break;case P4.N82:this.ZQ44(O3.tr(3002)),this.ZQ44(O3.tr(3003))}this.ZI86()},t.prototype.createList=function(){var t={render:ItemAchieveView,gap:6,width:this.listGroup.width,height:this.listGroup.height};this.contentListView=new CommonListBase(t),this.listGroup.addChild(this.contentListView),this.contentListView.verticalCenter=0,this.contentListView.horizontalCenter=0;var e=[O3.tr(1440)],i=[O3.tr(1446)];this.btnName2=i;var s={names:e,handler:this.ZS53.bind(this),direction:F4.A2,gap:-3};this.btnList=new BtnList(s),this.gpBtn.addChild(this.btnList),this.btnList.top=5,this.scBtn.viewport=this.btnList,this.dlg.title=O3.tr(1481)},t.prototype.ZS53=function(t){return this.curIndex=t,this.ZI86(),t},t.prototype.ZI86=function(){if(this.btnList){var t=this.btnList.getBtnData(this.curIndex);if(t){this.curIndex,App.CM.gtM(O6.B82).avatarInfo;switch(t.name){case O3.tr(1440):this.contentListData=this.getHorseList();break;case O3.tr(1443):this.contentListData=this.getFaQiList();break;case O3.tr(1442):this.contentListData=this.ZW93();break;case O3.tr(1444):this.contentListData=this.getWingList();break;case O3.tr(1441):this.contentListData=this.ZO72();break;case O3.tr(1445):this.contentListData=this.getSoulList();break;case O3.tr(100):this.contentListData=this.ZW94();break;case O3.tr(101):this.contentListData=this.ZS54();break;case O3.tr(102):this.contentListData=this.ZW95();break;case O3.tr(103):this.contentListData=this.ZI87();break;case O3.tr(3002):this.contentListData=this.ZL56();break;case O3.tr(3003):this.contentListData=this.ZL57()}this.contentListView.rfL(this.contentListData)}}},t.prototype.ZU43=function(){for(var t=App.CM.gtM(O6.B82).avatarInfo.l,e=[],i=1;i<=O8.A96;i++){switch(i){case O8.B4.HORSE:t>=M13.init.unlockLevel.value&&e.push(O3.tr(1440));break;case O8.B4.FAQI:t>=N16.init.unlockLevel.value&&e.push(O3.tr(1443));break;case O8.B4.WEAPON:t>=L2.init.unlockLevel.value&&e.push(O3.tr(1442));break;case O8.B4.WING:t>=N13.init.unlockLevel.value&&e.push(O3.tr(1444));break;case O8.B4.FORMATE:t>=M11.init.fmLv.value&&e.push(O3.tr(3002));break;case O8.B4.GENERERAL:t>=M11.init.generalLv.value&&e.push(O3.tr(3003));break;case O8.B4.PRESTIGE:t>=N14.init.prestigeLevel.value&&e.push(O3.tr(1441));break;case O8.B4.SOUL:t>=N14.init.soulLevel.value&&e.push(O3.tr(1445));break;case O8.B4.ANIMAL:t>=K19.init.animalLv.value&&e.push(O3.tr(100));break;case O8.B4.PSYCHIC:t>=K19.init.psychicLv.value&&e.push(O3.tr(101));break;case O8.B4.SPIRIT:t>=K19.init.spiritLv.value&&e.push(O3.tr(102));break;case O8.B4.ASOUL:t>=K19.init.soulLv.value&&e.push(O3.tr(103))}}this.btnName=e,this.btnList.ZU43(e),this.btnList.validateNow(),this.scBtn.scrollPolicyV=this.btnList.contentHeight>this.scBtn.height?"on":"off";for(i=0;i<this.btnName.length;i++)this.ZQ44(this.btnName[i])},t.prototype.ZL56=function(){for(var t=[],e=0,i=THH23.FJ9(1);e<i.length;e++){var s=i[e],o={};o.achieveData=s,o.type=O8.B4.FORMATE,1==s.have?o.state=3:1==s.canGet?o.state=1:o.state=2,o.index=parseInt(s.tid),t.push(o)}return t.sort(this.listSort),t},t.prototype.ZL57=function(){for(var t=[],e=0,i=THH23.FJ9(2);e<i.length;e++){var s=i[e],o={};o.achieveData=s,o.type=O8.B4.GENERERAL,1==s.have?o.state=3:1==s.canGet?o.state=1:o.state=2,o.index=parseInt(s.tid),t.push(o)}return t.sort(this.listSort),t},t.prototype.getHorseList=function(){var t=[],e=App.CM.gtM(O6.C2),i=M13.reward;for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.HORSE,o.state=2,o.index=parseInt(s),e.initHorseData.h&&parseInt(s)<=e.initHorseData.h.lv&&(o.state=1),e.initHorseData.ho)for(var r=0;r<e.initHorseData.ho.length;r++){var n=e.initHorseData.ho[r];if(parseInt(s)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.getFaQiList=function(){var t=[],e=App.CM.gtM(O6.C17),i=N16.reward;for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.FAQI,o.state=2,o.index=parseInt(s),e.initFaqiData.faqi&&parseInt(s)<=e.initFaqiData.faqi.lv&&(o.state=1),e.initFaqiData.ho)for(var r=0;r<e.initFaqiData.ho.length;r++){var n=e.initFaqiData.ho[r];if(parseInt(s)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.ZW93=function(){var t=[],e=App.CM.gtM(O6.B83),i=L2.reward;for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.WEAPON,o.state=2,o.index=parseInt(s),e.initWeaponData.w&&parseInt(s)<=e.initWeaponData.w.lv&&(o.state=1),e.initWeaponData.ho)for(var r=0;r<e.initWeaponData.ho.length;r++){var n=e.initWeaponData.ho[r];if(parseInt(s)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.getWingList=function(){var t=[],e=App.CM.gtM(O6.C18),i=N13.reward;for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.WING,o.state=2,o.index=parseInt(s),e.initWingData.ws&&parseInt(s)<=e.initWingData.ws[0].t&&(o.state=1),e.initWingData.ho)for(var r=0;r<e.initWingData.ho.length;r++){var n=e.initWingData.ho[r];if(parseInt(s)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.ZW94=function(){var t=[],e=App.CM.gtM(O6.B91),i=K19.FG82(1);for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.ANIMAL,o.state=2,o.index=parseInt(i[s].tid),e.ao&&(parseInt(i[s].tid)<=e.ao.lv&&(o.state=1),e.ao.ag))for(var r=0;r<e.ao.ag.length;r++){var n=e.ao.ag[r];if(parseInt(i[s].tid)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.ZS54=function(){var t=[],e=App.CM.gtM(O6.B91),i=K19.FG82(2);for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.PSYCHIC,o.state=2,o.index=parseInt(i[s].tid),e.apo&&(parseInt(i[s].tid)<=e.apo.lv&&(o.state=1),e.apo.ag))for(var r=0;r<e.apo.ag.length;r++){var n=e.apo.ag[r];if(parseInt(i[s].tid)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.ZW95=function(){var t=[],e=App.CM.gtM(O6.B91),i=K19.FG82(3);for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.SPIRIT,o.state=2,o.index=parseInt(i[s].tid),e.aspo&&(parseInt(i[s].tid)<=e.aspo.lv&&(o.state=1),e.aspo.ag))for(var r=0;r<e.aspo.ag.length;r++){var n=e.aspo.ag[r];if(parseInt(i[s].tid)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.ZI87=function(){var t=[],e=App.CM.gtM(O6.B91),i=K19.FG82(4);for(var s in i){var o={};if(o.achieveData=i[s],o.type=O8.B4.ASOUL,o.state=2,o.index=parseInt(i[s].tid),e.aso&&(parseInt(i[s].tid)<=e.aso.lv&&(o.state=1),e.aso.ag))for(var r=0;r<e.aso.ag.length;r++){var n=e.aso.ag[r];if(parseInt(i[s].tid)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.ZO72=function(){var t=[],e=App.CM.gtM(O6.C12),i=N14.prestige_reward;for(var s in i){var o={};o.achieveData=i[s],o.type=O8.B4.PRESTIGE,o.state=2,o.index=parseInt(s),parseInt(s)<=e.prestigeLv&&(o.state=1);for(var r=0;r<e.prestigeReward.length;r++){var n=e.prestigeReward[r];if(parseInt(s)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.getSoulList=function(){var t=[],e=App.CM.gtM(O6.C12),i=N14.soul_reward;for(var s in i){var o={};o.achieveData=i[s],o.type=O8.B4.SOUL,o.state=2,o.index=parseInt(s),parseInt(s)<=e.soulLv&&(o.state=1);for(var r=0;r<e.soulReward.length;r++){var n=e.soulReward[r];if(parseInt(s)==n){o.state=3;break}}t.push(o)}return t.sort(this.listSort),t},t.prototype.listSort=function(t,e){return t.state!=e.state?t.state-e.state:t.index-e.index},t.prototype.ZQ44=function(t){var e=this.btnName.indexOf(t);if(0<=e)switch(t){case O3.tr(1440):var i=App.CM.gtM(O6.C2);this.btnList.ZHH58(e,i.ZC47());break;case O3.tr(1443):i=App.CM.gtM(O6.C17);this.btnList.ZHH58(e,i.ZC47());break;case O3.tr(1327):i=App.CM.gtM(O6.B83);this.btnList.ZHH58(e,i.ZC47());break;case O3.tr(1444):i=App.CM.gtM(O6.C18);this.btnList.ZHH58(e,i.ZC47());break;case O3.tr(1411):i=App.CM.gtM(O6.C12);this.btnList.ZHH58(e,i.ZB80());break;case O3.tr(1410):i=App.CM.gtM(O6.C12);this.btnList.ZHH58(e,i.ZF44());break;case O3.tr(100):i=App.CM.gtM(O6.B91);this.btnList.ZHH58(e,i.ZC92(1));break;case O3.tr(101):i=App.CM.gtM(O6.B91);this.btnList.ZHH58(e,i.ZC92(2));break;case O3.tr(102):i=App.CM.gtM(O6.B91);this.btnList.ZHH58(e,i.ZC92(3));break;case O3.tr(103):i=App.CM.gtM(O6.B91);this.btnList.ZHH58(e,i.ZC92(4));break;case O3.tr(3002):for(var s=0,o=0,r=THH23.FJ9(1);o<r.length;o++){if(0==(h=r[o]).have&&1==h.canGet){s=1;break}}this.btnList.ZHH58(e,s);break;case O3.tr(3003):s=0;for(var n=0,a=THH23.FJ9(2);n<a.length;n++){var h;if(0==(h=a[n]).have&&1==h.canGet){s=1;break}}this.btnList.ZHH58(e,s)}},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A85)},t.prototype.close=function(){s.prototype.close.call(this),this.contentListView.close()},t}(BaseEuiView);__reflect(DlgHeroAchieveView.prototype,"DlgHeroAchieveView");var DlgHeroAttrDanView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.useNum=0,i.maxNum=0,i.restNum=0,i.skinName=DlgHeroAttrDanSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.attrLabel=new AttrLabel,this.attrLabel.gpAttr.top=55,this.gpAttr.addChild(this.attrLabel),this.itemIcon=new ItemIcon,this.gpIcon.addChild(this.itemIcon),this.lbTip.textFlow=M18.HTP.parse(O3.tr(4907)),this.btnUse.label=O3.tr(4901)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.btnSub.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSub,this),this.btnSubTen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSub10,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAdd,this),this.btnAddTen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAdd10,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUse,this),this.itemData=N12.gID(t[0]),this.dlg.title=this.itemData.name,this.lbName.$setText(this.itemData.name),this.lbName.textColor=Number(O5.FA77(this.itemData.quality));var i=App.CM.gtM(O6.C12);this.ZI88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG98&&this.ZI88(t)},t.prototype.ZI88=function(t){var e=N14.init.prestigeAttrPill.value,i=N14.init.soulAttrPill.value,s=0;parseInt(this.itemData.id)==parseInt(e)?(s=t.prestigeDanUseNum,this.attrType=1):parseInt(this.itemData.id)==parseInt(i)&&(s=t.soulDanUseNum,this.attrType=2);var o=O3.tr(4899,s);this.lbUseNum.textFlow=M18.HTP.parser(O3.tr(1430,o)),this.setAttrView();var r=N12.giC(parseInt(this.itemData.id)),n=N12.gID(this.itemData.id),a={itemData:{data:n,ct:0},isBottom:!1};this.itemIcon.data=a;var h=O3.tr(4899,r);this.lbBagNum.textFlow=M18.HTP.parser(O3.tr(1432,h));var p=n.batchusenum,l=K18.init.attrUseMax.value;this.restNum=parseInt(l)-s,this.maxNum=Math.min(r,this.restNum,p),r<=0?this.useNum=0:(0==this.useNum||this.useNum>this.maxNum)&&(this.useNum=this.maxNum),this.lbNum.$setText(this.useNum.toString())},t.prototype.setAttrView=function(){var t={};t.title=O3.tr(1431);var e=N14.init.prestigeAttrPill.value,i=N14.init.soulAttrPill.value,s={};parseInt(this.itemData.id)==parseInt(e)?s=THH1.FF9(3):parseInt(this.itemData.id)==parseInt(i)&&(s=THH1.FJ85(3));var o=1;for(var r in s)t["value"+o]=O3.tr(1489,s[r].name,s[r].value),o++;this.attrLabel.data=t},t.prototype.onClickSub10=function(){var t=this.useNum-10;this.useNum=Math.max(0,t),this.lbNum.$setText(this.useNum.toString())},t.prototype.onClickSub=function(){var t=this.useNum-1;this.useNum=Math.max(0,t),this.lbNum.$setText(this.useNum.toString())},t.prototype.onClickAdd10=function(){var t=this.useNum+10;this.useNum=Math.min(this.maxNum,t),this.lbNum.$setText(this.useNum.toString())},t.prototype.onClickAdd=function(){var t=this.useNum+1;this.useNum=Math.min(this.maxNum,t),this.lbNum.$setText(this.useNum.toString())},t.prototype.onClickUse=function(){if(this.restNum<=0)1==this.attrType?P18.sDP(O3.tr(1482,O3.tr(1411))):P18.sDP(O3.tr(1482,O3.tr(1410)));else if(N12.giC(this.itemData.id)<=0)P18.sDP(O3.tr(5677));else if(this.useNum<=0)P18.sDP(O3.tr(5678));else{var t=N14.init.prestigeAttrPill.value,e=N14.init.soulAttrPill.value;parseInt(this.itemData.id)==parseInt(t)?App.CM.apF(O6.C12,O8.A1,this.useNum):parseInt(this.itemData.id)==parseInt(e)&&App.CM.apF(O6.C12,O8.A15,this.useNum)}},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A61)},t.prototype.close=function(){this.btnSub.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSub,this),this.btnSubTen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSub10,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAdd,this),this.btnAddTen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAdd10,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUse,this)},t}(BaseEuiView);__reflect(DlgHeroAttrDanView.prototype,"DlgHeroAttrDanView");var DlgHeroGoBattle=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=DlgHeroGoBattleSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.heroLeft=new IconHero,this.heroMid=new IconHero,this.heroRight=new IconHero,this.gpLeft.addChild(this.heroLeft),this.gpMid.addChild(this.heroMid),this.gpRight.addChild(this.heroRight),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5110)),this.btnRight.label=O3.tr(7382),this.btnMid.label=O3.tr(7381),this.btnLeft.label=O3.tr(1406),this.dlg.title=O3.tr(5112)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.heroId=t[0],this.fingerId=t[1],this.dlg.ZM69(this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnMid.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMid,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.heroLeft.visible=!1,this.heroRight.visible=!1,this.heroMid.visible=!1,this.dlg.ZG3(!1);var i=App.CM.gtM(O6.C12);App.CM.gtM(O6.C20);i.isOpenBattle=!0,i.ng&&THH1.FHH45()?this.ZC36():this.removeFinger(),this.GX5(i)},t.prototype.FG25=function(){return this.hguideFiger||(this.hguideFiger=new GuideFinger,this.hguideFiger.touchEnabled=!1,this.hguideFiger.anchorOffsetX=119,this.hguideFiger.anchorOffsetY=119),this.hguideFiger},t.prototype.removeFinger=function(){this.hguideFiger&&(this.gpConternt.removeChild(this.hguideFiger),this.hguideFiger=null)},t.prototype.ZC36=function(){this.hguideFiger=this.FG25(),this.gpConternt.addChild(this.hguideFiger);var t=N4.getClosePos(N4.battle);this.hguideFiger.setDir(1),this.hguideFiger.x=t.x,this.hguideFiger.y=t.y,this.hguideFiger.moveTo(t)},t.prototype.ZK90=function(){TG68.FG24(this.gpConternt);var t=TG68.FG25(),e=N4.getClosePos(N4.battle);t.setDir(1),t.x=e.x,t.y=e.y,t.moveTo(e)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG98&&this.GX5(t)},t.prototype.GX5=function(t){for(var e=0;e<t.battleList.length;e++){var i=t.battleList[e],s={heroData:t.heroList[i.v],isInGo:!0};switch(i.k){case 1:this.heroLeft.visible=!0,this.heroLeft.data=s;break;case 2:this.heroMid.visible=!0,this.heroMid.data=s;break;case 3:this.heroRight.visible=!0,this.heroRight.data=s}}this.fingerId==N4.hero_battle_btn&&this.ZK90()},t.prototype.onClickLeft=function(){if(App.CM.apF(O6.C12,O8.A78,this.heroId,1),App.CM.gtM(O6.C12).ng&&THH1.FHH45())if(this.hguideFiger){var t=N4.getClosePos(N4.battleClose);this.hguideFiger.x=t.x,this.hguideFiger.y=t.y,this.hguideFiger.moveTo(t)}else this.closeSelf(!1);else this.closeSelf(!1)},t.prototype.onClickMid=function(){App.CM.apF(O6.C12,O8.A78,this.heroId,2),this.closeSelf(!1)},t.prototype.onClickRight=function(){App.CM.apF(O6.C12,O8.A78,this.heroId,3),this.closeSelf(!1)},t.prototype.closeSelf=function(t){void 0===t&&(t=!0),App.CM.apF(O6.C12,O8.A92);var e=App.CM.gtM(O6.C12);t&&this.fingerId==N4.hero_battle_btn&&(e.notify("refreshFiger"),this.fingerId=null),e.ng&&THH1.FD14()&&(App.CM.apF(O6.C12,O8.A63),e.notify("secFinger"),this.removeFinger()),e.ng&&e.notify("heroGuide")},t.prototype.close=function(){s.prototype.close.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnMid.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMid,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.heroId=null,this.removeFinger()},t}(BaseEuiView);__reflect(DlgHeroGoBattle.prototype,"DlgHeroGoBattle");var DlgHeroJxView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.G48,O7.B27,"HeroJxUpgradeView",this.content),App.VM.rgS(O7.G48,O7.D21,"HeroJxBackView",this.content),this.title=O3.tr(1404);var t=[O3.tr(1400),O3.tr(1421)],e=[O7.B27,O7.D21];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.updateViews();var i=t[0]||O7.B27;this.ZQ23(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0]},t.prototype.updateViews=function(){var t=App.CM.gtM(O6.C12);this.heroData=t.heroList[t.heroViewId]},t.prototype.ZQ23=function(t){switch(t){case O7.B27:this.title=O3.tr(1456),this.btnList.ZM66(t);break;case O7.D21:this.title=O3.tr(1422),this.btnList.ZM66(t)}},t}(BasePanelView);__reflect(DlgHeroJxView.prototype,"DlgHeroJxView");var DlgHeroRenameView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=DlgHeroRenameSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.heroData=t[0],this.dlg.ZM69(this.closeSelf,this),this.dlg.setOKHandler(this.ZV75,this),this.GX5()},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4840)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4841)),this.dlg.title=O3.tr(4842),this.dlg.strBtnOK=O3.tr(4843)},t.prototype.GX5=function(){this.edName.text=this.heroData.name},t.prototype.setData=function(t){this.heroData=t,this.GX5()},t.prototype.ZV75=function(){if(this.edName.text!=this.heroData.name){var t=parseInt(N14.gIV("nameMax"));if(M18.FF63(this.edName.text)>2*t)P18.sDP(O3.tr(1454));else if(M18.FF63(this.edName.text)<=0)P18.sDP(O3.tr(1471));else{var e={hid:this.heroData.id,name:this.edName.text};App.CM.apF(O6.C12,O8.A86,e)}}else this.closeSelf()},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A65)},t}(BaseEuiView);__reflect(DlgHeroRenameView.prototype,"DlgHeroRenameView");var DlgHeroSkillUpgradeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.listData=[],i.curIndex=0,i.skinName=HeroSkillUpgradeSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.viewType=t[1],1==this.viewType?this.dlg.title=O3.tr(1459):this.dlg.title=O3.tr(1460),this.initList(),this.ZG92(t[0])},t.prototype.initUI=function(){this.createList(),this.itemIcon=new ItemIcon,this.gpItem.addChild(this.itemIcon),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4902)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4903)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4904)),this.btnUpgrade.label=O3.tr(4906)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.initList(e[0]),this.GX5()},t.prototype.ZI88=function(t,e){t.heroList[e]},Object.defineProperty(t.prototype,"costId",{get:function(){var t;switch(this.viewType){case 1:t=N14.init.prestigeSkill.value;break;case 2:t=N14.init.soulSkill.value}return t},enumerable:!0,configurable:!0}),t.prototype.GX5=function(){this.lbName.textFlow=M18.HTP.parser(O3.tr(1438,this.curData.name,this.curData.skillData.level));var t=THH1.FI55(this.curData.skillData.attr),e=1;for(var i in t){var s=void 0,o=O4.FD72(parseInt(i));s=O3.tr(1470,o,t[i]),(p=this["lbCurAttr"+e])&&(p.visible=!0,p.textFlow=M18.HTP.parser(s),e++)}for(;e<=2;e++){(p=this["lbCurAttr"+e]).visible=!1}var r,n=THH1.FC35(this.curData.skillData,this.viewType);if(n){this.grpEffect2.visible=!1,this.gpNext.visible=!0,this.gpUpgrade.visible=!0;var a=THH1.FI55(n.attr),h=1;for(var i in a){s=void 0,o=O4.FD72(parseInt(i));s=O3.tr(1469,o,a[i]),(p=this["lbNextAttr"+h])&&(p.visible=!0,p.textFlow=M18.HTP.parser(s),h++)}for(;h<=2;h++){var p;(p=this["lbNextAttr"+h]).visible=!1}this.imgLine.verticalCenter=67}else this.curData.skillData.cost<0&&(this.gpNext.visible=!1,this.gpUpgrade.visible=!1,this.grpEffect2.visible=!1,this.imgLine.verticalCenter=-40);var l=this.costId;r=N12.gID(l);var c=this.curData.skillData.cost,u=O3.tr(1300,r.name,this.curData.skillData.cost);this.lbCostName.textFlow=M18.HTP.parser(u);var d=N12.giC(parseInt(l)),v={itemData:{data:r,ct:0},isBottom:!1};this.itemIcon.data=v;var f=c<=d?_cc.green:_cc.red;if(this.lbNum.textFlow=M18.HTP.parser(O3.tr(1439,f,d)),0==this.curData.openLevel)this.lbNextTitle.text=O3.tr(1487),this.gpNoAct.visible=!1;else{this.lbNextTitle.text=O3.tr(1486);var g="";switch(this.viewType){case 1:g=O3.tr(1441);break;case 2:g=O3.tr(1445)}this.lbCondition.text=O3.tr(1488,g,this.curData.openLevel),this.gpNext.visible=!1,this.grpEffect2.visible=!0,this.gpNoAct.visible=!0,this.gpUpgrade.visible=!1}},t.prototype.createList=function(){this.iconList.itemRenderer=IconSoulSkill,this.dataSource=new eui.ArrayCollection(this.listData),this.iconList.dataProvider=this.dataSource,this.iconList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this)},t.prototype.ZG92=function(t){for(var e=0;e<this.listData.length;e++){var i=this.listData[e];if(i.skillData.skillid==t){this.curIndex=e,this.curData=i,this.iconList.selectedIndex=this.curIndex;break}}this.GX5()},t.prototype.initList=function(t){switch(void 0===t&&(t=void 0),this.viewType){case 1:this.listData=THH1.FA27(2),t==P4.G48&&this.playEffect();break;case 2:this.listData=THH1.FB31(2),t==P4.N99&&this.playEffect()}this.dataSource.replaceAll(this.listData),this.curData=this.listData[this.curIndex]},t.prototype.playEffect=function(){var t=this.iconList.getElementAt(this.curIndex);t&&t.playEffect()},t.prototype.listHandler=function(t){this.curIndex=t.itemIndex,this.curData=this.listData[this.curIndex],this.GX5()},t.prototype.ZR46=function(){if(0==this.curData.openLevel){if(!N12.FL6([{k:parseInt(this.costId),v:this.curData.skillData.cost}])){var t=N12.gID(parseInt(this.costId)),e=(t.name,t.id);return void App.VM.open(O7.G87,e,1,P12.A26)}switch(this.viewType){case 1:App.CM.apF(O6.C12,O8.A18,this.curData.skillData.skillid);break;case 2:App.CM.apF(O6.C12,O8.A52,this.curData.skillData.skillid)}}},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A17)},t.prototype.close=function(){this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.dataSource.removeAll(),this.viewType=null},t}(BaseEuiView);__reflect(DlgHeroSkillUpgradeView.prototype,"DlgHeroSkillUpgradeView");var DlgHeroSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.curListData=[],i.preListData=[],i.lockNum=0,i.canRefresh=!0,i.skinName=DlgHeroSkillSkin,i}return __extends(t,s),t.prototype.initUI=function(){this.createList(),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4884)),this.lbTip1.textFlow=M18.HTP.parse(O3.tr(4885)),this.lbTip2.textFlow=M18.HTP.parse(O3.tr(4886)),this.btnChange.label=O3.tr(4887),this.btnGXiulian.label=O3.tr(4888),this.btnXiulian.label=O3.tr(4889),this.cbAutoBuy.label=O3.tr(4890),this.dlg.title=O3.tr(5878)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.heroData=t[0],this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ16(this.onClickHelp,this),this.btnXiulian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnGXiulian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF48,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU55,this),this.cbAutoBuy.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnXiulianTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.ZW97(),this.ZW96(),this.GX5(),this.updateStars(),-1==App.CM.gtM(O6.B82).setting.indexOf(L17.A1)&&(App.CM.apF(O6.B82,L13.A24,L17.A1),this.onClickHelp()),this.parent==K17.UI_Main_TOP&&0<K17.UI_Main.numChildren&&(this.dlg.getBgMask().visible=!1)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];switch(s.prototype.uBM.apply(this,[t].concat(e)),this.GX5(),e[0]){case P4.T25:this.ZO73(e[1]);break;case P4.P84:this.updateData(),this.ZW96();break;case P4.N95:this.updateData(),this.ZW96(),this.ZW97()}this.updateStars()},t.prototype.updateStars=function(){if(this.heroData.isOwn){this.btnXiulian.visible=!0;for(var t=0;t<this.heroData.xiulianStar;t++){this.gpStar.getChildAt(t).source="v1_img_star1_png"}for(t=this.heroData.xiulianStar;t<7;t++){this.gpStar.getChildAt(t).source="v1_img_star2_png"}P7.FD53(this.btnXiulian,this.heroData.ZS51())}else{for(t=0;t<this.heroData.trainStarInit;t++){this.gpStar.getChildAt(t).source="v1_img_star1_png"}for(t=this.heroData.trainStarInit;t<7;t++){this.gpStar.getChildAt(t).source="v1_img_star2_png"}this.btnXiulian.visible=!1}},t.prototype.GX5=function(){var t=O3.tr(4881,this.lockNum),e="";if(0==this.lockNum)this.lockCost=0,e=O3.tr(4882,"0");else{var i=M18.FL28(N14.init.bindCost.value,"|");this.lockCost=i[this.lockNum-1],e=O3.tr(4882,i[this.lockNum-1])}this.lbTip.textFlow=M18.HTP.parser(O3.tr(1420,t,e));var s=App.CM.gtM(O6.B17);if(this.imgHx.visible=!1,s.openState){if(this.imgJz.visible=!0,0<this.lockCost){this.imgHx.visible=!0;var o=O3.tr(4883,t);this.imgHx.x=20*o.length+105;var r=O3.tr(4882,Math.ceil(this.lockCost*s.actData.d));this.lbTip.textFlow=M18.HTP.parser(O3.tr(1497,t,e,r))}}else this.imgJz.visible=!1;var n=M18.FL28(N14.init.skillItem.value,"|",":",","),a=parseInt(n[0][0]),h=N12.giC(a),p=parseInt(n[0][1]),l=parseInt(n[1][0]),c=N12.giC(l),u=parseInt(n[1][1]);this.lbNorCost.$setText(h+"/"+p),this.lbHightCost.$setText(c+"/"+u),p<=h?this.lbNorCost.$setTextColor(_cc.green):this.lbNorCost.$setTextColor(_cc.red),u<=c?this.lbHightCost.$setTextColor(_cc.green):this.lbHightCost.$setTextColor(_cc.red),this.imgNor.setData(N12.gID(a.toString())),this.imgHight.setData(N12.gID(l.toString())),this.imgNor.setImgSize({w:40,h:40}),this.imgHight.setImgSize({w:40,h:40})},t.prototype.updateData=function(){var t=App.CM.gtM(O6.C12);this.heroData=t.heroList[this.heroData.id]},t.prototype.createList=function(){this.curList.itemRenderer=ItemHeroSkill,this.curDataSource=new eui.ArrayCollection,this.curList.dataProvider=this.curDataSource,this.curList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZS55,this),this.preList.itemRenderer=ItemHeroSkill,this.preDataSource=new eui.ArrayCollection,this.preList.dataProvider=this.preDataSource},t.prototype.initCurList=function(){for(var t=this.heroData.beSkillList,e=this.lockNum=0;e<t.length;e++){var i=N14.FE1(t[e]);(s={heroId:this.heroData.id,type:1,slot:e+1,isActive:!0,isLock:this.heroData.isSkillLock(e+1),skillData:i}).isLock&&(this.lockNum=this.lockNum+1),this.curListData.push(s)}for(e=t.length;e<6;e++){var s={heroDataId:this.heroData.id,type:1,slot:e+1,isActive:!1};this.curListData.push(s)}},t.prototype.initPreList=function(){var t=this.heroData.xiulianSkillList;if(0<t.length){for(var e=0;e<t.length;e++){var i=N14.FE1(t[e]),s={heroId:this.heroData.id,type:2,slot:e+1,isActive:!0,isLock:this.curListData[e].isLock,skillData:i};this.preListData.push(s)}for(e=t.length;e<6;e++){s={heroId:this.heroData.id,type:2,slot:e+1,isActive:!1};this.preListData.push(s)}}else{var o=this.heroData.beSkillList;for(e=0;e<o.length;e++){s={heroId:this.heroData.id,type:2,slot:e+1,isActive:!0,isLock:this.curListData[e].isLock};this.preListData.push(s)}for(e=o.length;e<6;e++){s={heroId:this.heroData.id,type:2,slot:e+1,isActive:!1};this.preListData.push(s)}}},t.prototype.ZS55=function(t){t.itemIndex},t.prototype.ZO73=function(t){var e=t-1;this.curListData[e].isLock=!this.curListData[e].isLock,this.preListData[e].isLock=this.curListData[e].isLock,this.curDataSource.itemUpdated(this.curListData[e]),this.preDataSource.itemUpdated(this.preListData[e]),this.curListData[e].isLock?this.lockNum++:this.lockNum--,this.GX5()},t.prototype.ZW96=function(){this.preListData=[],this.initPreList(),this.preDataSource.replaceAll(this.preListData)},t.prototype.ZW97=function(){this.curListData=[],this.initCurList(),this.curDataSource.replaceAll(this.curListData)},t.prototype.ZS56=function(){var t=App.CM.gtM(O6.C12),e=THH1.FA47();e&&this.ZW99(e,1,t)||this.xiulianSkill()},t.prototype.xiulianSkill=function(){var t=this,e=M18.FL28(N14.init.skillItem.value,"|",":",","),i=parseInt(e[0][0]),s=N12.giC(i),o=parseInt(e[0][1]);if(o<=s){if(!this.ZW98())return void P7.FA78();this.canRefresh&&(this.canRefresh=!1,App.CM.apF(O6.C12,O8.A56,this.heroData.id,1,1))}else if(this.cbAutoBuy.selected){var r=0,n=N15.FA19(2,i).price;App.CM.gtM(O6.B82).avatarInfo.g>=n&&(r=3),0!=r?this.canRefresh&&(this.canRefresh=!1,App.CM.apF(O6.C12,O8.A56,this.heroData.id,1,r)):P7.FA78()}else{var a=o-s;App.VM.open(O7.G87,i,a)}App.K16.doTimer(200,1,function(){t.canRefresh=!0},this)},t.prototype.ZI89=function(){var t=this,e=M18.FL28(N14.init.skillItem.value,"|",":",","),i=parseInt(e[1][0]),s=N12.giC(i),o=parseInt(e[1][1]);if(o<=s)this.ZW98()?this.canRefresh&&(this.canRefresh=!1,App.CM.apF(O6.C12,O8.A56,this.heroData.id,2,1)):P7.FA78();else if(this.cbAutoBuy.selected){var r=0,n=N15.FA19(2,i).price;App.CM.gtM(O6.B82).avatarInfo.g>=n&&(r=3),0!=r?this.canRefresh&&(this.canRefresh=!1,App.CM.apF(O6.C12,O8.A56,this.heroData.id,2,r)):P7.FA78()}else{var a=o-s;App.VM.open(O7.G87,i,a)}App.K16.doTimer(200,1,function(){t.canRefresh=!0},this)},t.prototype.ZF48=function(){var t=App.CM.gtM(O6.C12),e=THH1.FA47();e&&this.ZW99(e,2,t)||this.ZI89()},t.prototype.ZU55=function(){var t=this;if(0<this.heroData.xiulianSkillList.length){var e={handler:function(){App.CM.apF(O6.C12,O8.A46,t.heroData.id)},content:O3.tr(1467)};App.VM.open(O7.C54,e)}},t.prototype.ZW98=function(){var t=App.CM.gtM(O6.B82),e=1,i=App.CM.gtM(O6.B17);return i&&i.openState&&(e=i.actData.d),!(t.avatarInfo.g<this.lockCost*e)},t.prototype.onClickHelp=function(){var t={title:O3.tr(1474),content:N14.gIV("explainSkill")};App.CM.apF(O6.C18,O10.A24,t)},t.prototype.ZW99=function(t,e,i){var s,o,r=this,n=!1;switch(t.quality){case 4:i.isSkillAlert4&&(n=!0,o=function(){i.isSkillAlert4=!1});break;case 5:i.isSkillAlert5&&(n=!0,o=function(){i.isSkillAlert5=!1});break;case 6:i.isSkillAlert6&&(n=!0,o=function(){i.isSkillAlert6=!1});break;case 7:i.isSkillAlert7&&(n=!0,o=function(){i.isSkillAlert7=!1})}if(!n)return!1;switch(e){case 1:s=function(){r.xiulianSkill()};break;case 2:s=function(){r.ZI89()}}var a={handler:s,content:O3.tr(1458,t.skillname),isShowCb:!0,cbHandler:o};return App.VM.open(O7.C54,a),!0},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A59)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.ZG93=function(){App.CM.apF(O6.C12,O8.A37,this.heroData)},t.prototype.close=function(){s.prototype.close.call(this),this.btnXiulian.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnGXiulian.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF48,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU55,this),this.cbAutoBuy.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnXiulianTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.curDataSource.removeAll(),this.preDataSource.removeAll()},t}(BaseEuiView);__reflect(DlgHeroSkillView.prototype,"DlgHeroSkillView");var DlgHeroTjSjView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.E69,O7.G72,"HeroTjView",this.content),App.VM.rgS(O7.E69,O7.G73,"HeroSjView",this.content),this.title=O3.tr(1404);var t=[O3.tr(1433),O3.tr(1434)],e=[O7.G72,O7.G73];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0]||O7.G72;this.ZQ23(i)},t.prototype.ZQ23=function(t){switch(t){case O7.G72:this.title=O3.tr(1435),this.btnList.ZM66(t);break;case O7.G73:this.title=O3.tr(1436),this.btnList.ZM66(t)}},t}(BasePanelView);__reflect(DlgHeroTjSjView.prototype,"DlgHeroTjSjView");var DlgHeroTujianInfo=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=DlgHeroBaseSkin,i.dlg.dlgWidth=620,i.dlg.dlgHeight=806,i.gpContent.height=636,App.VM.rgS(O7.E70,O7.C46,"HeroTjSkillView",i.gpContent),i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.setData(t[0]),this.dlg.ZM69(this.closeSelf,this),this.dlg.title=O3.tr(1433)},t.prototype.initUI=function(){},t.prototype.setData=function(t){var e=App.CM.gtM(O6.C12);e.skillViewType=3,e._heroTjViewId=t.heroData?t.heroData.id:t.id,App.VM.open(O7.C46,t)},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A51)},t.prototype.close=function(){s.prototype.close.call(this)},t}(BaseEuiView);__reflect(DlgHeroTujianInfo.prototype,"DlgHeroTujianInfo");var DlgHeroZzView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.isAutoRaising=!1,i.timerArray=[],i.isBarAction=!1,i.isAdvance=!1,i._useKID=null,i.skinName=HeroZzViewSkin,i}return __extends(t,o),t.prototype.initUI=function(){this.attrLabel||(this.attrLabel=new AttrLabel,this.gpAttr.addChild(this.attrLabel)),this.dlg.title=O3.tr(1419),this.scImg.scrollPolicyH="OFF",this.scImg.scrollPolicyV="OFF",this.itemIcon=new ItemIcon,this.gpIcon.addChild(this.itemIcon),this.pBarPro.slideDuration=0},t.prototype.childrenCreated=function(){o.prototype.childrenCreated.call(this),this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4865)),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4866)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4867)),this.btnAutoRai.label=O3.tr(1462)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dlg.ZM69(this.closeSelf,this),this.btnAutoRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.isBarAction=!1,this.topContent||(this.topContent=new HeroZzIconList,this.gpBase.addChild(this.topContent),this.topContent.top=-15);var i=App.CM.gtM(O6.C12);this.ZI88(i),this.GY15()},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A88)},t.prototype.raising=function(){this.isAdvance=!1,this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){var t=this,e=this.itemIcon.data.itemData.data,i=N14.gIV("aptitudeItem1"),s=N14.gIV("aptitudeItem2"),o=function(){t.isAdvance=!1,t.isAuto=!0,t.autoUpgrade(!1)};e.id==i||e.id==s?this.btnAutoRai.label==O3.tr(1461)?o():App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(8371,e.name)),this,o):o()},t.prototype.GY15=function(){var t={id:this.heroData.heroModel,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setData(t,this.gpHero),this.objBoss.action=Action.Stand},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG98)switch(s){case P4.L98:this.isBarAction=!0,this.isPlayingAni=!1,this.topContent.ZS64(t),this.ZI88(t);break;case"changeZzHero":this._useKID=null,this.isBarAction=!1,this.stopAuto(),this.ZI88(t);default:this.ZI88(t)}},t.prototype.ZI88=function(t){var e,i=this;this.heroData=t.heroList[t.heroZzViewId],this.GY15();for(var s=0,o=0;o<this.heroData.reqItem.length;o++)if(0<(s=N12.giC(this.heroData.reqItem[o]))){e=N12.gID(this.heroData.reqItem[o].toString());break}0==s&&(e=N12.gID(this.heroData.reqItem[0].toString())),this._useKID||(this._useKID=e.id),this.lbCostName.$setText(e.name),this.lbCostReq.$setText("("+s+"/1)"),1<=s?this.lbCostReq.$setTextColor(_cc.dgreen):this.lbCostReq.$setTextColor(_cc.red),this.itemIcon.data={itemData:{data:e,ct:0},isBottom:!1},this.lbPowerTop.$setText(this.heroData.power.toString()),O5.FB13(this.lbName,this.heroData.name,this.heroData.quality),this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpName.width=this.lbName.width;var r=N14.FF6(this.heroData.zzLv).name;this.lbLv.$setText(r);var n=N14.FF5(this.heroData.aptiType);if(this._useKID!=e.id){this._useKID=e.id;var a=N14.gIV("aptitudeItem1"),h=N14.gIV("aptitudeItem2");if(e.id==a||e.id==h){this.stopAuto();return void App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(8371,e.name)),this,function(){i.isAdvance=!1,i.isAuto=!0,i.autoUpgrade(!1)})}}if(this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1),this.pBarPro.labelFunction=null,THH1.FL80(this.heroData.zzLv))0<this.timerArray.length&&this.stopAuto(),egret.Tween.removeTweens(this.pBarPro),this.pBarPro.value=100,this.pBarPro.maximum=100,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.btnAutoRai.visible=!1;else{this.btnAutoRai.visible=!0;var p=0;if(p=this.heroData.zzLv<5?n.reqnum:n.reqmore,this.isBarAction)if(0==this.heroData.zzExp)this.isAdvance=!0,egret.Tween.removeTweens(this.pBarPro),this.pBarPro.maximum=p,this.pBarPro.value=this.heroData.zzExp,this.stopAuto();else{this.heroData.zzExp==this.pBarPro.maximum-1&&this.isAuto&&(this.closeHandler(),App.K16.doTimer(200,1,function(){i.ZQ92(!0)},this)),this.isPlayingAni||(this.isPlayingAni=!0,this.littleAddExp(t))}else egret.Tween.removeTweens(this.pBarPro),this.pBarPro.maximum=p,this.pBarPro.value=this.heroData.zzExp,this.btnAutoRai.enabled=!0,P16.sGF(this.btnAutoRai,!1)}this.btnAutoRai.label!=O3.tr(1461)?P7.FD53(this.btnAutoRai,this.heroData.getZzRedNum()):P7.FD53(this.btnAutoRai,0),this.setListView()},t.prototype.setListView=function(){var t=THH1.FB32(this.heroData.zzAttr,O3.tr(1408));this.attrLabel.data=t},t.prototype.sureStop=function(){this.btnAutoRai.label==O3.tr(1461)&&this.stopAuto()},t.prototype.stopAuto=function(){this.isAuto=!1,this.btnAutoRai.label=O3.tr(1462),this.closeHandler(),P7.FD53(this.btnAutoRai,this.heroData.getZzRedNum())},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.littleAddExp=function(t){var e=this.pBarPro.value,i=0,s=1;e+(i=0==this.heroData.zzExp?this.pBarPro.maximum-e:this.heroData.zzExp-e)>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.ZQ92=function(t,e){if(this.isAdvance)return this.stopAuto(),!1;App.CM.gtM(O6.B82),App.CM.gtM(O6.C12);if(THH1.FL80(this.heroData.zzLv))return P18.sDP(O3.tr(1455)),!1;for(var i,s=0,o=0;o<this.heroData.reqItem.length&&(i=this.heroData.reqItem[o],!(0<(s=N12.giC(i))));o++);if(1<=s){var r={hid:this.heroData.id};return this.apF(O8.A34,r),!0}return t&&this.stopAuto(),App.VM.open(O7.G87,i,1),!1},t.prototype.autoUpgrade=function(t){var e=this;if(this.btnAutoRai.label==O3.tr(1461))this.btnAutoRai.label=O3.tr(1462),this.stopAuto();else{var i=void 0;if(t||(i=this.ZQ92(!0,!1)),t||i){this.btnAutoRai.label=O3.tr(1461),P7.FD53(this.btnAutoRai,0),0<this.timerArray.length&&this.closeHandler();var s=App.K16.doTimer(300,0,function(){e.ZQ92(!0,t)},this);this.timerArray.push(s)}}},t.prototype.updataExp=function(t,e,i){var n=this,a=function(t,e,i){var s,o=0,r=n;n.heroData.aptiType;(s=((o=e+i>=r.pBarPro.maximum?(i-=r.pBarPro.maximum-e,r.pBarPro.maximum):i+e)-r.pBarPro.value)/r.pBarPro.maximum*1e3)<250&&(s=250);egret.Tween.get(r.pBarPro).to({value:o},s).wait(10).call(function(){r.lbAddExp.text="+1",egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:-35},200).call(function(){r.lbAddExp.y=-20,r.lbAddExp.visible=!1}),r.pBarPro.value==r.pBarPro.maximum&&(e=0,(r.pBarPro.value=0)<t-1&&a(--t,e,i))})};a(i,t,e)},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.close=function(){this.closeHandler(),this.btnAutoRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.isAdvance=!1,this.objBoss.destory(),this.objBoss=null,this.gpHero.removeChildren(),this.isAuto=null,this.isBarAction=null,this.isPlayingAni=null,this.removeTween(),this.gpBase.removeChild(this.topContent),this.topContent=null,this.stopAuto()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp)},t}(BaseEuiView);__reflect(DlgHeroZzView.prototype,"DlgHeroZzView");var HeroAttrInfoView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.open=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];s.prototype.open.apply(this,e),this.curData=e[0],t=O3.tr(4839,this.curData.name),this.gpHName.visible=!0,this.gpWName.visible=!1,this.setDlgInfo(O8.A44,t,!0),this.GX5()},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4837)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4838))},t.prototype.GX5=function(){this.curData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1),O5.FB13(this.lbName,this.curData.name,this.curData.quality),this.lbPowerTop.$setText(this.curData.power),this.curData.isOwn?(this.lbLv.text=this.curData.lv.toString(),this.gpLv.$setVisible(!0),this.imgNoActive.$setVisible(!1)):(this.gpLv.$setVisible(!1),this.imgNoActive.$setVisible(!0)),this.lbQuality.text=this.curData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpName.width=this.lbName.width,this.setListView(),this.GY15(this.curData.heroModel)},t.prototype.setListView=function(){for(var t=[],e=0;e<3;e++){var i={};switch(e){case 0:i=THH1.FB32(this.curData.heroAttr,O3.tr(1407));break;case 1:i=THH1.FB32(this.curData.zzAttr,O3.tr(1408));break;case 2:if(this.curData.skillEvoType&&1==this.curData.isBreakEvo){var s=THH1.FI55(N14.gIV("breakAttr"));for(var o in this.curData.evoAttr)s[o]||(s[o]=0),s[o]=this.curData.evoAttr[o]+Number(s[o]);i=THH1.FB32(s,O3.tr(1409))}else i=THH1.FB32(this.curData.evoAttr,O3.tr(1409))}t.push(i)}this.curData.skillEvoType||t.splice(2,1),this.dataSource.replaceAll(t)},t}(HeroInfoBaseView);__reflect(HeroAttrInfoView.prototype,"HeroAttrInfoView");var HeroCardMergeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroCardMergeSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);this.title.text=O3.tr(8680),this.mergebtn.label=O3.tr(8680),this.lbStr.text=O3.tr(8405),this.quesBtn.visible=!1},t.prototype.open=function(t){s.prototype.open.call(this);var e=this;e.debrisConf=N12.gID(t),e.heroConf=N14.FB73(t),e.ZX1(),e.updateScore(),e.updateName(),e.GY15(),e.ZX2(),e.updateDesc(),e.updateCost(),e.ZX3()},t.prototype.ZX1=function(){var t=this;t.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.quesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.openHelpView,t),t.mergebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.doMerge,t),t.waydesc.addEventListener(egret.TextEvent.LINK,t.jumpLink,t),t.btnTujian.addEventListener(egret.TouchEvent.TOUCH_TAP,t.openTuJian,t)},t.prototype.ZO74=function(){var t=this;t.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.quesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.openHelpView,t),t.mergebtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doMerge,t),t.waydesc.removeEventListener(egret.TextEvent.LINK,t.jumpLink,t),t.btnTujian.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.openTuJian,t)},t.prototype.openTuJian=function(){App.CM.apF(O6.C12,O8.A84)},t.prototype.updateScore=function(){if(this.debrisConf&&this.heroConf){var t=P7.FL92(this.heroConf.initattribute),e=O4.getScore(t);this.score.text=""+e}},t.prototype.updateName=function(){this.debrisConf&&this.heroConf&&(this.heroname.text=this.heroConf.name)},t.prototype.GY15=function(){if(this.debrisConf&&this.heroConf){this.modelObj||(this.modelObj=new FightGameObject),this.hgroup.removeChildren();var t={id:parseInt(this.heroConf.model),x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.modelObj.setData(t,this.hgroup)}},t.prototype.ZX2=function(){if(this.debrisConf&&this.heroConf){this.srgroup.removeChildren();for(var t=this.heroConf.qualityname,e=t.length,i=0;i<e;i++){var s=t.charAt(i),o=void 0;"S"==s?(o=new eui.Image("v1_img_s_wujiang_png"),this.srgroup.addChild(o)):"R"==s&&(o=new eui.Image("v1_img_r_wujiang_png"),this.srgroup.addChild(o))}O5.FB13(this.colortxt1,this.heroConf.name,this.heroConf.quality)}},t.prototype.updateDesc=function(){this.debrisConf&&this.heroConf&&(this.desc.text=this.debrisConf.desc)},t.prototype.updateCost=function(){if(this.debrisConf&&this.heroConf){this.debrisIcon.setData(this.debrisConf);var t,e=N12.giC(this.debrisConf.id),i=this.heroConf.compose.split(";"),s=parseInt(i[0].split(":")[1]);t=s<=e?"<font color='#e5c7ac' size='20'><font color='#75c01a' size='20'>"+e+"</font>/"+s+"</font>":"<font color='#e5c7ac' size='20'><font color='#fb2121' size='20'>"+e+"</font>/"+s+"</font>",this.debrisCost.textFlow=M18.FG71(t);var o=i[1].split(":")[0],r=N12.gID(o);this.lingIcon.setData(r);var n,a=N12.giC(o),h=parseInt(i[1].split(":")[1]);n=h<=a?"<font color='#e5c7ac' size='20'><font color='#75c01a' size='20'>"+a+"</font>/"+h+"</font>":"<font color='#e5c7ac' size='20'><font color='#fb2121' size='20'>"+a+"</font>/"+h+"</font>",this.lingCost.textFlow=M18.FG71(n)}},t.prototype.ZX3=function(){if(this.debrisConf&&this.heroConf)if(this.debrisConf.link){var t=this.debrisConf.link.split(",");this.waydesc.visible=!0,this.waydesc.textFlow=O3.tr2(6856,t[0].split(":")[0])}else this.waydesc.visible=!1},t.prototype.jumpLink=function(t){if("reward"==t.text){if(this.debrisConf&&this.heroConf&&this.debrisConf.link){var e=this.debrisConf.link.split(",");TG84.FM16(e[0].split(":")[1])}}},t.prototype.doMerge=function(){if(this.debrisConf&&this.heroConf){var t=N12.giC(this.debrisConf.id),e=this.heroConf.compose.split(";"),i=parseInt(e[0].split(":")[1]),s=e[1].split(":")[0],o=N12.giC(s),r=parseInt(e[1].split(":")[1]);i<=t&&r<=o?this.apF(O8.A54,this.heroConf.id):P18.sDP(O3.tr(8125))}},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t);if(t instanceof THH9)switch(e){case P4.V43:this.updateCost()}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this);this.ZO74(),this.modelObj&&this.modelObj.destory(),this.debrisConf=null,this.heroConf=null,this.modelObj=null},t.prototype.closeSelf=function(){App.VM.close(O7.E66)},t.prototype.openHelpView=function(){App.CM.apF(O6.C18,O10.A24,{title:"",content:""})},t}(BaseEuiView);__reflect(HeroCardMergeView.prototype,"HeroCardMergeView");var HeroIconList=function(e){function t(){var t=e.call(this)||this;return t._listData=[],t.skinName=HeroIconListSkin,t.initUI(),t}return __extends(t,e),t.prototype.initUI=function(){var t=this.listIcon.layout;this.listGap=t.gap,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),this.listIcon.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.scIconList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.scIconList.viewport=this.listIcon,this.scIconList.scrollPolicyV=eui.ScrollPolicy.OFF,this.createList()},t.prototype.createList=function(){this.dataSource=new eui.ArrayCollection(this._listData),this.listIcon.itemRenderer=IconHero,this.listIcon.dataProvider=this.dataSource},Object.defineProperty(t.prototype,"listData",{get:function(){return this._listData},set:function(t){t?this.initIconList(t):this.dataSource.removeAll()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curView",{get:function(){return this._curView},set:function(t){this._curView=t;for(var e=0;e<this.dataSource.length;e++){var i=this.listIcon.getElementAt(e);i&&(this._curView==O7.C45?i.ZX9(!0):this._curView==O7.A62&&i.ZX9(!1))}},enumerable:!0,configurable:!0}),t.prototype.initIconList=function(t){for(var e in this._listData=[],t){(o=t[e])&&this._listData.push(o)}this._listData.sort(THH1.FI57),this.dataSource.replaceAll(this._listData),this.curHeroIndex=0;var i=App.CM.gtM(O6.C12);if(i.heroViewId)for(var s=0;s<this.listData.length;s++){var o;(o=this._listData[s]).id==i.heroViewId&&(this.curHeroIndex=s)}this.listIcon.selectedIndex=this.curHeroIndex,i.heroViewId!=this.listData[this.curHeroIndex].id&&(i.heroViewId=this.listData[this.curHeroIndex].id,0==this.curHeroIndex&&(this.scIconList.viewport.scrollH=0)),this.ZR52(0,5)},t.prototype.ZN17=function(t){this.curHeroIndex=t.itemIndex;var e=App.CM.gtM(O6.C12);this.listData[this.curHeroIndex].id!=e.heroViewId&&(e.heroViewId=this.listData[this.curHeroIndex].id)},t.prototype.ZK80=function(){if(!(this.listData.length<=5)){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor((this.listIcon.scrollH+5*t)/t);e>=this.listData.length-5&&(e=this.listData.length-5),this.listIcon.scrollH=e*t;var i=Math.min(e+4,this.listData.length);this.ZR52(e,i)}},t.prototype.ZN74=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.ceil((this.listIcon.scrollH-5*t)/t);e<0&&(e=0),this.listIcon.scrollH=e*t;var i=Math.min(e+5,this.listData.length);this.ZR52(e,i)},t.prototype.endScroller=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor(this.listIcon.scrollH/t);e<0&&(e=0);var i=Math.min(e+5,this.listData.length);this.ZR52(e,i)},t.prototype.ZR52=function(t,e){if(App.VM.isOpen(O7.A62))this.imgRedL.visible=!1,this.imgRedR.visible=!1;else{for(var i={left:0,right:0},s=0;s<t;s++){if(0<this.listData[s].ZE7()){i.left=1;break}}for(s=e;s<this.listData.length;s++){if(0<this.listData[s].ZE7()){i.right=1;break}}this.imgRedL.visible=0<i.left,this.imgRedR.visible=0<i.right}},t.prototype.updateDot=function(){var t=this;App.K16.doFrame(1,1,function(){return t.ZR52(0,5)},this,function(){return App.K16.removeAll(t)})},t.prototype.secGuideHeroDeal=function(t){if(!(t<=1)){t-=1;var e=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap;this.listIcon.scrollH=t*e;var i=Math.min(t+4,this.listData.length);this.ZR52(t,i)}},t}(eui.Component);__reflect(HeroIconList.prototype,"HeroIconList");var HeroJxBackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.listData=[],i.skinName=HeroJxBackSkin,i}return __extends(t,s),t.prototype.initUI=function(){this.ZS58(),this.btnBack.label=O3.tr(4853),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4854)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4855)),this.lbTip1.textFlow=M18.HTP.parse(O3.tr(4856)),this.lbTip2.textFlow=M18.HTP.parse(O3.tr(4857))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBack,this),this.heroIconList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.heroIconList.selectedIndex=0;var i=App.CM.gtM(O6.C12);this.ZI88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG98&&this.ZI88(t)},t.prototype.ZI88=function(t){var e=[];for(var i in t.heroList){var s=t.heroList[i];(0<s.jxLv||0<s.jxExp)&&e.push(s)}this.dataSource.replaceAll(e),0<e.length?(this.curHeroIndex=0,this.curData=e[this.curHeroIndex],this.btnBack.enabled=!0,P16.sGF(this.btnBack,!1),this.heroIconList.selectedIndex=0):(this.curData=null,this.btnBack.enabled=!1,P16.sGF(this.btnBack,!0)),this.updateBottom()},t.prototype.ZS58=function(){this.heroIconList.itemRenderer=IconHeroBack,this.dataSource=new eui.ArrayCollection(this.listData),this.heroIconList.dataProvider=this.dataSource,this.scHero.viewport=this.heroIconList,this.heroIconList.selectedIndex=0},t.prototype.ZN17=function(t){this.curHeroIndex=t.itemIndex,this.curData=this.listData[this.curHeroIndex],this.updateBottom()},t.prototype.updateBottom=function(){var t=N14.init.evoItem.value,e=N12.gID(t),i=N12.gID("75002");if(this.gpItem.$children.length<=0&&(this.itemIcon1=new ItemIcon,this.itemIcon2=new ItemIcon,this.gpItem.addChild(this.itemIcon1),this.gpItem.addChild(this.itemIcon2)),this.curData){var s=THH1.FC33(this.curData.id);this.itemIcon1.data={itemData:{data:e,ct:s.item}},this.itemIcon2.data={itemData:{data:i,ct:s.coin}}}else this.itemIcon1.data={itemData:{data:e,ct:0}},this.itemIcon2.data={itemData:{data:i,ct:0}}},t.prototype.onClickBack=function(){var t=this;if(this.curData){var e={handler:function(){App.CM.apF(O6.C12,O8.A38,t.curData.id)},content:O3.tr(1496),isShowCb:!1};App.VM.open(O7.C54,e)}},t.prototype.close=function(){s.prototype.close.call(this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBack,this),this.heroIconList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.dataSource.removeAll()},t}(BaseEuiView);__reflect(HeroJxBackView.prototype,"HeroJxBackView");var HeroJxUpgradeView=function(a){function t(t,e){var i=a.call(this,t,e)||this;return i.isAutoRaising=!1,i.isBarAction=!1,i.isUsingGold=!1,i.isAdvance=!1,i.skinName=HeroJxUpgradeSkin,i}return __extends(t,a),t.prototype.initUI=function(){this.ZO75(),this.pBarPro.slideDuration=0;var t=this.skillList.layout;this.listGap=t.gap,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4844)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4845)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4846)),this.lbTip.textFlow=M18.HTP.parse(O3.tr(4848)),this.lbNoActive.textFlow=M18.HTP.parse(O3.tr(4850)),this.btnHuanhua.label=O3.tr(4851),this.btnRaising.label=O3.tr(4852),this.btnAutoRai.label=O3.tr(1462),this.ckDot.label=O3.tr(7414),this.scSkill.viewport=this.skillList,this.scSkill.scrollPolicyV=eui.ScrollPolicy.OFF,this.btnHuanhua.visible=!1,this.lbTip.visible=!1,this.lbTipBreak.textFlow=O3.tr2(7325),this.btnBreak.label=O3.tr(3605),this.cbBreak.label=O3.tr(5572)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnBreak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnHuanhua.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS59,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.cbBreak.addEventListener(egret.Event.CHANGE,this.changeCb,this),this.ckDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this);var i=App.CM.gtM(O6.B82).setting;if(i&&0!=i.length){this.cbBreak.selected=-1!=i.indexOf(L17.A2),this.isBarAction=!1;var s=App.CM.gtM(O6.C12);this.ckDot.selected=O4.FF89(L17.A33),this.ZI88(s)}},t.prototype.ZO75=function(){this.skillList.itemRenderer=IconJxSkill,this.dataSource=new eui.ArrayCollection,this.skillList.dataProvider=this.dataSource},t.prototype.initList=function(){for(var t=THH1.FC32(this.heroData.skillEvoType),e=[],i=0;i<t.length;i++){var s=!1;this.heroData.jxLv>=i+1&&(s=!0);var o={openState:s,openLv:i+1,skillData:t[i].skill,replaceType:t[i].replaceType};e.push(o)}this.dataSource.replaceAll(e),5<=e.length?(5<e.length?this.btnRight.visible=this.btnLeft.visible=!0:this.btnRight.visible=this.btnLeft.visible=!1,this.skillList.width=520):this.btnRight.visible=this.btnLeft.visible=!1},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG98){switch(s){case P4.W30:this.isPlayingAni=!1,this.isBarAction=!0}this.ZI88(t)}else if(t instanceof TG12&&s==P4.S94){if(this.gpBreak.visible){var o=P7.str2kv1(N14.gIV("breakItem")),r=o.k,n=o.v;N12.giC(r)>=Number(n)?this.ckDot.selected?P7.FD53(this.btnBreak,0):P7.FD53(this.btnBreak,1):P7.FD53(this.btnBreak,0),t.notify()}this.btnAutoRai.label==O3.tr(1462)&&(P7.FD53(this.btnRaising,this.heroData.getJxRedNum()),P7.FD53(this.btnAutoRai,this.heroData.getJxRedNum()))}},t.prototype.ZI88=function(t){var e=this;this.heroData=t.heroList[t.heroViewId],this.initList(),this.lbPowerTop.$setText(this.heroData.power.toString()),O5.FB13(this.lbName,this.heroData.name,this.heroData.quality),this.lbLv.textFlow=M18.HTP.parse(O3.tr(4847,this.heroData.jxLv));var i={id:this.heroData.heroJxModel,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss||(this.objBoss=new FightGameObject),this.objBoss.setData(i,this.gpHero),this.objBoss.action=Action.Stand,this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpName.$setWidth(this.lbName.$getWidth());var s=parseInt(N14.init.evoItem.value);if(this.heroData.isOwn){this.pBarPro.labelFunction=null,this.btnRaising.visible=!0,this.btnAutoRai.visible=!0,this.lbNoActive.visible=!1;var o=N12.giC(s),r=1,n=N14.FL79(this.heroData.jxLv,this.heroData.skillEvoUpType);if(n)if(this.heroData.jxLv>=this.dataSource.length)this.gpCost.visible=!1,this.lbTipBreak.visible=!1,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.gpBtn.visible=!0,this.gpBreak.visible=!1,this.pBarPro.maximum=100,this.pBarPro.value=100,this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!1,this.btnAutoRai.label=O3.tr(1462),P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!0),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0),this.timerHandler&&this.closeHandler();else{this.gpCost.visible=!0;var a=Number(N14.gIV("breakLv"));if(this.dataSource.length>=a&&!this.heroData.isBreakEvo?this.lbTipBreak.visible=!0:this.lbTipBreak.visible=!1,this.heroData.jxLv!=a-1||this.heroData.isBreakEvo)this.gpCoin.visible=this.gpCoin.includeInLayout=!0,this.gpBtn.visible=!0,this.gpBreak.visible=!1,this.pBarPro.labelFunction=null;else{this.gpBtn.visible=!1,this.gpBreak.visible=!0;var h=P7.str2kv1(N14.gIV("breakItem"));s=h.k,r=h.v,o=N12.giC(s),this.gpCoin.visible=this.gpCoin.includeInLayout=!1,this.pBarPro.labelFunction=function(t,e){return O3.tr(7334)},this.pBarPro.maximum=100,this.pBarPro.value=100}var p=n.reqcoin,l=App.CM.gtM(O6.B82);if(this.lbCostGood.$setText(o+"/"+r),this.lbCostCoin.$setText(p),r<=o?(this.lbCostGood.$setTextColor(_cc.green),this.gpBreak.visible&&(this.ckDot.selected?P7.FD53(this.btnBreak,0):P7.FD53(this.btnBreak,1))):this.lbCostGood.$setTextColor(_cc.red),l.avatarInfo.co>=p?this.lbCostCoin.$setTextColor(_cc.green):this.lbCostCoin.$setTextColor(_cc.red),this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1),this.isBarAction&&!this.gpBreak.visible)if(0==this.heroData.jxExp)this.isAdvance=!0,this.pBarPro.maximum=n.reqexp,this.pBarPro.value=this.heroData.jxExp,this.stopAuto();else{var c=N14.gIV("advancedExp");this.heroData.jxExp==this.pBarPro.maximum-parseInt(c)&&this.isAuto&&(this.closeHandler(),App.K16.doTimer(200,1,function(){e.ZQ92(!0,e.isUsingGold)},this)),this.littleAddExp(t)}else this.gpBreak.visible||(this.pBarPro.maximum=n.reqexp,this.pBarPro.value=this.heroData.jxExp);this.btnAutoRai.label!=O3.tr(1461)?(this.btnRaising.enabled=!0,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!1),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,this.heroData.getJxRedNum()),P7.FD53(this.btnAutoRai,this.heroData.getJxRedNum())):(this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0))}}else this.btnRaising.visible=!1,this.btnAutoRai.visible=!1,this.lbNoActive.visible=!0,this.pBarPro.labelFunction=function(t,e){return"0/0"},this.pBarPro.value=0,this.lbCostGood.$setText("-/-"),this.lbCostCoin.$setText("-"),this.lbLv.textFlow=M18.HTP.parse(O3.tr(4847,"0")),this.gpBreak.visible=!1;this.gpCost.visible&&(this.imgGood.setData(N12.gID(s.toString())),this.imgCoin.setData(N12.gID(N12.itemId.coin.toString())),this.imgGood.setImgSize({w:40,h:40}),this.imgCoin.setImgSize({w:40,h:40}))},t.prototype.ZR68=function(){return this.gpHero},t.prototype.raising=function(){this.isAdvance=!1,this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.isAuto=!0,this.isAdvance=!1,this.autoUpgrade(!1)},t.prototype.stopAuto=function(){this.isBarAction=!1,this.isAuto=!1,this.isAutoRaising=!1,this.closeHandler(),this.btnAutoRai.label=O3.tr(1462),this.enabledBtn(!0);App.CM.gtM(O6.C12);P7.FD53(this.btnRaising,this.heroData.getJxRedNum()),P7.FD53(this.btnAutoRai,this.heroData.getJxRedNum())},t.prototype.closeHandler=function(){this.timerHandler&&App.K16.rBH(this.timerHandler),this.timerHandler=null},t.prototype.littleAddExp=function(t){var e=this.pBarPro.value,i=0,s=1;0==this.heroData.jxExp?i=this.pBarPro.maximum-e:(i=this.heroData.jxExp-e)<=0&&(i=this.pBarPro.maximum-e+this.heroData.jxExp),e+i>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.updataExp=function(t,e,i){var h=this,p=function(e,i,s){var t,o=0,r=h,n=r.heroData.jxLv;(t=((o=i+s>=r.pBarPro.maximum?(s-=r.pBarPro.maximum-i,r.pBarPro.maximum):s+i)-r.pBarPro.value)/r.pBarPro.maximum*1e3)<200&&(t=200);var a=N14.gIV("lvExp");egret.Tween.get(r.pBarPro).to({value:o},t).wait(10).call(function(){if(r.lbAddExp.text="+"+a,egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:-50},200).call(function(){r.lbAddExp.y=-35,r.lbAddExp.visible=!1}),r.pBarPro.value==r.pBarPro.maximum){i=0;var t=N14.FL79(n,r.heroData.skillEvoUpType);r.pBarPro.maximum=t.reqexp,(r.pBarPro.value=0)<e-1&&p(--e,i,s)}})};p(i,t,e)},t.prototype.enabledBtn=function(t){(this.btnRaising.enabled=t)?P16.sGF(this.btnRaising,!1):(P16.sGF(this.btnRaising,!0),P7.FD53(this.btnRaising,0))},t.prototype.ZQ92=function(t,e){if(this.isAdvance)return this.stopAuto(),!1;var i=parseInt(N14.init.evoItem.value),s=N12.giC(i),o=N14.FL79(this.heroData.jxLv,this.heroData.skillEvoUpType),r=App.CM.gtM(O6.B82),n=0;return o&&0<o.reqexp&&(n=o.reqcoin),1<=s&&r.avatarInfo.co>=n?(App.CM.apF(O6.C12,O8.A90,this.heroData.id),!0):(this.stopAuto(),s<1?App.VM.open(O7.G87,i,1):r.avatarInfo.co<n&&App.VM.open(O7.F12),!1)},t.prototype.autoUpgrade=function(t){var e=this;if(this.isUsingGold=t,this.btnAutoRai.label==O3.tr(1461))this.stopAuto();else{N14.gIV("lvExp");var i=void 0;if(t||(i=this.ZQ92(!0,!1)),t||i){this.isAutoRaising=!0,this.btnAutoRai.label=O3.tr(1461),P7.FD53(this.btnAutoRai,0),this.enabledBtn(!1);App.CM.gtM(O6.C12);this.timerHandler&&this.closeHandler();var s=App.K16.doTimer(300,0,function(){e.ZQ92(!0,t)},this);this.timerHandler=s}}},t.prototype.ZS59=function(){App.CM.apF(O6.C12,O8.A32,this.heroData.id)},t.prototype.onClickBreak=function(){var t=this,e=P7.str2kv1(N14.gIV("breakItem")),i=e.k;if(Number(e.v)<=N12.giC(i)){App.VM.open(O7.HH38,M18.FG71(O3.tr(7331)),this,function(){App.CM.apF(O6.C12,O8.A75,t.heroData.id)})}else P18.sDP(O3.tr(3616))},t.prototype.changeCb=function(){App.CM.apF(O6.B82,L13.A24,L17.A2),TG40.playClickEffect()},t.prototype.onClickRight=function(){var t=(this.skillList.contentWidth-(this.dataSource.length-1)*this.listGap)/this.dataSource.length+this.listGap,e=Math.floor((this.skillList.scrollH+5*t)/t);e>=this.dataSource.length-5&&(e=this.dataSource.length-5),this.skillList.scrollH=e*t},t.prototype.onClickLeft=function(){var t=(this.skillList.contentWidth-(this.dataSource.length-1)*this.listGap)/this.dataSource.length+this.listGap,e=Math.ceil((this.skillList.scrollH-5*t)/t);e<0&&(e=0),this.skillList.scrollH=e*t},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.ckDotEvnet=function(){App.CM.apF(O6.B82,L13.A24,L17.A33)},t.prototype.close=function(){a.prototype.close.call(this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnBreak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnHuanhua.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS59,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.cbBreak.removeEventListener(egret.Event.CHANGE,this.changeCb,this),this.ckDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this),this.isAdvance=!1,this.dataSource.removeAll(),this.isPlayingAni=null,this.removeTween(),this.stopAuto()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp)},t}(BaseEuiView);__reflect(HeroJxUpgradeView.prototype,"HeroJxUpgradeView");var HeroMainView=function(n){function t(t,e){return n.call(this,t,e)||this}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.sGN("release_hero"),App.VM.rgS(O7.HH96,O7.C45,"HeroUpgradeView",this.content),App.VM.rgS(O7.HH96,O7.A62,"HeroSkillView",this.content),App.VM.rgS(O7.HH96,O7.B76,"HeroPrestigeView",this.content),App.VM.rgS(O7.HH96,O7.E90,"HeroSoulView",this.content),this.title=O3.tr(1404);var t=[O3.tr(1400),O3.tr(1401),O3.tr(1411),O3.tr(1410)],e=[O7.C45,O7.A62,O7.B76,O7.E90];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this);App.CM.gtM(O6.C12);this.topContent=new HeroIconList,this.content.addChild(this.topContent),this.topContent.top=-8,this.topContent.listData=THH1.FG28(),this.topContent.updateDot(),this.updateBtnRed();var i=t[0]||O7.C45;this.topContent.curView=parseInt(i),this.ZQ23(i),this.ZHH59();var s=App.CM.gtM(O6.B17);this.ZS60(s)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG98&&"changeHero"!=s){var o=M18.FL28(s,":");o[1]?this.topContent.curView=parseInt(o[1]):this.topContent.listData=THH1.FG28()}if(t instanceof TG12&&s==P4.S94){this.topContent.listData=THH1.FG28();var r=App.CM.gtM(O6.C12);this.btnList.ZHH58(O7.C45,r.ZB79())}this.updateBtnRed(),(t instanceof TB46||t instanceof TB14)&&this.ZHH59(),t instanceof TE22&&this.ZS60(t)},t.prototype.ZHH59=function(){this.btnList.ZHH59(O7.B76,P7.FD56(E5.A6)),this.btnList.ZHH59(O7.E90,P7.FD56(E5.A7))},t.prototype.ZS60=function(t){this.btnList.ZHH59(O7.A62,t.actData&&t.openState,O3.tr(5550))},t.prototype.ZQ23=function(t){switch(t){case O7.C45:this.title=O3.tr(1404),this.topContent.$setVisible(!0),this.btnList.ZM66(t),this.apF(O8.B3,t),this.topContent.endScroller();break;case O7.A62:this.title=O3.tr(1402),this.topContent.$setVisible(!0),(s=App.CM.gtM(O6.C12)).isOpenSkillView=!0,s.skillViewType=1,this.btnList.ZM66(t),this.apF(O8.B3,t),this.topContent.endScroller();break;case O7.B76:var e=parseInt(N14.init.prestigeLevel.value);if((s=App.CM.gtM(O6.B82)).avatarInfo.l<e){this.topContent.visible=this.topContent.visible;var i=K18.init.commonDesc1.value;return P18.sDP(M18.format(i,[e])),-1}this.title=O3.tr(1413),this.topContent.$setVisible(!1),this.btnList.ZM66(t);break;case O7.E90:var s,o=parseInt(N14.init.soulLevel.value);if((s=App.CM.gtM(O6.B82)).avatarInfo.l<o){this.topContent.visible=this.topContent.visible;i=K18.init.commonDesc1.value;return void P18.sDP(M18.format(i,[o]))}this.title=O3.tr(1412),this.topContent.$setVisible(!1),this.btnList.ZM66(t)}},t.prototype.updateBtnRed=function(){var t=App.CM.gtM(O6.C12),e=t.heroList[t.heroViewId];this.btnList.ZHH58(O7.C45,t.ZB79()),t.isOpenSkillView?this.btnList.ZHH58(O7.A62,0):this.btnList.ZHH58(O7.A62,e.ZS51()),this.btnList.ZHH58(O7.B76,t.ZI80()),this.btnList.ZHH58(O7.E90,t.ZW89())},t.prototype.openHelpView=function(){var t,e;switch(this.btnList.getCurView()){case O7.C45:t=O3.tr(1473),e=N14.gIV("explainLvup");break;case O7.A62:t=O3.tr(1474),e=N14.gIV("explainSkill");break;case O7.B76:t=O3.tr(1475),e=N14.gIV("explainPrestige");break;case O7.E90:t=O3.tr(1476),e=N14.gIV("explainSoul");break;default:return}var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t.prototype.close=function(){n.prototype.close.call(this),App.CM.gtM(O6.C12)._heroViewId=null,this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),P7.FK28(),this.content.removeChildren(),this.topContent.listData=null,this.topContent=null},t.prototype.destroy=function(){},t}(BasePanelView);__reflect(HeroMainView.prototype,"HeroMainView");var HeroPrestigeAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.gpHName.visible=!0,this.gpWName.visible=!1,this.GX5()},t.prototype.GX5=function(){var t=O3.tr(1424);this.lbPowerTop.$setText(THH1.FE3().toString()),this.setDlgInfo(O8.A14,t,!1),this.setListView();var e=THH1.FE4(),i=App.CM.gtM(O6.C12),s=N14.FA46(i.prestigeLv);this.GY15(e,s.skin,1)},t.prototype.setListView=function(){for(var t=[],e=0;e<3;e++){var i={},s={};switch(e){case 0:s=THH1.FF9(1),i.title=O3.tr(1426);break;case 1:s=THH1.FF9(2),i.title=O3.tr(1427);break;case 2:s=THH1.FF9(3),i.title=O3.tr(1428)}var o=1;for(var r in s)i["value"+o]=O3.tr(1489,s[r].name,s[r].value),o++;t.push(i)}this.dataSource.replaceAll(t)},t}(HeroInfoBaseView);__reflect(HeroPrestigeAttrView.prototype,"HeroPrestigeAttrView");var HeroPrestigeView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.isAutoRaising=!1,i.oldHeroLv=0,i.skillListData=[],i.timerArray=[],i.curPage=0,i.isAdvance=!1,i.isBarAction=!1,i.isUsingGold=!1,i.isCanEquip=!1,i.skinName=HeroSoulSkin,i}return __extends(t,n),t.prototype.initUI=function(){this.pBarPro.slideDuration=0,this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=AttrEquipDataItem,this.imgViewType.source="v1_fonts_weiwangjineng_png",this.ZO75(),this.ZX4(),this.lbBottomTitle.textFlow=M18.HTP.parse(O3.tr(4892)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4893)),this.cbAutoSmelt.label=O3.tr(4894),this.btnEquip.label=O3.tr(4895),this.btnHuanhua.label=O3.tr(4896),this.btnRaising.label=O3.tr(4897),this.lbShort.textFlow=M18.HTP.parse(O3.tr(4898))},t.prototype.initData=function(){n.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS61,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnHuanhua.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS59,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.imgNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDan,this),this.btnYijie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickYijie,this),this.btnJiangli.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL60,this),this.btnTempExpDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.btnAutoRai.label=O3.tr(1462),this.isBarAction=!1;var i=App.CM.gtM(O6.C12);this.ZI88(i),this.GY15(i.prestigeLv),this.initPBarPro(i),this.autoShow(i),this.ZN25()},t.prototype.raising=function(){this.isAdvance=!1,this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.isAdvance=!1,this.isAuto=!0,this.autoUpgrade(!1)},t.prototype.GY15=function(t){var e=THH1.FE4(),i=N14.FA46(t),s={id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,ps:i.skin,bt:BehaviourType.Attack_d,sr:1};this.heroObj&&(this.imgHero.removeChildren(),this.heroObj.destory(),this.heroObj=null),this.heroObj=new FightGameObject,this.heroObj.setData(s,this.imgHero),this.heroObj.action=Action.Stand},t.prototype.ZO75=function(){this.skillList.itemRenderer=IconSoulSkill,this.skillDataSource=new eui.ArrayCollection(this.skillListData),this.skillList.dataProvider=this.skillDataSource,this.skillList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZL59,this)},t.prototype.ZX4=function(){this.skillListData=THH1.FA27(1),this.skillDataSource.replaceAll(this.skillListData)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e),this.ZN25();var s=e[0];if(t instanceof TG98){switch(s){case P4.G46:this.isBarAction=!0,this.ZX4();break;case P4.D66:6<=t.prestigeLv?6==t.prestigeLv&&0==t.prestigeExp?this.isBarAction=!1:this.isBarAction=!0:this.isBarAction=!1,this.ZX4();break;case P4.G48:this.ZX4()}this.ZI88(t)}else if(t instanceof TF73){var o=App.CM.gtM(O6.C12);this.ZN26(o)}else if(t instanceof THH9){var r=App.CM.gtM(O6.C12);this.ZI45(r)}},t.prototype.autoShow=function(t){THH1.FD13(t,1)&&this.aCF(O6.C18,O10.A5,J12.A3,!0)},t.prototype.initPBarPro=function(t){this.pBarPro.slideDuration=0,this.tempExp=t.tPrestigeExp,this.lbShort.visible=0<this.tempExp,0<this.tempExp?this.pBarPro.imgShort.width=this.pBarPro.width*(this.tempExp/this.pBarPro.maximum):this.pBarPro.imgShort.width=0,this.pBarPro.imgShort.x=this.pBarPro.width*(this.pBarPro.value/this.pBarPro.maximum)-this.pBarPro.imgShort.width},t.prototype.ZN26=function(t){if(0<t.ZB41())return this.btnTempExpDan.visible=this.btnTempExpDan.imgNew.visible=!0,void(this.btnYijie.visible=!1);this.btnTempExpDan.visible=!1;var e=t.ZB81();0==e?this.btnYijie.visible=!1:(this.btnYijie.visible=!0,P7.FD53(this.btnYijie,e))},t.prototype.ZI88=function(t){var e=this;this.lbPowerTop.$setText(THH1.FE3().toString());var i=N14.prestige_base[t.prestigeLv];if(N14.prestige_base[t.prestigeLv+1]?this.maxPage=t.prestigeLv+1:this.maxPage=t.prestigeLv,this.ZN26(t),P7.FD53(this.btnJiangli,t.ZB80()),P7.FD53(this.btnDan,t.ZC53()),this.pBarPro.labelFunction=null,i.exp<0)this.gpCost.visible=!1,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.pBarPro.maximum=100,this.pBarPro.value=100,this.pBarPro.imgShort.width=0,this.pBarPro.imgShort.visible=!1,this.lbShort.visible=!1,this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!1,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!0),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0),0<this.timerArray.length&&this.stopAuto();else{if(this.gpCost.visible=!0,this.isBarAction)if(0==t.prestigeExp)this.isAdvance=!0,this.pBarPro.maximum=i.exp,this.pBarPro.value=t.prestigeExp,this.initPBarPro(t),this.stopAuto();else{var s=N14.gIV("advancedExp");t.prestigeExp==this.pBarPro.maximum-parseInt(s)&&this.isAuto&&(this.closeHandler(),App.K16.doTimer(200,1,function(){e.ZQ92(!0,e.isUsingGold)},this)),this.littleAddExp(t)}else this.pBarPro.maximum=i.exp,this.pBarPro.value=t.prestigeExp,this.initPBarPro(t);this.btnAutoRai.label!=O3.tr(1461)?(this.btnRaising.enabled=!0,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!1),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,t.ZF43()),P7.FD53(this.btnAutoRai,t.ZF43())):(this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0))}(this.oldHeroLv<t.prestigeLv||0==this.curPage)&&(this.curPage=t.prestigeLv,this.oldHeroLv=t.prestigeLv),this.ZL58(),this.ZI45(t)},t.prototype.ZI45=function(t){var e=parseInt(N14.init.timeItem1.value),i=N12.giC(e),s=parseInt(N14.init.prestigeItem.value),o=N12.giC(s)+i,r=N14.prestige_base[t.prestigeLv],n=r.pill,a=r.coin;this.lbCostGood.$setText(o+"/"+n),this.lbCostCoin.$setText(r.coin),0<i?this.imgGood.setData(N12.gID(e.toString())):this.imgGood.setData(N12.gID(s.toString())),this.imgCoin.setData(N12.gID(N12.itemId.coin.toString())),this.imgGood.setImgSize({w:40,h:40}),this.imgCoin.setImgSize({w:40,h:40});var h=App.CM.gtM(O6.B82);n<=o?this.lbCostGood.$setTextColor(_cc.dgreen):this.lbCostGood.$setTextColor(_cc.red),h.avatarInfo.co>=a?this.lbCostCoin.$setTextColor(_cc.dgreen):this.lbCostCoin.$setTextColor(_cc.red),this.ZN26(t)},t.prototype.stopAuto=function(){this.isAuto=!1,this.closeHandler(),this.btnAutoRai.label=O3.tr(1462);var t=App.CM.gtM(O6.C12);P7.FD53(this.btnRaising,t.ZF43()),P7.FD53(this.btnAutoRai,t.ZF43()),this.enabledBtn(!0)},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.littleAddExp=function(t){var e=this.pBarPro.value,i=0,s=1;0==t.prestigeExp?i=this.pBarPro.maximum-e:(i=t.prestigeExp-e)<=0&&(i=this.pBarPro.maximum-e+t.prestigeExp),e+i>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){(this.btnRaising.enabled=t)?P16.sGF(this.btnRaising,!1):(P16.sGF(this.btnRaising,!0),P7.FD53(this.btnRaising,0))},t.prototype.canExpend=function(t){var e=this,i=App.CM.gtM(O6.C12);if(i.isLvUpGoldAlert){if(2==t){var s=function(){e.autoUpgrade(!0),i.isPrestigeGoldAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}s=function(){e.ZQ92(!1,!0),i.isPrestigeGoldAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}return 1==t?this.ZQ92(!1,!0):this.autoUpgrade(!0),!0},t.prototype.ZQ92=function(t,e){if(this.isAdvance)return this.stopAuto(),!1;var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.C12),o=N14.prestige_base[s.prestigeLv],r=o.pill,n=o.coin,a=parseInt(N14.init.timeItem1.value),h=N12.giC(a),p=parseInt(N14.init.prestigeItem.value),l=N12.giC(p);s.pIsUsingTempPill=0<h;var c=1;if(l+h<r&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,p,r-l-h),t&&this.stopAuto(),!1;if(n>i.avatarInfo.co)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&n<=i.avatarInfo.co&&l<r){var u=N15.FA50(p),d=N15.FB92(p);if(i.avatarInfo.bg>=u)c=2;else{if(!e&&s.isPrestigeGoldAlert)return this.stopAuto(),t?this.canExpend(2):this.canExpend(1);if(!(i.avatarInfo.g>=d*r))return P7.FA78(),this.stopAuto(),!1;c=3}}return this.apF(O8.A12,c),!0},t.prototype.autoUpgrade=function(t){var e=this;if(this.isUsingGold=t,this.btnAutoRai.label==O3.tr(1461))this.stopAuto();else{N14.gIV("advancedExp");var i=void 0;if(t||(i=this.ZQ92(!0,!1)),t||i){App.CM.gtM(O6.C12);this.btnAutoRai.label=O3.tr(1461),P7.FD53(this.btnAutoRai,0),this.enabledBtn(!1);var s=App.K16.doTimer(300,0,function(){e.ZQ92(!0,t)},this);this.timerArray.push(s)}}},t.prototype.updataExp=function(t,e,i){var l=this,c=App.CM.gtM(O6.C12),u=c.tPrestigeExp,d=function(t,e,i){var s,o=0,r=l,n=c.prestigeLv;(s=((o=e+i>=r.pBarPro.maximum?(i-=r.pBarPro.maximum-e,r.pBarPro.maximum):i+e)-r.pBarPro.value)/r.pBarPro.maximum*1e3)<200&&(s=200);var a=r.pBarPro.width*(u/r.pBarPro.maximum),h=r.pBarPro.width*((o-u)/r.pBarPro.maximum);c.pIsUsingTempPill?(r.tempExp>u&&(a=r.pBarPro.width-r.pBarPro.imgShort.x),r.tempExp=u,egret.Tween.get(r.pBarPro.imgShort).to({width:a},s).call(function(){0==r.tempExp&&(r.pBarPro.imgShort.width=r.pBarPro.imgShort.x=0)})):(r.tempExp>u&&(h=r.pBarPro.width-r.pBarPro.imgShort.width),egret.Tween.get(r.pBarPro.imgShort).to({x:h},s),r.tempExp=u);var p=N14.gIV("advancedExp");egret.Tween.get(r.pBarPro).to({value:o},s).call(function(){r.lbAddExp.text="+"+p,r.lbShort.visible=!!u,egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:-40},200).call(function(){r.lbAddExp.y=-24,r.lbAddExp.visible=!1}),r.pBarPro.value==r.pBarPro.maximum&&(e=0,r.pBarPro.maximum=N14.prestige_base[n].exp,r.pBarPro.value=r.pBarPro.slideDuration=r.pBarPro.imgShort.width=r.pBarPro.imgShort.x=0,0<t-1?d(--t,e,i):c.pIsUsingTempPill=!1)})};d(i,t,e)},t.prototype.updateEquip=function(){var t=App.CM.gtM(O6.B98);t.prestigeEquip.sort(function(t,e){return t.i-e.i});for(var e=[{},{},{},{}],i=1;i<=e.length;i++){for(var s=0;s<t.prestigeEquip.length;s++){if(i==M10.FD92(t.prestigeEquip[s].i.toString(),t.prestigeEquip[s].t).pos){e[i-1]={i:t.prestigeEquip[s].i,ok:!0,isNew:!1,t:t.prestigeEquip[s].t};break}}if("{}"==JSON.stringify(e[i-1]))for(var o in M10.prestige){var r=M10.prestige[o];if(r.pos==i){e[i-1]={i:r.id,ok:!1,isNew:!1,t:r.equiptype};break}}}this.isCanEquip=!1;for(s=1;s<=e.length;s++)0<=t.canPrestigeEquip.indexOf(s.toString())&&(e[s-1].isNew=!0,this.isCanEquip=!0);this.equipCollection.replaceAll(e)},t.prototype.ZL58=function(){var t=App.CM.gtM(O6.C12),e=N14.prestige_base[this.curPage];if(this.lbName.$setText(e.name),this.lbLv.textFlow=M18.HTP.parse(O3.tr(4891,e.level)),this.lbNextPower.$setVisible(!1),this.updateEquip(),this.btnHuanhua.visible=this.imgHuanhua.visible=this.btnEquip.visible=this.lbNextPower.visible=!1,this.isCanEquip)this.btnEquip.visible=!0,this.btnEquip.imgNew.visible=!0;else if(this.curPage==this.maxPage&&this.maxPage!=t.prestigeLv)this.lbNextPower.$setVisible(!0),this.lbNextPower.textFlow=M18.HTP.parser(O3.tr(1429,THH1.FC34()));else{var i=t.prestigeSkin==this.curPage;this.btnHuanhua.visible=!i,this.imgHuanhua.visible=i}this.imgNext.visible=this.curPage==this.maxPage-1&&this.maxPage!=t.soulLv,1==this.curPage?this.btnLeft.visible=!1:this.btnLeft.visible=!0,this.curPage==this.maxPage?(this.btnRight.enabled=!1,P16.sGF(this.btnRight,!0)):(this.btnRight.enabled=!0,P16.sGF(this.btnRight,!1)),e.level!=this.curEffect&&(this.GY15(e.level),this.curEffect=e.level)},t.prototype.ZL59=function(t){var e=t.item;App.CM.apF(O6.C12,O8.A24,e.skillData.skillid,1)},t.prototype.ZS59=function(){App.CM.apF(O6.C12,O8.A3,this.curPage)},t.prototype.ZS61=function(){App.CM.apF(O6.C12,O8.A21,1)},t.prototype.onClickDan=function(){var t=N14.init.prestigeAttrPill.value;App.CM.apF(O6.C12,O8.A67,t)},t.prototype.onClickYijie=function(){var t=App.CM.gtM(O6.C12);this.oldHeroLv=t.prestigeLv,this.aCF(O6.C18,O10.A5,J12.A3)},t.prototype.ZU27=function(){App.CM.apF(O6.C12,O8.A93,O8.B4.PRESTIGE)},t.prototype.onClickLeft=function(){1<this.curPage&&(this.curPage-=1,this.ZL58())},t.prototype.onClickRight=function(){this.curPage<this.maxPage&&(this.curPage+=1,this.ZL58())},t.prototype.ZL60=function(){this.apF(O8.A9)},t.prototype.useExpDan=function(){App.CM.apF(O6.C18,O10.A5,J12.A3,!0)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp),egret.Tween.removeTweens(this.pBarPro.imgShort)},t.prototype.GI10=function(){TG76.FI91(E5.A6);var t=THH1.FI60();App.CM.apF(O6.B95,M4.A4,t)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C12);this.btnReveal.imgNew.visible=!!t.redNum2},t.prototype.close=function(){this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS61,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnHuanhua.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS59,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.imgNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDan,this),this.btnYijie.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickYijie,this),this.btnJiangli.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL60,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.closeHandler(),this.imgHero.removeChildren(),this.heroObj.destory(),this.heroObj=null,this.isAdvance=!1,this.isAuto=!1,this.isBarAction=null,this.skillDataSource.removeAll(),this.equipCollection.removeAll(),this.removeTween()},t}(BaseEuiView);__reflect(HeroPrestigeView.prototype,"HeroPrestigeView");var HeroSelectIcon=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.setData=function(t){this.heroIcon.source=t.icon,this.heroName.text=t.name,this.heroId=t.id},t.prototype.ZK12=function(){this.ZHH91(),App.THH33.aUE(this.effctGp,"hero_select")},t.prototype.ZHH91=function(){App.THH33.rEf(this.effctGp,"hero_select")},t.prototype.close=function(){this.heroId=null,this.ZHH91()},t}(eui.Component);__reflect(HeroSelectIcon.prototype,"HeroSelectIcon");var HeroShareDetailView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroShareDetailSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.title=O3.tr(1404),this.GX5(t[0]),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this)},t.prototype.initUI=function(){var t=this.skillList.layout;this.listGap=t.gap,this.listSkill.itemRenderer=IconHeroSkill,this.skillDataSource=new eui.ArrayCollection,this.listSkill.dataProvider=this.skillDataSource,this.scSkill.viewport=this.skillList,this.scSkill.scrollPolicyV=eui.ScrollPolicy.OFF,this.attrLabel||(this.attrLabel=new AttrLabel,this.gpAttr.addChild(this.attrLabel)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4861)),this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4860)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4845)),this.ZO75()},t.prototype.ZO75=function(){this.skillList.itemRenderer=IconJxSkill,this.dataSource=new eui.ArrayCollection,this.skillList.dataProvider=this.dataSource},t.prototype.initList=function(){this.gpEvo.visible=!0;for(var t=THH1.FC32(this.heroData.skillEvoType),e=[],i=0;i<t.length;i++){var s=!1;this.heroData.jxLv>=i+1&&(s=!0);var o={openState:s,openLv:i+1,skillData:t[i].skill,replaceType:t[i].replaceType};e.push(o)}this.dataSource.replaceAll(e),5<=e.length?(5<e.length?this.btnRight.visible=this.btnLeft.visible=!0:this.btnRight.visible=this.btnLeft.visible=!1,this.skillList.width=520):this.btnRight.visible=this.btnLeft.visible=!1},t.prototype.GX5=function(t){this.heroData=t;var e={id:this.heroData.heroModel,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.heroData.skillEvoType?this.initList():this.gpEvo.visible=!1,this.objBoss=new FightGameObject,this.objBoss.setData(e,this.gpHero),this.objBoss.action=Action.Stand,this.lbPowerTop.$setText(this.heroData.power.toString()),O5.FB13(this.lbName,this.heroData.name,this.heroData.quality),this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpNq.width=this.lbName.width+this.lbQuality.width;var i=N14.FE1(this.heroData.skillId);this.skillIconImg.source=i.icon,this.lbSkillOne.text=i.skillname;var s=this.heroData.ZL50();this.skillDataSource.replaceAll(s),this.lbSkillDesc.textFlow=M18.HTP.parse(i.desc);var o=THH1.FB32(this.heroData.heroAttr,O3.tr(1437));this.attrLabel.data=o,this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1)},t.prototype.ZR68=function(){return this.gpHero},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.onClickRight=function(){var t=(this.skillList.contentWidth-(this.dataSource.length-1)*this.listGap)/this.dataSource.length+this.listGap,e=Math.floor((this.skillList.scrollH+5*t)/t);e>=this.dataSource.length-5&&(e=this.dataSource.length-5),this.skillList.scrollH=e*t},t.prototype.onClickLeft=function(){var t=(this.skillList.contentWidth-(this.dataSource.length-1)*this.listGap)/this.dataSource.length+this.listGap,e=Math.ceil((this.skillList.scrollH-5*t)/t);e<0&&(e=0),this.skillList.scrollH=e*t},t.prototype.close=function(){s.prototype.close.call(this),this.objBoss.destory(),this.objBoss.destory(),this.objBoss=null,this.gpHero.removeChildren(),this.skillDataSource.removeAll(),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this)},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A73)},t}(BaseEuiView);__reflect(HeroShareDetailView.prototype,"HeroShareDetailView");var HeroSjView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.listIconData=[],i.skinName=HeroSjInfoSkin,i}return __extends(t,s),t.prototype.initUI=function(){var t=this.listIcon.layout;this.listGap=t.gap,App.VM.rgS(O7.G73,O7.C47,"HeroSjSkillView",this.gpContent),this.ZS58(),this.initIconList(),this.scIconList.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.open=function(){s.prototype.open.call(this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this)},t.prototype.ZS58=function(){this.listIcon.itemRenderer=IconHero,this.iconDataSource=new eui.ArrayCollection(this.listIconData),this.listIcon.dataProvider=this.iconDataSource,this.scIconList.viewport=this.listIcon,this.listIcon.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.listIcon.selectedIndex=0},t.prototype.initIconList=function(){this.listIconData=THH1.FF10(),this.iconDataSource.replaceAll(this.listIconData),this.curHeroIndex=0,this.curData=this.listIconData[this.curHeroIndex],this.GX5()},t.prototype.GX5=function(){var t=App.CM.gtM(O6.C12);t.skillViewType=2,t._heroSjViewId=this.curData.id,App.VM.open(O7.C47,3)},t.prototype.ZN17=function(t){this.curHeroIndex=t.itemIndex,this.curData=this.listIconData[this.curHeroIndex],this.GX5()},t.prototype.ZK80=function(){if(!(this.listIconData.length<=4)){var t=(this.listIcon.contentWidth-(this.listIconData.length-1)*this.listGap)/this.listIconData.length+this.listGap,e=Math.ceil((this.listIcon.scrollH+4*t)/t);e>=this.listIconData.length-4&&(e=this.listIconData.length-4),this.listIcon.scrollH=e*t}},t.prototype.ZN74=function(){var t=(this.listIcon.contentWidth-(this.listIconData.length-1)*this.listGap)/this.listIconData.length+this.listGap,e=Math.ceil((this.listIcon.scrollH-4*t)/t);e<0&&(e=0),this.listIcon.scrollH=e*t},t.prototype.close=function(){this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),App.CM.gtM(O6.C12)._heroSjViewId=null},t}(BaseEuiView);__reflect(HeroSjView.prototype,"HeroSjView");var HeroSkillInfoPopView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SkillInfoSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4858)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4859))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.skillData=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.GX5()},t.prototype.GX5=function(){this.lbType.text=this.skillData.name,this.lbDesc.text=this.skillData.desc,O5.FB13(this.lbName,this.skillData.skillname,this.skillData.quality,1),this.lbDesc.textFlow=(new egret.HtmlTextParser).parser(this.skillData.desc),this.imgIcon.source=this.skillData.icon,this.imgBg.source=THH1.FB74(this.skillData.quality)},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A11)},t.prototype.close=function(){s.prototype.close.call(this),this.skillData=null,this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(HeroSkillInfoPopView.prototype,"HeroSkillInfoPopView");var HeroSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroSkillSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.btnXiulianTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.btnXiulian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.viewType=t[1],this.GX5();var i=App.CM.gtM(O6.B17);this.ZS60(i)},t.prototype.initUI=function(){this.gpInSkillView.$setVisible(!0),this.listSkill.itemRenderer=IconHeroSkill,this.skillDataSource=new eui.ArrayCollection,this.listSkill.dataProvider=this.skillDataSource,this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4873)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4874)),this.lbTip1.textFlow=M18.HTP.parse(O3.tr(4875)),this.lbTip2.textFlow=M18.HTP.parse(O3.tr(4876)),this.btnXiulian.label=O3.tr(4864),"publish"===platform.name?this.lbQuality.visible=!1:this.lbQuality.visible=!0},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5(),t instanceof TE22&&this.ZS60(t)},t.prototype.GX5=function(){var t=App.CM.gtM(O6.C12);this.viewType=t.skillViewType,1==this.viewType?this.heroData=t.heroList[t.heroViewId]:2==this.viewType?this.heroData=t.heroList[t._heroSjViewId]:3==this.viewType&&(this.heroData=t.heroList[t._heroTjViewId]);var e={id:this.heroData.heroModel,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss&&(this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setData(e,this.gpHero),this.objBoss.action=Action.Stand,this.lbPowerTop.$setText(this.heroData.power.toString()),O5.FB13(this.lbName,this.heroData.name,this.heroData.quality),this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpNq.width=this.lbName.width+this.lbQuality.width;var i=N14.FE1(this.heroData.skillId);this.skillIconImg.source=i.icon,this.lbSkillOne.$setText(i.skillname);var s=this.heroData.ZL50();if(this.skillDataSource.replaceAll(s),this.lbSkillDesc.textFlow=M18.HTP.parse(i.desc),1==this.viewType)if(this.btnCheck.$setVisible(!0),this.gpInSkillView.$setVisible(!0),this.gpWj.$setVisible(!1),this.heroData.isOwn){this.btnXiulian.visible=!0;for(var o=0;o<this.heroData.xiulianStar;o++){this.gpStar.getChildAt(o).source="v1_img_star1_png"}for(o=this.heroData.xiulianStar;o<7;o++){this.gpStar.getChildAt(o).source="v1_img_star2_png"}P7.FD53(this.btnXiulian,this.heroData.ZS51())}else{for(o=0;o<this.heroData.trainStarInit;o++){this.gpStar.getChildAt(o).source="v1_img_star1_png"}for(o=this.heroData.trainStarInit;o<7;o++){this.gpStar.getChildAt(o).source="v1_img_star2_png"}this.btnXiulian.visible=!1}else{this.gpWj.$setVisible(!0),this.gpInSkillView.$setVisible(!1),this.btnCheck.$setVisible(!1);var r=THH1.FB32(this.heroData.heroAttr,O3.tr(1437));this.attrLabel||(this.attrLabel=new AttrLabel,this.gpAttr.addChild(this.attrLabel)),this.attrLabel.data=r,2==this.viewType?this.gpTip.$setVisible(!1):this.gpTip.$setVisible(!0)}this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1),P16.sGF(this.skillIconImg,!this.heroData.isOwn)},t.prototype.ZS60=function(t){this.btnXiulian.gpTip.visible=t.actData&&t.openState,this.btnXiulian.gpTip.visible&&(this.btnXiulian.tipText=O3.tr(4877))},t.prototype.ZR68=function(){return this.gpHero},t.prototype.setData=function(t){this.heroData=t},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.ZG93=function(){App.CM.apF(O6.C12,O8.A37,this.heroData)},t.prototype.ZS56=function(){App.CM.apF(O6.C12,O8.A66,this.heroData)},t.prototype.close=function(){s.prototype.close.call(this),this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.viewType=null,this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.btnXiulianTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.btnXiulian.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this)},t}(BaseEuiView);__reflect(HeroSkillView.prototype,"HeroSkillView");var HeroXiulianInfo=function(l){function t(t,e){var i=l.call(this,t,e)||this;return i.skinName=HeroXiulianInfoSkin,i}return __extends(t,l),t.prototype.initUI=function(){l.prototype.initUI.call(this),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4878)),this.lbTip.textFlow=M18.HTP.parse(O3.tr(4880))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(l.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),t[0].isOwn)this.lbNum.textFlow=M18.HTP.parse(O3.tr(4879,t[0].xiulianNum));else{var i=t[0].trainStarInit,s=N14.skill_star[i-1],o=0;s&&(o=s.reqexp),this.lbNum.textFlow=M18.HTP.parse(O3.tr(4879,o))}var r=M18.FL28(N14.gIV("skillItem"),"|",":",","),n=r[0][1][1],a=r[1][1][1],h=N12.gID(r[0][0]),p=N12.gID(r[1][0]);this.lbHight.text=O3.tr(1493,p.name,a),this.lbNorm.text=O3.tr(1493,h.name,n)},t.prototype.closeSelf=function(){App.CM.apF(O6.C12,O8.A27)},t}(BaseEuiView);__reflect(HeroXiulianInfo.prototype,"HeroXiulianInfo");var HeroTjSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroSkillSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.gpStar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.btnXiulian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.viewType=t[1],this.GX5(t[0])},t.prototype.initUI=function(){this.gpInSkillView.$setVisible(!0),this.listSkill.itemRenderer=IconHeroSkill,this.skillDataSource=new eui.ArrayCollection,this.listSkill.dataProvider=this.skillDataSource,"publish"===platform.name?this.lbQuality.visible=!1:this.lbQuality.visible=!0,this.btnXiulian.label=O3.tr(5741),this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4860)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4861))},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5()},t.prototype.GX5=function(t){var e=App.CM.gtM(O6.C12);this.viewType=e.skillViewType,1==this.viewType?this.heroData=e.heroList[e.heroViewId]:2==this.viewType?this.heroData=e.heroList[e._heroSjViewId]:3==this.viewType&&(this.heroData=t||e.heroList[e._heroTjViewId]);var i={id:this.heroData.heroModel,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss&&(this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setData(i,this.gpHero),this.objBoss.action=Action.Stand,this.lbPowerTop.$setText(this.heroData.power.toString()),this.lbName.$setText(this.heroData.name),this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpNq.width=this.lbName.width+this.lbQuality.width;var s=N14.FE1(this.heroData.skillId);this.skillIconImg.source=s.icon,this.lbSkillOne.$setText(s.skillname);var o=this.heroData.ZL50?this.heroData.ZL50(!0):N14.FA68(this.heroData.id);if(this.skillDataSource.replaceAll(o),this.lbSkillDesc.textFlow=M18.HTP.parse(s.desc),1==this.viewType)if(this.btnCheck.$setVisible(!0),this.gpInSkillView.$setVisible(!0),this.gpWj.$setVisible(!1),this.heroData.isOwn){this.btnXiulian.visible=!0;for(var r=0;r<this.heroData.xiulianStar;r++){this.gpStar.getChildAt(r).source="v1_img_star1_png"}for(r=this.heroData.xiulianStar;r<7;r++){this.gpStar.getChildAt(r).source="v1_img_star2_png"}P7.FD53(this.btnXiulian,this.heroData.ZS51())}else{for(r=0;r<this.heroData.trainStarInit;r++){this.gpStar.getChildAt(r).source="v1_img_star1_png"}for(r=this.heroData.trainStarInit;r<7;r++){this.gpStar.getChildAt(r).source="v1_img_star2_png"}this.btnXiulian.visible=!1}else{this.gpWj.$setVisible(!0),this.gpInSkillView.$setVisible(!1),this.btnCheck.$setVisible(!1);var n=THH1.FB32(this.heroData.heroAttr,O3.tr(1437));this.attrLabel||(this.attrLabel=new AttrLabel,this.gpAttr.addChild(this.attrLabel)),this.attrLabel.data=n,this.gpTip.$setVisible(!1)}this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1)},t.prototype.ZR68=function(){return this.gpHero},t.prototype.setData=function(t){this.heroData=t},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.ZG93=function(){App.CM.apF(O6.C12,O8.A37,this.heroData.xiulianNum||0)},t.prototype.ZS56=function(){App.CM.apF(O6.C12,O8.A66,this.heroData)},t.prototype.close=function(){s.prototype.close.call(this),this.viewType=null,this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.gpStar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.btnXiulian.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this)},t}(BaseEuiView);__reflect(HeroTjSkillView.prototype,"HeroTjSkillView");var HeroSjSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroSkillSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.gpStar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.btnXiulian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.viewType=t[1],this.GX5()},t.prototype.initUI=function(){this.listSkill.itemRenderer=IconHeroSkill,this.skillDataSource=new eui.ArrayCollection,this.listSkill.dataProvider=this.skillDataSource,this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4860)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4861)),this.lbTip1.textFlow=M18.HTP.parse(O3.tr(4862)),this.lbTip2.textFlow=M18.HTP.parse(O3.tr(4863)),this.btnXiulian.label=O3.tr(4864),"publish"===platform.name?this.lbQuality.visible=!1:this.lbQuality.visible=!0},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5()},t.prototype.GX5=function(){var t=App.CM.gtM(O6.C12);this.viewType=t.skillViewType,1==this.viewType?this.heroData=t.heroList[t.heroViewId]:2==this.viewType?this.heroData=t.heroList[t._heroSjViewId]:3==this.viewType&&(this.heroData=t.heroList[t._heroTjViewId]),this.objBoss&&(this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null);var e={id:this.heroData.heroModel,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss&&(this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setData(e,this.gpHero),this.objBoss.action=Action.Stand,this.lbPowerTop.$setText(this.heroData.power.toString()),O5.FB13(this.lbName,this.heroData.name,this.heroData.quality),this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpNq.width=this.lbName.width+this.lbQuality.width;var i=N14.FE1(this.heroData.skillId);this.skillIconImg.source=i.icon,this.lbSkillOne.$setText(i.skillname);var s=this.heroData.ZL50();if(this.skillDataSource.replaceAll(s),this.lbSkillDesc.textFlow=M18.HTP.parse(i.desc),1==this.viewType)if(this.btnCheck.$setVisible(!0),this.gpInSkillView.$setVisible(!0),this.gpWj.$setVisible(!1),this.heroData.isOwn){this.btnXiulian.visible=!0;for(var o=0;o<this.heroData.xiulianStar;o++){this.gpStar.getChildAt(o).source="v1_img_star1_png"}for(o=this.heroData.xiulianStar;o<7;o++){this.gpStar.getChildAt(o).source="v1_img_star2_png"}P7.FD53(this.btnXiulian,this.heroData.ZS51())}else{for(o=0;o<this.heroData.trainStarInit;o++){this.gpStar.getChildAt(o).source="v1_img_star1_png"}for(o=this.heroData.trainStarInit;o<7;o++){this.gpStar.getChildAt(o).source="v1_img_star2_png"}this.btnXiulian.visible=!1}else{this.gpWj.$setVisible(!0),this.gpInSkillView.$setVisible(!1),this.btnCheck.$setVisible(!1);var r=THH1.FB32(this.heroData.heroAttr,O3.tr(1437));this.attrLabel||(this.attrLabel=new AttrLabel,this.gpAttr.addChild(this.attrLabel)),this.attrLabel.data=r,2==this.viewType?this.gpTip.$setVisible(!1):this.gpTip.$setVisible(!0)}this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1),P16.sGF(this.skillIconImg,!this.heroData.isOwn)},t.prototype.ZR68=function(){return this.gpHero},t.prototype.setData=function(t){this.heroData=t},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.ZG93=function(){App.CM.apF(O6.C12,O8.A37,this.heroData.xiulianNum||0)},t.prototype.ZS56=function(){App.CM.apF(O6.C12,O8.A66,this.heroData)},t.prototype.close=function(){s.prototype.close.call(this),this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.viewType=null,this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.gpStar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZG93,this),this.btnXiulian.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS56,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this)},t}(BaseEuiView);__reflect(HeroSjSkillView.prototype,"HeroSjSkillView");var HeroSoulAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.gpHName.visible=!0,this.gpWName.visible=!1,this.GX5()},t.prototype.GX5=function(){var t=O3.tr(1425);this.lbPowerTop.$setText(THH1.FI56().toString()),this.setDlgInfo(O8.A50,t,!1),this.setListView();var e=THH1.FE4(),i=App.CM.gtM(O6.C12),s=N14.FB72(i.soulLv);this.GY15(e,s.skin,2)},t.prototype.setListView=function(){for(var t=[],e=0;e<3;e++){var i={},s={};switch(e){case 0:s=THH1.FJ85(1),i.title=O3.tr(1426);break;case 1:s=THH1.FJ85(2),i.title=O3.tr(1427);break;case 2:s=THH1.FJ85(3),i.title=O3.tr(1428)}var o=1;for(var r in s)i["value"+o]=O3.tr(1489,s[r].name,s[r].value),o++;t.push(i)}this.dataSource.replaceAll(t)},t}(HeroInfoBaseView);__reflect(HeroSoulAttrView.prototype,"HeroSoulAttrView");var HeroSoulView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.isAutoRaising=!1,i.skillListData=[],i.timerArray=[],i.curPage=0,i.isAdvance=!1,i.isBarAction=!1,i.isUsingGold=!1,i.isCanEquip=!1,i.skinName=HeroSoulSkin,i}return __extends(t,n),t.prototype.initUI=function(){this.pBarPro.slideDuration=0,this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=AttrEquipDataItem,this.imgViewType.source="v1_fonts_wuhunjineng_png",this.ZO75(),this.ZX4(),this.lbBottomTitle.textFlow=M18.HTP.parse(O3.tr(4909)),this.lbShort.textFlow=M18.HTP.parse(O3.tr(4910)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4911)),this.btnEquip.label=O3.tr(4912),this.btnHuanhua.label=O3.tr(4913),this.btnRaising.label=O3.tr(4914),this.cbAutoSmelt.label=O3.tr(4915)},t.prototype.initData=function(){n.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS61,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnHuanhua.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS59,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.imgNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDan,this),this.btnYijie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickYijie,this),this.btnJiangli.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL60,this),this.btnTempExpDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.btnAutoRai.label=O3.tr(1462),this.isBarAction=!1;var i=App.CM.gtM(O6.C12);this.ZI88(i),this.GY15(i.soulLv),this.initPBarPro(i),this.autoShow(i),this.ZN25()},t.prototype.raising=function(){this.isAdvance=!1,this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.isAdvance=!1,this.isAuto=!0,this.autoUpgrade(!1)},t.prototype.GY15=function(t){var e=THH1.FE4(),i=N14.FB72(t),s={id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,ss:i.skin,bt:BehaviourType.Attack_d,sr:1};this.heroObj&&(this.imgHero.removeChildren(),this.heroObj.destory(),this.heroObj=null),this.heroObj=new FightGameObject,this.heroObj.setData(s,this.imgHero),this.heroObj.action=Action.Stand},t.prototype.ZO75=function(){this.skillList.itemRenderer=IconSoulSkill,this.skillDataSource=new eui.ArrayCollection(this.skillListData),this.skillList.dataProvider=this.skillDataSource,this.skillList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZL59,this)},t.prototype.ZX4=function(){this.skillListData=THH1.FB31(1),this.skillDataSource.replaceAll(this.skillListData)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e),this.ZN25();var s=e[0];if(t instanceof TG98){switch(s){case P4.N97:this.isBarAction=!0,this.ZX4();break;case P4.J90:6<=t.soulLv?6==t.soulLv&&0==t.soulExp?this.isBarAction=!1:this.isBarAction=!0:this.isBarAction=!1,this.ZX4();break;case P4.N99:this.ZX4()}this.ZI88(t)}else if(t instanceof THH9){var o=App.CM.gtM(O6.C12);this.ZI45(o)}else if(t instanceof TF73){var r=App.CM.gtM(O6.C12);this.ZN26(r)}},t.prototype.autoShow=function(t){THH1.FD13(t,2)&&this.aCF(O6.C18,O10.A5,J12.A8,!0)},t.prototype.initPBarPro=function(t){this.pBarPro.slideDuration=0,this.tempExp=t.tSoulExp,this.lbShort.visible=0<this.tempExp,0<this.tempExp?this.pBarPro.imgShort.width=this.pBarPro.width*(this.tempExp/this.pBarPro.maximum):this.pBarPro.imgShort.width=0,this.pBarPro.imgShort.x=this.pBarPro.width*(this.pBarPro.value/this.pBarPro.maximum)-this.pBarPro.imgShort.width},t.prototype.ZN26=function(t){if(0<t.ZE8())return this.btnTempExpDan.visible=this.btnTempExpDan.imgNew.visible=!0,void(this.btnYijie.visible=!1);this.btnTempExpDan.visible=!1;var e=t.ZF45();0==e?this.btnYijie.visible=!1:(this.btnYijie.visible=!0,P7.FD53(this.btnYijie,e))},t.prototype.ZI88=function(t){var e=this,i=N14.soul_base[t.soulLv];if(this.lbPowerTop.$setText(THH1.FI56().toString()),this.lbName.$setText(i.name),this.lbLv.textFlow=M18.HTP.parse(O3.tr(4908,t.soulLv)),N14.soul_base[t.soulLv+1]?this.maxPage=t.soulLv+1:this.maxPage=t.soulLv,this.pBarPro.labelFunction=null,i.exp<0)this.gpCost.visible=!1,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.pBarPro.maximum=100,this.pBarPro.value=100,this.pBarPro.imgShort.width=0,this.pBarPro.imgShort.visible=!1,this.lbShort.visible=!1,this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!1,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!0),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0),0<this.timerArray.length&&this.stopAuto();else{if(this.gpCost.visible=!0,this.isBarAction)if(0==t.soulExp)this.isAdvance=!0,this.pBarPro.maximum=i.exp,this.pBarPro.value=t.soulExp,this.initPBarPro(t),this.stopAuto();else{var s=N14.gIV("advancedExp");t.soulExp==this.pBarPro.maximum-parseInt(s)&&this.isAuto&&(this.closeHandler(),App.K16.doTimer(200,1,function(){e.ZQ92(!0,e.isUsingGold)},this)),this.littleAddExp(t)}else this.pBarPro.maximum=i.exp,this.pBarPro.value=t.soulExp,this.initPBarPro(t);this.btnAutoRai.label!=O3.tr(1461)?(this.btnRaising.enabled=!0,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!1),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,t.ZO65()),P7.FD53(this.btnAutoRai,t.ZO65())):(this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0))}this.ZN26(t),P7.FD53(this.btnJiangli,t.ZF44()),P7.FD53(this.btnDan,t.ZG87()),(this.oldHeroLv<t.soulLv||0==this.curPage)&&(this.curPage=t.soulLv,this.oldHeroLv=t.soulLv),this.ZL58(),this.ZI45(t)},t.prototype.ZI45=function(t){var e=parseInt(N14.init.timeItem2.value),i=N12.giC(e),s=parseInt(N14.init.soulItem.value),o=N12.giC(s)+i,r=N14.soul_base[t.soulLv],n=r.pill,a=App.CM.gtM(O6.B82),h=r.coin;this.lbCostGood.$setText(o+"/"+n),this.lbCostCoin.$setText(r.coin),0<i?this.imgGood.setData(N12.gID(e.toString())):this.imgGood.setData(N12.gID(s.toString())),this.imgCoin.setData(N12.gID(N12.itemId.coin.toString())),this.imgGood.setImgSize({w:40,h:40}),this.imgCoin.setImgSize({w:40,h:40}),n<=o?this.lbCostGood.$setTextColor(_cc.dgreen):this.lbCostGood.$setTextColor(_cc.red),a.avatarInfo.co>=h?this.lbCostCoin.$setTextColor(_cc.dgreen):this.lbCostCoin.$setTextColor(_cc.red),this.ZN26(t)},t.prototype.stopAuto=function(){this.isAuto=!1,this.closeHandler(),this.btnAutoRai.label=O3.tr(1462),this.enabledBtn(!0);var t=App.CM.gtM(O6.C12);P7.FD53(this.btnRaising,t.ZO65()),P7.FD53(this.btnAutoRai,t.ZO65())},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.littleAddExp=function(t){var e=this.pBarPro.value,i=0,s=1;0==t.soulExp?i=this.pBarPro.maximum-e:(i=t.soulExp-e)<=0&&(i=this.pBarPro.maximum-e+t.soulExp),e+i>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){(this.btnRaising.enabled=t)?P16.sGF(this.btnRaising,!1):(P16.sGF(this.btnRaising,!0),P7.FD53(this.btnRaising,0))},t.prototype.canExpend=function(t){var e=this,i=App.CM.gtM(O6.C12);if(i.isLvUpGoldAlert){if(2==t){var s=function(){e.autoUpgrade(!0),i.isSoulGoldAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}s=function(){e.ZQ92(!1,!0),i.isSoulGoldAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}return 1==t?this.ZQ92(!1,!0):this.autoUpgrade(!0),!0},t.prototype.ZQ92=function(t,e){if(this.isAdvance)return this.stopAuto(),!1;var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.C12),o=N14.soul_base[s.soulLv],r=o.pill,n=o.coin,a=parseInt(N14.init.timeItem2.value),h=N12.giC(a),p=parseInt(N14.init.soulItem.value),l=N12.giC(p);s.sIsUsingTempPill=0<h;var c=1;if(l+h<r&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,p,r-l-h),t&&this.stopAuto(),!1;if(n>i.avatarInfo.co)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&n<=i.avatarInfo.co&&l<r){var u=N15.FA50(p),d=N15.FB92(p);if(i.avatarInfo.bg>=u)c=2;else{if(!e&&s.isSoulGoldAlert)return this.stopAuto(),t?this.canExpend(2):this.canExpend(1);if(!(i.avatarInfo.g>=d*r))return P7.FA78(),this.stopAuto(),!1;c=3}}return this.apF(O8.A48,c),!0},t.prototype.autoUpgrade=function(t){var e=this;if(this.isUsingGold=t,this.btnAutoRai.label==O3.tr(1461))this.stopAuto();else{N14.gIV("advancedExp");var i=void 0;if(t||(i=this.ZQ92(!0,!1)),t||i){this.btnAutoRai.label=O3.tr(1461),P7.FD53(this.btnAutoRai,0),this.enabledBtn(!1);App.CM.gtM(O6.C12);var s=App.K16.doTimer(300,0,function(){e.ZQ92(!0,t)},this);this.timerArray.push(s)}}},t.prototype.updataExp=function(t,e,i){var l=this,c=App.CM.gtM(O6.C12),u=c.tSoulExp,d=function(t,e,i){var s,o=0,r=l,n=c.soulLv;(s=((o=e+i>=r.pBarPro.maximum?(i-=r.pBarPro.maximum-e,r.pBarPro.maximum):i+e)-r.pBarPro.value)/r.pBarPro.maximum*1e3)<200&&(s=200);var a=r.pBarPro.width*(u/r.pBarPro.maximum),h=r.pBarPro.width*((o-u)/r.pBarPro.maximum),p=N14.gIV("advancedExp");c.sIsUsingTempPill?(r.tempExp>u&&(a=r.pBarPro.width-r.pBarPro.imgShort.x),r.tempExp=u,egret.Tween.get(r.pBarPro.imgShort).to({width:a},s).call(function(){0==r.tempExp&&(r.pBarPro.imgShort.width=r.pBarPro.imgShort.x=0)})):(r.tempExp>u&&(h=r.pBarPro.width-r.pBarPro.imgShort.width),egret.Tween.get(r.pBarPro.imgShort).to({x:h},s),r.tempExp=u),egret.Tween.get(r.pBarPro).to({value:o},s).call(function(){r.lbAddExp.text="+"+p,r.lbShort.visible=!!u,egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:-40},200).call(function(){r.lbAddExp.y=-24,r.lbAddExp.visible=!1}),r.pBarPro.value==r.pBarPro.maximum&&(e=0,r.pBarPro.maximum=N14.soul_base[n].exp,r.pBarPro.value=r.pBarPro.slideDuration=r.pBarPro.imgShort.width=r.pBarPro.imgShort.x=0,0<t-1?d(--t,e,i):c.sIsUsingTempPill=!1)})};d(i,t,e)},t.prototype.updateEquip=function(){var t=App.CM.gtM(O6.B98);t.soulEquip.sort(function(t,e){return t.i-e.i});for(var e=[{},{},{},{}],i=1;i<=e.length;i++){for(var s=0;s<t.soulEquip.length;s++){if(i==M10.FD92(t.soulEquip[s].i.toString(),t.soulEquip[s].t).pos){e[i-1]={i:t.soulEquip[s].i,ok:!0,isNew:!1,t:t.soulEquip[s].t};break}}if("{}"==JSON.stringify(e[i-1]))for(var o in M10.soul){var r=M10.soul[o];if(r.pos==i){e[i-1]={i:r.id,ok:!1,isNew:!1,t:r.equiptype};break}}}this.isCanEquip=!1;for(s=1;s<=e.length;s++)0<=t.canSoulEquip.indexOf(s.toString())&&(e[s-1].isNew=!0,this.isCanEquip=!0);this.equipCollection.replaceAll(e)},t.prototype.ZL58=function(){var t=App.CM.gtM(O6.C12),e=N14.soul_base[this.curPage];if(this.lbName.$setText(e.name),this.lbLv.textFlow=M18.HTP.parse(O3.tr(4908,e.level)),this.updateEquip(),this.btnHuanhua.visible=this.imgHuanhua.visible=this.btnEquip.visible=this.lbNextPower.visible=!1,this.isCanEquip)this.btnEquip.visible=!0,this.btnEquip.imgNew.visible=!0;else if(this.curPage==this.maxPage&&this.maxPage!=t.soulLv)this.lbNextPower.$setVisible(!0),this.lbNextPower.textFlow=M18.HTP.parser(O3.tr(1429,THH1.FC34()));else{var i=t.soulSkin==this.curPage;this.btnHuanhua.visible=!i,this.imgHuanhua.visible=i}this.imgNext.visible=this.curPage==this.maxPage-1&&this.maxPage!=t.soulLv,1==this.curPage?this.btnLeft.visible=!1:this.btnLeft.visible=!0,this.curPage==this.maxPage?(this.btnRight.enabled=!1,P16.sGF(this.btnRight,!0)):(this.btnRight.enabled=!0,P16.sGF(this.btnRight,!1)),e.level!=this.curEffect&&(this.GY15(e.level),this.curEffect=e.level)},t.prototype.ZL59=function(t){var e=t.item;App.CM.apF(O6.C12,O8.A24,e.skillData.skillid,2)},t.prototype.ZS61=function(){App.CM.apF(O6.C12,O8.A60)},t.prototype.ZS59=function(){App.CM.apF(O6.C12,O8.A22,this.curPage)},t.prototype.onClickDan=function(){var t=N14.init.soulAttrPill.value;App.CM.apF(O6.C12,O8.A67,t)},t.prototype.onClickYijie=function(){this.aCF(O6.C18,O10.A5,J12.A8)},t.prototype.onClickLeft=function(){1<this.curPage&&(this.curPage-=1,this.ZL58())},t.prototype.onClickRight=function(){this.curPage<this.maxPage&&(this.curPage+=1,this.ZL58())},t.prototype.ZU27=function(){App.CM.apF(O6.C12,O8.A93,O8.B4.SOUL)},t.prototype.ZL60=function(){this.apF(O8.A40)},t.prototype.useExpDan=function(){App.CM.apF(O6.C18,O10.A5,J12.A8,!0)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp),egret.Tween.removeTweens(this.pBarPro.imgShort)},t.prototype.GI10=function(){TG76.FI91(E5.A7);var t=THH1.FI59();App.CM.apF(O6.B95,M4.A4,t)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C12);this.btnReveal.imgNew.visible=!!t.redNum1},t.prototype.close=function(){this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS61,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnHuanhua.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS59,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.imgNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDan,this),this.btnYijie.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickYijie,this),this.btnJiangli.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL60,this),this.btnTempExpDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.closeHandler(),this.isAdvance=!1,this.isAuto=!1,this.imgHero.removeChildren(),this.heroObj.destory(),this.heroObj=null,this.isBarAction=null,this.skillDataSource.removeAll(),this.equipCollection.removeAll(),this.removeTween()},t}(BaseEuiView);__reflect(HeroSoulView.prototype,"HeroSoulView");var HeroTjView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroTjContentSkin,i}return __extends(t,s),t.prototype.initUI=function(){if(s.prototype.initUI.call(this),!this.listView){var t={render:ItemHeroTjContent,gap:10,width:this.gpList.width,height:this.gpList.height,arrowScale:1};this.listView=new CommonListBase(t),this.gpList.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.listView.rfL(this.ZX5())}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.listView.open()},t.prototype.ZX5=function(){var t=N14.FHH43(),e=[];for(var i in t)e.push(t[i]);return e.sort(function(t,e){return t.collectionid-e.collectionid}),e},t.prototype.close=function(){this.listView.close()},t}(BaseEuiView);__reflect(HeroTjView.prototype,"HeroTjView");var HeroTotalAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.gpHName.visible=!0,this.gpWName.visible=!1,this.GX5()},t.prototype.GX5=function(){var t=O3.tr(1403);this.lbPowerTop.$setText(THH1.FD11().toString()),this.setDlgInfo(O8.A36,t,!1),this.setListView();var e=THH1.FE4();this.GY15(e)},t.prototype.setListView=function(){for(var t=[],e=0;e<3;e++){var i={},s={};switch(e){case 0:s=THH1.FE2(1),i=THH1.FB32(s,O3.tr(1414));break;case 1:s=THH1.FE2(2),i=THH1.FB32(s,O3.tr(4587));break;case 2:s=THH1.FE2(3),i=THH1.FB32(s,O3.tr(1415))}t.push(i)}this.dataSource.replaceAll(t)},t}(HeroInfoBaseView);__reflect(HeroTotalAttrView.prototype,"HeroTotalAttrView");var HeroUpgradeView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.isAutoRaising=!1,i.isRecuiting=!1,i.isAdvance=!1,i.isBarAction=!1,i.isUsingGold=!1,i.skinName=HeroUpgradeSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.touchEnabled=!1,this.pBarPro.slideDuration=0,this.lbHeroType.textFlow=M18.HTP.parse(O3.tr(4825)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4826)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4827)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4828)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4829)),this.btnQuality.label=O3.tr(4833),this.btnInvite.label=O3.tr(4834),this.btnRaising.label=O3.tr(1145),this.cbAutoSmelt.label=O3.tr(4836),"publish"===platform.name?this.lbQuality.visible=!1:this.lbQuality.visible=!0,this.cbRed.label=O3.tr(7414)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.btnCheckTotal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF49,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnRename.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV81,this),this.btnQuality.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickZz,this),this.btnJuexing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJx,this),this.btnVein.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickVein,this),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this),this.btnTujian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX8,this),this.btnInvite.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV34,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this),this.gpTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.cbRed.selected=O4.FF89(L17.A12);var i=App.CM.gtM(O6.C12),s=App.CM.gtM(O6.B26);this.ZO78(s),i.isOpenBattle=!1,this.ZI88(i),this.ZS63(),this.stopAuto(),this.isBarAction=!1},t.prototype.FG25=function(){return this.hguideFiger||(this.hguideFiger=new GuideFinger,this.hguideFiger.touchEnabled=!1,this.hguideFiger.anchorOffsetX=119,this.hguideFiger.anchorOffsetY=119,this.hguideFiger.touchEnabled=!1),this.hguideFiger},t.prototype.ZO76=function(){this.secCloseFiger&&(App.TF56.ZJ66(this.secCloseFiger),this.secCloseFiger=null)},t.prototype.removeFinger=function(){this.hguideFiger&&(this.gpBase.removeChild(this.hguideFiger),this.hguideFiger=null)},t.prototype.ZC36=function(){var t=App.CM.gtM(O6.C12);if(!(2<=t.battleList.length)){this.hguideFiger=this.FG25(),this.gpBase.addChild(this.hguideFiger);var e=N4.getClosePos(N4.heroGuide),i=THH1.FG28();i.sort(THH1.FI57);var s=this.ZS62(i),o=this.parent.getChildAt(0);o instanceof HeroIconList&&o.secGuideHeroDeal(s.index),t._heroViewId==s.hid&&(e=N4.getClosePos(N4.battle2)),this.hguideFiger&&(this.hguideFiger.setDir(1),this.hguideFiger.x=e.x,this.hguideFiger.y=e.y,this.hguideFiger.moveTo(e))}},t.prototype.ZS62=function(t){if(t&&!(t.length<=0)){for(var e={hid:t[1].id,index:1},i=t.length,s=0;s<i;s++){var o=t[s];o.isOwn&&(1<=o.state||(e.hid=o.id,e.index=s))}return e}},t.prototype.FJ82=function(t,e){if(!this.currStepId||2!=e){var i,s,o=App.VM.gOV(t);if(o&&o.getByName("baseGroup")){if(!(i=o.getByName("baseGroup")))return;s=N4.getClosePos(N4.basePanel)}this.secCloseFiger||(this.secCloseFiger=new GuideFinger,this.secCloseFiger.touchEnabled=!1,this.secCloseFiger.anchorOffsetX=119,this.secCloseFiger.anchorOffsetY=119,this.secCloseFiger.touchEnabled=!1),i.addChild(this.secCloseFiger),this.secCloseFiger.x=s.x,this.secCloseFiger.y=s.y,this.secCloseFiger.moveTo(s)}},t.prototype.getFingerId=function(t){var e=App.CM.gtM(O6.C20);if(t&&!e.ZJ29(this.currStepId)){var i=e.ZP44(t);if(i)return parseInt(i.fingerId)}},t.prototype.raising=function(){this.isAdvance=!1,this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.isAuto=!0,this.isAdvance=!1,this.autoUpgrade(!1)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG98){switch(s){case P4.W32:this.isRecuiting=!1,this.ZI88(t);break;case P4.X76:this.isBarAction=!0,this.isPlayingAni=!1,this.ZI88(t);break;case"refreshFiger":App.VM.isOpen(O7.G69)||this.ZL61();break;case"modelShape":this.FJ82(O7.HH96,1);break;case"secFinger":this.FJ82(O7.HH96,2);break;default:this.ZI88(t)}"changeHero"==s&&(this.isBarAction=!1,this.ZS63(),egret.Tween.removeTweens(this.pBarPro))}else if(t instanceof THH9||t instanceof TG12){var o=App.CM.gtM(O6.C12);this.ZI88(o),s==P4.S94&&this.updateBtnRed()}t instanceof TF84&&this.ZD61(t),t instanceof TG93&&this.ZI18(t),t instanceof TE86&&this.ZO78(t)},t.prototype.ZS63=function(){this.objBoss&&(this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null);var t=this.heroData.heroModel;0<this.heroData.jxSkinLv&&(t=this.heroData.heroJxModel);var e={id:t,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss=new FightGameObject,this.objBoss.setData(e,this.gpHero),this.objBoss.action=Action.Stand},t.prototype.ZO77=function(){TG68.FJ82(O7.HH96,N4.basePanel)},t.prototype.ZL61=function(){if(App.CM.gtM(O6.C12).isOpenBattle){TG68.FG24(this.gpBase);var t=TG68.FG25(),e=N4.getClosePos(N4.battle2);t.setDir(1),t.x=e.x,t.y=e.y,t.moveTo(e)}},t.prototype.ZD61=function(t){var e=App.CM.gtM(O6.C12);this.currStepId&&t.ZJ29(this.currStepId)&&(e.ng?(this.currStepId=null,TG68.FD98(!1),this.ZC36()):(TG68.FD98(!0),TG68.FJ82(O7.HH96,N4.basePanel),this.getFingerId(this.currStepId)==N4.hero_battle_btn&&(App.CM.gtM(O6.C12).isOpenBattle=!1)))},t.prototype.ZI18=function(t){this.ZX7(t)},t.prototype.ZO78=function(t){this.btnEquip.visible=t.isLoadData,this.btnEquip.visible&&P7.FD53(this.btnEquip,t.FL35())},t.prototype.ZI88=function(t){var e;if(egret.Tween.get(this).wait(100).call(function(){TG68.FD9(this,N4.hero_aotoUpgrade_btn,!1,this.gpActiveBottom)},this),egret.Tween.get(this).wait(100).call(function(){!t.ng||App.VM.isOpen(O7.G69)||!THH1.FHH45()||App.VM.isOpen(O7.G71)||this.currStepId?this.removeFinger():this.ZC36()},this),this.heroData&&(e=this.heroData.id),e&&e==t.heroViewId||this.stopAuto(),this.heroData=t.heroList[t.heroViewId],this.heroData){this.lbPowerTop.text=this.heroData.power.toString(),O5.FB13(this.lbName,this.heroData.name,this.heroData.quality),P7.FD53(this.btnVein,t.getVeinClassRedNum()||t.getVeinLvRedNum()),this.lbRecruit.textFlow=M18.HTP.parser(O3.tr(1417,THH1.FD12(t))),this.lbTotalPower.textFlow=M18.HTP.parser(O3.tr(1416,THH1.FD11())),this.gpTotalPower.width=this.lbTotalPower.width,this.lbQuality.text=this.heroData.qualityName,this.lbQuality.$setWidth(25*this.lbQuality.text.length),this.gpNq.width=this.lbName.width+this.lbQuality.width;var i={skillData:N14.FE1(this.heroData.skillId),isLock:!1,isOwn:this.heroData.isOwn};this.skillIcon.data=i,this.heroData.isOwn?(this.ZX6(t),this.ZV70()):this.ZL62(),this.heroData.skillEvoType?this.btnJuexing.visible=!0:this.btnJuexing.visible=!1,0!=this.heroData.state?(this.getFingerId(this.currStepId)==N4.hero_battle_btn&&TG68.FD98(!1),this.btnGo.label=O3.tr(4831),P7.FD53(this.btnGo,0)):(this.btnGo.label=O3.tr(4832),TG68.FD98(!0),P7.FD53(this.btnGo,this.heroData.ZI76()),!this.btnGo.visible||App.VM.isOpen(O7.G71)||t.isOpenBattle||App.VM.isOpen(O7.G69)||egret.Tween.get(this).wait(100).call(function(){TG68.FD9(this,N4.hero_battle_btn,!1,this.gpActiveCenter)},this)),this.heroData.isGold?this.gpGold.$setVisible(!0):this.gpGold.$setVisible(!1);var s=App.CM.gtM(O6.C12);this.btnInvite.visible?this.getFingerId(this.currStepId)==N4.hero_active_btn&&(TG68.FD98(!0),s.modelFiger=!0):this.getFingerId(this.currStepId)==N4.hero_active_btn&&(TG68.FD98(!1),s.modelFiger=!1),this.btnGo.visible?this.getFingerId(this.currStepId)==N4.hero_battle_btn&&TG68.FD98(!0):this.getFingerId(this.currStepId)==N4.hero_battle_btn&&TG68.FD98(!1),this.gpActiveBottom.visible?this.getFingerId(this.currStepId)==N4.hero_aotoUpgrade_btn&&TG68.FD98(!0):this.getFingerId(this.currStepId)==N4.hero_aotoUpgrade_btn&&TG68.FD98(!1),this.currStepId||TG68.FD98(!1)}},t.prototype.ZV70=function(){var t=parseInt(N14.init.upgradeItem.value),e=N12.giC(t),i=N14.lv[this.heroData.lv],s=i.reqnum,o=App.CM.gtM(O6.B82),r=i.reqcoin;this.lbCostGood.text=e+"/"+s;var n=N12.gID(t.toString());this.imgGood.setData(n);var a=N12.gID(N12.itemId.coin);this.imgCoin.setData(a),this.imgGood.setImgSize({w:40,h:40}),this.imgCoin.setImgSize({w:40,h:40}),this.lbCostCoin.text=r,this.lbCostGood.textColor=s<=e?_cc.dgreen:_cc.red,o.avatarInfo.co>=r?this.lbCostCoin.textColor=_cc.dgreen:this.lbCostCoin.textColor=_cc.red},t.prototype.ZX6=function(t){var e=this;this.lbBottomTitle.text=O3.tr(8e3),this.gpLv.$setVisible(!0),this.lbLv.text=this.heroData.lv.toString(),this.imgNoActive.$setVisible(!1),this.gpActiveBottom.$setVisible(!0),this.getFingerId(this.currStepId)==N4.hero_active_btn&&TG68.FD98(!1),this.gpNoActiveBottom.$setVisible(!1),this.btnQuality.$setVisible(!0),this.btnGo.$setVisible(!0),this.btnRename.visible=!0,this.btnShow.visible=!0;var i=App.CM.gtM(O6.C13);this.ZX7(i),P7.FD53(this.btnRaising,this.heroData.ZL51()),P7.FD53(this.btnAutoRai,this.heroData.ZL51()),P7.FD53(this.btnJuexing,this.heroData.getJxRedNum()),P7.FD53(this.btnQuality,t.getZzRedNum());var s=N14.lv[this.heroData.lv];if(this.pBarPro.labelFunction=null,s.reqexp<0)this.stopAuto(),this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!1,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!0),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0),this.gpCost.visible=!1,this.pBarPro.maximum=100,this.pBarPro.value=100,this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)};else if(this.btnAutoRai.label!=O3.tr(1461)?(this.btnRaising.enabled=!0,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!1),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,this.heroData.ZL51()),P7.FD53(this.btnAutoRai,this.heroData.ZL51())):(this.btnRaising.enabled=!1,this.btnAutoRai.enabled=!0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnAutoRai,!1),P7.FD53(this.btnRaising,0),P7.FD53(this.btnAutoRai,0)),this.gpCost.visible=!0,this.isBarAction)if(0==this.heroData.exp&&0<this.oldHeroLv)this.isAdvance=!0,this.pBarPro.maximum=s.reqexp,this.pBarPro.value=this.heroData.exp,this.stopAuto();else{var o=N14.gIV("lvExp");this.heroData.exp==this.pBarPro.maximum-parseInt(o)&&this.isAuto&&0<this.oldHeroLv&&(this.stopAuto(),App.K16.doTimer(150,1,function(){e.ZQ92(!0,e.isUsingGold)},this)),this.isPlayingAni||(this.isPlayingAni=!0,this.littleAddExp(t))}else egret.Tween.removeTweens(this.pBarPro),this.pBarPro.maximum=s.reqexp,this.pBarPro.value=this.heroData.exp},t.prototype.ZX7=function(t){var e=this;if(this.btnShow.visible){var i=t.ZR28(F8.A20);if(i<=0)this.btnShow.enabled=!0,this.btnShow.label=O3.tr(1472);else{var s=i;this.btnShow.enabled=!1,this.btnShow.label=s.toString(),this.shareTimeHander||(this.shareTimeHander=App.K16.doTimer(1e3,i,function(){e.btnShow.enabled=!1,s--,e.btnShow.label=s.toString()},this,function(){e.btnShow.enabled=!0,e.btnShow.label=O3.tr(1472),App.K16.rBH(e.shareTimeHander),e.shareTimeHander=null}))}}},t.prototype.ZL62=function(){this.gpLv.$setVisible(!1),this.imgNoActive.$setVisible(!0),this.gpActiveBottom.$setVisible(!1),this.gpNoActiveBottom.$setVisible(!0),this.btnShow.$setVisible(!1),this.btnQuality.$setVisible(!1),this.btnGo.$setVisible(!1),this.btnRename.visible=!1,this.lbBottomTitle.text=O3.tr(1478);var t=N12.giC(this.heroData.activateItem),e=N12.gID(this.heroData.activateItem.toString());this.lbActCostName.text=e.name,this.lbActiveCost.textFlow=M18.HTP.parse(O3.tr(4830,t)),t<1&&0==this.isRecuiting?(this.lbActiveCost.textColor=_cc.red,this.btnInvite.visible=!1,this.gpTip.visible=!0):(egret.Tween.get(this).wait(100).call(function(){TG68.FD9(this,N4.hero_active_btn,!1,this.gpNoActiveBottom)},this),this.lbActiveCost.textColor=_cc.dgreen,this.btnInvite.visible=!0,this.gpTip.visible=!1),null==this.itemIcon&&(this.itemIcon=new ItemIcon,this.gpIcon.addChild(this.itemIcon)),this.itemIcon.data={itemData:{data:e,ct:0},isBottom:!1},P7.FD53(this.btnInvite,this.heroData.ZL51());var i=N14.FF4(this.heroData.id);if(this.gpTip.visible){var s=M18.FL28(i.getway,":");this.jumpId=parseInt(s[1]),0<this.jumpId?this.lbGetway.textFlow=M18.HTP.parser(O3.tr(1494,s[0])):this.lbGetway.textFlow=M18.HTP.parser(O3.tr(1495,s[0]))}P7.FD53(this.btnJuexing,0)},t.prototype.sureStop=function(){this.btnAutoRai.label==O3.tr(1461)&&this.stopAuto()},t.prototype.stopAuto=function(){this.isAuto=!1,this.isBarAction=!1,this.closeHandler(),this.btnAutoRai.label=O3.tr(7654),this.enabledBtn(!0)},t.prototype.closeHandler=function(){this.upgradeHandler&&App.K16.rBH(this.upgradeHandler),this.upgradeHandler=null},t.prototype.littleAddExp=function(t){var e=this.pBarPro.value,i=0,s=1;e+(i=0==this.heroData.exp?this.pBarPro.maximum-e:this.heroData.exp-e)>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){(this.btnRaising.enabled=t)?P16.sGF(this.btnRaising,!1):(P16.sGF(this.btnRaising,!0),P7.FD53(this.btnRaising,0))},t.prototype.canExpend=function(t){var e=this,i=App.CM.gtM(O6.C12);if(i.isLvUpGoldAlert){if(2==t){var s=function(){e.autoUpgrade(!0),i.isLvUpGoldAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}s=function(){e.ZQ92(!1,!0),i.isLvUpGoldAlert=!1};return App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,s,void 0,this.stopAuto,void 0),!1}return 1==t?this.ZQ92(!1,!0):this.autoUpgrade(!0),!0},t.prototype.ZQ92=function(t,e){if(this.isAdvance&&0<this.oldHeroLv)return this.stopAuto(),!1;var i=parseInt(N14.gIV("upgradeItem")),s=App.CM.gtM(O6.B82),o=N12.giC(parseInt(N14.gIV("upgradeItem"))),r=N14.FD10(this.heroData.lv),n=r.reqnum,a=r.reqcoin,h=1;if(o<n&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,i,n-o),t&&this.stopAuto(),!1;if(a>s.avatarInfo.co)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&a<=s.avatarInfo.co&&o<n){var p=N15.FA50(i),l=N15.FB92(i);if(s.avatarInfo.bg>=p)h=2;else{App.CM.gtM(O6.C12);if(!e)return this.stopAuto(),t?this.canExpend(2):this.canExpend(1);if(!(s.avatarInfo.g>=l*n))return P7.FA78(),this.stopAuto(),!1;h=3}}return this.apF(O8.B7,this.heroData.id,h),!0},t.prototype.autoUpgrade=function(t){var e=this;if(this.isUsingGold=t,this.btnAutoRai.label==O3.tr(1461))this.stopAuto();else{var i=N14.gIV("lvExp"),s=void 0;this.heroData.exp;if(t||(s=this.ZQ92(!0,!1))&&i,t||s){this.btnAutoRai.label=O3.tr(1461),P7.FD53(this.btnAutoRai,0),this.enabledBtn(!1);var o=O4.getLv(),r=N14.gIV("upgradeLv");this.oldHeroLv=this.heroData.lv,o>=parseInt(r)&&(this.oldHeroLv=-1),this.upgradeHandler&&this.closeHandler(),this.upgradeHandler=App.K16.doTimer(300,0,function(){e.ZQ92(!0,t)},this)}}},t.prototype.updataExp=function(t,e,i){var h=this,p=function(e,i,s){var t,o=0,r=h,n=r.heroData.lv;(t=((o=i+s>=r.pBarPro.maximum?(s-=r.pBarPro.maximum-i,r.pBarPro.maximum):s+i)-r.pBarPro.value)/r.pBarPro.maximum*1e3)<200&&(t=200);var a=N14.gIV("lvExp");egret.Tween.get(r.pBarPro).to({value:o},t).wait(10).call(function(){if(r.lbAddExp.text="+"+a,egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:-50},200).call(function(){r.lbAddExp.y=-35,r.lbAddExp.visible=!1}),r.pBarPro.value==r.pBarPro.maximum){i=0;var t=N14.FD10(n);r.pBarPro.maximum=t.reqexp,(r.pBarPro.value=0)<e-1&&p(--e,i,s)}})};p(i,t,e)},t.prototype.updateBtnRed=function(){var t=this.heroData.ZL51();P7.FD53(this.btnRaising,t),P7.FD53(this.btnAutoRai,t)},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A12),TG40.playClickEffect()},t.prototype.ZS57=function(){App.CM.apF(O6.C12,O8.A58,this.heroData)},t.prototype.ZF49=function(){App.CM.apF(O6.C12,O8.A45)},t.prototype.ZV81=function(){App.CM.apF(O6.C12,O8.A71,this.heroData)},t.prototype.onClickZz=function(){App.CM.apF(O6.C12,O8.A99,this.heroData)},t.prototype.onClickJx=function(){this.stopAuto(),App.CM.apF(O6.C12,O8.B1)},t.prototype.onClickVein=function(){this.stopAuto(),HeroVeinUtils.isOpenVein(!0)&&App.VM.open(O7.HeroVeinMain)},t.prototype.onClickGo=function(){0==this.heroData.state?(this.removeFinger(),App.VM.open(O7.G71,this.heroData.id,this.getFingerId(this.currStepId))):App.CM.apF(O6.C12,O8.A78,this.heroData.id,0)},t.prototype.ZX8=function(){App.CM.apF(O6.C12,O8.A84)},t.prototype.ZV34=function(){this.isRecuiting=!0,App.CM.apF(O6.C12,O8.A94,this.heroData.id)},t.prototype.onClickSkill=function(){var t=N14.FE1(this.heroData.skillId);App.CM.apF(O6.C12,O8.A20,t)},t.prototype.onClickShow=function(){var t=P7.FF60(),e=N18.FC83(t);if(O4.getLv()<e.needlevel)P18.sDP(M18.format(K18.init.commonDesc1.value,[e.needlevel]));else{var i=this.heroData.qualityName+this.heroData.name,s=N18.FF97(this.heroData.quality),o=M18.format("$0,$1",[i,s.colour]),r={nid:F8.A20,channelId:t,param:o,infoId:this.heroData.id};App.CM.apF(O6.C13,O12.A13,r)}},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.close=function(){r.prototype.close.call(this),this.closeHandler(),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS57,this),this.btnCheckTotal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF49,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnAutoRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnRename.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV81,this),this.btnQuality.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickZz,this),this.btnJuexing.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJx,this),this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this),this.btnTujian.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX8,this),this.btnInvite.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV34,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this),this.gpTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.shareTimeHander&&App.K16.rBH(this.shareTimeHander),this.shareTimeHander=null,this.isAdvance=!1,this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.isBarAction=null,this.isPlayingAni=null,this.jumpId=null,this.removeFinger(),this.ZO76(),this.removeTween()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp),egret.Tween.removeTweens(this)},t.prototype.onClickJump=function(){0<this.jumpId&&TG84.FM16(this.jumpId)},t.prototype.onClickEquip=function(){var t=TE88.FF14();null==t?App.CM.apF(O6.B26,G14.A26):P18.sDP(O3.tr(5054,t.day,t.lv))},t}(BaseEuiView);__reflect(HeroUpgradeView.prototype,"HeroUpgradeView");var HeroVeinClassLvView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroVeinClassLvSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.C12)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=O3.tr2(8898),this.lbStr2.textFlow=O3.tr2(8899)},t.prototype.open=function(t,e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=this.model.getPartInfo(t),s=HeroVeinConfig.getWXLvByG(i.g),o=e?HeroVeinConfig.getWXLvByG(i.g+1):HeroVeinConfig.getWXLvByG(i.g);this.lbLv.text=s==o?O3.tr(8894,HeroVeinUtils.getClassTX(t),o):O3.tr(8894,HeroVeinUtils.getClassTX(t),o+O3.tr(8895)),this.lbLv.textColor=s==o?16707295:14164514;var r=HeroVeinConfig.getNew_understandByLv(o),n=[{k:t,v:r.attrper}],a=App.CM.gtM(O6.B82).getAvatarAttrA(HeroVeinConfig.attr[t]),h=K18.attribute[HeroVeinConfig.attr[t]].name;this.lbAttrL.text=P7.FM5(n,"\n",{percentTemplate:"$0+$1%"},HeroVeinConfig.tep),this.lbAttrL0.textFlow=O3.tr2(8934,h,Math.floor(a*Number(r.attrper)));var p=HeroVeinConfig.getNew_understandByLv(o+1);if(p){var l=[{k:t,v:p.attrper}];this.lbAttrN.text=P7.FM5(l,"\n",{percentTemplate:"$0+$1%"},HeroVeinConfig.tep),this.lbAttrN0.textFlow=O3.tr2(8934,h,Math.floor(a*Number(p.attrper))),this.lbDesc.textFlow=O3.tr2(8896,HeroVeinUtils.getClassTX(t),p.locklv)}else this.lbAttrN.text=O3.tr(8889),this.lbAttrN0.text="",this.lbDesc.text="";this.lbG.textFlow=O3.tr2(8897,i.g)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.close(O7.HeroVeinClassLvView)},t}(BaseEuiView);__reflect(HeroVeinClassLvView.prototype,"HeroVeinClassLvView");var HeroVeinClassTipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroVeinClassTipSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=O3.tr2(8900),this.lbStr2.textFlow=O3.tr2(8901)},t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var t=HeroVeinConfig.gIV("attTxt").split("|");for(var e in t){var i=t[e].split(":");this["lbType"+e].text=i[0],this["lbTip"+e].text=i[1]}},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.close(O7.HeroVeinClassTipView)},t}(BaseEuiView);__reflect(HeroVeinClassTipView.prototype,"HeroVeinClassTipView");var HeroVeinClassView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.isAutoUpIng=!1,i.itemS={},i.skinName="HeroVeinClassSkin",i}return __extends(t,r),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.C12)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){r.prototype.initUI.call(this);this.autoBuy.label=O3.tr(8888),this.autoUp.label=O3.tr(8885),this.stopAuto.label=O3.tr(8886),this.btnMax.label=O3.tr(8889),this.lbMax.text=O3.tr(8889),this.btnTP.label=O3.tr(8892),this.lbStrL.textFlow=O3.tr2(8890),this.lbStrN.textFlow=O3.tr2(8891)},t.prototype.initData=function(){r.prototype.initData.call(this);this.lastLv=-1,this.lastExp=-1,this.isAutoUpIng=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t);this.ZX1(),this.updateScore(),this.updataItemRed(),this.part=1,this.select(this.part),null==this.timerHandler&&(this.showNorTween(),App.THH33.aUE(this.effGrp,"jwjm_mc_gxxlz",-210,-210),this.timerHandler=App.K16.doTimer(3e4,0,this.showNorTween,this))},t.prototype.showNorTween=function(){var t=this;this.ImgTx1.rotation=0,egret.Tween.get(this.ImgTx1).to({rotation:360},3e4).pause().call(function(){t.showLastTween()}),this.ImgTx2.rotation=0,egret.Tween.get(this.ImgTx2).to({rotation:-360},3e4).pause()},t.prototype.showLastTween=function(){this.ImgTx3.alpha=.2,this.ImgTx3.scaleX=this.ImgTx3.scaleY=1,egret.Tween.get(this.ImgTx3).to({alpha:1,scaleX:2,scaleY:2},700).to({alpha:0,scaleX:3.5,scaleY:3.5},800).pause(),this.ImgTx4.alpha=0,egret.Tween.get(this.ImgTx4).to({alpha:1},600).to({alpha:0},800).pause()},t.prototype.ZX1=function(){this.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),this.ztBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openZhenTu,this),this.btnTP.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTPEvent,this),this.lbBtnGL.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openWXLvView,this),this.lbBtnGN.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openWXLvView1,this),this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this);for(var t=0;t<this.grpItem.numChildren;t++){var e=this.grpItem.getChildAt(t);(this.itemS[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this);var i=HeroVeinUtils.getDataByVeinP(e.name);this.itemS[e.name].data=i}r.prototype.close.call(this)},t.prototype.oCI=function(t){this.select(parseInt(t.currentTarget.name))},t.prototype.select=function(t){for(var e in this.part=t,this.itemS)this.itemS[e].imgSelect.visible=e==String(t);this.newSelect(),this.GX5()},t.prototype.newSelect=function(){egret.Tween.removeTweens(this.processBar);var t=this.model.getPartInfo(this.part);this.lastLv=t.g,this.lastExp=t.ge,this.ZU92()},t.prototype.GX5=function(){var t=O4.getLv(),e=HeroVeinUtils.getDataByVeinP(this.part);if(t>=Number(e.lvS)){this.grpLock.visible=!1,this.grpNoLock.visible=!0,this.updateAttr(),this.updateCost(),this.ZM27(),this.ZP69();var i=HeroVeinUtils.getDataByVeinP(this.part);this.itemS[this.part].data=i}else this.grpLock.visible=!0,this.grpNoLock.visible=!1,this.lbLock.textFlow=O3.tr2(8893,e.lvS),this.lbLv.text=HeroVeinUtils.getNameByVeinP(this.part)},t.prototype.updateAttr=function(){var t=this.model.getPartInfo(this.part),e=HeroVeinUtils.getNameByVeinP(this.part);this.lbLv.textFlow=O3.tr2(8910,e,t.g);var i=HeroVeinConfig.getNew_LvUpByLv(t.g),s=HeroVeinConfig.getLvUpAttr(this.part,t.g,t.ge),o=P7.str2kv(s);if(this.lbAttrL.text=Jade.Utils.attr2Str(o),-1!=i.exp){var r=HeroVeinConfig.getLvUpAttr(this.part,t.g+1,0);this.lbAttrN.visible=!0,this.lbMax.visible=!1;var n=P7.str2kv(r);this.lbAttrN.text=Jade.Utils.attr2Str(n)}else this.lbAttrN.visible=!1,this.lbMax.visible=!0;this.showTXAttr()},t.prototype.showTXAttr=function(){var t,e,i=this.model.getPartInfo(this.part),s=HeroVeinConfig.getNew_LvUpByLv(i.g),o=HeroVeinUtils.getClassName(this.part),r=HeroVeinUtils.getClassTX(this.part),n=[{k:1,v:this.part%4?s.bonus2:s.bonus1}];if(0<i.g){var a=HeroVeinConfig.getNew_LvUpByLv(i.g-1),h=[{k:1,v:this.part%4?a.bonus2:a.bonus1}];e=-1!=s.exp?(this.lbAttrAL.text=P7.FM5(h,"\n",{percentTemplate:"$0+$1%"},o),this.lbAttrAN.text=P7.FM5(n,"\n",{percentTemplate:"$0+$1%"},o),t=this.part%4==0&&a.undlv?O3.tr(8894,r,a.undlv):"",this.part%4==0&&s.undlv?O3.tr(8894,r,s.undlv):""):(this.lbAttrAL.text=P7.FM5(h,"\n",{percentTemplate:"$0+$1%"},o),this.lbAttrAN.text="",t=this.part%4==0&&a.undlv?O3.tr(8894,r,a.undlv):"","")}else this.lbAttrAL.text="",this.lbAttrAN.text=P7.FM5(n,"\n",{percentTemplate:"$0+$1%"},o),t="",e=this.part%4==0&&s.undlv?O3.tr(8894,r,s.undlv):"";this.lbBtnGL.textFlow=new Array({text:t,style:{underline:!0}}),this.lbBtnGN.textFlow=new Array({text:e,style:{underline:!0}})},t.prototype.ZM27=function(){var t=this,e=t.model.getPartInfo(this.part),i=HeroVeinConfig.getNew_LvUpByLv(e.g),s=e.ge-t.lastExp;if("-1"!=i.exp)if(t.processBar.labelFunction=null,t.processBar.minimum=0,t.processBar.maximum=i.exp,0<s){var o=new eui.Label;o.size=20,o.alpha=0,o.top=50,o.right=25,o.textColor=7716890,o.text="+"+s,this.lvGp.addChild(o);var r=s/this.processBar.maximum*1e3;r<300&&(r=300),egret.Tween.get(this.processBar).to({value:e.ge},r),egret.Tween.get(o).wait(r).to({top:30,alpha:1},300).call(function(){o.alpha=0,o.top=50,App.TF56.ZJ66(o)})}else egret.Tween.removeTweens(t.processBar),t.processBar.value=e.ge;else t.processBar.minimum=0,t.processBar.maximum=t.processBar.value=100,t.processBar.labelFunction=function(t,e){return O3.tr(8406)}},t.prototype.updateScore=function(){var t=this.model.countVeinClassvPower();this.lbPower.text=""+Math.floor(t)},t.prototype.updataItemRed=function(){for(var t in this.itemS)this.itemS[t].imgRed.visible=0<HeroVeinUtils.getClassPosRed(t)},t.prototype.updateCost=function(){var a=this,t=this.model.getPartInfo(this.part),e=HeroVeinConfig.getNew_LvUpByLv(t.g),i=HeroVeinUtils.getClassCostD(this.part);HeroVeinUtils.getIsS(this.part);if("-1"==e.exp)this.grpSJ.visible=!1,this.grpTP.visible=!1,this.grpMax.visible=!0,P16.sGF(this.btnMax,!0);else if(this.grpMax.visible=!1,Number(e.exp)==t.ge){this.grpSJ.visible=!1,this.grpTP.visible=!0,this.itemTp0.includeInLayout=this.itemTp0.visible=!1,this.itemTp1.includeInLayout=this.itemTp1.visible=!1;var s=e[i.cost2].split(";");this.btnTP.imgNew.visible=0<HeroVeinUtils.getClassPosRed(this.part);var o=function(n){P7.str2kv(s[n]).forEach(function(t){var e=t.k,i=t.v,s=a["itemTp"+n];s.includeInLayout=s.visible=!0;var o=N12.gID(e);s.data={itemData:{data:o,ct:0},isBottom:!1},s.imgNameBg.visible=!1,s.lbName.visible=!0,s.lbName.size=24;var r=N12.giC(e);s.lbName.textFlow=i<=r?M18.HTP.parse(O3.tr(8935,"",r+"/"+i)):M18.HTP.parse(O3.tr(8935,r,"/"+i))})};for(var r in s)o(r)}else this.grpSJ.visible=!0,this.grpTP.visible=!1,P7.str2kv(e[i.cost1]).forEach(function(t){var e=t.k,i=t.v,s=N12.gID(e);a.itemSJ.data={itemData:{data:s,ct:0},isBottom:!1},a.itemSJ.imgNameBg.visible=!1,a.itemSJ.lbName.visible=!0,a.itemSJ.lbName.size=24;var o=N12.giC(e);a.itemSJ.lbName.textFlow=i<=o?M18.HTP.parse(O3.tr(8935,"",o+"/"+i)):M18.HTP.parse(O3.tr(8935,o,"/"+i))})},t.prototype.ZP69=function(){App.CM.gtM(O6.B59);var t=HeroVeinUtils.getClassPosRed(this.part);P7.FD53(this.autoUp,t)},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.autoUp,0),this.isAutoUpIng=!0,this.doUpLevel()},t.prototype.doUpLevel=function(){var t=this,e=t.model.getPartInfo(t.part),i=HeroVeinConfig.getNew_LvUpByLv(e.g);if("-1"==i.exp)return t.ZU92(),void P18.sDP(O3.tr(910));var s=HeroVeinUtils.getIsS(this.part),o=HeroVeinUtils.getNextC(e.g);if(!s)return t.ZU92(),void P18.sDP(O3.tr(8902,o));var r=HeroVeinUtils.getClassCostD(this.part);t.lastLv=e.g,t.lastExp=e.ge;var n=i[r.cost1].split(":"),a=n[0],h=Number(n[1]),p=N12.giC(a);if(t.autoBuy.selected)if(h<=p)t.apF(O8.HEROVEIN_UPGRADE_REQ,t.part,1,this.isAutoUpIng);else{var l=App.CM.gtM(O6.B82),c=N15.FA50(a)*(h-p),u=N15.FB92(a)*(h-p);0<c&&l.avatarInfo.bg>=c?this.apF(O8.HEROVEIN_UPGRADE_REQ,t.part,2,this.isAutoUpIng):t.model.useGoldTip1?0<u&&l.avatarInfo.g>=u?this.apF(O8.HEROVEIN_UPGRADE_REQ,t.part,3,this.isAutoUpIng):(P7.FA78(),this.ZU92()):this.canExpend()}else h<=p?t.apF(O8.HEROVEIN_UPGRADE_REQ,t.part,1,this.isAutoUpIng):(App.VM.open(O7.G87,a,h-p),t.ZU92())},t.prototype.btnTPEvent=function(){var t=this.model.getPartInfo(this.part),e=HeroVeinConfig.getNew_LvUpByLv(t.g),i=HeroVeinUtils.getClassCostD(this.part);if(Number(e.exp)==t.ge){var s=e[i.cost2].split(";"),o=!0;for(var r in s)P7.str2kv(s[r]).forEach(function(t){var e=t.k,i=t.v,s=N12.giC(e);s<i&&(App.VM.open(O7.G87,e,i-s),o=!1)});o&&this.apF(O8.HEROVEIN_UPGRADE_REQ,this.part,1)}},t.prototype.canExpend=function(){this.model.useGoldTip1?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,this.ZU92,void 0)},t.prototype.ZT56=function(){this.model.useGoldTip1||(this.model.useGoldTip1=!0),this.isAutoUpIng&&(this.stopAuto.visible=!0,this.autoUp.visible=!1),this.doUpLevel()},t.prototype.ZU92=function(){var t=this.model.getPartInfo(this.part),e=HeroVeinConfig.getNew_LvUpByLv(t.g);this.isAutoUpIng=!1,this.stopAuto.visible=!1,this.autoUp.visible="-1"!=e.exp,this.ZP69()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=this,o=e[0];if(t instanceof TG98)switch(o){case P4.R30:s.showClass(e[1]),s.GX5(),s.updateScore(),s.updataItemRed();break;case"HEROVEIN_ClASS_AUTO":s.autoPart=this.part,App.K16.doTimer(300,1,function(){s.autoPart==s.part&&s.isAutoUpIng&&s.doUpLevel()},s);break;case"HEROVEIN_CLASS_STOP_AUTO":s.ZU92()}if(t instanceof THH9)switch(o){case P4.V43:s.updateCost(),s.ZP69(),s.updataItemRed()}},t.prototype.showClass=function(t){0==this.model.getPartInfo(t).ge&&this.itemS[t].showPZTX()},t.prototype.ZO74=function(){this.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),this.ztBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openZhenTu,this),this.btnTP.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTPEvent,this),this.lbBtnGL.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openWXLvView,this),this.lbBtnGN.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openWXLvView1,this),this.btnMax.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this)},t.prototype.openZhenTu=function(){App.VM.open(O7.HeroVeinClassTipView)},t.prototype.openWXLvView=function(){App.VM.open(O7.HeroVeinClassLvView,this.part,!1)},t.prototype.openWXLvView1=function(){App.VM.open(O7.HeroVeinClassLvView,this.part,!0)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this,t),App.THH33.rEf(this.effGrp,"jwjm_mc_gxxlz"),null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null);this.ZO74(),this.lastLv=-1,this.lastExp=-1,this.isAutoUpIng=!1},t}(BaseEuiView);__reflect(HeroVeinClassView.prototype,"HeroVeinClassView");var HeroVeinItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="HeroVeinItemSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.C12)},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){App.THH33.rEf(this.gEffect,"iconSkill")},t.prototype.dataChanged=function(){var t=O4.getLv();this.imgRed.scaleX=this.imgRed.scaleY=Number(this.data.part)%4?1:2/3;var e=this.model.getPartInfo(this.data.part),i=HeroVeinConfig.getNew_LvUpByLv(e.g).quality;this.imgBg.source=THH1.FB74(i),t>=Number(this.data.lvS)?this.imgIcon.source=this.data.icon:this.imgIcon.source="v1_img_jianzhusuo_png"},t.prototype.showPZTX=function(){App.THH33.aUE(this.gEffect,"iconSkill",-99,-100,1)},t}(eui.ItemRenderer);__reflect(HeroVeinItem.prototype,"HeroVeinItem");var HeroVeinLvView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.isAutoUpIng=!1,i.itemS={},i.skinName="HeroVeinLvSkin",i}return __extends(t,r),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.C12)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){r.prototype.initUI.call(this);this.autoBuy.label=O3.tr(8888),this.upLevel.label=O3.tr(8884),this.autoUp.label=O3.tr(8885),this.stopAuto.label=O3.tr(8886),this.btnMax.label=O3.tr(8889),this.lbstr2.textFlow=O3.tr2(8887)},t.prototype.initData=function(){r.prototype.initData.call(this);this.lastLv=-1,this.lastExp=-1,this.isAutoUpIng=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t);this.ZX1(),this.updateScore(),this.updataItemRed(),this.part=1,this.select(this.part),null==this.timerHandler&&(this.showNorTween(),App.THH33.aUE(this.effGrp,"jwjm_mc_gxxlz",-210,-210),this.timerHandler=App.K16.doTimer(3e4,0,this.showNorTween,this))},t.prototype.showNorTween=function(){var t=this;this.ImgTx1.rotation=0,egret.Tween.get(this.ImgTx1).to({rotation:360},3e4).pause().call(function(){t.showLastTween()}),this.ImgTx2.rotation=0,egret.Tween.get(this.ImgTx2).to({rotation:-360},3e4).pause()},t.prototype.showLastTween=function(){this.ImgTx3.alpha=.2,this.ImgTx3.scaleX=this.ImgTx3.scaleY=1,egret.Tween.get(this.ImgTx3).to({alpha:1,scaleX:2,scaleY:2},700).to({alpha:0,scaleX:3.5,scaleY:3.5},800).pause(),this.ImgTx4.alpha=0,egret.Tween.get(this.ImgTx4).to({alpha:1},600).to({alpha:0},800).pause()},t.prototype.ZX1=function(){this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this);for(var t=0;t<this.grpItem.numChildren;t++){var e=this.grpItem.getChildAt(t);(this.itemS[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this);var i=HeroVeinUtils.getDataByVeinP(e.name);this.itemS[e.name].data=i}r.prototype.close.call(this)},t.prototype.oCI=function(t){this.select(parseInt(t.currentTarget.name))},t.prototype.select=function(t){for(var e in this.part=t,this.itemS)this.itemS[e].imgSelect.visible=e==String(t);this.newSelect(),this.GX5()},t.prototype.newSelect=function(){egret.Tween.removeTweens(this.processBar);var t=this.model.getPartInfo(this.part);this.lastLv=t.l,this.lastExp=t.le,this.ZU92()},t.prototype.GX5=function(){var t=O4.getLv(),e=HeroVeinUtils.getDataByVeinP(this.part);t>=Number(e.lvS)?(this.grpLock.visible=!1,this.grpNoLock.visible=!0,this.updateAttr(),this.updateCost(),this.ZM27()):(this.grpLock.visible=!0,this.grpNoLock.visible=!1,this.lbLock.textFlow=O3.tr2(8893,e.lvS),this.lbLv.text=HeroVeinUtils.getNameByVeinP(this.part))},t.prototype.updateAttr=function(){var t=this.model.getPartInfo(this.part),e=HeroVeinUtils.getNameByVeinP(this.part);this.lbLv.textFlow=O3.tr2(8894,e,t.l);var i=HeroVeinConfig.getNew_BaseByLv(t.l),s=this.part%4?HeroVeinConfig.getBonusByPG(this.part,t.g)+1:1,o=HeroVeinConfig.getBaseAttr(this.part,t.l,t.le,s),r=P7.str2kv(o);if(this.lbAttrL.text=Jade.Utils.attr2Str(r),-1!=i.exp){var n=HeroVeinConfig.getBaseAttr(this.part,t.l+1,0,s);this.lbAttrN.visible=!0;var a=P7.str2kv(n);this.lbAttrN.text=Jade.Utils.attr2Str(a)}else this.lbAttrN.visible=!1},t.prototype.ZM27=function(){var t=this,e=t.model.getPartInfo(this.part),i=HeroVeinConfig.getNew_BaseByLv(e.l),s=e.le-t.lastExp;if("-1"!=i.exp)if(t.processBar.labelFunction=null,t.processBar.minimum=0,t.processBar.maximum=i.exp,0<s){var o=new eui.Label;o.size=20,o.alpha=0,o.top=50,o.right=25,o.textColor=7716890,o.text="+"+s,t.lvGp.addChild(o);var r=s/t.processBar.maximum*1e3;r<300&&(r=300),egret.Tween.get(t.processBar).to({value:e.le},r),egret.Tween.get(o).wait(r).to({top:30,alpha:1},200).call(function(){o.alpha=0,o.top=50,App.TF56.ZJ66(o)})}else egret.Tween.removeTweens(t.processBar),t.processBar.value=e.le;else t.processBar.minimum=0,t.processBar.maximum=t.processBar.value=100,t.processBar.labelFunction=function(t,e){return O3.tr(8406)}},t.prototype.updateScore=function(){var t=this.model.countVeinLvPower();this.lbPower.text=""+Math.floor(t)},t.prototype.updataItemRed=function(){for(var t in this.itemS)this.itemS[t].imgRed.visible=0<HeroVeinUtils.getLvPosRed(t)},t.prototype.updateCost=function(){var t=this.model.getPartInfo(this.part),e=HeroVeinConfig.getNew_BaseByLv(t.l);if("-1"==e.exp)this.imgJt.visible=this.lbAttrN.visible=this.costGp.visible=this.upLevel.visible=this.autoUp.visible=!1,this.lbAttrL.left=230,this.btnMax.visible=!0,P16.sGF(this.btnMax,!0);else{this.imgJt.visible=this.lbAttrN.visible=this.costGp.visible=this.upLevel.visible=this.autoUp.visible=!0,this.lbAttrL.left=90,this.btnMax.visible=!1;var i=e.cost.split(":"),s=i[0],o=Number(i[1]),r=N12.giC(s),n=N12.gID(s);this.costIcon.setData(n),this.cost.textFlow=o<=r?M18.HTP.parse(O3.tr(8811,"",r+"/"+o)):M18.HTP.parse(O3.tr(8811,r,"/"+o))}},t.prototype.ZP69=function(){var t=HeroVeinUtils.getLvPosRed(this.part),e=this.upLevel.filters;e&&0<e.length?(P7.FD53(this.upLevel,0),P7.FD53(this.autoUp,0)):(P7.FD53(this.upLevel,t),P7.FD53(this.autoUp,t))},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.autoUp,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,P7.FD53(this.upLevel,0),this.isAutoUpIng=!0,this.doUpLevel()},t.prototype.doUpLevel=function(){var t=this,e=t.model.getPartInfo(t.part),i=HeroVeinConfig.getNew_BaseByLv(e.l);if("-1"==i.exp)return t.ZU92(),void P18.sDP(O3.tr(910));t.lastLv=e.l,t.lastExp=e.le;var s=i.cost.split(":"),o=s[0],r=Number(s[1]),n=N12.giC(o);if(t.autoBuy.selected)if(r<=n)t.apF(O8.HEROVEIN_LVUP_REQ,t.part,1,this.isAutoUpIng);else{var a=App.CM.gtM(O6.B82),h=N15.FA50(o)*(r-n),p=N15.FB92(o)*(r-n);0<h&&a.avatarInfo.bg>=h?this.apF(O8.HEROVEIN_LVUP_REQ,t.part,2,this.isAutoUpIng):t.model.useGoldTip1?0<p&&a.avatarInfo.g>=p?this.apF(O8.HEROVEIN_LVUP_REQ,t.part,3,this.isAutoUpIng):(P7.FA78(),this.ZU92()):this.canExpend()}else r<=n?t.apF(O8.HEROVEIN_LVUP_REQ,t.part,1,this.isAutoUpIng):(App.VM.open(O7.G87,o,r-n),t.ZU92())},t.prototype.canExpend=function(){this.model.useGoldTip1?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,this.ZU92,void 0)},t.prototype.ZT56=function(){this.model.useGoldTip1||(this.model.useGoldTip1=!0),this.isAutoUpIng&&(this.stopAuto.visible=!0,this.autoUp.visible=!1,this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1),this.doUpLevel()},t.prototype.ZU92=function(){var t=this.model.getPartInfo(this.part),e=HeroVeinConfig.getNew_BaseByLv(t.l);this.isAutoUpIng=!1,this.stopAuto.visible=!1,this.autoUp.visible="-1"!=e.exp,this.upLevel.filters=[],this.upLevel.touchEnabled=!0,this.ZP69()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=this,o=e[0];if(t instanceof TG98)switch(o){case P4.V38:s.showLv(e[1]),s.updateScore(),s.updataItemRed(),s.updateAttr(),s.updateCost(),s.ZM27();break;case"HEROVEIN_UP_AUTO":s.autoPart=this.part,App.K16.doTimer(300,1,function(){s.autoPart==s.part&&s.isAutoUpIng&&s.doUpLevel()},s);break;case"HEROVEIN_STOP_AUTO":s.ZU92()}if(t instanceof THH9)switch(o){case P4.V43:s.updateCost(),s.updataItemRed(),s.ZP69()}},t.prototype.showLv=function(t){0==this.model.getPartInfo(t).le&&this.itemS[t].showPZTX()},t.prototype.ZO74=function(){this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),this.btnMax.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this,t),App.THH33.rEf(this.effGrp,"jwjm_mc_gxxlz"),null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null);this.ZO74(),this.lastLv=-1,this.lastExp=-1,this.isAutoUpIng=!1},t}(BaseEuiView);__reflect(HeroVeinLvView.prototype,"HeroVeinLvView");var HeroVeinMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.HeroVeinMain,O7.HeroVeinLvView,"HeroVeinLvView",this.content),App.VM.rgS(O7.HeroVeinMain,O7.HeroVeinClassView,"HeroVeinClassView",this.content);var t=[O3.tr(8882),O3.tr(8883)],e=[O7.HeroVeinLvView,O7.HeroVeinClassView];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.HeroVeinLvView;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){switch(this.viewId=t){case O7.HeroVeinLvView:this.btnList.ZM66(t),this.title=O3.tr(8882);break;case O7.HeroVeinClassView:this.btnList.ZM66(t),this.title=O3.tr(8883)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.C12);this.btnList.ZHH58(O7.HeroVeinLvView,t.getVeinLvRedNum()),this.btnList.ZHH58(O7.HeroVeinClassView,t.getVeinClassRedNum())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t.prototype.openHelpView=function(){var t,e;this.viewId==O7.HeroVeinLvView?(t=O3.tr(8903),e=O3.tr(8904)):this.viewId==O7.HeroVeinClassView&&(t=O3.tr(8905),e=O3.tr(8906));var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t}(BasePanelView);__reflect(HeroVeinMainView.prototype,"HeroVeinMainView");var HeroZzIconList=function(e){function t(){var t=e.call(this)||this;return t.listData=[],t.skinName=HeroIconListSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t.initUI(),t}return __extends(t,e),t.prototype.open=function(){this.imgRedL.visible=!1,this.imgRedR.visible=!1;var t=this.listIcon.layout;this.listGap=t.gap,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),this.listIcon.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.scIconList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.scIconList.viewport=this.listIcon,this.scIconList.scrollPolicyV=eui.ScrollPolicy.OFF,this.createList();var e=App.CM.gtM(O6.C12);this.ZS64(e)},t.prototype.close=function(){this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),this.listIcon.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.scIconList.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.dataSource.removeAll()},t.prototype.initUI=function(){},t.prototype.createList=function(){this.dataSource=new eui.ArrayCollection(this.listData),this.listIcon.itemRenderer=IconHero,this.listIcon.dataProvider=this.dataSource},t.prototype.ZS64=function(t){for(var e in this.listData=[],t.heroList){var i=t.heroList[e];if(0<i.getZzRedNum()){var s={heroData:i,isInZz:!0};this.listData.push(s)}}0==this.listData.length&&(null==this.curHeroIndex?this.listData.push({heroData:t.heroList[t.heroViewId],isInZz:!0}):this.listData.push({heroData:t.heroList[t.heroZzViewId],isInZz:!0})),this.listData.sort(THH1.FI57),this.dataSource.replaceAll(this.listData),null==this.curHeroIndex?(this.curHeroIndex=0,this.scIconList.viewport.scrollH=0):this.curHeroIndex>=this.listData.length&&(this.curHeroIndex=this.listData.length-1),this.listIcon.selectedIndex=this.curHeroIndex;var o=this.listData[this.curHeroIndex].heroData;t.heroZzViewId!=o.id&&(t.heroZzViewId=o.id)},t.prototype.ZN17=function(t){this.curHeroIndex=t.itemIndex;var e=this.listData[this.curHeroIndex].heroData,i=App.CM.gtM(O6.C12);e.id!=i.heroZzViewId&&(i.heroZzViewId=this.listData[this.curHeroIndex].heroData.id)},t.prototype.ZK80=function(){if(!(this.listData.length<=5)){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor((this.listIcon.scrollH+5*t)/t);e>=this.listData.length-5&&(e=this.listData.length-5),this.listIcon.scrollH=e*t;Math.min(e+4,this.listData.length)}},t.prototype.ZN74=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.ceil((this.listIcon.scrollH-5*t)/t);e<0&&(e=0),this.listIcon.scrollH=e*t,this.listIcon.scrollH=e*t;Math.min(e+5,this.listData.length)},t.prototype.endScroller=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor(this.listIcon.scrollH/t);e<0&&(e=0);Math.min(e+5,this.listData.length)},t}(eui.Component);__reflect(HeroZzIconList.prototype,"HeroZzIconList");var IconHero=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName=IconHeroSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t;if((t=this.data.heroData?this.data.heroData:this.data).state&&0<t.state)switch(this.gpState.$setVisible(!0),t.state){case 1:this.imgState.source="v1_img_biaqoian_lv_png",this.lbState.text=O3.tr(1406);break;case 2:case 3:this.imgState.source="v1_img_biaqoian_lan_png",this.lbState.text=O3.tr(1405)}else this.gpState.$setVisible(!1);O5.FB13(this.lbName,t.name,t.quality),this.lbName.text=t.name,this.imgIcon.source=t.icon,this.imgBg.source=N12.getBox(t.quality),0==t.isShowLv?this.lbLv.$setVisible(!1):t.isOwn?(P16.sGF(this.imgIcon,!1),this.lbLv.$setVisible(!0),this.lbLv.text=O3.tr(5397,t.lv)):(this.lbLv.$setVisible(!1),P16.sGF(this.imgIcon,!0)),App.VM.isOpen(O7.C45)?this.ZX9(!0):App.VM.isOpen(O7.A62)&&this.ZX9(!1),(this.data.isInTj||this.data.isInGo||this.data.isInZz)&&(P16.sGF(this.imgIcon,!1),this.imgRed.visible=!1),this.isShowRedPoint||(this.imgRed.visible=!1)},t.prototype.ZX9=function(t){if(t){this.isShowRedPoint=!0;var e=void 0;e=this.data.heroData?this.data.heroData:this.data,this.imgRed.visible=0<e.ZE7()}else this.isShowRedPoint=!1,this.imgRed.visible=!1},t.prototype.onClick=function(){TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(IconHero.prototype,"IconHero");var IconHeroBack=function(e){function t(){var t=e.call(this)||this;return t.skinName=IconHeroSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.lbLv.$setVisible(!1),this.lbName.$setVisible(!1),this.gpState.$setVisible(!1),this.imgIcon.source=this.data.icon,this.imgBg.source=N12.getBox(this.data.quality)},t}(eui.ItemRenderer);__reflect(IconHeroBack.prototype,"IconHeroBack");var IconHeroSkill=function(e){function t(){var t=e.call(this)||this;return t.skinName=IconHeroSkillSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchStart,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchCancel,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchStart,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchCancel,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.currentState="clickUp"},t.prototype.dataChanged=function(){var t=1;!this.data.isLock&&this.data.skillData?(this.gpLock.$setVisible(!1),this.gpName.$setVisible(!0),this.lbName.$setText(this.data.skillData.skillname),t=this.data.skillData.quality,O5.FB13(this.lbName,this.data.skillData.skillname,t,2),this.imgIcon.source=this.data.skillData.icon,this.imgIcon.visible=!0,this.imgBg.source=THH1.FB74(t),1==this.data.skillData.type?this.imgZhu.visible=!0:this.imgZhu.visible=!1,0==this.data.isOwn?P16.sGF(this.imgIcon,!0):P16.sGF(this.imgIcon,!1),this.enabled=!0):(this.imgZhu.visible=!1,this.gpLock.$setVisible(!0),this.gpName.$setVisible(!1),this.imgBg.source="v1_img_kuang_jinengbai_png",this.imgIcon.visible=!1,this.enabled=!1)},t.prototype.onClickIcon=function(){this.currentState="clickUp",this.data.skillData&&(TG40.playClickEffect(),App.CM.apF(O6.C12,O8.A20,this.data.skillData))},t.prototype.touchStart=function(){this.currentState="clickDown"},t.prototype.touchCancel=function(){this.currentState="clickUp"},t}(eui.ItemRenderer);__reflect(IconHeroSkill.prototype,"IconHeroSkill");var IconJxSkill=function(e){function t(){var t=e.call(this)||this;return t.skinName=IconJxSkillSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.gpName2.$setVisible(!1),this.gpName.$setVisible(!0),this.gpIcon.scaleX=.9,this.gpIcon.scaleY=.9},t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this)},t.prototype.dataChanged=function(){1==this.data.openState?(O5.FB13(this.lbName,this.data.skillData.skillname,this.data.skillData.quality),this.imgLock.visible=!1,this.imgBlack.visible=!1,this.gpName2.right=9,this.gpName2.horizontalCenter=void 0):(this.lbName.text=O3.tr(1423,this.data.openLv),this.imgLock.visible=!0,this.imgBlack.visible=!0,this.gpName2.right=void 0,this.gpName2.horizontalCenter=0),this.imgZhu.visible=1==this.data.replaceType,this.imgIcon.source=this.data.skillData.icon},t.prototype.onClickIcon=function(){App.CM.apF(O6.C12,O8.A20,this.data.skillData),this.currentState="up"},t}(eui.ItemRenderer);__reflect(IconJxSkill.prototype,"IconJxSkill");var IconSoulSkill=function(e){function t(){var t=e.call(this)||this;return t.skinName=IconJxSkillSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.imgZhu.$setVisible(!1),this.imgLock.$setVisible(!1),this.gpName.$setVisible(!1),this.gpIcon.scaleX=.9,this.gpIcon.scaleY=.9},t.prototype.dataChanged=function(){this.imgBg.source="v1_img_kuang_jinengbai_png",2==this.data.viewType?this.imgSelect.visible=!0:this.imgSelect.visible=!1;var t=App.CM.gtM(O6.C12);this.imgIcon.source=this.data.icon;var e=!1;switch(this.data.skillType){case O8.B10.PRESTIGE:N14.prestige_base[t.prestigeLv];e=!(this.data.openLevel>t.prestigeLv);var i=N14.gIV("prestigeSkill"),s=N12.giC(parseInt(i));0==this.data.openLevel&&this.data.skillData.cost<=s&&0<this.data.skillData.cost?this.imgRed.visible=!0:this.imgRed.visible=!1;break;case O8.B10.SOUL:N14.soul_base[t.soulLv];e=!(this.data.openLevel>t.soulLv);i=N14.gIV("soulSkill"),s=N12.giC(parseInt(i));0==this.data.openLevel&&this.data.skillData.cost<=s&&0<this.data.skillData.cost?this.imgRed.visible=!0:this.imgRed.visible=!1;break;default:this.imgRed.visible=!1}if(e){this.lbName2.text=this.data.skillData.level,this.lbName2.textColor=_cc.white;parseInt(this.lbName2.text);this.lbName2.text=this.data.skillData.level,this.imgBlack.$setVisible(!1),this.gpName2.right=7,this.gpName2.horizontalCenter=void 0}else this.lbName2.textColor=_cc.green,this.imgBlack.$setVisible(!0),this.lbName2.text=O3.tr(1492,this.data.openLevel),this.gpName2.horizontalCenter=0,this.gpName2.right=void 0},t.prototype.playEffect=function(){App.THH33.aUE(this.effect,"iconSkill",-this.effect.width/2-18,-this.effect.height/2-20,1)},t.prototype.onClick=function(){TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(IconSoulSkill.prototype,"IconSoulSkill");var ItemAchieveView=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemHeroAchieveSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.viewport=this.listReward,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.dataChanged=function(){switch(this.data.type){case O8.B4.HORSE:var t=O3.tr(1450,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.FAQI:t=O3.tr(1451,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.WEAPON:t=O3.tr(1452,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.WING:t=O3.tr(1449,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.PRESTIGE:t=O3.tr(1447,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.SOUL:t=O3.tr(1448,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.ANIMAL:t=O3.tr(109,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.PSYCHIC:t=O3.tr(110,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.SPIRIT:t=O3.tr(111,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.ASOUL:t=O3.tr(112,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.FORMATE:t=O3.tr(3035,this.data.index);this.lbName.textFlow=M18.HTP.parser(t);break;case O8.B4.GENERERAL:t=O3.tr(3036,this.data.index);this.lbName.textFlow=M18.HTP.parser(t)}switch(this.imgTitle.width=this.lbName.width+55,this.data.state){case 1:this.imgGot.$setVisible(!1),this.btnGet.$setVisible(!0),this.btnGet.imgNew.visible=!0,this.btnGet.enabled=!0,this.btnGet.label=O3.tr(1480),this.btnGet.alpha=1;break;case 2:this.imgGot.$setVisible(!1),this.btnGet.$setVisible(!0),this.btnGet.imgNew.visible=!1,this.btnGet.enabled=!1,this.btnGet.label=O3.tr(1479),this.btnGet.alpha=.5;break;case 3:this.imgGot.$setVisible(!0),this.btnGet.$setVisible(!1),this.btnGet.enabled=!1}this.ZJ81()},t.prototype.ZJ81=function(){for(var t=M18.FL28(this.data.achieveData.reward,";",":"),e=[],i=0;i<t.length;i++){var s={itemData:{data:N12.gID(t[i][0]),ct:t[i][1]},isBottom:!1};e.push(s)}this.dataSource.replaceAll(e)},t.prototype.onClickGet=function(){switch(this.data.type){case O8.B4.HORSE:App.CM.apF(O6.C2,N7.A21,this.data.index);break;case O8.B4.FAQI:App.CM.apF(O6.C17,O15.A22,this.data.index);break;case O8.B4.WEAPON:App.CM.apF(O6.B83,L18.A20,this.data.index);break;case O8.B4.WING:App.CM.apF(O6.C18,O10.A29,this.data.index);break;case O8.B4.PRESTIGE:App.CM.apF(O6.C12,O8.A7,this.data.index);break;case O8.B4.ANIMAL:App.CM.apF(O6.B91,L12.A53,this.data.index);break;case O8.B4.PSYCHIC:App.CM.apF(O6.B91,L12.A9,this.data.index);break;case O8.B4.SPIRIT:App.CM.apF(O6.B91,L12.A17,this.data.index);break;case O8.B4.ASOUL:App.CM.apF(O6.B91,L12.A35,this.data.index);break;case O8.B4.SOUL:App.CM.apF(O6.C12,O8.A30,this.data.index);break;case O8.B4.FORMATE:App.CM.apF(O6.C3,N2.A19,1,this.data.index);break;case O8.B4.GENERERAL:App.CM.apF(O6.C3,N2.A19,2,this.data.index)}},t}(eui.ItemRenderer);__reflect(ItemAchieveView.prototype,"ItemAchieveView");var ItemHeroSkill=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemHeroSkillSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgLock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLock,this),this.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLock,this)},t.prototype.close=function(){this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLock,this),this.imgLock.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLock,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.data.slot%2==0?this.imgBlack.visible=!0:this.imgBlack.visible=!1,this.gpUnactive.$setVisible(!1);var t=1;this.data.isActive?2!=this.data.type||this.data.skillData?(this.imgIcon.source=this.data.skillData.icon,this.imgIcon.visible=!0,t=this.data.skillData.quality,O5.FB13(this.lbName,this.data.skillData.skillname,this.data.skillData.quality,2),this.imgLock.$setVisible(!0),this.data.isLock?(this.imgLock.source="v1_img_weijiesuo_png",this.imgLocked.visible=!0):(this.imgLock.source="v1_img_jiesuo_png",this.imgLocked.visible=!1),this.lbDesc.visible=!0,this.lbDesc.textFlow=M18.HTP.parser(this.data.skillData.desc)):(this.imgIcon.visible=!1,this.lbName.text=O3.tr(1491),this.lbDesc.visible=!1,this.imgLock.visible=!1,this.imgLocked.visible=!1):(this.imgLock.visible=!1,this.imgLocked.visible=!1,this.gpUnactive.visible=!0,this.lbName.text=O3.tr(1483),this.lbDesc.visible=!1,this.imgIcon.visible=!1),this.imgIcon.visible?(this.lbName.verticalCenter=void 0,this.lbName.top=7,this.imgBg.source=THH1.FB74(t)):(this.lbName.verticalCenter=0,this.lbName.top=void 0,this.imgBg.source="v1_img_kuang_jinengbai_png")},t.prototype.onClickLock=function(){THH1.FA95(this.data.slot)?this.data.skillData&&1==this.data.type&&App.CM.apF(O6.C12,O8.A69,this.data.heroId,this.data.slot):P18.sDP(O3.tr(1457))},t}(eui.ItemRenderer);__reflect(ItemHeroSkill.prototype,"ItemHeroSkill");var ItemHeroTjContent=function(e){function t(){var t=e.call(this)||this;return t.listIconData=[],t.skinName=ItemHeroTjContentSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.listContent.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this),this.lbGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.close=function(){this.dataSource.removeAll(),this.listContent.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this),this.lbGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listContent.itemRenderer=IconHero,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.lbGo.textFlow=M18.HTP.parse(O3.tr(1490))},t.prototype.listHandler=function(t){var e=App.CM.gtM(O6.C12).baseHeroList[t.item.heroData.id];e.skillEvoType?App.CM.apF(O6.C12,O8.A82,e):App.CM.apF(O6.C12,O8.A62,e)},t.prototype.dataChanged=function(){this.data.showid?this.lbGo.visible=!0:this.lbGo.visible=!1,this.lbTitle.$setText(this.data.desc),this.imgTitle.width=this.lbTitle.width+55;var t=[],e=N14.FJ83(),i=TF59.FB15(F7.A10),s=i&&i.openState?i.pointsetsData.s:1;for(var o in e){var r=e[o],n=TD79.FE60(r.id);if(!(n&&n.type>s)){if(7<=r.quality){var a=App.CM.gtM(O6.C12),h=!1;for(var p in a.heroList){var l=a.heroList[p];l.id==r.id&&(h=l.isOwn)}var c=O4.getLv(),u=App.CM.gtM(O6.B43),d=parseInt(N14.gIV("godOpenDay")),v=parseInt(N14.gIV("godOpenLv")),f=d<=c&&u.serOpenDay+1>=v,g=this.FF11();if(!(2<=s||h||0<N12.giC(r.activateItem)||f||g))continue}if(1==r.ishandbook){var m={heroData:new HeroData(r),isInTj:!0},y=M18.FL28(r.collectionid,"|");for(p=0;p<y.length;p++)y[p]==this.data.collectionid&&t.push(m)}}}var A=Math.ceil(t.length/5),b=136*A+(A-1)*this.listContent.layout.verticalGap;this.listContent.height=b,this.height=b+40,this.dataSource.replaceAll(t)},t.prototype.FF11=function(){var t=N14.gIV("godOpenLimit").split(";");for(var e in t)if(N12.giC(t[e]))return!0;return!1},t.prototype.onClickGo=function(){var t={sLink:this.data.showid};TG84.goToDlg(t)},t}(eui.ItemRenderer);__reflect(ItemHeroTjContent.prototype,"ItemHeroTjContent");var HeroBattleConfig=function(){function h(){}return h.FK35=function(t){var e=t.herocomp_init,i=t.herocomp_militaryrank,s=t.herocomp_integralrank;h.openLv=parseInt(e.openLv.value),h.openDay=parseInt(e.openDay.value),h.everNum=parseInt(e.everNum.value),h.buyMum=parseInt(e.buyMum.value),h.obtMun=parseInt(e.obtMun.value),h.obtMoney=P7.str2kv1(e.obtMoney.value),h.militaryrank=i,h.integralrank=s,h.staScore=e.staScore.value.split(",").map(function(t){return parseInt(t)}),h.winScore=e.winScore.value.split(",").map(function(t){return parseInt(t)}),h.diffScore=e.diffScore.value.split(",").map(function(t){return parseInt(t)}),h.redScore=e.redScore.value.split(",").map(function(t){return parseInt(t)}),h.contScore=parseInt(e.contScore.value),h.contMax=parseInt(e.contMax.value)},h.isOpen=function(){var t=O4.getLv(),e=App.CM.gtM(O6.B43);return h.openLv<=t&&e.serOpenDay+1>=h.openDay},h.getMilitary=function(t){return h.militaryrank[t]},h.getRankReawrd=function(t){for(var e in h.integralrank){var i=h.integralrank[e];if(t>=i.rankleft&&t<=i.rankright)return P7.str2kv(i.reward)}return[]},h.ObjectValues=function(t,e){var i=[];for(var s in t)i.push(t[s][e]);return i},h.calcScore=function(t,e,i){for(var s=0<i?Math.min((i+1)*this.contScore,this.contMax):0,o=0,r=h.staScore.length-1;0<=r;r--)if(t>h.staScore[r]){o=h.winScore[r];break}var n=Math.max.apply(null,h.redScore),a=t-e;return h.diffScore.some(function(t,e){return a<t&&(n=h.redScore[e],!0)}),Math.max(0,s+o-n)},h.openLv=0,h.openDay=0,h.everNum=0,h.buyMum=0,h.obtMun=0,h}();__reflect(HeroBattleConfig.prototype,"HeroBattleConfig");var HeroBattleConst=function(){function t(){}return t.LOAD=1,t.LOAD_RES=2,t.RECORD_TYPE_ATK=1,t.RECORD_TYPE_DEF=2,t}();__reflect(HeroBattleConst.prototype,"HeroBattleConst");var HeroBattleController=function(s){function t(){var t=s.call(this)||this;App.VM.register(O7.HeroBattleRecord,"HeroBattleRecordView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroBattleRankMain,"HeroBattleRankMainView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroBattleLineupMain,"HeroBattleLineupMainView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroBattleHeroList,"HeroBattleHeroListView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroBattleEnemyInfo,"HeroBattleEnemyInfoView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroBattleResult,"HeroBattleFightResultView",t,K17.UI_Main_TOP),App.VM.register(O7.HeroBattleClean,"HeroBattleCleanHelpView",t,K17.UI_Main_TOP);var e=new HeroBattleModel(t);e.aLV(O7.HeroBattleLineupMain),e.aLV(O7.HeroBattleLineupHeroAtk),e.aLV(O7.HeroBattleLineupHeroDef),e.aLV(O7.HeroBattleLineupFabaoAtk),e.aLV(O7.HeroBattleLineupFabaoDef),e.aLV(O7.HeroBattleRank),e.aLV(O7.HeroBattleRankScore),e.aLV(O7.HeroBattleRankMain),e.aLV(O7.HeroBattleRecord),e.aLV(O7.HeroBattle),e.aLV(O7.HH22),e.aLV(O7.I39),e.aLV(O7.I63);var i=new HeroBattleProxy(t);return t.rgF(HeroBattleConst.LOAD,i.loadState,i),t.rgF(HeroBattleConst.LOAD_RES,t.GU20,t),t.rgF(P4.CROSS_HEROCOMP_LOAD_REQ,i.load,i),t.rgF(P4.CROSS_HEROCOMP_SEARCH_REQ,i.refresh,i),t.rgF(P4.CROSS_HEROCOMP_BUY_REQ,i.buy,i),t.rgF(P4.CROSS_HEROCOMP_SAVE_SQUAD_REQ,i.save,i),t.rgF(P4.CROSS_HEROCOMP_FABAO_UPBATTLE_REQ,i.saveFabao,i),t.rgF(P4.CROSS_HEROCOMP_FIGHT_REQ,i.fight,i),t.rgF(P4.CROSS_HEROCOMP_LOOK_FRST_REQ,i.replay,i),t.rgF(P4.CROSS_HEROCOMP_RANK_REQ,i.loadRank,i),t.rgF(P4.CROSS_HEROCOMP_MILITARYRANK_REQ,i.loadMil,i),t.rgF(P4.CROSS_HEROCOMP_REFRESH_REQ,i.update,i),t}return __extends(t,s),t.prototype.open=function(){P7.isGetView(O7.HeroBattle)&&App.VM.open(O7.HH22,O7.HeroBattle)},t.prototype.GU20=function(t){if(200!==t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=this.gtM();e.update(t.body,!0,t.head.protoType),0<e.st&&this.apF(P4.CROSS_HEROCOMP_LOAD_REQ)}},t.prototype.update=function(t){200!==t.head.state?215==t.head.state?P7.FA78():App.CM.apF(O6.B87,L10.A4,t):(this.gtM().update(t.body,!0,t.head.protoType),P5.sIs(t.body.ob))},t.prototype.GV62=function(t){200!==t.head.state?App.CM.apF(O6.B87,L10.A4,t):this.gtM().notify(t.head.protoType,t.body.as)},t.prototype.fightRes=function(t){if(200!==t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=this.gtM();e.update(t.body,!1,t.head.protoType);var i=t.body;e.fightCamp=1,e.fightWins=i.wins,this.GY74(i.frst,P15.HeroBattle,i.ob,{diff:i.diff||0,win:i.win,wsc:i.wsc||0,sc:i.sc,wn:i.wn})}},t.prototype.replayRes=function(t){if(200!==t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=this.gtM(),i=t.body;e.fightCamp=i.atk,e.fightWins=i.wins,this.GY74(i.frst,P15.HeroBattleReplay),e.update(t.body,!1,t.head.protoType)}},t.prototype.GY74=function(t,e,i,s){var o=this,r={type:e,needResult:!1,rewards:void 0,extra:s};e==P15.HeroBattle&&(r.needResult=!0,r.rewards=i,r.extra=s),0==this.gtM().fightCamp&&t.pis.push(O4.getAid()),t.sl=e,App.CM.apF(O6.B99,N1.A11,t,r,function(){o.open()},this)},t}(TE11);__reflect(HeroBattleController.prototype,"HeroBattleController");var HeroBattleModel=function(i){function t(){var t=null!==i&&i.apply(this,arguments)||this;return t.st=-1,t.cd=0,t.cn=0,t.bn=0,t.cr=0,t.rcd=0,t.sc=0,t.mil=0,t.rank=0,t.wn=0,t.ah={},t.af={},t.dh={},t.df={},t.useGoldTips=!0,t}return __extends(t,i),t.prototype.update=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(Log.warn("更新武将比斗",t),this.dr&&t.dr&&(this.newRecord=!0),this.st=P7.getValue(t.st,this.st),this.cd=P7.getValue(t.cd,this.cd),this.cn=P7.getValue(t.cn,this.cn),this.bn=P7.getValue(t.bn,this.bn),this.cr=P7.getValue(t.cr,this.cr),this.rcd=P7.getValue(t.rcd,this.rcd),this.sc=P7.getValue(t.sc,this.sc),this.rank=P7.getValue(t.rank,this.rank),this.mil=P7.getValue(t.mil,this.mil),this.ah=P7.getValue(t.ah,this.ah),this.af=P7.getValue(t.af,this.af),this.dh=P7.getValue(t.dh,this.dh),this.df=P7.getValue(t.df,this.df),this.opp=P7.getValue(t.opp,this.opp),this.ar=P7.getValue(t.ar,this.ar),this.dr=P7.getValue(t.dr,this.dr),this.wn=P7.getValue(t.wn,this.wn),t.op)for(var o in this.opp)this.opp[o].no==t.op.no&&(this.opp[o]=t.op);e&&this.notify.apply(this,i)},t.prototype.FL35=function(){var t=0,e=App.CM.gtM(O6.C12);return 1==this.st&&9<=THH1.FD12(e)&&(t+=this.cn,t+=this.heroLineupRed(),t+=this.newRecord?1:0),t},t.prototype.heroLineupRed=function(){for(var t=0,e=1;e<=3;e++)t+=this.ah[e]?this.ah[e].length:0;return t<9?1:0},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},__decorate([Common.timeRefresh(!1)],t.prototype,"rcd",void 0),t}(TG79);__reflect(HeroBattleModel.prototype,"HeroBattleModel");var HeroBattleProxy=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.CROSS_HEROCOMP_STATE_PUSH,t.GU20,t),e.rSM(P4.CROSS_HEROCOMP_FIGHT_REC_PUSH,t.update,t),e.rSM(P4.CROSS_HEROCOMP_DATA_PUSH,t.update,t),e.rSM(P4.CROSS_HEROCOMP_OPPONENT_PUSH,t.update,t),e.rSM(P4.CROSS_HEROCOMP_FABAO_PUSH,t.update,t),e}return __extends(t,i),t.prototype.loadState=function(){var s=this;return new Promise(function(e,t){var i={type:P4.CROSS_HEROCOMP_STATE_REQ,body:{}};s.rSMO(P4.CROSS_HEROCOMP_STATE_RES,function(t){s.apF(HeroBattleConst.LOAD_RES,t),e("加载武将比斗")},s),s.sSM(i)})},t.prototype.load=function(){var t={type:P4.CROSS_HEROCOMP_LOAD_REQ,body:{}},e=this._controller;this.rSMO(P4.CROSS_HEROCOMP_LOAD_RES,e.update,e),this.sSM(t)},t.prototype.refresh=function(){var t={type:P4.CROSS_HEROCOMP_SEARCH_REQ,body:{}},e=this._controller;this.rSMO(P4.CROSS_HEROCOMP_SEARCH_RES,e.update,e),this.sSM(t)},t.prototype.update=function(){var t={type:P4.CROSS_HEROCOMP_REFRESH_REQ,body:{}},e=this._controller;this.rSMO(P4.CROSS_HEROCOMP_REFRESH_RES,e.update,e),this.sSM(t)},t.prototype.fight=function(t){var e={type:P4.CROSS_HEROCOMP_FIGHT_REQ,body:{no:t}},i=this._controller;this.rSMO(P4.CROSS_HEROCOMP_FIGHT_RES,i.fightRes,i),this.sSM(e)},t.prototype.replay=function(t,e){var i={type:P4.CROSS_HEROCOMP_LOOK_FRST_REQ,body:{frId:t,type:e}},s=this._controller;this.rSMO(P4.CROSS_HEROCOMP_LOOK_FRST_RES,s.replayRes,s),this.sSM(i)},t.prototype.loadRank=function(t){var e={type:P4.CROSS_HEROCOMP_RANK_REQ,body:t},i=this._controller;this.rSMO(P4.CROSS_HEROCOMP_RANK_RES,i.GV62,i),this.sSM(e)},t.prototype.loadMil=function(){var t={type:P4.CROSS_HEROCOMP_MILITARYRANK_REQ,body:{}},e=this._controller;this.rSMO(P4.CROSS_HEROCOMP_MILITARYRANK_RES,e.GV62,e),this.sSM(t)},t.prototype.buy=function(){var t={type:P4.CROSS_HEROCOMP_BUY_REQ,body:{}},e=this._controller;this.rSMO(P4.CROSS_HEROCOMP_BUY_RES,e.update,e),this.sSM(t)},t.prototype.save=function(t,e){var i={type:P4.CROSS_HEROCOMP_SAVE_SQUAD_REQ,body:{squadStr:JSON.stringify({hero:t}),type:e}},s=this._controller;this.rSMO(P4.CROSS_HEROCOMP_SAVE_SQUAD_RES,s.update,s),this.sSM(i)},t.prototype.saveFabao=function(t,e,i,s){var o={type:P4.CROSS_HEROCOMP_FABAO_UPBATTLE_REQ,body:{fid:t,round:e,pos:i,type:s}},r=this._controller;this.rSMO(P4.CROSS_HEROCOMP_FABAO_UPBATTLE_RES,r.update,r),this.sSM(o)},t.prototype.takeReward=function(t){var e={type:P4.L68,body:{mid:t}},i=this._controller;this.rSMO(P4.L69,i.update,i),this.sSM(e)},t}(TG80);__reflect(HeroBattleProxy.prototype,"HeroBattleProxy");var HeroBattleFabaoBagItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="FaBaoItemIconSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(1==this.data.type?this.lbMove.textFlow=O3.tr2(8506):this.lbMove.text=O3.tr(1148,this.data.lv),this.lbName.text=this.data.name,O5.FB13(this.lbName,this.data.name,this.data.quality),this.imgBg.source=N12.getBox(this.data.quality),this.imgIcon.source=this.data.icon)},t}(eui.ItemRenderer);__reflect(HeroBattleFabaoBagItemView.prototype,"HeroBattleFabaoBagItemView");var HeroBattleFabaoItemView=function(i){function t(){var t=i.call(this)||this;return t.skinName="FaBaoPositionItemSkin",t}return __extends(t,i),t.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.lbRound.textFlow=M18.HTP.parser(O3.tr(6130,this.name))},t.prototype.dataChanged=function(){if(i.prototype.dataChanged.call(this),this.lbUnlock.visible=!1,this.data.pos.isOwn)if(this.data.data){var t=this.data.data;this.imgHead.source=t.icon,this.imgHead.alpha=1}else this.imgHead.source="i75000_png",this.imgHead.alpha=0;else{var e=this.data.pos;this.lbUnlock.visible=!0,this.lbUnlock.textFlow=M18.HTP.parser(O3.tr(6131,e.unlock.lv,e.unlock.v))}P16.sGF(this.imgBg,!this.data.pos.isOwn),this.lbRound.textFlow=M18.HTP.parser(O3.tr(6130,this.name)),this.imgBg.source=this.data.data?"v1_img_dz_fb2_png":"v1_img_dz_fb_png"},Object.defineProperty(t.prototype,"Select",{get:function(){return this.imgSelected.visible},set:function(t){this.imgSelected.visible=t},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(HeroBattleFabaoItemView.prototype,"HeroBattleFabaoItemView");var HeroBattleHeroItemView=function(i){function t(){var t=i.call(this)||this;return t.skinName="HeroBattleHeroItemSkin",t}return __extends(t,i),t.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.hit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.hit.alpha=0},t.prototype.dataChanged=function(){i.prototype.dataChanged.call(this);var t=this.data.aid||this.data.npcId;if(this.aid!=t){this.removeAvatar(),this.boss=new FightGameObject;var e=P7.ObjectSet({x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},this.data.u,!1);this.boss.setData(e,this.gAvatar),this.boss.action=Action.Stand,this.aid=t}this.imgDeath.visible=1==this.data.beat,this.labName.text=this.data.name,this.labScore.textFlow=O3.tr2(8816,this.data.sc)},t.prototype.removeAvatar=function(){this.gAvatar.removeChildren(),this.boss&&(this.boss.destory(),delete this.boss)},t.prototype.onClick=function(){if(1==App.CM.gtM(O6.HeroBattle).st){if(1!=this.data.beat){var t=void 0,e=App.CM.gtM(O6.HeroBattle);if(this.data.npcId)for(var i in t=P7.copyTab(this.data.heros))for(var s=0,o=t[i];s<o.length;s++){var r=o[s],n=N14.getHeroByModel(N17.monster[r.v].image);r.v=n?n.id:10001}else t=this.data.heros;App.VM.open(O7.HeroBattleEnemyInfo,this.data.no,HeroBattleConfig.calcScore(e.sc,this.data.sc,e.wn),t)}}else P18.sDP(O3.tr(5448))},t.prototype.remove=function(){this.hit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeAvatar()},t}(eui.ItemRenderer);__reflect(HeroBattleHeroItemView.prototype,"HeroBattleHeroItemView");var HeroBattleHeroListItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="HeroBattleHeroListItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgIcon.source=this.data.icon,this.imgIcon.validateNow(),this.imgBg.source=this.data.bg,this.lbName.textFlow=M18.FG71(this.data.name),this.gpCt.visible=this.gpState.visible=1==this.data.state,this.lbCt.text=M18.FF66(this.data.round),this.lbState.text=O3.tr(4832)},t}(eui.ItemRenderer);__reflect(HeroBattleHeroListItemView.prototype,"HeroBattleHeroListItemView");var HeroBattleRankItemView=function(i){function t(){var t=i.call(this)||this;return t.skinName="HeroBattleRankItemSkin",t}return __extends(t,i),t.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon},t.prototype.dataChanged=function(){i.prototype.dataChanged.call(this);var t=HeroBattleConfig.getMilitary(this.data.hcm);this.imgRank.source=t.icon,this.labName.text=this.data.n,this.labMil.text=t.name,this.labValue.textFlow=O3.tr2(0<this.data.hcs?8994:8860,this.data.hcs||t.value),this.labTips.textFlow=O3.tr2(8858,t.value,this.data.r);var e=P7.str2kv(t.reward);e.unshift({k:K18.title[t.title].item,v:1}),this.dataSource.source=e.map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1}})},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.dataSource.removeAll()},t}(eui.ItemRenderer);__reflect(HeroBattleRankItemView.prototype,"HeroBattleRankItemView");var HeroBattleRankScoreItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="HeroBattleRankScoreItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgRank.visible=this.data.r<=3,this.labRank.visible=!this.imgRank.visible,this.data.r<=3?this.imgRank.source=[,"v1_fonts_1st_png","v1_fonts_2nd_png","v1_fonts_3rd_png"][this.data.r]:this.labRank.text=this.data.r+"",this.imgBg.visible=this.itemIndex%2==0,this.labScore.text=this.data.hcs+"",this.labName.textFlow=this.data.sn?O3.tr2(8870,this.data.n,this.data.sn):M18.FG71(this.data.n);var t=HeroBattleConfig.getRankReawrd(this.data.r);this.dataSource.source=t.map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1,scale:.6}})},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.dataSource.removeAll()},t}(eui.ItemRenderer);__reflect(HeroBattleRankScoreItemView.prototype,"HeroBattleRankScoreItemView");var HeroBattleRecordItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="HeroBattleRecordItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btnReplay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.labDiffer.textColor=0<=this.data.as?_cc.green:_cc.red,this.labDiffer.text=Math.abs(this.data.as)+"",this.imgDiffer.source=0<=this.data.as?"v1_img_shangsheng_jiantou_png":"v1_img_xiajiang_jiantou_png",this.imgState.source=this.data.win?"v1_fonts_sheng_png":"v1_fonts_bai_png",this.labTime.text=P6.format(this.data.time,"yyyy/MM/dd hh:mm"),this.labTitle.textFlow=O3.tr2(this.data.type==HeroBattleConst.RECORD_TYPE_ATK?8854:8855,this.data.n,O3.tr(this.data.win?8851:8852)),this.imgBg.visible=this.itemIndex%2==1},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btnReplay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_LOOK_FRST_REQ,this.data.frId,this.data.type)},t}(eui.ItemRenderer);__reflect(HeroBattleRecordItemView.prototype,"HeroBattleRecordItemView");var HeroBattleCleanHelpView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleScoreHelpSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.labTr8983.textFlow=O3.tr2(8983),this.labTr8984.textFlow=O3.tr2(8984),this.labTr8991.textFlow=O3.tr2(8991),this.lb1.textFlow=O3.tr2(8992),this.lb2.textFlow=O3.tr2(8993)},t.prototype.close=function(){this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this)},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(HeroBattleCleanHelpView.prototype,"HeroBattleCleanHelpView");var HeroBattleEnemyInfoView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleEnemyInfoSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.btn.label=O3.tr(8845),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dlg.title=O3.tr(8846),this.dlg.ZQ14(this.oCC,this),this.dlg.ZM69(this.oCC,this),this.ds={};for(var t=1;t<=3;t++){var e=this.gpList.getChildByName("l"+t),i=this.gpList.getChildByName("t"+t).getChildByName("title");e.itemRenderer=UltimateBattleHeroIconItemView,e.dataProvider=this.ds[t]=new eui.ArrayCollection,i.textFlow=O3.tr2(8843,M18.FF66(t))}},t.prototype.open=function(t,e,i){this.no=t,this.hl=i,this.score=e,this.GX5()},t.prototype.close=function(){for(var t in this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ds)this.ds[t].removeAll()},t.prototype.GX5=function(){this.lab.textFlow=O3.tr2(8844,this.score);App.CM.gtM(O6.C12);for(var t in this.hl)this.ds[t].source=this.hl[t].map(function(t){var e=N14.base[t.v],i=e.id,s=e.icon,o=e.quality;return{id:i,name:e.name,icon:s,bg:N12.getBox(o),state:0}})},t.prototype.onClick=function(){App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_FIGHT_REQ,this.no),this.oCC()},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(HeroBattleEnemyInfoView.prototype,"HeroBattleEnemyInfoView");var HeroBattleFightResultView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleResultSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.dgRewards.dataProvider=this.rewardsCollection=new eui.ArrayCollection,this.dgRewards.itemRenderer=ItemIcon,this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this)},t.prototype.open=function(t,e){this.win=t,this.params=e,this.win?(this.confirmStr=O3.tr(5748),this.closeCD=FightD.RS_CLOSE_CD,this.currentState="win",App.THH32.aUE(this.grpWinDB,"wdsg_jsjm_sl_01",this.grpWinDB.width/2,this.grpWinDB.height/2)):(this.confirmStr=O3.tr(5748),this.closeCD=FightD.DF_CLOSE_CD,this.currentState="lose",App.THH33.aUE(this.grpLossMC,"fail",0,-this.grpLossMC.height/2)),this.validateNow(),this.setTimer(),this.GX5(),this.labTr7512.textFlow=O3.tr2(7512)},t.prototype.close=function(){this.bRegSkipTimer&&App.K16.rBH(this.timer),this.timer=null,this.rewardsCollection.removeAll(),P5.sIs(this.params.rewards),this.params&&!this.params.isNotClose&&this.params.closeCallback&&this.params.closeCallback.call(this.params.closeCallbackObj,!0),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),App.THH32.rEf(this.grpWinDB,"wdsg_jsjm_sl_01"),App.THH33.rEf(this.grpLossMC,"fail"),delete this.win,delete this.params,s.prototype.close.call(this)},t.prototype.setTimer=function(){this.bRegSkipTimer||(this.timer=App.K16.doTimer(1e3,this.closeCD,this.ZU23,this)),this.btnConfirm.label=this.confirmStr+"("+this.closeCD+")"},Object.defineProperty(t.prototype,"bRegSkipTimer",{get:function(){return!!this.timer},enumerable:!0,configurable:!0}),t.prototype.ZQ58=function(){App.VM.GY64(this)},t.prototype.ZU23=function(){this.closeCD--,this.closeCD<=0?this.ZQ58():this.btnConfirm.label=this.confirmStr+"("+this.closeCD+")"},t.prototype.updateReward=function(){var s=[],o=!0;P7.FM14()&&(o=!1),this.params&&this.params.rewards&&0<this.params.rewards.length&&this.params.rewards.forEach(function(t){var e=N12.gID(t.k);if(e){var i={itemData:{data:e,ct:t.v},isBottom:o,pack:!1};s.push(i)}}),s.sort(function(t,e){var i=t.itemData.data,s=e.itemData.data;return i.quality==s.quality?i.type==s.type?i.id>s.id?-1:1:1==i.type&&2==s.type?-1:2==i.type&&1==s.type?1:i.type>s.type?-1:1:i.quality>s.quality?-1:1}),this.rewardsCollection.replaceAll(s)},t.prototype.GX5=function(){this.updateReward();var t=this.params.extra,e=t.wsc,i=t.diff,s=t.win,o=t.sc,r=t.wn;this.labTips.textFlow=O3.tr2(8847,O3.tr(s?8851:8852),o,0<i?"+":"",i),this.labWinScore.includeInLayout=this.labWinScore.visible=!1,this.labScore.textFlow=O3.tr2(8848,i-(e||0),O3.tr(s?8851:8852),0<i?"+":""),s&&(this.labWinScore.includeInLayout=this.labWinScore.visible=!!e,this.labWinScore.textFlow=O3.tr2(8849,r,e))},t}(BaseEuiView);__reflect(HeroBattleFightResultView.prototype,"HeroBattleFightResultView");var HeroBattleFightView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleFightSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.percentHeight=NaN,this.percentWidth=NaN,this.top=42,this.right=-25,this.labTr8997.textFlow=O3.tr2(8997),this.gRound.$children.forEach(function(t,e){t.textFlow=O3.tr2(8998,e+1)})},t.prototype.cloes=function(){delete this.fr},t.prototype.set=function(t){this.gState.$children.forEach(function(t){var e=t.getChildAt(0),i=t.getChildAt(1);e.source=i.source=""});var e=App.CM.gtM(O6.HeroBattle);if(0<t)for(var i=0;i<Math.min(t,e.fightWins.length);i++){var s=e.fightCamp?!!e.fightWins[i]:!e.fightWins[i],o=this.gState.getChildAt(i),r=o.getChildAt(0),n=o.getChildAt(1);r.source=s?"v1_bar_lu_png":"v1_bar_red_tfdz_png",n.source=s?"v1_fonts_sheng_png":"v1_fonts_bai_png"}},t.prototype.open=function(t){this.fr=t,this.set(0)},t}(BaseEuiView);__reflect(HeroBattleFightView.prototype,"HeroBattleFightView");var HeroBattleHeroListView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleHeroListSkin",i}return __extends(t,s),t.prototype.initUI=function(){var t=this;t.dlg.ZQ14(t.oCC,t),t.dlg.ZM69(t.oCC,t),t.dlg.title=O3.tr(8840),t.list=new CommonListBase({render:HeroBattleHeroListItemView,verticalGap:10,horizontalGap:10,tileLayout:!0,width:this.gpList.width,height:this.gpList.height}),t.list.itemList.layout.requestedColumnCount=5,t.gpList.addChild(t.list),t.list.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClick,this),t.list.scContent.width=t.list.itemList.width=NaN,this.labTr8990.textFlow=O3.tr2(8990)},t.prototype.open=function(t,e,i,s){this.page=t,this.pos=e,this.selectHeros=i,this.filterHeros=s,this.list.open(),this.updateList()},t.prototype.close=function(){this.list.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClick,this),this.list.close(),delete this.callback},t.prototype.setClickCallback=function(t){this.callback=t},t.prototype.onClick=function(t){this.callback&&this.callback(this.page,this.pos,t.item.id),this.oCC()},t.prototype.getInfo=function(t){for(var e in this.selectHeros)if(this.selectHeros[e])for(var i=0,s=this.selectHeros[e];i<s.length;i++){if(s[i].v==t)return parseInt(e)}return 15},t.prototype.updateList=function(){var t=[],e=(App.CM.gtM(O6.HeroBattle),App.CM.gtM(O6.C12));for(var i in e.heroList){var s=e.heroList[i];if(!(0<=this.filterHeros.indexOf(s.id))&&0<s.lv){var o=s.id,r=s.icon,n=s.quality,a=s.name,h=(s.power,this.getInfo(s.id));t.push({id:o,name:a,icon:r,bg:N12.getBox(n),state:h<15?1:0,w:n,round:h})}}t.sort(function(t,e){return t.round==e.round?e.w-t.w:t.round-e.round}),this.list.rfL(t)},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(HeroBattleHeroListView.prototype,"HeroBattleHeroListView");var HeroBattleLineupFabaoDefView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(){var t=App.CM.gtM(O6.HeroBattle);if(this.fl=t.df,this.changed=!1,this.changePage(1,!0),this.fl[1])for(var e in this.fl[1]){this.GW87({currentTarget:this.grpPos.getChildByName(e)});break}},e.prototype.switch_=function(t,e,i){App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_FABAO_UPBATTLE_REQ,i,e,t,2)},e.prototype.uBM=function(t,e){t instanceof HeroBattleModel&&(e==P4.CROSS_HEROCOMP_FABAO_UPBATTLE_RES&&(this.fl=t.df),this.GX5(),this.updateList())},e}(HeroBattleLineupFabaoAtkView);__reflect(HeroBattleLineupFabaoDefView.prototype,"HeroBattleLineupFabaoDefView");var HeroBattleLineupHeroDefView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setHeroList=function(){var t=App.CM.gtM(O6.HeroBattle);this.hl=P7.copyTab(t.dh)},e.prototype.onClickSave=function(){App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_SAVE_SQUAD_REQ,this.hl,2)},e}(HeroBattleLineupHeroAtkView);__reflect(HeroBattleLineupHeroDefView.prototype,"HeroBattleLineupHeroDefView");var HeroBattleLineupMainView=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return __extends(t,o),t.prototype.initUI=function(){this.set(O7.HeroBattleLineupMain,O3.tr(8836)).rgS(O7.HeroBattleLineupHeroAtk,"HeroBattleLineupHeroAtkView",O3.tr(8836),0).rgS(O7.HeroBattleLineupFabaoAtk,"HeroBattleLineupFabaoAtkView",O3.tr(8837),0).rgS(O7.HeroBattleLineupHeroDef,"HeroBattleLineupHeroDefView",O3.tr(8838),0).rgS(O7.HeroBattleLineupFabaoDef,"HeroBattleLineupFabaoDefView",O3.tr(8839),0),o.prototype.initUI.call(this)},t.prototype.ZQ23=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=o.prototype.ZQ23.apply(this,[t].concat(e));return this.helpBtn.visible=!0,s},t.prototype.updateDot=function(t,e){return e==O7.HeroBattleLineupHeroAtk&&0<App.CM.gtM(O6.HeroBattle).heroLineupRed()},t.prototype.openHelpView=function(){var t={title:O3.tr(8946),content:O3.tr(8947)};App.VM.open(O7.I8,t)},t}(BasePanelViewX);__reflect(HeroBattleLineupMainView.prototype,"HeroBattleLineupMainView");var HeroBattleRankMainView=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return __extends(t,s),t.prototype.initUI=function(){this.set(O7.HeroBattleRankMain,O3.tr(8871)).rgS(O7.HeroBattleRankScore,"HeroBattleRankScoreView",O3.tr(8871),0).rgS(O7.HeroBattleRank,"HeroBattleRankView",O3.tr(8872),0),s.prototype.initUI.call(this)},t.prototype.open=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_REFRESH_REQ),s.prototype.open.apply(this,[t].concat(e))},t}(BasePanelViewX);__reflect(HeroBattleRankMainView.prototype,"HeroBattleRankMainView");var HeroBattleRankScoreView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.num=100,i.listData=[],i.pageSize=20,i.maxIndex=5,i.index=1,i.skinName="HeroBattleRankScoreSkin",i}return __extends(t,s),t.prototype.ZU17=function(){if(!(this.index>this.maxIndex||this.tf>P6.getTime(!0))){var t={currPage:this.index,size:this.pageSize};App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_RANK_REQ,t),this.tf=P6.getTime(!0)+1}},t.prototype.initUI=function(){var t=this;this.labTr8864.textFlow=O3.tr2(8864),this.labTr8866.textFlow=O3.tr2(8866),this.labTr8867.textFlow=O3.tr2(8867),this.labTr8868.textFlow=O3.tr2(8868),this.labTr8869.textFlow=O3.tr2(8869),this.listView=new CommonListBase({render:HeroBattleRankScoreItemView,gap:0,width:this.gpList.width,height:this.gpList.height}),this.listView.scContent.addEventListener(eui.UIEvent.CHANGE_END,this.onChange,this),this.listView.scContent.addEventListener(eui.UIEvent.CHANGE,this.onChange,this),this.gpList.addChild(this.listView);for(var e=0;e<100;e++)this.listData[e]={r:e+1,n:O3.tr(8859),sn:"",hcs:0};this.listView.rfL(this.listData),this.tf={},this.listView.ZG4(function(){return t.ZU17()})},t.prototype.open=function(){this.listView.open(),this.ZU17();var t=App.CM.gtM(O6.HeroBattle);this.GX5(t)},t.prototype.close=function(){this.listView.close(),this.listView.scContent.removeEventListener(eui.UIEvent.CHANGE_START,this.onChange,this),this.listView.scContent.removeEventListener(eui.UIEvent.CHANGE_END,this.onChange,this)},t.prototype.uBM=function(t,e,i){t instanceof HeroBattleModel&&(this.GX5(t),e==P4.CROSS_HEROCOMP_RANK_RES&&this.ZHH63(i))},t.prototype.onChange=function(){(this.listView.itemList.scrollV+this.gpList.height)/70/this.pageSize>=this.index-1&&this.ZU17()},t.prototype.ZHH63=function(t){var e=this;t.length&&(t.length===this.pageSize&&(this.index=Math.ceil(t[0].r/this.pageSize)+1),t.forEach(function(t){return e.listData[t.r-1]=t})),this.listView.rfL(this.listData)},t.prototype.GX5=function(t){this.labRank.textFlow=O3.tr2(8862,0<t.rank?t.rank:O3.tr(8865)),this.labMilitary.textFlow=O3.tr2(8863,0<t.mil?HeroBattleConfig.getMilitary(t.mil).name:O3.tr(8865)),this.labScore.textFlow=O3.tr2(8861,t.sc)},t}(BaseEuiView);__reflect(HeroBattleRankScoreView.prototype,"HeroBattleRankScoreView");var HeroBattleRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.num=100,i.listData=[],i.pageSize=20,i.index=1,i.skinName="HeroBattleRankSkin",i}return __extends(t,s),t.prototype.ZU17=function(){var t={currPage:this.index,size:this.pageSize};App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_MILITARYRANK_REQ,t)},t.prototype.initUI=function(){this.labTr8864.textFlow=O3.tr2(8864),this.listView=new CommonListBase({render:HeroBattleRankItemView,gap:5,width:this.gpList.width,height:this.gpList.height}),this.gpList.addChild(this.listView);for(var t=Reincarnate.Utils.mapkeyMax(HeroBattleConfig.militaryrank),e=1,i=1;e<=t;e++)for(var s=HeroBattleConfig.militaryrank[e],o=s.rankleft;o<=s.rankright;o++)this.listData.push({n:O3.tr(8859),r:i,hcs:0,hcm:s.rank}),i++},t.prototype.open=function(){this.listView.open(),this.ZU17();var t=App.CM.gtM(O6.HeroBattle);this.GX5(t)},t.prototype.close=function(){this.listView.close()},t.prototype.uBM=function(t,e,i){t instanceof HeroBattleModel&&(this.GX5(t),e==P4.CROSS_HEROCOMP_MILITARYRANK_RES&&this.ZHH63(i))},t.prototype.ZHH63=function(t){var e=this;t.length&&(t.length===this.pageSize&&(this.index=Math.ceil(t[0].r/this.pageSize)+1),t.forEach(function(t){return e.listData[t.r-1]=t})),this.listView.rfL(this.listData)},t.prototype.GX5=function(t){this.labRank.textFlow=O3.tr2(8862,0<t.rank?t.rank:O3.tr(8865)),this.labMilitary.textFlow=O3.tr2(8863,0<t.mil?HeroBattleConfig.getMilitary(t.mil).name:O3.tr(8865)),this.labScore.textFlow=O3.tr2(8861,t.sc)},t}(BaseEuiView);__reflect(HeroBattleRankView.prototype,"HeroBattleRankView");var HeroBattleRecordView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleRecordSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.gAtk.addChild(this.listAtk=new CommonListBase({render:HeroBattleRecordItemView,gap:0,width:this.gAtk.width,height:this.gAtk.height})),this.gDef.addChild(this.listDef=new CommonListBase({render:HeroBattleRecordItemView,gap:0,width:this.gAtk.width,height:this.gAtk.height})),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.dlg.title=O3.tr(8853),this.labTr8856.textFlow=O3.tr2(8856),this.labTr8857.textFlow=O3.tr2(8857)},t.prototype.open=function(){this.listAtk.open(),this.listDef.open();var t=App.CM.gtM(O6.HeroBattle);this.updateList(t)},t.prototype.close=function(){this.listAtk.close(),this.listDef.close()},t.prototype.uBM=function(t,e){t instanceof HeroBattleModel&&(e!=P4.CROSS_HEROCOMP_FIGHT_RES&&e!=P4.CROSS_HEROCOMP_FIGHT_REC_PUSH||this.updateList(t))},t.prototype.updateList=function(t){t.newRecord=!1,t.notify(),this.listAtk.rfL(t.ar.map(function(t){return P7.ObjectSet({type:HeroBattleConst.RECORD_TYPE_ATK},t)})),this.listDef.rfL(t.dr.map(function(t){return P7.ObjectSet({type:HeroBattleConst.RECORD_TYPE_DEF},t)}))},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(HeroBattleRecordView.prototype,"HeroBattleRecordView");var HeroBattleView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroBattleSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU49,this),this.btnLineup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLineup,this),this.btnInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickInfo,this),this.btnRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT8,this),this.btnBuycount.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuyCount,this),this.labTr8817.textFlow=O3.tr2(8817),this.labTr8818.textFlow=O3.tr2(8818),this.labTr8818.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTips,this),this.btnLineup.label=O3.tr(8824),this.btnInfo.label=O3.tr(8825),this.btnRefresh.label=O3.tr(8826)},t.prototype.open=function(){s.prototype.open.call(this),this.timer=this.timer||App.K16.doTimer(1e3,0,this.GX42,this),this.GW17=this.GW17||App.K16.doTimer(6e4,0,this.update,this);var t=App.CM.gtM(O6.HeroBattle);this.update(),this.GX42(),this.GX5(t)},t.prototype.close=function(){s.prototype.close.call(this),this.btnRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU49,this),this.btnLineup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLineup,this),this.btnInfo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickInfo,this),this.btnRefresh.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT8,this),this.btnBuycount.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuyCount,this),this.labTr8818.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTips,this),App.K16.rBH(this.timer),App.K16.rBH(this.GW17),this.gEnemy.$children.forEach(function(t){return t.remove()}),delete this.timer,delete this.GW17},t.prototype.uBM=function(t){t instanceof HeroBattleModel&&this.GX5(t)},t.prototype.GX5=function(t){var e=t.rank;if(this.labCount.textFlow=O3.tr2(8821,t.cn,egret.toColorString(0<t.cn?_cc.green:_cc.red)),this.labScore.textFlow=O3.tr2(8819,t.sc),this.labRank.textFlow=O3.tr2(8820,0<e?e:O3.tr(8823)),this.btnBuycount.visible=t.bn<HeroBattleConfig.buyMum,this.btnLineup.imgNew.visible=0<t.heroLineupRed(),this.btnRecord.imgNew.visible=!!t.newRecord,t.mil<=0){this.lab.textFlow=O3.tr2(8822);var i=HeroBattleConfig.getMilitary(Reincarnate.Utils.mapkeyMax(HeroBattleConfig.militaryrank));this.img.source=i.icon,P16.sGF(this.img,!0)}else{i=HeroBattleConfig.getMilitary(t.mil);this.lab.text=i.name,this.img.source=i.icon,P16.sGF(this.img,!1)}this.updateEnemy(t)},t.prototype.updateEnemy=function(t){var i=this;t.opp&&t.opp.forEach(function(t,e){i.gEnemy.getChildAt(e).data=t})},t.prototype.update=function(){App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_REFRESH_REQ)},t.prototype.GX42=function(){var t=App.CM.gtM(O6.HeroBattle);this.labTime.visible=0<t.rcd,0<t.rcd&&(this.labTime.text=P6.FJ11(t.rcd,1))},t.prototype.onClickRank=function(){App.VM.open(O7.HeroBattleRankMain)},t.prototype.onClickInfo=function(){App.VM.open(O7.HeroBattleRankMain,O7.HeroBattleRank)},t.prototype.ZU49=function(){App.VM.open(O7.HeroBattleRecord)},t.prototype.onClickLineup=function(){App.VM.open(O7.HeroBattleLineupMain)},t.prototype.ZT8=function(){var t=App.CM.gtM(O6.HeroBattle),e=function(){return App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_SEARCH_REQ)};if(t.heroLineupRed())P18.sDP(O3.tr(9038));else if(0<t.rcd)P18.sDP(O3.tr(9039));else if(t.useGoldTips){var i={handler:e,content:O3.tr(9037)};App.VM.open(O7.C54,i)}else e()},t.prototype.onClickTips=function(){App.VM.open(O7.HeroBattleClean)},t.prototype.onClickBuyCount=function(){var t=App.CM.gtM(O6.HeroBattle),e=N12.FK5(HeroBattleConfig.obtMoney.k),i={handler:function(){return App.CM.apF(O6.HeroBattle,P4.CROSS_HEROCOMP_BUY_REQ)},content:O3.tr(8938,HeroBattleConfig.obtMoney.v,e,HeroBattleConfig.obtMun,HeroBattleConfig.buyMum-t.bn,HeroBattleConfig.buyMum),cost:HeroBattleConfig.obtMoney.v};App.VM.open(O7.C54,i)},t}(BaseEuiView);__reflect(HeroBattleView.prototype,"HeroBattleView");var G8=function(){function a(){}return a.FK35=function(t){a.init=t.heroequip_init,a.equip=t.heroequip_equip,a.polish=t.heroequip_polish,a.star=t.heroequip_star,a.breach=t.heroequip_breach,a.polishmaster=t.heroequip_polishmaster,a.starmaster=t.heroequip_starmaster,a.awaken=t.heroequip_awaken,a.awakening=t.heroequip_awakenmaster},a.gIV=function(t){return a.init[t].value},a.FE5=function(t){return a.equip[t]},a.FD15=function(t){for(var e in a.equip){var i=a.equip[e];if(i.pos==t)return i}},a.FC36=function(t,e,i){var s,o;switch(i){case E1.A4:s=a.polish,o="lv";break;case E1.A5:s=a.star,o="stars";break;case E1.A2:s=a.breach,o="times";break;case E1.A3:s=a.awaken,o="lv"}for(var r in s){var n=s[r];if(n[o]==t&&n.pos==e)return n}},a.FA28=function(t,e){return e==E1.A4?a.polishmaster[t]:e==E1.A5?a.starmaster[t]:e==E1.A3?a.awakening[t]:void 0},a.FI61=function(t){var e=a.gIV("qualityCoe"),i=M18.FL28(e,"|",":");for(var s in i)if(parseInt(i[s][0])==t)return parseFloat(i[s][1])},a}();__reflect(G8.prototype,"G8");var G14=function(){function t(){}return t.A26=0,t.A27=1,t.A30=2,t.A31=3,t.A20=4,t.A21=5,t.A22=6,t.A23=7,t.A14=8,t.A15=9,t.A24=10,t.A25=11,t.A32=12,t.A33=13,t.A34=14,t.A29=15,t.A28=100,t.A35=101,t.A5=102,t.A18=200,t.A19=201,t.A3=202,t.A4=203,t.A6=204,t.A7=205,t.A12=206,t.A13=207,t.A8=208,t.A9=209,t.A16=210,t.A17=211,t.A1=212,t.A2=213,t.A10=214,t.A11=215,t}();__reflect(G14.prototype,"G14");var E1=function(){function t(){}return t.A4=1,t.A5=2,t.A2=3,t.A6=4,t.A1=5,t.A3=6,t}();__reflect(E1.prototype,"E1");var TB83=function(i){function t(){var t=i.call(this)||this;t.proxy=new TE87(t);var e=new TE86(t);return e.aLV(O7.D90),e.aLV(O7.E39),e.aLV(O7.D43),e.aLV(O7.C67),e.aLV(O7.E38),e.aLV(O7.C95),e.aLV(O7.HH97),e.aLV(O7.C45),App.VM.register(O7.D90,"HeroEquipMainView",t,K17.UI_Main_TOP),t.rgF(G14.A26,t.GP31,t),t.rgF(G14.A27,t.GP32,t),App.VM.register(O7.G19,"SandMasterView",t,K17.UI_Tips),t.rgF(G14.A30,t.GU84,t),t.rgF(G14.A31,t.GU85,t),App.VM.register(O7.C68,"HeroEquipSelectView",t,K17.UI_Popup),t.rgF(G14.A32,t.GU86,t),t.rgF(G14.A33,t.GU87,t),App.VM.register(O7.G99,"StarMasterView",t,K17.UI_Tips),t.rgF(G14.A20,t.GL45,t),t.rgF(G14.A21,t.GL46,t),App.VM.register(O7.C69,"HeroEquipDetailView",t,K17.UI_Popup),t.rgF(G14.A22,t.GL47,t),t.rgF(G14.A23,t.GL48,t),App.VM.register(O7.A92,"HeroEquipTotalAttrView",t,K17.UI_Main_TOP),t.rgF(G14.A14,t.GF92,t),t.rgF(G14.A15,t.GF93,t),App.VM.register(O7.D44,"HeroEquipShareView",t,K17.UI_Popup),t.rgF(G14.A24,t.GN40,t),t.rgF(G14.A25,t.GN41,t),App.VM.register(O7.A31,"AwakenMasterView",t,K17.UI_Popup),t.rgF(G14.A34,t.GU88,t),t.rgF(G14.A29,t.GR21,t),t.rgF(G14.A18,t.GN39,t),t.rgF(G14.A19,t.GJ66,t),t.rgF(G14.A3,t.GT23,t),t.rgF(G14.A4,t.GT24,t),t.rgF(G14.A12,t.GR15,t),t.rgF(G14.A13,t.GR16,t),t.rgF(G14.A8,t.GR17,t),t.rgF(G14.A9,t.GR18,t),t.rgF(G14.A16,t.GT25,t),t.rgF(G14.A17,t.GT26,t),t.rgF(G14.A6,t.GJ67,t),t.rgF(G14.A7,t.GJ68,t),t.rgF(G14.A10,t.GR19,t),t.rgF(G14.A11,t.GR20,t),t.rgF(G14.A35,t.GW42,t),t.rgF(G14.A5,t.GD73,t),t}return __extends(t,i),t.prototype.GD13=function(t,e){if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),!1;var i=this.gtM();return i.loadData(t.body),e&&i.notify(e),!0},t.prototype.GB96=function(t,e){if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),!1;var i=this.gtM();return i.ZL64(t.body),P5.sIs(t.body.ob),e==P4.Q67&&i.breakCostItem.splice(0,i.breakCostItem.length),e==P4.HH11&&i.ZI90(),e&&i.notify(e),!0},t.prototype.GN39=function(){this.proxy.ZE13()},t.prototype.GJ66=function(t){this.GD13(t,P4.S36)&&(this.gtM().isLoadData=!0)},t.prototype.GT23=function(){this.proxy.ZI91()},t.prototype.GT24=function(t){this.GD13(t,P4.F42)},t.prototype.GR15=function(t,e){this.proxy.ZG96(t,e)},t.prototype.GR16=function(t){this.GB96(t,P4.O79)},t.prototype.GR17=function(t){this.proxy.ZG97(t)},t.prototype.GR18=function(t){this.GB96(t,P4.M62)},t.prototype.GT25=function(t,e){for(var i="",s=0;s<e.length;s++)s==e.length-1?i+=e[s]:i=i+e[s]+",";this.proxy.ZI92(t,i)},t.prototype.GT26=function(t){this.GB96(t,P4.Q67)},t.prototype.GJ67=function(t,e){var i=this.gtM();if(i.selectedList&&0<i.selectedList.length){for(var s="",o=0;o<i.selectedList.length;o++)o==i.selectedList.length-1?s+=i.selectedList[o]:s=s+i.selectedList[o]+",";this.proxy.ZC58(s)}},t.prototype.GJ68=function(t){this.GB96(t,P4.HH11)},t.prototype.GR19=function(t){this.proxy.ZE14(t)},t.prototype.GR20=function(t){this.GB96(t,P4.M64)},t.prototype.GW42=function(t){var e=this.gtM();e.curPos=t,e.notify("GW42")},t.prototype.GD73=function(t,e){this.gtM().GD73(t,e)},t.prototype.GP31=function(t){App.VM.open(O7.D90,t)},t.prototype.GP32=function(){App.VM.close(O7.D90)},t.prototype.GU84=function(){App.VM.open(O7.G19)},t.prototype.GU85=function(){App.VM.close(O7.G19)},t.prototype.GU86=function(){App.VM.open(O7.G99)},t.prototype.GU87=function(){App.VM.close(O7.G99)},t.prototype.GL45=function(t){App.VM.open(O7.C68,t)},t.prototype.GL46=function(){App.VM.close(O7.C68)},t.prototype.GL47=function(t){App.VM.open(O7.C69,t)},t.prototype.GL48=function(){App.VM.close(O7.C69)},t.prototype.GF92=function(t){App.VM.open(O7.A92,t)},t.prototype.GF93=function(){App.VM.close(O7.A92)},t.prototype.GN40=function(t,e){App.VM.open(O7.D44,t,e)},t.prototype.GN41=function(){App.VM.close(O7.D44)},t.prototype.GU88=function(){App.VM.open(O7.A31)},t.prototype.GR21=function(){App.VM.close(O7.A31)},t}(TE11);__reflect(TB83.prototype,"TB83");var HeroEquipData=function(){function t(t){this.power=0,this.ZG94(t),this.initDataByDb()}return t.prototype.initDataByDb=function(){var t=G8.FE5(this.tId);this.quality=t.quality},t.prototype.ZG94=function(t){this.tId=t.tid,this.uId=t.uid,this.pos=null!=t.pos?t.pos:this.pos,this.setPower()},t.prototype.setPower=function(){var t=G8.FE5(this.tId),e=M10.gAG(t.attr),i=G8.FI61(t.quality);this.power=Math.floor(e*i)},t}();__reflect(HeroEquipData.prototype,"HeroEquipData");var TE86=function(i){function t(t){var e=i.call(this,t)||this;return e.isLoadData=!1,e.awakeLv=1,e.curPos=0,e.isCostGoldAlert=!0,e.descomposeRed=0,e}return __extends(t,i),t.prototype.loadData=function(t){this.addEquip(t.el),this.equipSlots||(this.equipSlots={});for(var e=0;e<t.cl.length;e++){var i=t.cl[e];if(this.equipSlots[i.pos])this.equipSlots[i.pos].ZG94(i);else{var s=new HeroEquipSlot(i);this.equipSlots[i.pos]=s}}null!=t.pm&&this.setMasterLv(t.pm),null!=t.sm&&this.ZO79(t.sm),null!=t.am&&this.ZL63(t.am),this.ZG95()},t.prototype.setMasterLv=function(t){t>this.masterLv&&this.notify("masterLvUp"),this.masterLv=t},t.prototype.ZO79=function(t){t>this.starMasterLv&&this.notify("starMasterLvUp"),this.starMasterLv=t},t.prototype.ZL63=function(t){t>this.awakeLv&&(this.awakeLv=t,this.notify("setAwakeMasterLvUp")),this.awakeLv=t},t.prototype.addEquip=function(t){for(var e in this.allEquips||(this.allEquips={}),this.allEquips)var i=this.allEquips[e];for(var s=0;s<t.length;s++){i=t[s];if(this.allEquips[i.uid])this.allEquips[i.uid].ZG94(i);else{var o=new HeroEquipData(i);this.allEquips[i.uid]=o}}this.ZG95()},t.prototype.ZG95=function(){for(var t in this.isCanEquip=!1,this.allEquips){(e=this.allEquips[t]).isKeep=0}for(var t in this.equipSlots){var e=this.equipSlots[t],i=!1,s=void 0,o=void 0;for(var r in this.allEquips){var n=this.allEquips[r],a=G8.FE5(n.tId);0<n.pos||a.pos!=e.pos||(e.uId&&(o=this.allEquips[e.uId]),e.uId?n.quality>o.quality&&((!s||s.quality<a.quality)&&(s=n),i=!0):((!s||s.quality<a.quality)&&(s=n),i=!0))}s&&(s.isKeep=1),this.isCanEquip!=i&&1==i&&(this.isCanEquip=!0),this.equipSlots[t].ZL65(i)}},t.prototype.ZL64=function(t){t.ru&&this.removeEquip(t.ru),t.ec&&this.equipSlots[t.ec.pos].ZG94(t.ec),t.pm&&this.setMasterLv(t.pm),t.sm&&this.ZO79(t.sm),t.am&&this.ZL63(t.am)},t.prototype.removeEquip=function(t){for(var e in t){var i=t[e];this.allEquips[i]=null,delete this.allEquips[i]}this.ZG95()},t.prototype.ZO80=function(t){return!(!this.selectedList||0==this.selectedList.length)&&0<=this.selectedList.indexOf(t)},t.prototype.ZK76=function(t){(this.selectedList||(this.selectedList=[]),0<=this.selectedList.indexOf(t))||(6==this.allEquips[t].quality&&this.descomposeRed++,this.selectedList.push(t))},t.prototype.ZF1=function(t){if(this.selectedList&&0!=this.selectedList.length)for(var e=0;e<this.selectedList.length;e++)if(t==this.selectedList[e]){this.selectedList.splice(e,1),6==this.allEquips[t].quality&&this.descomposeRed--;break}},t.prototype.ZD15=function(t){this.breakCostItem||(this.breakCostItem=[]),0<=this.breakCostItem.indexOf(t)||this.breakCostItem.push(t)},t.prototype.ZB46=function(t){if(this.breakCostItem&&0!=this.breakCostItem.length)for(var e=0;e<this.breakCostItem.length;e++)if(t==this.breakCostItem[e]){this.breakCostItem.splice(e,1);break}},t.prototype.setCurPos=function(){for(var t in this.equipSlots){var e=this.equipSlots[t];if(e.uId&&0!=this.curPos){var i=this.equipSlots[this.curPos];this.curPos=null!=i.uId?this.curPos:e.pos}}if(this.breakCostItem&&this.breakCostItem.length)for(var s=0,o=this.breakCostItem;s<o.length;s++){var r=o[s],n=this.allEquips[r];if(n&&N12.gID(n.tId).pos!=this.curPos){this.breakCostItem=[];break}}this.curPos=0!=this.curPos?this.curPos:1},t.prototype.GD73=function(t,e){for(var i in this.allEquips){var s=this.allEquips[i];s.quality==t&&0==s.pos&&(e&&1!=s.isKeep?this.ZK76(s.uId):this.ZF1(s.uId))}},t.prototype.ZI90=function(){this.descomposeRed=0,this.selectedList&&0<this.selectedList.length&&this.selectedList.splice(0,this.selectedList.length)},t.prototype.ZF50=function(){for(var t in this.equipSlots){var e=this.equipSlots[t];if(e.uId){var i=this.allEquips[e.uId];for(var s in this.allEquips){var o=this.allEquips[s],r=N12.gID(o.tId);if(r.quality<=i.quality&&o.uId!=i.uId&&r.pos==i.pos&&r.quality<6)return 1}}else{var n=0;for(var s in this.allEquips){o=this.allEquips[s];var a=N12.gID(o.tId);if(a.pos==e.pos&&a.quality<6&&n++,1<n)return 1}}}return 0},t.prototype.ZX10=function(){var t=G8.gIV("polishID");N12.giC(t);for(var e in this.equipSlots){if(0<this.equipSlots[e].ZX10())return 1}return 0},t.prototype.ZX11=function(){var t=G8.gIV("starID");N12.giC(t);for(var e in this.equipSlots){if(0<this.equipSlots[e].ZX11())return 1}return 0},t.prototype.ZS65=function(){for(var t in this.equipSlots){if(0<this.equipSlots[t].ZS65(this))return 1}return 0},t.prototype.ZO81=function(){for(var t in this.equipSlots){if(0<this.equipSlots[t].ZO81(this))return 1}return 0},t.prototype.ZS66=function(){for(var t in this.equipSlots){if(this.equipSlots[t].isCanEquip)return 1}return 0},t.prototype.FL35=function(){return null!=TE88.FF14()?0:0<this.ZX10()?1:0<this.ZX11()?1:0<this.ZS65()?1:0<this.ZS66()?1:0<this.ZO81()?1:0},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TE86.prototype,"TE86");var TE87=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.S36,e.GJ66,e),e.rSM(P4.F42,e.GT24,e),e.rSM(P4.O79,e.GR16,e),e.rSM(P4.M62,e.GR18,e),e.rSM(P4.Q67,e.GT26,e),e.rSM(P4.HH11,e.GJ68,e),e.rSM(P4.E27,e.ZS67,e),e.rSM(P4.M64,e.GR20,e),e}return __extends(t,i),t.prototype.ZE13=function(){var t={type:P4.S35,body:{}};this.sSM(t)},t.prototype.GJ66=function(t){this.apF(G14.A19,t)},t.prototype.ZI91=function(){var t={type:P4.F41,body:{}};this.sSM(t)},t.prototype.GT24=function(t){this.apF(G14.A4,t)},t.prototype.ZG96=function(t,e){var i={type:P4.O78,body:{type:t,pos:e}};this.sSM(i)},t.prototype.GR16=function(t){this.apF(G14.A13,t)},t.prototype.ZG97=function(t){var e={type:P4.M61,body:{pos:t}};this.sSM(e)},t.prototype.GR18=function(t){this.apF(G14.A9,t)},t.prototype.ZI92=function(t,e){var i={type:P4.Q66,body:{pos:t,uids:e}};this.sSM(i)},t.prototype.GT26=function(t){this.apF(G14.A17,t)},t.prototype.ZC58=function(t){var e={type:P4.HH10,body:{uids:t}};this.sSM(e)},t.prototype.GJ68=function(t){this.apF(G14.A7,t)},t.prototype.ZG98=function(t){var e={type:P4.E26,body:{uid:t}};this.sSM(e)},t.prototype.ZS67=function(t){this.apF(G14.A2,t)},t.prototype.ZE14=function(t){var e={type:P4.M63,body:{pos:t}};this.sSM(e)},t.prototype.GR20=function(t){this.apF(G14.A11,t)},t}(TG80);__reflect(TE87.prototype,"TE87");var HeroEquipSlot=function(){function t(t){this.power=0,this.basePower=0,this.sandPower=0,this.starPower=0,this.breakPower=0,this.awakenPower=0,this.ZG94(t)}return t.prototype.ZG94=function(t){this.pos=null!=t.pos?t.pos:this.pos,this.uId=t.uid,this.sandLv=null!=t.lv?t.lv:this.sandLv,this.star=null!=t.star?t.star:this.star,t.breakLv&&(this.isBreakSuccess=t.breakLv>this.breakLv),this.breakLv=null!=t.breakLv?t.breakLv:this.breakLv,this.failNum=null!=t.fail?t.fail:this.failNum,this.awakenLv=null!=t.wlv?t.wlv:this.awakenLv,this.tId=t.tid,this.tId&&this.setPower()},t.prototype.ZL65=function(t){this.isCanEquip=t},t.prototype.setPower=function(){this.power=0;var t=G8.FE5(this.tId),e=G8.FI61(t.quality);if(0<this.sandLv){var i=G8.FC36(this.sandLv,t.pos,1),s=null;if(this.awakenLv){var o=P7.str2kv(i.attr2);s=M10.FHH18(o)}else s=M10.gAG(i.attr);this.sandPower=Math.floor(s*e)}if(0<this.star){var r=G8.FC36(this.star,t.pos,2),n=M10.gAG(r.attr);this.starPower=Math.floor(n*e)}if(this.basePower=M10.gAG(t.attr),this.basePower=Math.floor(this.basePower*e),0<this.breakLv){var a=G8.FC36(this.breakLv,t.pos,3);this.breakPower=M10.gAG(a.attr),this.basePower=this.basePower+Math.floor(this.basePower*(a.percentage/100)),this.sandPower=this.sandPower+Math.floor(this.sandPower*(a.percentage/100))}if(this.awakenLv){var h=G8.FC36(this.awakenLv,t.pos,E1.A3);this.awakenPower=M10.gAG(h.attr);i=G8.FC36(this.sandLv,t.pos,1),s=null,o=P7.str2kv(i.attr2);s=M10.FHH18(o)*Number(TE88.FHH46(t.pos).attr2),this.sandPower+=Math.floor(s);var p=M10.gAG(t.attr);this.sandPower+=Math.floor(p*Number(TE88.FHH46(t.pos).attr2))}this.power=this.power+this.basePower+this.sandPower+this.starPower+this.breakPower+this.awakenPower},t.prototype.ZX10=function(){var t=G8.gIV("polishID"),e=N12.giC(t);if(this.uId){var i=G8.FC36(this.sandLv+1,this.pos,1);if(i)if(i.cost<=e)return 1}return 0},t.prototype.ZX11=function(){var t=G8.gIV("starID"),e=N12.giC(t);if(this.uId){var i=G8.FC36(this.star+1,this.pos,2);if(i)if(i.cost<=e)return 1}return 0},t.prototype.ZS65=function(t){if(this.uId){var e=G8.FC36(this.breakLv+1,this.pos,3);if(e){var i=0;for(var s in t.allEquips){var o=t.allEquips[s],r=G8.FE5(o.tId);if(0==o.pos&&6==o.quality&&r.pos==this.pos&&i++,i>=e.cost)return 1}}}return 0},t.prototype.FL35=function(){if(0<this.ZX10())return 1;if(0<this.ZX11())return 1;var t=App.CM.gtM(O6.B26);return 0<this.ZS65(t)?1:void 0},t.prototype.ZO81=function(t){if(this.uId&&(6<=G8.FE5(this.tId).quality&&this.sandLv>=Number(G8.init.polishlv.value)&&this.breakLv>=Number(G8.init.breachlv.value)&&!this.awakenLv)){var e=0;for(var i in t.allEquips){var s=t.allEquips[i],o=G8.FE5(s.tId);0==s.pos&&6==s.quality&&o.pos==this.pos&&e++}if(N12.giC(Number(G8.init.awaID.value))>=Number(TE88.FHH46(this.pos).cost)&&Number(TE88.FHH46(this.pos).cost2)<=e)return 1}return 0},t}();__reflect(HeroEquipSlot.prototype,"HeroEquipSlot");var TE88=function(){function C(){}return C.FE6=function(t){var e=App.CM.gtM(O6.B26),i=[];for(var s in e.allEquips){var o=e.allEquips[s],r={data:N12.gID(o.tId),ct:0};i.push({itemData:r,isBottom:!0,scale:1,toResolve:t,selectState:!1})}return i.sort(function(t,e){return t.itemData.data.quality-e.itemData.data.quality}),i},C.FF12=function(t,e,i){var s=G8.FC36(t,e,3);if(s){var o=i*s.failure;return Math.min(s.probability+o,100)}},C.FF13=function(t){var e=App.CM.gtM(O6.B26),i=(e.equipSlots[e.curPos],0);for(var s in e.allEquips){var o=e.allEquips[s],r=N12.gID(o.tId);if(0==o.pos&&6==o.quality&&r.pos==e.curPos&&i++,t<=i)return!0}return!1},C.FC37=function(t){var e,i,s,o,r=App.CM.gtM(O6.B26),n={},a=0;if(t==E1.A4?(s=G8.FA28(r.masterLv,t),o=r.masterLv+1):t==E1.A5?(s=G8.FA28(r.starMasterLv,t),o=r.starMasterLv+1):t==E1.A3&&(s=G8.FA28(r.awakeLv,t),o=r.awakeLv+1),s){e={};var h=THH1.FI55(s.attraward);for(var p in h){var l=O4.FD72(parseInt(p)),c=parseInt(h[p]);e[p]={value:c,name:l}}a=s.lv,e.extra=s.describe}var u=G8.FA28(o,t);if(u){i={};var d=THH1.FI55(u.attraward);for(var p in d){var v=O4.FD72(parseInt(p));c=parseInt(d[p]);i[p]={value:c,name:v}}i.extra=u.describe,n={curData:e,nextData:i,needCurLv:a,needNextLv:u.lv}}else n={curData:e,needCurLv:s.lv};return n},C.FD16=function(t,e){var i=1,s=0,o=G8.FA28(t,e);o&&(s=M10.gAG(o.attraward),i=o.index+1);var r=G8.FA28(i,e),n=0;return r&&(n=M10.gAG(r.attraward)),Math.max(n-s,0)},C.FA96=function(t,e){var i=App.CM.gtM(O6.B26),s={};for(var o in i.equipSlots){var r=i.equipSlots[o];if(r.uId){var n=null;if(E1.A3!=t)if(e)n=r.awakenLv?C.FE8(E1.A3,r.uId,!1,!0):{curData:[]};else if(1==t&&r.awakenLv){n=C.FE8(E1.A3,r.uId,!1,!0);var a=C.FE8(E1.A6,r.uId),h=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value-=parseInt(i)};for(var p in a.curData)h(n.curData,p,a.curData[p].value)}else n=C.FE8(t,r.uId);else if(r.awakenLv){n={};var l=THH1.FI55(this.FHH46(Number(o)).attr),c={};for(var u in l){var d=O4.FD72(Number(u)),v=Number(l[u]);c[u]={value:v,name:d}}n.curData=c}else n={curData:[]};for(var f in n.curData){var g=n.curData[f];if(!s[f]){var m=K18.attribute[f].show;s[f]={value:0,name:g.name,show:m}}s[f].value+=g.value}}}return s},C.FA70=function(t){var e=App.CM.gtM(O6.B26),i=0;for(var s in e.equipSlots){if(e.equipSlots[s].uId){var o=0;switch(t){case E1.A1:case E1.A4:o=e.equipSlots[s].basePower+e.equipSlots[s].sandPower;break;case E1.A5:o=e.equipSlots[s].starPower;break;case E1.A2:o=e.equipSlots[s].breakPower;break;case E1.A3:o=e.equipSlots[s].awakenLv?e.equipSlots[s].awakenPower+e.equipSlots[s].basePower+e.equipSlots[s].sandPower:0;break;default:o=0}i+=o}}return Math.floor(i)},C.FA97=function(t){var e,i,s={},o=G8.FE5(t.tId),r=THH1.FI55(o.attr);for(var n in r){var a=O4.FD72(parseInt(n)),h=parseInt(r[n]);s[n]={value:h,name:a}}var p=G8.FI61(o.quality);if(0<t.sandLv){var l=G8.FC36(t.sandLv,o.pos,1),c=THH1.FI55(l.attr);for(var n in t.awakenLv&&(c=THH1.FI55(l.attr2)),c){var u=O4.FD72(parseInt(n));h=parseInt(c[n]);s[n]?s[n].value+=h:s[n]={value:h,name:u}}}for(var n in s){h=Math.floor(s[n].value*p);s[n].value=h}if(0<t.star){e={};var d=G8.FC36(t.star,o.pos,2);c=THH1.FI55(d.attr);for(var n in c){var v=O4.FD72(parseInt(n));h=Math.floor(parseInt(c[n])*p);e[n]={value:h,name:v}}}if(0<t.breakLv){i={};var f=G8.FC36(t.breakLv,o.pos,3);c=THH1.FI55(f.attr);for(var n in c){var g=O4.FD72(parseInt(n));h=parseInt(c[n]);i[n]={value:h,name:g}}for(var n in s){var m=s[n];s[n].value+=Math.floor(f.percentage/100*m.value)}}return{base:s,star:e,break:i}},C.FE7=function(t){var e=[];switch(t){case 1:for(var i=1;i<=2;i++){var s={},o={};switch(i){case 1:o=C.FA96(E1.A6),s.title=O3.tr(3630);break;case 2:o=C.FA96(E1.A4),s.title=O3.tr(3631)}var r=1;for(var n in o)s["value"+r]=O3.tr(1489,o[n].name,o[n].value),r++;1<r&&e.push(s)}break;case 2:s={},o={};o=C.FA96(E1.A5),s.title=O3.tr(3625);r=1;for(var n in o)s["value"+r]=O3.tr(1489,o[n].name,o[n].value),r++;1<r&&e.push(s);break;case 3:s={},o={};o=C.FA96(E1.A2),s.title=O3.tr(3626);r=1;for(var n in o)s["value"+r]=O3.tr(1489,o[n].name,o[n].value),r++;1<r&&e.push(s);break;case E1.A3:for(i=1;i<=2;i++){s={},o={};switch(i){case 1:o=C.FA96(E1.A4,!0),s.title=O3.tr(8032);break;case 2:o=C.FA96(E1.A3),s.title=O3.tr(7997)}r=1;for(var n in o)2!=i||o[n].show?s["value"+r]=O3.tr(1489,o[n].name,o[n].value):s["value"+r]=O3.tr(1489,o[n].name,100*o[n].value+"%"),r++;1<r&&e.push(s)}}return e},C.FA98=function(){var t=App.CM.gtM(O6.B26);if(t.selectedList&&0<t.selectedList.length)for(var e in t.allEquips){var i=t.allEquips[e];if(!(0<i.pos)&&(1==i.isKeep&&0<=t.selectedList.indexOf(i.uId))){var s=!1;for(var o in t.allEquips){var r=t.allEquips[o];r.tId==i.tId&&t.selectedList.indexOf(r.uId)<0&&(s=!0)}if(s)continue;var n=G8.FE5(i.tId);return t.equipSlots[n.pos].uId?2:1}}return 0},C.FE8=function(t,e,i,s){var o,r,n,a={};if(e){var h=App.CM.gtM(O6.B26),p=h.allEquips[e];o=N12.gID(p.tId);var l=h.equipSlots[o.pos];l.uId==e&&(r=l)}var c=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)};switch(t){case E1.A4:case E1.A5:case E1.A2:if(r){var u=0;if(1==t?u=r.sandLv:2==t?u=r.star:3==t&&(u=r.breakLv),A=G8.FC36(u,o.pos,t)){var d=null;for(var v in d=s?THH1.FI55(A.attr2):THH1.FI55(A.attr))c(a,v,d[v])}if(i){var f=G8.FC36(u+1,o.pos,t);if(f){n={};var g=null;for(var v in n={},g=s?THH1.FI55(f.attr2):THH1.FI55(f.attr))c(n,v,g[v])}if(!A)for(var v in n)a[v]={value:0,name:n[v].name}}}break;case E1.A6:d=THH1.FI55(o.attr);for(var v in d)c(a,v,d[v]);break;case E1.A1:var m=C.FE8(E1.A6,e),y=C.FE8(E1.A4,e,i);for(var v in i&&y.nextData&&(n={}),m.curData)c(a,v,m.curData[v].value),n&&c(n,v,m.curData[v].value);for(var v in y.curData)c(a,v,y.curData[v].value),n&&c(n,v,y.nextData[v].value);break;case E1.A3:m=C.FE8(E1.A6,e),y=C.FE8(E1.A4,e,i,!0);var A=G8.FC36(r.sandLv,o.pos,1);d=THH1.FI55(A.attr2);for(var v in i&&y.nextData&&(n={}),i&&n&&C.FI62(r.sandLv+1,o.pos,n,o),C.FI62(r.sandLv,o.pos,a,o),m.curData)c(a,v,m.curData[v].value),n&&c(n,v,m.curData[v].value);for(var v in y.curData)c(a,v,y.curData[v].value),n&&c(n,v,y.nextData[v].value);for(var v in d)c(a,v,parseInt(d[v])*Number(C.FHH46(o.pos).attr2)),n&&c(n,v,parseInt(d[v])*Number(C.FHH46(o.pos).attr2))}if(3!=t&&5!=t){var b=G8.FI61(o.quality);for(var v in a)a[v].value=Math.floor(b*a[v].value);if(n)for(var v in n)n[v].value=Math.floor(b*n[v].value)}if((1==t||4==t)&&r&&e&&0<r.breakLv&&r.uId){var T=G8.FC36(r.breakLv,r.pos,3);for(var v in a)a[v].value=a[v].value+Math.floor(a[v].value*(T.percentage/100));if(n)for(var v in n)n[v].value=n[v].value+Math.floor(n[v].value*(T.percentage/100))}return{curData:a,nextData:n}},C.FI62=function(t,e,i,s){var o=THH1.FI55(s.attr),r=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)};for(var n in o)r(i,n,parseInt(o[n])*Number(C.FHH46(e).attr2))},C.FHH46=function(t){var e=G8.awaken;for(var i in e)if(Number(e[i].pos)==t)return e[i]},C.FF14=function(){var t=O4.getLv(),e=parseInt(G8.gIV("lv")),i=parseInt(G8.gIV("days")),s=App.CM.gtM(O6.B43);return e<=t&&s.serOpenDay+1>=i?null:{lv:e,day:i}},C}();__reflect(TE88.prototype,"TE88");var AwakenMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SandMasterSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5105)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5106))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B26);this.ZO78(i),this.imgHead.source="v1_btn_jiaoxingdashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof TE86&&this.ZO78(t)},t.prototype.ZO78=function(t){var e=TE88.FC37(E1.A3),i=TE88.FD16(t.awakeLv,E1.A3);if(e.curData){var s=G8.awakening[e.needCurLv].awanum;this.lbNow.text=O3.tr(7999,s),this.lbNow.textColor=15587199,this.addAttrLb(e.curData,this.gpCur,3644,3647)}else this.gpAllCur.visible=this.gpAllCur.includeInLayout=!1,this.lbNow.text=O3.tr(7999,e.nextData);if(e.nextData){var o=14671836;e.curData||(o=14164514);s=G8.awakening[e.needNextLv].awanum;this.lbNext.text=O3.tr(7999,s),this.lbNext.textColor=o,this.addAttrLb(e.nextData,this.gpNext,3645,3648),this.lbAddPower.visible=!0,this.lbStatus.text=O3.tr(1110,t.awakeLv)}else this.gpAllNext.visible=this.gpAllNext.includeInLayout=!1,this.lbAddPower.visible=!1,this.lbStatus.text=O3.tr(1106,t.awakeLv);this.lbAddPower.text=O3.tr(1109,i)},t.prototype.addAttrLb=function(t,e,i,s){for(var o in t){var r=t[o],n=new eui.Label;n.size=20,"extra"==o||(n.textFlow=M18.FG71(O3.tr(i,r.name,r.value))),e.addChild(n)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B26,G14.A29)},t.prototype.close=function(){s.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(AwakenMasterView.prototype,"AwakenMasterView");var HeroEquipAwakenView=function(n){function t(t,e){return n.call(this,t,e)||this}return __extends(t,n),t.prototype.ZL66=function(t){this.LbSch1.visible=t,this.LbSch2.visible=t,this.itemGroup.visible=t,this.title1.visible=t,this.title2.visible=t,this.titleImage1.visible=t,this.gpAttr.visible=t,this.titleImage2.visible=t,this.awakenedImage.visible=t,this.lbCurExtraTitle.visible=t,this.lbNextExtraTitle.visible=t,this.btnDoSomething.visible=t},t.prototype.initUI=function(){n.prototype.initUI.call(this),this.title1.text=O3.tr(7996),this.title2.text=O3.tr(7997),this.lbNextTitle.textFlow=M18.HTP.parse("<font size='20'>"+O3.tr(1409)+"</font>"),this.lbCurTitle.text=O3.tr(6445),this.btnDoSomething.scaleX=this.btnDoSomething.scaleY=.9},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this),this.currentState="awaken",this.lbTitle.text=O3.tr(7351),this.btnDoSomething.label=O3.tr(7351),this.btnDoSomething.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.btnMonster.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS69,this);var i=App.CM.gtM(O6.B26);this.ZO78(i),this.btnMonster.bgStr="v1_btn_jiaoxingdashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TE86){switch(s){case"selectEquip":this.ZS68(t);break;case P4.M64:this.showEffect("wdsg_cgtx_s1_00001","Animation1");break;case"setAwakeMasterLvUp":App.THH33.aUE(this.btnMonster,"iconSkill",-50,-60,1),this.ZS69()}this.ZO78(t)}else{var o=App.CM.gtM(O6.B26);this.ZO78(o)}},t.prototype.ZO78=function(t){t.setCurPos();var e=t.equipSlots[t.curPos];if(e.uId){this.currentState="awaken",this.validateNow(),n.prototype.ZO78.call(this,t),P7.FD53(this.btnDoSomething,e.ZO81(t)),this.lbNextExtraTitle.size=18,this.lbCurExtraTitle.size=18,this.lbNextExtraTitle.text=O3.tr(3618,Number(100*TE88.FHH46(t.curPos).attr2));var i=P7.str2kv(TE88.FHH46(t.curPos).attr);this.lbCurExtraTitle.text=P7.FM5(i);if(e.awakenLv){this.ZO82(!1);var s=TE88.FE8(6,e.uId,!1);this.ZO83(s),this.gpCurAttr.visible=!1,this.imgNext.visible=!1,this.itemGroup.visible=!1,this.awakenedImage.visible=!0,this.btnDoSomething.visible=!1,this.gpAwakenAttr.visible=!0,this.title1.text=O3.tr(3624)}else{this.title1.text=O3.tr(7996);var o=G8.FE5(e.tId);if(6<=o.quality&&e.sandLv>=Number(G8.init.polishlv.value)&&e.breakLv>=Number(G8.init.breachlv.value)){var r=TE88.FE8(5,e.uId,!1);this.setAttrLabel(r),this.ZO82(!0);s=TE88.FE8(6,e.uId,!1);this.ZG99(s),this.newShowItem(e),this.gpCurAttr.visible=!0,this.gpAwakenAttr.visible=!1}else o.quality<6?this.titleTips.text=O3.tr(8001):this.titleTips.text=O3.tr(7998,G8.init.polishlv.value,G8.init.breachlv.value),this.ZL66(!1),this.titleTips.visible=!0,this.gpAwakenAttr.visible=!1}this.ZS68(t)}else this.currentState="none",n.prototype.ZO78.call(this,t)},t.prototype.ZO82=function(t){this.ZL66(!0),this.gpNextAttr.visible=t,this.imgNext.visible=t,this.LbSch1.visible=t,this.LbSch2.visible=t,this.itemGroup.visible=t,this.btnDoSomething.visible=t,this.awakenedImage.visible=!t,this.lbMaxLv.visible=!1,this.titleTips.visible=!1},t.prototype.ZS68=function(t){if(t.breakCostItem&&0<t.breakCostItem.length){var e=t.allEquips[t.breakCostItem[0]],i=N12.gID(e.tId);this.imgIcon.source=i.icon}else this.imgIcon.source="v1_img_jia_png"},t.prototype.newShowItem=function(t){if(this.itemGroup.visible){App.CM.gtM(O6.B26);if(!this.itemIcon){var e=new ItemHeroEquipPack;this.itemGroup.addChild(e),this.itemIcon=e;var i=new ItemIcon;this.itemGroup.addChild(i);var s=G8.init.awaID.value,o={itemData:{data:N12.gID(parseInt(s))},isBottom:!1};i.data=o}var r,n=t;r={itemData:{data:N12.gID(n.tId),ct:0},isBottom:!1,scale:1,isOffClick:!0},this.itemIcon.data=r;var a=this.getNum(t.pos);this.LbSch1.text=a+"/"+TE88.FHH46(t.pos).cost2,Number(TE88.FHH46(t.pos).cost2)<=a?this.LbSch1.textColor=752897:this.LbSch1.textColor=14164514;var h=N12.giC(Number(G8.init.awaID.value));this.LbSch2.text=h+"/"+TE88.FHH46(t.pos).cost,Number(TE88.FHH46(t.pos).cost)>h?this.LbSch2.textColor=14164514:this.LbSch2.textColor=752897}},t.prototype.getNum=function(t){var e=App.CM.gtM(O6.B26),i=0;for(var s in e.allEquips){var o=e.allEquips[s],r=G8.FE5(o.tId);0==o.pos&&6==o.quality&&r.pos==t&&i++}return i},t.prototype.setAttrLabel=function(t){var e=1;for(var i in t.curData){var s=t.curData[i];this["lbCurAttr"+e].size=18,this["lbCurAttr"+e].textFlow=M18.HTP.parse(O3.tr(3612,s.name,s.value)),this["lbCurAttr"+e].visible=!0,e++}for(;e<=4;e++)this["lbCurAttr"+e].visible=!1},t.prototype.ZG99=function(t){var e=1;for(var i in t.curData){var s=t.curData[i];this["lbNextAttr"+e].size=18,this["lbNextAttr"+e].textFlow=M18.HTP.parse(O3.tr(3612,s.name,s.value)),this["lbNextAttr"+e].visible=!0,e++}for(;e<=4;e++)this["lbNextAttr"+e].visible=!1},t.prototype.ZO83=function(t){var e=0;for(var i in t.curData){var s=t.curData[i];this["lbAwakenAttr"+e].size=18,this["lbAwakenAttr"+e].textFlow=M18.HTP.parse(O3.tr(3612,s.name,s.value)),this["lbAwakenAttr"+e].visible=!0,e++}for(;e<4;e++)this["lbAwakenAttr"+e].visible=!1},t.prototype.onClickBreak=function(){var t=App.CM.gtM(O6.B26),e=t.equipSlots[t.curPos],i=this.getNum(e.pos);N12.giC(Number(G8.init.awaID.value))>=Number(TE88.FHH46(e.pos).cost)&&Number(TE88.FHH46(e.pos).cost2)<=i?this.apF(G14.A10,t.curPos):P18.sDP(O3.tr(3649))},t.prototype.ZS69=function(){App.CM.apF(O6.B26,G14.A34)},t.prototype.onClickCheck=function(){App.CM.apF(O6.B26,G14.A14,E1.A3)},t.prototype.close=function(){this.btnDoSomething.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.itemGroup.removeChildren(),this.itemIcon=null},t}(HeroEquipView);__reflect(HeroEquipAwakenView.prototype,"HeroEquipAwakenView");var HeroEquipBreakView=function(p){function t(t,e){return p.call(this,t,e)||this}return __extends(t,p),t.prototype.initUI=function(){p.prototype.initUI.call(this),this.lbCurExtraTitle.text=O3.tr(3617),this.lbNextExtraTitle.text=O3.tr(3617)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];p.prototype.open.call(this),this.currentState="break",this.lbTitle.text=O3.tr(3605),this.btnDoSomething.label=O3.tr(3605),this.gpBreakIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this),this.btnDoSomething.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this);var i=App.CM.gtM(O6.B26);this.ZO78(i),this.btnMonster.visible=!1},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TE86){switch(s){case"selectEquip":this.ZS68(t);break;case P4.Q67:var o=t.equipSlots[t.curPos];o.isBreakSuccess?this.showEffect("wdsg_cgtx_s1_002","tpcg001"):this.showEffect("wdsg_tpsb_s2_001","Animation1"),o.isBreakSuccess=void 0}this.ZO78(t)}else{var r=App.CM.gtM(O6.B26);this.ZO78(r)}},t.prototype.ZO78=function(t){t.setCurPos();var e=t.equipSlots[t.curPos];if(e.uId){this.currentState="break",this.validateNow(),p.prototype.ZO78.call(this,t),P7.FD53(this.btnDoSomething,e.ZS65(t));var i=G8.FC36(e.breakLv,t.curPos,3),s=TE88.FE8(3,e.uId,!0),o=null!=i?i.percentage:0;this.lbCurExtra.text=O3.tr(3618,o);var r=void 0;if(s.nextData){var n=G8.FC36(e.breakLv+1,t.curPos,3),a=n.cost;this.needNum=a,this.lbNextExtra.text=O3.tr(3618,n.percentage),this.lbTip.textFlow=M18.FG71(O3.tr(3619,n.cost));var h=TE88.FF12(e.breakLv+1,t.curPos,e.failNum);this.lbPrecent.text=O3.tr(3620,h),r=!0}else r=!1;this.ZO82(r),this.setAttrLabel(s),this.ZS68(t)}else this.currentState="none",p.prototype.ZO78.call(this,t)},t.prototype.ZO82=function(t){this.lbNextExtra.visible=t,this.lbNextExtraTitle.visible=t,this.lbTip.visible=t,this.lbPrecent.visible=t,this.gpBreakIcon.visible=t,P16.sGF(this.btnDoSomething,!t),this.btnDoSomething.enabled=t},t.prototype.ZS68=function(t){if(t.breakCostItem&&0<t.breakCostItem.length){var e=t.allEquips[t.breakCostItem[0]],i=N12.gID(e.tId);this.imgIcon.source=i.icon}else this.imgIcon.source="v1_img_jia_png"},t.prototype.startUpgrade=function(t){var e=App.CM.gtM(O6.B26),i=G8.gIV("starID");1<=N12.giC(i)?this.apF(G14.A8,e.curPos):P18.sDP(O3.tr(3616))},t.prototype.onClickBreak=function(){var t=App.CM.gtM(O6.B26);t.breakCostItem&&0<t.breakCostItem.length?this.apF(G14.A16,t.curPos,t.breakCostItem):P18.sDP(O3.tr(3649))},t.prototype.onClickIcon=function(){if(TE88.FF13(this.needNum)){var t=App.CM.gtM(O6.B26);t.breakCostItem&&0<t.breakCostItem.length&&t.breakCostItem.splice(0,t.breakCostItem.length),App.CM.apF(O6.B26,G14.A20,this.needNum)}else P18.sDP(O3.tr(3649))},t.prototype.onClickCheck=function(){App.CM.apF(O6.B26,G14.A14,E1.A2)},t.prototype.close=function(){this.btnDoSomething.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this)},t}(HeroEquipView);__reflect(HeroEquipBreakView.prototype,"HeroEquipBreakView");var HeroEquipDetailView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroEquipDetailSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.uId=t[0],this.lbTitle1.text=O3.tr(3624),this.lbTitle2.text=O3.tr(3625),this.lbTitle3.text=O3.tr(3626),this.lbTitle4.text=O3.tr(1409),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this);var i=App.CM.gtM(O6.B26);this.ZO78(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof TE86&&this.ZO78(t)},t.prototype.ZO78=function(t){var e,i=t.allEquips[this.uId],s=N12.gID(i.tId);this.imgHead.source=s.icon,this.imgQuality.source=N12.FL5(i.tId),O5.FB13(this.lbName,s.name,s.quality);var o=M18.FL28(G8.gIV("position"),",");this.lbPos.textFlow=M18.FG71(O3.tr(3628,o[s.pos-1]));if(i.pos){if((e=t.equipSlots[i.pos]).sandLv,e.breakLv,this.lbLevel.textFlow=M18.FG71(O3.tr(3629,e.sandLv)),this.lbGrade.text=O3.tr(1126,e.basePower+e.sandPower),this.lbPower.text=e.power.toString(),0<e.star){for(var r=0;r<e.star;r++){this.gpStar.getChildAt(r).source="v1_img_star1_png"}for(r=e.star;r<10;r++){this.gpStar.getChildAt(r).source="v1_img_star2_png"}this.gpAttr2.visible=this.gpAttr2.includeInLayout=!0;var n=TE88.FE8(E1.A5,this.uId);this.addAttrLb(n.curData,this.gpUpStar)}else this.gpAttr2.visible=this.gpAttr2.includeInLayout=!1;if(0<e.breakLv){this.gpAttr3.visible=this.gpAttr3.includeInLayout=!0;n=TE88.FE8(E1.A2,this.uId);this.addAttrLb(n.curData,this.gpBreak);var a=G8.FC36(e.breakLv,e.pos,3),h="+"+(null!=a?a.percentage:0)+"%",p=new eui.Label;p.size=20,p.textFlow=M18.FG71(O3.tr(3627,O3.tr(3624),h)),this.gpBreak.addChild(p)}else this.gpAttr3.visible=this.gpAttr3.includeInLayout=!1;if(e.awakenLv){App.THH32.aUE(this.gpEff1,"wdsg_szjx_tkuang_lt_001",this.gpEff1.width/2,this.gpEff1.height/2,-1),App.THH32.aUE(this.gpEff2,"wdsg_szjx_tkuang_lt_002",this.gpEff2.width/2,this.gpEff2.height/2,-1),this.imgBg1.source="v1_bg_popup2_png",this.gpAttr4.visible=this.gpAttr4.includeInLayout=!0;var l=new eui.Label;l.size=20,l.textColor=9163477,l.textFlow=M18.FG71(O3.tr(3618,Number(100*TE88.FHH46(t.curPos).attr2)));var c=P7.str2kv(TE88.FHH46(t.curPos).attr),u=new eui.Label;u.size=20,u.textColor=9163477,u.textFlow=M18.FG71(P7.FM5(c)),this.gpBreak4.addChild(u),this.gpBreak4.addChild(l)}else this.imgBg1.source="v1_bg_popup_png",this.gpAttr4.visible=this.gpAttr4.includeInLayout=!1}else this.lbGrade.text=O3.tr(1126,i.power),this.lbLevel.visible=!1,this.lbPower.text=i.power.toString(),this.gpAttr2.visible=this.gpAttr2.includeInLayout=!1,this.gpAttr3.visible=this.gpAttr3.includeInLayout=!1;if(e&&e.awakenLv){var d=TE88.FE8(6,this.uId,!1);this.addAttrLb(d.curData,this.gpBase)}else{this.gpAttr4.visible=this.gpAttr4.includeInLayout=!1;n=TE88.FE8(E1.A1,this.uId);this.addAttrLb(n.curData,this.gpBase)}},t.prototype.addAttrLb=function(t,e){for(var i in t){var s=t[i],o=new eui.Label;o.size=20,o.textFlow=M18.FG71(O3.tr(3627,s.name,s.value)),e.addChild(o)}},t.prototype.onClickShow=function(){var t=P7.FF60(),e=N18.FC83(t);if(O4.getLv()<e.needlevel)P18.sDP(M18.format(K18.init.commonDesc1.value,[e.needlevel]));else{var i=App.CM.gtM(O6.C13).ZR28(F8.A22);if(0<i)P18.sDP(O3.tr(3637,i));else{var s=App.CM.gtM(O6.B26).allEquips[this.uId],o=N12.gID(s.tId),r=o.name,n=N18.FF97(o.quality),a=M18.format("$0,$1",[r,n.colour]),h={nid:F8.A22,channelId:t,param:a,infoId:this.uId};App.CM.apF(O6.C13,O12.A13,h)}}},t.prototype.closeSelf=function(){App.CM.apF(O6.B26,G14.A23)},t.prototype.close=function(){s.prototype.close.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this),App.THH32.rEf(this.gpEff1,"wdsg_szjx_tkuang_lt_001"),App.THH32.rEf(this.gpEff2,"wdsg_szjx_tkuang_lt_002")},t}(BaseEuiView);__reflect(HeroEquipDetailView.prototype,"HeroEquipDetailView");var HeroEquipIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName=HeroEquipIconSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.isOpen=!0},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),App.THH32.rEf(this.gpEff,"wdsg_shengzjuex_sa_001")},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){},t.prototype.dataChanged=function(){var t=0;switch(this.data.viewType){case"sand":t=this.data.equipData.ZX10();break;case"upStar":t=this.data.equipData.ZX11();break;case"break":var e=App.CM.gtM(O6.B26);t=this.data.equipData.ZS65(e);break;case"awaken":e=App.CM.gtM(O6.B26);t=this.data.equipData.ZO81(e);break;default:t=0<this.data.equipData.isCanEquip?1:0}t=t||this.data.equipData.isCanEquip,this.imgRed.visible=0<t;var i=!1;this.data.equipData.uId&&"awaken"==this.data.viewType&&((o=(e=App.CM.gtM(O6.B26)).allEquips[this.data.equipData.uId]).quality<6&&(i=!0));if(!this.data.equipData.uId||i){var s=G8.FD15(this.data.equipData.pos);this.imgIcon.source=s.icon,P16.sGF(this.imgIcon,!0),this.imgSel.visible=!1,this.gpStar.visible=!1,this.gpLv.visible=!1,this.lbName.visible=!1,this.imgBg.source=N12.getBox(1)}else{this.uId&&this.uId==this.data.equipData.uId||this.isOpen||App.THH32.aUE(this.gpIcon,"lg_qhyh_01",40,40,1),this.uId=this.data.equipData.uId,P16.sGF(this.imgIcon,!1);var o=(e=App.CM.gtM(O6.B26)).allEquips[this.data.equipData.uId];this.data.equipData.pos==e.curPos?this.imgSel.visible=!0:this.imgSel.visible=!1;s=G8.FE5(o.tId);this.imgIcon.source=s.icon,this.data.equipData.awakenLv?(this.imgBg.source="v1_img_kuang_hong2_png",App.THH32.rEf(this.gpEff,"wdsg_shengzjuex_sa_001"),App.THH32.aUE(this.gpEff,"wdsg_shengzjuex_sa_001",this.gpEff.width/2,this.gpEff.height/2,-1)):(this.imgBg.source=N12.getBox(s.quality),App.THH32.rEf(this.gpEff,"wdsg_shengzjuex_sa_001")),0<this.data.equipData.star&&(this.lbStar.text=this.data.equipData.star),this.gpStar.visible=0<this.data.equipData.star,0<this.data.equipData.sandLv&&(this.lbLv.text=this.data.equipData.sandLv),this.gpLv.visible=0<this.data.equipData.sandLv,0<this.data.equipData.breakLv&&(this.lbName.textFlow=M18.FG71(O3.tr(3615,this.data.equipData.breakLv))),this.lbName.visible=0<this.data.equipData.breakLv}this.isOpen=!1},t.prototype.oCI=function(){if(this.data.equipData.uId){App.CM.gtM(O6.B26).allEquips[this.data.equipData.uId];this.imgSel.visible?App.CM.apF(O6.B26,G14.A22,this.data.equipData.uId):(App.CM.apF(O6.B26,G14.A35,this.data.equipData.pos),this.imgSel.visible=!0)}},t}(eui.ItemRenderer);__reflect(HeroEquipIcon.prototype,"HeroEquipIcon");var HeroEquipMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.D90,O7.E39,"HeroEquipSandView",this.content),App.VM.rgS(O7.D90,O7.C67,"HeroEquipUpStarView",this.content),App.VM.rgS(O7.D90,O7.D43,"HeroEquipBreakView",this.content),App.VM.rgS(O7.D90,O7.C95,"HeroEquipAwakenView",this.content),this.title=O3.tr(1404);var t=[O3.tr(3602),O3.tr(2409),O3.tr(3601),O3.tr(7351)],e=[O7.E39,O7.C67,O7.D43,O7.C95];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),App.CM.gtM(O6.B26).setCurPos(),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.updateBtnRed();var i=t[0]||O7.E39;this.ZQ23(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];this.updateBtnRed()},t.prototype.ZQ23=function(t){switch(t){case O7.E39:this.title=O3.tr(3602),this.btnList.ZM66(t);break;case O7.C67:this.title=O3.tr(2409),this.btnList.ZM66(t);break;case O7.D43:this.title=O3.tr(3601),this.btnList.ZM66(t);break;case O7.C95:var e=App.CM.gtM(O6.B82),i=App.CM.gtM(O6.B43).serOpenDay+1;e.avatarInfo.l>=Number(G8.init.lv.value)&&i>=Number(G8.init.days.value)?(this.title=O3.tr(7351),this.btnList.ZM66(t)):P18.sDP(O3.tr(5054,G8.init.days.value,G8.init.lv.value))}},t.prototype.updateBtnRed=function(){var t=App.CM.gtM(O6.B26);this.btnList.ZHH58(O7.E39,t.isCanEquip?1:t.ZX10()),this.btnList.ZHH58(O7.C67,t.isCanEquip?1:t.ZX11()),this.btnList.ZHH58(O7.D43,t.isCanEquip?1:t.ZS65()),this.btnList.ZHH58(O7.C95,t.isCanEquip?1:t.ZO81())},t.prototype.openHelpView=function(){var t,e;switch(this.btnList.getCurView()){case O7.E39:t=O3.tr(3638),e=O3.tr(3634);break;case O7.C67:t=O3.tr(3639),e=O3.tr(3635);break;case O7.D43:t=O3.tr(3640),e=O3.tr(3636);break;default:return}var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t.prototype.close=function(){s.prototype.close.call(this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.content.removeChildren(),App.CM.gtM(O6.B26).curPos=0},t.prototype.destroy=function(){},t}(BasePanelView);__reflect(HeroEquipMainView.prototype,"HeroEquipMainView");var HeroEquipPackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroEquipPackSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.listContent.dataProvider=this.dataSource=new eui.ArrayCollection(this.listData),this.listContent.itemRenderer=ItemHeroEquipPack,this.cbPurple.label=O3.tr(3984),this.cbOrange.label=O3.tr(3985),this.cbRed.label=O3.tr(3986)},t.prototype.open=function(){this.currentState="unResolve",this.lbTip.text=O3.tr(3609),this.btnSmelt.label=O3.tr(2707),this.btnSmelt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS72,this),this.cbPurple.addEventListener(egret.Event.CHANGE,this.ZS70,this),this.cbOrange.addEventListener(egret.Event.CHANGE,this.ZS71,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.onChangeRed,this);var t=App.CM.gtM(O6.B26);this.ZO78(t)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TE86&&this.ZO78(t)},t.prototype.ZO78=function(t){this.initList(t),P7.FD53(this.btnSmelt,t.ZF50())},t.prototype.initList=function(t){this.listData=[];var e=!0;for(var i in P7.FM14()&&(e=!1),t.allEquips){var s=t.allEquips[i],o=t.equipSlots[s.pos];if(0==s.pos||o&&o.uId!=s.uId){var r={data:N12.gID(s.tId),ct:0};this.listData.push({itemData:r,isBottom:e,scale:1,toResolve:"resolve"==this.currentState,selectState:t.ZO80(s.uId),uId:s.uId,isKeep:s.isKeep,fl:1})}}this.listData.sort(function(t,e){return t.itemData.data.quality!=e.itemData.data.quality?t.itemData.data.quality-e.itemData.data.quality:t.itemData.data.pos==e.itemData.data.pos?t.isKeep-e.isKeep:t.itemData.data.pos-e.itemData.data.pos}),this.dataSource.replaceAll(this.listData)},t.prototype.ZD16=function(t,e){for(var i in App.CM.apF(O6.B26,G14.A5,t,e),this.listData){var s=this.listData[i];s.itemData.data.quality==t&&s.selectState!=e&&0==s.isKeep&&(s.selectState=e),s.toResolve="resolve"==this.currentState,this.dataSource.itemUpdated(s)}},t.prototype.ZS70=function(){this.ZD16(4,this.cbPurple.selected),TG40.playClickEffect()},t.prototype.ZS71=function(){this.ZD16(5,this.cbOrange.selected),TG40.playClickEffect()},t.prototype.onChangeRed=function(){this.ZD16(6,this.cbRed.selected),TG40.playClickEffect()},t.prototype.changeState=function(t){(this.currentState=t,"unResolve"==this.currentState)&&(this.ZD16(4,!1),this.ZD16(5,!1),this.ZD16(6,!1),this.btnSmelt.label=O3.tr(2707),App.CM.gtM(O6.B26).ZI90())},t.prototype.ZS72=function(){if(null==TE88.FF14()){if("unResolve"==this.currentState)this.currentState="resolve",this.btnSmelt.label=O3.tr(3608),this.cbPurple.selected=!0,this.ZD16(4,!0),this.cbOrange.selected=!0,this.ZD16(5,!0),App.CM.apF(O6.B26,G14.A5,4,!0),App.CM.apF(O6.B26,G14.A5,5,!0);else if("resolve"==this.currentState){var t=function(){App.CM.apF(O6.B26,G14.A6)},e=void 0;if(0<App.CM.gtM(O6.B26).descomposeRed)e=M18.FG71(O3.tr(3633));else{var i=TE88.FA98();1==i?e=M18.FG71(O3.tr(3643)):2==i&&(e=M18.FG71(O3.tr(3642)))}e?App.VM.open(O7.HH38,e,this,t):t()}}else P18.sDP(O3.tr(5053))},t.prototype.close=function(){s.prototype.close.call(this),this.dataSource.removeAll(),this.btnSmelt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS72,this),App.CM.gtM(O6.B26).ZI90()},t}(BaseEuiView);__reflect(HeroEquipPackView.prototype,"HeroEquipPackView");var HeroEquipSandView=function(h){function t(t,e){return h.call(this,t,e)||this}return __extends(t,h),t.prototype.initUI=function(){h.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.prototype.open.call(this),this.currentState="sand",this.lbTitle.text=O3.tr(3603),this.btnDoSomething.label=O3.tr(3603),this.btnDoSomething.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSand,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.btnMonster.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS69,this);var i=App.CM.gtM(O6.B26);this.ZO78(i),this.btnMonster.bgStr="v1_btn_damodashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(h.prototype.uBM.call(this,t,e),t instanceof TE86){this.ZO78(t);var s=e[0];s==P4.O79&&this.showEffect("wdsg_cgtx_s1_002","gzcg002"),"masterLvUp"==s&&App.THH33.aUE(this.btnMonster,"iconSkill",-50,-60,1)}else{var o=App.CM.gtM(O6.B26);this.ZO78(o)}},t.prototype.ZO78=function(t){t.setCurPos();var e=t.equipSlots[t.curPos];if(e.uId){"sand"!=this.currentState&&(this.currentState="sand",this.validateNow()),h.prototype.ZO78.call(this,t),P7.FD53(this.btnDoSomething,e.ZX10());var i=G8.gIV("polishID"),s=G8.FC36(e.sandLv+1,t.curPos,1);if(s){var o=s.cost,r=N12.gID(i),n=N12.giC(i);this.imgGood.setData(r),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.text=n+"/"+o,this.lbCostGood.textColor=o<=n?_cc.dgreen:_cc.red,this.gpCost.visible=!0,this.btnDoSomething.visible=!0}else this.gpCost.visible=!1,this.btnDoSomething.visible=!1;if(e.awakenLv){var a=TE88.FE8(6,e.uId,!0,!0);this.setAttrLabel(a)}else{a=TE88.FE8(5,e.uId,!0);this.setAttrLabel(a)}}else this.currentState="none",h.prototype.ZO78.call(this,t)},t.prototype.startUpgrade=function(t){var e=App.CM.gtM(O6.B82),i=App.CM.gtM(O6.B26),s=i.equipSlots[i.curPos],o=G8.FC36(s.sandLv+1,i.curPos,1).cost,r=G8.gIV("polishID"),n=0,a=N12.giC(r);(o<=a&&(n=1),n)||(this.cbAutoSmelt.selected?N15.FB92(r)*o<=e.avatarInfo.g?n=3:P7.FA78():App.VM.open(O7.G87,r,o-a));n&&this.apF(G14.A12,n,i.curPos)},t.prototype.ZX12=function(){var t=this,e=App.CM.gtM(O6.B26);if(e.isCostGoldAlert){App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){t.startUpgrade(!0),e.isCostGoldAlert=!1})}else this.startUpgrade(!0)},t.prototype.onClickSand=function(){this.startUpgrade(!1)},t.prototype.onClickCheck=function(){App.CM.apF(O6.B26,G14.A14,E1.A4)},t.prototype.ZS69=function(){App.CM.apF(O6.B26,G14.A30)},t.prototype.close=function(){this.btnDoSomething.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSand,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.btnMonster.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS69,this)},t}(HeroEquipView);__reflect(HeroEquipSandView.prototype,"HeroEquipSandView");var HeroEquipSelectView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroEquipSelectSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.title=O3.tr(3606),this.dlg.strBtnOK=O3.tr(1141),this.itemCollection=new eui.ArrayCollection,this.listContent.dataProvider=this.itemCollection,this.listContent.itemRenderer=ItemHeroEquipPack,this.scList.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.need=t[0],this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.ZU35.bind(this),this);var i=App.CM.gtM(O6.B26);this.ZO78(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TE86&&this.ZO78(t)},t.prototype.ZO78=function(t){var e=[];for(var i in t.allEquips){var s=t.allEquips[i],o=N12.gID(s.tId);if(0==s.pos&&6==s.quality&&o.pos==t.curPos){var r={data:o,ct:0};e.push({itemData:r,isBottom:!0,scale:1,uId:s.uId})}}this.itemCollection.replaceAll(e)},t.prototype.ZU35=function(){for(var t=this.itemCollection.source,e=App.CM.gtM(O6.B26),i=0;i<this.need;i++)e.ZD15(t[i].uId);e.notify("selectEquip"),this.closeSelf()},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.closeSelf=function(){App.CM.apF(O6.B26,G14.A21)},t}(BaseEuiView);__reflect(HeroEquipSelectView.prototype,"HeroEquipSelectView");var HeroEquipShareView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HeroEquipDetailSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.equipData=t[0],this.itemData=t[1],this.lbTitle1.text=O3.tr(3624),this.lbTitle2.text=O3.tr(3625),this.lbTitle3.text=O3.tr(3626),this.lbTitle4.text=O3.tr(1409),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnShow.visible=!1,this.gpNull.includeInLayout=!1,this.GX5()},t.prototype.GX5=function(){var t,e;if(this.equipData)t=N12.gID(this.equipData.tId),e=this.equipData;else{var i={pos:(t=this.itemData).pos,tid:this.itemData.id};e=new HeroEquipSlot(i)}this.imgHead.source=t.icon,this.imgQuality.source=N12.FL5(e.tId),O5.FB13(this.lbName,t.name,t.quality);var s=TE88.FA97(e);this.addAttrLb(s.base,this.gpBase);var o=M18.FL28(G8.gIV("position"),",");if(this.lbPos.textFlow=M18.FG71(O3.tr(3628,o[t.pos-1])),this.lbGrade.text=O3.tr(1126,e.basePower+e.sandPower),this.lbPower.text=e.power.toString(),e.sandLv?(this.lbLevel.visible=!0,this.lbLevel.textFlow=M18.FG71(O3.tr(3629,e.sandLv))):this.lbLevel.visible=!1,0<e.star){for(var r=0;r<e.star;r++){this.gpStar.getChildAt(r).source="v1_img_star1_png"}for(r=e.star;r<10;r++){this.gpStar.getChildAt(r).source="v1_img_star2_png"}this.gpAttr2.visible=this.gpAttr2.includeInLayout=!0,this.addAttrLb(s.star,this.gpUpStar)}else this.gpAttr2.visible=this.gpAttr2.includeInLayout=!1;if(0<e.breakLv){this.gpAttr3.visible=this.gpAttr3.includeInLayout=!0,this.addAttrLb(s.break,this.gpBreak);var n=G8.FC36(e.breakLv,t.pos,3),a="+"+(null!=n?n.percentage:0)+"%",h=new eui.Label;h.size=20,h.textFlow=M18.FG71(O3.tr(3627,O3.tr(3624),a)),this.gpBreak.addChild(h)}else this.gpAttr3.visible=this.gpAttr3.includeInLayout=!1;if(e.awakenLv){var p=G8.FE5(e.tId);this.gpAttr4.visible=this.gpAttr4.includeInLayout=!0,this.imgBg1.source="v1_bg_popup2_png",App.THH32.aUE(this.gpEff1,"wdsg_szjx_tkuang_lt_001",this.gpEff1.width/2,this.gpEff1.height/2,-1),App.THH32.aUE(this.gpEff2,"wdsg_szjx_tkuang_lt_002",this.gpEff2.width/2,this.gpEff2.height/2,-1);var l=new eui.Label;l.size=20,l.textColor=9163477,l.textFlow=M18.FG71(O3.tr(3618,Number(100*TE88.FHH46(p.pos).attr2)));i=P7.str2kv(TE88.FHH46(p.pos).attr);var c=new eui.Label;c.size=20,c.textColor=9163477,c.textFlow=M18.FG71(P7.FM5(i)),this.gpBreak4.addChild(c),this.gpBreak4.addChild(l)}else this.imgBg1.source="v1_bg_popup_png",this.gpAttr4.visible=this.gpAttr4.includeInLayout=!1},t.prototype.addAttrLb=function(t,e){for(var i in t){var s=t[i],o=new eui.Label;o.size=20,o.textFlow=M18.FG71(O3.tr(3627,s.name,s.value)),e.addChild(o)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B26,G14.A25)},t.prototype.close=function(){s.prototype.close.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),App.THH32.rEf(this.gpEff1,"wdsg_szjx_tkuang_lt_001"),App.THH32.rEf(this.gpEff2,"wdsg_szjx_tkuang_lt_002")},t}(BaseEuiView);__reflect(HeroEquipShareView.prototype,"HeroEquipShareView");var HeroEquipTotalAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.type=t[0],this.gpHName.visible=!0,this.gpWName.visible=!1,this.GX5()},t.prototype.GX5=function(){var t=O3.tr(3632);this.lbPowerTop.$setText(TE88.FA70(this.type).toString()),this.setDlgInfo(G14.A15,t,!1,O6.B26),this.setListView();var e=THH1.FE4();this.GY15(e)},t.prototype.setListView=function(){var t=TE88.FE7(this.type);this.dataSource.replaceAll(t)},t}(HeroInfoBaseView);__reflect(HeroEquipTotalAttrView.prototype,"HeroEquipTotalAttrView");var HeroEquipUpStarView=function(p){function t(t,e){return p.call(this,t,e)||this}return __extends(t,p),t.prototype.initUI=function(){p.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];p.prototype.open.call(this),this.currentState="upStar",this.lbTitle.text=O3.tr(3604),this.btnDoSomething.label=O3.tr(3604),this.btnDoSomething.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX13,this);var i=App.CM.gtM(O6.B26);this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.btnMonster.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS69,this),this.ZO78(i),this.btnMonster.bgStr="v1_btn_shengxingdashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(p.prototype.uBM.call(this,t,e),t instanceof TE86){this.ZO78(t);var s=e[0];s==P4.M62&&this.showEffect("wdsg_cgtx_s1_002","sxcg003"),"starMasterLvUp"==s&&App.THH33.aUE(this.btnMonster,"iconSkill",-50,-60,1)}else{var o=App.CM.gtM(O6.B26);this.ZO78(o)}},t.prototype.ZO78=function(t){t.setCurPos();var e=t.equipSlots[t.curPos];if(e.uId){"upStar"!=this.currentState&&(this.currentState="upStar",this.validateNow()),p.prototype.ZO78.call(this,t),P7.FD53(this.btnDoSomething,e.ZX11());var i=G8.gIV("starID"),s=G8.FC36(e.star+1,t.curPos,2);if(s){var o=s.cost,r=N12.gID(i),n=N12.giC(i);this.imgGood.setData(r),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.text=n+"/"+o,this.lbCostGood.textColor=o<=n?_cc.dgreen:_cc.red,this.gpCost.visible=!0,this.btnDoSomething.visible=!0}else this.gpCost.visible=!1,this.btnDoSomething.visible=!1;var a=TE88.FE8(2,e.uId,!0);this.setAttrLabel(a);for(var h=0;h<e.star;h++){this.gpStar.getChildAt(h).source="v1_img_star1_png"}for(h=e.star;h<10;h++){this.gpStar.getChildAt(h).source="v1_img_star2_png"}}else this.currentState="none",p.prototype.ZO78.call(this,t)},t.prototype.ZX13=function(){var t=App.CM.gtM(O6.B26),e=G8.gIV("starID");1<=N12.giC(e)?this.apF(G14.A8,t.curPos):P18.sDP(O3.tr(3616))},t.prototype.onClickCheck=function(){App.CM.apF(O6.B26,G14.A14,E1.A5)},t.prototype.ZS69=function(){App.CM.apF(O6.B26,G14.A32)},t.prototype.close=function(){this.btnDoSomething.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX13,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.btnMonster.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS69,this)},t}(HeroEquipView);__reflect(HeroEquipUpStarView.prototype,"HeroEquipUpStarView");var ItemHeroEquipPack=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.open=function(){this.cbOn.visible=!0,this.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.cbOn.addEventListener(egret.Event.CHANGE,this.ZU35,this)},t.prototype.close=function(){this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.cbOn.visible=this.data.toResolve,this.data.toResolve?this.cbOn.selected=this.data.selectState:this.cbOn.selected=!1;var t=App.CM.gtM(O6.B26);this.cbOn.selected?t.ZK76(this.data.uId):t.ZF1(this.data.uId),this.isOffClick=this.data.isOffClick},t.prototype.ZU35=function(){if(!this.isOffClick){var t=App.CM.gtM(O6.B26);this.data.selectState=this.cbOn.selected,this.cbOn.selected?t.ZK76(this.data.uId):t.ZF1(this.data.uId)}},t.prototype.oCI=function(){this.isOffClick||App.CM.apF(O6.B26,G14.A22,this.data.uId)},t}(ItemIcon);__reflect(ItemHeroEquipPack.prototype,"ItemHeroEquipPack");var SandMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SandMasterSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5105)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5106))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B26);this.ZO78(i),this.imgHead.source="v1_btn_damodashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof TE86&&this.ZO78(t)},t.prototype.ZO78=function(t){var e=TE88.FC37(E1.A4),i=TE88.FD16(t.masterLv,E1.A4);if(e.curData?(this.lbNow.textFlow=M18.FG71(O3.tr(3646,"EDD77F",e.needCurLv)),this.addAttrLb(e.curData,this.gpCur,3644,3647)):this.gpAllCur.visible=this.gpAllCur.includeInLayout=!1,e.nextData){var s="DFDFDC";e.curData||(s="d82222"),this.lbNext.textFlow=M18.FG71(O3.tr(3646,s,e.needNextLv)),this.addAttrLb(e.nextData,this.gpNext,3645,3648),this.lbAddPower.visible=!0,this.lbStatus.text=O3.tr(1110,t.masterLv)}else this.gpAllNext.visible=this.gpAllNext.includeInLayout=!1,this.lbAddPower.visible=!1,this.lbStatus.text=O3.tr(1106,t.masterLv);this.lbAddPower.text=O3.tr(1109,i)},t.prototype.addAttrLb=function(t,e,i,s){for(var o in t){var r=t[o],n=new eui.Label;n.size=20,n.textFlow="extra"==o?M18.FG71(O3.tr(s,r)):M18.FG71(O3.tr(i,r.name,r.value)),e.addChild(n)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B26,G14.A31)},t.prototype.close=function(){s.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(SandMasterView.prototype,"SandMasterView");var StarMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SandMasterSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5105)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5106))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B26);this.ZO78(i),this.imgHead.source="v1_btn_shengxingdashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof TE86&&this.ZO78(t)},t.prototype.ZO78=function(t){var e=TE88.FC37(E1.A5),i=TE88.FD16(t.starMasterLv,E1.A5);if(e.curData?(this.lbNow.textFlow=M18.FG71(O3.tr(5398,"EDD77F",e.needCurLv)),this.addAttrLb(e.curData,this.gpCur,3644,3647)):this.gpAllCur.visible=this.gpAllCur.includeInLayout=!1,e.nextData){var s="DFDFDC";e.curData||(s="d82222"),this.lbNext.textFlow=M18.FG71(O3.tr(5398,s,e.needNextLv)),this.addAttrLb(e.nextData,this.gpNext,3645,3648),this.lbAddPower.visible=!0,this.lbStatus.text=O3.tr(1110,t.starMasterLv)}else this.gpAllNext.visible=this.gpAllNext.includeInLayout=!1,this.lbAddPower.visible=!1,this.lbStatus.text=O3.tr(1106,t.starMasterLv);this.lbAddPower.text=O3.tr(1109,i)},t.prototype.addAttrLb=function(t,e,i,s){for(var o in t){var r=t[o],n=new eui.Label;n.size=20,n.textFlow="extra"==o?M18.FG71(O3.tr(s,r)):M18.FG71(O3.tr(i,r.name,r.value)),e.addChild(n)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B26,G14.A33)},t.prototype.close=function(){s.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(StarMasterView.prototype,"StarMasterView");var TE89=function(){function a(){}return a.FK35=function(t){a.init=t.Illustration_init,a.base=t.Illustration_base,a.summon=t.Illustration_summon,a.level=t.Illustration_level,a.star=t.Illustration_star,a.fate=t.Illustration_fate,a.fate_level=t.Illustration_fate_level},a.FHH47=function(t){return a.fate[t]},a.FHH48=function(t){return a.base[t]},a.FF15=function(){return a.base},a.FG29=function(t,e){return 1==t?N12.giC(a.init.illustrationAdvItem.value)+"/"+a.level[e].reqnum:a.level[e].cash},a.FG30=function(t){return a.level[t]},a.FI63=function(t,e){return 10==e?0:a.star[e+10*(t-2)+1].reqnum},a.FHH49=function(t,e){return a.star[e+10*(t-2)+1]},a.FHH50=function(t){return a.fate_level[t]},a.FJ86=function(t){if(null!=t&&null!=t){"string"!=typeof t&&(t=String(t));var e=a.FHH48(t);if(e&&e.icon)return RES.hasRes(e.icon)?e.icon:""}},a.FJ83=function(t){var e=[],i=1,s=a.summon;for(var o in t&&(i=2),s)if(s[o].type==i){var r=s[o].item,n={info:a.base[r+""],pro:s[o].chance};e.push(n)}return e},a.FK92=function(t){var e=[],i=[],s=[],o=App.CM.gtM(O6.B56);for(var r in t.sort(function(t,e){return t.t-e.t}),t){var n=o.isAcType(t[r].t);n&&-1==e.indexOf(t[r])&&(this.getType(n)?i.push(t[r]):s.push(t[r]))}for(var r in a.Sorting(e,i),i=[],t)o.briefArr[t[r].t+""]&&-1==e.indexOf(t[r])&&!o.isAcType(t[r].t)&&i.push(t[r]);for(var r in a.Sorting(e,i),a.Sorting(e,s),i=[],t)o.briefArr[t[r].t+""]||-1!=e.indexOf(t[r])||i.push(t[r]);return a.Sorting(e,i),e},a.getType=function(t){var e=App.CM.gtM(O6.B56),i=a.FHH48(t.t);if(e.viewType){var s=N12.giC(a.init.illustrationAdvItem.value),o=N12.giC(75002),r=a.level[t.l+1]&&a.level[t.l+1].reqnum;if((a.level[t.l+1]&&a.level[t.l+1].cash)<=o&&r<=s&&t.l<80)return!0}else{if((e.briefArr[t.t+""]?e.briefArr[t.t+""]:0)>=a.FI63(i.startype,t.s)&&t.s<10)return!0}return!1},a.Sorting=function(t,e){for(var i in e.sort(function(t,e){return e.info.quality-t.info.quality}),e)t.push(e[i])},a}();__reflect(TE89.prototype,"TE89");var J4=function(){function t(){}return t.A26=12001,t.A24=12002,t.A28=12003,t.A27=12004,t.A16=12005,t.A14=12006,t.A19=12007,t.A20=12008,t.A17=12009,t.A18=12010,t.A3=12011,t.A4=12012,t.A9=12013,t.A10=12014,t.A5=12015,t.A6=12016,t.A7=12017,t.A8=12018,t.A11=12019,t.A12=12020,t.A15=12021,t.A21=12022,t.A1=12023,t.A2=12024,t.A13=12025,t.A22=12026,t.A25=12027,t.A23=12028,t}();__reflect(J4.prototype,"J4");var TC25=function(s){function t(){var t=s.call(this)||this,e=new TF41(t);e.aLV(O7.I32),e.aLV(O7.I64),e.aLV(O7.HH30),e.aLV(O7.D71),e.aLV(O7.HH13),e.aLV(O7.D72),e.aLV(O7.F43),e.aLV(O7.C22);var i=t.proxy=new TF42(t);return t.rgF(J4.A19,i.loadState,i),t.rgF(J4.A17,i.extraction,i),t.rgF(J4.A3,i.GX64,i),t.rgF(J4.A9,i.upgrade,i),t.rgF(J4.A5,i.upStar,i),t.rgF(J4.A7,i.ZS74,i),t.rgF(J4.A11,i.upFate,i),t.rgF(J4.A1,i.decom,i),t.rgF(J4.A20,t.GU20,t),t.rgF(J4.A18,t.GY52,t),t.rgF(J4.A4,t.GX64,t),t.rgF(J4.A10,t.GX65,t),t.rgF(J4.A6,t.GW44,t),t.rgF(J4.A8,t.actFate,t),t.rgF(J4.A12,t.GW45,t),t.rgF(J4.A2,t.GU89,t),App.VM.register(O7.I32,"HeroStarMainView",t,K17.UI_Main),t.rgF(J4.A26,t.GX62,t),t.rgF(J4.A24,t.GW43,t),App.VM.register(O7.E59,"HeroStarRewarView",t,K17.UI_Main_TOP),t.rgF(J4.A25,t.GT27,t),t.rgF(J4.A23,t.GR23,t),App.VM.register(O7.C90,"HeroStarPreviewView",t,K17.UI_Main_TOP),t.rgF(J4.A28,t.GP33,t),t.rgF(J4.A27,t.GN42,t),App.VM.register(O7.C91,"HeroStarDatailsView",t,K17.UI_Tips),t.rgF(J4.A16,t.GE67,t),t.rgF(J4.A14,t.GD74,t),t.rgF(J4.A15,t.GX63,t),t.rgF(J4.A21,t.GN43,t),t.rgF(J4.A13,t.GL49,t),t.rgF(J4.A22,t.GR22,t),t}return __extends(t,s),t.prototype.GX62=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B43).serOpenDay+1;t.avatarInfo.l>=Number(TE89.init.openLevel.value)&&e>=Number(TE89.init.openDay.value)?App.VM.open(O7.I32):P18.sDP(O3.tr(5054,TE89.init.openDay.value,TE89.init.openLevel.value))},t.prototype.GR22=function(){var t=App.VM.gOV(O7.I32);t&&t.openView()},t.prototype.GW43=function(){App.VM.close(O7.I32)},t.prototype.GP33=function(){App.VM.open(O7.C90)},t.prototype.GN42=function(){App.VM.close(O7.C90)},t.prototype.GE67=function(t){App.VM.open(O7.C91,t)},t.prototype.GD74=function(){App.VM.close(O7.C91)},t.prototype.GT27=function(){App.VM.open(O7.E59)},t.prototype.GR23=function(){App.VM.close(O7.E59)},t.prototype.GX63=function(t){App.VM.gOV(O7.F43).cancelSelect(t)},t.prototype.GN43=function(){var t=null;(t=App.VM.gOV(O7.D72))||(t=App.VM.gOV(O7.HH13)),t.cancelSelect()},t.prototype.GL49=function(){App.VM.gOV(O7.C22).initGetNum()},t.prototype.GU20=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify(J4.A18)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY52=function(t,e){var i=this.gtM();if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void(i.intheRun=!1);t.body.t=e,i.setData(t.body),App.VM.gOV(O7.D71).summonAction(),i.notify(J4.A18)},t.prototype.GX64=function(t){if(200==t.head.state){var e=this.gtM();e.processData(t.body),e.notify(J4.A3)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX65=function(t){if(200==t.head.state){var e=this.gtM();e.setLvUpInfo(t.body),e.notify(J4.A10)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW44=function(t){if(200==t.head.state){var e=this.gtM();e.setLvUpInfo(t.body),e.notify(J4.A6)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.actFate=function(t){if(200==t.head.state){var e=this.gtM();e.setFateInfo(t.body),e.notify(J4.A8)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW45=function(t){if(200==t.head.state){var e=this.gtM();e.setFateUp(t.body),e.notify(J4.A12)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU89=function(t){if(200==t.head.state){var e=this.gtM();if(e.GU89(t.body),t.body.ob){var i=[];for(var s in t.body.ob)t.body.ob[s]&&t.body.ob[s].v&&i.push(t.body.ob[s]);P5.sIs(i)}e.notify(J4.A2)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TC25.prototype,"TC25");var TF41=function(i){function t(t){var e=i.call(this,t)||this;return e.bList=[],e.acList=[],e.afList=[],e.ob=[],e.moving=!1,e.t=0,e.lineupArr=[],e.selectedIdlist=[],e.selectedIcon=0,e.selectedStone=0,e.briefArr={},e.lineupAllArr=[],e.viewType=!1,e.backLookNum=1e3,e.fateMaxLv=6,e.intheRun=!1,e.isOpenUseYbView1=!0,e.acStateArr=[],e.fetaArr=[],e.selectiString="",e.itemId=0,e}return __extends(t,i),t.prototype.initData=function(t){this.freeNum=0<=t.f?t.f:this.freeNum,this.cd=0<=t.cd?t.cd:this.cd,this.lastRefreshTime=P6.getTime(!0),this.bList=t.b?t.b:this.bList,this.acList=t.ac?t.ac:this.acList,this.afList=t.af?t.af:this.afList,this.initConf(TE89.init),this.initBList(),this.initAcList(),this.initBriefArr(),this.initFetaInfo()},t.prototype.initBList=function(){this.lineupArr=[[],[],[],[]],this.lineupAllArr=[];var t=TE89.FF15();for(var e in t){var i=t[e];if(i){var s=this.getData(i);this.lineupArr[i.country-1]||(this.lineupArr[i.country-1]=[]),this.lineupArr[i.country-1].push(s)}}for(var e in this.lineupArr)for(var o in this.lineupArr[e])this.lineupAllArr.push(this.lineupArr[e][o])},t.prototype.ZX14=function(){return this.bList.length>this.backLookNum},t.prototype.initAcList=function(){for(var t in this.acStateArr=[[],[],[],[]],this.acList){var e=TE89.FHH48(this.acList[t].t);this.acStateArr[e.country-1].push(this.acList[t])}},t.prototype.initBriefArr=function(){for(var t in this.briefArr={},this.bList)this.briefArr[this.bList[t].t+""]?this.briefArr[this.bList[t].t+""]++:this.briefArr[this.bList[t].t+""]=1},t.prototype.initFetaInfo=function(){this.fetaArr=[];var t=TE89.fate;for(var e in t){for(var i=[],s=!0,o=1;o<6&&t[e]["reqcard"+o];o++)i.push(t[e]["reqcard"+o]),this.isAcType(t[e]["reqcard"+o])||(s=!1);var r={t:t[e].id,type:!1,selected:!1,l:0,reqcard:i,readyAct:s,reqNum:t[e].reqnum,name:t[e].name};this.fetaArr.push(r)}for(var e in this.fetaArr){r=this.fetaArr[e];for(var o in this.afList)this.afList[o].t==r.t&&(this.fetaArr[e].type=!0,this.fetaArr[e].l=this.afList[o].l)}},t.prototype.getData=function(t){var e={};e.info=t,e.t=t.id,e.cardresource=t.cardresource;var i=null;for(var s in this.acList)this.acList[s].t==t.id&&(i=this.acList[s]);return e.type=!!i,e.l=i?i.l:0,e.e=i?i.e:0,e.s=i?i.s:0,e},t.prototype.setData=function(t){this.cd=0<=t.cd?t.cd:this.cd,this.lastRefreshTime=P6.getTime(!0),this.freeNum=0<=t.f?t.f:this.freeNum,this.ob=t.ob?t.ob:[],this.t=t.t?t.t:0},t.prototype.setItemInfo=function(t){for(var e in t){var i={t:t[e].t,u:t[e].u};this.bList.push(i)}this.initBList(),this.initAcList(),this.initBriefArr(),this.initFetaInfo()},t.prototype.setFateInfo=function(t){this.afList.push(t.v),this.initFetaInfo()},t.prototype.setFateUp=function(t){for(var e in this.afList)this.afList[e].t==t.v.t&&(this.afList[e].l=t.v.l,this.afList[e].e=t.v.e,this.afList[e].s=t.v.s);this.initFetaInfo()},t.prototype.processData=function(t){for(var e in this.bList)if(this.bList[e].u==t.lu){this.bList.splice(Number(e),1);break}this.acList.push(t.v),this.initBList(),this.initAcList(),this.initBriefArr(),this.initFetaInfo()},t.prototype.GU89=function(t){for(var e=t.lu,i=0;i<=this.bList.length;i++)for(var s in e)if(this.bList[i].u==e[s]){e.splice(Number(s),1),this.bList.splice(i,1),i--;break}this.selectedList=[],this.selectedIdlist=[],this.initBList(),this.initAcList(),this.initBriefArr(),this.initFetaInfo()},t.prototype.setLvUpInfo=function(t){for(var e=t.lu,i=0;i<=this.bList.length;i++)for(var s in e)if(this.bList[i].u==e[s]){e.splice(Number(s),1),this.bList.splice(i,1),i--;break}var o=t.v;for(var i in this.acList)if(this.acList[i].t==o.t){this.acList[i].l=o.l,this.acList[i].e=o.e,this.acList[i].s=o.s;break}this.initBList(),this.initAcList(),this.initBriefArr(),this.initFetaInfo()},t.prototype.initConf=function(t){var e=t.summonType.value;this.btnConf=[];for(var i=e.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={itemId:o[0],itemNum:o[1]};this.btnConf.push(r)}},t.prototype.isAcType=function(t){for(var e in this.acList)if(this.acList[e].t==t)return this.acList[e];return!1},t.prototype.fateIsAcType=function(t){for(var e in this.afList)if(this.afList[e].t==t)return this.afList[e];return!1},t.prototype.ZK76=function(t,e){if(this.selectedList||(this.selectedList=[],this.selectedIcon=0,this.selectedStone=0),!(0<=this.selectedList.indexOf(t)||300<this.selectedList.length)){this.selectedList.push(t);var i=TE89.FHH48(e);this.selectedIcon+=i.decompose1,this.selectedStone+=i.decompose2}},t.prototype.ZF1=function(t,e){if(this.selectedList&&0!=this.selectedList.length)for(var i=0;i<this.selectedList.length;i++)if(t==this.selectedList[i]){this.selectedList.splice(i,1);var s=TE89.FHH48(e);this.selectedIcon-=s.decompose1,this.selectedStone-=s.decompose2;break}},t.prototype.FL35=function(){var t=0;return this.freeNum&&t++,t||((t+=this.getSummonRed())?t:(t+=this.ZX15())?t:(t+=this.getUpStarRed())?t:t+=this.ZS73())},t.prototype.getSummonRed=function(){return this.freeNum},t.prototype.ZX15=function(){var t=N12.giC(60110),e=N12.giC(75002);for(var i in this.lineupAllArr)if(this.isAcType(this.lineupAllArr[i].t)){if(this.lineupAllArr[i].l<80){var s=this.lineupAllArr[i].l+1,o=TE89.level[s].reqnum;if(TE89.level[s].cash<=e&&o<=t)return 1}}else if(this.briefArr[this.lineupAllArr[i].t+""])return 1;return 0},t.prototype.getUpStarRed=function(){N12.giC(60110),N12.giC(75002);for(var t in this.lineupAllArr){if(this.isAcType(this.lineupAllArr[t].t)){if((this.briefArr[this.lineupAllArr[t].t+""]?this.briefArr[this.lineupAllArr[t].t+""]:0)>=TE89.FI63(this.lineupAllArr[t].info.startype,this.lineupAllArr[t].s)&&this.lineupAllArr[t].s<10)return 1}else if(this.briefArr[this.lineupAllArr[t].t+""])return 1}return 0},t.prototype.ZS73=function(){var t=this.lineupAllArr,e=N12.giC(TE89.init.fateAdvItem.value);for(var i in this.fetaArr){var s=this.fetaArr[i].reqcard;if(this.fetaArr[i].type){var o=!0,r=TE89.FHH50(this.fetaArr[i].l?this.fetaArr[i].l:1).reqstar,n=this.fetaArr[i].reqNum;for(var a in s){for(var h in t)if(t[h].t==s[a]&&(e<n||-1==r||t[h].s<r)&&!(o=!1))break;if(!o)break}if(o)return 1}else{o=!0;for(var a in s)if(!this.isAcType(s[a])){o=!1;break}if(o)return 1}}return 0},t.prototype.getCdStr=function(){var t=P6.getTime(!0)-this.lastRefreshTime,e=this.cd-t;return e<=0?"0:0:0":P6.FJ11(1e3*e,1)},t.prototype.selectOne=function(t,e){this.selectiString=t,this.itemId=e},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TF41.prototype,"TF41");var TF42=function(i){function t(t){var e=i.call(this,t)||this;return e.cardArr=[],e}return __extends(t,i),t.prototype.ZI93=function(t){},t.prototype.loadState=function(){var s=this;return new Promise(function(e,t){var i={type:P4.P41,body:{}};s.rSMO(P4.P42,function(t){s.apF(J4.A20,t),e("加载将星录状态完成")},s),s.sSM(i)})},t.prototype.extraction=function(e){var i=this,t={type:P4.L32,body:e};this.rSMO(P4.L33,function(t){i.apF(J4.A18,t,e.type)},this),this.sSM(t)},t.prototype.GX64=function(){var e=this,t=App.CM.gtM(O6.B56),i={type:P4.D21,body:{tid:t.itemId}};this.rSMO(P4.D22,function(t){e.apF(J4.A4,t)},this),this.sSM(i)},t.prototype.upgrade=function(t){var e=this,i=App.CM.gtM(O6.B56),s={type:P4.F74,body:{tid:i.itemId,type:t}};this.rSMO(P4.F75,function(t){e.apF(J4.A10,t)},this),this.sSM(s)},t.prototype.upStar=function(){var e=this,t=App.CM.gtM(O6.B56),i={type:P4.D23,body:{tid:t.itemId}};this.rSMO(P4.D24,function(t){e.apF(J4.A6,t)},this),this.sSM(i)},t.prototype.ZS74=function(t){var e=this,i={type:P4.D25,body:{fid:t}};this.rSMO(P4.D26,function(t){e.apF(J4.A8,t)},this),this.sSM(i)},t.prototype.upFate=function(t){var e=this,i={type:P4.F76,body:{fid:t}};this.rSMO(P4.F77,function(t){e.apF(J4.A12,t)},this),this.sSM(i)},t.prototype.decom=function(t){var e=this,i={type:P4.B3,body:{uids:t}};this.rSMO(P4.B4,function(t){e.apF(J4.A2,t)},this),this.sSM(i)},t}(TG80);__reflect(TF42.prototype,"TF42");var HeroStarTjContent=function(e){function t(){var t=e.call(this)||this;return t.listIconData=[],t.skinName="ItemHeroStarTjSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.listContent.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this)},t.prototype.close=function(){this.dataSource.removeAll(),this.listContent.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listContent.itemRenderer=IconHeroStar,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource},t.prototype.listHandler=function(t){},t.prototype.dataChanged=function(){this.index=this.data.index;var t=0;t=this.index?7590:7591,this.lbTitle.text=O3.tr(t),this.imgTitle.width=this.lbTitle.width+55;var e=[],i=TE89.FJ83(this.index),s=TF59.FB15(F7.A10);s&&s.openState&&s.pointsetsData.s;for(var o in i){var r=i[o];if(r.info){var n={t:r.info.id,name:r.info.call,type:r.info.type,quality:r.info.quality,country:r.info.country,icon:r.info.icon,pro:r.pro,isShowLv:!1,isInTj:!0,canClick:!0};e.push(n)}}var a=Math.ceil(e.length/5),h=136*a+(a-1)*this.listContent.layout.verticalGap;this.listContent.height=h,this.height=h+40,this.dataSource.replaceAll(e)},t.prototype.onClickGo=function(){this.data.showid},t}(eui.ItemRenderer);__reflect(HeroStarTjContent.prototype,"HeroStarTjContent");var IconHeroStar=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName="IconHeroStarSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t;if((t=this.data.heroData?this.data.heroData:this.data).state&&0<t.state)switch(this.gpState.$setVisible(!0),t.state){case 1:this.imgState.source="v1_img_biaqoian_lv_png",this.lbState.text=O3.tr(1406);break;case 2:case 3:this.imgState.source="v1_img_biaqoian_lan_png",this.lbState.text=O3.tr(1405)}else this.gpState.$setVisible(!1);if(O5.FB13(this.lbName,t.name,t.quality),this.lbName.text=t.name,this.imgIcon.source=t.icon,this.data.pro)this.lbLv.text=this.data.pro,this.balckBg.visible=!0,this.lbLv.visible=!0;else if(this.lbLv.visible=!1,this.balckBg.visible=!1,t.type){P16.sGF(this.imgIcon,!this.data.act),P16.sGF(this.imgBg,!this.data.act);this.data.act&&t.quality;this.lbName.$setTextColor(8421504)}else P16.sGF(this.imgIcon,!1),P16.sGF(this.imgBg,!1);this.imgBg.source=N12.getBox(t.quality),this.isShowRedPoint||(this.imgRed.visible=!1),this.starLb&&(this.starLb.text=this.data.star+"",this.starLb.visible=0<this.data.star,this.starImg.visible=0<this.data.star)},t.prototype.onClick=function(){this.data&&this.data.canClick&&(TG40.playClickEffect(),App.CM.apF(O6.B56,J4.A16,{t:this.data.t,show:!0,type:!1}))},t}(eui.ItemRenderer);__reflect(IconHeroStar.prototype,"IconHeroStar");var IconRewarHeroStar=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName=ItemIconSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){if(null!=this.data.isBottom&&(this.lbName.visible=this.imgNameBg.visible=this.data.isBottom),!this.data.heroStar){var t=this.data.itemData.data;return O5.FB13(this.lbName,t.name,t.quality),this.imgBg.source=N12.getBox(t.quality),this.imgIcon.source=t.icon,this.lbCt.text=this.data.itemData.ct+"",void(this.gpCt.visible=!0)}var e;e=this.data.heroData?this.data.heroData:this.data,O5.FB13(this.lbName,e.name,e.quality),this.lbName.text=e.name,this.imgIcon.source=e.icon,1<e.number?(this.lbCt.text=e.number+"",this.gpCt.visible=!0):this.gpCt.visible=!1,this.imgBg.source=N12.getBox(e.quality),(this.data.isInTj||this.data.isInGo||this.data.isInZz)&&(P16.sGF(this.imgIcon,!1),this.imgRed.visible=!1),this.isShowRedPoint||(this.imgRed.visible=!1)},t.prototype.onClick=function(){TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(IconRewarHeroStar.prototype,"IconRewarHeroStar");var ItemHeroFateIcon=function(a){function t(){var t=a.call(this)||this;return t.selected=!1,t.index=0,t.imageName=["com_jibeishxi","com_canweimj","com_sanzudl","com_dongwuzz","com_meirenxj","com_diwanghy","com_qimougc","com_zhishqx","com_luanshijr","com_wuhuxhji"],t.readyAct=!1,t.skinName=HeroFatelineSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,a),t.prototype.open=function(){this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU29,this),this.selected=!1},t.prototype.close=function(){this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU29,this)},t.prototype.childrenCreated=function(){a.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.titleLb.text=O3.tr(7664),this.btnShow.label=O3.tr(3753),this.listContent.itemRenderer=IconHeroStar,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.ON,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.dataChanged=function(){a.prototype.dataChanged.call(this),this.index=this.data.t,this.numberLb.text=this.data.l,this.selected=this.data.selected,this.selected?(this.imageTitle.source="com_jiangxingwujdi2_png",this.mainGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS75,this)):(this.imageTitle.source="com_jiangxingwujdi_png",this.mainGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS75,this));var t=TE89.FHH47(this.index),e=P7.str2kv(t.activeattr),i=App.CM.gtM(O6.B56);if(this.data.l)if(this.data.l<i.fateMaxLv){if(o=e[0]){this.attr1.text=K18.FD72(o.k+"")+"：",(n=K18.attribute[o.k])&&0===n.show?this.attr1Cur.text=(0===o.v?0:(o.v*this.data.l*100).toFixed(1))+"%":this.attr1Cur.text=o.v*this.data.l+"",this.arrow1.visible=!0,this.attr1Up.visible=!0;var s=this.data.l+1;n&&0===n.show?this.attr1Up.text=(0===o.v?0:(o.v*s*100).toFixed(1))+"%":this.attr1Up.text=o.v*s+""}else this.attr1.visible=!1,this.attr1Cur.visible=!1,this.arrow1.visible=!1,this.attr1Up.visible=!1;if(r=e[1]){this.attr2.text=K18.FD72(r.k+"")+"：",(n=K18.attribute[r.k])&&0===n.show?this.attr2Cur.text=(0===r.v?0:(r.v*this.data.l*100).toFixed(1))+"%":this.attr2Cur.text=r.v*this.data.l+"",this.arrow2.visible=!0,this.attr2Up.visible=!0;s=this.data.l+1;n&&0===n.show?this.attr2Up.text=(0===r.v?0:(r.v*s*100).toFixed(1))+"%":this.attr2Up.text=r.v*s+""}else this.attr2.visible=!1,this.attr2Cur.visible=!1,this.arrow2.visible=!1,this.attr2Up.visible=!1}else{if(o=e[0])this.attr1.text=K18.FD72(o.k+"")+"：",(n=K18.attribute[o.k])&&0===n.show?this.attr1Cur.text=(0===o.v?0:(o.v*this.data.l*100).toFixed(1))+"%":this.attr1Cur.text=o.v*this.data.l+"",this.arrow1.visible=!0,this.attr1Up.visible=!0,this.attr1Up.text=O3.tr(1828);else this.attr1.visible=!1,this.attr1Cur.visible=!1,this.arrow1.visible=!1,this.attr1Up.visible=!1;if(r=e[1])this.attr2.text=K18.FD72(r.k+"")+"：",(n=K18.attribute[r.k])&&0===n.show?this.attr2Cur.text=(0===r.v?0:(r.v*this.data.l*100).toFixed(1))+"%":this.attr2Cur.text=r.v*this.data.l+"",this.arrow2.visible=!0,this.attr2Up.visible=!0,this.attr2Up.text=O3.tr(1828);else this.attr2.visible=!1,this.attr2Cur.visible=!1,this.arrow2.visible=!1,this.attr2Up.visible=!1}else{var o,r,n;if(o=e[0])this.attr1.text=K18.FD72(o.k+"")+"：",(n=K18.attribute[o.k])&&0===n.show?this.attr1Cur.text=(0===o.v?0:(100*o.v).toFixed(1))+"%":this.attr1Cur.text=o.v+"",this.arrow1.visible=!1,this.attr1Up.visible=!1;else this.attr1.visible=!1,this.attr1Cur.visible=!1,this.arrow1.visible=!1,this.attr1Up.visible=!1;if(r=e[1])this.attr2.text=K18.FD72(r.k+"")+"：",(n=K18.attribute[r.k])&&0===n.show?this.attr2Cur.text=(0===r.v?0:(100*r.v).toFixed(1))+"%":this.attr2Cur.text=r.v+"",this.arrow2.visible=!1,this.attr2Up.visible=!1;else this.attr2.visible=!1,this.attr2Cur.visible=!1,this.arrow2.visible=!1,this.attr2Up.visible=!1}this.titleImage.source=this.imageName[this.index-1]+"_png",this.ZJ81(this.data.reqcard),this.data.readyAct?this.btnShow.enabled=!0:this.btnShow.enabled=!1,P16.sGF(this.btnShow,!this.btnShow.enabled),this.data.type?this.btnShow.visible=!1:this.btnShow.visible=!0},t.prototype.ZJ81=function(t){var e=[],i=App.CM.gtM(O6.B56);for(var s in t){var o=TE89.FHH48(t[s]),r=i.isAcType(t[s]);if(o){var n={t:o.id,name:o.call,type:!0,quality:o.quality,country:o.country,icon:o.icon,act:!!r,star:r?r.s:0,isShowLv:!1,isInTj:!0};e.push(n)}}this.dataSource.replaceAll(e)},t.prototype.ZS75=function(){App.CM.apF(O6.B56,J4.A15,this.index)},t.prototype.ZU29=function(){this.data.readyAct&&App.CM.apF(O6.B56,J4.A7,this.index)},t}(eui.ItemRenderer);__reflect(ItemHeroFateIcon.prototype,"ItemHeroFateIcon");var ItemHeroStarPack=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(){this.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.cbOn.addEventListener(egret.Event.CHANGE,this.ZU35,this)},e.prototype.close=function(){this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.cbOn.removeEventListener(egret.Event.CHANGE,this.ZU35,this)},e.prototype.childrenCreated=function(){this.itemData&&t.prototype.createChildren.call(this)},e.prototype.initItem=function(){if(this.itemData){this.imgBg.source=N12.getBox(this.itemData.quality),this.imgIcon.source=this.itemData.icon,this.data.QAlpha?this.imgBg.alpha=this.data.QAlpha:this.imgBg.alpha=1;var t="";null!=this.itemData.addlevel?(t=O3.tr(1148,this.itemData.level),this.lbMove.visible=!0,this.itemData.addlevel?this.lbMove.text=O3.tr(1149,this.itemData.level,this.itemData.addlevel):this.lbMove.text=O3.tr(1148,this.itemData.level)):(this.lbMove.visible=!1,t=this.itemData.call);var e=2;switch(this.data.fl&&(e=this.data.fl),(this.data.isShowLv||this.data.pack)&&this.itemData.type==P11.AVA&&(t=O3.tr(5359,this.itemData.level)),O5.FB13(this.lbName,t,this.itemData.quality,e,!1),1<this.itemData.ct?(this.gpCt.visible=!0,this.lbCt.text=M18.FF65(this.itemData.ct,1)):this.gpCt.visible=!1,this.itemData.type){case 1:if(1==this.itemData.effecttype){this.lbMove.visible=!0;var i=this.itemData.param,s=N12.gID(i);this.lbMove.text=O3.tr(1148,s.level)}}}},e.prototype.dataChanged=function(){this.itemData=TE89.FHH48(this.data.t),this.data.itemData=this.itemData,this.itemData=this.data.itemData,this.imgNameBg.visible=null!=this.data.nameBg&&this.data.nameBg,P7.FM14()?this.setBottom(!1):this.setBottom(this.data.isBottom),this.setIconScale(1),this.cbOn.visible=!0,this.cbOn.selected=this.data.selectState;var t=App.CM.gtM(O6.B56);this.cbOn.selected?t.ZK76(this.data.u,this.data.t):t.ZF1(this.data.u,this.data.t)},e.prototype.ZU35=function(){var t=App.CM.gtM(O6.B56);this.data.selectState=this.cbOn.selected,this.cbOn.selected?t.ZK76(this.data.u,this.data.t):t.ZF1(this.data.u,this.data.t),App.CM.apF(O6.B56,J4.A13)},e.prototype.oCI=function(){App.CM.apF(O6.B56,J4.A16,{t:this.data.t,type:!1})},e}(ItemIcon);__reflect(ItemHeroStarPack.prototype,"ItemHeroStarPack");var HeroStarDatailsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroStarDatailsSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(t){this.myData=t,this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showThis,this);var e=App.CM.gtM(O6.B56),i=t.t,s=TE89.FHH48(i);if(s){this.imageBg.source=N12.getBox(s.quality),this.imgHead.source=s.icon,this.lbStr1.text=O3.tr(7651),this.lbStr0.text=O3.tr(1127),this.lbStr2.text=O3.tr(7296),this.blStar.text=O3.tr(7656),this.lbTitle1.text=O3.tr(7657),this.lbSkillName.text=O3.tr(3625),this.lbQualityName.text=O3.tr([805,804,806,7650][s.country-1]),O5.FB13(this.lbName,s.name,s.quality);var o=e.isAcType(i);this.lbQualityName0.text=o?(this.lbStarNum.text=o.s+"",o.l+""):this.lbStarNum.text="0";var r=P7.str2kv(s.base),n=P7.FM5(r),a=TE89.FHH49(s.startype,o.s?o.s-1:o.s),h=TE89.FG30(o.l),p=o.s?o.s:0,l=M10.gAG(s.base)+M10.gAG(s.starextra)*p,c=h?M10.gAG(h.addattr):0;if(this.btnPanel.visible=!1,this.btnPanel.includeInLayout=!1,t.type)if(o){if(this.grpSkill.visible=!0,this.grpSkill.includeInLayout=!0,this.btnPanel.visible=!0,this.btnPanel.includeInLayout=!0,this.gpAttr1.visible=!0,this.gpAttr1.includeInLayout=!0,o.l){var u=P7.str2kv(TE89.level[o.l].addattr),d=P7.mergekvs(r,u),v=P7.FM5(d);this.lbAttr.text=v}else this.lbAttr.text=n;var f=s.fatetype;if(f){var g=f.split(","),m="";for(var y in g){var A=TE89.fate[Number(g[y])];A&&(e.fateIsAcType(A.id)?m+="\n<font color='#75c01a' >"+A.name+"</font>":m+="\n<font color='#fb2121' >"+A.name+"</font>")}m.length?this.cooperate.textFlow=M18.HTP.parse(m):(this.gpAttr1.visible=!1,this.gpAttr1.includeInLayout=!1)}else this.gpAttr1.visible=!1,this.gpAttr1.includeInLayout=!1;var b=(l+c)*(1+a.attrper);if(this.blPower0.text=Math.floor(b)+"",o.s){this.grpSkill.visible=!0,this.grpSkill.includeInLayout=!0;for(var T=0,C=M=P7.str2kv(s.starextra);T<C.length;T++){(E=C[T]).v=E.v*o.s}var w=Math.floor(1e4*a.attrper)/10+"‰";this.lbStr3.text=O3.tr(3624)+"+"+w;var O=P7.FM5(M);this.lbStr4.text=O}else this.grpSkill.visible=!1,this.grpSkill.includeInLayout=!1}else this.grpSkill.visible=!1,this.grpSkill.includeInLayout=!1,this.btnPanel.visible=!1,this.btnPanel.includeInLayout=!1,this.gpAttr1.visible=!1,this.gpAttr1.includeInLayout=!1,this.lbAttr.text=n,this.blPower0.text=Math.floor(l)+"";else if(this.grpSkill.visible=!1,this.grpSkill.includeInLayout=!1,this.btnPanel.visible=!1,this.btnPanel.includeInLayout=!1,this.gpAttr1.visible=!1,this.gpAttr1.includeInLayout=!1,this.lbAttr.text=n,this.blPower0.text=Math.floor(l)+"",t.show){this.grpSkill.visible=!0,this.grpSkill.includeInLayout=!0,this.grpSkill.visible=!0,this.grpSkill.includeInLayout=!0;for(var M,_=0,F=M=P7.str2kv(s.starextra);_<F.length;_++){var E;(E=F[_]).v=1*E.v}var P=TE89.FHH49(s.startype,0),L=Math.floor(1e4*P.attrper)/10+"‰";this.lbStr3.text=O3.tr(3624)+"+"+L;O=P7.FM5(M);this.lbStr4.text=O}if(t.l){u=P7.str2kv(TE89.level[t.l].addattr),d=P7.mergekvs(r,u),v=P7.FM5(d);this.lbAttr.text=v}t.isShow&&this.ZL67(t,s,a)}},t.prototype.ZL67=function(t,e,i){var s=App.CM.gtM(O6.B56);if(this.lbStarNum.text=t.s+"",this.lbQualityName0.text=t.l+"",t.s){this.grpSkill.visible=!0,this.grpSkill.includeInLayout=!0;for(var o=P7.str2kv(e.starextra),r=0,n=o;r<n.length;r++){var a=n[r];a.v=a.v*t.s}var h=Math.floor(1e4*i.attrper)/10+"‰";this.lbStr3.text=O3.tr(3624)+"+"+h;var p=P7.FM5(o);this.lbStr4.text=p}else this.grpSkill.visible=!1,this.grpSkill.includeInLayout=!1;var l=e.fatetype;if(l){var c=l.split(","),u="";for(var d in c){var v=TE89.fate[Number(c[d])];v&&(s.fateIsAcType(v.id)?u+="\n<font color='#75c01a' >"+v.name+"</font>":u+="\n<font color='#fb2121' >"+v.name+"</font>")}u.length?this.cooperate.textFlow=M18.HTP.parse(u):(this.gpAttr1.visible=!1,this.gpAttr1.includeInLayout=!1)}else this.gpAttr1.visible=!1,this.gpAttr1.includeInLayout=!1},t.prototype.showThis=function(){var t=App.CM.gtM(O6.B98);if(t.showCD)P18.sDP(O3.tr(6858,t.showCD));else{var e=this.myData.t,i=TE89.FHH48(e),s=i.name,o=N18.FF97(i.quality),r=M18.format("$0,$1",[s,o.colour]),n=P7.FF60(),a={nid:F8.A12,channelId:n,param:r,infoId:e};App.CM.apF(O6.C13,O12.A13,a),this.closeSelf()}},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.rect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.startShow=function(){var t=L5.getStr(this.myData.d.quality)+this.myData.d.name,e=N18.FF97(this.myData.d.quality),i=M18.format("$0,$1",[t,e.colour]),s=P7.FF60(),o={nid:F8.A17,channelId:s,param:i,infoId:this.myData.d.uid};App.CM.apF(O6.C13,O12.A13,o),this.closeSelf()},t.prototype.closeSelf=function(){this.apF(J4.A14)},t.prototype.updateUI=function(){},t}(BaseEuiView);__reflect(HeroStarDatailsView.prototype,"HeroStarDatailsView");var HeroStarFateView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.selectedIndex=0,i.tipsType=!0,i.skinName="HeroStarFateSkin",i.btnRaising1.label=O3.tr(1145),i.lbStr1.text=O3.tr(7653),i.lbStr0.textFlow=M18.HTP.parser(O3.tr(4089)),i.getBtn.textFlow=M18.HTP.parser(O3.tr(7607)),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemHeroFateIcon,width:this.display.width,height:this.display.height,arrowScale:1,tileLayout:!0,verticalGap:6,horizontalGap:5};this.shopListView=new CommonListBase(t),this.display.addChild(this.shopListView),this.shopListView.verticalCenter=0,this.shopListView.horizontalCenter=0;var e=N12.gID(60111);this.imgGood0.setData(e),this.imgGood0.setImgSize({w:40,h:40}),this.getBtn.visible=!1},t.prototype.open=function(t){s.prototype.open.call(this),this.shopListView.open();App.CM.gtM(O6.B56).fetaArr;this.cancelSelect(1),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upFetaLevel,this),this.btnRaising1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GX64,this)},t.prototype.upFetaLevel=function(){TG84.FM16(1719)},t.prototype.GX64=function(){if(!this.tipsType)return P18.sDP(K18.tips[719].content);if(this.titleLb&&8667431==this.titleLb.textColor&&-1<this.titleLb.text.indexOf(O3.tr(7648)))return P18.sDP(K18.tips[721].content);var t=this.lbAmount1.text.split("/"),e=parseInt(t[0]),i=parseInt(t[1]);if(e<i)App.VM.open(O7.G87,60111,i-e);else{var s=this.selectedIndex;this.apF(J4.A11,s)}},t.prototype.cancelSelect=function(t){var e=App.CM.gtM(O6.B56).fetaArr;for(var i in e)e[i].selected=!1;e[t-1].selected=!0,this.selectedIndex=t;var s=[];for(var i in e)e[i].type&&s.push(e[i]);for(var i in e)e[i].readyAct&&-1==s.indexOf(e[i])&&s.push(e[i]);for(var i in e)e[i].readyAct||-1!=s.indexOf(e[i])||s.push(e[i]);this.shopListView.rfL(s),this.initInfo(e[t-1])},t.prototype.initInfo=function(t){var e=App.CM.gtM(O6.B56);if(this.tipsType=t.type,t.type){var i=TE89.FHH50(t.l?t.l:1).reqstar,s=t.reqcard.slice(0),o=e.lineupAllArr,r=!0,n=TE89.fate[t.t].reqnum;for(var a in s){for(var h in o)if(o[h].t==s[a]&&o[h].s<i&&!(r=!1))break;if(!r)break}this.titleLb.text=i<0?(n=0,""):O3.tr(7646,i)+(r?O3.tr(7647):O3.tr(7648)),this.costGrp0.visible=!0,this.titleLb.textColor=r?7716890:8667431,this.lbAmount1.text=N12.giC(60111)+"/"+n,n?n>N12.giC(60111)?this.lbAmount1.$setTextColor(12520717):this.lbAmount1.$setTextColor(7716890):this.titleLb.text=O3.tr(7662)}else this.titleLb.text=O3.tr(7645),this.titleLb.textColor=8667431,this.costGrp0.visible=!1},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnRaising1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GX64,this),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.upFetaLevel,this)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF41)for(var i in e)switch(e[i]){case J4.A3:case J4.A8:case J4.A12:this.updeteActive()}if(t instanceof THH9)switch(e){case P4.V43:this.updeteActive()}},t.prototype.updeteActive=function(){var t=App.CM.gtM(O6.B56).fetaArr,e=this.selectedIndex;for(var i in t)t[i].selected=!1;t[e-1].selected=!0,this.selectedIndex=e;var s=[];for(var i in t)t[i].type&&s.push(t[i]);for(var i in t)t[i].readyAct&&-1==s.indexOf(t[i])&&s.push(t[i]);for(var i in t)t[i].readyAct||-1!=s.indexOf(t[i])||s.push(t[i]);this.shopListView.rfL(s),this.initInfo(t[e-1])},t}(BaseEuiView);__reflect(HeroStarFateView.prototype,"HeroStarFateView");var HeroStarMainView=function(r){function t(t,e){var i=r.call(this,t,e)||this;i.sGN("release_herostar"),App.VM.rgS(O7.I32,O7.D71,"HeroStarSummonView",i.content),App.VM.rgS(O7.I32,O7.HH13,"HeroStarUpView",i.content),App.VM.rgS(O7.I32,O7.D72,"HeroStarUpStarView",i.content),App.VM.rgS(O7.I32,O7.F43,"HeroStarFateView",i.content),App.VM.rgS(O7.I32,O7.C22,"HeroStarMaterialView",i.content);var s=[O3.tr(7640),O3.tr(7641),O3.tr(7642),O3.tr(7643),O3.tr(4586)],o=[O7.D71,O7.HH13,O7.D72,O7.F43,O7.C22];return i.btnList=new ButtonList(s,o,i.ZQ23.bind(i)),i.btnList.init(),i.btnGroup.addChild(i.btnList),i.btnList.scaleY=i.btnList.scaleX=.8,i.helpBtn.visible=!0,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t);var i=App.CM.gtM(O6.B56);this.ZE84(i);var s=t[0]||O7.D71;this.ZQ23(s),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.openView=function(){this.ZQ23(O7.D71)},t.prototype.openHelpView=function(){var t={title:O3.tr(7665)+O3.tr(3280),content:TE89.init.illustrationHelp.value};App.VM.open(O7.I8,t)},t.prototype.ZQ23=function(t){App.CM.gtM(O6.B82).avatarInfo.v;var e=[O3.tr(7640),O3.tr(7641),O3.tr(7642),O3.tr(7643),O3.tr(4586)];switch(t){case O7.D71:this.title=e[0],this.btnList.ZM66(t);break;case O7.HH13:this.title=e[1],this.btnList.ZM66(t);break;case O7.D72:this.title=e[2],this.btnList.ZM66(t);break;case O7.F43:this.title=e[3],this.btnList.ZM66(t);break;case O7.C22:this.title=e[4],this.btnList.ZM66(t)}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r.prototype.uBM.call(this,t,e),t instanceof TF41&&this.ZE84(t),t instanceof THH9)switch(e[0]){case P4.V43:var s=App.CM.gtM(O6.B56);this.ZE84(s)}},t.prototype.ZE84=function(t){var e=App.CM.gtM(O6.B56);this.btnList.ZHH58(O7.D71,e.getSummonRed()),this.btnList.ZHH58(O7.HH13,e.ZX15()),this.btnList.ZHH58(O7.D72,e.getUpStarRed()),this.btnList.ZHH58(O7.F43,e.ZS73()),this.btnList.ZHH58(O7.C22,e.ZX14()?1:0)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this,t),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t}(BasePanelView);__reflect(HeroStarMainView.prototype,"HeroStarMainView");var HeroStarMaterialView=function(r){function t(t,e){var i=r.call(this,t,e)||this;i.dataNum=[],i.skinName="HeroStarMaterialSkin",i.btnRaising.label=O3.tr(3608),i.lbStr0.text=O3.tr(5261);var s=N12.gID(TE89.init.illustrationAdvItem.value);i.imgGood0.setData(s),i.imgGood0.setImgSize({w:40,h:40});var o=N12.gID(75019);return i.imgGood2.setData(o),i.imgGood2.setImgSize({w:40,h:40}),i.datatime=Date.now(),i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.cbs=[this.cbAutoSmelt0,this.cbAutoSmelt1,this.cbAutoSmelt2,this.cbAutoSmelt3,this.cbAutoSmelt4],this.cbAutoSmelt0.labelDisplay.textFlow=M18.HTP.parse("< font color= '#039a23' > "+O3.tr(6561)+O3.tr(7660)+" < /font>"),this.cbAutoSmelt1.labelDisplay.textFlow=M18.HTP.parse("< font color= '#10a2ff' > "+O3.tr(6562)+O3.tr(7660)+" < /font>"),this.cbAutoSmelt2.labelDisplay.textFlow=M18.HTP.parse("< font color= '#d234ff' > "+O3.tr(6563)+O3.tr(7660)+" < /font>"),this.cbAutoSmelt3.labelDisplay.textFlow=M18.HTP.parse("< font color= '#ef6e0f' > "+O3.tr(6564)+O3.tr(7660)+" < /font>"),this.cbAutoSmelt4.labelDisplay.textFlow=M18.HTP.parse("< font color= '#fb2121' > "+O3.tr(6565)+O3.tr(7660)+" < /font>");var t={render:ItemHeroStarPack,width:this.Screening.width,height:this.Screening.height,arrowScale:1,tileLayout:!0,verticalGap:5,horizontalGap:30};this.ScreenListView=new CommonListBase(t),this.Screening.addChild(this.ScreenListView),this.ScreenListView.verticalCenter=0,this.ScreenListView.horizontalCenter=0},t.prototype.open=function(){r.prototype.open.call(this);for(var t=0;t<this.cbs.length;t++)this.cbs[t].index=t+2,this.cbs[t].selected=!1,this.cbs[t].addEventListener(egret.Event.CHANGE,this.chooseChange,this);this.dataNum=[],this.ScreenListView.open(),this.ZX16(),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS76,this)},t.prototype.chooseChange=function(t){this.grpClick(!1),TG40.playClickEffect();var e=parseInt(t.target.index);console.log(e),-1==this.dataNum.indexOf(e)?this.dataNum.push(e):this.dataNum.splice(this.dataNum.indexOf(e),1),0!=this.dataNum.length?this.canResove():this.ZX16()},t.prototype.ZX16=function(){var t=this,e=App.CM.gtM(O6.B56),i=e.bList.slice(0);for(var s in i.sort(function(t,e){var i=TE89.FHH48(t.t),s=TE89.FHH48(e.t);return t.selectState=!1,e.selectState=!1,i&&s?i.quality-s.quality:0}),e.selectedList=[],e.selectedIcon=0,e.selectedStone=0,i)i[s].selectState&&e.ZK76(i[s].u,i[s].t);this.initGetNum(),this.ScreenListView.itemList.scrollV=0,this.ScreenListView.rfL(i),egret.Tween.get(this).wait(200).call(function(){t.grpClick(!0)})},t.prototype.ZS76=function(){var t=App.CM.gtM(O6.B56);if(t.selectedList&&!t.selectedList.length)return console.log("分解数组为空");for(var e="",i=0;i<t.selectedList.length&&(e+=t.selectedList[i],!(300<=i));i++)i!=t.selectedList.length-1&&(e+=",");this.datatime<=Date.now()&&(this.apF(J4.A1,e),this.datatime=Date.now()+200)},t.prototype.grpClick=function(t){this.grp.touchChildren=t},t.prototype.canResove=function(){var t=this,e=App.CM.gtM(O6.B56),i=e.bList.slice(0),s=[];for(var o in i){var r=TE89.FHH48(i[o].t);r&&-1<this.dataNum.indexOf(r.quality)&&s.length<=300?(i[o].selectState=!0,s.push(i[o])):i[o].selectState=!1}for(var o in s.sort(function(t,e){var i=TE89.FHH48(t.t),s=TE89.FHH48(e.t);return i.quality-s.quality}),e.selectedList=[],e.selectedIcon=0,e.selectedStone=0,i)i[o].selectState&&e.ZK76(i[o].u,i[o].t);this.initGetNum(),this.ScreenListView.itemList.scrollV=0,this.ScreenListView.rfL(s),egret.Tween.get(this).wait(200).call(function(){t.grpClick(!0)})},t.prototype.close=function(){r.prototype.close.call(this),this.ScreenListView.close()},t.prototype.uBM=function(t,e){if(r.prototype.uBM.call(this,t,e),t instanceof TF41)for(var i in e)switch(e[i]){case J4.A2:this.ZE84(t)}},t.prototype.ZE84=function(t){if(0!=this.dataNum.length){var e=App.CM.gtM(O6.B56),i=e.bList.slice(0),s=[];for(var o in i){var r=TE89.FHH48(i[o].t);r&&-1<this.dataNum.indexOf(r.quality)?(i[o].selectState=!0,s.push(i[o])):i[o].selectState=!1}for(var o in s.sort(function(t,e){var i=TE89.FHH48(t.t),s=TE89.FHH48(e.t);return i.quality-s.quality}),e.selectedList=[],e.selectedIcon=0,e.selectedStone=0,i)i[o].selectState&&e.ZK76(i[o].u,i[o].t);this.ScreenListView.itemList.scrollV=0,this.ScreenListView.rfL(s),this.initGetNum()}else this.ZX16()},t.prototype.initGetNum=function(){var t=App.CM.gtM(O6.B56);this.lbCostGood2.text=t.selectedIcon+"",this.lbCostGood0.text=t.selectedStone+""},t}(BaseEuiView);__reflect(HeroStarMaterialView.prototype,"HeroStarMaterialView");var HeroStarPreviewView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HeroStarPreviewSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:HeroStarTjContent,gap:10,width:this.gList.width,height:this.gList.height,arrowScale:1};this.listView=new CommonListBase(t),this.gList.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.ZQ14(this.closeSelf.bind(this),this),this.dlg.ZQ15(!0),this.dlg.ZG3(!0),this.dlg.title=O3.tr(4317)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.listView.open();this.listView.rfL([{index:1},{index:0}])},t.prototype.closeSelf=function(t){this.apF(J4.A27)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.listView.close()},t}(BaseEuiView);__reflect(HeroStarPreviewView.prototype,"HeroStarPreviewView");var HeroStarRewarView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.closeCD=10,i.confList=[],i.skinName="DialRewardSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dgRewards.dataProvider=this.rewardsCollection=new eui.ArrayCollection,this.dgRewards.itemRenderer=IconRewarHeroStar,this.btnOk.label=O3.tr(4249),this.lbBtn1.text=O3.tr(3809),this.lbBtn2.text=O3.tr(3809)},t.prototype.open=function(t){this.params=t,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updateViews()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bRegSkipTimer=!1,this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnOk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),1==this.buyItem1.visible&&this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU36,this),1==this.buyItem2.visible&&this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU37,this),App.K16.remove(this.ZU23,this),this.rewardsCollection.removeAll()},t.prototype.updateViews=function(){this.ZJ83(),this.ZU24(),this.updateBuyBtn()},t.prototype.updateBuyBtn=function(){var t=App.CM.gtM(O6.B56),e=t.btnConf;this.confList=e;var i=1==t.t||5==t.t?1:2;if(2==t.t||4==t.t){this.buyItem1.$setVisible(!0),this.buyItem2.$setVisible(!1);for(var s=0;s<1;s++)this.ZHH68(s,i)}else{this.buyItem1.$setVisible(!0),this.buyItem2.$setVisible(!0);for(s=0;s<2;s++)this.ZHH68(s,i)}},t.prototype.ZHH68=function(t,e){var i=App.CM.gtM(O6.B56);if(0==t){var s=null;s=1==i.t||5==i.t?this.confList[0]:2==i.t||4==i.t?this.confList[1]:this.confList[2],this.imgItem1.source=N12.FJ86(s.itemId),this.lbMoney1.$setText(s.itemNum),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU36,this),this.lbBuy1.visible=!1;var o=2==i.t||4==i.t?1:10;this.btn1.label=O3.tr(7588,o);var r=2==i.t||4==i.t?1:0;this.FM13(this.btn1,r?O3.tr(4933):O3.tr(6988))}else if(1==t){s={itemId:(1==i.t||5==i.t?this.confList[0]:this.confList[1]).itemId,itemNum:TE89.init.higherTimePrice.value};this.imgItem2.source=N12.FJ86(s.itemId),this.lbMoney2.$setText(s.itemNum),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU37,this),this.lbBuy2.visible=!1,this.btn2.label=O3.tr(7588,50),this.FM13(this.btn2,O3.tr(7655))}},t.prototype.FM13=function(t,e){t.size=e?(t.label2=e,t.labelY="12","22"):(t.label2="",t.labelY="0","24")},t.prototype.getBtnLabel=function(t){},t.prototype.ZU36=function(){this.click(0)},t.prototype.ZU37=function(){this.click(1)},t.prototype.ZM77=function(){},t.prototype.click=function(t){var e=App.CM.gtM(O6.B56),i=null,s=1==e.t||5==e.t?1:2,o={type:4==e.t?2:e.t};if(t?(i={itemId:this.confList[s].itemId,itemNum:TE89.init.higherTimePrice.value}).itemId=1==s?(o.type=5,this.confList[0].itemId):(o.type=6,this.confList[1].itemId):e.t<4?i=this.confList[e.t-1]:4==e.t?(i=this.confList[1],o.type=2):5==e.t?(i=this.confList[0],o.type=1):(i=this.confList[2],o.type=3),N12.giC(Number(i.itemId))<Number(i.itemNum))75001==Number(i.itemId)?P18.sDP(O3.tr(5354)):P7.FA78();else{if(this.closeSelf(!1),e.ZX14())return P18.sDP(O3.tr(7663));App.CM.apF(O6.B56,J4.A17,o),this.ZM77()}},t.prototype.ZJ83=function(){this.closeCD=10,this.ZU23(),this.bRegSkipTimer||(this.bRegSkipTimer=!0,App.K16.doTimer(1e3,this.closeCD,this.ZU23,this))},t.prototype.ZU23=function(){this.closeCD--,this.closeCD<=0?this.closeSelf(!0):this.lbTime.textFlow=M18.HTP.parser(O3.tr(6435,this.closeCD))},t.prototype.ZU24=function(){var t=[],e=App.CM.gtM(O6.B56);if(e&&e.ob&&0<e.ob.length){var i=e.ob,s=!0;for(var o in P7.FM14()&&(s=!1),i){var r=i[o],n=TE89.FHH48(r.k);if(n){var a={name:n.call,type:n.type,quality:n.quality,country:n.country,icon:n.icon,number:r.v,heroStar:!0,isShowLv:!1,isInTj:!0,isBottom:s};t.push(a)}else{var h=N12.gID(r.k);if(h){var p={itemData:{data:h,ct:r.v},isBottom:s,heroStar:!1};t.push(p)}}}this.rewardsCollection.replaceAll(t)}},t.prototype.closeSelf=function(t){this.apF(J4.A23);App.CM.gtM(O6.C24);this.closeCD=10},t}(BaseEuiView);__reflect(HeroStarRewarView.prototype,"HeroStarRewarView");var HeroStarSummonView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.itemArray=[],i.imageXyArr=[],i.imageArr=[],i.imageArr2=[],i.runNum=0,i.skinName="HeroStarSummonSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.addEffect()},t.prototype.addEffect=function(){this.ringImage0.visible=!1,this.character0.visible=!1,App.THH33.rEf(this.effects,"jxt_mc_bhlz_1"),App.THH33.aUE(this.effects,"jxt_mc_bhlz_1",0,0,-1),this.effects.scaleX=this.effects.scaleY=1.5,App.THH33.rEf(this.effects3,"jxt_mc_jjgx_1"),App.THH33.aUE(this.effects3,"jxt_mc_jjgx_1",258,89,-1),egret.Tween.get(this.ringEffe1,{loop:!0}).to({alpha:.15},0).to({alpha:.2},100).to({alpha:.15},200).to({alpha:.2},200).to({alpha:.15},100).to({alpha:.2},200).to({alpha:.15},200),egret.Tween.get(this.ringEffe2,{loop:!0}).to({scaleX:2.5,scaleY:2.5},0).to({scaleX:2.4,scaleY:2.4},300).to({scaleX:2.5,scaleY:2.5},300),egret.Tween.get(this.effects1,{loop:!0}).to({scaleX:1,scaleY:1},1e3).to({scaleX:1.005,scaleY:1.005},1e3).to({scaleX:1,scaleY:1},1e3);var t=[this.Ball4,this.Ball5,this.Ball6,this.Ball7];for(var e in t)this.imageXyArr[e]&&(t[e].x=this.imageXyArr[e].x,t[e].y=this.imageXyArr[e].y),t[e].scaleX=t[e].scaleY=t[e].alpha=1,t[e].visible=!0,this.addTween(t[e]);if(!this.imageXyArr.length)for(var e in t)this.imageXyArr.push({x:t[e].x,y:t[e].y})},t.prototype.addTween=function(t){egret.Tween.get(t,{loop:!0}).to({scaleX:1,scaleY:1},1e3).to({scaleX:.98,scaleY:.98},1e3).to({scaleX:1,scaleY:1},1e3)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.initItemView(),this.PreviewBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GP33,this),this.btnSkin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopView,this),App.CM.gtM(O6.B56).intheRun=!1,this.ZE84()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null),this.buyItem1.removeChildren(),this.buyItem2.removeChildren(),this.buyItem3.removeChildren(),this.itemArray=[],this.PreviewBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GP33,this),this.btnSkin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopView,this),this.removeEffcts()},t.prototype.removeEffcts=function(){App.THH33.rEf(this.effects,"jxt_mc_bhlz_1"),App.THH33.rEf(this.effects3,"jxt_mc_jjgx_1"),egret.Tween.removeTweens(this.effects1),egret.Tween.removeTweens(this.ringEffe1),egret.Tween.removeTweens(this.ringEffe2),this.timeHandlerAct&&(App.K16.rBH(this.timeHandlerAct),this.timeHandlerAct=null);var t=[this.Ball4,this.Ball5,this.Ball6,this.Ball7];for(var e in t)this.removeTween(t[e])},t.prototype.removeTween=function(t){egret.Tween.removeTweens(t)},t.prototype.summonAction=function(){var t=this;this.ringImage.rotation=0,egret.Tween.get(this.ringImage).to({rotation:720},2400).call(function(){t.ringImage0.visible=!0,t.ringImage0.alpha=t.ringImage0.scaleX=t.ringImage0.scaleY=1,egret.Tween.get(t.ringImage0).to({alpha:0,scaleX:1.55,scaleY:1.55},1300)},this),this.getImage(),this.timeHandlerAct=App.K16.doTimer(700,3,this.getImage,this);var e=[this.Ball4,this.Ball5,this.Ball6,this.Ball7];for(var i in e)this.removeTween(e[i]),this.addSummonAct(e[i],Number(i))},t.prototype.getImage=function(){var t=new eui.Image;t.source="jxt_mc_fzks_01_png",this.haloeffcts.addChild(t),this.imageArr2.push(t),t.alpha=0,t.anchorOffsetX=75,t.anchorOffsetY=75,t.x=291,t.y=358,t.blendMode="add",egret.Tween.get(t).to({alpha:1,scaleX:3.6,scaleY:3.6},400).to({alpha:0,scaleX:6,scaleY:6},900)},t.prototype.addSummonAct=function(t,e){var i=this;console.log(" 检测位置 2 ");var s=t.x,o=t.y,r=[{x:30,y:247},{x:560,y:184},{x:136,y:580},{x:497,y:520}];egret.Tween.get(t).wait(.21*e*1e3).to({x:s,y:o+20},700).to({x:s,y:o+24},100).to({x:s,y:o+20},100).to({x:s,y:o+24},100).to({x:s,y:o+20},100).to({x:s,y:o+23},100).to({x:r[e].x,y:r[e].y},300).to({scaleX:.46,scaleY:.46,x:280,y:345},300).call(function(){t.visible=!1,i.runHalo(e)},this)},t.prototype.runHalo=function(t){var e=this,i=new eui.Image;i.source="jxt_mc_hgy_01_png",this.effects1.addChild(i),this.imageArr.push(i),i.scaleX=i.scaleY=1,i.alpha=1,i.anchorOffsetX=110,i.anchorOffsetY=110,i.x=280,i.y=345,i.blendMode="add",egret.Tween.get(i).to({alpha:0},200),this.character0.visible=!0,this.character0.blendMode="add",egret.Tween.removeTweens(this.character0),this.character0.alpha=1,3==t?(this.runActionTwo(),egret.Tween.get(this.character0).to({alpha:0},1100).call(function(){e.removeImg()},this)):egret.Tween.get(this.character0).to({alpha:0},200)},t.prototype.removeImg=function(){for(var t in egret.Tween.removeTweens(this.character),egret.Tween.removeTweens(this.character),this.character0.alpha=1,this.character0.blendMode="normal",this.character0.visible=!1,this.imageArr)this.effects1.removeChild(this.imageArr[t]);for(var t in this.imageArr2)this.haloeffcts.removeChild(this.imageArr2[t]);this.imageArr=[],this.imageArr2=[]},t.prototype.runActionTwo=function(){for(var t=[{x:290,y:558},{x:290,y:558},{x:190,y:458},{x:390,y:478}],e=this.runNum=0;e<t.length;e++)this.getRunHalo(e,t[e])},t.prototype.getRunHalo=function(t,e){var i=this,s=new eui.Image;s.source="jxt_mc_gs_01_png",this.effects2.addChild(s),s.alpha=1,s.anchorOffsetX=128,s.anchorOffsetY=207,s.x=e.x,s.y=e.y-50,s.blendMode="add",0==t?(s.scaleX=3.09,s.scaleY=1.73,egret.Tween.get(s).to({alpha:0,scaleX:3.09,scaleY:7},700).call(function(){i.runStar(s)},this)):1==t?(s.scaleX=1,s.scaleY=1.73,egret.Tween.get(s).to({alpha:0,scaleX:1,scaleY:7},1e3).call(function(){i.runStar(s)},this)):(s.scaleX=1,s.scaleY=1.73,egret.Tween.get(s).to({alpha:0,scaleX:1,scaleY:7},500).call(function(){i.runStar(s)},this))},t.prototype.runStar=function(t){var e=this;this.runNum++,this.effects2.removeChild(t),4==this.runNum&&(this.runNum=0,egret.Tween.get(t).wait(500).call(function(){var t=App.CM.gtM(O6.B56);t.ob&&P5.sIs(t.ob),e.apF(J4.A25),e.addEffect(),t.intheRun=!1},this))},t.prototype.GP33=function(){App.VM.open(O7.C90)},t.prototype.openShopView=function(){TG84.FM16(1719)},t.prototype.GY14=function(){var t=App.CM.gtM(O6.B56);t.freeNum?(this.timeOut.textFlow=M18.HTP.parser(O3.tr(7644,t.freeNum)),this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null)):this.timeOut.textFlow=M18.HTP.parser(O3.tr(7589,t.getCdStr()))},t.prototype.initItemView=function(){this.buyItem1.removeChildren(),this.buyItem2.removeChildren(),this.buyItem3.removeChildren(),this.itemArray=[];for(var t=0;t<3;t++){var e=new ItemHeroBuyView(t);e.setData(t),this.itemArray.push(e)}this.buyItem1.addChild(this.itemArray[0]),this.buyItem2.addChild(this.itemArray[1]),this.buyItem3.addChild(this.itemArray[2])},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF41)for(var i in e)switch(e[i]){case J4.A18:this.ZE84()}t instanceof THH14&&(this.shopRed.visible=THH27.FG48())},t.prototype.ZE84=function(){var t=App.CM.gtM(O6.B56);t.freeNum?(this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null),this.timeOut.textFlow=M18.HTP.parser(O3.tr(7644,t.freeNum))):(this.timeOut.textFlow=M18.HTP.parser(O3.tr(7589,t.getCdStr())),this.timeHandler=App.K16.doTimer(1e3,0,this.GY14,this)),this.shopRed.visible=THH27.FG48(),this.itemArray[1].btn.imgNew.visible=!!t.freeNum},t}(BaseEuiView);__reflect(HeroStarSummonView.prototype,"HeroStarSummonView");var HeroStartemIcon=function(h){function t(){var t=h.call(this)||this;return t.skinName="HeroStarIconSkin",t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,h),t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.close,this)},t.prototype.childrenCreated=function(){h.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){h.prototype.dataChanged.call(this);var t=TE89.FHH48(this.data.t);P7.FM14()?this.nameLb.visible=!1:(this.nameLb.visible=!0,O5.FB13(this.nameLb,t.name,t.quality)),this.ImgBg.source=["v1_img_jiangxingkuang_bai","v1_img_jiangxingkuang_lv","v1_img_jiangxingkuang_lan","v1_img_jiangxingkuang_zi","v1_img_jiangxingkuang_huang","v1_img_jiangxingkuang_hong"][t.quality-1]+"_png",this.imgCamp.source=["com_jiangxingwei","com_jiangxingshu","com_jiangxingwu","com_jiangxingqun"][t.country-1]+"_png",this.starLb.text=(this.data.s?this.data.s:"0")+"",this.haveLb.text=(this.data.l?this.data.l:"0")+"";var e=TE89.FHH49(t.startype,this.data.s?this.data.s-1:this.data.s),i=TE89.FG30(this.data.l),s=(M10.gAG(t.base)+M10.gAG(t.starextra)*this.data.s+(i?M10.gAG(i.addattr):0))*(this.data.s?1+e.attrper:1);this.powerLb.text=O3.tr(7652)+Math.ceil(s),this.imgDraw.source=this.data.cardresource;var o=App.CM.gtM(O6.B56);if(o.itemId==this.data.t?this.texiao.visible=!0:this.texiao.visible=!1,this.data.type?this.redImage.visible=!1:o.briefArr[this.data.t]?this.redImage.visible=!0:this.redImage.visible=!1,!this.redImage.visible&&this.data.type)if(o.viewType){var r=N12.giC(TE89.init.illustrationAdvItem.value),n=N12.giC(75002),a=TE89.level[this.data.l+1]&&TE89.level[this.data.l+1].reqnum;(TE89.level[this.data.l+1]&&TE89.level[this.data.l+1].cash)<=n&&a<=r&&this.data.l<80&&(this.redImage.visible=!0)}else{(o.briefArr[this.data.t+""]?o.briefArr[this.data.t+""]:0)>=TE89.FI63(t.startype,this.data.s)&&this.data.s<10&&(this.redImage.visible=!0)}P16.sGF(this.imgDraw,!this.data.type)},t.prototype.onClick=function(){if(this.texiao.visible)return App.CM.apF(O6.B56,J4.A16,{t:this.data.t,type:!0});App.CM.gtM(O6.B56).selectOne(this.data.u,this.data.t),App.CM.apF(O6.B56,J4.A21)},t}(eui.ItemRenderer);__reflect(HeroStartemIcon.prototype,"HeroStartemIcon");var HeroStarUpStarView=function(a){function t(t,e){var i=a.call(this,t,e)||this;return i.btnArr=[],i.nowIndex=0,i.skinName="HeroStarUpStarSkin",i.lbStr0.text=O3.tr(7606),i.lbStr1.text=O3.tr(7069),i.btnRaising.label=O3.tr(5739),i.activationBtn.label=O3.tr(3753),i.lbStr2.text=O3.tr(7069),i.getBtn.textFlow=M18.HTP.parser(O3.tr(7607)),i.lbStr1.textFlow=M18.HTP.parser(O3.tr(4089)),i.btnArr=[i.btnSkin0,i.btnSkin1,i.btnSkin2,i.btnSkin3,i.btnSkin4],i}return __extends(t,a),t.prototype.initUI=function(){a.prototype.initUI.call(this),this.getBtn.visible=!1},t.prototype.initData=function(){a.prototype.initData.call(this);var t={render:HeroStartemIcon,width:this.display.width,height:this.display.height,arrowScale:1,tileLayout:!0,verticalGap:6,horizontalGap:4};this.shopListView=new CommonListBase(t),this.display.addChild(this.shopListView),this.shopListView.verticalCenter=0,this.shopListView.horizontalCenter=0;for(var e=App.CM.gtM(O6.B56),i=0;i<this.btnArr.length;i++){if(i)this["text"+i].text=O3.tr(7592+i,e.acStateArr[i-1].length+"/"+e.lineupArr[i-1].length);else{var s=0;for(var o in e.acStateArr)s+=e.acStateArr[o].length;var r=0;for(var n in e.lineupArr)r+=e.lineupArr[n].length;this["text"+i].text=O3.tr(7592+i,s+"/"+r)}}this.activationBtn.visible=!1,this.costGrp1.visible=this.activationBtn.visible,this.UpGroup.visible=!0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in a.prototype.open.call(this),this.shopListView.open(),this.activationBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GX64,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX16,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GW44,this),this.btnArr){var s=this.btnArr[i];this["BtnBg"+(s.index=i)].index=i,this["text"+i].index=i,this["BtnBg"+i].source="0"!=i?(s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this),"v1_btn_yellow02_png"):"v1_btn_yellow01_png"}var o=App.CM.gtM(O6.B56);o.viewType=!1,this.nowIndex=0,o.selectOne("",0);var r=o.lineupAllArr,n=TE89.FK92(r);n[0]&&o.selectOne(n[0].u,n[0].t),this.cancelSelect()},t.prototype.ZX16=function(){this.apF(J4.A22)},t.prototype.openHeroBag=function(){},t.prototype.GX64=function(){this.apF(J4.A3)},t.prototype.ZX17=function(t){var e=t.$target.index;for(var i in this.btnArr){var s=this.btnArr[i];s.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this),this["BtnBg"+i].source=i==e?"v1_btn_yellow01_png":(s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this),"v1_btn_yellow02_png")}var o=App.CM.gtM(O6.B56),r=o.lineupAllArr;r="0"==e?o.lineupAllArr?o.lineupAllArr.slice(0):[]:o.lineupArr[Number(e)-1]?o.lineupArr[Number(e)-1].slice(0):[];var n=TE89.FK92(r);n[0]&&o.selectOne(n[0].u,n[0].t),this.nowIndex=e,this.cancelSelect(),this.shopListView.itemList.scrollV=0},t.prototype.GW44=function(){var t=App.CM.gtM(O6.B56);if(t.itemId){var e=t.isAcType(t.itemId),i=TE89.FHH48(e.t),s=t.briefArr[e.t+""]?t.briefArr[e.t+""]:0;TE89.FI63(i.startype,e.s)<=s?this.apF(J4.A5):P18.sDP(O3.tr(1137))}},t.prototype.uBM=function(t,e){if(a.prototype.uBM.call(this,t,e),t instanceof TF41)for(var i in e)switch(e[i]){case J4.A3:case J4.A6:this.cancelSelect()}},t.prototype.cancelSelect=function(){var t=this.nowIndex,e=App.CM.gtM(O6.B56),i=[];i=t+""=="0"?e.lineupAllArr?e.lineupAllArr.slice(0):[]:e.lineupArr[Number(t)-1]?e.lineupArr[Number(t)-1].slice(0):[],this.shopListView.rfL(TE89.FK92(i));var s=e.isAcType(e.itemId);if(s){this.activationBtn.visible=!1,this.costGrp1.visible=this.activationBtn.visible,this.upStar.visible=!0,this.UpGroup.visible=!0,this.btnRaising.imgNew.visible=!0;for(var o=TE89.FHH48(s.t),r=0;r<10;r++)r<s.s?this["upStar"+r].source="v1_img_star1_png":this["upStar"+r].source="v1_img_star2_png";if(10<=s.s)this.btnRaising.enabled=!1,P16.sGF(this.btnRaising,!this.btnRaising.enabled),this.lbPay0.text=O3.tr(7661),this.btnRaising.imgNew.visible=!1;else{var n=e.briefArr[s.t+""]?e.briefArr[s.t+""]:0;this.lbPay0.text=""+o.call+n+" / "+TE89.FI63(o.startype,s.s),n>=TE89.FI63(o.startype,s.s)?this.lbPay0.textColor=2987793:(this.lbPay0.textColor=16458017,this.btnRaising.imgNew.visible=!1)}10<=s.s?this.btnRaising.enabled=!1:this.btnRaising.enabled=!0,P16.sGF(this.btnRaising,!this.btnRaising.enabled)}else{this.upStar.visible=!1,this.UpGroup.visible=!1,this.activationBtn.visible=!0,e.briefArr[e.itemId]?this.activationBtn.enabled=!0:this.activationBtn.enabled=!1;o=TE89.FHH48(e.itemId),n=e.briefArr[e.itemId+""]?e.briefArr[e.itemId+""]:0;this.lbPay1.text=o.call+n+" / 1",this.lbPay1.textColor=n<1?16458017:2987793,P16.sGF(this.activationBtn,!this.activationBtn.enabled)}this.costGrp1.visible=this.activationBtn.visible,this.activationBtn.imgNew.visible=this.activationBtn.enabled},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in a.prototype.close.call(this),this.shopListView.close(),this.btnArr){this.btnArr[i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this)}this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX16,this),this.activationBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GX64,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GW44,this)},t}(BaseEuiView);__reflect(HeroStarUpStarView.prototype,"HeroStarUpStarView");var HeroStarUpView=function(a){function t(t,e){var i=a.call(this,t,e)||this;return i.btnArr=[],i.nowIndex=0,i.timerArray=[],i.isAuto=!1,i.skinName="HeroStarUpSkin",i.lbStr0.textFlow=M18.HTP.parser(O3.tr(3703)),i.btnRaising.label=O3.tr(4077),i.btnSelfRai.label=O3.tr(8570),i.lbStr1.text=O3.tr(8405),i.lbStr0.text=O3.tr(7653),i.btnAct.label=O3.tr(3753),i.lbStr3.text=O3.tr(7069),i.btnStop.label=O3.tr(1461),i.btnArr=[i.btnSkin0,i.btnSkin1,i.btnSkin2,i.btnSkin3,i.btnSkin4],i}return __extends(t,a),t.prototype.initUI=function(){a.prototype.initUI.call(this);var t=N12.gID(TE89.init.illustrationAdvItem.value);this.imgGood0.setData(t),this.imgGood0.setImgSize({w:40,h:40});var e=N12.gID(75002);this.imgGood1.setData(e),this.imgGood1.setImgSize({w:40,h:40}),this.actGroup.visible=!1,this.upLevel.visible=!0},t.prototype.initData=function(){a.prototype.initData.call(this);var t={render:HeroStartemIcon,width:this.display.width,height:this.display.height,arrowScale:1,tileLayout:!0,verticalGap:6,horizontalGap:4};this.shopListView=new CommonListBase(t),this.display.addChild(this.shopListView),this.shopListView.verticalCenter=0,this.shopListView.horizontalCenter=0;for(var e=App.CM.gtM(O6.B56),i=0;i<this.btnArr.length;i++){if(i)this["text"+i].text=O3.tr(7592+i,e.acStateArr[i-1].length+"/"+e.lineupArr[i-1].length);else{var s=0;for(var o in e.acStateArr)s+=e.acStateArr[o].length;var r=0;for(var n in e.lineupArr)r+=e.lineupArr[n].length;this["text"+i].text=O3.tr(7592+i,s+"/"+r)}}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in a.prototype.open.call(this),this.btnAct.addEventListener(egret.TouchEvent.TOUCH_TAP,this.actHero,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnSelfRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upLvDirect,this),this.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.shopListView.open(),this.btnArr){var s=this.btnArr[i];this["BtnBg"+(s.index=i)].index=i,this["text"+i].index=i,this["BtnBg"+i].source="0"!=i?(s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this),"v1_btn_yellow02_png"):"v1_btn_yellow01_png"}this.nowIndex=0;var o=App.CM.gtM(O6.B56);o.viewType=!0,o.selectOne("",0);var r=o.lineupAllArr,n=TE89.FK92(r);n[0]&&o.selectOne(n[0].u,n[0].t),this.cancelSelect()},t.prototype.cancelSelect=function(){this.btnStop.visible&&this.stopAuto();var t=this.nowIndex,e=App.CM.gtM(O6.B56),i=[];i=t+""=="0"?e.lineupAllArr?e.lineupAllArr.slice(0):[]:e.lineupArr[Number(t)-1]?e.lineupArr[Number(t)-1].slice(0):[],this.costGrp0.visible=!0,this.shopListView.rfL(TE89.FK92(i));var s=e.isAcType(e.itemId);if(this.pBarPro0.slideDuration=0,s){if(80<=s.l)this.btnRaising.enabled=!1,this.btnSelfRai.enabled=!1,this.costGrp0.visible=!1,this.pBarPro0.labelFunction=function(t,e){return O3.tr(1463)},this.pBarPro0.value=this.pBarPro0.maximum,this.pBarPro0.imgShort.width=0,this.btnStop.visible&&this.stopAuto();else{this.ZM95(s.e,TE89.level[s.l+1].exp),this.lbCostGood0.text=TE89.FG29(1,s.l+1),this.lbCostGood1.text=TE89.FG29(2,s.l+1);N12.giC(TE89.init.illustrationAdvItem.value),N12.giC(75002);var o=TE89.level[s.l+1]&&TE89.level[s.l+1].reqnum,r=TE89.level[s.l+1]&&TE89.level[s.l+1].cash;this.btnRaising.enabled=!0,this.initBtn(o,r)}this.actGroup.visible=!1,this.upLevel.visible=!0}else{this.lbCostGood0.text=TE89.FG29(1,1),this.lbCostGood1.text=TE89.FG29(2,1),this.btnRaising.enabled=!1,this.btnSelfRai.enabled=!1,this.actGroup.visible=!0,this.upLevel.visible=!1;var n=TE89.FHH48(e.itemId),a=e.briefArr[e.itemId+""]?e.briefArr[e.itemId+""]:0;this.lbPay0.text=n.call+a+" / 1",this.lbPay0.textColor=a<1?16458017:2987793,e.briefArr[e.itemId]?this.btnAct.enabled=!0:this.btnAct.enabled=!1,e.briefArr[e.itemId]?this.btnAct.enabled=!0:this.btnAct.enabled=!1,P16.sGF(this.btnAct,!this.btnAct.enabled)}P16.sGF(this.btnRaising,!this.btnRaising.enabled),P16.sGF(this.btnSelfRai,this.isAuto||!this.btnSelfRai.enabled),this.btnSelfRai.imgNew.visible=!this.isAuto&&this.btnSelfRai.enabled&&this.upRed(),this.btnRaising.imgNew.visible=this.btnRaising.enabled&&this.upRed(),this.pBarPro0.slideDuration=100,this.ZO84()},t.prototype.ZO84=function(){if(this.lbCostGood0&&this.lbCostGood0.text){var t=this.lbCostGood0.text.split("/"),e=0;null!=t[0]&&null!=t[0]&&(e=parseInt(t[0]));var i=0;null!=t[1]&&null!=t[1]&&(i=parseInt(t[1])),this.lbCostGood0.textColor=i<=e?2987793:14164514}},t.prototype.ZX17=function(t){var e=t.$target.index;for(var i in this.btnArr){var s=this.btnArr[i];s.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this),this["BtnBg"+i].source=i==e?"v1_btn_yellow01_png":(s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this),"v1_btn_yellow02_png")}var o=App.CM.gtM(O6.B56),r=o.lineupAllArr;r="0"==e?o.lineupAllArr?o.lineupAllArr.slice(0):[]:o.lineupArr[Number(e)-1]?o.lineupArr[Number(e)-1].slice(0):[];var n=TE89.FK92(r);this.nowIndex=e,n[0]&&o.selectOne(n[0].u,n[0].t),this.cancelSelect(),this.shopListView.itemList.scrollV=0},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in a.prototype.close.call(this),this.stopAuto(),this.shopListView.close(),this.btnArr){this.btnArr[i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX17,this)}this.btnAct.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.actHero,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnSelfRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.upLvDirect,this),this.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.isAuto=!1},t.prototype.uBM=function(t,e){if(a.prototype.uBM.call(this,t,e),t instanceof TF41)for(var i in e)switch(e[i]){case J4.A3:this.updeteActive();break;case J4.A10:this.updeteActive(),this.littleAddExp(t)}},t.prototype.updeteActive=function(){var t=this.nowIndex,e=App.CM.gtM(O6.B56),i=[];i=t+""=="0"?e.lineupAllArr?e.lineupAllArr.slice(0):[]:e.lineupArr[Number(t)-1]?e.lineupArr[Number(t)-1].slice(0):[],this.shopListView.rfL(TE89.FK92(i)),this.costGrp0.visible=!0;var s=e.isAcType(e.itemId);if(s){if(80<=s.l)this.btnRaising.enabled=!1,this.btnSelfRai.enabled=!1,this.pBarPro0.labelFunction=function(t,e){return O3.tr(1463)},this.pBarPro0.value=this.pBarPro0.maximum,this.pBarPro0.imgShort.width=0,this.btnStop.visible&&this.stopAuto(),this.costGrp0.visible=!1;else{this.lbCostGood0.text=TE89.FG29(1,s.l+1),this.lbCostGood1.text=TE89.FG29(2,s.l+1);N12.giC(TE89.init.illustrationAdvItem.value),N12.giC(75002);var o=TE89.level[s.l+1]&&TE89.level[s.l+1].reqnum,r=TE89.level[s.l+1]&&TE89.level[s.l+1].cash;this.btnRaising.enabled=!0,this.actGroup.visible=!1,this.upLevel.visible=!0,this.initBtn(o,r)}this.btnStop.visible&&(this.btnRaising.enabled=!0)}else{this.lbCostGood0.text=TE89.FG29(1,1),this.lbCostGood1.text=TE89.FG29(2,1),this.btnRaising.enabled=!1,this.actGroup.visible=!0,this.upLevel.visible=!1;var n=TE89.FHH48(e.itemId),a=e.briefArr[e.itemId+""]?e.briefArr[e.itemId+""]:0;this.lbPay0.text=n.call+a+" / 1",this.lbPay0.textColor=a<1?16458017:2987793,e.briefArr[e.itemId]?this.btnAct.enabled=!0:this.btnAct.enabled=!1,P16.sGF(this.btnAct,!this.btnAct.enabled)}P16.sGF(this.btnSelfRai,this.isAuto||!this.btnSelfRai.enabled),P16.sGF(this.btnRaising,!this.btnRaising.enabled),this.btnSelfRai.imgNew.visible=!this.isAuto&&this.btnSelfRai.enabled&&this.upRed(),this.btnRaising.imgNew.visible=this.btnRaising.enabled&&this.upRed();for(var h=0;h<this.btnArr.length;h++){if(h)this["text"+h].text=O3.tr(7592+h,e.acStateArr[h-1].length+"/"+e.lineupArr[h-1].length);else{a=0;for(var p in e.acStateArr)a+=e.acStateArr[p].length;var l=0;for(var c in e.lineupArr)l+=e.lineupArr[c].length;this["text"+h].text=O3.tr(7592+h,a+"/"+l)}}this.ZO84()},t.prototype.actHero=function(){this.apF(J4.A3)},t.prototype.ZX16=function(){this.apF(J4.A22)},t.prototype.ZM95=function(t,e){this.pBarPro0.labelFunction=null,this.pBarPro0.minimum=0,this.pBarPro0.maximum=e,this.pBarPro0.value=t},t.prototype.raising=function(){this.GX65(!1,!1)},t.prototype.autoRaising=function(){this.isAuto=!0;var t=App.K16.doTimer(200,0,this.ZS77,this);this.timerArray.push(t)},t.prototype.autoUpgrade=function(t){var e=this;this.btnStop.visible=!0,this.btnRaising.visible=!1,this.btnSelfRai.imgNew.visible=!1,this.btnSelfRai.filters||(this.btnSelfRai.enabled=!1,P16.sGF(this.btnSelfRai,!0)),this.enabledBtn(!1);var i,s=this,o=(this.pBarPro0.maximum-this.pBarPro0.value)/parseInt(K19.init.animalAdvExp.value);if(t||(i=this.GX65(!0,!1))&&(o-=1),!o)return this.stopAuto();if(t||i){var r=App.K16.doTimer(500,o,function(){s.GX65(!0,t)},s,function(){e.stopAuto()});this.timerArray.push(r)}},t.prototype.ZS77=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B56),i=e.isAcType(e.itemId);if(80<=i.l)P18.sDP(O3.tr(8406));else{this.btnStop.visible=!0,this.btnRaising.visible=!1,this.btnSelfRai.imgNew.visible=!1,this.btnSelfRai.enabled=!1,P16.sGF(this.btnSelfRai,!0);var s=N12.giC(TE89.init.illustrationAdvItem.value);if(0<TE89.level[i.l+1].reqnum-s)return App.VM.open(O7.G87,TE89.init.illustrationAdvItem.value,TE89.level[i.l+1].reqnum-s),void this.stopAuto();if(TE89.level[i.l+1].cash>t.avatarInfo.co)return App.VM.open(O7.F12),void this.stopAuto();this.enabledBtn(!1),this.apF(J4.A9,1)}},t.prototype.ZL68=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B56),i=e.isAcType(e.itemId);if(80<=i.l)P18.sDP(O3.tr(8406));else{var s=N12.giC(TE89.init.illustrationAdvItem.value);if(0<TE89.level[i.l+1].reqnum-s)return App.VM.open(O7.G87,TE89.init.illustrationAdvItem.value,TE89.level[i.l+1].reqnum-s),void this.stopAuto();if(TE89.level[i.l+1].cash>t.avatarInfo.co)return App.VM.open(O7.F12),void this.stopAuto();this.enabledBtn(!1),this.apF(J4.A9,1)}},t.prototype.upRed=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B56),i=e.isAcType(e.itemId);if(!i)return!1;if(80<=i.l)return!1;var s=N12.giC(TE89.init.illustrationAdvItem.value);return!(0<TE89.level[i.l+1].reqnum-s)&&!(TE89.level[i.l+1].cash>t.avatarInfo.co)},t.prototype.stopAuto=function(){this.isAuto=!1,this.btnRaising.visible=!0,this.btnStop.visible=!1,this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=this.upRed(),P16.sGF(this.btnSelfRai,!1),this.closeHandler(),this.enabledBtn(!0),this.updeteActive()},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.enabledBtn=function(t){this.btnRaising.enabled=this.btnSelfRai.enabled=t},t.prototype.GX65=function(t,e){var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.B56),o=N12.giC(TE89.init.illustrationAdvItem.value),r=s.isAcType(s.itemId),n=TE89.level[r.l+1].reqnum-o;if(0<n&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,TE89.init.illustrationAdvItem.value,TE89.level[r.l+1].reqnum-o),t&&this.stopAuto(),!1;if(TE89.level[r.l+1].cash>i.avatarInfo.co)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&TE89.level[r.l+1].cash<=i.avatarInfo.co&&0<n){var a=TE89.init.illustrationAdvItem.value,h=N15.FA50(a),p=N15.FB92(a),l=TE89.level[r.l+1+""].reqnum;if(i.avatarInfo.bg>=h)2;else{if(!e&&s.isOpenUseYbView1)return this.canExpend(),this.closeHandler(),!1;if(!(i.avatarInfo.g>=p*(o?l-o:l)))return P7.FA78(),this.stopAuto(),!1;3}}return this.apF(J4.A9,1),!0},t.prototype.canExpend=function(){var t=this,e=App.CM.gtM(O6.B91);if(e.isOpenUseYbView1)if(this.btnRaising.filters){var i=function(){t.autoUpgrade(!0),e.isOpenUseYbView1=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else{i=function(){t.GX65(!1,!0),e.isOpenUseYbView1=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else this.autoUpgrade(!0)},t.prototype.littleAddExp=function(t){var e=this,i=t.isAcType(t.itemId);if(i){var s=i.e-this.pBarPro0.value;s<=0&&(s=this.pBarPro0.maximum-this.pBarPro0.value);var o=i.e;0==i.e&&(o=this.pBarPro0.maximum),egret.Tween.get(this.pBarPro0).to({value:o},150).call(function(){e.lbAddExp.visible=!0,e.lbAddExp.text="+"+s,TE89.level[i.l+1]&&e.ZM95(i.e,TE89.level[i.l+1].exp),egret.Tween.get(e.lbAddExp).to({top:-30},150).call(function(){e.lbAddExp.top=-15,e.lbAddExp.visible=!1})})}},t.prototype.initBtn=function(t,e){var i=N12.giC(TE89.init.illustrationAdvItem.value),s=N12.giC(75002),o=(this.pBarPro0.maximum-this.pBarPro0.value)/10;e*o<=s&&t*o<=i&&this.btnStop.visible,this.btnSelfRai.enabled=!0},t.prototype.upLvDirect=function(){this.ZL68()},t}(BaseEuiView);__reflect(HeroStarUpView.prototype,"HeroStarUpView");var ItemHeroBuyView=function(i){function t(t){var e=i.call(this)||this;return e.index=t,e.skinName=DialBuyItem,e}return __extends(t,i),t.prototype.setData=function(t){this.index=t;var e=App.CM.gtM(O6.B56).btnConf[t];this.itemId=e.itemId,this.itemNeed=e.itemNum,this.imgItem.source=N12.FJ86(e.itemId),this.lbMoney.textFlow=M18.HTP.parse(O3.tr(3857,e.itemNum)),this.btn.label=this.getBtnLabel(),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.lbBuy.visible=!1,1!=this.index?this.FM13(O3.tr(6988)):this.FM13(O3.tr(3859))},t.prototype.FM13=function(t){this.btn.size=t?(this.btn.label2=t,this.btn.labelY="12","22"):(this.btn.label2="",this.btn.labelY="0","24")},t.prototype.getBtnLabel=function(){return 0==this.index?O3.tr(7588,10):1==this.index?O3.tr(7588,1):2==this.index?O3.tr(7588,10):void 0},t.prototype.onClickGet=function(){var t=App.CM.gtM(O6.B56),e=N12.giC(Number(this.itemId));if(1==this.index&&1<=t.freeNum);else if(e<Number(this.itemNeed))return void(0==this.index?P18.sDP(O3.tr(5354)):P7.FA78());if(1!=t.intheRun){t.intheRun=!0;var i=this.index+1;1==this.index&&t.freeNum&&(i=4);var s={type:i};if(t.ZX14())return P18.sDP(O3.tr(7663));App.CM.apF(O6.B56,J4.A17,s),this.ZM77()}},t.prototype.GY64=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.ZM77=function(){App.CM.gtM(O6.C24).moving=!0},t}(eui.Component);__reflect(ItemHeroBuyView.prototype,"ItemHeroBuyView");var TG69=function(){function i(){}return i.FK35=function(t){i.base=t.entries_base||{},i.category=t.entries_category||{},this.crossBoss=this.FI65()},i.FI64=function(t){return i.base[t]?i.base[t]:null},i.FB75=function(t){if(i.category[t])return i.category[t].type},i.FI65=function(){var t=[];for(var e in i.base)3==i.base[e].type&&t.push(i.base[e]);return t},i}();__reflect(TG69.prototype,"TG69");var O16=function(){function t(){}return t.A24=10001,t.A20=10002,t.A19=10003,t.A16=10004,t.A17=10005,t.A13=10006,t.A14=10007,t.A9=10008,t.A10=10009,t.A6=10010,t.A18=10011,t.A15=10012,t.A4=10013,t.A3=10014,t.A7=10015,t.A5=10016,t.A11=10017,t.A8=10018,t.A1=10019,t.A2=10020,t.A12=10021,t.A23=1,t.A21=2,t.A22="SELECT_ENTRY",t}();__reflect(O16.prototype,"O16");var EntryIds=function(){function t(){}return t.DialActivity=100,t.WelfareItem=101,t.Invest=102,t.Growfund=103,t.SevenLogin=104,t.FirstRecharge=105,t.RechargeGift=106,t.Shootup=107,t.OpenServer=108,t.CarnivalActivity=109,t.EverydayRecharge=110,t.WonderActivity=111,t.HolidayActivity=112,t.HeroZhaoyun=113,t.AnimalItem=114,t.SocialItem=115,t.Shop=116,t.MailItem=117,t.SuitItem=118,t.BackPack=119,t.GoalActivity=120,t.FreePackage=121,t.DayGift=122,t.HeroTrain=123,t.DailyGift=124,t.recuiteMoney=128,t.MsBoss=129,t.AnimalUnlock=199,t.Climb=201,t.CrorrBoss=202,t.CrossCamp=203,t.MergeServer=125,t.CrossFish=205,t.msInvest=126,t.msFreePackage=127,t.WorthLimit=204,t.FirstRechargePackage=206,t.ComeBack=207,t.HappyBox=208,t.Boatrace=209,t.NewGift=210,t.CrossTeam=211,t.FaBaoDrawGuide=212,t.heroStar=213,t.CrossCliff=213,t.peerlessHero=214,t.kefu=215,t.Monarch=216,t.UltimateBattle=217,t.FaBaoHelp=218,t.ShiWTurn=219,t.peerlessHero1=220,t.SurvivalChallenge=222,t}();__reflect(EntryIds.prototype,"EntryIds");var TE90=function(s){function t(){var t=s.call(this)||this;t.homeProxy=new THH3(t),App.VM.register(O7.I39,"HomeFixView",t,K17.UI_Popup),t.rgF(O16.A14,t.GP36,t),t.rgF(O16.A9,t.GN45,t);var e=P7.FJ17();App.VM.register(O7.I4,"HomeHeadView",t,e?K17.UpFight:K17.UI),t.rgF(O16.A10,t.GN46,t),t.rgF(O16.A6,t.GL54,t),App.VM.register(O7.HH30,"HomeFightView",t,e?K17.UpFight:K17.UI),t.rgF(O16.A19,t.GL55,t),t.rgF(O16.A16,t.GJ70,t),t.rgF(O16.A24,t.GF94,t),App.VM.register(O7.I63,"HomeBgView",t,K17.UI),t.rgF(O16.A18,t.GR25,t),t.rgF(O16.A15,t.GP37,t),App.VM.register(O7.I64,"HomeUiView",t,K17.UI),t.rgF(O16.A17,t.GR24,t),t.rgF(O16.A13,t.GP35,t),App.VM.register(O7.G54,"HomeNoticeView",t,K17.UI),t.rgF(O16.A4,t.GJ69,t),t.rgF(O16.A3,t.GHH71,t),App.VM.register(O7.D89,"HomeCrossOpenView",t,K17.UI),t.rgF(O16.A7,t.GL56,t),t.rgF(O16.A5,t.GJ71,t),App.VM.register(O7.I25,"HomeDownView",t,K17.UI),t.rgF(O16.A11,t.GN44,t),t.rgF(O16.A8,t.GL53,t),t.rgF(O16.A2,t.GL52,t),t.rgF(O16.A12,t.GP34,t);var i=new THH2(t);return i.aLV(O7.I78),i.aLV(O7.HH30),i.aLV(O7.I4),i.aLV(O7.I85),t.homeProxy=new THH3(t),t}return __extends(t,s),t.prototype.GP34=function(){return App.TF3.loadGroups("preload",["start"],null,null,this)},t.prototype.GU26=function(t){this.GL56()},t.prototype.GL50=function(){var t=App.VM.gOV(O7.D89);t&&t.setVisible(!0)},t.prototype.GQ48=function(t){t.fightType!==P15.A3&&this.GL51()},t.prototype.GL51=function(){var t=App.VM.gOV(O7.D89);t&&t.setVisible(!1)},t.prototype.GR24=function(){App.VM.open(O7.I64)},t.prototype.GP35=function(){App.VM.close(O7.I64)},t.prototype.GJ69=function(){App.VM.open(O7.G54)},t.prototype.GN44=function(){this.homeProxy.ZI93({type:"link"})},t.prototype.GL52=function(t){if(0==t.s){var e=App.CM.gtM(O6.C10);e.ftGoogleLink=t.r.android,e.ftIosLink=t.r.ios,App.VM.open(O7.I25)}else P18.sDP(O3.tr(5679))},t.prototype.GL53=function(){App.VM.close(O7.I25)},t.prototype.GHH71=function(){App.VM.close(O7.G54)},t.prototype.GP36=function(){App.VM.open(O7.I39),this.GX66()},t.prototype.GX66=function(){if("fth5"===platform.name||"insgame"===platform.name||"japan"===platform.name||"english"===platform.name||"wakool"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"huanyu"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name)platform.updateRole("enterGame"),platform.collect("EnterGame");else if("qq"===platform.name||"awy"===platform.name||"crazy"===platform.name||"h5"===platform.name||"wanba"===platform.name||"oppo"===platform.name||"meizu"===platform.name||"cx"===platform.name||"vivo"===platform.name||"nativeVivo"===platform.name||"huawei"===platform.name){var t=App.CM.gtM(O6.B97);platform.updateRole(t.getRoleInfo(),"enterGame")}else if("wxgame"===platform.name&&("P0004185"===platform.gameId||"P0004186"===platform.gameId||"P0004870"===platform.gameId||"P0004869"===platform.gameId)){t=App.CM.gtM(O6.B97);window.ShSdk.xgSend("进入游戏",t.getRoleInfo()),window.ShSdk.xgSendCpa("进入游戏")}},t.prototype.GN45=function(){App.VM.close(O7.I39)},t.prototype.GN46=function(){App.VM.open(O7.I4)},t.prototype.GL54=function(){App.VM.close(O7.I4)},t.prototype.GL55=function(){App.VM.open(O7.HH30)},t.prototype.GJ70=function(){App.VM.close(O7.HH30)},t.prototype.GF94=function(t){var e=App.CM.gtM(O6.C10);e.homeFightState=t,e.notify()},t.prototype.GR25=function(){App.VM.open(O7.I63)},t.prototype.GP37=function(){App.VM.close(O7.I63)},t.prototype.GL56=function(){var t=App.CM.gtM(O6.B99),e=!0;(t.isFighting&&t.fightType&&t.fightType!==P15.A3||t.fightSceneType!==I4.A8)&&(e=!1),App.VM.open(O7.D89);var i=App.SceneManager.getCurrScene();P7.FJ54()&&M2.A4==i&&e?this.GL50():this.GL51()},t.prototype.GJ71=function(){App.VM.close(O7.D89)},__decorate([Ioc.Listener(GameEvent.EXIT_BATTLE)],t.prototype,"GU26",null),__decorate([Ioc.Listener(GameEvent.ENTRY_BATTLE)],t.prototype,"GQ48",null),t=__decorate([Ioc.MVC],t)}(TE11);__reflect(TE90.prototype,"TE90");var THH2=function(i){function t(t){var e=i.call(this,t)||this;return e.homeFightState="fight",e.ftGoogleLink=void 0,e.ftIosLink=void 0,e}return __extends(t,i),t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.call(this,this,t)},t.prototype.equipHong=function(){var t=App.CM.gtM(O6.C18),e=App.CM.gtM(O6.B98),i=App.CM.gtM(O6.B90),s=App.CM.gtM(O6.B82),o=App.CM.gtM(O6.C7),r=App.CM.gtM(O6.B59),n=r.canHlUpLevel()||r.zhenTuRed()||r.canJuLingRed(),a=App.CM.gtM(O6.A87);return t.updateNew()||e.canAvaEquip.length||e.legendHong()||i.haveHong()||0<s.ZV17()?1:s.newActTitle?1:s.newActFashion?1:Jade.Utils.hasDot()?1:Jade.Utils.FL83()?1:a.FL35()||o.getRed()?1:n?1:0},t}(TG79);__reflect(THH2.prototype,"THH2");var THH3=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.ZI93=function(t){this.rSMO("action/user/getDownLoadUrl",this.GL52,this),this.sendHttpMsg("action/user/getDownLoadUrl",t)},t.prototype.GL52=function(t){this.apF(O16.A2,t)},t}(TG80);__reflect(THH3.prototype,"THH3");var THH26=function(){function t(){}return t.FHH51=function(t){for(var e=TG69.base[t],i=null!=e.changedate?M18.FL28(e.changedate,","):[],s=null!=e.changefonts?M18.FL28(e.changefonts,","):[],o=0,r=-1,n=App.CM.gtM(O6.B43).serOpenDay;o<i.length&&n+1>Number(i[o]);)r=o++;return s[r]},t}();__reflect(THH26.prototype,"THH26");var home,ChartItemRender=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.zone&&(this.zone.text=this.data.zone),this.nameLb&&(this.nameLb.text=this.data.name),this.vipImg&&(this.vipImg.source=this.data.vipImg),this.content&&(this.content.text=":"+this.data.content)},e}(eui.ItemRenderer);__reflect(ChartItemRender.prototype,"ChartItemRender"),function(t){var e=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onBegin=function(){TG40.playClickEffect()},t}(eui.Button);t.HitBut=e,__reflect(e.prototype,"home.HitBut")}(home||(home={})),function(t){var e=function(e){function t(){var t=e.call(this)||this;return t.skinName="HitButSkin2",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.btn.icon=this.data.icon,this.btn.imgNew.visible=0<this.data.dot},t.prototype.updateDot=function(){},t}(eui.ItemRenderer);t.HitBut2=e,__reflect(e.prototype,"home.HitBut2")}(home||(home={})),function(t){var e=function(e){function t(){var t=e.call(this)||this;return t.bgStr="",t.grpX=0,t.grpY=0,t.sk=2,t.isLock=!1,t.strColor="0xfeeedf",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onBegin=function(){TG40.playClickEffect()},t.prototype.setLockState=function(t){(this.isLock=t)?(this.sk=0,this.strColor="0xd82222"):this.sk=2},t}(eui.Button);t.HomeBgBtn=e,__reflect(e.prototype,"home.HomeBgBtn")}(home||(home={}));var HomeBgView=function(o){function t(t,e){var i=o.call(this,t,e)||this,s=P7.FJ17();return i.skinName=s?"HomeBgPcSkin":HomeBgSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),K17.Fight.x=.5*(App.TG37.getWidth()-640),this.boss.label=O3.tr(5373),this.legion.label=O3.tr(5374),this.actHall.label=O3.tr(5375),this.dragon.label=O3.tr(5376),this.arena.label=O3.tr(5377),this.grpTeam.grp.visible=!1,this.auction.label=O3.tr(6231),this.auction.grp.scaleX=this.auction.grp.scaleY=.9,P7.FJ17()&&(this.scrBar.scrollPolicyV=eui.ScrollPolicy.OFF,this.scrBar.scrollPolicyH=eui.ScrollPolicy.OFF,this.imgbg.visible=!1)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];App.TG37.getHeight()<1136&&(this.scrBar.y=-90),this.gAvatar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF51,this),this.dragon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GJ34,this),this.arena.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GK86,this),this.boss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GM76,this),this.legion.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GJ88,this),this.grpTeam.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL70,this),this.actHall.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF52,this),this.auction.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF53,this);var i=App.CM.gtM(O6.C4);this.ZG33(i,!0);var s=App.CM.gtM(O6.B85);this.ZF22(s),this.ZI94();var o=App.CM.gtM(O6.C21);this.ZI8(o);var r=App.CM.gtM(O6.B89);this.ZE88(r);var n=App.CM.gtM(O6.B76);this.ZX18(n),this.ZC59(App.CM.gtM(O6.A43)),this.ZL69(),this.ZE15(),this.imgbg.validateNow(),P7.FJ17()?App.THH32.aUE(this.homeGroup,"wdsg_zcjyq_ssa_001",500,600):App.THH32.aUE(this.homeGroup,"wdsg_zcjyq_ssa_001",this.imgbg.width/2,this.imgbg.height/2),App.THH32.aUE(this.actHall,"wdsg_hddt_j2d_001",90,104)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=e[0];t instanceof TG15&&this.ZF22(t),(t instanceof THH18||t instanceof TE64||t instanceof TE70||t instanceof TD92||t instanceof THH9||t instanceof TD92||t instanceof THH14)&&this.ZI94(),t instanceof TG91&&this.ZI8(t),t instanceof TG20&&this.ZE88(t),t instanceof TG48&&this.ZG33(t,"time"!=s),(t instanceof THH11||t instanceof TG17)&&this.ZL69(),t instanceof TG12&&s==L13.A69&&this.ZE15(),t instanceof Auction.Model&&this.ZX18(t),t instanceof UltimateBattle.Model&&this.ZC59(t),t instanceof HeroBattleModel&&this.ZG33(App.CM.gtM(O6.C4),"time"!=s)},t.prototype.ZL69=function(){this.actHall.imgRed.visible=0<TC90.hasRed()},t.prototype.ZI8=function(t){this.boss.imgRed.visible=0<t.getRedNums()},t.prototype.ZB6=function(){this.objModel&&(this.objModel.destory(),this.gAvatar.removeChildren(),delete this.objModel),delete this.ultimateAId},t.prototype.ZC59=function(t){if(t.fu){if(t.fu.aid==this.ultimateAId)return;this.ZB6();var e=P7.copyTab(t.fu);delete e.n,this.objModel=new FightGameObject;var i=P7.ObjectSet({x:50,y:80,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},e);this.objModel.setData(i,this.gAvatar),this.objModel.action=Action.Stand,this.ultimateAId=t.fu.aid}else this.ZB6()},t.prototype.ZI94=function(){var t=App.CM.gtM(O6.C23),e=App.CM.gtM(O6.B16),i=App.CM.gtM(O6.B24),s=App.CM.gtM(O6.B28),o=App.CM.gtM(O6.A99);this.grpTeam.imgRed.visible=!!(t.isHong||1==e.state||i.FL35()||s.FL35()||o.FL35())},t.prototype.ZG33=function(t,e){var i=0;e&&(i+=t.nClTimes);var s=App.CM.gtM(O6.A89),o=App.CM.gtM(O6.HeroBattle);i+=s.FL35(),i+=o.FL35(),this.arena.imgRed.visible=!(i<=0)},t.prototype.ZF22=function(t){this.dragon.imgRed.visible=!1;t.ZA41()?this.dragon.imgRed.visible=!0:t.ZA57()?this.dragon.imgRed.visible=!0:t.ZB73()?this.dragon.imgRed.visible=!0:t.ZA76()&&(this.dragon.imgRed.visible=!0)},t.prototype.ZE88=function(t){var e=App.CM.gtM(O6.B82).avatarInfo,i=L4.gIV("unlockLevel"),s=App.CM.gtM(O6.A42);e.l>=i?t.myLegion&&t.myLegion.legion?this.legion.imgRed.visible=0<t.FL35()||0<s.FL35():this.legion.imgRed.visible=!0:this.legion.imgRed.visible=!1},t.prototype.ZX18=function(t){if(window.wx_server_type&&"audit"==window.wx_server_type)this.auction.visible=!1;else{var e=Auction.Config.openLv;this.auction.imgRed.visible=O4.getLv()>=e&&0<t.FL35()}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.gAvatar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF51,this),this.dragon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GJ34,this),this.arena.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GK86,this),this.grpTeam.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL70,this),this.legion.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GJ88,this),App.THH32.rEf(this.homeGroup,"wdsg_zcjyq_ssa_001"),App.THH32.rEf(this.actHall,"wdsg_hddt_j2d_001")},t.prototype.ZE15=function(){var t=O4.getLv(),e=L1.init.materialOpenLevel.value;this.dragon.setLockState(t<e);var i=M15.FF82();this.arena.setLockState(t<i);var s=N19.FE69();this.grpTeam.setLockState(t<s);var o=N17.FE69();this.boss.setLockState(t<o);var r=L4.gIV("unlockLevel");this.legion.setLockState(t<r);var n=Auction.Config.openLv;this.auction.setLockState(t<n)},t.prototype.ZF51=function(){App.CM.gtM(O6.A43).fu&&App.VM.open(O7.D7)},t.prototype.GJ34=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=L1.init.materialOpenLevel.value;if(t.l<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.G46)},t.prototype.GK86=function(){var t=App.CM.gtM(O6.B82).avatarInfo.l,e=M15.FF82();if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else this.aCF(O6.C4,N6.A31)},t.prototype.ZL70=function(){P18.sDP(O3.tr(6588))},t.prototype.GM76=function(){var t=App.CM.gtM(O6.B82).avatarInfo.l,e=N17.FE69();if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else this.aCF(O6.C21,O9.A80)},t.prototype.GJ88=function(){this.aCF(O6.B89,L11.B59)},t.prototype.ZF52=function(){this.aCF(O6.A60,D17.A2)},t.prototype.ZF53=function(){var t=O4.getLv(),e=Auction.Config.openLv;if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else this.aCF(O6.B76,Auction.Const.OpenMainView)},t}(BaseEuiView);__reflect(HomeBgView.prototype,"HomeBgView");var HomeCrossOpenView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HomeCrossOpenSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.setItem(this.btnCrossBoss,G9.FJ53(),EntryIds.CrorrBoss),this.setItem(this.btnClimb,M16.FJ53(),EntryIds.Climb),this.setItem(this.btnCrossCamp,G10.FJ53(),EntryIds.CrossCamp),this.setItem(this.btnCrossFish,TD95.FJ53(),EntryIds.CrossFish),this.setItem(this.btnBoatrace,Boatrace.Config.boatTime.split(",")[0],EntryIds.Boatrace),this.setItem(this.btnCrossCliff,TD39.FJ53(),EntryIds.CrossCliff),this.setItem(this.btnMonarch,MonarchTest.Config.FJ53(),EntryIds.Monarch),this.setItem(this.btnSurvival,SurvivalConfig.FJ53(),EntryIds.SurvivalChallenge),this.setPosition()},t.prototype.setItem=function(t,e,i){var s=TG69.base[i];t.bgImg=s.icon,P7.FD57(s.changefonts,t.lbName),t.name=s.sortid,t.data=s.id,t.moreGp.visible=!0,t.moreLb.text=e},t.prototype.setPosition=function(){for(var t=0;t<this.grpCorss.numChildren-1;t++){var e=this.grpCorss.getChildAt(t),i=this.grpCorss.getChildAt(t+1);parseInt(e.name)>parseInt(i.name)&&this.grpCorss.swapChildrenAt(t,t+1)}},t.prototype.open=function(){this.btnCrossBoss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnClimb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnCrossCamp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnCrossFish.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnBoatrace.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnCrossCliff.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnMonarch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnSurvival.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.updateAll()},t.prototype.updateAll=function(){var t;this.openData=M17.FB24(),t=App.CM.gtM(O6.C6),this.isShowClimb(t),t=App.CM.gtM(O6.B16),this.ZO85(t),t=App.CM.gtM(O6.B22),this.ZO86(t),t=App.CM.gtM(O6.B28),this.ZO87(t),t=App.CM.gtM(O6.B53),this.ZS78(t),t=App.CM.gtM(O6.B8),this.ZL71(t),this.ZX19(App.CM.gtM(O6.A93)),t=App.CM.gtM(O6.SurvivalChallenge),this.isShowSurvival(t)},t.prototype.close=function(){this.btnCrossBoss.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnClimb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnCrossCamp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnCrossFish.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnBoatrace.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.btnSurvival.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FHH98,this),this.openData=null},t.prototype.isShowClimb=function(t){this.btnClimb.visible=this.btnClimb.includeInLayout=t.isOpen&&!this.openData[C9.A14].isOver},t.prototype.ZO85=function(t){this.btnCrossBoss.visible=this.btnCrossBoss.includeInLayout=t.isOpen&&!this.openData[C9.A12].isOver},t.prototype.ZO86=function(t){this.btnCrossCamp.visible=this.btnCrossCamp.includeInLayout=t.isOpen&&!this.openData[C9.A15].isOver},t.prototype.ZO87=function(t){this.btnCrossFish.visible=this.btnCrossFish.includeInLayout=t.isOpen&&!this.openData[C9.A13].isOver},t.prototype.ZS78=function(t){this.btnBoatrace.visible=this.btnBoatrace.includeInLayout=1<=t.st&&!this.openData[C9.A16].isOver},t.prototype.ZL71=function(t){this.btnCrossCliff.visible=this.btnCrossCliff.includeInLayout=t.isOpen&&!this.openData[C9.A17].isOver},t.prototype.ZX19=function(t){this.btnMonarch.visible=this.btnMonarch.includeInLayout=1==t.open&&!this.openData[C9.A18].isOver},t.prototype.isShowSurvival=function(t){this.btnSurvival.visible=this.btnSurvival.includeInLayout=(0<t.st||0<t.to)&&!this.openData[C9.TYPE28].isOver},t.prototype.FHH98=function(t){switch(t.target.data){case EntryIds.Climb:if(App.CM.gtM(O6.C6).climbState)return void TG84.FM16(ViewMapingIndex.Climb);break;case EntryIds.CrorrBoss:if(App.CM.gtM(O6.B16).state)return void TG84.FM16(ViewMapingIndex.CrossBoss);break;case EntryIds.CrossCamp:if(App.CM.gtM(O6.B22).state)return void TG84.FM16(ViewMapingIndex.CrossCamp);break;case EntryIds.CrossFish:if(App.CM.gtM(O6.B28).state)return void TG84.FM16(ViewMapingIndex.CrossFish);break;case EntryIds.CrossCliff:if(App.CM.gtM(O6.B8).state)return void TG84.FM16(ViewMapingIndex.CrossCliff);break;case EntryIds.Boatrace:if(0<App.CM.gtM(O6.B53).st)return void App.CM.apF(O6.B53,Boatrace.Const.OpenMainView);break;case EntryIds.Monarch:if(App.CM.gtM(O6.A93).openState)return void App.CM.apF(O6.A93,MonarchTest.Const.OPEN);break;case EntryIds.SurvivalChallenge:if(0<App.CM.gtM(O6.SurvivalChallenge).st)return void TG84.FM16(ViewMapingIndex.Survival)}this.aCF(O6.A60,D17.A2,O7.E25)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.openData=M17.FB24(),t instanceof TG51)switch(e){case P4.V99:this.isShowClimb(t)}if(t instanceof TE64)switch(e){case P4.X39:this.ZO85(t)}if(t instanceof TE67)switch(e){case P4.Q62:this.ZO86(t)}if(t instanceof TE73)switch(e){case P4.Q76:this.ZO87(t)}if(t instanceof TD88)switch(e){case P4.P45:this.ZL71(t)}if(t instanceof Boatrace.Model&&this.ZS78(t),t instanceof MonarchTest.Model&&this.ZX19(t),t instanceof SurvivalModel)switch(e){case P4.CROSS_SURVIVAL_STATE_PUSH:this.isShowSurvival(t)}},t}(BaseEuiView);__reflect(HomeCrossOpenView.prototype,"HomeCrossOpenView");var HomeDownView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="HomeDownSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(t){s.prototype.open.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.comGoogle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goComGoogle,this),this.comApp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goComApp,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.comGoogle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goComGoogle,this),this.comApp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goComApp,this)},t.prototype.goComGoogle=function(){var t=App.CM.gtM(O6.C10);t.ftGoogleLink?window.open(t.ftGoogleLink,"_blank"):P18.sDP(O3.tr(5680))},t.prototype.goComApp=function(){P18.sDP(O3.tr(5552))},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(HomeDownView.prototype,"HomeDownView");var HomeFightView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=HomeFightSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),"fth5"===platform.name||"japan"===platform.name||"wakool"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"youle"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name?(this.btnDownload.visible=!0,this.btnDownload.includeInLayout=!0,P7.FD57(O3.tr(6653),this.btnDownload.lbName),this.wxFollow.x=this.wxFollow.y=30):(this.btnDownload.visible=!1,this.btnDownload.includeInLayout=!1,this.wxFollow.x=this.wxFollow.y=20),this.qqMember.visible=this.qqMember.includeInLayout=!1,this.qqMigrate.visible=this.qqMigrate.includeInLayout=!1},t.prototype.initData=function(){if(o.prototype.initData.call(this),"wxgame"===platform.name||"qq"===platform.name){var t=App.CM.gtM(O6.B82).avatarInfo.id;platform.listenShare(t,function(){App.CM.apF(O6.B68,K1.A14)},this)}},t.prototype.open=function(){P7.FD57(O3.tr(6664),this.awyAttention.lbName),P7.FD57(O3.tr(6654),this.backPack.lbName),P7.FD57(O3.tr(6655),this.daily.lbName),P7.FD57(O3.tr(6657),this.rechargeBackaward.lbName),P7.FD57(O3.tr(6658),this.firstRecharge.lbName),P7.FD57(O3.tr(6659),this.sevenLogin.lbName),P7.FD57(O3.tr(6660),this.advanceRank.lbName),P7.FD57(O3.tr(6661),this.rechargeGift.lbName),P7.FD57(O3.tr(6662),this.wxShare.lbName),P7.FD57(O3.tr(6663),this.strength.lbName),P7.FD57(O3.tr(6665),this.awyInvite.lbName),P7.FD57(O3.tr(6718),this.wxFollow.lbName),this.rechargeGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GF31,this);var t=App.CM.gtM(O6.A57);this.ZB7(t);var e=App.CM.gtM(O6.C10);this.updateState(e.homeFightState),this.wxFollow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL73,this);var i=App.CM.gtM(O6.B48);this.ZD17(i),this.backPack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL72,this),this.daily.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GL21,this);var s=App.CM.gtM(O6.C5);this.ZG83(s);var o=App.CM.gtM(O6.C23);this.ZI94(o);var r=App.CM.gtM(O6.B82);this.ZE70(r),this.grpChapter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF54,this);var n=App.CM.gtM(O6.B64);this.ZD73(n),this.rechargeBackaward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GB19,this);var a=App.CM.gtM(O6.A8);this.ZA21(a);var h=App.CM.gtM(O6.B66);this.ZB8(h),this.monthCard&&this.monthCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI96,this),this.showPackNew(),this.firstRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GE23,this),this.rechargeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZC60,this);var p=App.CM.gtM(O6.A44);this.ZA79(p),this.sevenLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH1,this);var l=App.CM.gtM(O6.A96);this.ZB84(l);var c=App.CM.gtM(O6.A75);this.ZB29(c),this.advanceRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GG84,this),this.strength.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO60,this),this.wxShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS79,this);var u=App.CM.gtM(O6.B68);if(this.ZE16(u),this.awyAttention.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAwyAttention,this),this.qqMember.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openQQMember,this),"wxgame"==platform.name)this.ZF55(i),this.isPopUpWin(i);else if("wanba"===platform.name){var d=App.CM.gtM(O6.B74);this.ZHH2(d),this.ZS80(d)}else{var v=App.CM.gtM(O6.A62);this.ZB9(v)}this.qqMigrate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX22,this),this.ZI97(),this.awyInvite.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX23,this);var f=App.CM.gtM(O6.B15);this.ZC61(f),this.ZX21(),this.btnDownload.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO89,this),this.btnDownload.visible=this.btnDownload.includeInLayout="P0000048"===platform.gameId,this.dealWithIOS();var g=App.CM.gtM(O6.C14);g.isShopinvite=this.wxShare.visible||this.awyInvite.visible,"english"==platform.name&&"P0000131"==platform.gameId&&(g.isShopinvite=!0),this.ZX20()},t.prototype.ZX20=function(){if(P7.FM15()){var t=App.CM.gtM(O6.B82),e=K18.gIV("tcVideoLv"),i=Number(e.split(",")[0]),s=Number(e.split(",")[1]);this.wxFollow.bgImg="v1_btn_aiwanfuli_png",P7.FD57("",this.wxFollow.lbName),this.wxFollow.visible=this.wxFollow.includeInLayout=t.avatarInfo.l>=i&&t.avatarInfo.l<=s,this.wxFollow.visible&&!P7.showTxVedio&&(P7.showTxVedio=!0,TG90.FE62(this.wxFollow))}},t.prototype.dealWithIOS=function(){if(("fth5"===platform.name||"japan"===platform.name||"english"===platform.name||"ft7477"===platform.name||"huanyu"===platform.name)&&P7.FL24())return this.wxFollow.visible=!1,this.wxFollow.includeInLayout=!1,this.btnDownload.visible=!1,this.btnDownload.includeInLayout=!1,this.wxShare.visible=!1,void(this.wxShare.includeInLayout=!1);P7.FG67()&&(this.monthCard&&(this.monthCard.visible=!1,this.monthCard.includeInLayout=!1),this.rechargeImg&&(this.rechargeImg.visible=!1,this.rechargeImg.includeInLayout=!1),this.firstRecharge&&(this.firstRecharge.visible=!1,this.firstRecharge.includeInLayout=!1),this.rechargeBackaward&&(this.rechargeBackaward.visible=!1,this.rechargeBackaward.includeInLayout=!1),this.rechargeBackawardGrp&&(this.rechargeBackawardGrp.visible=!1,this.rechargeBackawardGrp.includeInLayout=!1),this.rechargeGift&&(this.rechargeGift.visible=!1,this.rechargeGift.includeInLayout=!1),this.rechargeGiftGrp&&(this.rechargeGiftGrp.visible=!1,this.rechargeGiftGrp.includeInLayout=!1))},t.prototype.ZX21=function(){var t=App.CM.gtM(O6.B27),e=parseInt(TE5.init.level.value);if(O4.getLv()>=e)if(this.strength.visible=this.strength.includeInLayout=!0,App.CM.gtM(O6.B82).isGrowRed)this.strength.imgNew.visible=!0;else{var i=t.getTotalRed();this.strength.imgNew.visible=i}else this.strength.visible=this.strength.includeInLayout=!1;if(this.strength.visible){if(i=t.getTotalRed())this.strength.bgImg="v1_btn_sixiangzhen_png",P7.FD57(O3.tr(6716),this.strength.lbName);else{this.strength.bgImg=1==t.isGetFinal?"v1_btn_woyaobianqiang_png":"v1_btn_sixiangzhen_png";var s=1==t.isGetFinal?O3.tr(6663):O3.tr(6716);P7.FD57(s,this.strength.lbName)}this.strength.updateCd(TE55.getAimCD())}},t.prototype.ZD17=function(t){if("PM001232"===platform.gameId||"P0000272"===platform.gameId||"P0000271"===platform.gameId||"P0004901"===platform.gameId||"P0004896"===platform.gameId||"P0004973"===platform.gameId||"P0004983"===platform.gameId||"P0005515"===platform.gameId||"P0005516"===platform.gameId||"PM001330"===platform.gameId)return this.wxFollow.visible=!1,void(this.wxFollow.includeInLayout=!1);if("oppo"===platform.name||"P0004890"===platform.gameId||"P0004891"===platform.gameId||"vivo"===platform.name||"P0000242"===platform.gameId||"P0000232"===platform.gameId||"P0006016"===platform.gameId||"P0006017"===platform.gameId||"huawei"===platform.name)return this.wxFollow.visible=!1,void(this.wxFollow.includeInLayout=!1);if("wxgame"===platform.name&&("P0005523"===platform.gameId||"P0005524"===platform.gameId||"P0005672"===platform.gameId||"P0005673"===platform.gameId))return this.wxFollow.visible=!1,void(this.wxFollow.includeInLayout=!1);if("fth5"===platform.name&&("P0000263"===platform.gameId||"P0000191"===platform.gameId||"P0000192"===platform.gameId||"P0000240"===platform.gameId||"P0000256"===platform.gameId||"P0000259"===platform.gameId))return this.wxFollow.visible=!1,void(this.wxFollow.includeInLayout=!1);if("P0000211"===platform.gameId||"sdw"===platform.name||"P0000229"===platform.gameId||"PM000831"===platform.gameId||"P0008302"===platform.gameId||"P0008303"===platform.gameId||"PM000865"===platform.gameId||"youle"===platform.name||"wanba"===platform.name||"meizu"===platform.name||"nativeAndroid"===platform.name||"nativeVivo"===platform.name||"qq"===platform.name||"awy"===platform.name||"publish"===platform.name||"crazy"===platform.name||"shareit"===platform.name||P7.FM11()||"PM000880"===platform.gameId||"P10000"===platform.gameId||"PM000596"===platform.gameId||"P0000124"===platform.gameId||"P0000125"===platform.gameId||"P0000126"===platform.gameId||"PM000509"===platform.gameId||"PM000592"===platform.gameId||"PM000887"===platform.gameId||"PM000687"===platform.gameId||P7.FM12()||"wxgame"===platform.name&&platform.public_follow||"P0000121"===platform.gameId&&"7"===platform.channel||"PM000784"===platform.gameId||"P0000262"===platform.gameId)return this.wxFollow.visible=!1,void(this.wxFollow.includeInLayout=!1);if(window.wx_server_type&&"audit"==window.wx_server_type)return this.wxFollow.visible=!1,void(this.wxFollow.includeInLayout=!1);if("fth5"===platform.name||"insgame"===platform.name||"japan"===platform.name||"english"===platform.name||"wakool"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"huanyu"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name)return this.wxFollow.bgImg="icon_fbjump_png",void P7.FD57("",this.wxFollow.lbName);var e=K18.init.wechatConcernsLv.value,i=M18.FL28(e,","),s=parseInt(i[0]),o=parseInt(i[1]);0==t.s&&O4.getLv()>=s&&O4.getLv()<=o?(this.wxFollow.visible=this.wxFollow.includeInLayout=!0,App.CM.gtM(O6.B82).isWxRed?this.wxFollow.imgNew.visible=!0:this.wxFollow.imgNew.visible=!1):this.wxFollow.visible=this.wxFollow.includeInLayout=!1},t.prototype.ZE16=function(t){if("PM001117"!==platform.gameId)if("P0000263"!==platform.gameId&&"P0004134"!==platform.gameId&&"P0004135"!==platform.gameId&&"P0000271"!==platform.gameId&&"P0000272"!==platform.gameId)if("P0004186"!==platform.gameId&&"P0004185"!==platform.gameId&&"P0000229"!==platform.gameId)if("oppo"!==platform.name&&"vivo"!==platform.name&&"huawei"!==platform.name)if("fth5"===platform.name&&("P0000277"===platform.gameId||"P0000124"===platform.gameId||"P0000125"===platform.gameId||"P0000216"===platform.gameId||"P0000191"===platform.gameId||"P0000192"===platform.gameId||"P0000240"===platform.gameId||"P0000256"===platform.gameId||"P0000259"===platform.gameId||"P0000262"===platform.gameId)||P7.FM12())this.wxShare.visible=!1;else if("wxgame"!==platform.name||"P0005672"!==platform.gameId&&"P0005673"!==platform.gameId&&"P0005722"!==platform.gameId&&"P0005723"!==platform.gameId)if("freetop"===platform.name||"wxgame"===platform.name||"fth5"===platform.name||"qq"===platform.name||"wanba"===platform.name||"PM000596"===platform.gameId&&platform.isShare||"PM000607"===platform.gameId&&platform.isShare||"PM000880"===platform.gameId&&platform.isShare||"PM000509"===platform.gameId||"PM000592"===platform.gameId||"PM000887"===platform.gameId||"PM000784"===platform.gameId&&platform.isShare||"PM000948"===platform.gameId||"PM000980"===platform.gameId||"PM000990"===platform.gameId||"PM000991"===platform.gameId||"PM001053"===platform.gameId||"PM001054"===platform.gameId||"PM001106"===platform.gameId||"P0000244"===platform.gameId||"P0000245"===platform.gameId||"PM001146"===platform.gameId||"PM001178"===platform.gameId||"PM001232"===platform.gameId||"PM001245"===platform.gameId||"PM001277"===platform.gameId||"PM001354"===platform.gameId)if("wanba"!==platform.name||-1==window.OPEN_DATA.pf.indexOf("weixin")&&"QQLive"!=window.OPEN_DATA.qua.app)if("P0004890"!==platform.gameId&&"P0004891"!==platform.gameId&&"P0006016"!==platform.gameId&&"P0006017"!==platform.gameId||platform.sp)if(window.wx_server_type&&"audit"==window.wx_server_type)this.wxShare.visible="P0004973"===platform.gameId||"P0004983"===platform.gameId||"P0005515"===platform.gameId||"P0005516"===platform.gameId;else{var e=App.CM.gtM(O6.B82),i=J17.init.unlockLv.value;if(e.avatarInfo.l<i)this.wxShare.visible=!1;else if(this.wxShare.visible=!0,"fth5"!==platform.name&&"japan"!==platform.name&&"english"!==platform.name&&"wakool"!==platform.name&&"freetop"!==platform.name&&"ft7477"!==platform.name&&"youle"!==platform.name&&"my1737"!==platform.name&&"huanyu"!==platform.name&&"militop"!==platform.name&&"btgame"!==platform.name&&"sdw"!==platform.name&&"gaga"!==platform.name||P7.FD57("",this.wxShare.lbName),"wxgame"===platform.name||"qq"===platform.name||"h5"===platform.name?this.wxShare.bgImg=2!==t.fs?"i65062_png":"v1_img_f_png":"fth5"!==platform.name&&"japan"!==platform.name&&"english"!==platform.name&&"wakool"!==platform.name&&"freetop"!==platform.name&&"ft7477"!==platform.name&&"youle"!==platform.name&&"my1737"!==platform.name&&"huanyu"!==platform.name&&"militop"!==platform.name&&"btgame"!==platform.name&&"sdw"!==platform.name&&"gaga"!==platform.name||(this.wxShare.bgImg=2!==t.fs?"i65062_png":"icon_facebook_png"),this.wxShare.imgNew.visible=2!==t.fs,this.wxShare.imgNew.visible||(this.wxShare.imgNew.visible=0===t.isRead),!this.wxShare.imgNew.visible){var s=t.ZA96();if(s)return void(this.wxShare.imgNew.visible=s);if(s=t.ZA97())return void(this.wxShare.imgNew.visible=s);if(s=t.ZB66())return void(this.wxShare.imgNew.visible=s);if(s=t.ZC31())return void(this.wxShare.imgNew.visible=s);if(s=t.ZB31())return void(this.wxShare.imgNew.visible=s)}}else this.wxShare.visible=!1;else this.wxShare.visible=!1;else this.wxShare.visible=!1;else this.wxShare.visible=!1;else this.wxShare.visible=!1;else this.wxShare.visible=!1;else this.wxShare.visible=!1;else this.wxShare.visible=!1},t.prototype.ZS79=function(){2!==App.CM.gtM(O6.B68).fs?App.VM.open(O7.F17):(App.CM.apF(O6.B68,K1.A16),App.VM.open(O7.F65))},t.prototype.ZO60=function(){var t=App.CM.gtM(O6.B27);t.getTotalRed()?App.VM.open(O7.G55,O7.F22):1==t.isGetFinal?App.VM.open(O7.G55,O7.B35):App.VM.open(O7.G55,O7.F22)},t.prototype.ZB29=function(t){var e=O4.getLv();null!=t&&1==t.openState&&20<=e?(0<t.FL35()?this.advanceRank.imgNew.visible=!0:this.advanceRank.imgNew.visible=!1,this.advanceRank.visible=this.advanceRank.includeInLayout=!0,P7.FD57(t.advanceRankData.name,this.advanceRank.lbName)):this.advanceRank.visible=this.advanceRank.includeInLayout=!1},t.prototype.GG84=function(){var t=TF59.FB15(F7.A70);null!=t&&t.openState?TF59.FE54(t.actid):P18.sDP(O3.tr(3205))},t.prototype.ZO88=function(){var t=O4.getLv(),e=App.CM.gtM(O6.B66);if(10<=t&&0==e.monthCd)this.monthCard||(this.monthCard=new IconItem,this.monthCard.skinName="IconItemSkin",this.monthCard.bgImg="yueka_png",this.monthCard.bgStr="v1_img_huodongtubiaodi_zjm_png",this.monthCard.bgS=64.8,this.monthCard.bgW=64.8,this.leftGroup.addChildAt(this.monthCard,2),P7.FD57(O3.tr(6656),this.monthCard.lbName),this.monthCard.name="monthcard",this.monthCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI96,this));else{var i=this.leftGroup.getChildByName("monthcard");i&&(this.leftGroup.removeChild(i),this.monthCard=null)}this.rechargeImg&&1==this.rechargeImg.visible&&App.K16.doFrame(1,1,this.ZE17,this),this.dealWithIOS()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(o.prototype.uBM.call(this,t,e),t instanceof TC68&&this.ZB7(t),t instanceof THH2&&this.ZI19(t),t instanceof TF80&&(e[0]!=P4.R60&&e[0]!=P4.I4||this.ZD73(t)),(t instanceof THH9||t instanceof TG58)&&this.showPackNew(),t instanceof TG12){this.ZE70(t),this.ZO88(),this.ZX21();var s=App.CM.gtM(O6.B68);this.ZE16(s)}t instanceof THH18&&this.ZI94(t),t instanceof TG54&&this.ZG83(t),t instanceof TF89&&this.ZB8(t),t instanceof TA68&&this.ZA21(t),t instanceof TD81&&this.ZB84(t),t instanceof TC5&&this.ZA79(t),t instanceof TD27&&this.ZB29(t),t instanceof TF91&&this.ZE16(t),t instanceof TF53&&(this.ZD17(t),this.ZF55(t)),t instanceof TC73&&this.ZB9(t),t instanceof TF93&&(this.ZHH2(t),this.ZS80(t)),t instanceof TE58&&this.ZC61(t),t instanceof TE53&&this.ZX21(),this.dealWithIOS()},t.prototype.ZI19=function(t){this.updateState(t.homeFightState),t instanceof TA68&&this.ZA21(t)},t.prototype.ZG83=function(t){this.daily.imgNew.visible=TG56.FE84()},t.prototype.ZD73=function(t){if(t.chData){var e=t.ZV44();if(e){var i=t.ZV45(),s=t.FL64();this.imgChapterIcon.source=s.icon,this.chapterName=s.name,this.chapterLevel=i.order+"-"+e.order;var o=O3.tr(1146,this.chapterLevel);this.lbChapterLevel.textFlow=(new egret.HtmlTextParser).parser(o),this.imgChapterRedTips.visible=t.hasRewards()}else this.grpChapter.visible=!1}},t.prototype.GF31=function(){this.aCF(O6.A57,D11.A4)},t.prototype.ZB7=function(t){if(null!=t&&1==t.openState)if(1==t.closeEnter)this.rechargeGiftGrp.visible=this.rechargeGiftGrp.includeInLayout=!1,this.rechargeGift.removeTimer();else{this.rechargeGiftGrp.visible=this.rechargeGiftGrp.includeInLayout=!0;var e=t.rechargeGiftData;null!=e.zeroCD&&0<e.zeroCD?this.rechargeGift.updateCd(e.getZeroCD()):this.rechargeGift.removeTimer(),this.rechargeGift.imgNew.visible=0<t.FL35();var i=TD32.FB16(),s=M18.FL28(e.more,";",",");for(var o in s)if(parseInt(s[o][0])==i){P7.FD57(s[o][1],this.rechargeGift.lbName);break}}else this.rechargeGiftGrp.visible=this.rechargeGiftGrp.includeInLayout=!1,this.rechargeGift.removeTimer()},t.prototype.ZI95=function(t){var e=t.ZM12();e&&("993"==e.fingerId?e.nFinish?this.sevenLogin==TG68.guideView&&TG68.FK89():!TG68.guideView&&this.sevenLogin.visible&&(this.sevenLogin.validateNow(),TG68.FL77(this.sevenLogin,this.sevenLogin.width/2,this.sevenLogin.height/2)):"994"==e.fingerId?e.nFinish?this.strength==TG68.guideView&&TG68.FK89():!TG68.guideView&&this.strength.visible&&(this.strength.validateNow(),TG68.FL77(this.strength,this.strength.width/2,this.strength.height/2)):"991"==e.fingerId&&(e.nFinish?this.daily==TG68.guideView&&TG68.FK89():!TG68.guideView&&this.daily.visible&&(this.daily.validateNow(),TG68.FL77(this.daily,this.daily.width/2,this.daily.height/2))))},t.prototype.ZI94=function(t){1==t.isDouble?(null==this.doubleImg&&(this.doubleImg=new eui.Image,this.doubleImg.source="v1_img_shuangbei_png",this.doubleImg.x=0,this.doubleImg.y=0,this.daily.addChild(this.doubleImg)),this.doubleImg.$setVisible(!0)):null!=this.doubleImg&&this.doubleImg.$setVisible(!1)},t.prototype.ZE70=function(t){M17.FC20()||I6.FC95()?this.daily.visible=this.daily.includeInLayout=!0:this.daily.visible=this.daily.includeInLayout=!1,this.rechargeImg&&1==this.rechargeImg.visible&&App.K16.doFrame(1,1,this.ZE17,this),this.ZX20()},t.prototype.ZB8=function(t){this.ZO88()},t.prototype.showPackNew=function(){var t=App.CM.gtM(O6.C11);App.CM.gtM(O6.B98).isSmelt?(null==this.packImg&&(this.packImg=new eui.Image,this.packImg.source="v1_img_man_png",this.backPack.addChild(this.packImg),this.packImg.x=0,this.packImg.y=0),this.packImg.visible=!0):this.packImg&&(this.packImg.visible=!1),t.isShowHong(),this.backPack.imgNew.visible=!!t.isHong},t.prototype.close=function(){this.rechargeGift.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GF31,this),this.wxFollow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL73,this),this.backPack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL72,this),this.daily.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GL21,this),this.monthCard&&this.monthCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZI96,this),this.rechargeBackaward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GB19,this),this.grpChapter.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF54,this),this.sevenLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH1,this),this.firstRecharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GE23,this),this.rechargeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZC60,this),this.advanceRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GG84,this),this.wxShare.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS79,this),this.strength.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO60,this),this.btnDownload.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO89,this),this.awyAttention.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAwyAttention,this),this.qqMember.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openQQMember,this),this.rechargeIndex=null,this.chapterName=null,this.chapterLevel=null,P16.isChild(this,TG68.guideView)&&TG68.FK89(),egret.Tween.removeTweens(this.leftGroup),egret.Tween.removeTweens(this.wxShare),this.rechargeGift.removeTimer()},t.prototype.ZO89=function(){this.apF(O16.A11)},t.prototype.updateState=function(t){this.currentState!=t&&(this.currentState=t)},t.prototype.ZL72=function(){this.aCF(O6.C11,O14.A9)},t.prototype.ZL73=function(){"fth5"===platform.name?"P0000215"===platform.gameId?window.TFsdk.fbPage(" https://www.facebook.com/sgggj/?ref=page_internal"):window.TFsdk.fbPage("https://www.facebook.com/sanguoqz"):"insgame"===platform.name?window.open("https://www.facebook.com/sanguoqz"):"japan"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/playSangoku/"):"english"===platform.name?"P0000214"===platform.gameId||"P0000227"===platform.gameId?window.TFsdk.fbPage("https://www.facebook.com/Idle-Arena-3-Kingdoms-2152656558105288"):"P0000230"===platform.gameId||"P0000250"===platform.gameId?window.TFsdk.fbPage("https://www.facebook.com/threekingdoms2019?tdsourcetag=s_pctim_aiomsg"):"P0000257"===platform.gameId?window.TFsdk.fbPage("https://www.facebook.com/Cavalry-Rise-of-the-King-467532813810676"):window.TFsdk.fbPage("https://www.facebook.com/threekingdoms2019"):"wakool"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/playsango"):"freetop"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/F1Game-711340535934942/"):"ft7477"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/fknzg/"):"my1737"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/my1737/"):"huanyu"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/Three-KingdomsGreat-War-2272399073000093/"):"btgame"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/BTgameAPP/"):P7.FM15()?App.VM.open(O7.I57):"gaga"===platform.name?window.TFsdk.fbPage("https://www.facebook.com/Gagahi-319629858790604/?ref=br_rs"):App.VM.open(O7.I24)},t.prototype.GL21=function(){this.aCF(O6.C5,N3.A49)},t.prototype.ZI96=function(){TG84.goToDlg({sLink:1503})},t.prototype.ZF54=function(){App.CM.gtM(O6.B64).hasRewards()?this.aCF(O6.B64,J18.A49,{viewState:"reward"}):this.aCF(O6.B64,J18.A43),TG40.playClickEffect()},t.prototype.GB19=function(){var t=TF59.FB15(F7.A11);null!=t&&t.openState?this.aCF(O6.A8,A10.A4):P18.sDP(O3.tr(3205))},t.prototype.GV12=function(){this.aCF(O6.C15,O17.A12)},t.prototype.GE23=function(){App.CM.apF(O6.A44,C17.A4)},t.prototype.ZC60=function(){App.CM.apF(O6.A44,C17.A4,O7.E14,this.rechargeIndex)},t.prototype.ZA79=function(t){var e=this;if(null!=t&&1==t.openState)if(P7.FG67()?this.firstRecharge.visible=this.firstRecharge.includeInLayout=!1:this.firstRecharge.visible=this.firstRecharge.includeInLayout=!0,this.firstRecharge.imgNew.visible=0<t.FL35(),1==t.openRemind){for(var i=t.firstRechargeData.firstRechargeAwdConf,s=0;s<i.length;s++){if(i[s].getState==J13.A1){var o=M18.FL28(t.firstRechargeData.picture,"|",",");this.rechargeImg.bgStr=o[s][3];break}}App.K16.doFrame(1,1,function(){e.ZE17(),P7.FG67()?e.rechargeImg.visible=!1:e.rechargeImg.visible=!0},this)}else this.rechargeImg.visible=!1;else this.firstRecharge.visible=this.firstRecharge.includeInLayout=!1,this.rechargeImg.visible=!1},t.prototype.ZE17=function(){if(P7.FG67())this.dealWithIOS();else{var t=new egret.Point;t.x=this.firstRecharge.x,t.y=this.firstRecharge.y;var e=P7.FJ14(t,this.firstRecharge,this.baseGroup);this.rechargeImg.x=e.x+this.firstRecharge.width-15,this.rechargeImg.y=e.y-70}},t.prototype.ZHH1=function(){this.aCF(O6.A96,F11.A4)},t.prototype.ZB84=function(t){if(null!=t&&1==t.openState){0<t.FL35()?(this.sevenLogin.imgNew.visible=!0,this.sevenLogin.visible=this.sevenLogin.includeInLayout=!0):(this.sevenLogin.imgNew.visible=!1,this.sevenLogin.visible=this.sevenLogin.includeInLayout=!1);var e=t.loginData.day,i=t.loginData.icon.split(","),s=t.loginData.name.split(",");2<=e?(this.sevenLogin.bgImg=i[1],P7.FD57(s[1],this.sevenLogin.lbName)):(this.sevenLogin.bgImg=i[0],P7.FD57(s[0],this.sevenLogin.lbName))}else this.sevenLogin.visible=this.sevenLogin.includeInLayout=!1;this.rechargeImg&&1==this.rechargeImg.visible&&App.K16.doFrame(1,1,this.ZE17,this)},t.prototype.ZA21=function(t){if(null!=t&&1==t.openState){var e=t.rechargeBackawardData;this.rechargeBackaward.bgImg=e.icon,null!=e.ZHH64()&&0<e.ZHH64()?(this.rechargeBackaward.updateCd(e.ZHH64()),this.rechargeBackawardGrp.height=100):(this.rechargeBackaward.removeTimer(),this.rechargeBackawardGrp.height=84);var i=t.FL35();this.rechargeBackawardGrp.visible=this.rechargeBackawardGrp.includeInLayout=!0,this.rechargeBackaward.imgNew.visible=0<i}else this.rechargeBackaward.removeTimer(),this.rechargeBackawardGrp.visible=this.rechargeBackawardGrp.includeInLayout=!1,this.rechargeBackawardGrp.height=84;this.rechargeImg&&1==this.rechargeImg.visible&&App.K16.doFrame(1,1,this.ZE17,this)},t.prototype.ZR53=function(t){var e=this;egret.Tween.get(this.leftGroup,{onChange:function(){e.rechargeImg&&1==e.rechargeImg.visible&&e.ZE17()}}).to({bottom:t},300)},t.prototype.tweenWxshare=function(t){var e=this;egret.Tween.get(this.wxShare,{onChange:function(){e.rechargeImg&&1==e.rechargeImg.visible&&e.ZE17()}}).to({bottom:t},300)},t.prototype.openAwyAttention=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return"awy"===platform.name||"PM000607"===platform.gameId||"PM000509"===platform.gameId||"PM000592"===platform.gameId||"PM000887"===platform.gameId||"PM000784"===platform.gameId||"PM001232"===platform.gameId?App.CM.apF(O6.A62,D8.A3):"crazy"===platform.name?(e={apiType:"isSubscribe"},window.ShSdk.subscribe(e,function(t){if(1==t.cpStatus)App.CM.apF(O6.A62,D8.A1);else{window.ShSdk.subscribe({apiType:"askShow"},function(t){1==t.cpStatus?console.log("打开疯狂游乐场关注弹窗成功!"):console.error("打开疯狂游乐场关注弹窗失败!")})}})):"wxgame"==platform.name?App.CM.apF(O6.B48,I13.A4):"wanba"===platform.name&&App.VM.open(O7.HH68),[2]})})},t.prototype.ZB9=function(t){if("PM000607"===platform.gameId&&"88"==platform.channel&&!platform.isAttention)return this.awyAttention.visible=!1,void(this.awyAttention.includeInLayout=!1);0!=t.isShow||"awy"!==platform.name&&"PM000607"!==platform.gameId&&"crazy"!==platform.name&&"PM000509"!==platform.gameId&&"PM000592"!==platform.gameId&&"PM000887"!==platform.gameId&&"PM000784"!==platform.gameId&&"PM001232"!==platform.gameId?(this.awyAttention.visible=!1,this.awyAttention.includeInLayout=!1):(this.wxFollow.visible=!1,this.wxFollow.includeInLayout=!1,this.awyAttention.visible=!0,this.awyAttention.includeInLayout=!0,this.awyAttention.imgNew.visible=t.isRead)},t.prototype.ZHH2=function(t){if("P0005034"!=platform.gameId&&-1==window.OPEN_DATA.pf.indexOf("weixin")){this.awyAttention.visible=this.awyAttention.includeInLayout=2!=t.isTakeWan;var e=App.CM.gtM(O6.B82);this.awyAttention.visible?(this.awyAttention.bgImg="wanyiwan_png",P7.FD57(O3.tr(6707),this.awyAttention.lbName),this.awyAttention.imgNew.visible=1==t.isTakeWan||e.isGrowRed,e.isGrowRed=!1):this.awyAttention.visible=!1}},t.prototype.ZS80=function(t){var e=App.CM.gtM(O6.B82);-1==window.OPEN_DATA.pf.indexOf("weixin")&&"QQVip"==window.OPEN_DATA.channel&&0==e.vipdr?(this.qqMember.visible=this.qqMember.includeInLayout=!0,this.qqMember.imgNew.visible=!0,P7.FD57("",this.qqMember.lbName)):this.qqMember.visible=this.qqMember.includeInLayout=!1},t.prototype.openQQMember=function(){App.VM.open(O7.C20)},t.prototype.ZI97=function(){var t=O4.getLv();"wanba"==platform.name&&t>Number(J17.init.qqUnloclLv.value)?(this.qqMigrate.visible=this.qqMigrate.includeInLayout=!0,P7.FD57(O3.tr(8561),this.qqMigrate.lbName)):this.qqMigrate.visible=this.qqMigrate.includeInLayout=!1},t.prototype.ZX22=function(){App.VM.open(O7.HH92)},t.prototype.ZX23=function(){"oppo"===platform.name?this.aCF(O6.B60,J8.A4):2!==App.CM.gtM(O6.B15).fs?App.VM.open(O7.D87):App.VM.open(O7.HH26)},t.prototype.ZC61=function(t){if("awy"===platform.name||"crazy"===platform.name||"PM000826"===platform.gameId&&platform.isShare){var e=App.CM.gtM(O6.B82),i=G11.init.unlockLv.value;if(e.avatarInfo.l<i)return void(this.awyInvite.visible=!1);this.awyInvite.visible=!0,this.awyInvite.bgImg=2!==t.fs?"i65062_png":"v1_img_f_png",this.awyInvite.imgNew.visible=t.isRead}else if("oppo"===platform.name){var s=App.CM.gtM(O6.B60);this.awyInvite.visible=this.awyInvite.includeInLayout=s.actData&&s.actData.isOpen,s.actData&&0<s.actData.isOpen&&(this.awyInvite.bgImg="gengduoyouxi_png",P7.FD57(O3.tr(8695),this.awyInvite.lbName))}else this.awyInvite.visible=!1},t.prototype.isPopUpWin=function(t){if("wxgame"===platform.name&&0==t.isShow&&!P7.FHH82()&&!platform.public_follow&&"P0005524"!=platform.gameId&&"P0005523"!=platform.gameId){var e=App.CM.gtM(O6.B82);if(0==e.avatarInfo.fl&&!t.isPopWin){var i=e.avatarInfo.l,s=J17.init.followOpenWindow.value,o=M18.FL28(s,",");Number(o[0])<i&&i<=Number(o[1])&&(t.isPopWin=!0,App.CM.apF(O6.B48,I13.A4))}}},t.prototype.ZF55=function(t){"wxgame"!==platform.name||0!=t.isShow||P7.FHH82()||platform.public_follow?this.awyAttention.visible=this.awyAttention.includeInLayout=!1:"P0005524"!=platform.gameId&&"P0005523"!=platform.gameId?O4.getLv()<Number(J17.init.followOpenLv.value)?this.awyAttention.visible=this.awyAttention.includeInLayout=!1:(platform.getAttentionStatus(t),1==t.isAttention?this.awyAttention.imgNew.visible=!0:this.awyAttention.imgNew.visible=!1,this.awyAttention.visible=this.awyAttention.includeInLayout=!0):this.awyAttention.visible=this.awyAttention.includeInLayout=!1},t}(BaseEuiView);__reflect(HomeFightView.prototype,"HomeFightView");var HomeFixPopView=function(i){function t(t){var e=i.call(this)||this;return e.x_=0,e.skinName="HomeFixPopSkin",e.visible=!1,e.validateNow(),t.addChild(e),e}return __extends(t,i),t.prototype.childrenCreated=function(){this.dgList.itemRenderer=home.HitBut2,this.dgList.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClick,this)},t.prototype.open=function(t){this.hide(),this.visible=!0,this.type=t,this.updateList()},t.prototype.close=function(){this.hide(),this.dgList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClick,this)},t.prototype.hide=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataSource.removeAll(),this.visible=!1,delete this.type},t.prototype.setPos=function(t){this.x_=t},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t instanceof TG79){var s=this.dataSource.source;if(s&&s.length)for(var o=0,r=s;o<r.length;o++){var n=r[o];if(App.CM.gtM(n.id)==t)return void(n.dot=this.getModelDot.apply(this,[t].concat(e)))}}},t.prototype.updateList=function(){var t=this.type,e=[];t==O16.A23?(e.push({icon:"com_zhugong_png",dot:0,id:O6.B82}),e.push({icon:"com_jinxiu_png",dot:0,id:O6.B80})):t==O16.A21&&(e.push({icon:"com_jinguo_png",dot:0,id:O6.C3}),e.push({icon:"com_ls_png",dot:0,id:O6.B91}),e.push({icon:"com_lt_png",dot:0,id:O6.B49}),e.push({icon:"com_axiaojun_png",dot:0,id:O6.B58}));for(var i=0,s=e;i<s.length;i++){var o=s[i];o.dot=this.getModelDot(App.CM.gtM(o.id))}var r=85*(this.dataSource.source=e).length+20;this.newGrp.width=r,this.x=this.x_-r/2},t.prototype.getModelDot=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t instanceof TG77||t instanceof RedMakeup.Model){var s=void 0,o=void 0;t instanceof TG77?(s=t,o=App.CM.gtM(O6.B34)):(o=t,s=App.CM.gtM(O6.C3));var r=!1;return(r=(r=(r=(r=(r=(r=(r=r||s.ZE56())||s.ZD47())||s.ZC6())||s.ZC83())||0<s.ZT82())||0<o.FL35())||0<s.ZY38())?1:0}if(t instanceof TG8){var n=t;if(n.isShowImgNew(),n.ZK14(),n.ZG29(),n.ZU97(),0<n.red1+n.red2+n.red3+n.red4)return 1}else{if(t instanceof TF43)return t.getAllRedNum();if(t instanceof TF33)return t.getEntranceRed()?1:0;if(t instanceof Classup.Model)return t.FL35();if(t instanceof TG12||t instanceof TG12)return this.avatarIsNew()?1:0}return 0},t.prototype.setDot=function(t,e,i){void 0===i&&(i=!0);for(var s=0,o=this.dataSource.source;s<o.length;s++){var r=o[s];if(r.id==t){r.dot=e;break}}i&&this.dataSource.refresh()},t.prototype.onClick=function(t){var e,i,s,o=this.dataSource.source[t.itemIndex],r=App.CM.gtM(O6.B43).serOpenDay+1,n=O4.getLv(),a=O4.getVipLv(),h=0,p=0,l=1;switch(o.id){case O6.C3:if(App.VM.isOpen(O7.HH25)){l=0;break}h=parseInt(M11.gIV("womanLv")),e=[O7.HH25];break;case O6.B91:if(App.VM.isOpen(O7.G43)){l=0;break}if(h=parseInt(K19.gIV("animalLv")),e=[O7.G43],1!=K18.vip[a].openanimal)break;break;case O6.B49:if(App.VM.isOpen(O7.E71)){l=0;break}h=parseInt(I5.gIV("unlockLevel")),p=parseInt(I5.gIV("unlocdate")),e=[O7.E71];break;case O6.B58:if(App.VM.isOpen(O7.F53)){l=0;break}if(!TF82.FG34(!0))return;e=[O7.F53];break;case O6.B82:if(App.VM.isOpen(O7.G45)){l=0;break}l=2,e=[O6.B82,L13.A55];break;case O6.B80:h=Classup.Config.unlockLevel,p=Classup.Config.unlockDate,l=2,e=[O6.B80,Classup.Const.OPEN]}if(0<l){if(0<p&&r<p)return void P18.sDP(O3.tr(3370,p,h));if(n<h){var c=K18.init.commonDesc1.value;return void P18.sDP(M18.format(c,[h]))}1==l?(i=App.VM.open).call.apply(i,[App.VM].concat(e)):2==l&&(s=App.CM.apF).call.apply(s,[App.CM].concat(e))}o.id&&this.parent.dispatchEventWith(O16.A22,!1,o.id),this.hide()},t.prototype.avatarIsNew=function(){if(App.CM.gtM(O6.C10).equipHong())return!0;var t=App.CM.gtM(O6.B88);return!(!t.stargaze&&!t.pelletNum)||(!!App.CM.gtM(O6.B82).canSkill||void 0)},t}(eui.Component);__reflect(HomeFixPopView.prototype,"HomeFixPopView");var HomeFixView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=HomeFixSkin,i}return __extends(t,s),t.prototype.initUI=function(){var t=this;s.prototype.initUI.call(this),this.isOpenAllBtn()&&(this.women.icon="v1_img_zhuzhan_zjm_png"),this.hitButGroup=[this.finght,this.avatar,this.btnForge,this.women,this.btnHero,this.mainCity],this.hitButGroup.forEach(function(t,e){t.name=e+""}),App.DelayOptManager.ZE59(this,function(){t.chooseNow(!0)}),this.pop=new HomeFixPopView(this),this.pop.bottom=100},t.prototype.open=function(){var t=this;this.finght.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterFight,this),this.mainCity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterHome,this),this.avatar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS81,this),this.btnForge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX24,this),this.women.addEventListener(egret.TouchEvent.TOUCH_TAP,this.opennewView,this),this.btnHero.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHeroMain,this),this.tipsGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shopTips,this),App.SceneManager.getCurrScene()==M2.A5&&(this.guideTimer=App.K16.doTimer(5e3,0,function(){return t.ZI95(App.CM.gtM(O6.C20))},this)),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickStage,this);try{var e=App.CM.gtM(O6.B82);this.ZE70(e);var i=App.CM.gtM(O6.C3);this.ZHH3(i);var s=App.CM.gtM(O6.C12);this.heroIsNew(s),this.isShowNew(),this.avatarIsNew(),this.updateByWACI(),this.addEventListener(egret.Event.ENTER_FRAME,this.addView,this),this.ZX25()}catch(t){Log.trace("HomeFixView open error",t)}},t.prototype.close=function(){this.finght.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterFight,this),this.mainCity.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterHome,this),this.avatar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS81,this),this.btnForge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX24,this),this.women.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.opennewView,this),this.btnHero.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showHeroMain,this),this.tipsGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.shopTips,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickStage,this),P16.isChild(this,TG68.guideView)&&TG68.FK89(),this.guideTimer&&(App.K16.rBH(this.guideTimer),this.guideTimer=void 0),this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null),this.pop.close()},t.prototype.addView=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.addView,this)},t.prototype.ZX24=function(){var t=App.VM.isOpen(O7.HH24);t?App.VM.ZT95():(this.pop.hide(),App.CM.apF(O6.B98,M19.A48)),this.chooseNow(!t,this.btnForge.name)},t.prototype.ZG74=function(){return!!(0<App.CM.gtM(O6.B98).isSmelt)},t.prototype.ZF22=function(){var t=App.CM.gtM(O6.B85);return!!t.ZA41()||(!!t.ZA57()||(!!t.ZB73()||!!t.ZA76()))},t.prototype.ZI98=function(){App.CM.gtM(O6.C14);return 0<THH27.FC61()},t.prototype.ZO90=function(){return!!App.CM.gtM(O6.C23).isHong||(1==App.CM.gtM(O6.B16).state||(!!App.CM.gtM(O6.B24).FL35()||(!!App.CM.gtM(O6.B28).FL35()||!!App.CM.gtM(O6.A99).FL35())))},t.prototype.updateByWACI=function(){var t=App.CM.gtM(O6.C3);this.ZHH3(t),this.isOpenAllBtn()&&(this.ZE84()?this.women.imgNew.visible=!0:this.ZC97()?this.women.imgNew.visible=!0:this.ZD18()&&(this.women.imgNew.visible=!0))},t.prototype.ZF56=function(t){},t.prototype.ZHH3=function(t){this.women.imgNew.visible=!1;t.ZE56()?this.women.imgNew.visible=!0:t.ZD47()?this.women.imgNew.visible=!0:t.ZC6()?this.women.imgNew.visible=!0:t.ZC83()?this.women.imgNew.visible=!0:0<t.ZT82()?this.women.imgNew.visible=!0:0<App.CM.gtM(O6.B34).FL35()?this.women.imgNew.visible=!0:0<t.ZY38()&&(this.women.imgNew.visible=!0)},t.prototype.ZD69=function(){var t=App.CM.gtM(O6.B66);return 0<t.getSignUpRed()+t.ZP80()+t.ZM39()+t.ZJ55()+t.getSanGuoRed()},t.prototype.ZE84=function(){var t=App.CM.gtM(O6.B91);return t.isShowImgNew(),t.ZK14(),t.ZG29(),t.ZU97(),0<t.red1+t.red2+t.red3+t.red4},t.prototype.ZG33=function(){return!(App.CM.gtM(O6.C4).nClTimes<=0)},t.prototype.ZI8=function(t){var e=this,i=t.remindId;if(i){var s=THH25.FF96(i),o=O3.tr(550,s.name,s.openLevel);if(this.tipsGroup.visible=!0,this.tipsLabel.text=o,this.timerHandler)this.timerHandler.repeatCount=10;else{this.timerHandler=App.K16.doTimer(1e3,10,function(){},this,function(){e&&(e.tipsGroup.visible=!1,e.timerHandler&&(App.K16.rBH(e.timerHandler),e.timerHandler=null))},this)}}else;},t.prototype.ZB78=function(t){var e=this,i=t.remindId;if(i){var s=TD94.FI27(i),o=O3.tr(550,s.name,s.lv);if(this.tipsGroup.visible=!0,this.tipsLabel.text=o,this.timerHandler)this.timerHandler.repeatCount=10;else{this.timerHandler=App.K16.doTimer(1e3,10,function(){},this,function(){e&&(e.tipsGroup.visible=!1,e.timerHandler&&(App.K16.rBH(e.timerHandler),e.timerHandler=null))},this)}}else;},t.prototype.ZI99=function(){return 0<App.CM.gtM(O6.C15).FL35()},t.prototype.ZE88=function(){var t=App.CM.gtM(O6.B89),e=App.CM.gtM(O6.B82).avatarInfo,i=L4.gIV("unlockLevel");return e.l>=i&&(!t.myLegion||!t.myLegion.legion||0<t.FL35())},t.prototype.shopTips=function(){this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null),this.tipsGroup.visible=!1;var t=App.CM.gtM(O6.C21);t.remindId&&(t.ZV36(),App.CM.apF(O6.C21,O9.A68));var e=App.CM.gtM(O6.A99);e.remindId&&(e.ZV36(),App.CM.apF(O6.A99,F14.A50))},t.prototype.ZE70=function(t){this.expProcess.minimum=0;var e=K18.FHH93(t.avatarInfo.l);e=-1==e?K18.FHH93(t.avatarInfo.l-1):e,this.expProcess.thumb.source="v1_bar_green_zjm_png",this.expProcess.labelDisplay.visible=t.canGrade<0,this.lbExpProcess.visible=0<=t.canGrade,this.expProcess.maximum=e,this.expProcess.value=t.avatarInfo.e;var i=t.avatarInfo.e/this.expProcess.maximum;this.lbExpProcess.text=Math.floor(1e4*i)/100+"%"},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.pop.uBM(t),t instanceof TG12&&(this.ZE70(t),this.avatarIsNew(),this.ZX25()),t instanceof TG58&&(this.avatarIsNew(),this.ZX25()),t instanceof THH9){this.avatarIsNew(),this.updateByWACI();var i=App.CM.gtM(O6.C12);this.heroIsNew(i)}if(t instanceof RedMakeup.Model&&this.updateByWACI(),(t instanceof TG32||t instanceof TG62||TF51)&&this.avatarIsNew(),t instanceof TE70&&this.ZX25(),t instanceof TF33&&this.ZX25(),t instanceof TG70||t instanceof TG96||t instanceof TG34||t instanceof THH21)switch(e){case P4.T52:case P4.U45:case P4.R88:case P4.U41:this.avatarIsNew()}if(t instanceof TG77&&this.updateByWACI(),t instanceof TG8&&this.updateByWACI(),t instanceof TF33&&this.updateByWACI(),t instanceof TF43&&this.updateByWACI(),t instanceof TG98&&this.heroIsNew(t),(t instanceof TF89||t instanceof TE38)&&this.ZX25(),t instanceof TG91){this.ZI8(t);App.CM.gtM(O6.C14);this.ZX25()}t instanceof TD92&&(this.ZB78(t),this.ZX25()),(t instanceof TG15||t instanceof TG30||t instanceof TG23||t instanceof TG17||t instanceof TG10||t instanceof THH14||t instanceof THH18||t instanceof TE64||t instanceof TG20||t instanceof THH6||t instanceof TG8||t instanceof TG48||t instanceof TF36||t instanceof TC79||t instanceof Practice.Model||t instanceof Auction.Model||t instanceof Achievement.Model||t instanceof Cornucopia.Model||t instanceof TF89||t instanceof TE38)&&this.ZX25(),this.isShowNew()},t.prototype.ZI95=function(t){var e=t.ZM12();if(e&&"995"==e.fingerId?e.nFinish?TG68.guideView==this.mainCity&&TG68.FK89():TG68.guideView||(this.mainCity.validateNow(),TG68.FL77(this.mainCity,this.mainCity.width/2,this.mainCity.height/2)):e&&"992"==e.fingerId&&App.SceneManager.getCurrScene()==M2.A4&&(e.nFinish?TG68.guideView==this.mainCity&&TG68.FK89():TG68.guideView||(this.mainCity.validateNow(),TG68.FL77(this.mainCity,this.mainCity.width/2,this.mainCity.height/2))),!TG68.guideView&&App.SceneManager.getCurrScene()==M2.A5&&!t.homeExtra&&5<P6.getTime(!0)-this.guideClock){var i=O4.getLv();i>=TF47.speGuidLv[0]&&i<=TF47.speGuidLv[1]?TG68.guideView||(this.finght.validateNow(),TG68.FL77(this.finght,this.finght.width/2,this.finght.height/2)):(TG68.guideView==this.finght&&TG68.FK89(),this.guideTimer&&(App.K16.rBH(this.guideTimer),this.guideTimer=void 0))}},t.prototype.ZX25=function(){try{if(this.ZI98())return void(this.mainCity.imgNew.visible=!0);if(this.ZG74())return void(this.mainCity.imgNew.visible=!0);if(this.ZF22())return void(this.mainCity.imgNew.visible=!0);if(this.ZE84())return void(this.mainCity.imgNew.visible=!0);if(this.ZE88())return void(this.mainCity.imgNew.visible=!0);if(this.ZD69())return void(this.mainCity.imgNew.visible=!0);if(this.ZI99())return void(this.mainCity.imgNew.visible=!0);if(this.ZG33())return void(this.mainCity.imgNew.visible=!0);if(this.ZC97())return void(this.mainCity.imgNew.visible=!0);if(this.ZM81())return void(this.mainCity.imgNew.visible=!0);if(THH25.FK53())return void(this.mainCity.imgNew.visible=!0);if(Cornucopia.Utils.FK53())return void(this.mainCity.imgNew.visible=!0);if(TF79.Utils.FK53())return void(this.mainCity.imgNew.visible=!0);if(TC81.FK53())return void(this.mainCity.imgNew.visible=!0);if(TF83.FK53())return void(this.mainCity.imgNew.visible=!0);if(Achievement.hasDot())return void(this.mainCity.imgNew.visible=!0);if(TC90.hasRed())return void(this.mainCity.imgNew.visible=!0);this.mainCity.imgNew.visible=!1}catch(t){Log.trace("MainCityRed error ",t)}},t.prototype.ZC97=function(){return App.CM.gtM(O6.B49).getEntranceRed()},t.prototype.ZD18=function(){return App.CM.gtM(O6.B58).getAllRedNum()},t.prototype.ZM81=function(){var t=App.CM.gtM(O6.B51);return t.ZV91()||t.ZN85()},t.prototype.cTH=function(){this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.isShowNew=function(){var t=App.CM.gtM(O6.B98);this.btnForge.imgNew.visible=!!(t.canSd||t.canRd||t.canFd||t.canGd||t.canWear)},t.prototype.avatarIsNew=function(){if(this.avatar.imgNew.visible=!1,App.CM.gtM(O6.C10).equipHong())this.avatar.imgNew.visible=!0;else{var t=App.CM.gtM(O6.B88);if(t.stargaze||t.pelletNum)this.avatar.imgNew.visible=!0;else App.CM.gtM(O6.B82).canSkill&&(this.avatar.imgNew.visible=!0)}},t.prototype.heroIsNew=function(t){0<t.ZL53()?this.btnHero.imgNew.visible=!0:this.btnHero.imgNew.visible=!1},t.prototype.enterFight=function(){var t=App.SceneManager.getCurrScene();if(M2.A4!=t){this.pop.hide(),App.VM.ZT95(),App.SceneManager.runScene(M2.A4),this.chooseNow(!0,this.finght.name);var e=App.VM.gOV(O7.G54);e&&e.ZO92(!1),TG68.guideView==this.finght&&TG68.FK89()}},t.prototype.enterHome=function(t){var e=App.SceneManager.getCurrScene();if(this.mainCity.grpShow.visible)TG84.FM16(this.mainCity.grpShow.name);else{var i=App.CM.gtM(O6.B82).avatarInfo,s=K18.init.cityLv.value;if(i.l<s){var o=K18.init.commonDesc1.value;P18.sDP(M18.format(o,[s]))}else if(M2.A5!=e){this.pop.hide(),App.VM.ZT95(),App.SceneManager.runScene(M2.A5),this.chooseNow(!0,this.mainCity.name);var r=App.VM.gOV(O7.G54);r&&r.ZO92(!0)}}},t.prototype.insert_flg=function(t,e,i){for(var s="",o=!0,r=0;r<t.length;r+=i){var n=t.substring(r,r+i);o?(s+=n+e,o=!1):s+=n}return s},t.prototype.chooseNow=function(t,e){var o=this;if(t)if(e){var r=parseInt(e);this.hitButGroup.forEach(function(t,e){var i;if(e!==r)-1!==(i=o.hitButGroup[e].iconDisplay.source+"").indexOf("_xz")&&(o.hitButGroup[e].iconDisplay.source=i.replace("_xz",""));else if(-1==(i=o.hitButGroup[r].iconDisplay.source+"").indexOf("_xz")){var s=i.indexOf("_zjm");o.hitButGroup[r].iconDisplay.source=o.insert_flg(i,"_xz",s)}})}else this.getCurrScene();else{if(this.pop.type)return;if(App.VM.gOV(O7.G45)||App.VM.gOV(O7.G39)||App.VM.gOV(O7.G40))return;if(App.VM.gOV(O7.HH24))return;if(App.VM.gOV(O7.HH25))return;if(App.VM.gOV(O7.HH96))return;this.getCurrScene()}},t.prototype.getCurrScene=function(){switch(App.SceneManager.getCurrScene()){case M2.A5:this.chooseNow(!0,this.mainCity.name);break;case M2.A4:this.chooseNow(!0,this.finght.name)}},t.prototype.ZS81=function(t){var e=App.VM.isOpen(O7.G45)||App.VM.isOpen(O7.G39)||App.VM.isOpen(O7.G40);this.openPop(t.currentTarget,O16.A23),this.chooseNow(this.pop.type==O16.A23||e,this.avatar.name)},t.prototype.opennewView=function(t){if(this.isOpenAllBtn()){var e=this.pop.type;this.openPop(t.currentTarget,O16.A21),this.chooseNow(!e,this.women.name)}else{var i=App.CM.gtM(O6.B82).avatarInfo,s=M11.gIV("womanLv");if(i.l<s){var o=K18.init.commonDesc1.value;return void P18.sDP(M18.format(o,[s]))}(e=App.VM.isOpen(O7.HH25))?App.VM.ZT95():(this.pop.hide(),App.VM.open(O7.HH25)),this.chooseNow(!(this.pop.type==O16.A21),this.women.name)}},t.prototype.isOpenAllBtn=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B43).serOpenDay+1,i=t.avatarInfo.l,s=parseInt(I5.gIV("unlockLevel"));return!(e<parseInt(I5.gIV("unlocdate")))&&!(i<s)},t.prototype.ZX26=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=M11.gIV("womanLv");if(t.l<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else{App.VM.isOpen(O7.HH25)?App.VM.ZT95():(this.pop.hide(),App.VM.open(O7.HH25)),this.chooseNow(!(this.pop.type==O16.A21),this.women.name)}},t.prototype.ZS82=function(){var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l,i=t.avatarInfo.v,s=parseInt(K19.gIV("animalLv"));if(s<=e||1==K18.vip[i].openanimal){App.VM.isOpen(O7.G43)?App.VM.ZT95():(this.pop.hide(),App.VM.open(O7.G43)),this.chooseNow(!(this.pop.type==O16.A21),this.women.name)}else{var o=K18.init.commonDesc1.value;P18.sDP(M18.format(o,[s]))}},t.prototype.ZL74=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B43).serOpenDay+1,i=t.avatarInfo.l,s=parseInt(I5.gIV("unlockLevel")),o=parseInt(I5.gIV("unlocdate"));if(e<o)P18.sDP(O3.tr(3370,o,s));else if(i<s){var r=K18.init.commonDesc1.value;P18.sDP(M18.format(r,[s]))}else{App.VM.isOpen(O7.E71)?App.VM.ZT95():(this.pop.hide(),App.VM.open(O7.E71)),this.chooseNow(!(this.pop.type==O16.A21),this.women.name)}},t.prototype.ZL75=function(){TF82.FG34(!0)&&(App.VM.isOpen(O7.F53)?App.VM.ZT95():(this.pop.hide(),App.VM.open(O7.F53)),this.chooseNow(!(this.pop.type==O16.A21),this.women.name))},t.prototype.showHeroMain=function(){var t=App.VM.isOpen(O7.HH96);t?App.VM.ZT95():(this.pop.hide(),App.CM.apF(O6.C12,O8.A83,0)),this.chooseNow(!t,this.btnHero.name)},t.prototype.openPop=function(t,e){this.pop.visible&&this.pop.type==e?this.pop.hide():(this.pop.setPos(t.x+t.width/2),this.pop.open(e))},t.prototype.onClickStage=function(){this.guideClock=P6.getTime(!0),this.finght==TG68.guideView&&TG68.FK89()},t}(BaseEuiView);__reflect(HomeFixView.prototype,"HomeFixView");var HomeHeadView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.jumpBull=!1,i.skinName=HomeHeadSkin,i}return __extends(t,n),t.prototype.initUI=function(){if(n.prototype.initUI.call(this),"P0004973"===platform.gameId||"P0004983"===platform.gameId||"P0005515"===platform.gameId||"P0005516"===platform.gameId){this.coin.left=NaN,this.coin.horizontalCenter=40;var t=this.grpCash.getChildAt(3);t&&t instanceof eui.Image&&(t.right=NaN,t.left=42)}this.updateWealthUI()},t.prototype.open=function(){var t=App.CM.gtM(O6.C10);this.avatarHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.nameBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.nameLb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.lvLb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.vip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GP81,this),this.goldGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN27,this),this.bindGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN27,this),this.grpCash.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getCoin,this),this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GU9,this),this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL76,this);var e=App.CM.gtM(O6.B82);this.jumpBulletin(e),this.ZU86(),this.ZE70(e),this.ZL77(t)},t.prototype.ZL76=function(){App.CM.apF(O6.C29,P8.A7)},t.prototype.ZHH4=function(){App.THH32.aUE(this.gpFeather,"wdsg_hb_ljdh_001",320,569,-1,null,null,null,null,"Animation1",!0)},t.prototype.ZE70=function(t){this.avatarHead.source=O4.getHead(),this.score.text=String(t.avatarInfo.s),this.nameLb.text=String(t.avatarInfo.n),this.vip.vip.text=t.avatarInfo.v+"";K18.FHH93(t.avatarInfo.l);this.coin.text=M18.FF65(t.avatarInfo.co,2),this.gold.text=M18.FF65(t.avatarInfo.g,2),this.bindGold.text=M18.FF65(t.avatarInfo.bg,2),this.lvLb.textFlow=M18.HTP.parse(O3.tr(4556,t.avatarInfo.l));for(var e=t.ZV18(),i=0;i<=t.avatarInfo.v;i++){if(K18.FK45(i)){var s=t.avatarInfo.vg;if(!s||0==s.length||-1==s.indexOf(i)){e=!0;break}}}if(this.ZU86(),this.vip.visible)if(this.vip.vipRp.visible=e)this.vip.visible=this.vip.includeInLayout=!0;else{var o=t.setting;if(!o||0==o.length)return;-1!=o.indexOf(L17.A32)?this.vip.visible=this.vip.includeInLayout=!1:this.vip.visible=this.vip.includeInLayout=!0}},t.prototype.ZL77=function(t){"battle"==t.homeFightState?this.currentState="battle":this.currentState="fight"},t.prototype.uBM=function(t,e){if(n.prototype.uBM.call(this,t,e),t instanceof TG12){if(this.jumpBulletin(t),"fth5"===platform.name||"insgame"===platform.name||"japan"===platform.name||"english"===platform.name||"wakool"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"huanyu"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name){var i=parseInt(this.lvLb.text.substring(3));if(this.ZE70(t),t.avatarInfo.l>i){platform.updateRole("levelUp");var s=new Date,o=new Date(t.avatarInfo.ct);65==t.avatarInfo.l&&P6.FM1(o,s)?platform.collect("FirstDayLv"):20==t.avatarInfo.l&&platform.collect("LevelAchieved")}}else if("wxgame"===platform.name||"qq"===platform.name||"awy"===platform.name||"crazy"===platform.name||"h5"===platform.name||"wanba"===platform.name||"oppo"===platform.name||"meizu"===platform.name||"cx"===platform.name||"vivo"===platform.name||"nativeVivo"===platform.name||"huawei"===platform.name){i=parseInt(this.lvLb.text.substring(3));if(this.ZE70(t),t.avatarInfo.l>i){var r=App.CM.gtM(O6.B97);platform.updateRole(r.getRoleInfo(),"levelUp")}}else this.ZE70(t);this.updateWealthUI()}else t instanceof THH2?this.ZL77(t):t instanceof TE56?this.avatarHead.source=O4.getHead():t instanceof Reincarnate.Model&&this.updateWealthUI();"marriageNotice"==e&&this.ZHH4()},t.prototype.jumpBulletin=function(t){if("wxgame"==platform.name&&("P0006489"==platform.gameId||"P0006490"==platform.gameId)){var e=platform.noticeData;if(null==e)return;var i=40;if(null!=e.role_level&&""!=e.role_level&&(i=e.role_level,0==e.must_navigateto&&t.avatarInfo.l>=i&&t.avatarInfo.l<40&&this.jumpBull))return;t.avatarInfo.l>=i&&1==e.alert_style&&!this.stage.contains(this.jumpBulletinObj)&&(this.jumpBull=!0,this.jumpBulletinObj=new JumpBulletinView(e,t.avatarInfo.l),this.stage.addChildAt(this.jumpBulletinObj,1e3))}},t.prototype.close=function(){this.avatarHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.nameBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.nameLb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.lvLb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GM63,this),this.vip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GP81,this),this.goldGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN27,this),this.bindGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN27,this),this.grpCash.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getCoin,this),this.btnRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GU9,this),this.btnRecharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL76,this)},t.prototype.getCoin=function(){App.VM.open(O7.F12),TG40.playClickEffect()},t.prototype.ZN27=function(){App.CM.apF(O6.C29,P8.A7),TG40.playClickEffect()},t.prototype.GM63=function(){this.aCF(O6.B82,L13.A64),TG40.playClickEffect()},t.prototype.ZI96=function(){var t=App.CM.gtM(O6.B82).avatarInfo.l,e=App.CM.gtM(O6.B66);if(10<=t&&0==e.monthCd){TG84.goToDlg({sLink:1503})}},t.prototype.GP81=function(){this.aCF(O6.C29,P8.A13)},t.prototype.ZE18=function(){this.aCF(O6.C29,P8.A13,7)},t.prototype.GU9=function(){TG40.playClickEffect();var t=App.CM.gtM(O6.B82).avatarInfo.l,e=TG75.FHH63();if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else this.aCF(O6.C19,O18.A4)},t.prototype.ZU86=function(){P7.FG67()?(this.btnRecharge.visible=!1,this.btnRecharge.includeInLayout=!1,this.vip.visible=!1,this.vip.includeInLayout=!1,this.goldGroup.touchEnabled=this.goldGroup.touchChildren=!1,this.bindGroup.touchEnabled=this.bindGroup.touchChildren=!1):(this.btnRecharge.visible=!0,this.btnRecharge.includeInLayout=!0,this.vip.visible=!0,this.vip.includeInLayout=!0,this.goldGroup.touchEnabled=this.goldGroup.touchChildren=!0,this.bindGroup.touchEnabled=this.bindGroup.touchChildren=!0),"publish"===platform.name&&(this.bindGroup.visible=!1,this.goldGroup.visible=!1,this.grpCash.visible=!1)},t.prototype.updateWealthUI=function(){var t=App.CM.gtM(O6.A87).isOpenSoulTurn();if(this.lingyuGp.visible=t){this.goldGroup.width=135,this.bindGroup.width=135,this.grpCash.width=135,this.lingyuGp.width=135;var e=App.CM.gtM(O6.B82).avatarInfo.sco;this.lingyu.text=M18.FF65(e,2),this.allGp.width=558,this.allGp.addChildAt(this.lingyuGp,2)}},t}(BaseEuiView);__reflect(HomeHeadView.prototype,"HomeHeadView");var HomeNoticeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.initTime=2e4,i.initWidth=10,i.wos=[],i.skinName=HomeNoticeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.y=180,this.touchEnabled=!1,this.grpNotice.visible=!1,this.lbStr.text="",this.lbStr.x=640},t.prototype.initData=function(){var t=this,e=App.CM.gtM(O6.C13);this.wos=e.wos,egret.Tween.get(this).wait(5e3).call(function(){t.removeTween(),t.playNotice()})},t.prototype.removeTween=function(){egret.Tween.removeTweens(this)},t.prototype.open=function(){},t.prototype.playNotice=function(){this.wos&&this.wos.length&&(this.wos.sort(function(t,e){return t.id-e.id}),this.noticeData=this.wos[0],this.ZX27())},t.prototype.startRoll=function(){var t=this;App.CM.gtM(O6.B99).isFighting||-1===this.noticeData.cs.indexOf(4)||(this.grpNotice.visible=!0);var e=App.VM.gOV(O7.I85),i=O3.tr(5548);i+=this.noticeData.cnt,e&&-1!==this.noticeData.cs.indexOf(0)?(e.addAllScData(i),e.allScBottom()):-1!==this.noticeData.cs.indexOf(0)&&(this.cacheStr=i),this.noticeTween=egret.Tween.get(this.lbStr).to({x:this.w},this.noticeTime).call(function(){t.removeNotice(),t.noticeData.ct-=1,t.timerHandler||(t.noticeData=null,t.wos.splice(0,1),t.playNotice())})},t.prototype.addAllScData=function(){var e=this;this.cacheStr&&egret.Tween.get(this).wait(1500).call(function(){var t=App.VM.gOV(O7.I85);e.cacheStr&&t&&(t.addAllScData(e.cacheStr),App.DelayOptManager.ZE59(t,t.allScBottom),e.cacheStr=null)})},t.prototype.ZX27=function(){var t=this,e=O3.tr(5548);e+=this.noticeData.cnt,this.lbStr.textFlow=M18.HTP.parser(e.split("@@")[0]),this.w=-this.lbStr.width,this.noticeTime=this.initTime*(1/this.noticeData.sp)/(this.initWidth+this.grpNotice.width)*(this.lbStr.width+this.grpNotice.width),this.dealSysLabel(e),this.startRoll(),this.noticeData.ct-1!=0&&(this.timerHandler=App.K16.doTimer(1e3*this.noticeData.si,this.noticeData.ct-1,this.startRoll,this,function(){egret.Tween.removeTweens(t),t.ZO91(),t.removeNotice()}));var i=App.VM.gOV(O7.D89);if(i){var s=i.parent.getChildIndex(i);this.parent.setChildIndex(this,s+1)}},t.prototype.dealSysLabel=function(t){this.tLength=t.split("@@").length,this.tLength<2||(2==this.tLength?(this.copytab=t.split("@@")[1],this.lbStr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX28,this)):3==this.tLength&&(this.webLinkKey=t.split("@@")[1],this.webLinkUrl=t.split("@@")[2],this.lbStr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX28,this)))},t.prototype.ZX28=function(t){t.stopPropagation(),2==this.tLength&&this.sysLabelCopy(t),3==this.tLength&&this.sysLabelJump(t)},t.prototype.sysLabelCopy=function(t){var e=t.currentTarget;if(this.copytab){var i=e.text,s=new RegExp(this.copytab,"g"),o=M18.FG70(this.copytab,20),r=i.search(s);if(-1!=r){for(var n,a,h=0,p=0;p<r;p++)/\W/.test(i.charAt(p))?"["==i.charAt(p)||"]"==i.charAt(p)?h+=10:h+=20:h+=10;a=(n=h)+o;var l=t.stageX-this.lbStr.x;n<l&&l<a&&platform.setClipboardData(this.copytab,function(){P18.sDP(O3.tr(5650))})}}},t.prototype.sysLabelJump=function(t){var e=t.currentTarget;if(this.webLinkKey&&this.webLinkUrl){var i=e.text,s=new RegExp(this.webLinkKey,"g"),o=M18.FG70(this.webLinkKey,20),r=i.search(s);if(-1!=r){for(var n,a,h=0,p=0;p<r;p++)/\W/.test(i.charAt(p))?"["==i.charAt(p)||"]"==i.charAt(p)?h+=10:h+=20:h+=10;a=(n=h)+o;var l=t.stageX-this.lbStr.x;n<l&&l<a&&("fth5"===platform.name||"japan"===platform.name||"wakool"===platform.name||"english"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"my1737"===platform.name||"huanyu"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name?window.TFsdk.fbPage(this.webLinkUrl):window.open(this.webLinkUrl,"_blank"))}}},t.prototype.removeNotice=function(){this.grpNotice.visible=!1,this.lbStr.x=640,egret.Tween.removeTweens(this.lbStr),this.noticeTween=null},t.prototype.ZO91=function(){this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.showNotice=function(t){var e=App.SceneManager.getCurrScene();t&&this.noticeData&&-1!==this.noticeData.cs.indexOf(4)&&this.noticeTween?this.grpNotice.visible=t:!t&&this.noticeTween&&e==M2.A4&&(this.grpNotice.visible=t)},t.prototype.ZO92=function(t){var e=App.CM.gtM(O6.B99);this.noticeTween&&(t&&this.noticeData&&-1!==this.noticeData.cs.indexOf(4)&&this.noticeTween?this.grpNotice.visible=t:!t&&e.isFighting&&e.fightType!=P15.A3&&(this.grpNotice.visible=t))},t.prototype.amendNotice=function(i){var s=this;if(i.m)this.noticeData&&this.noticeData.id==i.m?(this.removeNotice(),this.ZO91(),this.noticeData=null,this.wos.splice(0,1),this.playNotice()):this.wos.forEach(function(t,e){t.id!=i.m||s.wos.splice(e,1)});else if(0==i.m)return this.removeNotice(),this.ZO91(),this.noticeData=null,void(this.wos=[]);i.wo&&(this.noticeData&&this.noticeData.id==i.wo.id?(this.removeNotice(),this.ZO91(),this.wos.forEach(function(t,e){if(t.id==i.wo.id)return s.wos[e]=i.wo,void s.playNotice()})):(this.wos.push(i.wo),this.noticeData||this.playNotice()))},t.prototype.uBM=function(t,e){},t.prototype.close=function(){s.prototype.close.call(this),this.lbStr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX28,this)},t}(BaseEuiView);__reflect(HomeNoticeView.prototype,"HomeNoticeView");var HomeUiView=function(l){function t(t,e){var i=l.call(this,t,e)||this;return i.isLoadMilitary=!1,i.skinName=HomeUISkin,i}return __extends(t,l),t.prototype.initUI=function(){(l.prototype.initUI.call(this),this.initEntries(),this.ZJ1(),P7.FJ17())&&(this.topGroup.layout.requestedColumnCount=15,this.topGroup.horizontalCenter=NaN,this.topGroup.left=0,this.downGroup.horizontalCenter=NaN,this.downGroup.left=0,this.downGroup2&&(this.downGroup2.left=0))},t.prototype.ZJ1=function(){P7.FD57(O3.tr(2501),this.shop.lbName),P7.FD57(O3.tr(3265),this.animalItem.lbName),P7.FD57(O3.tr(6676),this.children.lbName),P7.FD57(O3.tr(4397),this.SocialItem.lbName),P7.FD57(O3.tr(6156),this.cornucopiaItema.lbName),P7.FD57(O3.tr(6654),this.backPack.lbName),P7.FD57(O3.tr(6700),this.btnAchievement.lbName),P7.FD57(O3.tr(6701),this.MailItem.lbName),P7.FD57(O3.tr(6702),this.wxTjxcx.lbName),P7.FD57(O3.tr(6703),this.awyAutonym.lbName),P7.FD57(O3.tr(6736),this.AwyBindPhone.lbName)},t.prototype.initEntries=function(){var t=[];for(var e in TG69.base){var i=TG69.base[e];null!=i&&t.push(P7.copyTab(i))}t.sort(function(t,e){return t.sortid-e.sortid}),this.ZS83(t),this.ZL78(t)},t.prototype.ZS83=function(t){for(var e in t){var i=t[e];if(null!=i){var s=this.getEntryById(i.id);if(s){s.id=i.id;for(var o=null!=i.changedate?M18.FL28(i.changedate,","):[],r=null!=i.icon?M18.FL28(i.icon,","):[],n=null!=i.changefonts?M18.FL28(i.changefonts,","):[],a=0,h=-1,p=App.CM.gtM(O6.B43),l=p.serOpenDay;a<o.length&&l+1>Number(o[a]);)h=a++;r&&null!=r[h]&&(s.bgImg=r[h]),P7.FD57(n[h],s.lbName);var c=p.es;if(c&&c[i.id]){var u=c[i.id];s.bgImg=u.ic,P7.FD57(u.n,s.lbName)}}}}},t.prototype.ZL78=function(t){for(var e in this.topGroup.removeChildren(),t){var i=t[e];if(1==i.type){var s=this.getEntryById(i.id);null!==s&&this.topGroup.addChild(s)}}},t.prototype.ZL79=function(){var t=[];for(var e in TG69.base){null!=(o=TG69.base[e])&&t.push(P7.copyTab(o))}t.sort(function(t,e){return t.sortid-e.sortid});var i=O4.getLv();for(var e in this.topGroup.$children){var s=this.topGroup.$children[e];if(null!=s&&null!=s.id){var o=TG69.base[s.id];0!=s.visible&&(s.id!==EntryIds.FaBaoDrawGuide&&(i>=o.unlocklv?s.visible=!0:s.visible=!1),s.includeInLayout=s.visible)}}},t.prototype.getEntryById=function(t){switch(t){case EntryIds.AnimalItem:return this.animalItem;case EntryIds.BackPack:return this.backPack;case EntryIds.CarnivalActivity:return this.carnivalActivity;case EntryIds.DialActivity:return this.dialActivity;case EntryIds.EverydayRecharge:return this.everydayRecharge;case EntryIds.FirstRecharge:return this.firstRecharge;case EntryIds.Growfund:return this.growfund;case EntryIds.HeroZhaoyun:return this.heroZhaoyun;case EntryIds.HolidayActivity:return this.holidayActivity;case EntryIds.Invest:return this.invest;case EntryIds.MailItem:return this.MailItem;case EntryIds.OpenServer:return this.openServer;case EntryIds.RechargeGift:return this.rechargeGift;case EntryIds.SevenLogin:return this.sevenLogin;case EntryIds.Shootup:return this.shootup;case EntryIds.Shop:return this.shop;case EntryIds.SocialItem:return this.SocialItem;case EntryIds.SuitItem:return this.suitItem;case EntryIds.WelfareItem:return this.welfareItem;case EntryIds.WonderActivity:return this.wonderActivity;case EntryIds.GoalActivity:return this.goalActivity;case EntryIds.FreePackage:return this.freePackage;case EntryIds.DayGift:return this.dayGift;case EntryIds.AnimalUnlock:return this.animalUnlock;case EntryIds.HeroTrain:return this.heroTrain;case EntryIds.DailyGift:return this.dailyGift;case EntryIds.MergeServer:return this.mergeServer;case EntryIds.msFreePackage:return this.msFreePackage;case EntryIds.msInvest:return this.msInvest;case EntryIds.WorthLimit:return this.worthLimit;case EntryIds.FirstRechargePackage:return this.firstRechargePackage;case EntryIds.recuiteMoney:return this.recruitMoney;case EntryIds.MsBoss:return this.msBoss;case EntryIds.ComeBack:return this.comeBack;case EntryIds.HappyBox:return this.happyBox;case EntryIds.NewGift:return this.newGift;case EntryIds.CrossTeam:return this.crossTeam;case EntryIds.FaBaoDrawGuide:return this.faBaoDrawGuide;case EntryIds.peerlessHero:return this.peerhero;case EntryIds.UltimateBattle:return this.ultimateBattle;case EntryIds.FaBaoHelp:return this.fabaoHelp;case EntryIds.ShiWTurn:return this.shiWTurn;case EntryIds.peerlessHero1:return this.peerhero1}return null},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ZE19();var i=App.CM.gtM(O6.B74);this.wxTjxcx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openWxTjxcx,this),this.ZO99(i);App.CM.gtM(O6.B74);this.btnAchievement.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){return App.VM.open(O7.F68)},this),this.ZJ3(),this.everydayRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZB51,this),this.ZC62(),this.animalItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH6,this),this.dialActivity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE21,this),this.treaImgGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZB49,this),this.ZF57(),this.welfareItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF59,this),this.SocialItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GR59,this),this.sevenLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH1,this);var s=App.CM.gtM(O6.A96);this.ZB84(s),this.firstRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GE23,this);var o=App.CM.gtM(O6.A44);this.ZA79(o),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopView,this);var r=App.CM.gtM(O6.B98);this.ZG74(r),this.rechargeGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GF31,this);var n=App.CM.gtM(O6.A57);this.ZB7(n),this.growfund.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL84,this);var a=App.CM.gtM(O6.B44);this.ZC88(a),this.invest.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS86,this);var h=App.CM.gtM(O6.B93);this.ZE81(h),this.shootup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GO37,this);var p=App.CM.gtM(O6.B67);this.ZD62(p),this.carnivalActivity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZB50,this),this.ZB85(),this.wonderActivity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZC67,this),this.ZD19(),this.holidayActivity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZB87,this),this.ZC63(),this.openServer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH7,this),this.ZB10(),this.dayGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO98,this),this.ZC64(),this.newGodTrial.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF62,this);var l=App.CM.gtM(O6.A88);this.ZB48(l),this.ZE99();var c=App.CM.gtM(O6.B66);this.ZD69(c);var u=App.CM.gtM(O6.B91);this.ZE84(u);var d=App.CM.gtM(O6.C15);this.MailItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GV12,this),this.ZI99(d),this.showPackNew(),this.suitItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL83,this),this.backPack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL72,this),this.mergeServer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZA58,this),this.comeBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GM91,this),this.ZJ4();var v=App.CM.gtM(O6.C14);this.ZI98(v);var f=App.CM.gtM(O6.A65);this.ZD21(f),this.children.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL74,this),this.animalUnlock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GF35,this),this.goalActivity.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE22,this),this.freePackage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF63,this);var g=App.CM.gtM(O6.A81);this.ZB47(g);var m=App.CM.gtM(O6.B25);this.dailyGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH66,this),this.ZC65(m),this.heroTrain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GK44,this);var y=App.CM.gtM(O6.B17);this.ZC66(y),this.ZF58(),this.FG75();var A=App.CM.gtM(O6.B49);this.ZC97(A),this.awyAutonym.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS87,this);var b=App.CM.gtM(O6.A98);this.ZB88(b),this.AwyBindPhone.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL85,this),this.msFreePackage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE23,this);var T=App.CM.gtM(O6.A35);this.ZB11(T),this.msInvest.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO97,this);var C=App.CM.gtM(O6.B29);this.ZE20(C),this.worthLimit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH8,this);var w=App.CM.gtM(O6.A52);this.ZB86(w),this.firstRechargePackage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openFRPView,this);var O=App.CM.gtM(O6.A4);this.ZL81(O),this.msBoss.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openMSBView,this);var M=App.CM.gtM(O6.A26);this.ZL82(M),this.recruitMoney.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRMView,this);var _=App.CM.gtM(O6.A70);this.ZO93(_);var F=App.CM.gtM(O6.B51);this.ZM81(F),this.happyBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHBView,this);var E=App.CM.gtM(O6.B50);this.ZO94(E),this.crossTeam.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openCTView,this);var P=App.CM.gtM(O6.B35);this.ZO95(P),this.faBaoDrawGuide.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDGView,this),this.ZO96(),this.newGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openNGView,this);var L=App.CM.gtM(O6.B79);this.ZM89(L);App.CM.gtM(O6.B56);this.HeroStar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHeroStar,this),this.ZD22(),P7.FD57(O3.tr(7665),this.HeroStar.lbName),this.kefu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openKefu,this),this.ZJ2(),this.shiWTurn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShiWTurn,this),this.ZD23(),this.heroZhaoyun.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF61,this);var S=App.CM.gtM(O6.B46);this.ZC90(S),this.cornucopiaItema.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ5,this),this.ZB89(),this.peerhero.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF64,this),this.ZE25(App.CM.gtM(O6.A74)),this.peerhero1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE24,this),this.ZD25(App.CM.gtM(O6.A56)),this.ultimateBattle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD24,this),this.ZC59(App.CM.gtM(O6.A43)),this.fabaoHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL86,this),this.ZJ6(App.CM.gtM(O6.B40)),this.ZL79()},t.prototype.FG75=function(){P7.FG67()&&(this.everydayRecharge&&(this.everydayRecharge.visible=!1,this.everydayRecharge.includeInLayout=!1),this.firstRecharge&&(this.firstRecharge.visible=!1,this.firstRecharge.includeInLayout=!1),this.shootup&&(this.shootup.visible=!1,this.shootup.includeInLayout=!1),this.rechargeGift&&(this.rechargeGift.visible=!1,this.rechargeGift.includeInLayout=!1),this.animalUnlock&&(this.animalUnlock.visible=!1,this.animalUnlock.includeInLayout=!1))},t.prototype.ZL74=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B43).serOpenDay+1,i=t.avatarInfo.l,s=parseInt(I5.gIV("unlockLevel")),o=parseInt(I5.gIV("unlocdate"));if(e<o)P18.sDP(O3.tr(3370,o,s));else if(i<s){var r=K18.init.commonDesc1.value;P18.sDP(M18.format(r,[s]))}else this.aCF(O6.B49,I10.A55)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(l.prototype.uBM.call(this,t,e),t instanceof TF93&&this.ZO99(t),t instanceof TE76&&this.ZO95(t),t instanceof TA94&&this.ZC62(),t instanceof TD81&&this.ZB84(t),t instanceof TC68&&this.ZB7(t),t instanceof TF26&&this.ZC90(t),t instanceof TC5&&this.ZA79(t),t instanceof TF16&&this.ZC88(t),t instanceof TG4&&this.ZE81(t),t instanceof TF73&&this.ZD62(t),t instanceof TG10){var s=App.CM.gtM(O6.C14);this.ZI98(s)}if(t instanceof TG30){this.ZE99();s=App.CM.gtM(O6.C14);this.ZI98(s)}if(t instanceof TF45&&this.ZE99(),t instanceof THH9){this.ZHH5();var o=App.CM.gtM(O6.B67);this.ZD62(o);var r=App.CM.gtM(O6.A65);this.ZD21(r)}if(t instanceof TG12){this.ZHH5();var n=e[0],a=e[1];if(n==P4.S88&&a==L13.A76);else{s=App.CM.gtM(O6.C14);this.ZI98(s)}this.ZE19();r=App.CM.gtM(O6.A65);this.ZD21(r)}if(t instanceof TF89&&this.ZD69(t),t instanceof TG8&&this.ZE84(t),t instanceof TG23){this.ZE99();s=App.CM.gtM(O6.C14);this.ZI98(s)}if(t instanceof TG58){n=e[0],a=e[1];n==P4.S88&&a==L13.A76||this.ZG74(t)}if(t instanceof TG20){this.ZE88(t);s=App.CM.gtM(O6.C14);this.ZI98(s)}if(t instanceof TG15||t instanceof TG91||t instanceof TG17||t instanceof TG48||t instanceof THH14){s=App.CM.gtM(O6.C14);this.ZI98(s)}t instanceof THH6&&this.ZI99(t),t instanceof TE38&&this.ZO96(),(t instanceof THH9||t instanceof TG58)&&this.showPackNew(),(t instanceof TG87||t instanceof TF31||t instanceof TE50||t instanceof THH9||t instanceof TE38)&&this.ZF57(),this.ZB85(),this.ZC63(),this.ZD19(),this.ZB10(),this.ZC64(),this.ZF58(),this.ZJ4();var h=e&&null!=e[0]?e[0]:"";if(h!=P4.R37&&h!=P4.U30&&h!=P4.P76||this.ZF57(),h==P4.R38&&this.initEntries(),t instanceof TC79&&this.ZD21(t),t instanceof Practice.Model){r=App.CM.gtM(O6.A65);this.ZD21(r)}if(t instanceof TD18&&(h!=P4.HH88&&h!=P4.HH86&&"ZF63"!=h||this.ZB47(t)),t instanceof TE22&&this.ZC66(t),t instanceof TE38&&this.ZB89(),t instanceof TE20&&this.ZC65(t),t instanceof TF33&&this.ZC97(t),t instanceof Achievement.Model&&this.ZJ3(),this.FG75(),t instanceof TD85&&this.ZB88(t),t instanceof TC62&&(h!=P4.G28&&h!=P4.G26&&"ZF63"!=h||this.ZB11(t)),t instanceof TF70&&this.ZE20(t),t instanceof TC19&&this.ZB86(t),t instanceof TA23&&this.ZL81(t),t instanceof MergeServerBoss.Model&&this.ZL82(t),t instanceof TC60&&this.ZO93(t),t instanceof TF36){this.ZM81(t);var p=App.CM.gtM(O6.B66);this.ZD69(p)}t instanceof TF7&&this.ZO94(t),t instanceof NewGift.Model&&this.ZM89(t),t instanceof TF41&&this.ZD22(),t instanceof THH4&&this.ZJ2(),t instanceof TF14&&this.ZD23(),(t instanceof TF4||t instanceof PeerlessHero.Model)&&this.ZE25(App.CM.gtM(O6.A74)),t instanceof UltimateBattle.Model&&this.ZC59(t),this.ZL79()},t.prototype.ZC97=function(t){this.children.imgNew.visible=t.getEntranceRed(),this.isOpenAllBtn()&&this.children.visible&&(this.children.visible=this.children.visible=!1,this.animalItem.visible=this.animalItem.visible=!1,this.btnAchievement.parent==this.downGroup2&&(this.children.parent.removeChild(this.children),this.animalItem.parent.removeChild(this.animalItem),this.downGroup.addChildAt(this.btnAchievement,1),this.downGroup.addChildAt(this.MailItem,2)))},t.prototype.isOpenAllBtn=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B43).serOpenDay+1,i=t.avatarInfo.l,s=parseInt(I5.gIV("unlockLevel"));return!(e<parseInt(I5.gIV("unlocdate")))&&!(i<s)},t.prototype.ZE19=function(){App.CM.gtM(O6.B82);var t=O4.getLv(),e=K18.init.animalTipsLv.value,i=parseInt(M18.FL28(e,",")[0]),s=parseInt(M18.FL28(e,",")[1]);O4.getVipLv();i<=t&&t<s?THH34.FK20(THH34.FJ1())?this.animalUnlock.visible=this.animalUnlock.includeInLayout=!1:(this.animalUnlock.visible=this.animalUnlock.includeInLayout=!0,O4.getVipLv()>=THH34.FJ1()?this.animalUnlock.imgNew.visible=!0:this.animalUnlock.imgNew.visible=!1):this.animalUnlock.visible=this.animalUnlock.includeInLayout=!1,this.FG75()},t.prototype.ZC62=function(){var t=TB21.gtM();if(t.openState&&!t.isTakeAll()){this.everydayRecharge.visible=this.everydayRecharge.includeInLayout=!0;var e=TF59.FL36();null!=e&&0<e?this.everydayRecharge.updateCd(e):this.everydayRecharge.removeTimer(),this.everydayRecharge.imgNew.visible=0<TB21.getReNum(),this.FG75()}else this.everydayRecharge.visible=this.everydayRecharge.includeInLayout=!1},t.prototype.ZC90=function(t){if(null!=t&&1==t.openState){this.heroZhaoyun.visible=this.heroZhaoyun.includeInLayout=!0,this.heroZhaoyun.imgNew.visible=0<t.FL35(),this.heroZhaoyun.bgImg=t.godTrialData.icon,P7.FD57(t.godTrialData.name,this.heroZhaoyun.lbName);var e=t.godTrialData.ZHH64();null!=e&&0<e?this.heroZhaoyun.updateCd(e):this.heroZhaoyun.removeTimer(),App.THH33.aUE(this.heroZhaoyun.gpTween,"act_yq")}else this.heroZhaoyun.visible=this.heroZhaoyun.includeInLayout=!1,App.THH33.rEf(this.heroZhaoyun.gpTween,"act_yq")},t.prototype.ZL80=function(){var t=new egret.Point;t.x=this.dialActivity.x,t.y=this.dialActivity.y;var e=P7.FJ14(t,this.dialActivity,this.topGroup);this.treaImgGrp.x=e.x-this.treaImgGrp.width/2,this.treaImgGrp.x+this.treaImgGrp.width>App.TG37.getWidth()-10&&(this.treaJiaoImg.x=110,this.treaImgGrp.x=App.TG37.getWidth()-this.treaImgGrp.width-10),this.treaImgGrp.x<0&&(this.treaJiaoImg.x=30,this.treaImgGrp.x=0),this.treaImgGrp.y=e.y+this.dialActivity.height+this.firstRecharge.height+35,this.FG75()},t.prototype.ZF57=function(){var t=this,e=TF59.FA3(F17.A8);if(0<e.length){var i=App.CM.gtM(O6.B82).avatarInfo.l,s=0,o=App.CM.gtM(O6.C24);if(this.dialActivity.removeTimer(),-1!=e.indexOf(F7.A56)){var r=o.dialData.ZHH64();this.dialActivity.updateCd(r),this.dialActivity.bgImg="zhuanpan_png",P7.FD57(O3.tr(3211),this.dialActivity.lbName),s++}else-1!=e.indexOf(F7.A14)&&Number(I8.gIV("openLevel"))<=i?(this.dialActivity.bgImg="v1_btn_xunbao_png",P7.FD57(O3.tr(3209),this.dialActivity.lbName),s++):-1!=e.indexOf(F7.A10)&&Number(TD79.gIV("openLevel"))<=i?(this.dialActivity.bgImg="zhuanpan_png",P7.FD57(O3.tr(6666),this.dialActivity.lbName),s++):TE40.FL37()?(this.dialActivity.bgImg="zhuanpan_png",P7.FD57(O3.tr(6666),this.dialActivity.lbName),s++):-1!=e.indexOf(F7.B9)&&TF82.FG34(!1)&&(this.dialActivity.bgImg="zhuanpan_png",P7.FD57(O3.tr(6666),this.dialActivity.lbName),s++);0<s?(this.dialActivity.visible=this.dialActivity.includeInLayout=!0,this.dialActivity.imgNew.visible=0<TF59.FG73(),App.THH33.aUE(this.dialActivity.gpTween,"act_yq")):(this.dialActivity.visible=this.dialActivity.includeInLayout=!1,App.THH33.rEf(this.dialActivity.gpTween,"act_yq"))}else this.dialActivity.visible=this.dialActivity.includeInLayout=!1,App.THH33.rEf(this.dialActivity.gpTween,"act_yq");var n=App.CM.gtM(O6.B45);this.dialActivity.visible&&n.openRemind?App.K16.doFrame(1,1,function(){t.ZL80(),t.treaImgGrp.$setVisible(!0)},this):this.treaImgGrp.$setVisible(!1)},t.prototype.ZB85=function(){0!=TF59.FA3(F17.A3).length?(this.carnivalActivity.visible=this.carnivalActivity.includeInLayout=!0,this.carnivalActivity.imgNew.visible=0<TF59.FC76()):this.carnivalActivity.visible=this.carnivalActivity.includeInLayout=!1},t.prototype.ZD19=function(){0!=TF59.FA3(F17.A6).length?(this.wonderActivity.visible=this.wonderActivity.includeInLayout=!0,this.wonderActivity.imgNew.visible=0<TF59.FE55()):this.wonderActivity.visible=this.wonderActivity.includeInLayout=!1},t.prototype.ZF58=function(){0!=TF59.FA3(F17.A9).length?(this.goalActivity.visible=this.goalActivity.includeInLayout=!0,this.goalActivity.imgNew.visible=0<TF59.FG74()):this.goalActivity.visible=this.goalActivity.includeInLayout=!1},t.prototype.ZC63=function(){0!=TF59.FA3(F17.A4).length?(this.holidayActivity.visible=this.holidayActivity.includeInLayout=!0,this.holidayActivity.imgNew.visible=0<TF59.FD63()):this.holidayActivity.visible=this.holidayActivity.includeInLayout=!1},t.prototype.ZB10=function(){0!=TF59.FA3(F17.A2).length?(this.openServer.visible=this.openServer.includeInLayout=!0,this.openServer.imgNew.visible=0<TF59.FB48()):this.openServer.visible=this.openServer.includeInLayout=!1},t.prototype.ZC64=function(){0!=TF59.FA3(F17.A5).length?(this.dayGift.visible=this.dayGift.includeInLayout=!0,this.dayGift.imgNew.visible=0<TF59.FD62()):this.dayGift.visible=this.dayGift.includeInLayout=!1},t.prototype.ZA79=function(t){null!=t&&1==t.openState?(this.firstRecharge.visible=this.firstRecharge.includeInLayout=!0,this.firstRecharge.imgNew.visible=0<t.FL35()):this.firstRecharge.visible=this.firstRecharge.includeInLayout=!1},t.prototype.ZG74=function(t){this.ZD20()},t.prototype.ZE88=function(t){this.ZD20()},t.prototype.ZI98=function(t){this.ZD20()},t.prototype.ZD20=function(){this.shop.imgNew.visible=!O4.FF89(L17.A42)&&0<THH27.FC61()},t.prototype.ZB84=function(t){if(null!=t&&1==t.openState){this.sevenLogin.visible=this.sevenLogin.includeInLayout=!0,this.sevenLogin.imgNew.visible=0<t.FL35();var e=t.loginData.day,i=t.loginData.icon.split(","),s=t.loginData.name.split(",");2<=e?(this.sevenLogin.bgImg=i[1],P7.FD57(s[1],this.sevenLogin.lbName)):(this.sevenLogin.bgImg=i[0],P7.FD57(s[0],this.sevenLogin.lbName))}else this.sevenLogin.visible=this.sevenLogin.includeInLayout=!1},t.prototype.ZB7=function(t){if(null!=t&&1==t.openState)if(1==t.closeEnter)this.rechargeGift.visible=this.rechargeGift.includeInLayout=!1,this.rechargeGift.removeTimer();else{this.rechargeGift.visible=this.rechargeGift.includeInLayout=!0;var e=t.rechargeGiftData;null!=e.zeroCD&&0<e.zeroCD?this.rechargeGift.updateCd(e.getZeroCD()):this.rechargeGift.removeTimer(),this.rechargeGift.imgNew.visible=0<t.FL35();var i=TD32.FB16(),s=M18.FL28(e.more,";",",");for(var o in s)if(parseInt(s[o][0])==i){P7.FD57(s[o][1],this.rechargeGift.lbName);break}}else this.rechargeGift.visible=this.rechargeGift.includeInLayout=!1,this.rechargeGift.removeTimer()},t.prototype.ZC88=function(t){if(null==t||1!=t.openState||t.closeEnter)this.growfund.removeTimer(),this.growfund.visible=this.growfund.includeInLayout=!1;else{var e=t.growFundData;null!=e.buyCD&&0<e.buyCD&&1!=e.isBuy?this.growfund.updateCd(e.ZU54()):this.growfund.removeTimer(),this.growfund.visible=this.growfund.includeInLayout=!0,this.growfund.imgNew.visible=0<t.FL35()}},t.prototype.ZE81=function(t){if(null==t||1!=t.openState||t.closeEnter)this.invest.removeTimer(),this.invest.visible=this.invest.includeInLayout=!1;else{var e=t.investData;null!=e.buyCD&&0<e.buyCD&&1!=e.isBuy?this.invest.updateCd(e.ZU54()):this.invest.removeTimer(),this.invest.visible=this.invest.includeInLayout=!0,this.invest.imgNew.visible=0<t.FL35()}},t.prototype.ZE20=function(t){if(null==t||1!=t.openState||t.closeEnter)this.msInvest.removeTimer(),this.msInvest.visible=this.msInvest.includeInLayout=!1;else{var e=t.investData;null!=e.buyCD&&0<e.buyCD&&1!=e.isBuy?this.msInvest.updateCd(e.ZU54()):this.msInvest.removeTimer(),this.msInvest.visible=this.msInvest.includeInLayout=!0,this.msInvest.imgNew.visible=0<t.FL35()}},t.prototype.ZD62=function(t){if(null!=t){var e=t.shootupData;if(null!=e){this.shootup.bgImg=t.shootupData.icon,P7.FD57(t.shootupData.name,this.shootup.lbName);var i=e.shootUpConfVo.awd[0].k,s=N12.giC(i);1==t.openState?1==t.closeEnter&&s<=0?(this.shootup.visible=this.shootup.includeInLayout=!1,this.shootup.removeTimer()):(this.shootup.visible=this.shootup.includeInLayout=!0,null!=e.zeroCD&&0<e.zeroCD?this.shootup.updateCd(e.getZeroCD()):this.shootup.removeTimer()):0<s?this.shootup.visible=this.shootup.includeInLayout=!0:(this.shootup.visible=this.shootup.includeInLayout=!1,this.shootup.removeTimer()),this.shootup.imgNew.visible=0<t.FL35()}else this.shootup.visible=this.shootup.includeInLayout=!1,this.shootup.removeTimer()}},t.prototype.ZE99=function(){var t=App.CM.gtM(O6.B84);this.SocialItem.imgNew.visible=0<t.redPoint+TF83.FL35()+TG73.FL35()},t.prototype.ZHH5=function(){this.ZE99();var t=App.CM.gtM(O6.B67);this.shootup.imgNew.visible=0<t.FL35(),this.FG75()},t.prototype.ZD69=function(t){if("publish"===platform.name)return this.welfareItem.visible=!1,void(this.welfareItem.includeInLayout=!1);this.welfareItem.imgNew.visible=0<t.ZM37()},t.prototype.ZE84=function(t){t.isShowImgNew(),t.ZK14(),t.ZG29(),t.ZU97(),this.animalItem.imgNew.visible=0<t.red1+t.red2+t.red3+t.red4},t.prototype.ZI99=function(t){this.MailItem.imgNew.visible=0<t.FL35()},t.prototype.ZD21=function(t){if(t.ZT29()&&!this.isLoadMilitary){if(this.isLoadMilitary=!0,this.suitItem.bgImg="bingshu_png",P7.FD57(O3.tr(6677),this.suitItem.lbName),this.suitItem.bgStr="v1_img_huodongtubiaodi_zjm_png","publish"===platform.name)return this.suitItem.visible=!1,void(this.suitItem.includeInLayout=!1)}else P7.FD57(O3.tr(3730),this.suitItem.lbName);if(this.isLoadMilitary){P7.FD57(O3.tr(6677),this.suitItem.lbName);var e=App.CM.gtM(O6.B54),i=!!Practice.Utils.FG43(!1)&&0<e.FL35();this.suitItem.imgNew.visible=0<t.FL35()||i||0<t.getFlagRedNum()}},t.prototype.ZB47=function(t){null!=t&&1==t.openState&&!t.actData.isGetAll()&&0<t.actData.ZHH64()?(this.freePackage.visible=this.freePackage.includeInLayout=!0,this.freePackage.imgNew.visible=0<t.FL35()):this.freePackage.visible=this.freePackage.includeInLayout=!1},t.prototype.ZC65=function(t){if(null!=t&&t.openState&&!t.actData.r){this.dailyGift.visible=this.dailyGift.includeInLayout=!0;var e=TF59.FL36();null!=e&&0<e?this.dailyGift.updateCd(e):this.dailyGift.removeTimer(),this.dailyGift.imgNew.visible=0<t.FL35()}else this.dailyGift.visible=this.dailyGift.includeInLayout=!1;if(!t.isOpenView&&t.openState)if(1==App.CM.gtM(O6.B43).firstLogin){var i=O4.getLv(),s=M18.FL28(t.actData.more,",");i>=Number(s[0])&&i<=Number(s[1])&&(this.ZHH66(),t.isOpenView=!0)}else t.isOpenView=!0},t.prototype.ZC66=function(t){null==t||1!=t.openState||t.isGetAll()?this.heroTrain.visible=this.heroTrain.includeInLayout=!1:(this.heroTrain.visible=this.heroTrain.includeInLayout=!0,this.heroTrain.imgNew.visible=0<t.FL35(),this.heroTrain.bgImg=t.actData.icon)},t.prototype.ZB86=function(t){if(null!=t&&1==t.openState&&0==t.actData.isTake){this.worthLimit.visible=this.worthLimit.includeInLayout=!0,this.worthLimit.imgNew.visible=0<t.FL35();var e=t.actData.ZHH64();null!=e&&0<e?this.worthLimit.updateCd(e,!0):this.worthLimit.removeTimer()}else this.worthLimit.visible=this.worthLimit.includeInLayout=!1},t.prototype.ZL81=function(t){if(null!=t&&1==t.openState&&0==t.actData.ZJ93()){this.firstRechargePackage.visible=this.firstRechargePackage.includeInLayout=!0,this.firstRechargePackage.imgNew.visible=0<t.FL35();var e=t.actData.ZHH64();null!=e&&0<e?this.firstRechargePackage.updateCd(e,!0):this.firstRechargePackage.removeTimer()}else this.firstRechargePackage.visible=this.firstRechargePackage.includeInLayout=!1,this.firstRechargePackage.removeTimer()},t.prototype.ZL82=function(t){if(null!=t&&1==t.openState){this.msBoss.visible=this.msBoss.includeInLayout=!0,this.msBoss.imgNew.visible=0<t.FL35();var e=t.actData.ZHH64();null!=e&&0<e?this.msBoss.updateCd(e,!0):this.msBoss.removeTimer()}else this.msBoss.visible=this.msBoss.includeInLayout=!1,this.msBoss.removeTimer()},t.prototype.ZO93=function(t){if(null!=t&&1==t.openState){this.recruitMoney.visible=this.recruitMoney.includeInLayout=!0,this.recruitMoney.imgNew.visible=0<t.FL35();var e=t.actData.ZHH64();null!=e&&0<e?this.recruitMoney.updateCd(e,!0):this.recruitMoney.removeTimer()}else this.recruitMoney.visible=this.recruitMoney.includeInLayout=!1,this.recruitMoney.removeTimer()},t.prototype.ZM81=function(t){t.overCd?(this.comeBack.visible=this.comeBack.includeInLayout=!0,this.comeBack.imgNew.visible=0<t.ZV91(),this.comeBack.bgImg="v1_btn_zhaohuanfuli_png",P7.FD57(O3.tr(6708),this.comeBack.lbName)):this.comeBack.visible=this.comeBack.includeInLayout=!1},t.prototype.ZO94=function(t){if(null!=t&&1==t.openState){this.happyBox.visible=this.happyBox.includeInLayout=!0,this.happyBox.imgNew.visible=0<t.FL35();var e=t.actData.ZHH64();null!=e&&0<e?this.happyBox.updateCd(e,!0):this.happyBox.removeTimer()}else this.happyBox.visible=this.happyBox.includeInLayout=!1,this.happyBox.removeTimer()},t.prototype.ZO95=function(t){if(-1!=t.state&&TE78.isUnlock()){this.crossTeam.visible=this.crossTeam.includeInLayout=!0,this.crossTeam.imgNew.visible=0<t.FL35();var e=TG69.FI64(EntryIds.CrossTeam);this.crossTeam.bgImg=e.icon,P7.FD57(O3.tr(7177),this.crossTeam.lbName)}else this.crossTeam.visible=this.crossTeam.includeInLayout=!1},t.prototype.ZO96=function(){this.faBaoDrawGuide.visible=this.faBaoDrawGuide.includeInLayout=TE40.FF76(),this.faBaoDrawGuide.visible?App.THH33.aUE(this.faBaoDrawGuide.gpTween,"act_yq"):App.THH33.rEf(this.faBaoDrawGuide.gpTween,"act_yq")},t.prototype.ZM89=function(t){null!=t&&1==t.openState&&t.isShowEntre()?(this.newGift.visible=this.newGift.includeInLayout=!0,this.newGift.imgNew.visible=0<t.FL35()):this.newGift.visible=this.newGift.includeInLayout=!1},t.prototype.ZD22=function(){var t=App.CM.gtM(O6.B56),e=App.CM.gtM(O6.B82),i=App.CM.gtM(O6.B43).serOpenDay+1;e.avatarInfo.l>=Number(TE89.init.openLevel.value)&&i>=Number(TE89.init.openDay.value)?(this.HeroStar.visible=!0,this.HeroStar.includeInLayout=!0,this.HeroStar.imgNew.visible=0<t.FL35()):(this.HeroStar.visible=!1,this.HeroStar.includeInLayout=!1),this.HeroStar.visible?this.backPack.parent==this.downGroup&&(this.backPack.parent.removeChild(this.backPack),this.downGroup2.addChild(this.backPack)):this.backPack.parent==this.downGroup2&&(this.backPack.parent.removeChild(this.backPack),this.HeroStar.parent.addChild(this.backPack))},t.prototype.ZJ2=function(){var t=App.CM.gtM(O6.C28);this.kefu.visible=this.kefu.includeInLayout=t.actData.isOpen,t.actData.isOpen&&P7.FD57(t.actData.titName,this.kefu.lbName)},t.prototype.ZD23=function(){var t=App.CM.gtM(O6.B61);this.shiWTurn.visible=this.shiWTurn.includeInLayout=t.openState,this.shiWTurn.imgNew.visible=t.openState&&t.actData.ln,t.openState?App.THH33.aUE(this.shiWTurn.gpTween,"act_yq"):App.THH33.rEf(this.shiWTurn.gpTween,"act_yq")},t.prototype.ZB48=function(t){if(null!=t&&1==t.openState){this.newGodTrial.visible=this.newGodTrial.includeInLayout=!0,this.newGodTrial.imgNew.visible=0<t.FL35(),this.newGodTrial.bgImg=t.godTrialData.icon,P7.FD57(t.godTrialData.name,this.newGodTrial.lbName);var e=t.godTrialData.ZHH64();null!=e&&0<e?this.newGodTrial.updateCd(e):this.newGodTrial.removeTimer(),App.THH33.aUE(this.newGodTrial.gpTween,"act_yq")}else this.newGodTrial.visible=this.newGodTrial.includeInLayout=!1,App.THH33.rEf(this.newGodTrial.gpTween,"act_yq")},t.prototype.showPackNew=function(){var t=App.CM.gtM(O6.C11);App.CM.gtM(O6.B98).isSmelt?(null==this.packImg&&(this.packImg=new eui.Image,this.packImg.source="v1_img_man_png",this.backPack.addChild(this.packImg),this.packImg.x=0,this.packImg.y=0),this.packImg.visible=!0):this.packImg&&(this.packImg.visible=!1),t.isShowHong(),this.backPack.imgNew.visible=!!t.isHong},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.animalItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH6,this),this.dialActivity.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE21,this),this.treaImgGrp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE21,this),this.welfareItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF59,this),this.SocialItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GR59,this),this.sevenLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH1,this),this.firstRecharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GE23,this),this.shop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopView,this),this.rechargeGift.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GF31,this),this.growfund.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL84,this),this.invest.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS86,this),this.msInvest.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO97,this),this.shootup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GO37,this),this.carnivalActivity.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZB50,this),this.wonderActivity.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZC67,this),this.openServer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH7,this),this.everydayRecharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZB51,this),this.heroZhaoyun.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF61,this),this.suitItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL83,this),this.backPack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL72,this),this.recruitMoney.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRMView,this),this.happyBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHBView,this),this.msBoss.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openMSBView,this),this.newGift.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openNGView,this),this.peerhero.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF64,this),this.peerhero1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE24,this),this.goalActivity.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE22,this),this.fabaoHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL86,this),this.ultimateBattle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD24,this),this.shiWTurn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openShiWTurn,this),(this.dialActivity.visible=!0)&&App.THH33.rEf(this.dialActivity.gpTween,"act_yq"),1==this.heroZhaoyun.visible&&App.THH33.rEf(this.heroZhaoyun.gpTween,"act_yq"),1==this.newGodTrial.visible&&App.THH33.rEf(this.newGodTrial.gpTween,"act_yq"),this.peerhero.visible&&App.THH33.rEf(this.peerhero.gpTween,"act_yq"),this.peerhero1.visible&&App.THH33.rEf(this.peerhero1.gpTween,"act_yq"),this.shiWTurn.visible&&App.THH33.rEf(this.shiWTurn.gpTween,"act_yq"),App.THH33.rEf(this.faBaoDrawGuide.gpTween,"act_yq"),this.children.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL74,this),this.animalUnlock.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GF35,this),this.rechargeGift.removeTimer(),this.growfund.removeTimer(),this.invest.removeTimer(),this.shootup.removeTimer(),App.CM.apF(O6.C20,K2.A6,TG68.guideView==this.dialActivity),P16.isChild(this,TG68.guideView)&&TG68.FK89()},t.prototype.GF35=function(){App.VM.open(O7.B78)},t.prototype.ZS84=function(){var t=App.CM.gtM(O6.B82).avatarInfo.l,e=parseInt(L7.gIV("needLevel"));if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.G78)},t.prototype.ZE21=function(){App.VM.open(O7.HH94)},t.prototype.ZB49=function(){var t=App.CM.gtM(O6.B45);t&&1==t.openState&&TG84.FM16("2001")},t.prototype.ZS85=function(){App.VM.open(O7.G44)},t.prototype.ZF59=function(){App.VM.open(O7.F64)},t.prototype.ZHH6=function(){var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l,i=t.avatarInfo.v,s=parseInt(K19.gIV("animalLv"));if(s<=e||1==K18.vip[i].openanimal)App.VM.open(O7.G43);else{var o=K18.init.commonDesc1.value;P18.sDP(M18.format(o,[s]))}},t.prototype.ZL83=function(){this.isLoadMilitary?this.aCF(O6.A65,D6.A3):O4.getLv()>=parseInt(K18.init.suitLv.value)&&App.VM.open(O7.I17)},t.prototype.ZL72=function(){this.aCF(O6.C11,O14.A9)},t.prototype.GR59=function(){App.VM.open(O7.I66)},t.prototype.ZHH1=function(){this.aCF(O6.A96,F11.A4)},t.prototype.GE23=function(){this.aCF(O6.A44,C17.A4)},t.prototype.openShopView=function(){App.VM.open(O7.HH98)},t.prototype.ZF60=function(){},t.prototype.GF31=function(){this.aCF(O6.A57,D11.A4)},t.prototype.ZL84=function(){this.aCF(O6.B44,I16.A4)},t.prototype.ZS86=function(){this.aCF(O6.B93,M6.A4)},t.prototype.ZO97=function(){this.aCF(O6.B29,K12.A4)},t.prototype.ZF61=function(){TF59.FE54(F7.B11)},t.prototype.ZF62=function(){TF59.FE54(F7.A67)},t.prototype.GO37=function(){var t=TF59.FB15(F7.B29),e=t.shootupData.shootUpConfVo.awd[0].k;if(0<N12.giC(e)){var i={handler:function(){P7.FC5(TG7.FA12(t.shootupData.parVer)),App.CM.apF(O6.C18,O10.A5)},btnStr:O3.tr(5921),content:M18.HTP.parse(O3.tr(5920))};App.VM.open(O7.C54,i)}else this.aCF(O6.B67,K8.A4)},t.prototype.ZHH7=function(){App.VM.open(O7.D33)},t.prototype.ZO98=function(){App.VM.open(O7.C33)},t.prototype.ZB50=function(){App.VM.open(O7.C32)},t.prototype.ZC67=function(){App.VM.open(O7.D86)},t.prototype.ZE22=function(){App.VM.open(O7.F67)},t.prototype.ZB87=function(){App.VM.open(O7.D12)},t.prototype.ZB51=function(){this.aCF(O6.A13,B5.A4)},t.prototype.ZF63=function(){App.CM.apF(O6.A81,E15.A5)},t.prototype.GK44=function(){TF59.FE54(F7.A98)},t.prototype.ZHH66=function(){App.CM.apF(O6.B25,HH8.A2)},t.prototype.ZHH8=function(){App.CM.apF(O6.A52,C10.A3)},t.prototype.openFRPView=function(){App.CM.apF(O6.A4,A5.A2)},t.prototype.openMSBView=function(){TF59.FE54(F7.A20)},t.prototype.openRMView=function(){TF59.FE54(F7.A81)},t.prototype.openHBView=function(){TF59.FE54(F7.B14)},t.prototype.openCTView=function(){TG84.FM16(ViewMapingIndex.CrossTeam)},t.prototype.openDGView=function(){App.CM.apF(O6.B32,HH15.A15)},t.prototype.openNGView=function(){App.CM.apF(O6.B79,NewGift.Const.opNewGiftView)},t.prototype.GV12=function(){this.aCF(O6.C15,O17.A12)},t.prototype.openHeroStar=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.B43).serOpenDay+1;t.avatarInfo.l>=Number(TE89.init.openLevel.value)&&e>=Number(TE89.init.openDay.value)?this.aCF(O6.B56,J4.A26):P18.sDP(O3.tr(5054,TE89.init.openDay.value,TE89.init.openLevel.value))},t.prototype.openKefu=function(){this.aCF(O6.C28,P3.OpenView)},t.prototype.openShiWTurn=function(){this.aCF(O6.B61,J9.A2)},t.prototype.openWxTjxcx=function(){P7.FJ16()?this.aCF(O6.B74,K4.A20):"wxgame"===platform.name?this.aCF(O6.B74,K4.A19):"qq"===platform.name&&App.VM.open(O7.HH68)},t.prototype.ZO99=function(t){if("P0004901"!==platform.gameId&&"P0004896"!==platform.gameId&&"P0004973"!==platform.gameId&&"P0004983"!==platform.gameId&&"P0005515"!==platform.gameId&&"P0005516"!==platform.gameId)if("P0004890"!==platform.gameId&&"P0004891"!==platform.gameId&&"P0006016"!==platform.gameId&&"P0006017"!==platform.gameId)if("wxgame"===platform.name||"qq"===platform.name){var e=O4.getLv();if(P7.FJ16()){if(e<Number(J17.init.topUnloclLv.value))return void(this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=!1);P7.FD57(O3.tr(8560),this.wxTjxcx.lbName),this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=0==t.qt,this.wxTjxcx.imgNew.visible=0==t.qt}else if("wxgame"===platform.name){if(e<Number(J17.init.appUnlockLv.value))return void(this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=!1);this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=2!=t.ar,this.wxTjxcx.imgNew.visible=2!=t.sr||2!=t.ar}else if("qq"===platform.name){this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=2!=t.isTakeWan;var i=App.CM.gtM(O6.B82);this.wxTjxcx.visible&&(this.wxTjxcx.bgImg="wanyiwan_png",P7.FD57(O3.tr(6707),this.wxTjxcx.lbName),this.wxTjxcx.imgNew.visible=1==t.isTakeWan||i.isGrowRed,i.isGrowRed=!1)}}else this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=!1;else this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=!1;else this.wxTjxcx.visible=this.wxTjxcx.includeInLayout=!1},t.prototype.ZJ3=function(){if("publish"===platform.name)return this.btnAchievement.visible=!1,void(this.btnAchievement.includeInLayout=!1);var t=App.CM.gtM(O6.B82).avatarInfo.l;this.btnAchievement.visible=this.wonderActivity.includeInLayout=t>=Achievement.openLv,this.btnAchievement.imgNew.visible=Achievement.hasDot()},t.prototype.ZA58=function(){App.VM.open(O7.F69)},t.prototype.GM91=function(){App.CM.apF(O6.B51,J1.A24)},t.prototype.ZJ4=function(){var t=TF59.FA3(F17.A1),e=this.mergeServer;if(0!=t.length){var i=App.CM.gtM(O6.A18);if(i&&i.openState){var s=i.actData.ZHH64();null!=s&&0<s?e.updateCd(s):e.removeTimer()}else e.removeTimer();e.visible=e.includeInLayout=!0,e.imgNew.visible=0<TF59.FF68()}else e.visible=e.includeInLayout=!1},t.prototype.ZS87=function(){"english"==platform.name?(App.CM.apF(O6.A98,F9.A14),App.CM.apF(O6.A98,F9.A12,10)):App.CM.apF(O6.A98,F9.A8)},t.prototype.ZL85=function(){App.CM.apF(O6.A98,F9.A5)},t.prototype.ZB88=function(t){0==t.rec&&"awy"==platform.name?(this.awyAutonym.imgNew.visible=t.isRead,this.awyAutonym.visible=this.awyAutonym.includeInLayout=!0):"crazy"==platform.name&&0==t.rec?(this.awyAutonym.imgNew.visible=t.isRead,this.awyAutonym.visible=this.awyAutonym.includeInLayout=!0):this.awyAutonym.visible=this.awyAutonym.includeInLayout=!1,0==t.tm&&2!=t.state&&"awy"==platform.name?(this.AwyBindPhone.imgNew.visible=2!=t.state,this.AwyBindPhone.visible=this.AwyBindPhone.includeInLayout=!0):this.AwyBindPhone.visible=this.AwyBindPhone.includeInLayout=!1},t.prototype.ZE23=function(){App.CM.apF(O6.A35,D16.A5)},t.prototype.ZB11=function(t){if(null==t||1!=t.openState||t.actData.isGetAll())this.msFreePackage.visible=this.msFreePackage.includeInLayout=!1;else{this.msFreePackage.visible=this.msFreePackage.includeInLayout=!0,this.msFreePackage.imgNew.visible=0<t.FL35();var e=t.actData.ZHH64();null!=e&&0<e?this.msFreePackage.updateCd(e,!0):this.msFreePackage.removeTimer()}},t.prototype.ZJ5=function(){if(!Cornucopia.Config.isOpen())return P18.sDP(O3.tr(5054,Cornucopia.Config.serverDate,Cornucopia.Config.openLv));this.aCF(O6.B3,Cornucopia.Const.OpenMainView)},t.prototype.ZF64=function(){App.VM.open(O7.A73)},t.prototype.ZE24=function(){App.VM.open(O7.A59)},t.prototype.ZD24=function(){App.CM.apF(O6.A43,UltimateBattle.Const.OPEN)},t.prototype.ZL86=function(){App.VM.open(O7.G38)},t.prototype.ZB89=function(t){this.cornucopiaItema.imgNew.visible=Cornucopia.Utils.FK53();var e=App.CM.gtM(O6.A41);e.openState&&(e.actData.ZU21(1)?null==this.cornucopiaImg&&(this.cornucopiaImg=new eui.Image,this.cornucopiaImg.source="v1_img_hui_png",this.cornucopiaItema.addChild(this.cornucopiaImg),this.cornucopiaImg.x=0,this.cornucopiaImg.y=0):null!=this.cornucopiaImg&&(this.cornucopiaImg.source=""))},t.prototype.ZE25=function(t){var e=!!t&&t.openState;this.peerhero.visible=this.peerhero.includeInLayout=e,e?App.THH33.aUE(this.peerhero.gpTween,"act_yq"):App.THH33.rEf(this.peerhero.gpTween,"act_yq")},t.prototype.ZD25=function(t){var e=!!t&&t.openState;this.peerhero1.visible=this.peerhero1.includeInLayout=e,e?App.THH33.aUE(this.peerhero1.gpTween,"act_yq"):App.THH33.rEf(this.peerhero1.gpTween,"act_yq")},t.prototype.ZC59=function(t){var e=!!t&&2<=t.st;this.ultimateBattle.visible=this.ultimateBattle.includeInLayout=e},t.prototype.ZJ6=function(t){this.fabaoHelp.visible=this.fabaoHelp.includeInLayout=t.openState,this.fabaoHelp.visible?App.THH33.aUE(this.fabaoHelp.gpTween,"act_yq"):App.THH33.rEf(this.fabaoHelp.gpTween,"act_yq")},t.prototype.ZM96=function(t){var e=t.ZM12();e&&("992"==e.fingerId&&(e.nFinish?TG68.guideView==this.freePackage&&TG68.FK89():!TG68.guideView&&this.freePackage&&(this.freePackage.validateNow(),TG68.FL77(this.freePackage,this.freePackage.width/2,this.freePackage.height/2))),t.homeExtra?TG68.guideView||TG68.FL77(this.dialActivity,this.dialActivity.width/2,this.dialActivity.height/2):TG68.guideView==this.dialActivity&&TG68.FK89())},t}(BaseEuiView);__reflect(HomeUiView.prototype,"HomeUiView");var M13=function(){function r(){}return r.FK35=function(t){r.init=t.horse_init,r.base=t.horse_base,r.skin=t.horse_skin,r.skill=t.horse_skill,r.reward=t.horse_reward,r.skillGroup=this.FI15(),r.expDanData=this.FHH33()},r.FI47=function(){var t;t=r.reward;var e=[];for(var i in t)e.push(t[i]);return e},r.getData=function(t){for(var e=[],i=t.split(";"),s=0;s<i.length;s++)e[s]={},e[s][i[s].split(":")[0]]=i[s].split(":")[1];return e},r.FHH90=function(t){var e=[];if(t)for(var i in r.skin)-1==r.skin[i].itemid&&e.push(r.skin[i]);else for(var i in r.skin)-1!=r.skin[i].itemid&&e.push(r.skin[i]);return e},r.FI15=function(){var t={};for(var e in r.skill){var i=r.skill[e],s=[],o=i.skillid+"";t[o]?t[o].push(i):(s.push(i),t[o]=s)}return t},r.FHH33=function(){var t={};if(!this.init)return t;for(var e=this.init.expItem.value.split(";"),i=0;i<e.length;i++){var s=[],o=e[i].split(":"),r=o[0];t[r]||(s.push(o[1]),t[r]=s)}return t},r.FG31=function(){var t;return this.base?t=App.CM.gtM(O6.C2).initHorseData.h.k:t},r}();__reflect(M13.prototype,"M13");var N7=function(){function t(){}return t.A24=10001,t.A25=10002,t.A29=10003,t.A14=10004,t.A15=10005,t.A9=10006,t.A10=10007,t.A26=10008,t.A11=10009,t.A17=10010,t.A27=10011,t.A21=10012,t.A4=10013,t.A22=10014,t.A23=10015,t.A18=10016,t.A2=10017,t.A28=10018,t.A5=10019,t.A19=10020,t.A20=11003,t.A16=11004,t.A12=11005,t.A6=11006,t.A3=11007,t.A1=11008,t.A13=11009,t.A7=11010,t.A8=11011,t}();__reflect(N7.prototype,"N7");var TE6=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I7,"HorseDan",t,K17.UI_Main_TOP),t.rgF(N7.A20,t.GN47,t),t.rgF(N7.A16,t.GL57,t),App.VM.register(O7.G62,"HorseDerma",t,K17.UI_Main_TOP),t.rgF(N7.A12,t.GJ72,t),t.rgF(N7.A6,t.GHH72,t),App.VM.register(O7.G63,"HorseSkill",t,K17.UI_Main_TOP),t.rgF(N7.A13,t.GJ73,t),t.rgF(N7.A7,t.GHH73,t),App.VM.register(O7.E81,"HorseEverAdd",t,K17.UI_Main_TOP),t.rgF(N7.A3,t.GF95,t),t.rgF(N7.A1,t.GE68,t),t.rgF(N7.A8,t.GHH74,t);var e=new TG70(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.I77),e.aLV(O7.I7),e.aLV(O7.G62),e.aLV(O7.E81),e.aLV(O7.G63),e.aLV(O7.I1),e.aLV(O7.G58),e.aLV(O7.G45),e.aLV(O7.F86),e.aLV(O7.I17),e.aLV(O7.I39),e.aLV(O7.I70),t.horseProxy=new TG71(t),t.rgF(N7.A24,t.loadReq,t),t.rgF(N7.A25,t.loadRes,t),t.rgF(N7.A19,t.GQ35,t),t.rgF(N7.A14,t.GP38,t),t.rgF(N7.A15,t.GP39,t),t.rgF(N7.A22,t.GU90,t),t.rgF(N7.A23,t.GU91,t),t.rgF(N7.A18,t.GR26,t),t.rgF(N7.A2,t.GR27,t),t.rgF(N7.A21,t.GT28,t),t.rgF(N7.A4,t.GT29,t),t.rgF(N7.A17,t.GR28,t),t.rgF(N7.A27,t.GR29,t),t.rgF(N7.A28,t.GW46,t),t.rgF(N7.A5,t.GW47,t),t.rgF(N7.A26,t.GU92,t),t.rgF(N7.A11,t.GU93,t),t.rgF(N7.A9,t.GN48,t),t.rgF(N7.A10,t.GN49,t),t.rgF(N7.A29,t.GY53,t),t}return __extends(t,i),t.prototype.GN47=function(){App.VM.open(O7.I7)},t.prototype.GL57=function(){App.VM.close(O7.I7)},t.prototype.GF95=function(t){App.VM.open(O7.E81,t)},t.prototype.GE68=function(){App.VM.close(O7.E81)},t.prototype.GJ72=function(t){App.VM.open(O7.G62,t)},t.prototype.GHH72=function(){App.VM.close(O7.G62)},t.prototype.GJ73=function(t){App.VM.open(O7.G63,t)},t.prototype.GHH73=function(){App.VM.close(O7.G63)},t.prototype.loadReq=function(){App.CM.gtM(O6.B97).account;return this.horseProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.notify(P4.X12)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY53=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.isShowImgNew(),e.notify(P4.Y18)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP38=function(t){this.horseProxy.upgredeRes(t)},t.prototype.GP39=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.h=t.body.h,t.body.co&&(e.initHorseData.co=t.body.co),e.isShowImgNew(),e.notify(P4.U64)}else{238==t.head.state?App.VM.gOV(O7.I77).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GR26=function(t){this.horseProxy.unlockReq(t)},t.prototype.GR27=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.h=t.body.h,e.isShowImgNew(),App.CM.apF(O6.C2,N7.A8),e.notify(P4.Q15)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU90=function(){this.horseProxy.rmaxReq()},t.prototype.GU91=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.h=t.body.h,t.body.co&&(e.initHorseData.co=t.body.co),e.isShowImgNew(),e.notify(P4.Q13),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT28=function(t){this.horseProxy.awardReq(t)},t.prototype.GT29=function(t){if(200==t.head.state){t.body.ob&&P5.sIs(t.body.ob);var e=this.gtM();e.initHorseData.ho=t.body.h,e.isShowImgNew(),e.notify(P4.R90)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR28=function(t){this.horseProxy.changeReq(t)},t.prototype.GR29=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.h=t.body.h,e.notify(P4.X14)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW46=function(t){this.horseProxy.danReq(t)},t.prototype.GW47=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.en=t.body.en,e.isShowImgNew(),e.notify(P4.R92)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU92=function(){this.horseProxy.wearReq()},t.prototype.GU93=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.h=t.body.h,App.CM.gtM(O6.B98).ZL13(t.body.es),e.isShowImgNew(),e.notify(P4.T52)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN48=function(t){this.horseProxy.GX33(t)},t.prototype.GN49=function(t){if(200==t.head.state){var e=this.gtM();e.initHorseData.h=t.body.h,e.isShowImgNew(),e.notify(P4.U66)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ35=function(t){App.VM.gOV(O7.G62).ZQ91(t)},t.prototype.GHH74=function(){var t=this.gtM(),e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],i=t.initHorseData.h.k,s={objData:{id:e.id,h:i,we:e.we,wi:e.wi,x:0,y:0,dir:Dir.br,objType:P13.A6}};App.VM.open(O7.G69,s)},t}(TE11);__reflect(TE6.prototype,"TE6");var TG70=function(i){function t(t){var e=i.call(this,t)||this;return e.initHorseData={},e.isHong=0,e.isUseNow=!1,e.isOpenUseYbView=!0,e}return __extends(t,i),t.prototype.ZD48=function(t){t&&(null!=this.pointData?this.pointData.initActData(t):this.pointData=new RevealVo(t))},t.prototype.updateRed=function(){this.isShowImgNew()},t.prototype.FL35=function(){var t=0,e=this.initHorseData.h.lv;if(L3.advancedLv>e||!this.pointData)return t;var i=L3.FI89(this.pointData.lv);if(i.advancelv<0&&this.pointData.s==L3.starNum)return t;if(this.pointData&&L3.openLv<=O4.getLv())if(this.pointData.s!=L3.starNum){var s=N12.giC(parseInt(M13.init.advancedItem.value))+N12.giC(parseInt(M13.init.timeItem.value)),o=i.starcost.split(":"),r=N12.giC(parseInt(o[0]));t=s>=i.pillcost&&r>=parseInt(o[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var n=i.breakcost.split(":");t=N12.giC(parseInt(n[0]))>=parseInt(n[1])&&i.advancelv<=e?1:0}return t},t.prototype.initData=function(t){this.initHorseData=t},t.prototype.isShowImgNew=function(){this.isHong=0;var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l;if(this.initHorseData&&this.initHorseData.h&&parseInt(M13.init.unlockLevel.value)<=e){var i=this.initHorseData.h.lv;if((null==this.preLv||i>this.preLv)&&(TF13.FE57(E5.A11),this.preLv=i),this.redNum=this.FL35(),this.redNum)this.isHong=1;else{if(-1!=M13.base[i+""].exp){var s,o=M13.base[i+""].cash<=t.avatarInfo.co;s=M13.base[i+""].elixir;var r=N12.giC(parseInt(M13.init.advancedItem.value))+N12.giC(parseInt(M13.init.timeItem.value))>=s;if(o&&r)return void(this.isHong=1);var n=N12.giC(parseInt(M13.init.elixirItem.value)),a=K18.init.attrUseMax.value;if(n&&this.initHorseData.en<a)return void(this.isHong=1);if(N12.giC(parseInt(M13.init.shootUpItem.value)))return void(this.isHong=1);if(M13.expDanData[i+""])if(N12.giC(M13.expDanData[i+""]))return void(this.isHong=1)}for(var h=M13.FHH90(!1),p=0;p<h.length;p++)if(0<N12.giC(h[p].itemid)&&-1==this.initHorseData.h.ss.indexOf(h[p].id))return void(this.isHong=1);if(App.CM.gtM(O6.B98).canHorseEquip.length)this.isHong=1;else{var l=this.initHorseData.h.sk.concat().sort(function(t,e){return t.si-e.si}),c=M13.skillGroup;for(p=0;p<l.length;p++){if(N12.giC(parseInt(M13.init.skillItem.value))>=c[l[p].si+""][l[p].sl-1+""].cost&&-1!=c[l[p].si+""][l[p].sl-1+""].cost)return void(this.isHong=1)}var u=this.initHorseData.ho.length,d=this.initHorseData.co.length;u==d||0===d||(this.isHong=1)}}}},t.prototype.ZC47=function(){var t=0,e=0;return this.initHorseData.ho&&(t=this.initHorseData.ho.length),this.initHorseData.co&&(e=this.initHorseData.co.length),t!=e&&0!==e?1:0},t.prototype.haveSkin=function(t){var e=!1;return this.initHorseData&&this.initHorseData.h&&this.initHorseData.h.ss?e=-1!=this.initHorseData.h.ss.indexOf(t):e},t.prototype.FJ45=function(){var t=parseInt(M13.init.unlockLevel.value);if(O4.getLv()<t)return 0;var e=this.getSkinPower(),i=this.getDanPower(),s=this.FHH78(),o=this.ZV1(),r=this.FJ47();return Math.round(e+i+s+r+o)},t.prototype.getSkinPower=function(){for(var t=[],e=0,i=this.initHorseData,s=0;s<i.h.ss.length;s++)-1!=M13.skin[i.h.ss[s]+""].itemid&&(t.push(i.h.ss[s]),e+=M10.gAG(M13.skin[i.h.ss[s]+""].attr));return e},t.prototype.getDanPower=function(){var t=M13.init.elixirAttr.value,e=N13.getData(t),i=0,s=this.initHorseData;for(var o in e)for(var r in e[o]){i+=parseInt(e[o][r])*K18.attribute[r].power*s.en}return i},t.prototype.FHH78=function(){for(var t=this.initHorseData.h.sk,e=0,i=0;i<t.length;i++)e+=M10.gAG(M13.skillGroup[t[i].si+""][t[i].sl-1+""].attr);return e},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).horseEquip.sort(function(t,e){return t.i-e.i}),e=0,i=0;i<t.length;i++){var s=M10.FD92(t[i].i+"",t[i].t);e+=M10.gAG(s.attr)+M10.gAG(s.addattr)*s.addlevel}return e},t.prototype.FJ47=function(){var t=this.initHorseData,e=t.h.lv,i=t.h.exp,s=0;this.count=0,this.getCount(e);for(var o=0;o<this.count;o++){var r=M13.base[e-o+""].baseattr,n=M13.base[e-o+""].addattr,a=e-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){s+=parseInt(p[l][c])*i/M13.init.advancedExp.value*K18.attribute[c].power}else for(var l in p)for(var c in p[l])s+=parseInt(p[l][c])*M13.base[a+""].exp/M13.init.advancedExp.value*K18.attribute[c].power;for(var l in h)for(var c in h[l])s+=parseInt(h[l][c])*K18.attribute[c].power}return s+=s*P7.FA54(E5.A11)},t.prototype.getCount=function(t){M13.base[t+""]&&(this.count+=1,this.getCount(t-1))},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TG70.prototype,"TG70");var TG71=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y18,e.push,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X11,body:{}};s.rSMO(P4.X12,function(t){s.apF(N7.A25,t),e("加载坐骑加载完成")},s),s.sSM(i)})},t.prototype.upgredeRes=function(t){var e={type:P4.U63,body:{t:t}};this.rSMO(P4.U64,this.GX86,this),this.sSM(e)},t.prototype.GX86=function(t){this.apF(N7.A15,t)},t.prototype.rmaxReq=function(){var t={type:P4.Q12,body:{}};this.rSMO(P4.Q13,this.rmaxRes,this),this.sSM(t)},t.prototype.rmaxRes=function(t){this.apF(N7.A23,t)},t.prototype.unlockReq=function(t){var e={type:P4.Q14,body:{skinId:t}};this.rSMO(P4.Q15,this.GY69,this),this.sSM(e)},t.prototype.GY69=function(t){this.apF(N7.A2,t)},t.prototype.awardReq=function(t){var e={type:P4.R89,body:{tid:t}};this.rSMO(P4.R90,this.awardRes,this),this.sSM(e)},t.prototype.awardRes=function(t){this.apF(N7.A4,t)},t.prototype.changeReq=function(t){var e={type:P4.X13,body:{skinId:t}};this.rSMO(P4.X14,this.changeRes,this),this.sSM(e)},t.prototype.changeRes=function(t){this.apF(N7.A27,t)},t.prototype.danReq=function(t){var e={type:P4.R91,body:{num:t}};this.rSMO(P4.R92,this.danRes,this),this.sSM(e)},t.prototype.danRes=function(t){this.apF(N7.A5,t)},t.prototype.wearReq=function(){var t={type:P4.T51,body:{}};this.rSMO(P4.T52,this.wearRes,this),this.sSM(t)},t.prototype.wearRes=function(t){this.apF(N7.A11,t)},t.prototype.GX33=function(t){var e={type:P4.U65,body:{sid:t}};this.rSMO(P4.U66,this.GX34,this),this.sSM(e)},t.prototype.GX34=function(t){this.apF(N7.A10,t)},t.prototype.push=function(t){this.apF(N7.A29,t)},t}(TG80);__reflect(TG71.prototype,"TG71");var HorseView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.haveNum=0,i.timerArray=[],i.skinPower=0,i.danPower=0,i.raiPower=0,i.skillPower=0,i.equipPower=0,i.isNewSkin=!1,i.canAdd=!0,i.isAutoSelfRai=!1,i.skinName=WingViewSkin,i.sGN("release_horse"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skillData.dataProvider=this.skillCollection=new eui.ArrayCollection,this.skillData.itemRenderer=HorseSkillDataItem,this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=AttrEquipDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4689)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4677)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4678)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4679)),this.cbAutoSmelt.label=O3.tr(4680),this.btnChange.label=O3.tr(4681),this.btnEquip.label=O3.tr(4682),this.btnRaising.label=O3.tr(4683),this.btnSelfRai.label=O3.tr(4684),this.btnStop.label=O3.tr(4685)},t.prototype.open=function(){this.getData(),this.updateMain(),this.ZN26(),this.initPBarPro(),this.useExpDan(),this.ZN25(),this.btnSkin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),App.VM.isOpen(O7.G45)||egret.Tween.get(this).wait(200).call(function(){egret.Tween.removeTweens(this),TG68.FD9(this,N4.horse_autoUpgrade_btn,!1)},this)},t.prototype.close=function(){s.prototype.close.call(this),this.btnSkin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.closeHandler(),this.stopAuto(),this.isNewSkin=!1,this.model=null,this.num=null,this.initId=null,this.haveNum=null,this.skinPower=null,this.danPower=null,this.raiPower=null,this.skillPower=null,this.equipPower=null,this.count=null,this.isNewSkin=null,this.hisLe=null,this.nowModel=null,this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,egret.Tween.removeTweens(this.pBarPro.imgShort),egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp),egret.Tween.removeTweens(this)},t.prototype.GI10=function(){TG76.FI91(E5.A11),App.CM.apF(O6.B95,M4.A4,this.arr)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.raising=function(){this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.autoUpgrade(!1)},t.prototype.openDanHint=function(){this.btnAddOne.imgNew.visible&&this.addOne()},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.sureStop=function(){this.btnStop.visible&&this.stopAuto()},t.prototype.aKeyPull=function(){this.aCF(O6.C2,N7.A26)},t.prototype.canChange=function(){this.aCF(O6.C2,N7.A17,M13.base[this.num+""].skinid)},t.prototype.addOne=function(){this.aCF(O6.C18,O10.A5)},t.prototype.useExpDan=function(){this.btnExpDan.visible&&this.apF(O10.A5,O10.A37,!0)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C2);this.btnReveal.imgNew.visible=!!t.redNum},t.prototype.getData=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.C2).initHorseData;t&&!this.isAutoSelfRai&&(this.num=t.h.lv,this.ZK15())},t.prototype.dressUpdate=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.C2).initHorseData;t&&(this.num=t.h.lv,this.ZK15())},t.prototype.openSkinView=function(){this.sureStop(),this.aCF(O6.C2,N7.A12)},t.prototype.openDanView=function(){this.sureStop(),this.aCF(O6.C2,N7.A20)},t.prototype.ZV5=function(){this.sureStop(),App.CM.apF(O6.C12,O8.A93,O8.B4.HORSE)},t.prototype.openAddView=function(){this.aCF(O6.C2,N7.A3,{power:this.scoreLb.text,index:1})},t.prototype.showPhase=function(t){var e,i=App.CM.gtM(O6.C2).initHorseData;switch(t.target.name){case"-":0<this.num&&(this.num-=1,this.btnRight.enabled=!0,P16.sGF(this.btnRight,!1)),this.btnRight.imgEnd.visible=this.num>=i.h.lv,e=1==this.num,P16.sGF(this.btnLeft,e),this.btnLeft.enabled=!e;break;case"+":e=this.num<=i.h.lv&&M13.base[this.num+1+""],this.num!=i.h.lv&&M13.base[this.num+1+""]||(this.btnRight.enabled=!1,P16.sGF(this.btnRight,!0)),e&&(this.num+=1,P16.sGF(this.btnLeft,!1),this.btnLeft.enabled=!0),this.btnRight.imgEnd.visible=this.num>=i.h.lv}this.realTime()},t.prototype.updateChange=function(t){if(!(this.num>t.h.lv)){var e=M13.base[this.num+""].skinid-t.h.k;e<0||0<e?(this.btnChange.visible=!this.btnEquip.visible,this.grpHave.visible=this.grpAddPower.visible=!1):0==e&&(this.btnChange.visible=this.grpAddPower.visible=!1,this.btnEquip.visible||(this.grpHave.visible=!0))}},t.prototype.realTime=function(){this.lbName.text=M13.skin[M13.base[this.num+""].skinid+""].name,this.nowModel||(this.nowModel=new TF39);var t=App.CM.gtM(O6.C2).initHorseData,e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7];this.nowModel.id=e.id,this.nowModel.h=M13.base[this.num+""].skinid,this.nowModel.bt=BehaviourType.Stand_d;var i={id:M13.base[this.num+""].skinid,x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),this.objBoss.setData(this.nowModel,this.gpBoss);for(var s=this.gpBoss.getChildAt(0),o=0;o<s.numChildren;o++){var r=s.getChildAt(o);if(r.fight_st&&"b"==r.fight_st){r.visible=!1;break}}if(this.lbClass.text=O3.tr(1332,M13.base[this.num+""].level),this.updateChange(t),this.num==t.h.lv+1){this.btnChange.visible=this.grpHave.visible=!1,this.btnEquip.visible||(this.grpAddPower.visible=!0);var n=M13.base[this.num+""].baseattr,a=M13.base[this.num-1+""].addattr;this.lbPower.text=Math.floor(M10.gAG(n)+M10.gAG(a)*M13.base[this.num-1+""].exp/M13.init.advancedExp.value)+""}},t.prototype.updatePower=function(){this.getSkinPower(),this.getDanPower(),this.FJ47(),this.FHH78(),this.ZV1(),this.scoreLb.text=this.getPower()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.ZN25(),t instanceof TG70)switch(e){case P4.U64:this.canAdd=!0,this.littleAddExp(t),this.ZN26();break;case P4.Q13:this.addExp(),this.ZN26();break;case P4.X14:case P4.Q15:this.ZN26(),this.updateChange(t.initHorseData);break;case P4.Y18:this.getData(),this.initPBarPro();break;case P4.U66:case P4.R92:case P4.R90:this.getData();break;case P4.T52:this.dressUpdate()}t instanceof THH9&&this.getData(),t instanceof TF73&&this.ZN26(),t instanceof TF84&&this.ZD61(t)},t.prototype.ZD61=function(t){this.currStepId&&t.ZJ29(this.currStepId)&&TG68.FJ82(O7.I1,N4.basePanel)},t.prototype.ZN26=function(){this.btnExpDan.visible=!1;var t=TG7.FA82(J12.A5,parseInt(M13.init.shootUpItem.value));this.btnAddOne.$setVisible(t);var e=App.CM.gtM(O6.C2).initHorseData.h.lv;M13.expDanData[e+""]&&-1!==M13.base[e+""].exp&&(N12.giC(M13.expDanData[e+""])&&(this.btnExpDan.visible=this.btnExpDan.imgNew.visible=!0,this.btnAddOne.$setVisible(!1)))},t.prototype.littleAddExp=function(t){this.enabledBtn(!1);var e=this.pBarPro.value,i=0,s=1;e+(i=t.initHorseData.h.exp>=e?t.initHorseData.h.exp-e:this.pBarPro.maximum-e+t.initHorseData.h.exp)>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){this.btnRaising.enabled=this.btnAddOne.enabled=this.btnSelfRai.enabled=t},t.prototype.addExp=function(){var t=App.CM.gtM(O6.C2),e=t.initHorseData.h.lv,i=t.initHorseData.h.le,s=M13.base[e+""].level,o=this.pBarPro.value,r=0,n=1;o+(r=t.isUseNow?this.hisLe<i?i-this.hisLe:this.pBarPro.maximum-o+i:s<=6&&0==t.initHorseData.h.exp?this.pBarPro.maximum-o:parseInt(M13.init.shootUpExp.value))>this.pBarPro.maximum&&(n+=1),this.updataExp(o,r,n)},t.prototype.ZK15=function(){var t;t=1==this.num,P16.sGF(this.btnLeft,t),P16.sGF(this.btnRight,!1);var e=App.CM.gtM(O6.C2),i=e.initHorseData;this.updatePower(),this.btnLeft.enabled=!t,this.btnRight.enabled=!0,i.co&&i.co.length&&(this.btnAward.imgNew.visible=i.co.length!=i.ho.length),-1!=M13.base[this.num+""].exp&&(this.pBarPro.maximum=M13.base[this.num+""].exp,this.pBarPro.value=i.h.exp),this.summit();var s=N12.giC(parseInt(M13.init.elixirItem.value)),o=!1;K18.init.attrUseMax.value>e.initHorseData.en&&(o=!!s),this.btnDan.imgNew.visible=o;var r=[],n=i.h.sk.length;r=i.h.sk.concat().sort(function(t,e){return t.si-e.si});var a,h=1;if(n)for(l=r.length;l<4;l++){a=i.h.sk[n-1].si+h,h+=1;c=this.ZV2(l+1);r.push({si:a,sl:0,count:c})}else{for(var p in M13.skillGroup){a=parseInt(p);break}for(var l=1;l<=4;l++){var c=this.ZV2(l);r.push({si:a,sl:0,count:c}),a+=1}}this.skillCollection.replaceAll(r),this.btnEquip.visible=!1,this.btnSkin.imgNew.visible=!1;var u=M13.FHH90(!1);for(l=0;l<u.length;l++)if(0<N12.giC(u[l].itemid)&&-1==i.h.ss.indexOf(u[l].id)){this.btnSkin.imgNew.visible=!0;break}for(var d=[{},{},{},{}],v=App.CM.gtM(O6.B98),f=v.horseEquip.sort(function(t,e){return t.i-e.i}),g=1;g<=d.length;g++){for(var m=0;m<f.length;m++){if(g==M10.FD92(f[m].i+"",f[m].t).pos){d[g-1]={i:f[m].i,ok:!0,isNew:!1,t:f[m].t};break}}if("{}"==JSON.stringify(d[g-1]))for(var p in M10.horse)if(M10.horse[p].pos==g){d[g-1]={i:M10.horse[p].id,ok:!1,isNew:!1,t:M10.horse[p].equiptype};break}}var y=v.canHorseEquip;for(m=1;m<=d.length;m++)0<=y.indexOf(m.toString())&&(d[m-1].isNew=this.btnEquip.visible=this.btnEquip.imgNew.visible=!0,this.grpHave.visible=this.btnChange.visible=!1);this.realTime(),this.equipCollection.replaceAll(d)},t.prototype.getPower=function(){var t=this.skinPower+this.danPower+this.raiPower+this.skillPower+this.equipPower;return Math.round(t)+""},t.prototype.initPBarPro=function(){this.pBarPro.slideDuration=0;var t=App.CM.gtM(O6.C2).initHorseData.h.le;this.hisLe=t,this.lbShort.visible=!!t,this.pBarPro.imgShort.width=t?this.pBarPro.width*(t/this.pBarPro.maximum):0,this.pBarPro.imgShort.x=this.pBarPro.width*(this.pBarPro.value/this.pBarPro.maximum)-this.pBarPro.imgShort.width},t.prototype.ZV2=function(t){var e;for(var i in M13.base){if((M13.base[i].skillid?M13.base[i].skillid.split(","):"").length==t){e=M13.base[i].level;break}}return e},t.prototype.updateMain=function(){N13.type;this.skillName.text=O3.tr(1337);var t=N12.gID(M13.init.advancedItem.value);this.imgDan.setData(t);var e=N12.gID(M13.init.advancedCash.value);this.imgGlod.setData(e)},t.prototype.canExpend=function(){var t=this,e=App.CM.gtM(O6.C2);if(e.isOpenUseYbView)if(this.btnRaising.filters){var i=function(){t.autoUpgrade(!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else{i=function(){t.ZQ92(!1,!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else this.autoUpgrade(!0)},t.prototype.ZQ92=function(t,e){if(!this.canAdd)return!1;if(this.isNewSkin)return this.stopAuto(),!1;var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.C2),o=s.initHorseData,r=N12.giC(parseInt(M13.init.timeItem.value)),n=N12.giC(parseInt(M13.init.advancedItem.value))+r,a=1,h=M13.base[o.h.lv].elixir-n;if(0<h&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,M13.init.advancedItem.value,h),t&&this.stopAuto(),!1;if(M13.base[o.h.lv].cash>i.avatarInfo.co)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&M13.base[o.h.lv].cash<=i.avatarInfo.co&&0<h){var p=parseInt(M13.init.advancedItem.value),l=N15.FA50(p),c=N15.FB92(p),u=M13.base[o.h.lv+""].elixir;if(i.avatarInfo.bg>=l)a=2;else{if(!e&&s.isOpenUseYbView)return this.canExpend(),this.closeHandler(),!1;if(!(i.avatarInfo.g>=c*(n?u-n:u)))return P7.FA78(),this.stopAuto(),!1;a=3}}return this.aCF(O6.C2,N7.A14,a),t&&(this.canAdd=!1),s.isUseNow=0<r,!0},t.prototype.autoUpgrade=function(t){var e=this;this.isAutoSelfRai=!0,this.btnStop.visible=!0,this.btnSelfRai.visible=!1,this.isNewSkin=!1,this.canAdd=!0,this.btnRaising.imgNew.visible=!1,this.btnRaising.filters||P16.sGF(this.btnRaising,!0),this.enabledBtn(!1);var i,s=this;if(t||(i=this.ZQ92(!0,!1)),t||i){var o=App.K16.doTimer(300,0,function(){s.ZQ92(!0,t)},s,function(){e.stopAuto()});this.timerArray.push(o)}},t.prototype.stopAuto=function(){this.btnSelfRai.visible=!0,this.btnStop.visible=!1,this.canAdd=!0,this.isAutoSelfRai=!1,this.isNewSkin=!1,this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible,P16.sGF(this.btnRaising,!1),this.closeHandler(),this.enabledBtn(!0)},t.prototype.clearSkin=function(){this.aCF(O6.C2,N7.A8)},t.prototype.summit=function(){var t=App.CM.gtM(O6.C2).initHorseData;if(-1==M13.base[t.h.lv+""].exp)return this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.grpExpend.visible=this.lbShort.visible=!1,this.pBarPro.maximum=this.pBarPro.value=100,this.pBarPro.imgShort.width=0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnSelfRai,!0),this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=this.btnRaising.enabled=this.btnSelfRai.enabled=!1,!1;this.pBarPro.labelFunction=null,this.lbPay.text=M13.base[this.num+""].cash+"",this.haveNum=N12.giC(parseInt(M13.init.advancedItem.value))+N12.giC(parseInt(M13.init.timeItem.value));var e;e=M13.base[this.num+""].elixir,this.haveNum>=e?this.lbAmount.textColor=2987793:this.lbAmount.textColor=15669836;var i=App.CM.gtM(O6.B82);return M13.base[this.num+""].cash<=i.avatarInfo.co?this.lbPay.textColor=2987793:this.lbPay.textColor=15669836,this.lbAmount.text=this.haveNum+"/"+e,this.haveNum>=e&&M13.base[this.num+""].cash<=i.avatarInfo.co?(this.btnRaising.filters||(this.btnRaising.imgNew.visible=!0),this.btnSelfRai.imgNew.visible=!0):this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=!1,this.btnAddOne.imgNew.visible=0<N12.giC(parseInt(M13.init.shootUpItem.value)),!0},t.prototype.updataExp=function(t,e,i){var h=this,p=App.CM.gtM(O6.C2),l=p.initHorseData.h.le;if(!this.summit())return this.getData(),this.clearSkin(),void this.enabledBtn(!1);var c=this,u=function(t,e,i){var s,o=0,r=c.num;e+i>=c.pBarPro.maximum?(i-=c.pBarPro.maximum-e,o=c.pBarPro.maximum,h.isNewSkin=!0):o=i+e,s=200,(s=(o-c.pBarPro.value)/c.pBarPro.maximum*1e3)<200&&(s=200);var n=c.pBarPro.width*(l/c.pBarPro.maximum),a=c.pBarPro.width*((o-l)/c.pBarPro.maximum);p.isUseNow?(c.hisLe>l&&(n=c.pBarPro.width-c.pBarPro.imgShort.x),c.hisLe=l,egret.Tween.get(c.pBarPro.imgShort).to({width:n},s)):(c.hisLe>l&&(a=c.pBarPro.width-c.pBarPro.imgShort.width),egret.Tween.get(c.pBarPro.imgShort).to({x:a},s),c.hisLe=l),egret.Tween.get(c.pBarPro).to({value:o},s).wait(20).call(function(){(egret.Tween.removeTweens(c.pBarPro),c.lbAddExp.text="+"+M13.init.advancedExp.value,c.lbShort.visible=!!l,c.pBarPro.value==c.pBarPro.maximum)&&(e=0,r+=1,c.pBarPro.maximum=M13.base[r+""].exp,egret.Tween.removeTweens(c.pBarPro.imgShort),c.pBarPro.value=c.pBarPro.slideDuration=c.pBarPro.imgShort.width=c.pBarPro.imgShort.x=0,0<t-1&&u(--t,e,i),App.CM.gtM(O6.B98).ZW35(),c.clearSkin(),c.stopAuto(),c.getData());egret.Tween.get(c.lbAddExp).to({visible:!0}).to({y:c.lbAddExp.y-15},s).call(function(){egret.Tween.removeTweens(c.lbAddExp),c.lbAddExp.y=60,c.lbAddExp.visible=!1,c.updatePower()}),c.enabledBtn(!0)})};u(i,t,e)},t.prototype.getSkinPower=function(){var t=[];this.skinPower=0;for(var e=App.CM.gtM(O6.C2).initHorseData,i=0;i<e.h.ss.length;i++)-1!=M13.skin[e.h.ss[i]+""].itemid&&(t.push(e.h.ss[i]),this.skinPower+=M10.gAG(M13.skin[e.h.ss[i]+""].attr))},t.prototype.getDanPower=function(){var t=M13.init.elixirAttr.value,e=N13.getData(t);this.danPower=0;var i=App.CM.gtM(O6.C2).initHorseData;for(var s in e)for(var o in e[s]){var r=parseInt(e[s][o])*K18.attribute[o].power*i.en;this.danPower+=r}},t.prototype.FHH78=function(){for(var t=App.CM.gtM(O6.C2).initHorseData.h.sk,e=this.skillPower=0;e<t.length;e++)this.skillPower+=M10.gAG(M13.skillGroup[t[e].si+""][t[e].sl-1+""].attr)},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).horseEquip.sort(function(t,e){return t.i-e.i}),e=this.equipPower=0;e<t.length;e++){var i=M10.FD92(t[e].i+"",t[e].t),s=M10.gAG(i.attr)+M10.gAG(i.addattr)*i.addlevel;this.equipPower+=s}},t.prototype.FJ47=function(){var t=App.CM.gtM(O6.C2).initHorseData,e=t.h.lv,i=t.h.exp;this.raiPower=0,this.count=0,this.arr={101:0,102:0,103:0},this.getCount(e);for(var s=0;s<this.count;s++){var o=M13.base[e-s+""].baseattr,r=M13.base[e-s+""].addattr,n=e-s,a=N13.getData(o),h=N13.getData(r);if(0==s)for(var p in h)for(var l in h[p]){var c=parseInt(h[p][l])*i/M13.init.advancedExp.value*K18.attribute[l].power;this.raiPower+=c;var u=parseInt(h[p][l])*i/M13.init.advancedExp.value;0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=u)}else for(var p in h)for(var l in h[p]){this.raiPower+=parseInt(h[p][l])*M13.base[n+""].exp/M13.init.advancedExp.value*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(h[p][l])*M13.base[n+""].exp/M13.init.advancedExp.value)}for(var p in a)for(var l in a[p]){var d;this.raiPower+=parseInt(a[p][l])*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(a[p][l]))}}var v=P7.FA54(E5.A11);this.raiPower+=this.raiPower*v},t.prototype.getCount=function(t){M13.base[t+""]&&(this.count+=1,this.getCount(t-1))},t}(BaseEuiView);__reflect(HorseView.prototype,"HorseView");var HorseSkillDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZV3=function(){App.CM.apF(O6.C2,N7.A13,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){App.CM.gtM(O6.C2);this.imgHead.source=M13.init["skillIcon"+(this.itemIndex+1)].value;var t=M13.skillGroup[this.data.si+""][this.data.sl-1],e=M13.skillGroup[this.data.si+""].length,i=N12.giC(parseInt(M13.init.skillItem.value))+"";this.data.sl?(this.grpCount.visible=!0,this.lbNum.text=this.data.sl+"",this.lbNum.textColor=16777215,this.grpNot.visible=!1,this.imgNew.visible=t.cost<=i&&e>t.level):(this.grpNot.visible=!0,this.grpCount.visible=!1,this.lbCount.text=O3.tr(1320,this.data.count))},t}(eui.ItemRenderer);__reflect(HorseSkillDataItem.prototype,"HorseSkillDataItem");var HorseSkinDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this),App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZV4=function(){App.CM.apF(O6.C2,N7.A19,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C2).initHorseData.h;if(0<=t.ss.indexOf(this.data.id))this.imgGet.visible=!0,this.imgNew.visible=!1,this.lbName.textColor=11481344;else{this.imgGet.visible=!1,this.lbName.textColor=11301691;var e=N12.giC(this.data.itemid);this.imgNew.visible=0<e}this.grpHave.visible=t.k==this.data.id,this.imgOn.visible=this.data.isShow,this.lbName.text=this.data.name,this.data.isShow?P7.FM14()?App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",157,43):App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",53.5,157):App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t}(eui.ItemRenderer);__reflect(HorseSkinDataItem.prototype,"HorseSkinDataItem");var HorseDan=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingDanSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5084)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5085)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5086)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5087)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5088)),this.btnUse.label=O3.tr(5089)},t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.updateUI()},t.prototype.close=function(){this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.num=null},t.prototype.closeSelf=function(){App.CM.apF(O6.C2,N7.A16)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C2).initHorseData,e=N12.gID(M13.init.elixirItem.value);this.num=N12.giC(parseInt(M13.init.elixirItem.value)),this.lbOwn.text=O3.tr(1321,this.num);N12.base[M13.init.elixirItem.value].batchusenum;var i=K18.init.attrUseMax.value;if(t.en>=i)this.lbCount.text="0";else{var s=i-t.en;this.lbCount.text=String(this.num>s?s:this.num)}this.dlg.title=e.name,this.imgQuality.source=N12.getBox(e.quality),O5.FB13(this.lbName,e.name,e.quality),this.imgHead.source=N12.FJ86(e.id),this.lbNum.text=t.en+"";var o=M13.init.elixirAttr.value,r=N13.getData(o);for(var n in r)for(var a in r[n]){var h=parseInt(r[n][a])*t.en;this["lbAttr"+n].text=K18.attribute[a].name+"：",this["lbCount"+n].text=h}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG70)switch(e){case P4.R92:this.updateUI()}},t.prototype.changeUse=function(t){var e=parseInt(this.lbCount.text),i=M13.init.elixirItem.value,s=(N12.base[i].batchUse,App.CM.gtM(O6.C2)),o=K18.init.attrUseMax.value,r=s.initHorseData.en,n=o-r,a=n<=this.num?n:this.num;if(!(o<=r))switch(t.target.name){case"-":0<e-1&&(this.lbCount.text=(e-1).toString());break;case"+":e+1<=a&&(this.lbCount.text=(e+1).toString());break;case"--":var h=parseInt(this.btnBigMinus.label);this.lbCount.text=0<e+h?(e+h).toString():(0<a?1:0)+"";break;case"++":var p=parseInt(this.btnBigAdd.label);this.lbCount.text=e+p<=a?(e+p).toString():a+""}},t.prototype.startUse=function(){var t=App.CM.gtM(O6.C2);K18.init.attrUseMax.value<=t.initHorseData.en?P18.sDP(O3.tr(1338)):0!=parseInt(this.lbCount.text)?this.apF(N7.A28,parseInt(this.lbCount.text)):P18.sDP(O3.tr(1318))},t.prototype.ZQ49=function(){var t=N12.gID(M13.init.elixirItem.value);this.aCF(O6.C11,O14.A15,t,this.num)},t}(BaseEuiView);__reflect(HorseDan.prototype,"HorseDan");var HorseDerma=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.index=null,i.pageSize=6,i.itemWidth=95,i.skinName=WingDermaSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skinData.dataProvider=this.skinCollection=new eui.ArrayCollection,this.skinData.itemRenderer=HorseSkinDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5090)),this.btnActivate.label=O3.tr(6407),this.btnChange.label=O3.tr(4987),P7.FM14()&&(this.itemWidth=186.75,this.pageSize=3)},t.prototype.open=function(t){t&&(this.argId=t),this.scrRoll.addEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.updateUI(),t&&this.ZW55()},t.prototype.close=function(){this.scrRoll.removeEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.skinCollection.removeAll(),this.argId=null,this.classData=null,this.init=null,this.base=null,this.index=null,this.num=null,this.skins=null,this.regularData=null,this.nowModel=null},t.prototype.ZW55=function(){for(var t=M13.FHH90(!1),e=0,i=0;i<t.length;i++)t[i].id==this.argId&&(e=i);this.scrRoll.validateNow();var s=Math.ceil((e+1)/6)-1;this.scrRoll.viewport.scrollH=this.scrRoll.width*s-10;var o=Math.floor(t.length/6);this.scrRoll.viewport.scrollH<0&&(this.scrRoll.viewport.scrollH=0),this.btnLeft.visible=!!s,o<=s&&(this.btnRight.visible=!1),this.isShowHong()},t.prototype.isShowHong=function(){var t=App.CM.gtM(O6.C2).initHorseData.h;this.btnLeft.imgNew.visible=this.btnRight.imgNew.visible=!1;for(var e=this.getStartIndex,i=this.skinCollection.source,s=e,o=e+1+6,r=0;r<s;r++){if(N12.giC(i[r].itemid)&&t.ss.indexOf(i[r].id)<0){this.btnLeft.imgNew.visible=!0;break}}for(var n=this.skinCollection.source.length-1;o<n;n--){if(N12.giC(i[n].itemid)){this.btnRight.imgNew.visible=!0;break}}},t.prototype.goShopPing=function(){var t={sLink:parseInt(this.lbSource.name)};TG84.goToDlg(t)},t.prototype.closeSelf=function(){this.apF(N7.A6)},t.prototype.activate=function(){this.apF(N7.A18,this.classData[this.index+""].id)},t.prototype.canChange=function(){this.apF(N7.A17,this.classData[this.index+""].id)},t.prototype.ZQ91=function(t){for(var e=0;e<this.skinCollection.length;e++)this.skinCollection.getItemAt(e).isShow=!1;this.index=t,this.skinCollection.getItemAt(t).isShow=!0,this.skinCollection.replaceAll(this.classData),this.ZN22(t)},t.prototype.updateUI=function(){this.lbTitle.text=O3.tr(1305),this.lbAllText.text=O3.tr(1334),this.lbOnText.text=O3.tr(1335);var t=App.CM.gtM(O6.C2).initHorseData.h;if(this.classData=this.adjust(M13.FHH90(!1).concat()),this.regularData=M13.FHH90(!1),this.init=M13.init,this.base=M13.base,this.skins=M13.skin,this.skinCollection.replaceAll(this.classData),this.classData.length<=6&&(this.btnRight.visible=!1),this.index=0,this.argId){for(var e=0;e<this.classData.length;e++)if(this.classData[e].id==this.argId){this.index=e;break}}else for(e=0;e<this.classData.lenght;e++)if(this.classData[e].id==t.k){this.index=e;break}this.ZQ91(this.index)},t.prototype.adjust=function(t){for(var e=[],i=App.CM.gtM(O6.C2).initHorseData.h,s=t.length-1;0<=s;s--){if(t[s].state=0,t[s].id==i.k||0<=i.ss.indexOf(t[s].id))t[s].id==i.k?t[s].state=2:t[s].state=1,e.push(t[s]),t.splice(s,1);else 1<=N12.giC(t[s].itemid)&&(t[s].state=3,e.unshift(t[s]),t.splice(s,1))}return e.sort(function(t,e){return e.state-t.state}),e=e.concat(t)},t.prototype.ZN22=function(t){this.index=t;var e=App.CM.gtM(O6.C2).initHorseData.h;this.nowModel||(this.nowModel=new TF39);var i=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7];this.nowModel.id=i.id,this.nowModel.h=this.classData[t+""].id,this.nowModel.bt=BehaviourType.Stand_d;var s={id:this.classData[t+""].id,x:0,y:-10,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(s),this.objBoss.setData(this.nowModel,this.gpBoss);for(var o=this.gpBoss.getChildAt(0),r=0;r<o.numChildren;r++){var n=o.getChildAt(r);if(n.fight_st&&"b"==n.fight_st){n.visible=!1;break}}this.lbName.text=this.classData[t+""].name,this.lbSource.text=this.classData[t+""].gainway,this.lbSource.name=this.classData[t+""].showid,0<this.classData[t+""].showid?M18.FHH83(this.lbSource):M18.FF64(this.lbSource),this.imgQuality.source=N12.getBox(this.classData[t+""].quality),this.imgQuality.source=N12.getBox(N12.gID(this.classData[t+""].itemid+"").quality),this.imgHead.source=N12.FJ86(this.classData[t+""].itemid),this.imgHead.name=this.classData[t+""].itemid+"";var a=N12.giC(this.classData[t+""].itemid);0==(this.num=a)?(this.lbNum.text="(0/1)",this.lbNum.textColor=14164514,this.btnActivate.visible=this.btnChange.visible=this.grpHave.visible=!1,this.grpNoLive.visible=this.grpShow.visible=this.grpDetail.visible=!0):(this.lbNum.textColor=7716890,this.lbNum.text="("+a+"/1)",this.grpNoLive.visible=this.btnActivate.visible=this.grpDetail.visible=!0,this.grpShow.visible=this.grpHave.visible=this.btnChange.visible=!1),0<=e.ss.indexOf(this.classData[t+""].id)&&(this.grpHave.visible=this.grpDetail.visible=this.grpNoLive.visible=!1,this.btnChange.visible=!0),e.k==this.classData[t+""].id&&(this.btnChange.visible=this.grpNoLive.visible=this.grpDetail.visible=!1,this.grpHave.visible=!0),this.scoreLb.text=M10.gAG(this.classData[t+""].attr)+"";var h=N13.getData(this.classData[t+""].attr);for(var r in h)for(var p in h[r])this["lbAttr"+r].text=K18.attribute[p].name+":"+h[r][p];this.grpHave.visible||this.btnChange.visible?this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=7716890:this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=16458017;var l=0,c=0;for(var r in e.ss)-1!=this.skins[e.ss[r]+""].itemid&&(c+=1,l+=M10.gAG(this.skins[e.ss[r]+""].attr));this.lbAllPower.text=l+"",this.lbHave.text=c+""},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG70)switch(e){case P4.X14:case P4.Q15:this.updateUI()}if(t instanceof THH14)switch(e){case P4.U59:this.ZQ91(this.index)}},t.prototype.doLeft=function(){var t=this.getStartIndex,e=Math.max(0,t-this.pageSize);this.scrRoll.viewport.scrollH=e*this.itemWidth,this.isShowHong(),this.ZQ72()},Object.defineProperty(t.prototype,"getStartIndex",{get:function(){return Math.floor(this.scrRoll.viewport.scrollH/this.itemWidth)},enumerable:!0,configurable:!0}),t.prototype.doRight=function(){var t=this.getStartIndex,e=this.skinCollection.length-this.pageSize,i=Math.min(e,t+this.pageSize);this.scrRoll.viewport.scrollH=e===i?this.scrRoll.viewport.contentWidth-this.scrRoll.width:i*this.itemWidth,this.isShowHong(),this.ZQ72()},t.prototype.ZQ72=function(){var t=this.scrRoll.viewport;this.btnLeft.visible=0!=t.scrollH,this.btnRight.visible=Math.abs(t.scrollH+this.scrRoll.width)<t.contentWidth},t.prototype.showNextData=function(t){switch(t.target.name){case"-":this.doLeft();break;case"+":this.doRight()}},t.prototype.openAddView=function(){this.apF(N7.A3,{power:0,index:0,skinId:this.classData[this.index+""].id})},t.prototype.ZQ49=function(){var t=N12.gID(this.imgHead.name);this.aCF(O6.C11,O14.A15,t,this.num),TG40.playClickEffect()},t}(BaseEuiView);__reflect(HorseDerma.prototype,"HorseDerma");var HorseEverAdd=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinPower=0,i.getIndex=1,i.array=[],i.strs=[O3.tr(5742),O3.tr(5743),O3.tr(5744)],i.skinName=WingEverAddSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.attrAddData.dataProvider=this.attrAddCollection=new eui.ArrayCollection},t.prototype.open=function(t){this.num=t.index,this.power=t.power,this.skinId=t.skinId,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attrAddCollection.removeAll(),this.num=null,this.model=null,this.skinPower=null,this.array=null,this.power=null,this.fitDreData=null,this.skinId=null,this.nowModel=null,this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null},t.prototype.closeSelf=function(){this.apF(N7.A1)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B98),e=App.CM.gtM(O6.C2),i=(e.initHorseData,this.skinId?this.skinId:e.initHorseData.h.k);this.nowModel||(this.nowModel=new TF39);var s=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7];this.nowModel.id=s.id,this.nowModel.h=i,this.nowModel.bt=BehaviourType.Stand_d;var o={id:i,x:0,y:2,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(o),this.objBoss.setData(this.nowModel,this.gpBoss);for(var r=this.gpBoss.getChildAt(0),n=0;n<r.numChildren;n++){var a=r.getChildAt(n);if(a.fight_st&&"b"==a.fight_st){a.visible=!1;break}}this.fitDreData=t.horseEquip.sort(function(t,e){return t.i-e.i}),this.lbTitle.text=O3.tr(1336),this.skinPower=0;var h=this.getSkinPower(),p=this.getDanPower(),l=this.FJ47(),c=this.ZV1();this.array=[],this.num?(this.scoreLb.text=this.power+"",this.array.push({name:O3.tr(1326)+O3.tr(2412),n0:l.n0,n1:l.n1,n2:l.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1327)+O3.tr(2412),n0:c.n0,n1:c.n1,n2:c.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1328)+O3.tr(2412),n0:p.n0,n1:p.n1,n2:p.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})):(this.scoreLb.text=Math.round(this.skinPower)+"",this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})),this.attrAddCollection.replaceAll(this.array)},t.prototype.getSkinPower=function(){for(var t=[],e={n0:0,n1:0,n2:0},i=App.CM.gtM(O6.C2).initHorseData,s=0;s<i.h.ss.length;s++)-1!=M13.skin[i.h.ss[s]+""].itemid&&(t.push(i.h.ss[s]),this.skinPower+=M10.gAG(M13.skin[i.h.ss[s]+""].attr));for(s=0;s<t.length;s++){var o=N13.getData(M13.skin[t[s]+""].attr);for(var r in o)for(var n in o[r]){var a=this.strs.indexOf(K18.attribute[n].name);0<=a&&(e["n"+a]+=parseInt(o[r][n]))}}return e},t.prototype.getDanPower=function(){var t={n0:0,n1:0,n2:0},e=M13.init.elixirAttr.value,i=N13.getData(e),s=App.CM.gtM(O6.C2).initHorseData;for(var o in i)for(var r in i[o]){var n=parseInt(i[o][r])*s.en,a=this.strs.indexOf(K18.attribute[r].name);0<=a&&(t["n"+a]=n)}return t},t.prototype.ZV1=function(){for(var t={n0:0,n1:0,n2:0},e=this.fitDreData,i=0;i<e.length;i++){var s=M10.FD92(e[i].i,e[i].t),o=N13.getData(s.attr),r=N13.getData(s.addattr);for(var n in o)for(var a in o[n]){0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a]))}for(var n in r)for(var a in r[n]){var h;0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a])*s.addlevel)}}return t},t.prototype.getCount=function(t){M13.base[t-1+""]&&(this.getIndex+=1,this.getCount(t-1))},t.prototype.FJ47=function(){var t={n0:0,n1:0,n2:0},e=App.CM.gtM(O6.C2).initHorseData,i=e.h.lv,s=e.h.exp;this.getIndex=1,this.getCount(i);for(var o=0;o<this.getIndex;o++){var r=M13.base[i-o+""].baseattr,n=M13.base[i-o+""].addattr,a=i-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){var u=parseInt(p[l][c])*s/M13.init.advancedExp.value;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=u)}else for(var d in p)for(var c in p[d]){0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(p[d][c])*M13.base[a+""].exp/M13.init.advancedExp.value)}for(var v in h)for(var c in h[v]){var f;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(h[v][c]))}}var g=P7.FA54(E5.A11);for(var c in t)t[c]+=Math.floor(t[c]*g);return t},t}(BaseEuiView);__reflect(HorseEverAdd.prototype,"HorseEverAdd");var horse,HorseSkill=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingSkillSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.grps=[this.grp0,this.grp1,this.grp2,this.grp3],this.grpEffects=[this.grpEffect0,this.grpEffect1,this.grpEffect2],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5091)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5092)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5093)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5094)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(5095)),this.lbReach.textFlow=M18.HTP.parse(O3.tr(5096)),this.btnUpgrade.label=O3.tr(5097)},t.prototype.open=function(t){this.index=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var e=0;e<this.grps.length;e++){this.grps[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this),this.grps[e].getChildByName("imgOpt").visible=e==this.index}this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var t=0;t<this.grps.length;t++)this.grps[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this);this.index=null,this.skillData=null},t.prototype.closeSelf=function(){this.apF(N7.A7)},t.prototype.GT53=function(){var t=N12.gID(M13.init.skillItem.value);this.aCF(O6.C11,O14.A15,t,this.lbOwn.text)},t.prototype.upgrade=function(){if(this.lbOwn.textColor!=_cc.red){var t=this.skillData[this.index].si;M13.skillGroup[t+""][0].wid;this.apF(N7.A9,t)}else{var e=parseInt(M13.init.skillItem.value);App.VM.open(O7.G87,e,1,P12.A26)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG70)switch(e){case P4.Q15:this.updateUI();break;case P4.U66:this.updateUI(!0)}else t instanceof THH9&&this.updateUI()},t.prototype.updateUI=function(t){void 0===t&&(t=!1);var e=App.CM.gtM(O6.C2);this.skillData=[];var i=e.initHorseData;this.lbTitle.text=O3.tr(1337);var s=i.h.sk.length;this.skillData=i.h.sk.concat().sort(function(t,e){return t.si-e.si});var o;if(s)for(n=this.skillData.length;n<4;n++){o=this.skillData[this.skillData.length-1].si+1;a=this.ZV2(n+1);this.skillData.push({si:o,sl:0,count:a})}else{for(var r in M13.skillGroup){o=parseInt(r);break}for(var n=1;n<=4;n++){var a=this.ZV2(n);this.skillData.push({si:o,sl:0,count:a}),o+=1}}for(n=0;n<this.grps.length;n++){var h=this.grps[n].getChildByName("imgHead"),p=this.grps[n].getChildByName("grpCount"),l=this.grps[n].getChildByName("grpNotOpen");h.source=M13.init["skillIcon"+(n+1)].value;M13.skillGroup[this.skillData[n].si+""][this.skillData[n].sl-1],N12.giC(parseInt(M13.init.skillItem.value)),M13.skillGroup[this.skillData[n].si+""].length;if(this.skillData[n].sl){var c=p.getChildAt(p.numChildren-1);p.visible=!0;var u=parseInt(c.text),d=this.grps[n].getChildByName("effect");this.skillData[n].sl>u&&t&&App.THH33.aUE(d,"iconSkill",-d.width/2+5,-d.height/2+5,1),c.text=""+this.skillData[n].sl,l.visible=!1}else{l.visible=!0,p.visible=!1,l.getChildAt(l.numChildren-1).text=O3.tr(1320,this.skillData[n].count)}}this.updateInfo(this.skillData[this.index])},t.prototype.updateInfo=function(t){var e=M13.init["skillName"+(this.index+1)].value;if(this.lbName.text=e,this.lbNowAttr1.text=this.lbNowNum1.text=this.lbNextAttr1.text=this.lbNextNum1.text="",t.sl){var i=M13.skillGroup[t.si+""][t.sl-1];this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!0,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!1,this.lbClass.text=O3.tr(1331,t.sl);var s=O3.tr(1300,N12.base[M13.init.skillItem.value].name,i.cost);this.lbExpend.textFlow=(new egret.HtmlTextParser).parser(s),this.lbOwn.text=N12.giC(parseInt(M13.init.skillItem.value))+"",this.lbOwn.textColor=parseInt(this.lbOwn.text)>=i.cost?_cc.green:_cc.red,this.btnUpgrade.imgNew.visible=parseInt(this.lbOwn.text)>=i.cost,this.imgHead.source=N12.FJ86(M13.init.skillItem.value),this.imgQuality.source=N12.getBox(N12.base[M13.init.skillItem.value].quality);var o=N13.getData(i.attr);for(var r in o)for(var n in o[r])this["lbNowAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNowNum"+r].text=o[r][n]}else{this.lbClass.text="",this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!1,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!0;(i=M13.skillGroup[t.si+""][t.sl]).name;var a=WingLangs.typeMaps[N13.type].name;this.lbCondition.text=O3.tr(1316,a,t.count)}var h=M13.skillGroup[t.si+""][t.sl+""];if(h&&t.sl!=M13.skillGroup[t.si+""].length){this.grpData.visible=!0,this.lbReach.visible=!1;o=N13.getData(h.attr);for(var r in o)for(var n in o[r])this["lbNextAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNextNum"+r].text=o[r][n]}else this.grpUpgrade.visible=this.grpData.visible=!1,this.lbReach.visible=!0},t.prototype.ZV2=function(t){var e;for(var i in M13.base){if((M13.base[i].skillid?M13.base[i].skillid.split(","):"").length==t){e=M13.base[i].level;break}}return e},t.prototype.skillNew=function(t){var e=parseInt(t.target.name);this.index=e;for(var i=0;i<this.grps.length;i++){this.grps[i].getChildByName("imgOpt").visible=i==e}this.updateInfo(this.skillData[this.index]),TG40.playClickEffect()},t}(BaseEuiView);__reflect(HorseSkill.prototype,"HorseSkill"),function(t){var e=function(){};t.HorseVo=e,__reflect(e.prototype,"horse.HorseVo");var i=function(){};t.HorseSkillVo=i,__reflect(i.prototype,"horse.HorseSkillVo")}(horse||(horse={}));var TC78=function(){function s(){}return s.FK35=function(t){s.init=t.artifact_init,s.artifact=t.artifact_artifact,s.polish=t.artifact_polish,s.level=t.artifact_level,s.xilian=t.artifact_xilian,s.FE10(),s.FE11(),s.FF16(),s.lvMax=s.FI66(s.newLevel[1]),s.polishMax=s.FI66(s.newPolish[1]),s.sopCName=[O3.tr(8438),O3.tr(8437),O3.tr(8436),O3.tr(8440),O3.tr(8439)]},s.gIV=function(t){var e;return this.init?e=this.init[t].value:e},s.FI66=function(t){var e=0;for(var i in t)e++;return e},s.FJ87=function(){return s.artifact},s.FB76=function(t){return s.artifact[t]},s.FE9=function(t,e){return s.newLevel[e][t]},s.FC38=function(t,e){return s.newPolish[t][e]},s.FC39=function(t,e,i){return s.newXiLian[t][e][i]},s.FJ88=function(t,e){return s.newXiLian[1][e][t].limit},s.FE10=function(){for(var t in s.newPolish={},s.polish){var e=s.polish[t];s.newPolish[e.polishtype]||(s.newPolish[e.polishtype]={}),s.newPolish[e.polishtype][e.lv]=e}},s.FF16=function(){for(var t in s.newLevel={},s.level){var e=s.level[t];s.newLevel[e.leveltype]||(s.newLevel[e.leveltype]={}),s.newLevel[e.leveltype][e.lv]=e}},s.FE11=function(){for(var t in s.newXiLian={},s.xilian){var e=s.xilian[t];s.newXiLian[e.type]?s.newXiLian[e.type][e.attrtype]||(s.newXiLian[e.type][e.attrtype]={}):(s.newXiLian[e.type]={},s.newXiLian[e.type][e.attrtype]={}),s.newXiLian[e.type][e.attrtype][e.lv]=e}},s.getXlaID=function(){return"103:100;102:100;101:100;241:100;240:100"},s.FL81=function(){var t=this.gIV("xilianReduce");return Number(t)},s}();__reflect(TC78.prototype,"TC78");var TE91=function(){function u(){}return u.FK35=function(t){u.init=t.Immortal_init,u.base=t.Immortal_base,u.lv=t.Immortal_lv,u.star=t.Immortal_star,u.apti_lv=t.Immortal_apti_lv,u.skill=t.Immortal_skill,u.ability=t.Immortal_ability,u.cultivation=t.Immortal_cultivation,u.skill_lv=t.Immortal_skill_lv,u.evo=t.Immortal_evo,u.evo_skill=t.Immortal_evo_skill,u.bsaList=u.FK94(),u.expList=u.FK96(),u.starMax=u.FI66(u.star),u.culMax=u.FI66(u.cultivation),u.FI67(),u.FC40(),u.FE12(),u.FB77()},u.gIV=function(t){var e;return this.init?e=this.init[t].value:e},u.FK93=function(t){for(var e in u.bsaList){var i=u.bsaList[e];if(i.id==t)return i}},u.FK94=function(){var t=[];for(var e in u.base){var i=u.base[e],s=u.FI15(i.skill),o=u.FG32(i.ability),r={id:i.id,base:i,skill:s,ability:o};t.push(r)}return t},u.FI67=function(){for(var t in u.newApti_lv={},u.apti_lv){var e=u.apti_lv[t];u.newApti_lv[e.aptitype]||(u.newApti_lv[e.aptitype]={}),u.newApti_lv[e.aptitype][e.degree]=e}},u.FC40=function(){for(var t in u.newSkill_lv={},u.skill_lv){var e=u.skill_lv[t];u.newSkill_lv[e.skillid]||(u.newSkill_lv[e.skillid]={}),u.newSkill_lv[e.skillid][e.degree]=e}},u.FE12=function(){for(var t in u.newEvo={},u.evo){var e=u.evo[t];u.newEvo[e.evotype]||(u.newEvo[e.evotype]={}),u.newEvo[e.evotype][e.degree]=e}},u.FB77=function(){for(var t in u.newEvo_Skill={},u.evo_skill){var e=u.evo_skill[t];u.newEvo_Skill[e.skillevotype]||(u.newEvo_Skill[e.skillevotype]=[]),u.newEvo_Skill[e.skillevotype].push(e)}},u.FA29=function(t,e){return u.newSkill_lv[t][e]},u.FI68=function(t,e){return u.newApti_lv[t][e]},u.FHH52=function(t,e){return u.newEvo[t][e]},u.FD17=function(t){return u.newEvo_Skill[t]},u.FK95=function(){var t=[];for(var e in u.base){var i=u.base[e];t.push(i)}return t},u.FK96=function(){for(var t=[],e=1;e<=4;e++){var i={id:u.gIV("ImmortalAdvItem"+e),exp:u.gIV("ImmortalAdvExp"+e)};t.push(i)}return t},u.FJ89=function(){for(var t=[],e=4;1<=e;e--){var i={id:u.gIV("ImmortalAdvItem"+e),exp:u.gIV("ImmortalAdvExp"+e)};t.push(i)}return t},u.FI15=function(t){for(var e in u.skill){var i=u.skill[e];if(i.skillid==t)return i}},u.FG32=function(t){for(var e in u.ability){var i=u.ability[e];if(i.skillid==t)return i}},u.FF17=function(t){for(var e in this.base)if(this.base[e].id==t)return this.base[e]},u.FL82=function(t){return u.lv[t]},u.FI69=function(t,e,i){for(var s=t,o=e+i,r=u.FI66(u.lv),n=0;n<r;n++){var a=this.FL82(s).reqexp;if(!(0<=a))return r;if(!(0<=(o-=a)))return s;s++}},u.FJ90=function(t,e,i){void 0===i&&(i=0);for(var s=u.FI66(u.lv),o=0-e-i,r=t;r<s;r++){var n=u.FL82(r);o+=Number(n.reqexp)}return o},u.FF18=function(t,e){var i=u.base[t],s=u.FL56(i.baseattr),o=u.FI70(e);for(var r in o){var n=this.isInList(o[r].key,o);if("-1"==n){var a={key:o[r].key,value:o[r].value};s.push(a)}else s[n].value=Number(s[n].value)+Number(o[r].value)}return s},u.FI70=function(t){for(var e=this.FJ93(u.lv[1].add),i=2;i<=t;i++){var s=this.FL56(u.lv[i-1].add);for(var o in s){var r=this.isInList(s[o].key,e);if("-1"==r){var n={key:s[o].key,value:s[o].value};e.push(n)}else e[r].value=Number(e[r].value)+Number(s[o].value)}}return e},u.FE13=function(t,e){for(var i=0,s=0;s<=t;s++)s<t&&(i+=7*Number(u.star[s+1].addattr)),s==t&&(s==u.starMax||(i+=e*Number(u.star[s+1].addattr)));return i},u.FJ91=function(t,e,i){i=5<=i?5:i;for(var s=this.FJ93(u.FI68(1,1).aptiattr),o=1;o<=e;o++){var r=u.FI68(t,o),n=this.FL56(r.aptiattr);if(o==e)for(var a=1;a<=i;a++)for(var h in n){if("-1"==(l=this.isInList(n[h].key,s))){var p={key:n[h].key,value:n[h].value};s.push(p)}else s[l].value=Number(s[l].value)+Number(n[h].value)}else for(a=1;a<=5;a++)for(var h in n){var l;if("-1"==(l=this.isInList(n[h].key,s))){p={key:n[h].key,value:n[h].value};s.push(p)}else s[l].value=Number(s[l].value)+Number(n[h].value)}}return s},u.FK97=function(t,e,i){for(var s=this.FJ93(u.FHH52(1,0).add),o=0;o<=e;o++){var r=u.FHH52(t,o),n=this.FL56(r.add),a=this.FL56(r.advanced);if(o==e)for(var h=1;h<=i;h++)for(var p in n){if("-1"==(c=this.isInList(n[p].key,s))){var l={key:n[p].key,value:n[p].value};s.push(l)}else s[c].value=Number(s[c].value)+Number(n[p].value)}else{for(h=1;h<=10;h++)for(var p in n){if("-1"==(c=this.isInList(n[p].key,s))){l={key:n[p].key,value:n[p].value};s.push(l)}else s[c].value=Number(s[c].value)+Number(n[p].value)}for(var p in a){var c;if("-1"==(c=this.isInList(a[p].key,s))){l={key:a[p].key,value:a[p].value};s.push(l)}else s[c].value=Number(s[c].value)+Number(a[p].value)}}}return s},u.FJ92=function(t,e){var i=0;if(1<e){var s=u.FI68(t,e-1);i=Number(s.growattr)}return i},u.FK98=function(t,e){for(var i=this.FJ93(u.cultivation[1].attr),s=1;s<=t;s++){var o=this.FL56(u.cultivation[s].attr),r=this.FL56(u.cultivation[s].breakattr);if(s==t)for(var n=1;n<=e;n++)for(var a in o){if("-1"==(p=this.isInList(o[a].key,i))){var h={key:o[a].key,value:o[a].value};i.push(h)}else i[p].value=Number(i[p].value)+Number(o[a].value)}else{for(n=1;n<=8;n++)for(var a in o){if("-1"==(p=this.isInList(o[a].key,i))){h={key:o[a].key,value:o[a].value};i.push(h)}else i[p].value=Number(i[p].value)+Number(o[a].value)}for(var a in r){var p;if("-1"==(p=this.isInList(r[a].key,i))){h={key:r[a].key,value:r[a].value};i.push(h)}else i[p].value=Number(i[p].value)+Number(r[a].value)}}}return i},u.FF19=function(){for(var t in this.base){var e=this.base[t];return this.FJ93(e.baseattr)}},u.FJ93=function(t){var e=[],i=this.FL56(t);for(var s in i){var o=this.isInList(i[s].key,e);if("-1"==o){var r={key:i[s].key,value:0};e.push(r)}else e[o].value=0}return e},u.isInList=function(t,e){for(var i in e)if(e[i].key==t)return i;return"-1"},u.FI66=function(t){var e=0;for(var i in t)e++;return e},u.FK99=function(t){return u.cultivation[t].skin},u.FL56=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={key:o[0],value:o[1]};e.push(r)}return e},u.FL55=function(t,e){void 0===e&&(e=1);var i="";for(var s in t)"0"!=s&&(i+=";"),i+=t[s].key+":"+Number(t[s].value)*e;return i},u.FG33=function(t){return 15<t?"v1_img_star_red_png":10<t?"v1_img_starzi_png":5<t?"v1_img_star1_blue_png":0<t?"v1_img_star1_png":"v1_img_star2_png"},u.FE14=function(t){return t?O1.getSkin(t).picture:""},u}();__reflect(TE91.prototype,"TE91");var J6=function(){function t(){}return t.A36="1001",t.A45=10001,t.A46=10002,t.A30=10003,t.A31=10004,t.A28=10005,t.A29=10006,t.A21=10007,t.A22=10008,t.A43=10009,t.A44=10010,t.A32=10011,t.A33=10012,t.A37=10013,t.A38=10014,t.A39=10015,t.A40=10016,t.A34=10017,t.A35=10018,t.A23=10019,t.A24=10020,t.A15=10021,t.A16=10022,t.A25=10023,t.A26=10024,t.A19=10025,t.A20=10026,t.A17=10027,t.A18=10028,t.A27="1002",t.A11=10029,t.A12=10030,t.A5=10031,t.A6=10032,t.A7=10033,t.A8=10034,t.A13=10035,t.A14=10036,t.A9=10037,t.A10=10038,t.A1=10039,t.A2=10040,t.A3=10041,t.A4=10042,t.A41=10043,t.A42=10044,t}();__reflect(J6.prototype,"J6");var TC26=function(i){function t(){var t=i.call(this)||this,e=new TF43(t);return t.proxy=new TF44(t),e.aLV(O7.I39),e.aLV(O7.F53),e.aLV(O7.D80),e.aLV(O7.D1),e.aLV(O7.C26),e.aLV(O7.D3),e.aLV(O7.D2),e.aLV(O7.B57),e.aLV(O7.B58),e.aLV(O7.D4),e.aLV(O7.A76),e.aLV(O7.D6),e.aLV(O7.B59),e.aLV(O7.B60),e.aLV(O7.A20),e.aLV(O7.B62),e.aLV(O7.D10),App.VM.register(O7.F53,"ImmortalMainView",t,K17.UI_Main),App.VM.register(O7.D2,"ImmortalComView",t,K17.UI_Main_TOP),App.VM.register(O7.B55,"ImmortalSkillView",t,K17.UI_Main_TOP),App.VM.register(O7.C27,"ImmortalAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.D81,"ImmortalCZView",t,K17.UI_Main_TOP),App.VM.register(O7.B56,"ImmortalShareView",t,K17.UI_Main_TOP),App.VM.register(O7.A75,"ImmortalIntAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.A55,"ImmortalCulPowerView",t,K17.UI_Main_TOP),App.VM.register(O7.B57,"ImmortalEquipMainView",t,K17.UI_Main_TOP),App.VM.register(O7.A56,"ImmortalAllPowerView",t,K17.UI_Main_TOP),App.VM.register(O7.A3,"ImmortalEquipRiseTipsView",t,K17.UI_Main_TOP),App.VM.register(O7.A19,"ImmortalEquipGreatView",t,K17.UI_Main_TOP),App.VM.register(O7.A34,"ImmortalEquipAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.B62,"ImmortalLvExpView",t,K17.UI_Main_TOP),App.VM.register(O7.A76,"ImmortalArtMainView",t,K17.UI_Main_TOP),App.VM.register(O7.B19,"ImmortalArtTipView",t,K17.UI_Main_TOP),App.VM.register(O7.A20,"ImmortalArtAutoSopView",t,K17.UI_Main_TOP),App.VM.register(O7.A57,"ImmortalArtPowerView",t,K17.UI_Main_TOP),App.VM.register(O7.D10,"ImmortalFlyView",t,K17.UI_Main_TOP),t.rgF(J6.A45,t.loadReq,t),t.rgF(J6.A46,t.loadRes,t),t.rgF(J6.A30,t.GX67,t),t.rgF(J6.A31,t.GX68,t),t.rgF(J6.A28,t.GW48,t),t.rgF(J6.A29,t.GW49,t),t.rgF(J6.A21,t.GU94,t),t.rgF(J6.A22,t.GU95,t),t.rgF(J6.A43,t.lvUpReq,t),t.rgF(J6.A44,t.lvUpRes,t),t.rgF(J6.A32,t.GY54,t),t.rgF(J6.A33,t.GY55,t),t.rgF(J6.A37,t.intUpReq,t),t.rgF(J6.A38,t.intUpRes,t),t.rgF(J6.A39,t.culUpReq,t),t.rgF(J6.A40,t.culUpRes,t),t.rgF(J6.A34,t.GY56,t),t.rgF(J6.A35,t.GY57,t),t.rgF(J6.A23,t.GU68,t),t.rgF(J6.A24,t.GU69,t),t.rgF(J6.A15,t.GR30,t),t.rgF(J6.A16,t.GR31,t),t.rgF(J6.A25,t.GU96,t),t.rgF(J6.A26,t.GU97,t),t.rgF(J6.A19,t.GT30,t),t.rgF(J6.A20,t.GT31,t),t.rgF(J6.A17,t.GQ88,t),t.rgF(J6.A18,t.GQ89,t),t.rgF(J6.A11,t.GX69,t),t.rgF(J6.A12,t.GX70,t),t.rgF(J6.A5,t.GY58,t),t.rgF(J6.A6,t.GY59,t),t.rgF(J6.A7,t.GU98,t),t.rgF(J6.A8,t.GU99,t),t.rgF(J6.A13,t.GX71,t),t.rgF(J6.A14,t.GX72,t),t.rgF(J6.A9,t.artXLReq,t),t.rgF(J6.A10,t.artXLRes,t),t.rgF(J6.A1,t.GV1,t),t.rgF(J6.A2,t.GV2,t),t.rgF(J6.A3,t.GV3,t),t.rgF(J6.A4,t.GV4,t),t.rgF(J6.A41,t.GY60,t),t.rgF(J6.A42,t.GY61,t),t}return __extends(t,i),t.prototype.loadReq=function(t){return this.proxy.ZP6()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX67=function(t){this.proxy.GX67(t)},t.prototype.GX68=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.R19),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW48=function(t){this.proxy.GW48(t)},t.prototype.GW49=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.localClick.id=t.body.im.id,i.GQ12(t.body),i.notify(P4.P52);var s={objData:{id:TE91.base[e.im.id].model,x:0,y:0,dir:Dir.br,objType:P13.A6}};App.VM.open(O7.G69,s)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU94=function(t,e){this.proxy.GU94(t,e)},t.prototype.GU95=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.B8)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.lvUpReq=function(t,e){this.proxy.lvUpReq(t,e)},t.prototype.lvUpRes=function(t){if(200==t.head.state){var e=this.gtM();e.updataById(t.body),e.notify(P4.V27)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY54=function(t){this.proxy.GY54(t)},t.prototype.GY55=function(t){if(200==t.head.state){var e=this.gtM();e.updataById(t.body),e.notify(P4.S77)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.intUpReq=function(t){this.proxy.intUpReq(t)},t.prototype.intUpRes=function(t){if(200==t.head.state){var e=this.gtM();e.updataById(t.body),e.notify(P4.E59)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.culUpReq=function(){this.proxy.culUpReq()},t.prototype.culUpRes=function(t){if(200==t.head.state){var e=this.gtM();if(e.GQ12(t.body),e.notify(P4.C62),0==e.cSr){var i=e.ZE26(),s=TE91.FK99(e.cSi),o={objData:{id:i.bsa.base.model,x:0,y:0,dir:Dir.br,ics:s,objType:P13.A6,bt:BehaviourType.Attack_d}};App.VM.open(O7.G69,o)}}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY56=function(t){this.proxy.GY56(t)},t.prototype.GY57=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.A23)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU68=function(){return this.proxy.ZE27()},t.prototype.GU69=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.L54)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR30=function(t){this.proxy.GR30(t)},t.prototype.GR31=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.HH58)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU96=function(t){this.proxy.GU96(t)},t.prototype.GU97=function(t){if(200==t.head.state){var e=this.gtM();e.updataByPos(t.body),e.notify(P4.L56)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT30=function(t){this.proxy.GT30(t)},t.prototype.GT31=function(t){if(200==t.head.state){var e=this.gtM();e.updataByPos(t.body),e.notify(P4.J47)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ88=function(t,e){this.proxy.GQ88(t,e)},t.prototype.GQ89=function(t){if(200==t.head.state){var e=this.gtM();e.updataByPos(t.body),e.notify(P4.HH60)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX69=function(){return this.proxy.GX69()},t.prototype.GX70=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.F95)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY58=function(t){this.proxy.GY58(t)},t.prototype.GY59=function(t){if(200==t.head.state){var e=this.gtM();e.GQ12(t.body),e.notify(P4.B79)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU98=function(t,e){this.proxy.GU98(t,e)},t.prototype.GU99=function(t){if(200==t.head.state){var e=this.gtM();e.ZX34(t.body),e.notify(P4.D36)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX71=function(t){this.proxy.GX71(t)},t.prototype.GX72=function(t){if(200==t.head.state){var e=this.gtM();e.ZX34(t.body),e.notify(P4.F97)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.artXLReq=function(t,e){this.proxy.artXLReq(t,e)},t.prototype.artXLRes=function(t){if(200==t.head.state){var e=this.gtM();e.ZX34(t.body),e.notify(P4.D38)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV1=function(t){this.proxy.GV1(t)},t.prototype.GV2=function(t){if(200==t.head.state){var e=this.gtM();e.ZX34(t.body),e.notify(P4.A49)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV3=function(t){this.proxy.GV3(t)},t.prototype.GV4=function(t){if(200==t.head.state){var e=this.gtM();e.ZX34(t.body),e.notify(P4.A51)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY60=function(t){this.proxy.GY60(t)},t.prototype.GY61=function(t){if(200==t.head.state){var e=this.gtM();e.updataById(t.body),e.notify(P4.S79)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TC26.prototype,"TC26");var TB84=function(){function i(){}return i.FK35=function(t){i.init=t.Immortalequip_init,i.equip=t.Immortalequip_equip,i.level=t.Immortalequip_level,i.xilian=t.Immortalequip_xilian,i.equipmaster=t.Immortalequip_equipmaster,i.levelmaster=t.Immortalequip_levelmaster,i.lvMax=i.FI66(i.level),i.FJ94()},i.gIV=function(t){var e;return this.init?e=this.init[t].value:e},i.FI66=function(t){var e=0;for(var i in t)e++;return e},i.FE15=function(t){return i.equip[t]},i.FE9=function(t){return i.level[t]},i.FD18=function(t){return i.equipmaster[t]},i.FC41=function(t){var e=Math.floor(t/10);return i.equipmaster[e]},i.FF20=function(t,e){return i.newEquip[t][e]},i.FJ94=function(){for(var t in i.newEquip={},i.equip){var e=i.equip[t];i.newEquip[e.pos]||(i.newEquip[e.pos]={}),i.newEquip[e.pos][e.quality]=e}},i}();__reflect(TB84.prototype,"TB84");var TF43=function(i){function t(t){var e=i.call(this,t)||this;return e.scrollerIH=0,e.scrollerH=0,e}return __extends(t,i),t.prototype.getAllRedNum=function(){if(TF82.FG34(!1)){return this.getLvViewRed()?1:this.ZS88()?1:this.ZX29()?1:this.ZX30()?1:this.ZP1()?1:this.ZX31()?1:this.ZX32()?1:this.ZP2()?1:this.ZL87()?1:this.ZX33()?1:0}},t.prototype.getLvViewRed=function(){var t=this.ZF65();for(var e in t)if(0==t[e].state)return 1;if(this.getComRed())return 1;for(var e in t)if(this.ZP4(t[e].bsa.base))return 1;for(var e in t)if(this.getFlyRed(t[e]))return 1;for(var e in this.ims)if(this.getLvRed(this.ims[e]))return 1;return 0},t.prototype.ZS88=function(){var t=this.ZF65();for(var e in t)if(0==t[e].state)return 1;for(var e in t)if(this.getStarRed(t[e])&&this.getImsById(t[e].id))return 1;return 0},t.prototype.ZX29=function(){var t=this.ZF65();for(var e in t)if(0==t[e].state)return 1;for(var e in t)if(this.getIntRed(t[e])&&this.getImsById(t[e].id))return 1;return 0},t.prototype.ZX30=function(){if(0<this.getImsNum()){var t=App.CM.gtM(O6.B58),e=TE91.cultivation[t.cLv],i=void 0,s=void 0,o=void 0;return-1==e.attr?0:(o=t.cSr<8?(i=TE91.gIV("cultivationLv"),s=N12.giC(i),e.cost):(i=TE91.gIV("cultivationBr"),s=N12.giC(i),e.broken),s>=Number(o)?1:0)}return 0},t.prototype.ZP1=function(){for(var t=1;t<=8;t++){if(this.getForgeRed(t))return 1;if(this.getLvUpRed(t))return 1}return 0},t.prototype.ZX31=function(){for(var t=1;t<=8;t++)if(this.getSopRed(t))return 1;return 0},t.prototype.ZX32=function(){var t=TC78.FJ87();for(var e in t){var i=t[e];if(this.getArtActRed(i.id)+this.ZS92(i.id))return 1}return 0},t.prototype.ZP2=function(){var t=TC78.FJ87();for(var e in t){var i=t[e];if(this.getArtActRed(i.id)+this.getArtLvRed(i.id))return 1}return 0},t.prototype.ZL87=function(){var t=TC78.FJ87();for(var e in t)if(this.getArtXLRed(t[e].id))return 1;for(var e in t){var i=t[e];if(this.getArtActRed(i.id))return 1}return 0},t.prototype.ZX33=function(){var t=this.ZF65();for(var e in t)if(this.getFlyRed(t[e]))return 1;return 0},t.prototype.getImsNum=function(){var t=0;for(var e in this.ims)t++;return t},t.prototype.getEquipRed=function(){},t.prototype.GQ12=function(t){if(this.ims=t.ims?t.ims:this.ims,this.ubs=t.ubs?t.ubs:this.ubs,this.cLv=0<=t.cLv?t.cLv:this.cLv,this.cSr=0<=t.cSr?t.cSr:this.cSr,this.cSi=t.cSi?t.cSi:this.cSi,this.es=t.es?t.es:this.es,this.fm=t.fm?t.fm:this.fm,this.um=t.um?t.um:this.um,this.arts=t.as?t.as:this.arts,t.im){var e={aLv:t.im.aLv,aSg:t.im.aSg,exp:t.im.exp,id:t.im.id,lv:t.im.lv,sLv:t.im.sLv,sSo:t.im.sSo,eSg:t.im.eSg,eLv:t.im.eLv};this.ims[t.im.id]=e}if(t.eq){e={tid:t.eq.tid,pa:t.eq.pa,lv:t.eq.lv,p:t.eq.p};this.es||(this.es={}),this.es[t.eq.p]=e}if(t.a){e={id:t.a.id,lv:t.a.lv,poLv:t.a.poLv,xlLv:t.a.xlLv,xlExp:t.a.xlExp,xlu:t.a.xlu,xla:t.a.xla,nsa:t.a.nsa};this.arts||(this.arts=[]),this.arts[t.a.id]=e}},t.prototype.updataById=function(t){var e=null;for(var i in this.ims)this.ims[i].id==t.id&&(e=i);this.ims[e].lv=0<=t.lv?t.lv:this.ims[e].lv,this.ims[e].exp=0<=t.exp?t.exp:this.ims[e].exp,this.ims[e].sLv=0<=t.sLv?t.sLv:this.ims[e].sLv,this.ims[e].sSo=0<=t.sSo?t.sSo:this.ims[e].sSo,this.ims[e].aSg=0<=t.aSg?t.aSg:this.ims[e].aSg,this.ims[e].aLv=0<=t.aLv?t.aLv:this.ims[e].aLv,this.ims[e].eSg=0<=t.eSg?t.eSg:this.ims[e].eSg,this.ims[e].eLv=0<=t.eLv?t.eLv:this.ims[e].eLv},t.prototype.updataByPos=function(t){var e=null;for(var i in this.es)i==t.pos&&(e=i);this.es[e].add=t.add?t.add:this.es[e].add,this.es[e].tid=0<=t.tid?t.tid:this.es[e].tid,this.es[e].pa=t.pa?t.pa:this.es[e].pa,this.es[e].lv=0<=t.lv?t.lv:this.es[e].lv,this.fm=t.fm?t.fm:this.fm,this.um=t.um?t.um:this.um},t.prototype.ZX34=function(t){var e=null;for(var i in this.arts)this.arts[i].id==t.id&&(e=i);this.rs=t.rs,this.arts[e].lv=0<=t.lv?t.lv:this.arts[e].lv,this.arts[e].poLv=0<=t.poLv?t.poLv:this.arts[e].poLv,this.arts[e].xlLv=0<=t.xlLv?t.xlLv:this.arts[e].xlLv,this.arts[e].xlExp=0<=t.xlExp?t.xlExp:this.arts[e].xlExp,this.arts[e].xlu=t.xlu?t.xlu:this.arts[e].xlu,this.arts[e].xla=t.xla?t.xla:this.arts[e].xla,this.arts[e].nsa=t.nsa},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t.prototype.ZHH9=function(){var t=TE91.FK94();for(var e in t){var i=t[e];if(i.id==this.localClick.id)return{bsa:i,state:this.ZX36(i.base),im:this.getImsById(t[e].id),id:i.id}}},t.prototype.ZF65=function(){var t=[],e=TE91.FK94();for(var i in e){var s=e[i],o={bsa:s,state:this.ZX36(s.base),im:this.getImsById(e[i].id),id:s.id};t.push(o)}t.sort(function(t,e){return t.state!=e.state?t.state-e.state:5==t.state||0==t.state?t.bsa.base.sort-e.bsa.base.sort:e.bsa.base.sort-t.bsa.base.sort});for(var r=1,n=0,a=t;n<a.length;n++){var h=a[n];h.index=r,h.red=this.getShowRed(h,this.localPanel),r++}return t},t.prototype.getShowRed=function(t,e){if(0==t.state)return 1;if(5==t.state)return 0;switch(e){case"ImmortalLvView":return this.getLvRed(t.im)+this.ZP4(t.bsa.base)+this.getFlyRed(t);case"ImmortalStarView":return this.getStarRed(t);case"ImmortalIntView":return this.getIntRed(t)}},t.prototype.ZX35=function(){var t=this.ZF65();for(var e in t)if(0==t[e].state)return t[e];for(var e in t)if(0!=t[e].state&&5!=t[e].state){if(!this.getExpRed())return t[e];if("-1"!=TE91.lv[t[e].im.lv].reqexp)return t[e]}return t[0]},t.prototype.ZX36=function(t){var e=t.id;return this.getImsById(e)?this.getUbsById(e):this.getIsAct(t)?0:5},t.prototype.getIsAct=function(t){var e=t.activateitem;return 0<N12.giC(e)},t.prototype.getImsById=function(t){for(var e in this.ims)if(this.ims[e].id==t)return this.ims[e];return null},t.prototype.getUbsById=function(t){for(var e in this.ubs)if(this.ubs[e]==t)return Number(e);return 4},t.prototype.ZD26=function(){var t=TC78.FJ87();for(var e in t){var i=t[e];if(i.id==this.localArt.id)return{base:i,state:this.getArtState(i.id),art:this.getArtById(i.id),red:this.ZP3(this.localArtPanel,i.id),id:i.id}}},t.prototype.ZC68=function(t){var e=[],i=TC78.FJ87();for(var s in i){var o=i[s],r={base:o,state:this.getArtState(o.id),art:this.getArtById(o.id),red:this.ZP3(t,o.id),id:o.id};e.push(r)}e.sort(function(t,e){return t.state!=e.state?t.state-e.state:2==t.state?e.base.sort-t.base.sort:t.base.sort-e.base.sort});for(var n=1,a=0,h=e;a<h.length;a++){h[a].index=n,n++}return e},t.prototype.getArtById=function(t){for(var e in this.arts)if(this.arts[e].id==t)return this.arts[e];return null},t.prototype.getArtState=function(t){return this.getArtById(t)?1:this.getArtActRed(t)?0:2},t.prototype.ZP3=function(t,e){var i=0;switch(t){case"sopView":i+=this.getArtActRed(e)+this.ZS92(e);break;case"lvView":i+=this.getArtActRed(e)+this.getArtLvRed(e);break;case"xlView":i+=this.getArtActRed(e)+this.getArtXLRed(e)}return i},t.prototype.getExpRed=function(){var t=TE91.FK96();for(var e in t){if(0<N12.giC(t[e].id))return 1}return 0},t.prototype.getLvRed=function(t){return"-1"!=TE91.lv[t.lv].reqexp?this.getExpRed():0},t.prototype.getComRed=function(){var t=TE91.FK95();for(var e in t){var i=t[e].compose,s=N12.giC(i);if(t[e].composenum<=s)return 1}return 0},t.prototype.ZP4=function(t){var e=this.ZX36(t);return 0==e||5==e?0:4==e&&this.getNum()<3?1:0},t.prototype.getNum=function(){var t=0;for(var e in this.ims)t++;return t},t.prototype.getStarRed=function(t){if(0==t.state||5==t.state)return 0;if(t.im.sLv>=TE91.starMax)return 0;var e=TE91.gIV("StarAdvItem"),i=N12.giC(e);return TE91.star[t.im.sLv+1].elixir<=i?1:0},t.prototype.getIntRed=function(t){if(0==t.state||5==t.state)return 0;var e=t.bsa.base,i=TE91.FI68(e.aptitype,t.im.aSg);if(-1==i.grow)return 0;var s=void 0,o=void 0;return(5<=t.im.aLv?(s=e.brokenitem,N12.gID(s),o=N12.giC(s),i.grow):(s=e.aptiitem,N12.gID(s),o=N12.giC(s),i.elixir))<=o?1:0},t.prototype.getFlyRed=function(t){if(O4.FF89(L17.A30))return 0;if(0==t.state||5==t.state)return 0;var e=t.bsa.base,i=TE91.FHH52(e.evotype,t.im.eSg);if("-1"==i.elixir)return 0;var s=void 0,o=void 0,r=void 0;return r=(o=t.im.eLv<10?(s=TE91.gIV("evoItem1"),Number(i.elixir)):(s=TE91.gIV("evoItem2"),Number(i.grow)),N12.giC(s)),N12.gID(s),o<=r?1:0},t.prototype.getForgeRed=function(t){var e,i=this.ZS91(t);if(i){var s=TB84.FE15(i.tid);if(10<=s.quality)return 0;e=TB84.FF20(t,Number(s.quality)+1)}else i={lv:0},e=TB84.FF20(t,1);var o=e.itemnum.split(":"),r=o[0],n=N12.giC(r);return Number(o[1])<=n&&i.lv>=e.lvlimit?1:0},t.prototype.getLvUpRed=function(t){var e=this.ZS91(t);if(e){if(e.lv<TB84.lvMax){var i=TB84.FE9(Number(e.lv)+1),s=TB84.gIV("makeItem1"),o=N12.giC(s);return i.cost<=o?1:0}return 0}var r=TB84.FF20(t,1).itemnum.split(":");s=r[0],o=N12.giC(s);return Number(r[1])<=o?1:0},t.prototype.getSopRed=function(t){var e=this.ZS91(t);if(e){TB84.FE15(e.tid);if(this.getSopMax(t)){var i=TB84.gIV("xilianItem1").split(":"),s=TB84.gIV("xilianItem2").split(":"),o=N12.giC(i[0]),r=N12.giC(s[0]);return o>=Number(i[1])||r>=Number(s[1])?1:0}return 0}return 0},t.prototype.getSopMax=function(t){var e=this.ZS91(t);if(e){var i=TB84.FE15(e.tid),s=TF82.FL56(i.attrlimit);if(e.pa.ats.length){for(var o in e.pa.ats){var r=e.pa.ats[o],n=TF82.isInList(r.k,s);if("-1"!=n&&r.v<Number(s[n].value))return 1}return 0}return 1}return 0},t.prototype.getAllLvList=function(){var t=TE91.FJ93(TE91.lv[1].add);for(var e in this.ims){var i=TE91.FF18(this.ims[e].id,this.ims[e].lv);for(var s in i){var o=this.isInList(i[s].key,i);if("-1"==o){var r={key:i[s].key,value:i[s].value};t.push(r)}else t[o].value=Number(t[o].value)+Number(i[s].value)}}return t},t.prototype.ZS89=function(){var t=TE91.FJ93(TE91.lv[1].add);for(var e in this.ims){var i=TE91.FF18(this.ims[e].id,this.ims[e].lv),s=TE91.FE13(this.ims[e].sLv,this.ims[e].sSo);for(var o in i){var r=this.isInList(i[o].key,i);if("-1"==r){var n={key:i[o].key,value:Math.ceil(Number(i[o].value)*s)};t.push(n)}else t[r].value=Number(t[r].value)+Math.ceil(Number(i[o].value)*s)}}return t},t.prototype.ZX37=function(){var t=TE91.FJ93(TE91.FI68(1,1).aptiattr);for(var e in this.ims){var i=TE91.FK93(this.ims[e].id),s=TE91.FJ91(i.base.aptitype,this.ims[e].aSg,this.ims[e].aLv);for(var o in s){var r=this.isInList(s[o].key,s);if("-1"==r){var n={key:s[o].key,value:Math.ceil(Number(s[o].value))};t.push(n)}else t[r].value=Number(t[r].value)+Math.ceil(Number(s[o].value))}}return t},t.prototype.countPower=function(t){var e,i,s=TE91.FK93(t.id),o=TE91.FL55(TE91.FF18(t.id,t.lv));i=M10.gAG(o);var r=TE91.FE13(t.sLv,t.sSo);e=Math.ceil(i*r);var n=Number(TE91.FJ92(s.base.aptitype,t.aSg)),a=M10.gAG(TE91.FL55(TE91.FI70(t.lv))),h=TE91.FL55(TE91.FJ91(s.base.aptitype,t.aSg,t.aLv));return i+e+(M10.gAG(h)+Math.ceil(n*(r+1)*a))},t.prototype.ZX38=function(){var t=0;for(var e in this.ims){t+=this.countPower(this.ims[e])}var i=TF82.FL55(TE91.FK98(this.cLv,this.cSr)),s=t+M10.gAG(i);return Math.ceil(s)},t.prototype.ZP5=function(){var t=0,e=0,i=0;for(var s in this.es){var o=this.es[s],r=TB84.FE15(o.tid),n=M10.gAG(r.attr),a=0,h=0;if(0<o.lv){var p=TB84.FE9(o.lv);a=M10.gAG(p.addattr),h=n*Number(p.attr)}t+=n+a+h}if(this.fm){var l=TB84.FD18(this.fm);e=M10.gAG(l.attraward)}if(this.um&&1<=this.um/10){l=TB84.FC41(this.um);i=M10.gAG(l.attraward)}return Math.ceil(t+e+i)},t.prototype.ZX39=function(){var t=0;for(var e in this.es){var i=this.es[e];t+=this.getPaPower(i.pa.ats)}return Math.ceil(t)},t.prototype.getPaPower=function(t){var e=0;for(var i in t){var s=t[i].k+":"+t[i].v;e+=M10.gAG(s)}return e},t.prototype.ZJ7=function(t){if(!this.getArtById(t.id))return M10.gAG(t.base.attr);return M10.gAG(t.base.attr)+M10.gAG(t.art.lv?TC78.FE9(t.art.lv,t.base.leveltype).attr:"")+M10.gAG(t.art.poLv?TC78.FC38(t.base.polishtype,t.art.poLv).attr:"")+M10.gAG(TF82.FL55(this.ZS90(t.art.xla,this.ZL88(t.art))))},t.prototype.ZL88=function(t){var e=TC78.FB76(t.id),i=[e.attr,t.poLv?TC78.FC38(e.polishtype,t.poLv).attr:"",t.lv?TC78.FE9(t.lv,e.leveltype).attr:""];return this.getAttrList(i)},t.prototype.ZS90=function(t,e){for(var i=[],s=TC78.getXlaID().split(";"),o=TC78.gIV("extraAttr").split("|"),r=1;r<=5;r++){var n=o[r-1].split(","),a=s[r-1].split(":")[0],h=0;t[r]&&(h=Number(t[r])>=Number(n[1])?Number(t[r])+Number(n[2]):t[r]),r<=3&&(h=Number(h)*this.ZX40(a,e)/100);var p={key:a,value:h};i.push(p)}return i},t.prototype.ZX40=function(t,e){for(var i in e)if(e[i].key==t)return Number(e[i].value);return 0},t.prototype.getAttrList=function(t){var e=[];for(var i in t)if(t[i].length){var s=t[i].split(";");for(var o in s){var r=s[o].split(":"),n=this.isInList(r[0],e);if("-1"==n){var a={key:r[0],value:Number(r[1])};e.push(a)}else e[n].value=Number(e[n].value)+Number(r[1])}}return e},t.prototype.ZS91=function(t){return this.es&&this.es[t]?this.es[t]:null},t.prototype.isInList=function(t,e){for(var i in e)if(e[i].key==t)return i;return"-1"},t.prototype.ZE26=function(){var t=this.ZF65();for(var e in t)if(0!=t[e].state)return t[e];return t[0]},t.prototype.getCulMagMax=function(){var t=TE91.culMax;return this.cLv==t?t:this.cLv+1},t.prototype.getIsCulMax=function(){var t=TE91.culMax;return this.cLv==t},t.prototype.getArtActRed=function(t){if(this.getArtById(t))return 0;var e=TC78.FB76(t).itemnum.split(";");for(var i in e){var s=e[i].split(":"),o=N12.giC(s[0]);if(Number(s[1])>o)return 0}return 1},t.prototype.ZS92=function(t){var e=this.getArtById(t);if(e){if(e.poLv<TC78.polishMax){var i=TC78.FB76(t),s=TC78.FC38(i.polishtype,e.poLv+1).itemnum.split(";");for(var o in s){var r=s[o].split(":"),n=N12.giC(r[0]);if(Number(r[1])>n)return 0}return 1}return 0}return 0},t.prototype.getArtLvRed=function(t){var e=this.getArtById(t);if(e){if(e.lv<TC78.lvMax){var i=TC78.FB76(t),s=TC78.FE9(e.lv+1,i.leveltype),o=(s.cost,TC78.gIV("lvItem")),r=N12.giC(o);return Number(s.cost)>r?0:1}return 0}return 0},t.prototype.getArtXLRed=function(t){if(this.getArtById(t)){var e=TC78.gIV("xilianItem1").split(":");if(N12.giC(e[0])>=Number(e[1]))return 1;var i=TC78.gIV("xilianItem2").split(":");if(N12.giC(i[0])>=Number(i[1]))return 1}return 0},t}(TG79);__reflect(TF43.prototype,"TF43");var TF44=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.ZP6=function(){var s=this;return new Promise(function(e,t){var i={type:P4.V24,body:{}};s.rSMO(P4.V25,function(t){s.apF(J6.A46,t),e("加载仙君数据数据完成")},s),s.sSM(i)})},t.prototype.GX67=function(t){var e={type:P4.R18,body:{imId:t}};this.rSMO(P4.R19,this.GX68,this),this.sSM(e)},t.prototype.GX68=function(t){this.apF(J6.A31,t)},t.prototype.GW48=function(t){var e={type:P4.P51,body:{imId:t}};this.rSMO(P4.P52,this.GW49,this),this.sSM(e)},t.prototype.GW49=function(t){this.apF(J6.A29,t)},t.prototype.GU94=function(t,e){var i={type:P4.B7,body:{imId:t,st:e}};this.rSMO(P4.B8,this.GU95,this),this.sSM(i)},t.prototype.GU95=function(t){this.apF(J6.A22,t)},t.prototype.lvUpReq=function(t,e){var i={type:P4.V26,body:{imId:t,items:e}};this.rSMO(P4.V27,this.lvUpRes,this),this.sSM(i)},t.prototype.lvUpRes=function(t){this.apF(J6.A44,t)},t.prototype.GY54=function(t){var e={type:P4.S76,body:{imId:t}};this.rSMO(P4.S77,this.GY55,this),this.sSM(e)},t.prototype.GY55=function(t){this.apF(J6.A33,t)},t.prototype.intUpReq=function(t){var e={type:P4.E58,body:{imId:t}};this.rSMO(P4.E59,this.intUpRes,this),this.sSM(e)},t.prototype.intUpRes=function(t){this.apF(J6.A38,t)},t.prototype.culUpReq=function(){var t={type:P4.C61,body:{}};this.rSMO(P4.C62,this.culUpRes,this),this.sSM(t)},t.prototype.culUpRes=function(t){this.apF(J6.A40,t)},t.prototype.GY56=function(t){var e={type:P4.A22,body:{lv:t}};this.rSMO(P4.A23,this.GY57,this),this.sSM(e)},t.prototype.GY57=function(t){this.apF(J6.A35,t)},t.prototype.ZE27=function(){var s=this;return new Promise(function(e,t){var i={type:P4.L53,body:{}};s.rSMO(P4.L54,function(t){s.apF(J6.A24,t),e("加载装备仙君数据数据完成")},s),s.sSM(i)})},t.prototype.GR30=function(t){var e={type:P4.HH57,body:{pos:t}};this.rSMO(P4.HH58,this.GR31,this),this.sSM(e)},t.prototype.GR31=function(t){this.apF(J6.A16,t)},t.prototype.GU96=function(t){var e={type:P4.L55,body:{pos:t}};this.rSMO(P4.L56,this.GU97,this),this.sSM(e)},t.prototype.GU97=function(t){this.apF(J6.A26,t)},t.prototype.GT30=function(t){var e={type:P4.J46,body:{pos:t}};this.rSMO(P4.J47,this.GT31,this),this.sSM(e)},t.prototype.GT31=function(t){this.apF(J6.A20,t)},t.prototype.GQ88=function(t,e){var i={type:P4.HH59,body:{pos:t,way:e}};this.rSMO(P4.HH60,this.GQ89,this),this.sSM(i)},t.prototype.GQ89=function(t){this.apF(J6.A18,t)},t.prototype.GX69=function(){var s=this;return new Promise(function(e,t){var i={type:P4.F94,body:{}};s.rSMO(P4.F95,function(t){s.apF(J6.A12,t),e("加载装备仙君神器数据数据完成")},s),s.sSM(i)})},t.prototype.GY58=function(t){var e={type:P4.B78,body:{arId:t}};this.rSMO(P4.B79,this.GY59,this),this.sSM(e)},t.prototype.GY59=function(t){this.apF(J6.A6,t)},t.prototype.GU98=function(t,e){var i={type:P4.D35,body:{arId:t,protect:e}};this.rSMO(P4.D36,this.GU99,this),this.sSM(i)},t.prototype.GU99=function(t){this.apF(J6.A8,t)},t.prototype.GX71=function(t){var e={type:P4.F96,body:{arId:t}};this.rSMO(P4.F97,this.GX72,this),this.sSM(e)},t.prototype.GX72=function(t){this.apF(J6.A14,t)},t.prototype.artXLReq=function(t,e){var i={type:P4.D37,body:{arId:t,way:e}};this.rSMO(P4.D38,this.artXLRes,this),this.sSM(i)},t.prototype.artXLRes=function(t){this.apF(J6.A10,t)},t.prototype.GV1=function(t){var e={type:P4.A48,body:{arId:t}};this.rSMO(P4.A49,this.GV2,this),this.sSM(e)},t.prototype.GV2=function(t){this.apF(J6.A2,t)},t.prototype.GV3=function(t){var e;e=t.conds.length?{type:P4.A50,body:{arId:t.arId,way:t.way,num:t.num,keys:t.keys,conds:t.conds}}:{type:P4.A50,body:{arId:t.arId,way:t.way,num:t.num,keys:t.keys}},this.rSMO(P4.A51,this.GV4,this),this.sSM(e)},t.prototype.GV4=function(t){this.apF(J6.A4,t)},t.prototype.GY60=function(t){var e={type:P4.S78,body:{imId:t}};this.rSMO(P4.S79,this.GY61,this),this.sSM(e)},t.prototype.GY61=function(t){this.apF(J6.A42,t)},t}(TG80);__reflect(TF44.prototype,"TF44");var TF82=function(){function t(){}return t.FG34=function(t){var e=O4.getLv(),i=parseInt(TE91.gIV("openLv")),s=parseInt(TE91.gIV("openDays"));if(e<i){K18.init.commonDesc1.value;return t&&P18.sDP(O3.tr(3370,s,i)),!1}return!(App.CM.gtM(O6.B43).serOpenDay+1<s)||(t&&P18.sDP(O3.tr(3370,s,i)),!1)},t.FC42=function(t){for(var e=t.ubs,i=void 0,s=0,o=e;s<o.length;s++){if(1==(a=o[s]).k){i=a.v;break}}if(!i)for(var r=0,n=e;r<n.length;r++){var a;if(2==(a=n[r]).k){i=a.v;break}}return TE91.FF17(i)},t.getBox=function(t){var e="";switch(t){case 1:e="v1_img_kuang_bai_png";break;case 2:e="v1_img_kuang_lv_png";break;case 3:e="v1_img_kuang_lan_png";break;case 4:e="v1_img_kuang_zi_png";break;case 5:e="v1_img_kuang_cheng_png";break;case 6:e="v1_img_kuang_hong_png";break;case 7:e="v1_img_kuang_hong2_png";break;default:e="v1_img_kuang_bai_png"}return e},t.FJ93=function(t){var e=[],i=this.FL56(t);for(var s in i){var o=this.isInList(i[s].key,e);if("-1"==o){var r={key:i[s].key,value:0};e.push(r)}else e[o].value=0}return e},t.isInList=function(t,e){for(var i in e)if(e[i].key==t)return i;return"-1"},t.FL56=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={key:o[0],value:o[1]};e.push(r)}return e},t.FL55=function(t,e){void 0===e&&(e=1);var i="";for(var s in t)"0"!=s&&(i+=";"),i+=t[s].key+":"+Number(t[s].value)*e;return i},t}();__reflect(TF82.prototype,"TF82");var IconImmortal=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName=ImmortalIconItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.gpState.visible=!0,"1"==this.data.type?(this.imgState.source="v1_img_biaqoian_lv_png",this.lbState.text="出战"):(this.imgState.source="v1_img_biaqoian_lan_png",this.lbState.text="备战");var t=TE91.FK93(this.data.im.id);this.imgBg.source=N12.getBox(t.base.quality),this.imgIcon.source=t.base.icon,this.lbName.textFlow=M18.FG71(O5.FD52(t.base.name,t.base.quality,1,!0)),this.lbLv.text="Lv"+this.data.im.lv},t}(eui.ItemRenderer);__reflect(IconImmortal.prototype,"IconImmortal");var ImmortalArtIconItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalIconItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEvent,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEvent,this)},t.prototype.clickEvent=function(){var t=App.CM.gtM(O6.B58),e=this.data;t.localArt=e,t.notify(J6.A27)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.B58),e=this.data;this.imgSel.visible=t.localArt.id==e.id,this.gpState.visible=!1,0==e.state||2==e.state?(P16.sGF(this.imgIcon,!0),this.lbLv.visible=!1):(P16.sGF(this.imgIcon,!1),this.lbLv.visible=!0,this.lbLv.text=O3.tr(8279,e.art.lv)),this.imgRed.visible=0<e.red,this.imgBg.source=N12.getBox(e.base.quality),this.imgIcon.source=e.base.icon;var i=e.art.poLv?"+"+e.art.poLv:"";this.lbName.textFlow=M18.FG71(O5.FD52(e.base.name+i,e.base.quality,1,!0))},t}(eui.ItemRenderer);__reflect(ImmortalArtIconItem.prototype,"ImmortalArtIconItem");var ImmortalArtXLItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalArtXLItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){App.CM.gtM(O6.B58).localArt;var t=TC78.sopCName,e=TC78.gIV("extraAttr").split("|")[this.data.key].split(",");this.data.view&&(this.bgImg.source="v1_img_kelashen_paihang_png",this.bgImg.width=550,this.nowAttrLb.textColor=16707295,this.xlLastLb.textColor=16707295,this.extAttrLb.textColor=7716890,this.xlItemGrp.horizontalCenter=-20),1!=this.data.key&&3!=this.data.key||(this.bgImg.source="");var i=TC78.gIV("xilianUnlock"+(Number(this.data.key)+1)).split(";");if(Number(this.data.key)<3)if(this.nowAttrLb.text=t[this.data.key]+": "+this.data.xla+"%",this.isLock()?(this.actGrp.visible=!0,this.noActLb.visible=!1,this.nowAttrLb.text=t[this.data.key]+": "+this.data.xla+"%",this.data.xla>=Number(e[1])?this.extAttrLb.text="(+"+e[2]+"%)":this.extAttrLb.text=""):(this.extAttrLb.text="",this.xlLastLb.text="",this.actGrp.visible=!1,this.noActLb.visible=!0,this.noActLb.text=O3.tr(8447,i[1],i[0])),this.data.nsa){this.actGrp.visible=!0;var s=Math.round(1e4*Math.abs(Number(this.data.xla)-Number(this.data.nsa)))/1e4;this.xlLastLb.text=this.data.nsa+"%",this.data.nsa>=this.data.xla?(this.xlNextLb.textFlow=M18.HTP.parse(O3.tr(8121,"",s+"%")),this.lnImg.source="v1_img_shangsheng_jiantou_png"):(this.xlNextLb.textFlow=M18.HTP.parse(O3.tr(8121,s+"%","")),this.lnImg.source="v1_img_xiajiang_jiantou_png")}else this.actGrp.visible=!1;else if(3==this.data.key)if(this.nowAttrLb.text=t[this.data.key]+": "+this.data.xla,this.isLock()?(this.actGrp.visible=!0,this.noActLb.visible=!1,this.data.xla>=Number(e[1])?this.extAttrLb.text="(+"+e[2]+")":this.extAttrLb.text=""):(this.extAttrLb.text="",this.xlLastLb.text="",this.actGrp.visible=!1,this.noActLb.visible=!0,this.noActLb.text=O3.tr(8447,i[1],i[0])),this.data.nsa){this.actGrp.visible=!0;s=Math.round(1e4*Math.abs(Number(this.data.xla)-Number(this.data.nsa)))/1e4;this.xlLastLb.text=this.data.nsa,this.data.nsa>=this.data.xla?(this.xlNextLb.textFlow=M18.HTP.parse(O3.tr(8121,"",s)),this.lnImg.source="v1_img_shangsheng_jiantou_png"):(this.xlNextLb.textFlow=M18.HTP.parse(O3.tr(8121,s,"")),this.lnImg.source="v1_img_xiajiang_jiantou_png")}else this.actGrp.visible=!1;else if(4==this.data.key)if(this.nowAttrLb.text=t[this.data.key]+": "+this.data.xla,this.isLock()?(this.actGrp.visible=!0,this.noActLb.visible=!1,this.data.xla>=Number(e[1])?this.extAttrLb.text="(+"+e[2]+")":this.extAttrLb.text=""):(this.extAttrLb.text="",this.xlLastLb.text="",this.actGrp.visible=!1,this.noActLb.visible=!0,this.noActLb.text=O3.tr(8447,i[1],i[0])),this.data.nsa){this.actGrp.visible=!0;s=Math.round(1e4*Math.abs(Number(this.data.xla)-Number(this.data.nsa)))/1e4;this.xlLastLb.text=this.data.nsa,this.data.nsa>=this.data.xla?(this.xlNextLb.textFlow=M18.HTP.parse(O3.tr(8121,"",s)),this.lnImg.source="v1_img_shangsheng_jiantou_png"):(this.xlNextLb.textFlow=M18.HTP.parse(O3.tr(8121,s,"")),this.lnImg.source="v1_img_xiajiang_jiantou_png")}else this.actGrp.visible=!1},t.prototype.isLock=function(){var t=App.CM.gtM(O6.B58).localArt,e=Number(this.data.key)+1;for(var i in t.art.xlu)if(t.art.xlu[i]==e)return!0;return!1},t.prototype.startAutoLb=function(t){this.isLock()&&(this.actGrp.visible=!1,this.autoLb.textFlow=M18.HTP.parse(O3.tr(8433,t,"","")))},t.prototype.autoTween=function(){this.autoLb.text="",this.isLock()&&App.THH33.aUE(this.gEffect,"ltqm_mc_rl_1",-30,-60,1,this.tweenFinish.bind(this),this)},t.prototype.tweenFinish=function(){this.isFinish||(this.actGrp.visible=!0)},t.prototype.finishAutoLb=function(t){this.isLock()&&(this.actGrp.visible=!1,this.autoLb.textFlow=M18.HTP.parse(O3.tr(8433,"",t,"")))},t.prototype.lastFinish=function(){if(this.isLock()){App.CM.gtM(O6.B58).localArt;var t=TC78.sopCName,e=TC78.gIV("extraAttr").split("|")[this.data.key].split(","),i=void 0,s=void 0,o=void 0;Number(this.data.key)<3?(i=t[this.data.key]+": ",s=this.data.nsa+"%",o=this.data.nsa>=Number(e[1])?"(+"+e[2]+"%)":""):3==this.data.key?(i=t[this.data.key]+": ",s=this.data.nsa,o=this.data.nsa>=Number(e[1])?"(+"+e[2]+")":""):4==this.data.key&&(i=t[this.data.key]+": ",s=this.data.nsa,o=this.data.nsa>=Number(e[1])?"(+"+e[2]+")":""),this.data.nsa>=this.data.xla?this.autoLb.textFlow=M18.HTP.parse(O3.tr(8433,i,"",s+o)):this.autoLb.textFlow=M18.HTP.parse(O3.tr(8433,i,s,o))}},t}(eui.ItemRenderer);__reflect(ImmortalArtXLItem.prototype,"ImmortalArtXLItem");var ImmortalComItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalComItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnCom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnComEvent,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnGetEvent,this);var t=O3.tr(8171);this.btnGet.textFlow=new Array({text:t,style:{underline:!0}}),this.btnCom.label=O3.tr(8170)},t.prototype.close=function(){this.btnCom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnComEvent,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnGetEvent,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=this.data,e=t.compose,i=N12.gID(e);this.cardIcon.source=i.icon,this.imgGood.setData(i),this.cardBg.source=N12.getBox(i.quality);var s=N12.giC(e),o=t.composenum;this.lbName.text=i.name,o<=s?(this.lbHave.textColor=7716890,this.btnCom.visible=!0,this.btnGet.visible=this.btnGet.touchEnabled=!1,this.lbHave.text=s+"/"+o,this.btnCom.imgNew.visible=!0):(this.lbHave.textColor=14164514,this.btnCom.visible=!1,this.btnGet.visible=this.btnGet.touchEnabled=!0,this.lbHave.text=s+"/"+o)},t.prototype.btnGetEvent=function(){var t=this.data;if(t.showid){var e={sLink:t.showid};TG84.goToDlg(e)}else{var i=O3.tr(8345);P18.sDP(i,!1)}},t.prototype.btnComEvent=function(){App.CM.apF(O6.B58,J6.A30,this.data.id)},t}(eui.ItemRenderer);__reflect(ImmortalComItem.prototype,"ImmortalComItem");var ImmortalCulItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalCulItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){this.hideCZTx()},t.prototype.dataChanged=function(){this.data&&(this.bgImg.source=["xiuwei0_png","xiuwei1_png","xiuwei2_png","xiuwei3_png","xiuwei4_png","xiuwei5_png","xiuwei6_png","xiuwei7_png"][this.data])},t.prototype.showCZTx=function(){App.THH33.rEf(this.gEffect,"xj_mc_zbdz_1"),App.THH33.aUE(this.gEffect,"xj_mc_zbdz_0",-23,-23,-1)},t.prototype.showYSJ=function(){App.THH33.rEf(this.gEffect,"xj_mc_zbdz_0"),App.THH33.aUE(this.gEffect,"xj_mc_zbdz_1",-23,-23,-1)},t.prototype.hideCZTx=function(){App.THH33.rEf(this.gEffect,"xj_mc_zbdz_0"),App.THH33.rEf(this.gEffect,"xj_mc_zbdz_1")},t.prototype.showPZTX=function(){App.THH33.aUE(this.gEffect,"iconSkill",-43,-43,1,null,null,null,.8,.8)},t}(eui.ItemRenderer);__reflect(ImmortalCulItem.prototype,"ImmortalCulItem");var ImmortalEquipItem=function(e){function t(){var t=e.call(this)||this;return t.isShowRedPoint=!0,t.skinName="ImmortalEquipItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=this.data;t.esData?(this.showItemIcon(t.esData.tid),P16.sGF(this.imgIcon,!1),this.gpLv.visible=!0,this.lbLv.text=t.esData.lv):(this.showItemIcon(t.baseData.id),P16.sGF(this.imgIcon,!0),this.gpLv.visible=!1),this.getRedByVP(t.view,t.pos)},t.prototype.showItemIcon=function(t){if(null!=t){var e=TB84.FE15(t);this.lbName.textFlow=M18.FG71(O5.FD52(e.name,5<e.quality?6:Number(e.quality)+1)),this.imgIcon.source=e.icon,this.imgBg.source=TF82.getBox(5<e.quality?6:Number(e.quality)+1)}},t.prototype.getRedByVP=function(t,e){var i=App.CM.gtM(O6.B58);switch(t){case"ImmortalEquipView":this.imgRed.visible=0<i.getForgeRed(e)+i.getLvUpRed(e);break;case"ImmortalSopView":this.imgRed.visible=0<i.getSopRed(e)}},t.prototype.click=function(){if(this.imgSel.visible){var t=this.data;t.esData?App.VM.open(O7.A34,1,t.esData):App.VM.open(O7.A34,2,t.baseData)}},t}(eui.ItemRenderer);__reflect(ImmortalEquipItem.prototype,"ImmortalEquipItem");var ImmortalExpBar=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalExpBarSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.setStarData=function(t,e){this.exp=t,this.lvExp=e,this.setStarUI(),this.setAddNum(0)},t.prototype.showAddAttr=function(t){this.addAttrLb.visible=0<t,this.addAttrLb.text="+"+t},t.prototype.setStarUI=function(){this.labelDisplay.text=this.exp+"/"+this.lvExp,this.imgShort.width=this.exp/this.lvExp*this.width},t.prototype.setAddNum=function(t){var e=1<(this.exp+t)/this.lvExp?1:(this.exp+t)/this.lvExp;this.thumb.width=e*this.width,this.labelDisplay.text=this.exp+t+"/"+this.lvExp},t.prototype.setData=function(t,e){this.exp=t,this.lvExp=e,this.labelDisplay.text=this.exp+"/"+this.lvExp;var i=1<this.exp/this.lvExp?1:this.exp/this.lvExp;this.thumb.width=i*this.width},t.prototype.showMaxUI=function(){this.thumb.width=this.width,this.imgShort.width=0,this.labelDisplay.text=O3.tr(8805)},t.prototype.showNullUI=function(){this.labelDisplay.text="",this.thumb.width=0},t}(eui.ItemRenderer);__reflect(ImmortalExpBar.prototype,"ImmortalExpBar");var ImmortalExpItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=ImmortalExpItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.dataChanged=function(){if("show"==this.data.type)this.lbName.visible=!1,this.gpCt.visible=!1,this.imgIcon.source="v1_img_jia_png",this.imgBg.source=N12.getBox(0);else if("select"==this.data.type){this.lbName.visible=!0,this.gpCt.visible=!0;var t=this.data.expData,e=N12.gID(t.id);this.imgBg.source=N12.getBox(e.quality),this.imgIcon.source=e.icon,this.lbName.text=O3.tr(8151,t.exp)}},t.prototype.onClick=function(){"show"==this.data.type||this.data.type},t.prototype.setImgById=function(t){if(0!=t){var e=N12.gID(t);this.imgBg.source=N12.getBox(e.quality),this.imgIcon.source=e.icon}else this.imgBg.source=N12.getBox(0),this.imgIcon.source="v1_img_jia_png"},t.prototype.setNum=function(t){this.lbCt.text=t+""},t}(eui.ItemRenderer);__reflect(ImmortalExpItem.prototype,"ImmortalExpItem");var ImmortalFlyItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalFlyItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){this.hideCZTx()},t.prototype.dataChanged=function(){},t.prototype.showCZTx=function(){App.THH33.rEf(this.gEffect,"xjfs_mc_nlz0"),App.THH33.aUE(this.gEffect,"xjfs_mc_nlz0",-39,-34,-1)},t.prototype.hideCZTx=function(){App.THH33.rEf(this.gEffect,"xjfs_mc_nlz0")},t.prototype.showPZTX=function(){App.THH33.aUE(this.gEffect,"iconSkill",-43,-43,1,null,null,null,.8,.8)},t}(eui.ItemRenderer);__reflect(ImmortalFlyItem.prototype,"ImmortalFlyItem");var ImmortalFlySkillItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalFlySkillItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickIcon,this)},t.prototype.dataChanged=function(){App.CM.gtM(O6.B58).localClick.im.eSg>=this.data.actdegree?(O5.FB13(this.lbName,this.data.skillname,this.data.quality),this.imgLock.visible=!1,this.imgBlack.visible=!1):(this.lbName.text=O3.tr(1423,this.data.actdegree),this.imgLock.visible=!0,this.imgBlack.visible=!0),this.imgIcon.source=this.data.icon},t.prototype.onClickIcon=function(){App.CM.apF(O6.C12,O8.A20,this.data)},t}(eui.ItemRenderer);__reflect(ImmortalFlySkillItem.prototype,"ImmortalFlySkillItem");var ImmortalIconItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalIconItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEvent,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEvent,this)},t.prototype.clickEvent=function(){var t=App.CM.gtM(O6.B58),e=this.data;t.localClick=e,t.notify(J6.A36)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.B58),e=this.data;this.imgSel.visible=t.localClick.id==e.id,this.gpState.visible=!1,0==e.state||5==e.state?(P16.sGF(this.imgIcon,!0),this.lbLv.visible=!1):(P16.sGF(this.imgIcon,!1),this.lbLv.visible=!0,this.changelbLv(e,t.localPanel),1==e.state?(this.gpState.visible=!0,this.lbState.text=O3.tr(8174),this.imgState.source="v1_img_biaqoian_lv_png"):2!=e.state&&3!=e.state||(this.gpState.visible=!0,this.lbState.text=O3.tr(8175))),this.changeRed(e,t.localPanel),this.imgBg.source=N12.getBox(e.bsa.base.quality),this.imgIcon.source=e.bsa.base.icon,this.lbName.textFlow=M18.FG71(O5.FD52(e.bsa.base.name,e.bsa.base.quality,1,!0))},t.prototype.changelbLv=function(t,e){this.lbLv.text=O3.tr(8279,t.im.lv)},t.prototype.changeRed=function(t,e){var i=App.CM.gtM(O6.B58);if(0==t.state)this.imgRed.visible=!0;else if(5==t.state)this.imgRed.visible=!1;else switch(e){case"ImmortalLvView":var s=i.getLvRed(t.im)+i.ZP4(t.bsa.base)+i.getFlyRed(t);this.imgRed.visible=0<s;break;case"ImmortalStarView":s=i.getStarRed(t);this.imgRed.visible=0<s;break;case"ImmortalIntView":s=i.getIntRed(t);this.imgRed.visible=0<s}},t}(eui.ItemRenderer);__reflect(ImmortalIconItem.prototype,"ImmortalIconItem");var ImmortalIntItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalIntItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.dataChanged=function(){},t.prototype.showCZTx=function(){App.THH33.aUE(this.gEffect,"xj_mc_hm",-62,-90,-1)},t.prototype.hideCZTx=function(){App.THH33.rEf(this.gEffect,"xj_mc_hm")},t}(eui.ItemRenderer);__reflect(ImmortalIntItem.prototype,"ImmortalIntItem");var ImmortalLvExpItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalLvExpItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnReduce.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS93,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAddEvent,this)},t.prototype.close=function(){this.btnReduce.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS93,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAddEvent,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=this.data;this.id=t.id,this.exp=t.exp,this.fn=t.fn;var e=N12.gID(t.id);this.cardIcon.source=e.icon,this.imgGood.setData(e),this.cardBg.source=N12.getBox(e.quality);var i=N12.giC(t.id);this.lbName.textFlow=M18.FG71(O5.FD52(e.name,e.quality,1,!0)),this.lbHave.textFlow=O3.tr2(8563,i),this.useNum=t.use,this.changeExpUI()},t.prototype.ZS93=function(){N12.giC(this.id);0<this.useNum&&this.useNum--,this.changeExpUI()},t.prototype.btnAddEvent=function(){var t=N12.giC(this.id);this.useNum<t?this.useNum++:App.VM.open(O7.G87,this.id,1),this.changeExpUI()},t.prototype.changeExpUI=function(){this.lbNum.text=""+this.useNum,this.lbExpNum.textFlow=O3.tr2(8564,this.useNum*this.exp),this.fn()},t}(eui.ItemRenderer);__reflect(ImmortalLvExpItem.prototype,"ImmortalLvExpItem");var ImmortalSkillItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=ImmortalSkillItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showSkill,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showSkill,this)},t.prototype.dataChanged=function(){if(1==this.data.data.type){this.grpLv.visible=!0,this.imgZhu.source="v1_fonts_zhu_png";var t=this.data.data;this.imgIcon.source=t.icon,this.imgBg.source=THH1.FB74(t.quality);t.skillname;O5.FB13(this.lbName,t.skillname,t.quality,1);var e=this.data.im&&this.data.im.aSg?this.data.im.aSg:1;this.lbLv.text=1<e?e+"":""}else{this.grpLv.visible=!1,this.imgZhu.source="v1_fonts_zhu2_png";t=this.data.data;this.imgIcon.source=t.icon,this.imgBg.source=THH1.FB74(t.quality),O5.FB13(this.lbName,t.skillname,t.quality,1)}},t.prototype.showSkill=function(){var t=this.data;App.VM.open(O7.B55,t)},t}(eui.ItemRenderer);__reflect(ImmortalSkillItem.prototype,"ImmortalSkillItem");var ImmortalStarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ImmortalStarItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.dataChanged=function(){},t.prototype.showCZTx=function(){this.bgImg.visible=!1,App.THH33.aUE(this.gEffect,"xinghun_1",-100,-100,-1)},t.prototype.hideCZTx=function(){this.bgImg.visible=!0,App.THH33.rEf(this.gEffect,"xinghun_1")},t.prototype.showPZTX=function(){App.THH33.aUE(this.gEffect,"xinghun_2",-100,-100,1)},t.prototype.starTween=function(){egret.Tween.get(this.bgImg).to({verticalCenter:-2},500).to({verticalCenter:0},500).pause()},t}(eui.ItemRenderer);__reflect(ImmortalStarItem.prototype,"ImmortalStarItem");var ImmortalAllPowerView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalShareSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.baseS=[this.base0,this.base1,this.base2],this.starS=[this.star0,this.star1,this.star2],this.intS=[this.int0,this.int1,this.int2],this.culS=[this.cul0,this.cul1,this.cul2],this.dlg.title=O3.tr(8131),this.lbStr0.text=O3.tr(8275),this.lbStr1.text=O3.tr(8276),this.lbStr2.text=O3.tr(8277),this.lbStr3.text=O3.tr(8278),this.imgCH.visible=!1,this.nameGrp.visible=!1,this.skillGroup.visible=!1,this.lvGrp.visible=!1,this.intBfb.visible=this.intBfb.includeInLayout=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=App.CM.gtM(O6.B58);this.ZL89(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZL89=function(t){var e=TE91.FL55(t.getAllLvList());this.setDataBySLS(e,this.baseS);var i=TE91.FL55(t.ZS89());this.setDataBySLS(i,this.starS);var s=TE91.FL55(t.ZX37());this.setDataBySLS(s,this.intS);var o=TE91.FL55(TE91.FK98(t.cLv,t.cSr));this.setDataBySLS(o,this.culS),this.showPower(t),this.ZJ8()},t.prototype.ZJ8=function(){var t=App.CM.gtM(O6.B58).ZE26();this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var e={id:t.bsa.base.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.immortalObj.setData(e,this.wGroup),this.immortalObj.action=Action.Stand},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.isInList=function(t,e){for(var i in e)if(e[i].key==t)return i;return"-1"},t.prototype.setDataBySLS=function(t,e,i){void 0===i&&(i=1);var s=t.split(";");for(var o in s){var r=P7.FM6(P7.str2kv(s[o])).split(":");e[o].textFlow=M18.HTP.parse(O3.tr(8266,r[0]+"：",Math.ceil(Number(r[1])*i)))}},t.prototype.showPower=function(t){var e=t.ZX38();this.score.text=Math.floor(e)+""},t.prototype.closeSelf=function(){App.VM.close(O7.A56)},t}(BaseEuiView);__reflect(ImmortalAllPowerView.prototype,"ImmortalAllPowerView");var ImmortalArtAutoSopView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sopType=1,i.sopNum=10,i.sopIndex=0,i.skinName=ImmortalArtAutoSopSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.showS=[this.show0,this.show1,this.show2,this.show3,this.show4],this.lastS=[this.last0,this.last1,this.last2,this.last3,this.last4],this.dlg.title=O3.tr(8417),this.strLb6.text=O3.tr(8445),this.strLb0.text=O3.tr(8418),this.strLb1.text=O3.tr(8419),this.strLb2.text=O3.tr(8420,10),this.strLb3.text=O3.tr(8420,20),this.strLb4.text=O3.tr(8420,50),this.strLb5.text=O3.tr(8424),this.sopBtn.label=O3.tr(8428),this.strLb7.text=O3.tr(8432)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.showLbUI(),this.ptGrp.visible=!0,this.jzGrp.visible=!1,this.sopType=1,this.sopXZBtn.label=O3.tr(8427),this.ckPTDot.selected=!0,this.sopStartGrp.visible=!0,this.sopIngGrp.visible=!1,this.ZS94(10),this.sopXZBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX42,this),this.sopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sopBtnEvent,this),this.ckPTDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getOneSop.bind(this,0),this),this.ckGJDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getOneSop.bind(this,1),this),this.ck10Dot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS94.bind(this,10),this),this.ck20Dot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS94.bind(this,20),this),this.ck50Dot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS94.bind(this,50),this),this.sopWCBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX41,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF43?e[0]==P4.A51&&this.ZHH77(t):t instanceof THH9&&this.ZS94(this.sopNum)},t.prototype.ZHH77=function(t){this.sopStartGrp.visible=!1,this.sopIngGrp.visible=!0,null==this.timerHandler&&(this.startDown(),this.timerHandler=App.K16.doTimer(2e3,this.sopNum+1,this.GY14,this,this.finishTween.bind(this),this))},t.prototype.getVByKey=function(t,e){return e&&0<=e[t]?e[t]:0},t.prototype.startDown=function(){this.strLb8.visible=!1,this.sopWCBtn.label=O3.tr(8434),this.autoNum.text="";var t=App.CM.gtM(O6.B58),e=t.rs;for(var i in this.sopIndex=0,this.showS){var s=Number(i)+1,o={key:i,xla:this.getVByKey(s,e[0].bf),nsa:this.getVByKey(s,e[0].af),view:1};this.showS[i].isFinish=!1,this.showS[i].data=o,this.showS[i].startAutoLb("0")}for(var i in this.lastS){s=Number(i)+1,o={key:i,xla:this.getVByKey(s,e[0].bf),nsa:this.getVByKey(s,t.localArt.art.xla),view:1};this.lastS[i].data=o,this.lastS[i].startAutoLb("???????")}},t.prototype.GY14=function(){var t=App.CM.gtM(O6.B58),e=t.rs;if(this.sopIndex<this.sopNum){for(var i in this.sopIndex++,this.showS){var s=Number(i)+1,o={key:i,xla:this.getVByKey(s,e[this.sopIndex-1].bf),nsa:this.getVByKey(s,e[this.sopIndex-1].af),view:1};this.showS[i].data=o,this.showS[i].actGrp.visible=!1,this.showS[i].autoTween()}this.autoNum.textFlow=M18.HTP.parse(O3.tr(8431,this.sopIndex))}else for(var i in this.showS){s=Number(i)+1,o={key:i,xla:this.getVByKey(s,t.localArt.art.xla),nsa:this.getVByKey(s,e[this.sopIndex-1].af),view:1};this.showS[i].data=o,this.showS[i].isFinish=!0,this.showS[i].actGrp.visible=!1,this.showS[i].finishAutoLb(O3.tr(8429))}},t.prototype.finishTween=function(){this.autoNum.textFlow=M18.HTP.parse(O3.tr(8431,this.sopNum)),this.sopWCBtn.label=O3.tr(8435);var t=App.CM.gtM(O6.B58),e=t.rs;for(var i in this.showS){var s=Number(i)+1,o={key:i,xla:this.getVByKey(s,t.localArt.art.xla),nsa:this.getVByKey(s,e[this.sopNum-1].af),view:1};this.showS[i].data=o,this.showS[i].isFinish=!0,this.showS[i].actGrp.visible=!1,this.showS[i].finishAutoLb(O3.tr(8429))}for(var i in this.lastS)this.lastS[i].lastFinish();this.strLb8.visible=!0,this.isSopNew(t)?(this.strLb8.text=O3.tr(8430),this.strLb8.textColor=16707295):(this.strLb8.text=O3.tr(8504),this.strLb8.textColor=14164514),this.cTH()},t.prototype.isSopNew=function(t){var e=t.rs;for(var i in this.lastS){var s=Number(i)+1;if(this.getVByKey(s,e[0].bf)!=this.getVByKey(s,t.localArt.art.xla))return!0}return!1},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.close=function(){s.prototype.close.call(this),this.cTH()},t.prototype.getOneSop=function(t){t?(this.ckGJDot.selected=!0,this.ckPTDot.selected=!1):(this.ckPTDot.selected=!0,this.ckGJDot.selected=!1)},t.prototype.ZS94=function(t){switch(t){case 10:this.ck10Dot.selected=!0,this.ck20Dot.selected=!1,this.ck50Dot.selected=!1;break;case 20:this.ck10Dot.selected=!1,this.ck20Dot.selected=!0,this.ck50Dot.selected=!1;break;case 50:this.ck10Dot.selected=!1,this.ck20Dot.selected=!1,this.ck50Dot.selected=!0}var e=TC78.gIV("xilianItem1").split(":"),i=TC78.gIV("xilianItem2").split(":"),s=N12.giC(e[0]),o=N12.giC(i[0]);this.sopNum=t,s>=Number(e[1])*t?this.sopPTCostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",s+"/"+Number(e[1])*t)):this.sopPTCostLb.textFlow=M18.HTP.parse(O3.tr(8121,s,"/"+Number(e[1])*t)),o>=Number(i[1])*t?this.sopGJCostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",o+"/"+Number(i[1])*t)):this.sopGJCostLb.textFlow=M18.HTP.parse(O3.tr(8121,o,"/"+Number(i[1])*t))},t.prototype.ZX41=function(){null!=this.timerHandler?this.finishTween():(this.sopIngGrp.visible=!1,this.sopStartGrp.visible=!0)},t.prototype.ZX42=function(){2==this.sopType?(this.ptGrp.visible=!0,this.jzGrp.visible=!1,this.sopType=1,this.sopXZBtn.label=O3.tr(8427)):1==this.sopType&&(this.ptGrp.visible=!1,this.jzGrp.visible=!0,this.sopType=2,this.sopXZBtn.label=O3.tr(8426))},t.prototype.sopBtnEvent=function(){var t=App.CM.gtM(O6.B58).localArt.id,e=this.ckPTDot.selected?1:2,i=this.ck10Dot.selected?10:this.ck20Dot.selected?20:50,s=this.getKeys(),o={arId:t,way:e,num:i,keys:s,conds:this.getConds()};if(0!=s.length)if(1==e){var r=TC78.gIV("xilianItem1").split(":"),n=N12.giC(r[0]);n>=Number(r[1])*i?App.CM.apF(O6.B58,J6.A3,o):App.VM.open(O7.G87,r[0],Number(r[1])*i-Number(n))}else{var a=TC78.gIV("xilianItem2").split(":"),h=N12.giC(a[0]);h>=Number(a[1])*i?App.CM.apF(O6.B58,J6.A3,o):App.VM.open(O7.G87,a[0],Number(a[1])*i-Number(h))}else{var p=O3.tr(8425);P18.sDP(p,!1)}},t.prototype.getKeys=function(){var t="";if(1==this.sopType)for(var e=0;e<5;e++)this["ckDotPT"+e].selected&&(t.length&&(t+=","),t+=String(Number(e)+1));else for(e=0;e<5;e++)this["ckDotJZ"+e].selected&&(t.length&&(t+=","),t+=String(Number(e)+1));return t},t.prototype.getConds=function(){var t="";if(1==this.sopType);else for(var e=0;e<5;e++)if(this["ckDotJZ"+e].selected){t.length&&(t+=",");var i=this["jzInput"+e].text?this["jzInput"+e].text:this["jzInput"+e].prompt;t+=Number(i)}return t},t.prototype.showLbUI=function(){var t=TC78.getXlaID(),e=TC78.gIV("extraAttr").split("|"),i=t.split(";");for(var s in i){var o=e[s].split(","),r=P7.FM5(P7.str2kv(i[s])).split(":");this["ptStrLb"+s].text=O3.tr(8421,r[0]),this["jzStrLb"+s].text=O3.tr(8422,r[0]),Number(s)<=2?this["jzStrJC"+s].textFlow=M18.HTP.parse(O3.tr(8423,o[1]+"%",r[0],o[2]+"%")):this["jzStrJC"+s].textFlow=M18.HTP.parse(O3.tr(8423,o[1],r[0],o[2])),this["jzInput"+s].textDisplay.textAlign="center"}var n=N12.gID(TC78.gIV("xilianItem1").split(":")[0]),a=N12.gID(TC78.gIV("xilianItem2").split(":")[0]);this.sopPTItem.setData(n),this.sopGJItem.setData(a)},t.prototype.closeSelf=function(){App.VM.close(O7.A20)},t}(BaseEuiView);__reflect(ImmortalArtAutoSopView.prototype,"ImmortalArtAutoSopView");var ImmortalArtLvView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.viewName="lvView",i.skinName=ImmortalArtLvSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ImmortalArtIconItem,this.lbStr1.text=O3.tr(8395),this.activeBtn.label=O3.tr(8396),this.lbStr.text=O3.tr(8401),this.LbNameL.text=O3.tr(8402),this.LbNameN.text=O3.tr(8403),this.lbStr3.text=O3.tr(8405),this.lvUpBtn.label=O3.tr(8404)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var i=App.CM.gtM(O6.B58),s=i.ZC68(this.viewName);i.localArt?this._curArt?this._curArt&&this._curArt.id!=i.localArt.id&&(this._curArt=null,this._curArt=i.localArt):this._curArt=i.localArt:(i.localArt=s[0],this._curArt=i.localArt),i.localArtPanel=this.viewName,this.ZHH77(i),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.lvUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lvUpBtnEvent,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this)},t.prototype.endScroller=function(){if(App.CM.gtM(O6.B58).scrollerH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&0<r.red){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&0<n.red){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.ZP7=function(){App.VM.open(O7.A57)},t.prototype.ZS95=function(){var t=App.CM.gtM(O6.B58).localArt,e=t.base.itemnum.split(";");for(var i in e){var s=e[i].split(":"),o=s[0],r=N12.giC(o),n=Number(s[1]);if(r<n)return void App.VM.open(O7.G87,o,Number(n)-r)}App.CM.apF(O6.B58,J6.A5,t.id)},t.prototype.lvUpBtnEvent=function(){var t=App.CM.gtM(O6.B58).localArt,e=TC78.FE9(Number(t.art.lv)+1,t.base.leveltype),i=TC78.gIV("lvItem"),s=N12.giC(i),o=e.cost;Number(s)>=Number(o)?App.CM.apF(O6.B58,J6.A13,t.id):App.VM.open(O7.G87,i,Number(o)-s)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r.prototype.uBM.call(this,t,e),t instanceof TF43)switch(e[0]){case P4.B79:t.localArt=t.ZD26(),this._curArt=null,this._curArt=t.localArt,this.ZHH77(t);break;case J6.A27:this._curArt=null,this._curArt=t.localArt,this.ZHH77(t);break;case P4.F97:t.localArt=t.ZD26(),this._curArt=null,this._curArt=t.localArt,this.ZHH77(t)}else if(t instanceof THH9){var s=App.CM.gtM(O6.B58);this.ZHH77(s)}else if(t instanceof TG12&&e[0]==P4.S88){var o=App.CM.gtM(O6.B58);this.updataPower(o)}},t.prototype.ZHH77=function(t){this.itemScroller.viewport.scrollH=t.scrollerH;var e=t.ZC68(this.viewName);P7.ObjectSet(this._itemArray.source,e),this._itemArray.refresh();var i=t.localArt;this.ZP8(i),this.updataPower(t),this.endScroller(),this.GY15(i)},t.prototype.updataPower=function(t){this.score1.text=t.ZJ7(t.localArt)+""},t.prototype.ZP8=function(t){0==t.state||2==t.state?this.showNoActUI(t):this.showLvUI(t)},t.prototype.showNoActUI=function(t){this.noActiveGrp.visible=this.noActiveGroup.visible=!0,this.nameGrp.visible=this.nameGrp.visible=!1,this.activeGroup.visible=!1;var e={type:"intAttr",data:t.base.attr};this.artNDataG0.data=e;var i=t.base.itemnum.split(";");for(var s in i){var o=i[s].split(":"),r=o[0],n=N12.gID(r),a=N12.giC(r),h=Number(o[1]);this["activeItem"+s].setData(n),this["activecostLb"+s].textFlow=h<=a?(this.activeBtn.imgNew.visible=!0,M18.HTP.parse(O3.tr(8121,"",a+"/"+h))):(this.activeBtn.imgNew.visible=!1,M18.HTP.parse(O3.tr(8121,a,"/"+h)))}},t.prototype.showLvUI=function(t){var e,i=App.CM.gtM(O6.B58);this.noActiveGrp.visible=this.noActiveGroup.visible=!1,this.nameGrp.visible=this.nameGrp.visible=!0,this.activeGroup.visible=!0,this.lbName.text=t.art.lv+"",this.lbName0.text=O3.tr(8149,""),this.lvUpBtn.imgNew.visible=0<i.getArtLvRed(t.id);var s={type:"intAttr",data:0<t.art.lv?(e=TC78.FE9(t.art.lv,t.base.leveltype)).attr:(e=TC78.FE9(1,t.base.leveltype),TF82.FL55(TF82.FJ93(e.attr)))};if(this.artLDataG.data=s,t.art.lv>=TC78.lvMax)this.artLGrp.horizontalCenter=0,this.imgJt.visible=!1,this.artNGrp.visible=!1;else{this.artLGrp.horizontalCenter=-100,this.imgJt.visible=!0,this.artNGrp.visible=!0;var o={type:"intAttr",data:TC78.FE9(Number(t.art.lv)+1,t.base.leveltype).attr};this.artNDataG.data=o}if(t.art.lv>=TC78.lvMax)this.lvUpBtn.enabled=!1,P16.sGF(this.lvUpBtn,!0),this.lbStr3.visible=this.lbStr3.includeInLayout=!1,this.lvUpItem.visible=this.lvUpItem.includeInLayout=!1,this.lvUpCostLb.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8406),""));else{this.lbStr3.visible=this.lbStr3.includeInLayout=!0,this.lvUpItem.visible=this.lvUpItem.includeInLayout=!0,this.lvUpBtn.enabled=!0,P16.sGF(this.lvUpBtn,!1);var r=TC78.FE9(Number(t.art.lv)+1,t.base.leveltype),n=TC78.gIV("lvItem"),a=N12.gID(n),h=N12.giC(n),p=r.cost;this.lvUpItem.setData(a),this.lvUpCostLb.textFlow=p<=h?M18.HTP.parse(O3.tr(8121,"",h+"/"+p)):M18.HTP.parse(O3.tr(8121,h,"/"+p))}},t.prototype.GY15=function(t){var e={700:3,701:7,702:8,703:9,704:2,705:1,706:5,707:0,708:4,709:6},i=e[t.id];if(this.showIdx!=i){for(var s in this.showIdx=i,e){var o="sq_mc_sysqty_"+e[s];App.THH33.rEf(this.wGroup,o)}var r="sq_mc_sysqty_"+i;App.THH33.aUE(this.wGroup,r,-185,-195)}},t.prototype.close=function(){this._itemArray.removeAll(),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.lvUpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.lvUpBtnEvent,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this)},t}(BaseEuiView);__reflect(ImmortalArtLvView.prototype,"ImmortalArtLvView");var ImmortalArtMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.A76,O7.D6,"ImmortalArtView",this.content),App.VM.rgS(O7.A76,O7.B59,"ImmortalArtLvView",this.content),App.VM.rgS(O7.A76,O7.B60,"ImmortalArtXLView",this.content);var t=[O3.tr(8389),O3.tr(8390),O3.tr(8391)],e=[O7.B59,O7.D6,O7.B60];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.B59;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){this.viewId=t;App.CM.gtM(O6.B58);switch(t){case O7.D6:this.btnList.ZM66(t),this.title=O3.tr(8393);break;case O7.B59:this.btnList.ZM66(t),this.title=O3.tr(8392);break;case O7.B60:this.btnList.ZM66(t),this.title=O3.tr(8394)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this);var i=App.CM.gtM(O6.B58);i.localArt=null,i.localArtPanel=null,i.scrollerH=0},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B58);this.btnList.ZHH58(O7.D6,t.ZX32()),this.btnList.ZHH58(O7.B59,t.ZP2()),this.btnList.ZHH58(O7.B60,t.ZL87())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t.prototype.openHelpView=function(){var t,e;e=this.viewId==O7.D6?(t=O3.tr(8441),O3.tr(8442)):this.viewId==O7.B59?(t=O3.tr(8441),O3.tr(8442)):this.viewId==O7.B60?(t=O3.tr(8443),O3.tr(8444)):(t=O3.tr(8441),O3.tr(8442));var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t}(BasePanelView);__reflect(ImmortalArtMainView.prototype,"ImmortalArtMainView");var ImmortalArtPowerView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalArtPowerSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.baseS=[this.base0,this.base1,this.base2,this.base3,this.base4],this.lvS=[this.lv0,this.lv1,this.lv2],this.sopS=[this.sop0,this.sop1,this.sop2,this.sop3,this.sop4],this.dlg.title=O3.tr(8468),this.lbStr1.text=O3.tr(8471),this.lbStr2.text=O3.tr(8472)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=App.CM.gtM(O6.B58);i.getArtById(i.localArt.id)?(this.lbStr0.text=O3.tr(8470),this.ZX43(i.localArt)):(this.lbStr0.text=O3.tr(8469),this.ZP10(i.localArt)),this.showPower()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZP10=function(t){this.grp2.visible=!1,this.grp3.visible=!1,this.lvGrp.visible=!1,this.noActiveGrp.visible=!0,this.lbName.text=t.base.name,this.imgIcon.source=t.base.iconbig,this.setDataBySLS(t.base.attr,this.baseS),this.showBaseAttr(t.base.attr)},t.prototype.ZX43=function(t){var e=App.CM.gtM(O6.B58);this.grp2.visible=!0,this.grp3.visible=!0,this.lvGrp.visible=!0,this.noActiveGrp.visible=!1,this.lbName.text=t.base.name,this.imgIcon.source=t.base.iconbig,this.lbLv0.text=t.art.lv+"",this.lbLv.text=O3.tr(8149,"");var i=[t.base.attr,t.art.poLv?TC78.FC38(t.base.polishtype,t.art.poLv).attr:""],s=TE91.FL55(e.getAttrList(i));this.setDataBySLS(s,this.baseS),this.showBaseAttr(s);var o=t.art.lv?TC78.FE9(t.art.lv,t.base.leveltype).attr:TE91.FL55(TE91.FJ93(TC78.FE9(1,t.base.leveltype).attr));this.setDataBySLS(o,this.lvS);var r=e.ZL88(t.art),n=TE91.FL55(e.ZS90(t.art.xla,r));this.setDataBySLS(n,this.sopS)},t.prototype.showBaseAttr=function(t){var e=t.split(";");for(var i in this.baseS)e[i]?this.baseS[i].visible=this.baseS[i].includeInLayout=!0:this.baseS[i].visible=this.baseS[i].includeInLayout=!1},t.prototype.setDataBySLS=function(t,e,i){void 0===i&&(i=1);var s=t.split(";");for(var o in s.sort(function(t,e){return Number(t.split(":")[0])-Number(e.split(":")[0])}),s){var r=P7.FM6(P7.str2kv(s[o])).split(":"),n=s[o].split(":"),a="";a=Number(n[0])==avatar.AttributeKey.CHUANCI||Number(n[0])==avatar.AttributeKey.FANGHU?Number(r[1]).toFixed(2):String(Math.round(Number(r[1]))),e[o].textFlow=M18.HTP.parse(O3.tr(8266,r[0]+"：",a))}},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t.prototype.showPower=function(){var t=App.CM.gtM(O6.B58),e=t.ZJ7(t.localArt);this.score.text=Math.floor(e)+""},t.prototype.closeSelf=function(){App.VM.close(O7.A57)},t}(BaseEuiView);__reflect(ImmortalArtPowerView.prototype,"ImmortalArtPowerView");var ImmortalArtTipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalArtTipSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.strLb.text=O3.tr(8477)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),1==t[0]?(this.updateJCView(),this.dlg.title=O3.tr(8413)):2==t[0]&&(this.updateSXView(t[1]),this.dlg.title=O3.tr(8415))},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZHH77=function(t){},t.prototype.updateJCView=function(){this.jcGrp.visible=!0,this.sxGrp.visible=!1;var t=TC78.getXlaID(),e=TC78.gIV("extraAttr").split("|"),i=TC78.sopCName,s=t.split(";");for(var o in s){var r=e[o].split(","),n=P7.FM5(P7.str2kv(s[o])).split(":");Number(o)<=2?this["jc"+o].textFlow=M18.HTP.parse(O3.tr(8414,i[o],r[2]+"%",n[0],r[1]+"%")):this["jc"+o].textFlow=M18.HTP.parse(O3.tr(8414,i[o],r[2],n[0],r[1]))}},t.prototype.updateSXView=function(t){this.jcGrp.visible=!1,this.sxGrp.visible=!0;var e=TC78.getXlaID(),i=(TC78.gIV("extraAttr").split("|"),TC78.sopCName),s=e.split(";");for(var o in s){var r=TC78.FJ88(t,Number(o)+1).split(";");P7.FM5(P7.str2kv(s[o])).split(":");Number(o)<=2?this["sx"+o].textFlow=M18.HTP.parse(O3.tr(8416,i[o],r[1]+"%")):this["sx"+o].textFlow=M18.HTP.parse(O3.tr(8416,i[o],r[1]))}},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.closeSelf=function(){App.VM.close(O7.B19)},t}(BaseEuiView);__reflect(ImmortalArtTipView.prototype,"ImmortalArtTipView");var ImmortalArtView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.viewName="sopView",i.skinName=ImmortalArtSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ImmortalArtIconItem,this.lbStr1.text=O3.tr(8395),this.activeBtn.label=O3.tr(8396),this.lbStr.text=O3.tr(8397),this.strLb2.text=O3.tr(8399),this.forgeBtn.label=O3.tr(8400)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var i=App.CM.gtM(O6.B58),s=i.ZC68(this.viewName);i.localArt?this._curArt?this._curArt&&this._curArt.id!=i.localArt.id&&(this._curArt=null,this._curArt=i.localArt):this._curArt=i.localArt:(i.localArt=s[0],this._curArt=i.localArt),i.localArtPanel=this.viewName,this.ZHH77(i),this.ckDotEvent(),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.forgeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX44,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.ckDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvent,this)},t.prototype.ckDotEvent=function(){this.imgJt1.visible=this.lvAStrLb.visible=!this.ckDot.selected},t.prototype.endScroller=function(){if(App.CM.gtM(O6.B58).scrollerH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&0<r.red){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&0<n.red){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.ZP7=function(){App.VM.open(O7.A57)},t.prototype.ZS95=function(){var t=App.CM.gtM(O6.B58).localArt,e=t.base.itemnum.split(";");for(var i in e){var s=e[i].split(":"),o=s[0],r=N12.giC(o),n=Number(s[1]);if(r<n)return void App.VM.open(O7.G87,o,Number(n)-r)}App.CM.apF(O6.B58,J6.A5,t.id)},t.prototype.ZX44=function(){var t=App.CM.gtM(O6.B58).localArt,e=TC78.FC38(t.base.polishtype,Number(t.art.poLv)+1),i=e.itemnum.split(";");if(this.ckDot.selected){var s=TC78.gIV("protectItem"),o=N12.gID(s),r=N12.giC(s),n=e.protectnum;if(this.proItem.setData(o),r<n)return void App.VM.open(O7.G87,s,Number(n)-r);for(var a in i){var h=(u=i[a].split(":"))[0],p=N12.gID(h),l=N12.giC(h),c=Number(u[1]);if(this["forgeItem"+a].setData(p),l<c)return void App.VM.open(O7.G87,h,Number(c)-l)}App.CM.apF(O6.B58,J6.A7,t.id,1)}else{for(var a in i){var u;h=(u=i[a].split(":"))[0],p=N12.gID(h),l=N12.giC(h),c=Number(u[1]);if(this["forgeItem"+a].setData(p),l<c)return void App.VM.open(O7.G87,h,Number(c)-l)}var d=function(){App.CM.apF(O6.B58,J6.A7,t.id,0)},v=TC78.FL81();t.art.lv?App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(8519,t.art.lv,t.art.lv>v?t.art.lv-v:0)),this,d):d()}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r.prototype.uBM.call(this,t,e),t instanceof TF43)switch(e[0]){case J6.A27:this._curArt=null,this._curArt=t.localArt,this.ZHH77(t);break;case P4.B79:case P4.D36:t.localArt=t.ZD26(),this._curArt=null,this._curArt=t.localArt,this.ZHH77(t)}else if(t instanceof THH9){var s=App.CM.gtM(O6.B58);this.ZHH77(s)}else if(t instanceof TG12&&e[0]==P4.S88){var o=App.CM.gtM(O6.B58);this.updataPower(o)}},t.prototype.ZHH77=function(t){this.itemScroller.viewport.scrollH=t.scrollerH;var e=t.ZC68(this.viewName);P7.ObjectSet(this._itemArray.source,e),this._itemArray.refresh();var i=t.localArt;this.ZP8(i),this.updataPower(t),this.endScroller(),this.GY15(i)},t.prototype.updataPower=function(t){this.score1.text=t.ZJ7(t.localArt)+""},t.prototype.ZP8=function(t){0==t.state||2==t.state?this.showNoActUI(t):this.showLvUI(t)},t.prototype.showNoActUI=function(t){this.noActiveGrp.visible=this.noActiveGroup.visible=!0,this.nameGrp.visible=this.nameGrp.visible=!1,this.activeGroup.visible=!1;var e={type:"intAttr",data:t.base.attr};this.artNDataG0.data=e;var i=t.base.itemnum.split(";");for(var s in i){var o=i[s].split(":"),r=o[0],n=N12.gID(r),a=N12.giC(r),h=Number(o[1]);this["activeItem"+s].setData(n),this["activecostLb"+s].textFlow=h<=a?(this.activeBtn.imgNew.visible=!0,M18.HTP.parse(O3.tr(8121,"",a+"/"+h))):(this.activeBtn.imgNew.visible=!1,M18.HTP.parse(O3.tr(8121,a,"/"+h)))}},t.prototype.showLvUI=function(t){var e=App.CM.gtM(O6.B58);this.noActiveGrp.visible=this.noActiveGroup.visible=!1,this.nameGrp.visible=this.nameGrp.visible=!1,this.activeGroup.visible=!0;var i,s=0<t.art.poLv?"+"+t.art.poLv:"";this.LbNameL.text=t.base.name+s,this.LbNameN.text=t.base.name+"+"+(Number(t.art.poLv)+1),this.lbName.text=t.art.lv+"",this.lbName0.text=O3.tr(8149,""),this.forgeBtn.imgNew.visible=0<e.ZS92(t.id);var o={type:"intAttr",data:0<t.art.poLv?(i=TC78.FC38(t.base.polishtype,t.art.poLv)).attr:(i=TC78.FC38(t.base.polishtype,1),TF82.FL55(TF82.FJ93(i.attr)))};if(this.artLDataG.data=o,t.art.poLv>=TC78.polishMax)this.artLGrp.horizontalCenter=0,this.imgJt.visible=!1,this.artNGrp.visible=!1;else{this.artLGrp.horizontalCenter=-100,this.imgJt.visible=!0,this.artNGrp.visible=!0;var r={type:"intAttr",data:TC78.FC38(t.base.polishtype,Number(t.art.poLv)+1).attr};this.artNDataG.data=r}if(t.art.poLv>=TC78.polishMax)this.forgeGrp.visible=!1,this.forgeBtn.enabled=!1,this.forGrp.verticalCenter=0,this.ckDot.visible=this.ckDot.includeInLayout=!1,this.proItem.visible=this.proItem.includeInLayout=!1,this.proCostLb.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8406),"")),this.proTipGrp.visible=!1,P16.sGF(this.forgeBtn,!0);else{this.forgeGrp.visible=!0,this.forgeBtn.enabled=!0,this.forGrp.verticalCenter=60,this.ckDot.visible=this.ckDot.includeInLayout=!0,this.proItem.visible=this.proItem.includeInLayout=!0,this.proTipGrp.visible=!0,this.lvBStrLb.text=O3.tr(8398,t.art.lv);var n=TC78.FL81();this.lvAStrLb.text=0<=t.art.lv-n?t.art.lv-n+"":"0",P16.sGF(this.forgeBtn,!1);var a=TC78.FC38(t.base.polishtype,Number(t.art.poLv)+1),h=a.itemnum.split(";");for(var p in h){var l=h[p].split(":"),c=l[0],u=N12.gID(c),d=N12.giC(c),v=Number(l[1]);this["forgeItem"+p].setData(u),this["forgecostLb"+p].textFlow=v<=d?M18.HTP.parse(O3.tr(8121,"",d+"/"+v)):M18.HTP.parse(O3.tr(8121,d,"/"+v))}var f=TC78.gIV("protectItem"),g=N12.gID(f),m=N12.giC(f),y=a.protectnum;this.proItem.setData(g),this.proCostLb.textFlow=y<=m?M18.HTP.parse(O3.tr(8121,"",m+"/"+y)):M18.HTP.parse(O3.tr(8121,m,"/"+y))}},t.prototype.GY15=function(t){var e={700:3,701:7,702:8,703:9,704:2,705:1,706:5,707:0,708:4,709:6},i=e[t.id];if(this.showIdx!=i){for(var s in this.showIdx=i,e){var o="sq_mc_sysqty_"+e[s];App.THH33.rEf(this.wGroup,o)}var r="sq_mc_sysqty_"+i;App.THH33.aUE(this.wGroup,r,-185,-195)}},t.prototype.close=function(){this._itemArray.removeAll(),null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null);var t="sq_mc_sysqty_"+this.showIdx;App.THH33.rEf(this.wGroup,t),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.forgeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX44,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.ckDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvent,this)},t}(BaseEuiView);__reflect(ImmortalArtView.prototype,"ImmortalArtView");var ImmortalArtXLView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.viewName="xlView",i.skinName=ImmortalArtSopSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ImmortalArtIconItem,this.itemS=[this.item0,this.item1,this.item2,this.item3,this.item4],this.lbStr1.text=O3.tr(8395),this.activeBtn.label=O3.tr(8396),this.strLb1.text=O3.tr(8409),this.strLb0.text=O3.tr(8408),this.sopBtn.label=O3.tr(8410),this.saveBtn.label=O3.tr(8411),this.sopAutoBtn.label=O3.tr(8412),this.lbdesc.textFlow=O3.tr2(8809)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var i=App.CM.gtM(O6.B58),s=i.ZC68(this.viewName);i.localArt?this._curArt?this._curArt&&this._curArt.id!=i.localArt.id&&(this._curArt=null,this._curArt=i.localArt):this._curArt=i.localArt:(i.localArt=s[0],this._curArt=i.localArt),i.localArtPanel=this.viewName,this.ZHH77(i),this.ckPTDot.selected=!0,this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.sopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sopBtnEvent,this),this.saveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.saveBtnEvent,this),this.ckPTDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckPTDotEvent,this),this.ckGJDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckGJDotEvent,this),this.showJC.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showJCEvent,this),this.showSXP.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showSXPEvent,this),this.sopAutoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP11,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this)},t.prototype.endScroller=function(){if(App.CM.gtM(O6.B58).scrollerH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&0<r.red){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&0<n.red){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.showSXPEvent=function(){var t=App.CM.gtM(O6.B58).localArt;App.VM.open(O7.B19,2,t.art.xlLv)},t.prototype.showJCEvent=function(){App.VM.open(O7.B19,1)},t.prototype.ZP11=function(){var t=App.CM.gtM(O6.B58).localArt;if(this.isLockAuto(t.art.xlu))App.VM.open(O7.A20);else{var e=O3.tr(8508);P18.sDP(e,!1)}},t.prototype.isLockAuto=function(t){for(var e in t)if(5==t[e])return!0;return!1},t.prototype.ckPTDotEvent=function(){this.ckPTDot.selected=!0,this.ckGJDot.selected=!1},t.prototype.ckGJDotEvent=function(){this.ckGJDot.selected=!0,this.ckPTDot.selected=!1},t.prototype.ZP7=function(){App.VM.open(O7.A57)},t.prototype.ZS95=function(){var t=App.CM.gtM(O6.B58).localArt,e=t.base.itemnum.split(";");for(var i in e){var s=e[i].split(":"),o=s[0],r=N12.giC(o),n=Number(s[1]);if(r<n)return void App.VM.open(O7.G87,o,Number(n)-r)}App.CM.apF(O6.B58,J6.A5,t.id)},t.prototype.sopBtnEvent=function(){var t=App.CM.gtM(O6.B58).localArt;if(this.ckPTDot.selected){var e=TC78.gIV("xilianItem1").split(":"),i=N12.giC(e[0]);i>=Number(e[1])?App.CM.apF(O6.B58,J6.A9,t.id,1):App.VM.open(O7.G87,e[0],Number(e[1])-i)}else if(this.ckGJDot.selected){var s=TC78.gIV("xilianItem2").split(":"),o=N12.giC(s[0]);o>=Number(s[1])?App.CM.apF(O6.B58,J6.A9,t.id,2):App.VM.open(O7.G87,s[0],Number(s[1])-o)}},t.prototype.saveBtnEvent=function(){var t=App.CM.gtM(O6.B58).localArt;if(this.getLength(t.art.nsa))App.CM.apF(O6.B58,J6.A1,t.id);else{var e=O3.tr(8446);P18.sDP(e,!1)}},t.prototype.getLength=function(t){var e=0;for(var i in t)e++;return e},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r.prototype.uBM.call(this,t,e),t instanceof TF43)switch(e[0]){case P4.B79:case J6.A27:case P4.D38:case P4.A49:case P4.A51:t.localArt=t.ZD26(),this._curArt=null,this._curArt=t.localArt,this.ZHH77(t)}else if(t instanceof THH9){var s=App.CM.gtM(O6.B58);this.ZHH77(s)}else if(t instanceof TG12&&e[0]==P4.S88){var o=App.CM.gtM(O6.B58);this.updataPower(o)}},t.prototype.ZHH77=function(t){this.itemScroller.viewport.scrollH=t.scrollerH;var e=t.ZC68(this.viewName);P7.ObjectSet(this._itemArray.source,e),this._itemArray.refresh();var i=t.localArt;this.ZP8(i),this.updataPower(t),this.sopBtn.imgNew.visible=0<t.getArtXLRed(i.id),this.endScroller(),this.GY15(i)},t.prototype.updataPower=function(t){this.score1.text=t.ZJ7(t.localArt)+""},t.prototype.ZP8=function(t){0==t.state||2==t.state?this.showNoActUI(t):this.showLvUI(t)},t.prototype.showNoActUI=function(t){this.noActiveGrp.visible=this.noActiveGroup.visible=!0,this.nameGrp.visible=this.nameGrp.visible=!1,this.activeGroup.visible=!1,this.sopLvGrp.visible=!1;var e={type:"intAttr",data:t.base.attr};this.artNDataG0.data=e;var i=t.base.itemnum.split(";");for(var s in i){var o=i[s].split(":"),r=o[0],n=N12.gID(r),a=N12.giC(r),h=Number(o[1]);this["activeItem"+s].setData(n),this["activecostLb"+s].textFlow=h<=a?(this.activeBtn.imgNew.visible=!0,M18.HTP.parse(O3.tr(8121,"",a+"/"+h))):(this.activeBtn.imgNew.visible=!1,M18.HTP.parse(O3.tr(8121,a,"/"+h)))}},t.prototype.showLvUI=function(t){for(var e in this.noActiveGrp.visible=this.noActiveGroup.visible=!1,this.nameGrp.visible=this.nameGrp.visible=!1,this.activeGroup.visible=!0,this.sopLvGrp.visible=!0,this.itemS){var i=Number(e)+1,s={key:e,xla:this.getVByKey(i,t.art.xla),nsa:this.getVByKey(i,t.art.nsa)};this.itemS[e].data=s}this.lbName.text=t.art.lv+"",this.lbName0.text=O3.tr(8149,"");var o=TC78.gIV("xilianLv").split("|")[Number(t.art.xlLv)-1].split(";");this.sopLvLb.text=O3.tr(8407,t.art.xlLv),"-1"==o[1]?this.processBar.showMaxUI():this.processBar.setData(t.art.xlExp,Number(o[1]));var r=TC78.gIV("xilianItem1").split(":"),n=N12.gID(r[0]),a=N12.giC(r[0]);this.sopPTItem.setData(n),a>=Number(r[1])?this.sopPTCostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",a+"/"+r[1])):this.sopPTCostLb.textFlow=M18.HTP.parse(O3.tr(8121,a,"/"+r[1]));var h=TC78.gIV("xilianItem2").split(":"),p=N12.gID(h[0]),l=N12.giC(h[0]);this.sopGJItem.setData(p),l>=Number(h[1])?this.sopGJCostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",l+"/"+h[1])):this.sopGJCostLb.textFlow=M18.HTP.parse(O3.tr(8121,l,"/"+h[1]))},t.prototype.GY15=function(t){var e={700:3,701:7,702:8,703:9,704:2,705:1,706:5,707:0,708:4,709:6},i=e[t.id];if(this.showIdx!=i){for(var s in this.showIdx=i,e){var o="sq_mc_sysqty_"+e[s];App.THH33.rEf(this.wGroup,o)}var r="sq_mc_sysqty_"+i;App.THH33.aUE(this.wGroup,r,-185,-195)}},t.prototype.getVByKey=function(t,e){return e&&0<=e[t]?e[t]:0},t.prototype.close=function(){this._itemArray.removeAll(),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.sopBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sopBtnEvent,this),this.saveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.saveBtnEvent,this),this.ckPTDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckPTDotEvent,this),this.ckGJDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckGJDotEvent,this),this.showJC.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showJCEvent,this),this.showSXP.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showSXPEvent,this),this.sopAutoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP11,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this)},t}(BaseEuiView);__reflect(ImmortalArtXLView.prototype,"ImmortalArtXLView");var ImmortalAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalAttrSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.text=O3.tr(8162,""),this.lbStr2.text=O3.tr(8163),this.lbTitle0.text=O3.tr(8164),this.lbTitle1.text=O3.tr(8165)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0];this.ZL89(i),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.ZL89=function(t){TE91.FK95();this.showPower(t);var e=t.im.id,i=TE91.FK93(e);if(this.imgHead.source=i.base.icon,this.lbName.textFlow=M18.FG71(O5.FD52(i.base.name,i.base.quality,1,!0)),this.imgBd.source=N12.getBox(i.base.quality),0==t.type){this.starGrp.visible=this.starGrp.includeInLayout=!1,this.intGrp.visible=this.intGrp.includeInLayout=!1,this.lvGrp.visible=!1;var s={type:"immortalAttr",data:i.base.baseattr};this.baseDataG.data=s}else{this.starGrp.visible=this.starGrp.includeInLayout=!0,this.intGrp.visible=this.intGrp.includeInLayout=!0,this.lvGrp.visible=!0;var o=t.im;this.lbLv.text=o.lv+"";var r=TE91.FL55(TE91.FF18(o.id,o.lv)),n={type:"immortalAttr",data:r};if(this.baseDataG.data=n,0==o.sLv&&0==o.sSo)this.starGrp.visible=this.starGrp.includeInLayout=!1;else{var a=TE91.FE13(o.sLv,o.sSo);this.lbBfb.text=O3.tr(8166,this.ZR45(a));var h={type:"immortalAttr",data:r,sacle:a};this.starDataG.data=h}if(1==o.aSg&&0==o.aLv)this.intGrp.visible=this.intGrp.includeInLayout=!1;else{var p=TE91.FI68(i.base.aptitype,o.aSg);this.intImg.source=TE91.FE14(p.title),this.lbBfb0.text=O3.tr(8167,TE91.FJ92(i.base.aptitype,o.aSg));var l={type:"immortalAttr",data:TE91.FL55(TE91.FJ91(i.base.aptitype,o.aSg,o.aLv))};this.intDataG.data=l}}},t.prototype.showPower=function(t){var e=t.im,i=0,s=0,o=0,r=TE91.FK93(t.im.id);if(1==t.type){var n=TE91.FL55(TE91.FF18(e.id,e.lv));o=M10.gAG(n),i=Math.floor(o*TE91.FE13(e.sLv,e.sSo));var a=TE91.FJ92(r.base.aptitype,e.aSg),h=TE91.FL55(TE91.FJ91(r.base.aptitype,e.aSg,e.aLv));s=M10.gAG(h)+Math.floor(a*(o+i))}else o=M10.gAG(r.base.baseattr);var p=o+i+s;this.blPower.text=Math.floor(p)+""},t.prototype.close=function(){s.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.close(O7.C27)},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t}(BaseEuiView);__reflect(ImmortalAttrView.prototype,"ImmortalAttrView");var ImmortalComView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalComSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ImmortalComItem,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8169)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.C8);this.ZHH77(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF43&&e[0]==P4.R19&&this.ZHH77(t)},t.prototype.ZHH77=function(t){var e=TE91.FK95();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.close(O7.D2)},t}(BaseEuiView);__reflect(ImmortalComView.prototype,"ImmortalComView");var ImmortalCulPowerView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalShareSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.baseS=[this.base0,this.base1,this.base2],this.powerGrp.visible=!0,this.imgCH.visible=!1,this.lvGrp.visible=!1,this.skillGroup.visible=!1,this.grp2.visible=this.grp3.visible=this.grp4.visible=!1,this.dlg.title=O3.tr(8190),this.lbStr0.text=O3.tr(8185)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=App.CM.gtM(O6.B58);this.ZHH77(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZHH77=function(t){this.lbName.text=O3.tr(8184,t.cLv);var e=TE91.FL55(TE91.FK98(t.cLv,t.cSr));this.setDataBySLS(e,this.baseS),this.score.text=Math.floor(M10.gAG(e))+"",this.ZJ8()},t.prototype.ZJ8=function(){var t=App.CM.gtM(O6.B58),e=t.ZE26(),i=TE91.FK99(t.cSi);this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var s={id:e.bsa.base.model,x:0,y:0,dir:Dir.br,ics:i,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.immortalObj.setData(s,this.wGroup),this.immortalObj.action=Action.Stand},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.setDataBySLS=function(t,e,i){void 0===i&&(i=1);var s=t.split(";");for(var o in s){var r=P7.FM6(P7.str2kv(s[o])).split(":");e[o].textFlow=M18.HTP.parse(O3.tr(8266,r[0]+"：",Math.ceil(Number(r[1])*i)))}},t.prototype.closeSelf=function(){App.VM.close(O7.A55)},t}(BaseEuiView);__reflect(ImmortalCulPowerView.prototype,"ImmortalCulPowerView");var ImmortalCulView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalCulSkin",i}return __extends(t,s),t.prototype.initUI=function(){for(var t in s.prototype.initUI.call(this),this.culS=[this.cul0,this.cul1,this.cul2,this.cul3,this.cul4,this.cul5,this.cul6,this.cul7],this.culS)this.culS[t].data=t;this.lbStr0.text=O3.tr(8185),this.lbStr2.text=O3.tr(8142),this.culLLb.text=O3.tr(8186),this.culNLb.text=O3.tr(8187),this.btnHuanhua.label=O3.tr(1485),this.lbNextPower.text=O3.tr(8193)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){var t=App.CM.gtM(O6.B58);t.ZF65();this.ZD18(t),this.ZJ8(t.cLv),this.culPageMax=t.getCulMagMax(),this.culMagId=t.cSi,this.culPage=t.cLv,this.ZL58(),this.btnCulUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX46,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.leftBtnEvent,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX45,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP12,this),this.btnHuanhua.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP13,this),this.powerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this)},t.prototype.close=function(){this.btnCulUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX46,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.leftBtnEvent,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX45,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP12,this),this.btnHuanhua.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP13,this),this.powerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this)},t.prototype.ZJ9=function(){App.VM.open(O7.A56)},t.prototype.ZP12=function(){App.VM.open(O7.A55)},t.prototype.ZP13=function(){App.CM.apF(O6.B58,J6.A34,this.culPage)},t.prototype.leftBtnEvent=function(){1<this.culPage&&(this.culPage-=1,this.ZL58())},t.prototype.ZX45=function(){this.culPage<this.culPageMax&&(this.culPage+=1,this.ZL58())},t.prototype.ZL58=function(){var t=App.CM.gtM(O6.B58);this.lbsLv.text=O3.tr(8184,this.culPage),this.btnHuanhua.visible=this.imgHuanhua.visible=this.imgNext.visible=this.lbNextPower.visible=!1,t.getIsCulMax()?this.culPage==this.culPageMax?(this.culMagId==this.culPage?this.imgHuanhua.visible=!0:this.btnHuanhua.visible=!0,P16.sGF(this.rightBtn,!0),this.rightBtn.enabled=!1,this.rightBtn.visible=!1):(P16.sGF(this.rightBtn,!1),this.rightBtn.enabled=!0,this.rightBtn.visible=!0,this.culMagId==this.culPage?this.imgHuanhua.visible=!0:this.btnHuanhua.visible=!0):this.culPage==this.culPageMax?(this.lbNextPower.visible=!0,P16.sGF(this.rightBtn,!0),this.rightBtn.enabled=!1):(P16.sGF(this.rightBtn,!1),this.rightBtn.enabled=!0,this.culPage==this.culPageMax-1&&(this.imgNext.visible=!0),this.culMagId==this.culPage?this.imgHuanhua.visible=!0:this.btnHuanhua.visible=!0),1==this.culPage?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.ZJ8(this.culPage)},t.prototype.ZX46=function(){var t,e,i,s=App.CM.gtM(O6.B58),o=TE91.cultivation[s.cLv];i=s.cSr<8?(t=TE91.gIV("cultivationLv"),e=N12.giC(t),o.cost):(t=TE91.gIV("cultivationBr"),e=N12.giC(t),o.broken),e>=Number(i)?App.CM.apF(O6.B58,J6.A39):App.VM.open(O7.G87,t,Number(i)-e)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF43)switch(e){case P4.C62:this.ZD18(t),this.culUpEvent(t);break;case P4.A23:this.culMagEvrnt(t)}else if(t instanceof THH9){var i=App.CM.gtM(O6.B58);this.ZX47(i)}},t.prototype.culUpEvent=function(t){0==t.cSr?(this.culPageMax=t.getCulMagMax(),this.culMagId=t.cSi,this.culPage=t.cLv,this.ZL58()):this.culS[t.cSr-1].showPZTX()},t.prototype.culMagEvrnt=function(t){this.ZJ8(t.cSi),this.culMagId=t.cSi,this.ZL58()},t.prototype.ZD18=function(t){this.showCulUI(t),this.countPower(t),this.ZHH10(t)},t.prototype.ZHH10=function(t){this.powerLb.textFlow=M18.HTP.parse(O3.tr(8135,t.ZX38())),this.battleLb.textFlow=M18.HTP.parse(O3.tr(8136,t.getNum()))},t.prototype.countPower=function(t){var e=TE91.FL55(TE91.FK98(t.cLv,t.cSr)),i=Math.floor(M10.gAG(e));this.score.text=i+""},t.prototype.showCulUI=function(t){this.showCulDataG(t),this.ZX47(t)},t.prototype.ZX47=function(t){var e=TE91.cultivation[t.cLv];if(-1==e.attr){for(var i in this.imgGood.visible=this.imgGood.includeInLayout=!1,this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8141),"")),this.btnCulUp.enabled=!1,P16.sGF(this.btnCulUp,!0),this.btnCulUp.imgNew.visible=!1,this.culS)this.culS[i].showYSJ();this.btnCulUp.label=O3.tr(8141)}else{this.imgGood.visible=this.imgGood.includeInLayout=!0,this.btnCulUp.enabled=!0,P16.sGF(this.btnCulUp,!1);var s=void 0,o=void 0,r=void 0,n=void 0;for(var i in t.cSr<8?(s=TE91.gIV("cultivationLv"),r=N12.gID(s),n=N12.giC(s),o=e.cost,this.btnCulUp.label=O3.tr(8188)):(s=TE91.gIV("cultivationBr"),r=N12.gID(s),n=N12.giC(s),o=e.broken,this.btnCulUp.label=O3.tr(8189)),this.imgGood.setData(r),this.btnCulUp.imgNew.visible=o<=n?(this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,"",n+"/"+o)),!0):(this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,n,"/"+o)),!1),this.culS)Number(i)==t.cSr?this.culS[i].showCZTx():Number(i)<t.cSr?this.culS[i].showYSJ():this.culS[i].hideCZTx()}},t.prototype.showCulDataG=function(t){var e=TE91.cultivation[t.cLv],i={type:"intAttr",data:TE91.FL55(TE91.FK98(t.cLv,t.cSr))};if(this.culLDataG.data=i,-1==e.attr)this.culLLb.horizontalCenter=0,this.culLDataG.horizontalCenter=0,this.imgJt.visible=!1,this.culNLb.visible=this.culNDataG.visible=!1;else{this.culNLb.visible=this.culNDataG.visible=!0,this.imgJt.visible=!0;var s={type:"intAttr",data:8==t.cSr?TE91.FL55(TE91.FK98(t.cLv+1,0)):TE91.FL55(TE91.FK98(t.cLv,t.cSr+1))};this.culNDataG.data=s}},t.prototype.ZJ8=function(t){var e=App.CM.gtM(O6.B58).ZE26(),i=TE91.FK99(t);this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var s={id:e.bsa.base.model,x:0,y:0,dir:Dir.br,ics:i,objType:P13.A6,bt:BehaviourType.Attack_d};this.immortalObj.setData(s,this.wGroup),this.immortalObj.action=Action.Stand},t}(BaseEuiView);__reflect(ImmortalCulView.prototype,"ImmortalCulView");var ImmortalCZView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=DlgHeroGoBattleSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.heroLeft=new IconImmortal,this.heroMid=new IconImmortal,this.heroRight=new IconImmortal,this.gpLeft.addChild(this.heroLeft),this.gpMid.addChild(this.heroMid),this.gpRight.addChild(this.heroRight),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(8173)),this.btnRight.label=O3.tr(8175),this.btnMid.label=O3.tr(8175),this.btnLeft.label=O3.tr(8174),this.dlg.title=O3.tr(8172)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.dlg.ZG3(!1),this.dlg.ZM69(this.closeSelf,this),this.heroId=t[0],this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnMid.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMid,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.heroLeft.visible=!1,this.heroRight.visible=!1,this.heroMid.visible=!1,this.setViewUI()},t.prototype.setViewUI=function(){var t=App.CM.gtM(O6.B58);for(var e in t.ubs)switch(e){case"1":this.heroLeft.visible=!0;var i={type:"1",im:t.getImsById(t.ubs[e])};this.heroLeft.data=i;break;case"2":this.heroMid.visible=!0;i={type:"2",im:t.getImsById(t.ubs[e])};this.heroMid.data=i;break;case"3":this.heroRight.visible=!0;i={type:"3",im:t.getImsById(t.ubs[e])};this.heroRight.data=i}},t.prototype.onClickLeft=function(){App.CM.apF(O6.B58,J6.A21,this.heroId,1),this.closeSelf(!1)},t.prototype.onClickMid=function(){App.CM.apF(O6.B58,J6.A21,this.heroId,2),this.closeSelf(!1)},t.prototype.onClickRight=function(){App.CM.apF(O6.B58,J6.A21,this.heroId,3),this.closeSelf(!1)},t.prototype.closeSelf=function(t){void 0===t&&(t=!0),App.VM.close(O7.D81)},t.prototype.close=function(){s.prototype.close.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnMid.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMid,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this)},t}(BaseEuiView);__reflect(ImmortalCZView.prototype,"ImmortalCZView");var ImmortalEquipAttrView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ImmortalEquipAttrSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbStr0.text=O3.tr(8304),this.lbStr1.text=O3.tr(8303),this.lbStr2.text=O3.tr(8300),this.lbTitle0.text=O3.tr(8301),this.lbTitle1.text=O3.tr(8302)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this);var i=t[0],s=t[1];this.ZL89(i,s),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.ZL89=function(t,e){if("1"==t){var i,s=0,o=0;this.lbLv.text=e.lv;var r=TB84.FE15(e.tid);this.imgHead.source=r.icon,this.imgBd.source=N12.getBox(5<r.quality?6:Number(r.quality)+1),this.lbName.textFlow=M18.FG71(O5.FD52(r.name,5<r.quality?6:Number(r.quality)+1));var n={type:"immortalAttr",data:r.attr};if(this.lbPos.text=TB84.gIV("position").split(",")[Number(r.pos)-1],this.baseDataG.data=n,i=M10.gAG(r.attr),0<e.lv){this.lvUpGrp.visible=this.lvUpGrp.includeInLayout=!0;var a=TB84.FE9(e.lv),h={type:"equipAttrStar",data:a.addattr,base:r.attr,sacle:a.attr};this.lvDataG.data=h,this.lbBfb.text=O3.tr(8305,this.ZR45(a.attr)),s=M10.gAG(a.addattr)+i*a.attr}else this.lvUpGrp.visible=this.lvUpGrp.includeInLayout=!1;if(e.pa.ats.length){var p=this.FL55(e.pa.ats),l={type:"immortalAttr",data:p};this.sopDataG.data=l,o=M10.gAG(p)}else this.sopGrp.visible=this.sopGrp.includeInLayout=!1;var c=i+s+o;this.showPower(c)}else{this.lbLv.text=O3.tr(8306);r=TB84.FE15(e.id);this.imgHead.source=r.icon,this.lbName.textFlow=M18.FG71(O5.FD52(r.name,5<r.quality?6:Number(r.quality)+1)),this.lbPos.text=TB84.gIV("position").split(",")[Number(r.pos)-1],this.imgBd.source=N12.getBox(5<e.quality?6:Number(e.quality)+1);n={type:"immortalAttr",data:r.attr};this.baseDataG.data=n,this.lvUpGrp.visible=this.lvUpGrp.includeInLayout=!1,this.sopGrp.visible=this.sopGrp.includeInLayout=!1;c=M10.gAG(r.attr);this.showPower(c)}},t.prototype.showPower=function(t){this.blPower.text=Math.floor(t)+""},t.prototype.close=function(){o.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.close(O7.A34)},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t.prototype.FL55=function(t){var e="";for(var i in t)0!=e.length&&(e+=";"),e=e+t[i].k+":"+t[i].v;return e},t}(BaseEuiView);__reflect(ImmortalEquipAttrView.prototype,"ImmortalEquipAttrView");var ImmortalEquipGreatView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalEquipGreatSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.text=O3.tr(8308),this.lbStr2.text=O3.tr(8309)},t.prototype.open=function(t,e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),1==t?this.showForge(e):this.showLvUp(e)},t.prototype.showForge=function(t){var e=TB84.FI66(TB84.equipmaster);if(this.imgHead.source="com_btn_dazaodashi_png",e<=t){this.lGrp.visible=this.lGrp.includeInLayout=!0,this.NGrp.visible=this.NGrp.includeInLayout=!1,this.lbLift.visible=this.lbLift.includeInLayout=!1,this.lbStatus.textColor=7716890;var i=(r=TB84.equipmaster[t]).euqipname,s=r.attraward;this.lbNow.text=O3.tr(8322,i);var o={type:"immortalEquip",data:s};this.dataG.data=o,this.lbStatus.text=O3.tr(8322,i)}else if(0<t&&t<e){this.lGrp.visible=this.lGrp.includeInLayout=!0,this.NGrp.visible=this.NGrp.includeInLayout=!0,this.lbLift.visible=this.lbLift.includeInLayout=!0,this.lbStatus.textColor=7716890;var r;i=(r=TB84.equipmaster[t]).euqipname,s=r.attraward;this.lbNow.text=O3.tr(8322,i);o={type:"immortalEquip",data:s};this.dataG.data=o,this.lbStatus.text=O3.tr(8322,i);var n=(p=TB84.equipmaster[t+1]).euqipname,a=p.attraward;this.lbNext.text=O3.tr(8322,n);var h={type:"immortalEquip",data:a};this.NdataG.data=h,this.lbLift.text=O3.tr(1109,Math.ceil(M10.gAG(a)-M10.gAG(s)))}else{this.lGrp.visible=this.lGrp.includeInLayout=!1;var p;n=(p=TB84.equipmaster[t+1]).euqipname,a=p.attraward;this.lbNext.text=O3.tr(8322,n);h={type:"immortalEquip",data:a};this.NdataG.data=h,this.lbStatus.textColor=14164514,this.lbStatus.text=O3.tr(8307),this.lbLift.text=O3.tr(1109,Math.ceil(M10.gAG(a)))}},t.prototype.showLvUp=function(t){var e=TB84.FI66(TB84.levelmaster);if(this.imgHead.source="com_btn_shengjidashi_png",e<=t){this.lGrp.visible=this.lGrp.includeInLayout=!0,this.NGrp.visible=this.NGrp.includeInLayout=!1,this.lbLift.visible=this.lbLift.includeInLayout=!1,this.lbStatus.textColor=7716890;var i=(r=TB84.levelmaster[t]).lv,s=r.attraward;this.lbNow.text=O3.tr(8323,i);var o={type:"immortalEquip",data:s};this.dataG.data=o,this.lbStatus.text=O3.tr(8311)}else if(0<t&&t<e){this.lGrp.visible=this.lGrp.includeInLayout=!0,this.NGrp.visible=this.NGrp.includeInLayout=!0,this.lbLift.visible=this.lbLift.includeInLayout=!0,this.lbStatus.textColor=7716890;var r;i=(r=TB84.levelmaster[t]).lv,s=r.attraward;this.lbNow.text=O3.tr(8323,i);o={type:"immortalEquip",data:s};this.dataG.data=o,this.lbStatus.text=O3.tr(8323,i);var n=(p=TB84.levelmaster[t+1]).lv,a=p.attraward;this.lbNext.text=O3.tr(8323,n);var h={type:"immortalEquip",data:a};this.NdataG.data=h,this.lbLift.text=O3.tr(1109,Math.ceil(M10.gAG(a)-M10.gAG(s)))}else{this.lGrp.visible=this.lGrp.includeInLayout=!1;var p;n=(p=TB84.levelmaster[t+1]).lv,a=p.attraward;this.lbNext.text=O3.tr(8323,n);h={type:"immortalEquip",data:a};this.NdataG.data=h,this.lbStatus.textColor=14164514,this.lbStatus.text=O3.tr(8307),this.lbLift.text=O3.tr(1109,Math.ceil(M10.gAG(a)))}},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.close(O7.A19)},t}(BaseEuiView);__reflect(ImmortalEquipGreatView.prototype,"ImmortalEquipGreatView");var ImmortalEquipMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.B57,O7.B58,"ImmortalEquipView",this.content),App.VM.rgS(O7.B57,O7.D4,"ImmortalSopView",this.content);var t=[O3.tr(8282),O3.tr(8283)],e=[O7.B58,O7.D4];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.B58;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){this.viewId=t;App.CM.gtM(O6.B58);switch(t){case O7.B58:this.btnList.ZM66(t),this.title=O3.tr(8280);break;case O7.D4:this.btnList.ZM66(t),this.title=O3.tr(8281)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B58);this.btnList.ZHH58(O7.B58,t.ZP1()),this.btnList.ZHH58(O7.D4,t.ZX31())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t.prototype.openHelpView=function(){var t,e;e=this.viewId==O7.B58?(t=O3.tr(8318),O3.tr(8319)):this.viewId==O7.D4?(t=O3.tr(8320),O3.tr(8321)):(t=O3.tr(8318),O3.tr(8319));var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t}(BasePanelView);__reflect(ImmortalEquipMainView.prototype,"ImmortalEquipMainView");var ImmortalEquipRiseTipsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalEquipRiseTipsSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(6817))},t.prototype.open=function(t,e){var i=this;egret.Tween.get(this).wait(1e3).call(function(){i.addEventListener(egret.TouchEvent.TOUCH_TAP,i.closeSelf,i)});var s,o,r,n;App.CM.gtM(O6.B58);switch(t){case 1:s="com_btn_dazaodashi_png",o="v1_fonts_dazaodashia_png",O3.tr(8315),r=(a=TB84.equipmaster[e]).euqipname,n=a.attraward,this.lbClass.text=r,this.lbNow.text=O3.tr(8322,r);break;case 2:var a;s="com_btn_shengjidashi_png",o="v1_fonts_shengjidashia_png",O3.tr(8316),r=(a=TB84.levelmaster[e]).lv,n=a.attraward,this.lbClass.textFlow=M18.HTP.parse(O3.tr(8149,r)),this.lbNow.text=O3.tr(8323,r)}var h={type:"immortalEquip",data:n};this.dataG.data=h,this.imgHead.source=s,this.imgTitle.source=o,App.THH32.aUE(this.grpEffect,"qmzz_gnkq_yg_aa_001",this.grpEffect.width/2,this.grpEffect.height/2)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),App.THH32.rEf(this.grpEffect,"qmzz_gnkq_yg_aa_001")},t.prototype.closeSelf=function(){App.VM.close(O7.A3)},t}(BaseEuiView);__reflect(ImmortalEquipRiseTipsView.prototype,"ImmortalEquipRiseTipsView");var ImmortalEquipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalEquipSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipS=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7],this.tabBar.dataProvider=this.tabCollection=new eui.ArrayCollection,this.tabBar.itemRenderer=FaBaoTabBarItem,this.tabCollection.replaceAll([{up:8284,down:8284,type:"w"},{up:8285,down:8285,type:"f"}]),this.lbStr2.text=O3.tr(8287),this.stringLb2.text=O3.tr(8288),this.stringLb5.text=O3.tr(8288),this.lbStr0.text=O3.tr(8325),this.lbStr1.text=O3.tr(8326),this.activeBtn.label=O3.tr(8289),this.forgeBtn.label=O3.tr(8289),this.lvUpbtn.label=O3.tr(8290)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t in this.btnForge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX48,this),this.btnLvUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvent,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.lvUpbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lvUpBtnEvent,this),this.forgeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX44,this),this.tabBar.addEventListener(eui.UIEvent.CHANGE,this.tabBarChange,this),this.equipS)this.equipS[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose.bind(this,t),this);var e=App.CM.gtM(O6.B58);this.ZD18(e),this.choose(0),this.localfm=e.fm?e.fm:0,this.localum=e.um?e.um:0,null==this.timerHandler&&(this.showNorTween(),App.THH33.aUE(this.gEffect,"xl_mc_da0zao",-225,-190,-1),this.timerHandler=App.K16.doTimer(2e3,0,this.showNorTween,this)),null==this._timerHandler&&(this.showQNTween(),this._timerHandler=App.K16.doTimer(750,0,this.showQNTween,this))},t.prototype.ZX48=function(){var t=App.CM.gtM(O6.B58),e=t.fm?t.fm:0;App.VM.open(O7.A19,1,e)},t.prototype.btnLvUpEvent=function(){var t=App.CM.gtM(O6.B58),e=t.um?t.um:0,i=Math.floor(e/10);App.VM.open(O7.A19,2,i)},t.prototype.ZS95=function(){var t=Number(this.chooseId)+1;App.CM.apF(O6.B58,J6.A15,t)},t.prototype.ZX44=function(){var t=App.CM.gtM(O6.B58),e=Number(this.chooseId)+1,i=t.ZS91(e),s=TB84.FE15(i.tid),o=TB84.FF20(e,s.quality+1).itemnum.split(":"),r=o[0],n=N12.giC(r),a=Number(o[1]);n>=Number(a)?App.CM.apF(O6.B58,J6.A19,e):App.VM.open(O7.G87,r,Number(a)-n)},t.prototype.lvUpBtnEvent=function(){var t=App.CM.gtM(O6.B58),e=Number(this.chooseId)+1,i=t.ZS91(e),s=TB84.FE9(i.lv+1),o=TB84.gIV("makeItem1"),r=N12.giC(o),n=s.cost;r>=Number(n)?App.CM.apF(O6.B58,J6.A25,e):App.VM.open(O7.G87,o,Number(n)-r)},t.prototype.choose=function(t){this.chooseId=t,this.changeUIById(this.chooseId),this.tabBarReset();var e=App.CM.gtM(O6.B58),i=Number(t)+1,s=e.ZS91(i);if(s){var o=TB84.FE15(s.tid);this.imgChoose.source=o.iconbig,this.imgChoose1.source=o.iconbig}else{o=TB84.FF20(i,1);this.imgChoose.source=o.iconbig,this.imgChoose1.source=o.iconbig}},t.prototype.changeUIById=function(t){for(var e=0,i=this.equipS;e<i.length;e++){i[e].imgSel.visible=!1}this.equipS[t].imgSel.visible=!0},t.prototype.close=function(){for(var t in App.THH33.rEf(this.gEffect,"xl_mc_da0zao"),this.btnForge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX48,this),this.btnLvUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvent,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.lvUpbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.lvUpBtnEvent,this),this.forgeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX44,this),this.tabBar.removeEventListener(eui.UIEvent.CHANGE,this.tabBarChange,this),this.equipS)this.equipS[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose.bind(this,t),this);this.cTH()},t.prototype.tabBarChange=function(){switch(this.tabBar.selectedItem.type){case"w":this.changeForge(this.chooseId);break;case"f":this.changeLvUp(this.chooseId)}},t.prototype.tabBarReset=function(){-1==this.tabBar.selectedIndex&&(this.tabBar.selectedIndex=0),this.tabBarChange(),this.setTabData()},t.prototype.setTabData=function(){for(var t=0;t<this.tabBar.numChildren;t++){var e=App.CM.gtM(O6.B58),i=this.tabBar.getChildAt(t),s=Number(this.chooseId)+1;switch(t){case 0:i.setRed(e.getForgeRed(String(s)));break;case 1:i.setRed(e.getLvUpRed(String(s)))}}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF43)switch(e){case P4.HH58:this.tabBarChange(),this.ZD18(t),this.ZX49(t);break;case P4.J47:this.changeForge(this.chooseId),this.ZD18(t),this.ZX49(t);break;case P4.L56:this.changeLvUp(this.chooseId),this.ZD18(t),this.lvUpResEvent(t)}else if(t instanceof THH9){this.tabBarChange();var i=App.CM.gtM(O6.B58);this.ZD18(i)}},t.prototype.ZX49=function(t){t.fm>this.localfm&&(this.localfm=t.fm,App.VM.open(O7.A3,1,t.fm))},t.prototype.lvUpResEvent=function(t){if(this.localum!=t.um&&t.um%10==0){var e=t.um/10;this.localum=t.um,App.VM.open(O7.A3,2,e)}},t.prototype.ZD18=function(t){for(var e in App.DelayOptManager.ZE59(this,this.setTabData),this.equipS){var i=Number(e)+1,s={pos:i,esData:t.ZS91(i),baseData:TB84.FF20(i,1),view:"ImmortalEquipView"};this.equipS[e].data=s}this.countPower(t)},t.prototype.countPower=function(t){this.powerLb.text=t.ZP5()+""},t.prototype.ZX50=function(){var t=App.CM.gtM(O6.B58);for(var e in this.equipS){var i=Number(e)+1,s={pos:i,esData:t.ZS91(i),baseData:TB84.FF20(i,1)};this.equipS[e].data=s}},t.prototype.changeForge=function(t){this.btnForge.visible=!0,this.btnLvUp.visible=!1;var e=App.CM.gtM(O6.B58);this.lvUpGrp.visible=!1;var i,s,o,r=Number(t)+1,n=e.ZS91(r),a=!1,h=!1;if(n){a=!0;var p=TB84.FE15(n.tid);this.LbNameL.text=p.name;var l={type:"intAttr",data:p.attr};if(this.forgeLDataG.data=l,o=p.quality,p.quality<10){var c=TB84.FF20(r,p.quality+1);this.LbNameN.text=c.name;var u={type:"intAttr",data:c.attr};this.forgeNDataG.data=u,s=c.lvlimit,i=c.itemnum.split(":")}else h=!0}else{var d=TB84.FF20(r,1);this.LbNameL.text="无",this.LbNameN.text=d.name;l={type:"intAttr",data:TF82.FL55(TF82.FJ93(d.attr))};this.forgeLDataG.data=l;u={type:"intAttr",data:d.attr};this.forgeNDataG.data=u,i=d.itemnum.split(":")}if(a)if(this.noActiveGrp.visible=!1,this.forgeGrp.visible=!0,this.lvlimitGrp.visible=!1,this.forgeCostGrp.visible=!0,h)this.forgeLGrp.horizontalCenter=0,this.forgeNGrp.visible=!1,this.imgJt.visible=!1,this.forgeBtn.imgNew.visible=!1,P16.sGF(this.forgeBtn,!0),this.forgeBtn.enabled=!1,this.forgeItem.visible=this.forgeItem.includeInLayout=!1,this.forgecostLb.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8141),""));else if(this.forgeLGrp.horizontalCenter=-150,this.forgeNGrp.visible=!0,this.imgJt.visible=!0,this.forgeItem.visible=this.forgeItem.includeInLayout=!0,n.lv>=s){var v=i[0],f=N12.gID(v),g=N12.giC(v),m=Number(i[1]);this.forgeItem.setData(f),this.forgeBtn.imgNew.visible=m<=g?(this.forgecostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",g+"/"+m)),this.forgeBtn.enabled=!0):(this.forgecostLb.textFlow=M18.HTP.parse(O3.tr(8121,g,"/"+m)),!(this.forgeBtn.enabled=!0)),P16.sGF(this.forgeBtn,!1)}else{this.forgeBtn.enabled=!1,this.forgeBtn.imgNew.visible=!1,P16.sGF(this.forgeBtn,!0);var y=TB84.FF20(r,Number(o)+1);this.forgeCostGrp.visible=!1,this.lvlimitGrp.visible=!0,this.Lblvlimit0.textFlow=M18.HTP.parse(O3.tr(8121,s,"")),this.Lblvlimit1.text=O3.tr(8292)+y.name}else{this.noActiveGrp.visible=!0,this.forgeGrp.visible=!1;var A=N12.gID(i[0]),b=N12.giC(i[0]);this.activeItem.setData(A),this.cardBg.source=N12.getBox(A.quality),this.lbActiveCost.text=O3.tr(8286,A.name,i[1]),b>=Number(i[1])?(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,"",b)),this.activeBtn.enabled=!0,P16.sGF(this.activeBtn,!1)):(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,b,"")),this.activeBtn.enabled=!1,P16.sGF(this.activeBtn,!0))}},t.prototype.changeLvUp=function(t){this.btnForge.visible=!1,this.btnLvUp.visible=!0;var e=App.CM.gtM(O6.B58);this.forgeGrp.visible=!1,this.noActiveGrp.visible=!1,this.lvUpGrp.visible=!0;var i=Number(t)+1,s=e.ZS91(i),o=!1,r=!1;if(s){o=!0;TB84.FE15(s.tid);var n=TB84.FE9(s.lv);if(0<s.lv){this.lvUpLLb.textFlow=M18.HTP.parse(O3.tr(7940,O3.tr(8291,""),this.ZR45(n.attr)));var a={type:"equipStar",data:n.addattr};this.lvUpLDataG.data=a}else{n=TB84.FE9(1);var h=TF82.FL55(TF82.FJ93(n.addattr));this.lvUpLLb.textFlow=M18.HTP.parse(O3.tr(7940,O3.tr(8291,""),this.ZR45(n.attr)));a={type:"equipStar",data:h};this.lvUpLDataG.data=a}if(s.lv<TB84.lvMax){var p=TB84.FE9(Number(s.lv)+1);this.lvUpNLb.textFlow=M18.HTP.parse(O3.tr(7940,O3.tr(8291,""),this.ZR45(p.attr)));var l={type:"equipStar",data:p.addattr};this.lvUpNDataG.data=l}else r=!0}if(o)if(this.noActiveGrp.visible=!1,this.lvUpGrp.visible=!0,r)this.lvUpLGrp.horizontalCenter=0,this.lvUpNGrp.visible=!1,this.imgJt1.visible=!1,P16.sGF(this.lvUpbtn,!0),this.lvUpbtn.enabled=!1,this.lvUpbtn.imgNew.visible=!1,this.lvUpItem.visible=this.lvUpItem.includeInLayout=!1,this.lvUpcostLb.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8141),""));else{this.imgJt1.visible=!0;n=TB84.FE9(Number(s.lv)+1);this.lvUpLGrp.horizontalCenter=-150,this.lvUpNGrp.visible=!0,P16.sGF(this.lvUpbtn,!1),this.lvUpbtn.enabled=!0,this.lvUpItem.visible=this.lvUpItem.includeInLayout=!0;var c=TB84.gIV("makeItem1"),u=N12.gID(c),d=N12.giC(c),v=n.cost;this.lvUpItem.setData(u),this.lvUpbtn.imgNew.visible=v<=d?(this.lvUpcostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",d+"/"+v)),!0):(this.lvUpcostLb.textFlow=M18.HTP.parse(O3.tr(8121,d,"/"+v)),!1)}else{TB84.FF20(i,1);var f=TB84.FF20(i,1).itemnum.split(":");this.noActiveGrp.visible=!0,this.lvUpGrp.visible=!1;n=N12.gID(f[0]);var g=N12.giC(f[0]);this.activeItem.setData(n),this.cardBg.source=N12.getBox(n.quality),this.lbActiveCost.text=O3.tr(8286,n.name,f[1]),g>=Number(f[1])?(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,"",g)),this.activeBtn.enabled=!0,P16.sGF(this.activeBtn,!1)):(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,g,"")),this.activeBtn.enabled=!1,P16.sGF(this.activeBtn,!0))}},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null),null!=this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null)},t.prototype.showNorTween=function(){egret.Tween.get(this.imgChoose).to({verticalCenter:8},1e3).to({verticalCenter:0},1e3).pause(),egret.Tween.get(this.imgChoose1).to({verticalCenter:8,alpha:.15},1e3).to({verticalCenter:0,alpha:0},1e3).pause()},t.prototype.showQNTween=function(){this.qImg.alpha=0,this.qImg.scaleX=this.qImg.scaleY=1.5,egret.Tween.get(this.qImg).to({alpha:.35,scaleX:2.15,scaleY:2.15},750).pause(),this.qImg1.alpha=.35,this.qImg1.scaleX=this.qImg1.scaleY=2.15,egret.Tween.get(this.qImg1).to({alpha:0,scaleX:2.8,scaleY:2.8},750).pause()},t}(BaseEuiView);__reflect(ImmortalEquipView.prototype,"ImmortalEquipView");var ImmortalFlyView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName=ImmortalFlySkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.labTitle.bold=!0,this.itemS=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9];var t=this.skillDGrp.layout;this.listGap=t.gap,this.itemCollection=new eui.ArrayCollection,this.skillDGrp.dataProvider=this.itemCollection,this.skillDGrp.itemRenderer=ImmortalFlySkillItem,this.lbStr.text=O3.tr(8742),this.lbStr1.text=O3.tr(8744),this.lbStr2.text=O3.tr(8745),this.lbStr3.text=O3.tr(8748),this.dlg.title=O3.tr(8741),this.ckDot.label=O3.tr(7414),this.scSkill.viewport=this.skillDGrp,this.scSkill.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var i=App.CM.gtM(O6.B58);this.ZHH77(i),this.ckDot.selected=O4.FF89(L17.A30),this.flyTime=Date.now(),this.ckDotTime=Date.now(),this.ckDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this),this.btnFly.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnFlyEvent,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.close=function(){r.prototype.close.call(this),this.itemCollection.removeAll(),this.ckDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this),this.btnFly.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnFlyEvent,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r.prototype.uBM.call(this,t,e),t instanceof TF43)e[0]==P4.S79&&(t.localClick=t.ZHH9(),this.ZHH77(t));else if(t instanceof THH9){var s=App.CM.gtM(O6.B58);this.ZHH77(s)}if(t instanceof TG12){var o=App.CM.gtM(O6.B58);this.btnFly.imgNew.visible=0<o.getFlyRed(o.localClick)}},t.prototype.ZHH77=function(t){var e=t.localClick;0!=e.state&&5!=e.state&&(this.showItemUI(e.bsa.base.evotype,e.im.eSg,e.im.eLv),this.showAttrUI(e.bsa.base.evotype,e.im.eSg,e.im.eLv),this.lbESg.text=O3.tr(8743,e.im.eSg)),this.showSkillUI(e.bsa.base.skillevotype)},t.prototype.showSkillUI=function(t){var e=TE91.FD17(t);5<=(this.itemCollection.source=e).length?(5<e.length?this.btnRight.visible=this.btnLeft.visible=!0:this.btnRight.visible=this.btnLeft.visible=!1,this.skillDGrp.width=494):this.btnRight.visible=this.btnLeft.visible=!1},t.prototype.showItemUI=function(t,e,i){var s=TE91.FHH52(t,e);i="-1"==s.elixir?10:i;for(var o=1;o<=10;o++)i<o?this.itemS[o-1].hideCZTx():this.itemS[o-1].showCZTx();if(10<=i?App.THH33.aUE(this.wGrp,"xjfs_mc_tpz",-45,-60,-1):App.THH33.rEf(this.wGrp,"xjfs_mc_tpz"),"-1"==s.elixir)this.btnFly.verticalCenter=0,this.btnFly.label=O3.tr(8752),this.btnFly.enabled=!1,this.lbStr3.visible=this.lbStr3.includeInLayout=!1,this.itemCost.visible=this.itemCost.includeInLayout=!1,this.lbCost.visible=this.lbCost.includeInLayout=!1,this.btnFly.imgNew.visible=!1;else{this.btnFly.verticalCenter=30;var r=void 0,n=void 0,a=void 0,h=void 0;h=(n=(a=i<10?(this.btnFly.label=O3.tr(8746),r=TE91.gIV("evoItem1"),Number(s.elixir)):(this.btnFly.label=O3.tr(8747),r=TE91.gIV("evoItem2"),Number(s.grow)),N12.giC(r)),N12.gID(r)),this.btnFly.imgNew.visible=!1,this.lbCost.textFlow=a<=n?(O4.FF89(L17.A30)||(this.btnFly.imgNew.visible=!0),M18.HTP.parse(O3.tr(8749,"",n+"/"+a))):M18.HTP.parse(O3.tr(8749,n,"/"+a)),this.itemCost.setData(h)}},t.prototype.showAttrUI=function(t,e,i){var s=TE91.FHH52(t,e),o=TF82.FL55(TE91.FK97(t,e,i));if(this.flyGrpL.data={type:"intAttr",data:o},this.lbPower.text=M10.gAG(o)+"","-1"==s.elixir)this.lbStr1.horizontalCenter=this.img1.horizontalCenter=this.flyGrpL.horizontalCenter=-82,this.imgJt.visible=this.img2.visible=this.lbStr2.visible=this.flyGrpN.visible=!1;else{var r=TF82.FL55(TE91.FK97(t,e+Math.floor((i+1)/11),(i+1)%11));this.flyGrpN.data={type:"intAttr",data:r}}},t.prototype.btnFlyEvent=function(){var t=App.CM.gtM(O6.B58).localClick,e=TE91.FHH52(t.bsa.base.evotype,t.im.eSg);if("-1"==e.elixir){var i=O3.tr(8752);P18.sDP(i,!0)}else{var s=void 0,o=void 0,r=void 0;if(t.im.eLv<10)s=TE91.gIV("evoItem1"),r=Number(e.elixir),o=N12.giC(s),N12.gID(s),r<=o?this.flyTime<=Date.now()&&(App.CM.apF(O6.B58,J6.A41,t.id),this.flyTime=Date.now()+300):App.VM.open(O7.G87,s,Number(r)-o);else if(s=TE91.gIV("evoItem2"),r=Number(e.grow),o=N12.giC(s),N12.gID(s),r<=o){if(this.flyTime<=Date.now()){App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(8751)),this,function(){App.CM.apF(O6.B58,J6.A41,t.id)}),this.flyTime=Date.now()+300}}else App.VM.open(O7.G87,s,Number(r)-o)}},t.prototype.ckDotEvnet=function(){this.ckDotTime<=Date.now()&&(App.CM.apF(O6.B82,L13.A24,L17.A30),this.ckDotTime=Date.now()+300)},t.prototype.onClickRight=function(){var t=(this.skillDGrp.contentWidth-(this.itemCollection.length-1)*this.listGap)/this.itemCollection.length+this.listGap,e=Math.floor((this.skillDGrp.scrollH+5*t)/t);e>=this.itemCollection.length-5&&(e=this.itemCollection.length-5),this.skillDGrp.scrollH=e*t},t.prototype.onClickLeft=function(){var t=(this.skillDGrp.contentWidth-(this.itemCollection.length-1)*this.listGap)/this.itemCollection.length+this.listGap,e=Math.ceil((this.skillDGrp.scrollH-5*t)/t);e<0&&(e=0),this.skillDGrp.scrollH=e*t},t.prototype.closeSelf=function(){App.VM.close(O7.D10)},t}(BaseEuiView);__reflect(ImmortalFlyView.prototype,"ImmortalFlyView");var ImmortalIntAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalIntAttrSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.ZQ14(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8176),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(8177)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(8179))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0];this.ZL89(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZL89=function(t){var e=TE91.FK93(t.id),i={type:"intAttrView",data:TE91.FL55(TE91.FI70(t.lv)),star:TE91.FE13(t.sLv,t.sSo),int:TE91.FJ92(e.base.aptitype,t.aSg)};this.IntAttrData.data=i},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.closeSelf=function(){App.VM.close(O7.A75)},t}(BaseEuiView);__reflect(ImmortalIntAttrView.prototype,"ImmortalIntAttrView");var ImmortalIntView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.viewName="ImmortalIntView",i.skinName=ImmortalIntSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this.intS=[this.int0,this.int1,this.int2,this.int3,this.int4],this.fsKSPos=[{x:-155,y:170},{x:-80,y:190},{x:-5,y:210},{x:80,y:190},{x:170,y:150}],this.fsJSPos=[{x:-20,y:135},{x:-10,y:130},{x:-5,y:155},{x:10,y:130},{x:20,y:135}],this.lbStr0.text=O3.tr(8161),this.lbStr2.text=O3.tr(8157),this.btnIntUp.label=O3.tr(8159),this.intMaxLb.text=O3.tr(8141),this.lbStr1.text=O3.tr(8139),this.lbStr3.text=O3.tr(8137),this.activeBtn.label=O3.tr(8140)},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ImmortalIconItem},t.prototype.open=function(){var t=App.CM.gtM(O6.B58);t.localPanel=this.viewName;var e=t.ZF65();t.localClick?this._curImmortal?this._curImmortal&&this._curImmortal.id!=t.localClick.id&&(this._curImmortal=null,this._curImmortal=t.localClick):this._curImmortal=t.localClick:(t.localClick=e[0],this._curImmortal=t.localClick),this.ZD18(t),this.ZJ8(),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.AttrCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP14,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.btnIntUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX52,this),this.cardIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX51,this),this.powerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this)},t.prototype.close=function(){this._itemArray.removeAll(),this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null,this._curImmortal=null,this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.AttrCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP14,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.btnIntUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX52,this),this.cardIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX51,this),this.powerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this)},t.prototype.endScroller=function(){if(App.CM.gtM(O6.B58).scrollerIH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&0<r.red){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&0<n.red){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.ZP14=function(){App.VM.open(O7.A75,this._curImmortal.im)},t.prototype.ZX51=function(){var t={type:0,im:{id:this._curImmortal.id}};App.VM.open(O7.C27,t)},t.prototype.ZP7=function(){var t=this._curImmortal.state;if(0==t||5==t){var e=this._curImmortal.id;App.VM.open(O7.B56,null,e)}else{var i=this._curImmortal.im;App.VM.open(O7.B56,i)}},t.prototype.ZJ9=function(){App.VM.open(O7.A56)},t.prototype.ZS95=function(){if(0<N12.giC(this._curImmortal.bsa.base.activateitem))App.CM.apF(O6.B58,J6.A28,this._curImmortal.id);else{var t=O3.tr(8147);P18.sDP(t,!1)}},t.prototype.ZX52=function(){var t,e,i,s=App.CM.gtM(O6.B58).localClick,o=s.bsa.base,r=TE91.FI68(o.aptitype,s.im.aSg);i=5==s.im.aLv?(t=s.bsa.base.brokenitem,e=N12.giC(t),r.grow):(t=o.aptiitem,e=N12.giC(t),r.elixir),e>=Number(i)?App.CM.apF(O6.B58,J6.A37,s.id):App.VM.open(O7.G87,t,Number(i)-e)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF43){switch(e){case P4.P52:t.localClick=t.ZHH9(),this._curImmortal=null,this._curImmortal=t.localClick;break;case J6.A36:this.onSelectNew(t);break;case P4.E59:t.localClick=t.ZHH9(),this._curImmortal=null,this._curImmortal=t.localClick,this.showFSTX(t)}this.ZD18(t)}},t.prototype.onSelectNew=function(t){this._curImmortal.id!=t.localClick.id&&(this._curImmortal=null,this._curImmortal=t.localClick),this.ZJ8()},t.prototype.showFSTX=function(t){var i=this;0==t.localClick.im.aLv&&egret.Tween.get(this).call(function(){for(var t=function(t){i["fsGrp"+t].visible=!0,i["fsGrp"+t].horizontalCenter=i.fsKSPos[t].x,i["fsGrp"+t].y=i.fsKSPos[t].y,App.THH33.rEf(i["fsGrp"+t],"xj_mc_hm_fx"),App.THH33.aUE(i["fsGrp"+t],"xj_mc_hm_fx",0,0,-1),egret.Tween.get(i["fsGrp"+t]).to({horizontalCenter:i.fsJSPos[t].x,y:i.fsJSPos[t].y},400).pause().call(function(){i["fsGrp"+t].visible=!1})},e=0;e<5;e++)t(e)}).wait(400).call(function(){App.THH33.aUE(i.fsLastGrp,"xj_mc_hysj",0,0,1)})},t.prototype.ZD18=function(t){this.itemScroller.viewport.scrollH=t.scrollerIH;var e=t.ZF65();P7.ObjectSet(this._itemArray.source,e),this._itemArray.refresh();var i=t.localClick;this.ZP8(i),this.countPower(i),this.ZHH10(t),this.endScroller()},t.prototype.ZHH10=function(t){this.powerLb.textFlow=M18.HTP.parse(O3.tr(8135,t.ZX38())),this.battleLb.textFlow=M18.HTP.parse(O3.tr(8136,t.getNum()))},t.prototype.countPower=function(t){if(0==t.state||5==t.state)this.score.text=M10.gAG(t.bsa.base.baseattr)+"";else{var e=App.CM.gtM(O6.B58).countPower(t.im);this.score.text=e+""}},t.prototype.ZP8=function(t){0==t.state||5==t.state?this.showNoActUI(t):this.showIntUI(t)},t.prototype.showNoActUI=function(t){this.noActiveGrp.visible=!0,this.noActiveGroup.visible=!0,this.activeGroup.visible=!1,this.IntCHGrp.visible=!1,this.lvGrp.visible=!1;var e=N12.gID(t.bsa.base.activateitem),i=N12.giC(t.bsa.base.activateitem);for(var s in this.cardIcon.source=e.icon,this.cardBg.source=N12.getBox(t.bsa.base.quality),this.lbActiveCost.text=O3.tr(8138,t.bsa.base.name),this.activeBtn.imgNew.visible=0<i?(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,"",i)),P16.sGF(this.activeBtn,!1),!0):(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,i,"")),P16.sGF(this.activeBtn,!0),!1),this.intS)this.intS[s].hideCZTx()},t.prototype.showIntUI=function(t){App.CM.gtM(O6.B58);this.noActiveGrp.visible=!1,this.noActiveGroup.visible=!1,this.activeGroup.visible=!0,this.IntCHGrp.visible=!0,this.intGrp.visible=!0,this.lvGrp.visible=!0,this.lbLv.text=O3.tr(7126,t.im.aSg),this.showIntDataG(t),this.ZX53(t)},t.prototype.ZX53=function(t){var e=t.bsa.base,i=TE91.FI68(e.aptitype,t.im.aSg),s=O1.getSkin(i.title);if(this.imgCH.source!=s.picture){var o=FightD.AV_RES_PATH+s.type+"/"+s.picture;FightRes.ZS35(this.imgCH,s.picture,o)}if(-1==i.grow){for(var r in this.imgJt.visible=!1,this.intS)this.intS[r].showCZTx();this.imgGood.visible=this.imgGood.includeInLayout=!1,this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8141),"")),this.btnIntUp.enabled=!1,P16.sGF(this.btnIntUp,!0),this.btnIntUp.imgNew.visible=!1}else{this.imgGood.visible=this.imgGood.includeInLayout=!0,this.btnIntUp.enabled=!0,P16.sGF(this.btnIntUp,!1),this.imgJt.visible=!0;var n=void 0,a=void 0,h=void 0,p=void 0;for(var r in 5<=t.im.aLv?(n=e.brokenitem,h=N12.gID(n),p=N12.giC(n),a=i.grow,this.btnIntUp.label=O3.tr(8189)):(n=e.aptiitem,h=N12.gID(n),p=N12.giC(n),a=i.elixir,this.btnIntUp.label=O3.tr(8159)),this.imgGood.setData(h),this.btnIntUp.imgNew.visible=a<=p?(this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,"",p+"/"+a)),!0):(this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,p,"/"+a)),!1),this.intS)Number(r)<t.im.aLv?this.intS[r].showCZTx():this.intS[r].hideCZTx()}},t.prototype.showIntDataG=function(t){var e=TE91.FI68(t.bsa.base.aptitype,t.im.aSg),i=TE91.FL55(TE91.FJ91(t.bsa.base.aptitype,t.im.aSg,t.im.aLv)),s=TE91.FJ92(t.bsa.base.aptitype,t.im.aSg),o={type:"intAttr",data:i};if(this.intLDataG.data=o,this.intLLb.text=O3.tr(8160,this.ZR45(Number(s))),this.AttrCheck.visible=1<s,-1==e.grow)this.intLLb.horizontalCenter=0,this.intLDataG.left=200,this.intNLb.visible=this.intNDataG.visible=!1;else{this.intLLb.horizontalCenter=-140,this.intLDataG.left=85,this.intNLb.visible=this.intNDataG.visible=!0;var r=TE91.FL55(TE91.FJ91(t.bsa.base.aptitype,t.im.aSg,t.im.aLv+1)),n=TE91.FJ92(t.bsa.base.aptitype,t.im.aSg+Math.floor(t.im.aLv/5)),a={type:"intAttr",data:r};this.intNDataG.data=a,this.intNLb.text=O3.tr(8160,this.ZR45(Number(n)))}},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t.prototype.ZJ8=function(){var t=App.CM.gtM(O6.B58).localClick.bsa.base;this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var e={id:t.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.immortalObj.setData(e,this.wGroup),this.immortalObj.action=Action.Stand},t}(BaseEuiView);__reflect(ImmortalIntView.prototype,"ImmortalIntView");var ImmortalLvExpView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalLvExpSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.itemS=[this.item0,this.item1,this.item2,this.item3],this.dlg.title=O3.tr(8568),this.btnLvUp.label=O3.tr(8567)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=App.CM.gtM(O6.B58);this.ZHH77(i),this.btnLvUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvnet,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF43&&e[0]==P4.V27&&(t.localClick=t.ZHH9(),this.ZHH77(t))},t.prototype.ZHH77=function(t){var e=this.getExpListM(t);for(var i in e){var s=e[i];this.itemS[i].data=s}this.lbLv.alpha,this.lbLv.text=O3.tr(8565,t.localClick.im.lv),this.upDataUI()},t.prototype.getExpListM=function(t){var e=this,i=TE91.FK96(),s=t.localClick.im,o=[],r=0;for(var n in i){var a=i[n],h=N12.giC(a.id),p=TE91.FJ90(s.lv,s.exp,r),l=0;0<p&&(l=0<=p-h*a.exp?h:Math.ceil(p/a.exp));var c={id:a.id,exp:a.exp,use:l,fn:function(){e.upDataUI()}};o.push(c),r+=a.exp*l}return o},t.prototype.getExp=function(){var t=0,e=0;for(var i in this.itemS)t+=this.itemS[i].useNum*this.itemS[i].exp,e+=this.itemS[i].useNum;return{exp:t,num:e}},t.prototype.FM20=function(){var t="";for(var e in this.itemS)this.itemS[e].useNum&&(0<t.length&&(t+=";"),t+=this.itemS[e].id+":"+this.itemS[e].useNum);return t},t.prototype.upDataUI=function(){var t=App.CM.gtM(O6.B58).localClick.im,e=this.getExp();this.lbLvN.text=TE91.FI69(t.lv,t.exp,e.exp),this.lbZj.textFlow=O3.tr2(8566,e.num,e.exp)},t.prototype.btnLvUpEvnet=function(){var t=App.CM.gtM(O6.B58),e=this.FM20();if(0<e.length)App.CM.apF(O6.B58,J6.A43,t.localClick.im.id,e);else{var i=O3.tr(8148);P18.sDP(i,!1)}},t.prototype.close=function(){s.prototype.close.call(this),this.btnLvUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvnet,this)},t.prototype.closeSelf=function(){App.VM.close(O7.B62)},t}(BaseEuiView);__reflect(ImmortalLvExpView.prototype,"ImmortalLvExpView");var ImmortalLvView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.expList={0:0,1:0,2:0,3:0,4:0},i.viewName="ImmortalLvView",i.skinName=ImmortalLvSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.showS=[this.show0,this.show1,this.show2,this.show3,this.show4],this.selectS=[this.select0,this.select1,this.select2,this.select3],this.ZS96(),this.lbStr.text=O3.tr(8144),this.btnLvUp.label=O3.tr(8569),this.btnCom.label=O3.tr(8153),this.btnShow.label=O3.tr(8152),this.lvMaxLb.text=O3.tr(8141),this.lbStr1.text=O3.tr(8137),this.lbStr2.text=O3.tr(8139),this.activeBtn.label=O3.tr(8140),this.lbLv0.text=O3.tr(8149,"")},t.prototype.initData=function(){o.prototype.initData.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ImmortalIconItem},t.prototype.open=function(){var t=App.CM.gtM(O6.B58);t.localPanel=this.viewName;t.ZF65();for(var e in t.localClick?this._curImmortal?this._curImmortal&&this._curImmortal.id!=t.localClick.id&&(this._curImmortal=null,this._curImmortal=t.localClick):this._curImmortal=t.localClick:(t.localClick=t.ZX35(),this._curImmortal=t.localClick),this.ZD18(t),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAddEvent,this),this.btnLvUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvnet,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX57,this),this.btnCom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnComEvent,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnShowEvent,this),this.cardIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX51,this),this.btnState.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX55,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX54,this),this.btnFly.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnFlyEvent,this),this.btnArt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnArtEvent,this),this.powerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this),this.showS)this.showS[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX58.bind(this,e),this);for(var e in this.selectS)this.selectS[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP15.bind(this,e),this);this.ZJ8()},t.prototype.close=function(){for(var t in this._itemArray.removeAll(),this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null,this._curImmortal=null,this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAddEvent,this),this.btnLvUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvnet,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX57,this),this.btnCom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnComEvent,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnShowEvent,this),this.cardIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX51,this),this.btnState.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX55,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX54,this),this.btnFly.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnFlyEvent,this),this.powerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this),this.showS)this.showS[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX58.bind(this,t),this);for(var t in this.selectS)this.selectS[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP15.bind(this,t),this);this.shareTimeHander&&App.K16.rBH(this.shareTimeHander),this.shareTimeHander=null},t.prototype.endScroller=function(){if(App.CM.gtM(O6.B58).scrollerIH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&0<r.red){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&0<n.red){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.ZX54=function(){App.VM.open(O7.B57)},t.prototype.btnFlyEvent=function(){if(0!=this._curImmortal.state&&5!=this._curImmortal.state)App.VM.open(O7.D10);else{var t=O3.tr(8750);P18.sDP(t,!1)}},t.prototype.btnArtEvent=function(){App.VM.open(O7.A76)},t.prototype.ZX55=function(){4==this._curImmortal.state?App.VM.open(O7.D81,this._curImmortal.id):App.CM.apF(O6.B58,J6.A21,this._curImmortal.id,0)},t.prototype.ZX51=function(){var t={type:0,im:{id:this._curImmortal.id}};App.VM.open(O7.C27,t)},t.prototype.ZP7=function(){var t=this._curImmortal.state;if(0==t||5==t){var e=this._curImmortal.id;App.VM.open(O7.B56,null,e)}else{var i=this._curImmortal.im;App.VM.open(O7.B56,i)}},t.prototype.ZJ9=function(){App.VM.open(O7.A56)},t.prototype.btnComEvent=function(){App.VM.open(O7.D2)},t.prototype.btnShowEvent=function(){var t=P7.FF60(),e=N18.FC83(t);if(O4.getLv()<e.needlevel)P18.sDP(M18.format(K18.init.commonDesc1.value,[e.needlevel]));else{var i=this._curImmortal.bsa.base.name,s=N18.FF97(this._curImmortal.bsa.base.quality),o=M18.format("$0,$1",[i,s.colour]),r={nid:F8.A10,channelId:t,param:o,infoId:this._curImmortal.id};App.CM.apF(O6.C13,O12.A13,r)}},t.prototype.setALBtnRed=function(){var t=App.CM.gtM(O6.B58);0<this.FM20().length?this.btnAdd.label=O3.tr(8146):this.btnAdd.label=O3.tr(8145),t.localClick.im&&t.localClick.im.lv<TE91.FI66(TE91.lv)&&(this.btnAdd.imgNew.visible=0<this.ZX56()||0<t.getExpRed(),this.btnLvUp.imgNew.visible=0<t.getExpRed())},t.prototype.getAddCount=function(){var t=TE91.FK96(),e=0;for(var i in t){e+=N12.giC(t[i].id)}return e},t.prototype.ZX56=function(){var t=0;for(var e in this.expList)0!=this.expList[e]&&t++;return t},t.prototype.ZS96=function(){for(var t in this.showS){var e={type:"show"};this.showS[t].data=e}var i=TE91.FK96();for(var t in this.selectS){e={type:"select",expData:i[t]};this.selectS[t].data=e}},t.prototype.ZX57=function(){this.expSelectGrp.visible=!1,this.expSIndex=null},t.prototype.ZX58=function(t){0!=this.expList[t]?(this.expList[t]=0,this.ZX59(),this.ZP16(),this.processBar.setAddNum(this.countExp())):(this.expSelectGrp.visible=!0,this.changeGrpPos(t),this.ZP16()),this.setALBtnRed()},t.prototype.ZX59=function(){var t=[];for(var e in this.expList)0!=this.expList[e]&&t.push(this.expList[e]),this.expList[e]=0;for(var e in this.showS)t[e]?(this.showS[e].setImgById(t[e]),this.expList[e]=t[e]):this.showS[e].setImgById(0)},t.prototype.changeGrpPos=function(t){this.expSelectGrp.horizontalCenter=[-40,-20,0,20,40][t],this.expSelectJt.horizontalCenter=[-150,-75,0,75,150][t]},t.prototype.ZP15=function(t){var e=this.selectS[t].lbCt.text,i=TE91.FK96()[t].id,s=this.ZX60();0<Number(e)?(this.expList[s]=i,this.showS[s].setImgById(i),this.processBar.setAddNum(this.countExp()),4<=s&&(this.expSelectGrp.visible=!1),this.ZP16()):App.VM.open(O7.G87,i,1),this.setALBtnRed()},t.prototype.ZX60=function(){for(var t in this.expList)if(0==this.expList[t])return t;return 4},t.prototype.ZP16=function(){var t=TE91.FK96();for(var e in this.selectS){var i=N12.giC(t[e].id);for(var s in this.expList)this.expList[s]==t[e].id&&i--;this.selectS[e].setNum(i)}},t.prototype.ZS95=function(){if(0<N12.giC(this._curImmortal.bsa.base.activateitem))App.CM.apF(O6.B58,J6.A28,this._curImmortal.id);else{var t=O3.tr(8147);P18.sDP(t,!1)}},t.prototype.countExp=function(){var t=TE91.FK96(),e=0;for(var i in this.expList)if(0!=this.expList)for(var s in t)t[s].id==this.expList[i]&&(e+=Number(t[s].exp));return e},t.prototype.btnAddEvent=function(){var t=this.FM20();if(0<t.length)App.CM.apF(O6.B58,J6.A43,this._curImmortal.id,t);else{if(0<App.CM.gtM(O6.B58).getExpRed()){for(var e in this.expList={0:0,1:0,2:0,3:0,4:0},this.getAddList(),this.expList)this.showS[e].setImgById(this.expList[e]);this.processBar.setAddNum(this.countExp())}else{var i=O3.tr(8147);P18.sDP(i,!1)}this.setALBtnRed()}},t.prototype.btnLvUpEvnet=function(){App.VM.open(O7.B62)},t.prototype.getAddList=function(){var t=TE91.FJ89(),e=0;for(var i in t)for(var s=N12.giC(t[i].id),o=0;o<s;o++){if(!(e<5))return;this.expList[e]=t[i].id,e++}},t.prototype.FM20=function(){var t=[];for(var e in this.expList)if(0!=this.expList[e]){var i=TE91.isInList(this.expList[e],t);if("-1"!=i){t[i].value=Number(t[i].value)+1;continue}var s={key:this.expList[e],value:1};t.push(s)}return TF82.FL55(t)},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TF43){switch(e){case P4.P52:t.localClick=t.ZHH9(),this._curImmortal=null,this._curImmortal=t.localClick,this.ZJ8();break;case J6.A36:this.onSelectNew(t);break;case P4.V27:this.onLvUp(t),t.localClick=t.ZHH9(),this._curImmortal=null,this._curImmortal=t.localClick;break;case P4.R19:break;case P4.B8:t.localClick=t.ZHH9(),this._curImmortal=null,this._curImmortal=t.localClick;break;case P4.S79:t.localClick=t.ZHH9()}this.ZD18(t)}else if(t instanceof THH9){var i=App.CM.gtM(O6.B58);this.ZD18(i)}if(t instanceof TG93&&this.ZI18(t),t instanceof TG12){var s=App.CM.gtM(O6.B58);this.ZD18(s)}},t.prototype.ZI18=function(t){this.ZX7(t)},t.prototype.ZX7=function(t){var e=this;if(this.btnShow.visible){var i=t.ZR28(F8.A10);if(i<=0)this.btnShow.enabled=!0,this.btnShow.label=O3.tr(1472);else{var s=i;this.btnShow.enabled=!1,this.btnShow.label=s.toString(),this.shareTimeHander||(this.shareTimeHander=App.K16.doTimer(1e3,i,function(){e.btnShow.enabled=!1,s--,e.btnShow.label=s.toString()},this,function(){e.btnShow.enabled=!0,e.btnShow.label=O3.tr(1472),App.K16.rBH(e.shareTimeHander),e.shareTimeHander=null}))}}},t.prototype.onSelectNew=function(t){if(this._curImmortal.id!=t.localClick.id)for(var e in this._curImmortal=null,this._curImmortal=t.localClick,this.expList={0:0,1:0,2:0,3:0,4:0},this.expList)this.showS[e].setImgById(this.expList[e]);this.ZJ8()},t.prototype.onLvUp=function(t){for(var e in this.expList={0:0,1:0,2:0,3:0,4:0},this.expList)this.showS[e].setImgById(this.expList[e])},t.prototype.ZD18=function(t){this.itemScroller.viewport.scrollH=t.scrollerIH;var e=t.ZF65();P7.ObjectSet(this._itemArray.source,e),this._itemArray.refresh();var i=t.localClick,s={data:i.bsa.skill,im:i.im};this.skill0.data=s;var o={data:i.bsa.ability,im:i.im};this.skill1.data=o,this.ZP8(i),this.btnCom.imgNew.visible=0<t.getComRed(),this.btnEquip.imgNew.visible=0<t.ZP1()||0<t.ZX31(),this.btnArt.imgNew.visible=0<t.ZX32()||0<t.ZP2(),this.btnFly.imgNew.visible=0<t.getFlyRed(t.localClick),this.expSelectGrp.visible=!1,this.countPower(i),this.ZHH10(t),this.endScroller(),this.setALBtnRed()},t.prototype.ZHH10=function(t){this.powerLb.textFlow=M18.HTP.parse(O3.tr(8135,t.ZX38())),this.battleLb.textFlow=M18.HTP.parse(O3.tr(8136,t.getNum()))},t.prototype.countPower=function(t){if(0==t.state||5==t.state)this.score1.text=M10.gAG(t.bsa.base.baseattr)+"";else{var e=App.CM.gtM(O6.B58).countPower(t.im);this.score1.text=e+""}},t.prototype.ZP8=function(t){0==t.state||5==t.state?this.showNoActUI(t):this.showLvUI(t)},t.prototype.showNoActUI=function(t){this.btnState.visible=!1,this.noActiveGrp.visible=!0,this.noActiveGroup.visible=!0,this.activeGroup.visible=!1,this.lvGrp.visible=!1;var e=N12.gID(t.bsa.base.activateitem),i=N12.giC(t.bsa.base.activateitem);this.cardIcon.source=e.icon,this.cardBg.source=N12.getBox(t.bsa.base.quality),this.lbActiveCost.text=O3.tr(8138,t.bsa.base.name),this.activeBtn.imgNew.visible=0<i?(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,"",i)),P16.sGF(this.activeBtn,!1),!0):(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,i,"")),P16.sGF(this.activeBtn,!0),!1)},t.prototype.showLvUI=function(t){var e=App.CM.gtM(O6.B58);this.btnState.visible=!0,this.noActiveGrp.visible=!1,this.noActiveGroup.visible=!1,this.activeGroup.visible=!0,this.lvGrp.visible=!0;var i=TE91.lv[t.im.lv];"-1"!=i.reqexp?(this.processBar.setStarData(t.im.exp,i.reqexp),this.showGrp.visible=!0,this.btnAdd.enabled=this.btnLvUp.enabled=!0,P16.sGF(this.btnAdd,!1),P16.sGF(this.btnLvUp,!1),this.btnAdd.imgNew.visible=0<this.getAddCount(),this.btnLvUp.imgNew.visible=!1):(this.btnAdd.imgNew.visible=!1,this.btnLvUp.imgNew.visible=!1,this.processBar.showMaxUI(),this.showGrp.visible=!1,this.btnAdd.enabled=this.btnLvUp.enabled=!1,P16.sGF(this.btnAdd,!0),P16.sGF(this.btnLvUp,!0)),this.btnState.imgNew.visible=0<e.ZP4(t.bsa.base),4==t.state?this.btnState.label=O3.tr(8143):this.btnState.label=O3.tr(8154),this.lbLv.text=t.im.lv+"";var s=App.CM.gtM(O6.C13);this.ZX7(s)},t.prototype.ZJ8=function(){var t=App.CM.gtM(O6.B58).localClick.bsa.base;this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var e={id:t.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.immortalObj.setData(e,this.wGroup),this.immortalObj.action=Action.Stand},t}(BaseEuiView);__reflect(ImmortalLvView.prototype,"ImmortalLvView");var ImmortalMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.F53,O7.D80,"ImmortalLvView",this.content),App.VM.rgS(O7.F53,O7.C26,"ImmortalStarView",this.content),App.VM.rgS(O7.F53,O7.D1,"ImmortalIntView",this.content),App.VM.rgS(O7.F53,O7.D3,"ImmortalCulView",this.content);var t=[O3.tr(8127),O3.tr(8129),O3.tr(8128),O3.tr(8130)],e=[O7.D80,O7.D1,O7.C26,O7.D3];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.D80;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){this.viewId=t;var e=App.CM.gtM(O6.B58);switch(t){case O7.D80:this.btnList.ZM66(t),this.title=O3.tr(8131);break;case O7.C26:this.btnList.ZM66(t),this.title=O3.tr(8132);break;case O7.D1:this.btnList.ZM66(t),this.title=O3.tr(8133);break;case O7.D3:if(0<e.getImsNum())this.btnList.ZM66(t),this.title=O3.tr(8134);else{var i=O3.tr(8191);P18.sDP(i,!1)}}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),P7.FK28();var i=App.CM.gtM(O6.B58);i.localClick=null,i.localPanel=null,i.scrollerIH=0},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B58);this.btnList.ZHH58(O7.D80,t.getLvViewRed()),this.btnList.ZHH58(O7.C26,t.ZS88()),this.btnList.ZHH58(O7.D1,t.ZX29()),this.btnList.ZHH58(O7.D3,t.ZX30())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t.prototype.openHelpView=function(){var t,e;e=this.viewId==O7.D80?(t=O3.tr(8267),O3.tr(8268)):this.viewId==O7.C26?(t=O3.tr(8269),O3.tr(8270)):this.viewId==O7.D1?(t=O3.tr(8271),O3.tr(8272)):(this.viewId,O7.D3,t=O3.tr(8273),O3.tr(8274));var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t}(BasePanelView);__reflect(ImmortalMainView.prototype,"ImmortalMainView");var ImmortalShareView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalShareSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.baseS=[this.base0,this.base1,this.base2],this.starS=[this.star0,this.star1,this.star2],this.intS=[this.int0,this.int1,this.int2],this.grp4.visible=!1,this.dlg.title=O3.tr(8131),this.lbStr0.text=O3.tr(8163),this.lbStr1.text=O3.tr(8164),this.lbStr2.text=O3.tr(8165)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.immortalData=t[0],this.immortalId=t[1],this.immortalData?this.ZL89(this.immortalData):this.ZS97(this.immortalId)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZS97=function(t){this.noActiveGrp.visible=!0,this.lvGrp.visible=!1,this.imgCH.visible=!1;var e=TE91.FK93(t),i={data:e.skill,im:null};this.skill0.data=i;var s={data:e.ability,im:null};this.skill1.data=s,this.lbName.text=e.base.name;var o=TE91.FL55(TE91.FF18(t,0));this.setDataBySLS(o,this.baseS),this.score.text=M10.gAG(o)+"";var r=TE91.FE13(0,0);this.setDataBySLS(o,this.starS,r),this.intBfb.visible=this.intBfb.includeInLayout=1<TE91.FJ92(e.base.aptitype,0);var n=TE91.FL55(TE91.FJ91(e.base.aptitype,0,0));this.setDataBySLS(n,this.intS),this.ZJ8(t)},t.prototype.ZL89=function(t){var e=TE91.FK93(t.id),i={data:e.skill,im:t};this.skill0.data=i;var s={data:e.ability,im:t};this.skill1.data=s,this.lbName.text=e.base.name,this.lbLv0.text=t.lv+"",this.lbLv.text=O3.tr(8149,"");var o=TE91.FL55(TE91.FF18(t.id,t.lv));this.setDataBySLS(o,this.baseS);var r=TE91.FE13(t.sLv,t.sSo);this.setDataBySLS(o,this.starS,r);var n=TE91.FI68(e.base.aptitype,t.aSg),a=O1.getSkin(n.title);if(this.imgCH.source!=a.picture){var h=FightD.AV_RES_PATH+a.type+"/"+a.picture;FightRes.ZS35(this.imgCH,a.picture,h)}this.intBfb.visible=this.intBfb.includeInLayout=0<TE91.FJ92(e.base.aptitype,t.aSg);var p=this.ZR45(Number(TE91.FJ92(e.base.aptitype,t.aSg))),l=M18.HTP.parse(O3.tr(8266,O3.tr(8160,""),p));this.intBfb.textFlow=l;var c=TE91.FL55(TE91.FJ91(e.base.aptitype,t.aSg,t.aLv));this.setDataBySLS(c,this.intS),this.ZJ8(t.id),this.showPower(this.immortalData)},t.prototype.ZJ8=function(t){var e=TE91.FK93(t).base;this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var i={id:e.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.immortalObj.setData(i,this.wGroup),this.immortalObj.action=Action.Stand},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.setDataBySLS=function(t,e,i){void 0===i&&(i=1);var s=t.split(";");for(var o in s){var r=P7.FM6(P7.str2kv(s[o])).split(":");e[o].textFlow=M18.HTP.parse(O3.tr(8266,r[0]+"：",Math.ceil(Number(r[1])*i)))}},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t.prototype.showPower=function(t){var e=App.CM.gtM(O6.B58).countPower(t);this.score.text=Math.floor(e)+""},t.prototype.closeSelf=function(){App.VM.close(O7.B56)},t}(BaseEuiView);__reflect(ImmortalShareView.prototype,"ImmortalShareView");var ImmortalSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ImmortalSkillInfoSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr0.textFlow=M18.HTP.parse(O3.tr(8555)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(8180)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(8181)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(8556)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(8557))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.skillData=t[0].data,this.im=t[0].im,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.GX5()},t.prototype.GX5=function(){if(1==this.skillData.type){var t=this.skillData;this.grpLv.visible=!0,this.lbType.text=t.name;var e=this.im&&this.im.aSg?this.im.aSg:1;if(this.lbLv.text=1<e?e+"":"",TE91.FA29(t.skillid,e+1)){var i=TE91.FA29(t.skillid,e).desc;this.lbDesc.textFlow=(new egret.HtmlTextParser).parser(i);var s=TE91.FA29(t.skillid,e+1).desc;this.lbDescN.textFlow=(new egret.HtmlTextParser).parser(s),this.tjGrp.visible=this.tjGrp.includeInLayout=!0,this.lbLvTj.textFlow=O3.tr2(8559,e+1)}else{i=TE91.FA29(t.skillid,e).desc;this.lbDesc.textFlow=(new egret.HtmlTextParser).parser(i),this.lbDescN.textFlow=(new egret.HtmlTextParser).parser(O3.tr(8558)),this.tjGrp.visible=this.tjGrp.includeInLayout=!1}this.imgIcon.source=t.icon,O5.FB13(this.lbName,this.skillData.skillname,this.skillData.quality,1),this.imgBg.source=THH1.FB74(this.skillData.quality)}else{t=this.skillData;this.lbType.text=t.name,this.grpLv.visible=!1,this.lbDesc.textFlow=(new egret.HtmlTextParser).parser(this.skillData.desc),this.imgIcon.source=t.icon,O5.FB13(this.lbName,this.skillData.skillname,this.skillData.quality,1),this.imgBg.source=THH1.FB74(this.skillData.quality),this.lbStr3.visible=this.lbDescN.visible=this.tjGrp.visible=!1,this.lbStr3.includeInLayout=this.lbDescN.includeInLayout=this.tjGrp.includeInLayout=!1}},t.prototype.closeSelf=function(){App.VM.close(O7.B55)},t.prototype.close=function(){s.prototype.close.call(this),this.skillData=null,this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(ImmortalSkillView.prototype,"ImmortalSkillView");var ImmortalSopView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=ImmortalSopSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.equipS=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7],this.lbstr0.text=O3.tr(8293),this.lbstr1.text=O3.tr(8294),this.lbstr2.textFlow=M18.HTP.parse(O3.tr(8295)),this.stringLb2.text=O3.tr(8296),this.stringLb3.text=O3.tr(8296),this.sopMaxLb1.text=O3.tr(8299),this.sopMaxLb2.text=O3.tr(8299),this.sopCbtn.label=O3.tr(8297),this.sopHbtn.label=O3.tr(8298)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t in this.sopCbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sopCBtnEvent,this),this.sopHbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sopHBtnEvent,this),this.equipS)this.equipS[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose.bind(this,t),this);var e=App.CM.gtM(O6.B58);this.ZP17(e),this.countPower(e),this.chooseId=0,this.choose(0),null==this.timerHandler&&(this.showNorTween(),App.THH33.aUE(this.gEffect,"xj_mc_fztx3",-230,-300,-1),this.timerHandler=App.K16.doTimer(2e3,0,this.showNorTween,this))},t.prototype.choose=function(t){this.chooseId=t,this.changeUIById(this.chooseId),this.updataUIByID(this.chooseId),this.updataCostUI();var e=App.CM.gtM(O6.B58),i=Number(t)+1,s=e.ZS91(i);if(s){var o=TB84.FE15(s.tid);this.imgChoose.source=o.iconbig,this.imgChoose0.source=o.iconbig}else{o=TB84.FF20(i,1);this.imgChoose.source=o.iconbig,this.imgChoose0.source=o.iconbig}},t.prototype.changeUIById=function(t){for(var e=0,i=this.equipS;e<i.length;e++){i[e].imgSel.visible=!1}this.equipS[t].imgSel.visible=!0},t.prototype.updataUIByID=function(t){var e=App.CM.gtM(O6.B58),i=Number(t)+1;e.ZS91(i)?(this.noActiveGrp.visible=!1,this.sopGrp.visible=!0,this.showJDTUI(e)):(this.noActiveGrp.visible=!0,this.sopGrp.visible=!1)},t.prototype.close=function(){for(var t in this.sopCbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sopCBtnEvent,this),this.sopHbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sopHBtnEvent,this),this.equipS)this.equipS[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.choose.bind(this,t),this);App.THH33.rEf(this.gEffect,"xj_mc_fztx3"),this.cTH()},t.prototype.sopCBtnEvent=function(){var t=App.CM.gtM(O6.B58),e=Number(this.chooseId)+1;if(t.getSopMax(e)){var i=TB84.gIV("xilianItem1"),s=i.split(":")[0],o=N12.giC(s),r=i.split(":")[1];o>=Number(r)?App.CM.apF(O6.B58,J6.A17,e,1):App.VM.open(O7.G87,s,Number(r)-o)}else{var n=O3.tr(8299);P18.sDP(n,!1)}},t.prototype.sopHBtnEvent=function(){var t=App.CM.gtM(O6.B58),e=Number(this.chooseId)+1;if(t.getSopMax(e)){var i=TB84.gIV("xilianItem2"),s=i.split(":")[0],o=N12.giC(s),r=i.split(":")[1];o>=Number(r)?App.CM.apF(O6.B58,J6.A17,e,2):App.VM.open(O7.G87,s,Number(r)-o)}else{var n=O3.tr(8299);P18.sDP(n,!1)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF43)switch(e){case P4.HH60:this.ZD18(t),this.showJDTUI(t,!0)}else if(t instanceof THH9){this.updataCostUI();var i=App.CM.gtM(O6.B58);this.ZP17(i)}},t.prototype.polishEvent=function(){},t.prototype.ZD18=function(t){this.ZP17(t),this.updataCostUI(),this.countPower(t)},t.prototype.countPower=function(t){this.powerLb.text=t.ZX39()+""},t.prototype.ZP17=function(t){for(var e in this.equipS){var i=Number(e)+1,s={pos:i,esData:t.ZS91(i),baseData:TB84.FF20(i,1),view:"ImmortalSopView"};this.equipS[e].data=s}},t.prototype.updataCostUI=function(){var t=App.CM.gtM(O6.B58),e=Number(this.chooseId)+1;if(t.ZS91(e))if(t.getSopMax(e)){this.sopCHGrp.visible=this.sopCCGrp.visible=!0,this.sopMaxLb1.visible=this.sopMaxLb2.visible=!1,P16.sGF(this.sopCbtn,!1),P16.sGF(this.sopHbtn,!1),this.lvTip.visible=!1;var i=(d=TB84.gIV("xilianItem1")).split(":")[0],s=N12.giC(i),o=N12.gID(i);this.sopCItem.setData(o);var r=d.split(":")[1];s>=Number(r)?(this.sopCbtn.imgNew.visible=!0,this.sopCCostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",s+"/"+r))):(this.sopCbtn.imgNew.visible=!1,this.sopCCostLb.textFlow=M18.HTP.parse(O3.tr(8121,s,"/"+r)));var n=TB84.gIV("xilianItem2"),a=n.split(":")[0],h=N12.giC(a),p=N12.gID(a);this.sopHItem.setData(p);var l=n.split(":")[1];h>=Number(l)?(this.sopHbtn.imgNew.visible=!0,this.sopHCostLb.textFlow=M18.HTP.parse(O3.tr(8121,"",h+"/"+l))):(this.sopHbtn.imgNew.visible=!1,this.sopHCostLb.textFlow=M18.HTP.parse(O3.tr(8121,h,"/"+l)))}else{var c=t.ZS91(e),u=TB84.FE15(c.tid);if(10<=u.quality)this.lvTip.visible=!1;else{var d=TB84.FF20(e,Number(u.quality)+1);this.lvTip.visible=!0,this.lvTip.textFlow=M18.HTP.parse(O3.tr(8329,d.name))}this.sopCHGrp.visible=this.sopCCGrp.visible=!1,this.sopMaxLb1.visible=this.sopMaxLb2.visible=!0,P16.sGF(this.sopCbtn,!0),P16.sGF(this.sopHbtn,!0),this.sopHbtn.imgNew.visible=!1,this.sopCbtn.imgNew.visible=!1}else this.lvTip.visible=!1},t.prototype.showJDTUI=function(t,e){void 0===e&&(e=!1);var i=Number(this.chooseId)+1,s=t.ZS91(i),o=TB84.FE15(s.tid);e?this.setJDTUI(o.attrlimit,s.pa.ats,s.add.ats):this.setJDTUI(o.attrlimit,s.pa.ats)},t.prototype.setJDTUI=function(t,e,i){void 0===i&&(i=[]);var s=t.split(";");for(var o in s){var r=s[o].split(":"),n=P7.FM5(P7.str2kv(s[o])).split(":");this["attrName"+o].text=n[0];var a=this.getVInList(r[0],e);this["attrBar"+o].setStarData(a,r[1]);var h=this.getVInList(r[0],i);this["attrBar"+o].showAddAttr(h)}},t.prototype.getVInList=function(t,e){var i=0;for(var s in e)e[s].k==t&&(i=e[s].v);return i},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.showNorTween=function(){egret.Tween.get(this.imgChoose).to({verticalCenter:8},1e3).to({verticalCenter:0},1e3).pause(),this.imgChoose0.alpha=0,egret.Tween.get(this.imgChoose0).to({verticalCenter:8,alpha:.15},1e3).to({verticalCenter:0,alpha:0},1e3).pause()},t}(BaseEuiView);__reflect(ImmortalSopView.prototype,"ImmortalSopView");var ImmortalStarView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.viewName="ImmortalStarView",i.skinName=ImmortalStarSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this.starS=[this.star0,this.star1,this.star2,this.star3,this.star4,this.star5,this.star6],this.lbStr0.text=O3.tr(8155),this.lbStr2.text=O3.tr(8157),this.btnStarUp.label=O3.tr(8156),this.starLLb.text=O3.tr(8186),this.starNLb.text=O3.tr(8187),this.starMaxLb.text=O3.tr(8141),this.lbStr1.text=O3.tr(8139),this.lbStr3.text=O3.tr(8137),this.activeBtn.label=O3.tr(8140)},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ImmortalIconItem},t.prototype.open=function(){var t=App.CM.gtM(O6.B58);t.localPanel=this.viewName;var e=t.ZF65();t.localClick?this._curImmortal?this._curImmortal&&this._curImmortal.id!=t.localClick.id&&(this._curImmortal=null,this._curImmortal=t.localClick):this._curImmortal=t.localClick:(t.localClick=e[0],this._curImmortal=t.localClick),this.ZD18(t),this.ZJ8(),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.btnStarUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS98,this),this.cardIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX51,this),this.powerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this)},t.prototype.close=function(){this._itemArray.removeAll(),this.cTH(),this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null,this._curImmortal=null,this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS95,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP7,this),this.btnStarUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZS98,this),this.cardIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX51,this),this.powerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ9,this)},t.prototype.endScroller=function(){if(App.CM.gtM(O6.B58).scrollerIH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&0<r.red){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&0<n.red){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.ZX51=function(){var t={type:0,im:{id:this._curImmortal.id}};App.VM.open(O7.C27,t)},t.prototype.ZP7=function(){var t=this._curImmortal.state;if(0==t||5==t){var e=this._curImmortal.id;App.VM.open(O7.B56,null,e)}else{var i=this._curImmortal.im;App.VM.open(O7.B56,i)}},t.prototype.ZJ9=function(){App.VM.open(O7.A56)},t.prototype.ZS95=function(){if(0<N12.giC(this._curImmortal.bsa.base.activateitem))App.CM.apF(O6.B58,J6.A28,this._curImmortal.id);else{var t=O3.tr(8147);P18.sDP(t,!1)}},t.prototype.ZS98=function(){var t=App.CM.gtM(O6.B58).localClick,e=TE91.gIV("StarAdvItem"),i=N12.giC(e),s=TE91.star[t.im.sLv+1].elixir;i>=Number(s)?App.CM.apF(O6.B58,J6.A32,t.id):App.VM.open(O7.G87,e,Number(s)-i)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF43){switch(e){case P4.P52:this._curImmortal=null,this._curImmortal=t.localClick,t.localClick=t.ZHH9();break;case J6.A36:this.onSelectNew(t);break;case P4.S77:t.localClick=t.ZHH9(),this._curImmortal=null,this._curImmortal=t.localClick,this.onStarUp(t)}this.ZD18(t)}else if(t instanceof THH9){var i=App.CM.gtM(O6.B58);this.ZD18(i)}},t.prototype.onSelectNew=function(t){this._curImmortal.id!=t.localClick.id&&(this._curImmortal=null,this._curImmortal=t.localClick),this.ZJ8()},t.prototype.onStarUp=function(t){var e=t.localClick.im.sSo;this.starS[(e+6)%7].showPZTX()},t.prototype.ZD18=function(t){this.itemScroller.viewport.scrollH=t.scrollerIH;var e=t.ZF65();P7.ObjectSet(this._itemArray.source,e),this._itemArray.refresh();var i=t.localClick;this.ZP8(i),this.countPower(i),null==this.timerHandler&&(this.GY14(),this.timerHandler=App.K16.doTimer(1e3,0,this.GY14,this)),this.ZHH10(t),this.endScroller()},t.prototype.ZHH10=function(t){this.powerLb.textFlow=M18.HTP.parse(O3.tr(8135,t.ZX38())),this.battleLb.textFlow=M18.HTP.parse(O3.tr(8136,t.getNum()))},t.prototype.countPower=function(t){if(0==t.state||5==t.state)this.score.text=M10.gAG(t.bsa.base.baseattr)+"";else{var e=App.CM.gtM(O6.B58).countPower(t.im);this.score.text=e+""}},t.prototype.ZP8=function(t){0==t.state||5==t.state?this.showNoActUI(t):this.showStarUI(t)},t.prototype.showNoActUI=function(t){this.noActiveGrp.visible=!0,this.noActiveGroup.visible=!0,this.activeGroup.visible=!1,this.gStars.visible=!1;var e=N12.gID(t.bsa.base.activateitem),i=N12.giC(t.bsa.base.activateitem);for(var s in this.cardIcon.source=e.icon,this.cardBg.source=N12.getBox(t.bsa.base.quality),this.lbActiveCost.text=O3.tr(8138,t.bsa.base.name),this.activeBtn.imgNew.visible=0<i?(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,"",i)),P16.sGF(this.activeBtn,!1),!0):(this.lbHave.textFlow=M18.HTP.parse(O3.tr(8121,i,"")),P16.sGF(this.activeBtn,!0),!1),this.starS)this.starS[s].hideCZTx()},t.prototype.showStarUI=function(t){var e=App.CM.gtM(O6.B58);this.noActiveGrp.visible=!1,this.noActiveGroup.visible=!1,this.activeGroup.visible=!0,this.gStars.visible=!0,this.ZX61(e,t),this.ZS99(t)},t.prototype.ZS99=function(t){if(this.setStar(this.gStars,t.im.sLv,!0),t.im.sLv>=TE91.starMax){for(var e in this.starS)this.starS[e].showCZTx();this.imgJt.visible=!1,this.imgGood.visible=this.imgGood.includeInLayout=!1,this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,O3.tr(8141),"")),this.btnStarUp.enabled=!1,P16.sGF(this.btnStarUp,!0),this.btnStarUp.imgNew.visible=!1}else{this.imgJt.visible=!0,this.imgGood.visible=this.imgGood.includeInLayout=!0,this.btnStarUp.enabled=!0,P16.sGF(this.btnStarUp,!1);var i=TE91.gIV("StarAdvItem"),s=N12.gID(i),o=N12.giC(i);this.imgGood.setData(s);var r=TE91.star[t.im.sLv+1].elixir;for(var e in this.btnStarUp.imgNew.visible=r<=o?(this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,"",o+"/"+r)),!0):(this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(8121,o,"/"+r)),!1),this.starS)Number(e)==t.im.sSo?this.starS[e].showCZTx():this.starS[e].hideCZTx()}},t.prototype.setStar=function(t,e,i){void 0===i&&(i=!1);for(var s=TE91.FG33(e-5),o=TE91.FG33(e),r=5*Math.ceil(e/5)-5,n=0;n<5;n+=1){var a=t.getChildAt(n);a.includeInLayout=a.visible=i||(!(e<5)||n<e),a.source=r+n<e?o:s}},t.prototype.ZX61=function(t,e){var i=TE91.FL55(TE91.FI70(1)),s=TE91.FE13(e.im.sLv,e.im.sSo),o={type:"starAttr",data:i,bl:this.ZR45(s)};if(this.starLDataG.data=o,e.im.sLv>=TE91.starMax)this.starNLb.visible=this.starNDataG.visible=!1,this.starLDataG.left=200,this.starLLb.horizontalCenter=0;else{this.starNLb.visible=this.starNDataG.visible=!0,this.starLDataG.left=85,this.starLLb.horizontalCenter=-140;var r=TE91.FE13(e.im.sLv,e.im.sSo+1),n={type:"starAttr",data:i,bl:this.ZR45(r)};this.starNDataG.data=n}},t.prototype.ZR45=function(t){var e=1e4*t;return Math.round(e)/100+"%"},t.prototype.ZJ8=function(){var t=App.CM.gtM(O6.B58).localClick.bsa.base;this.immortalObj&&(this.wGroup.removeChildren(),this.immortalObj.destory(),this.immortalObj=null),this.immortalObj=new FightGameObject;var e={id:t.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.immortalObj.setData(e,this.wGroup),this.immortalObj.action=Action.Stand},t.prototype.GY14=function(){for(var t in this.starS)this.starS[t].starTween()},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t}(BaseEuiView);__reflect(ImmortalStarView.prototype,"ImmortalStarView");var ImmortalArtData=function(){};__reflect(ImmortalArtData.prototype,"ImmortalArtData");var ImmortalArtShowData=function(){};__reflect(ImmortalArtShowData.prototype,"ImmortalArtShowData");var ImmortalBSAData=function(){};__reflect(ImmortalBSAData.prototype,"ImmortalBSAData");var ImmortalExpData=function(){};__reflect(ImmortalExpData.prototype,"ImmortalExpData");var ImmortalShowData=function(){};__reflect(ImmortalShowData.prototype,"ImmortalShowData");var ImmortalBase=function(){};__reflect(ImmortalBase.prototype,"ImmortalBase");var ImmortalSkill=function(){};__reflect(ImmortalSkill.prototype,"ImmortalSkill");var ImmortalAbility=function(){};__reflect(ImmortalAbility.prototype,"ImmortalAbility");var ImmortalData=function(){};__reflect(ImmortalData.prototype,"ImmortalData"),function(t){var e=function(){function g(){}return g.FK35=function(t){var e=t.gem_init,i=t.gem_gem,s=t.gem_master,o=t.gem_polish,r=t.gem_godcast;for(var n in i)g.gems[i[n].id]=i[n],i[n].level>g.jadeMaxLv&&(g.jadeMaxLv=i[n].level);var a=e.compose,h=e.unlockLv;g.compose=parseInt(a.value),g.openLv=parseInt(h.value),g.gem_polish=o,g.gem_master=s,g.gem_godcast=r,g.polishMaxLv=Reincarnate.Utils.mapkeyMax(g.gem_polish),g.init=e},g.gIV=function(t){return g.init[t].value},g.FJ95=function(t){return g.gems[t]},g.FF21=function(t){for(var e in g.gems){var i=g.gems[e];if(1===i.level&&i.type===t)return i.id}return 0},g.getl1Jade=function(t){if(g.isJade(t)){var e=g.FJ95(t),i=(e.level,e.type);for(var s in g.gems){var o=g.gems[s];if(1===o.level&&o.type===i)return o.id}}return 0},g.getNextJade=function(t){if(g.isJade(t)){var e=g.FJ95(t),i=e.level,s=e.type;for(var o in g.gems){var r=g.gems[o];if(r.level===i+1&&r.type===s)return r.id}}return 0},g.isJade=function(t){return!!g.gems[t]},g.getMasterLvData=function(t){return g.gem_master[t]},g.getCastDataByLv=function(t){return g.gem_godcast[t]},g.getCastAttr=function(t,e){g.getCastDataByLv(e);for(var i,s={},o=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)},r=Number(g.gIV("expBar"))/Number(g.gIV("godCastExp")),n=0;n<=e-1;n++){var a=g.getCastDataByLv(n),h=THH1.FI55(a.lvupattr),p=THH1.FI55(a.stepattr);for(var l in h)o(s,l,h[l]*r);for(var l in p)o(s,l,p[l])}var c=g.getCastDataByLv(e),u=THH1.FI55(c.lvupattr),d=THH1.FI55(c.stepattr);for(var l in u)o(s,l,u[l]*t);for(var l in d)o(s,l,d[l]);if(t<r){if(i={},t==r-1){var v=g.getCastDataByLv(e+1);if(v){var f=THH1.FI55(v.stepattr);for(var l in f)o(i,l,f[l])}}for(var l in s)o(i,l,s[l].value);for(var l in u)o(i,l,u[l])}else i=s;if(0==t&&0==e)for(var l in u)o(s,l,0);return{curData:s,nextData:i}},g.getCastStepRate=function(t){var e;g.getCastDataByLv(t);e=100*g.getCastDataByLv(t).attrrate;var i=g.getCastDataByLv(t+1);return{curRate:e,nextRate:i?100*i.attrrate:e}},g.getCastPower=function(t,e){for(var i=Number(g.gIV("expBar"))/Number(g.gIV("godCastExp")),s=0,o=0;o<=e-1;o++){var r=g.getCastDataByLv(o);s+=M10.gAG(r.lvupattr)*i,s+=M10.gAG(r.stepattr)}var n=g.getCastDataByLv(e);return s+=M10.gAG(n.lvupattr)*t,s+=M10.gAG(n.stepattr)},g.isMaxCastLv=function(t){return Number(g.gIV("expBar"))/Number(g.gIV("godCastExp"))<=t},g.gems={},g.gem_polish={},g.gem_godcast={},g.polishMaxLv=1,g.compose=255,g.openLv=255,g.jadeMaxLv=1,g}();t.Config=e,__reflect(e.prototype,"Jade.Config")}(Jade||(Jade={})),function(t){var e=function(){function t(){}return t.OpenMainView=1e3,t.CloseMainView=1002,t.OpenDecomposeView=1003,t.CloseDecomposeView=1004,t.OpenProps=1005,t.CloseProps=1006,t.OpenMasterView=1007,t.CloseMasterView=1008,t.LOAD_REQ=2001,t.LOAD_RES=2002,t.QUICK_WEAR_REQ=2003,t.QUICK_WEAR_RES=2004,t.COMPOSE1_REQ=2005,t.COMPOSE1_RES=2006,t.COMPOSE2_REQ=2007,t.COMPOSE2_RES=2008,t.DECOMPOSE_REQ=2009,t.DECOMPOSE_RES=2010,t.POLISH_REQ=2011,t.POLISH_RES=2012,t.CAST_REQ=2013,t.CAST_RES=2014,t.CHANGE_EQUIP=2015,t}();t.Const=e,__reflect(e.prototype,"Jade.Const")}(Jade||(Jade={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return App.VM.register(O7.I2,"JadeBaseMain",t,K17.UI_Main_TOP),t.rgF(i.Const.OpenMainView,t.GT93,t),t.rgF(i.Const.CloseMainView,t.GR99,t),App.VM.register(O7.E43,"JadeDecomposeView",t,K17.UI_Popup),t.rgF(i.Const.OpenDecomposeView,t.GL58,t),t.rgF(i.Const.CloseDecomposeView,t.GJ74,t),App.VM.register(O7.HH70,"JadeProps",t,K17.UI_Popup),t.rgF(i.Const.OpenProps,t.GY62,t),t.rgF(i.Const.CloseProps,t.GX73,t),App.VM.register(O7.G96,"JadeMasterView",t,K17.UI_Popup),t.rgF(i.Const.OpenMasterView,t.GR32,t),t.rgF(i.Const.CloseMasterView,t.GP40,t),new i.Model(t),t.model.aLV(O7.E43),t.model.aLV(O7.G96),t.model.aLV(O7.HH4),t.model.aLV(O7.HH70),t.model.aLV(O7.I2),t.model.aLV(O7.I39),t.model.aLV(O7.I90),t.model.aLV(O7.HH77),t.proxy=new i.Proxy(t),t.rgF(i.Const.LOAD_REQ,t.proxy.load,t.proxy),t.rgF(i.Const.LOAD_RES,t.onLoaded,t),t.rgF(i.Const.COMPOSE1_REQ,t.proxy.compose,t.proxy),t.rgF(i.Const.COMPOSE1_RES,t.GY63,t),t.rgF(i.Const.COMPOSE2_REQ,t.proxy.compose2,t.proxy),t.rgF(i.Const.COMPOSE2_RES,t.GX74,t),t.rgF(i.Const.DECOMPOSE_REQ,t.proxy.deCompose,t.proxy),t.rgF(i.Const.DECOMPOSE_RES,t.GW50,t),t.rgF(i.Const.QUICK_WEAR_REQ,t.proxy.quickWear,t.proxy),t.rgF(i.Const.QUICK_WEAR_RES,t.GW51,t),t.rgF(i.Const.POLISH_REQ,t.proxy.GY26,t.proxy),t.rgF(i.Const.POLISH_RES,t.GY27,t),t.rgF(i.Const.CAST_REQ,t.proxy.castReq,t.proxy),t.rgF(i.Const.CAST_RES,t.castRes,t),t.rgF(i.Const.CHANGE_EQUIP,t.GX75,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.gtM()},enumerable:!0,configurable:!0}),t.prototype.GT93=function(){App.VM.open(O7.I2)},t.prototype.GR99=function(){App.VM.close(O7.I2)},t.prototype.GL58=function(){App.VM.open(O7.E43)},t.prototype.GJ74=function(){App.VM.close(O7.E43)},t.prototype.GY62=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];(t=App.VM).open.apply(t,[O7.HH70].concat(e))},t.prototype.GX73=function(){App.VM.close(O7.HH70)},t.prototype.GR32=function(){App.VM.open(O7.G96)},t.prototype.GP40=function(){App.VM.close(O7.G96)},t.prototype.onLoaded=function(t){200==t.head.state?(this.model.ZD48(t.body),this.model.notify()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY63=function(t){200==t.head.state?(this.model.ZD48(t.body),this.model.notify(),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX74=function(t){200==t.head.state?(this.model.ZD48(t.body),this.model.notify(),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW50=function(t){200==t.head.state?(this.model.ZD48(t.body),this.model.notify(),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW51=function(t){200==t.head.state?(this.model.ZD48(t.body),this.model.notify()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY27=function(t){200==t.head.state?(this.model.ZD48(t.body),this.model.notify()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.castRes=function(t){if(200==t.head.state){var e=this.model;e.ZD48(t.body),e.notify(P4.X47)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX75=function(t){var e=this.model;e.curCastIndex=t,e.notify()},t}(TE11);i.Controller=t,__reflect(t.prototype,"Jade.Controller")}(Jade||(Jade={})),function(e){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.isCastCostAlert=!0,e.redNum=0,e.selectMap={},e}return __extends(t,i),t.prototype.ZD48=function(t){t&&(null!=this.data?this.data.initActData(t):this.data=new e.JadeVo(t))},t.prototype.updateRed=function(){this.redNum=e.Utils.hasDot()?1:0},t.prototype.FL35=function(){return this.updateRed(),this.redNum},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t.prototype.selectDecompose=function(t,e){this.selectMap[t]=e,this.notify()},t}(TG79);e.Model=t,__reflect(t.prototype,"Jade.Model")}(Jade||(Jade={})),function(s){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y10,e.onLoaded,e),e.rSM(P4.U5,e.GW51,e),e.rSM(P4.M73,e.GY63,e),e.rSM(P4.K65,e.GX74,e),e.rSM(P4.V6,e.GW50,e),e.rSM(P4.X47,e.castRes,e),e.rSM(P4.X45,e.GY27,e),e}return __extends(t,i),t.prototype.onLoaded=function(t){this.apF(s.Const.LOAD_RES,t)},t.prototype.load=function(){var t={type:P4.Y9,body:{}};this.sSM(t)},t.prototype.GW51=function(t){this.apF(s.Const.QUICK_WEAR_RES,t)},t.prototype.quickWear=function(t){this.sSM({type:P4.U4,body:{pos:t}})},t.prototype.GY63=function(t){this.apF(s.Const.COMPOSE1_RES,t)},t.prototype.compose=function(t,e){this.sSM({type:P4.M72,body:{tid:t,num:e}})},t.prototype.GX74=function(t){this.apF(s.Const.COMPOSE2_RES,t)},t.prototype.compose2=function(t,e){this.sSM({type:P4.K64,body:{t:e,pos:t}})},t.prototype.GW50=function(t){this.apF(s.Const.DECOMPOSE_RES,t)},t.prototype.deCompose=function(t){this.sSM({type:P4.V5,body:{tids:t}})},t.prototype.GY27=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.POLISH_RES].concat(t))},t.prototype.GY26=function(){this.sSM({type:P4.X44,body:{}})},t.prototype.castReq=function(t,e){this.sSM({type:P4.X46,body:{id:t,type:e}})},t.prototype.castRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.CAST_RES].concat(t))},t}(TG80);s.Proxy=t,__reflect(t.prototype,"Jade.Proxy")}(Jade||(Jade={})),function(f){var t=function(){function p(){}return p.hasEquip=function(t){for(var e=0,i=App.CM.gtM(O6.B98).avaEquip;e<i.length;e++){var s=i[e];if(M10.FD92(s.i.toString(),s.t).pos==t)return!!s.w}return!1},p.hasDot=function(){return!!p.jadeDot()||p.canCastEquip()},p.jadeDot=function(){var t=!1;if(O4.getLv()>=f.Config.openLv){for(var e=1;e<=10;e+=1)if(p.hasEquip(e)){t=!0;break}if(t){for(var i=0,s=this.getHighJadeByType();i<s.length;i++){var o=s[i];if(p.canMountById(o))return!0}for(e=1;e<=10;e+=1)if(p.canMergeByEquipSlot(e))return!0}}return!1},p.canMountById=function(t){for(var e=App.CM.gtM(O6.B98).avaEquip,i=0;i<e.length;i++){var s=M10.FD92(e[i].i.toString(),e[i].t);if(p.canMountByEquipSlot(t,parseInt(s.pos)))return!0}return!1},p.canMerge=function(t,e){if(void 0===e&&(e=0),p.isJade(t)){var i=f.Config.getNextJade(t);if(i){if(N12.giC(t)+e>=f.Config.compose)return!0;var s=f.Config.getl1Jade(t);if(s){if(e&&N12.giC(s)>=(f.Config.compose-e)*f.Config.FJ95(t).compose)return!0;var o=f.Config.FJ95(i);if(N12.giC(s)>=o.compose)return!0}}}return!1},p.getJades=function(){for(var t=[],e=0,i=App.CM.gtM(O6.C11).packData.item;e<i.length;e++){var s=i[e];7===N12.gID(s.id).effecttype&&t.push(s.id)}return t},p.canMergeByEquipSlot=function(t){for(var e=0,i=App.CM.gtM(O6.C25).data.cpl;e<i.length;e++){var s=i[e];if(s.pos===t){for(var o=0,r=s.cl;o<r.length;o++){var n=r[o];if(p.canMerge(n.tid,1))return!0}break}}return!1},p.canMountByEquipSlot=function(t,e){var i=f.Config.FJ95(t);if(i)for(var s=0,o=App.CM.gtM(O6.C25).data.cpl;s<o.length;s++){var r=o[s];if(r.pos===e){for(var n=0,a=r.cl;n<a.length;n++){var h=a[n];if(h.t===i.type&&p.compare(h.tid,t))return!0}break}}return!1},p.canCastEquip=function(){if(p.isOpenCast()){var t=App.CM.gtM(O6.C25).data.castList;for(var e in t){var i=f.Config.getCastDataByLv(t[e].s);if(f.Config.getCastDataByLv(t[e].s+1)||!f.Config.isMaxCastLv(t[e].l)){var s=P7.str2kv(i.cost),o=f.Config.gIV("stoneId"),r=N12.giC(o),n=i.stonenum,a=N12.giC(s[0].k);if(n<=r&&a>=s[0].v)return!0}}}return!1},p.compare=function(t,e){if(t===e)return!1;if(!p.isJade(e))return!1;if(!p.isJade(t))return!0;var i=f.Config.FJ95(t),s=f.Config.FJ95(e);return i.type===s.type&&i.level<s.level},p.isJade=function(t){return f.Config.isJade(t)},p.getHighJadeByType=function(){var o=[0,0,0,0,0];p.getJades().forEach(function(t){var e=f.Config.FJ95(t),i=e.type,s=e.level;0===o[i]?o[i]=t:s>f.Config.FJ95(o[i]).level&&(o[i]=t)});for(var t=o.length;0<=t;t-=1)0===o[t]&&o.splice(t,1);return o},p.getJadeBySlot=function(t,e){for(var i=0,s=App.CM.gtM(O6.C25).data.cpl;i<s.length;i++){var o=s[i];if(t==o.pos){for(var r=0,n=o.cl;r<n.length;r++){var a=n[r];if(a.t==e)return a.tid}break}}return 0},p.FC43=function(){var t,e,i=App.CM.gtM(O6.C25).data.mst,s={},o=0,r=f.Config.getMasterLvData(i),n=i+1;if(r){t={};var a=THH1.FI55(r.attraward);for(var h in a){var p=O4.FD72(parseInt(h)),l=parseInt(a[h]);t[h]={value:l,name:p}}o=r.lv,r.describe&&(t.extra=r.describe)}var c=f.Config.getMasterLvData(n);if(c){e={};var u=THH1.FI55(c.attraward);for(var h in u){var d=O4.FD72(parseInt(h));l=parseInt(u[h]);e[h]={value:l,name:d}}c.describe&&(e.extra=c.describe),s={curData:t,nextData:e,needCurLv:o,needNextLv:c.lv}}else s={curData:t,needCurLv:r.lv};return s},p.FG35=function(t){var e=0,i=f.Config.getMasterLvData(t);return i&&(e=M10.gAG(i.attraward)),e},p.FD16=function(t){var e=1,i=0,s=f.Config.getMasterLvData(t);s&&(i=M10.gAG(s.attraward),e=s.index+1);var o=f.Config.getMasterLvData(e),r=0;return o&&(r=M10.gAG(o.attraward)),Math.max(r-i,0)},p.attr2Str=function(t,e,i){return void 0===e&&(e="\n"),void 0===i&&(i=":"),P7.attr2str(t,e,{template:"$0"+i+"$1"})},p.FL1=function(){var t=App.CM.gtM(O6.C25),e=0;if(t.data)for(var i=0,s=t.data.cpl;i<s.length;i++)for(var o=0,r=s[i].cl;o<r.length;o++){var n=r[o],a=f.Config.FJ95(n.tid);a&&(e+=a.level)}return e},p.FL83=function(){var t=App.CM.gtM(O6.C25);if(O4.getLv()>=f.Config.openLv&&t.data&&t.data.pls<f.Config.polishMaxLv){var e=f.Config.gem_polish[t.data.pls+1];if(p.FL1()>=e.lv&&N12.FL6(P7.str2kv(e.item)))return!0}return!1},p.FF22=function(t,e){if(!f.Config.getCastDataByLv(e+1)&&f.Config.isMaxCastLv(t))return 0;var i=f.Config.getCastDataByLv(e),s=P7.str2kv(i.cost),o=f.Config.gIV("stoneId"),r=N12.giC(o),n=i.stonenum,a=N12.giC(s[0].k);return n<=r&&a>=s[0].v?1:0},p.FD19=function(t,e){f.Config.getCastDataByLv(t);for(var i={},s=function(t,e,i){t[e]||(t[e]={value:0,key:e}),t[e].value+=parseInt(i)},o=Number(f.Config.gIV("expBar"))/Number(f.Config.gIV("godCastExp")),r=0;r<=t-1;r++){var n=f.Config.getCastDataByLv(r),a=THH1.FI55(n.lvupattr),h=THH1.FI55(n.stepattr);for(var p in a)s(i,p,a[p]*o);for(var p in h)s(i,p,h[p])}for(var l=f.Config.getCastDataByLv(t),c=THH1.FI55(l.lvupattr),u=THH1.FI55(l.stepattr),d=0;d<e;d++)for(var p in c)s(i,p,c[p]);for(var p in u)s(i,p,u[p]);var v="";for(var p in i)v=v+(p+":")+i[p].value+";";return v=v.slice(0,v.length-1)},p.isOpenCast=function(){var t=f.Config.gIV("godCastLv"),e=f.Config.gIV("godCastDay"),i=O4.getLv(),s=App.CM.gtM(O6.B43);return t<=i&&s.serOpenDay+1>=e},p}();f.Utils=t,__reflect(t.prototype,"Jade.Utils")}(Jade||(Jade={}));var JadeBaseMain=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.set(O7.I2,O3.tr(5252)).rgS(O7.I90,"JadeView",O3.tr(5253)).rgS(O7.HH4,"JadePolishView",O3.tr(6461)).rgS(O7.HH77,"EquipCastView",O3.tr(6640)),i}return __extends(t,s),t.prototype.updateDot=function(t,e){return e===O7.I90?Jade.Utils.jadeDot():e===O7.HH4?Jade.Utils.FL83():e===O7.HH77&&Jade.Utils.canCastEquip()},t.prototype.canOpen=function(t){if(t!=O7.HH77||Jade.Utils.isOpenCast())return!0;var e=Jade.Config.gIV("godCastLv"),i=Jade.Config.gIV("godCastDay");return P18.sDP(O3.tr(6811,e,i)),!1},t}(BasePanelViewX);__reflect(JadeBaseMain.prototype,"JadeBaseMain");var JadeDecomposeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="JadeDecomposeSkin",i}return __extends(t,s),t.prototype.open=function(){this.dataSource=new eui.ArrayCollection,this.dgItems.dataProvider=this.dataSource,this.dgItems.itemRenderer=JadeDecomposeItem,this.selectAll(),this.updateItems(),this.GX5(),this.labTitle.text=O3.tr(5260),this.lab1.text=O3.tr(5262),this.lab2.text=O3.tr(5261),this.btnDecompose.label=O3.tr(6422)},t.prototype.uBM=function(t){t instanceof THH9?(this.updateItems(t),this.GX5(t)):t instanceof Jade.Model&&(this.updateItems(void 0,t),this.GX5(void 0,t))},t.prototype.initUI=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnDecompose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL90,this)},t.prototype.updateItems=function(t,e,i){void 0===i&&(i=!1),t=t||App.CM.gtM(O6.C11),e=e||App.CM.gtM(O6.C25);for(var s=[],o=0,r=t.packData.item;o<r.length;o++){var n=r[o],a=N12.gID(n.id);if(7===a.effecttype){var h=Jade.Config.FJ95(n.id);if(1<h.level){var p=-255*h.level+15*h.type+a.quality;s.push({itemData:{data:a,ct:n.c},isBottom:!0,pack:!1,_weight:p,toResolve:!0,tid:h.id,selectState:!!e.selectMap[h.id]})}}}s.sort(function(t,e){return t._weight-e._weight}),this.dataSource.source=s},t.prototype.GX5=function(t,e){t=t||App.CM.gtM(O6.C11),e=e||App.CM.gtM(O6.C25);for(var i=[],s=1;s<=4;s++)i.push(Jade.Config.FF21(s));var o=[0,0,0,0];for(var s in e.selectMap){var r=parseInt(s);if(e.selectMap[r])if(0<(l=N12.giC(r))){var n=Jade.Config.FJ95(r),a=n.type,h=n.compose;o[a-1]+=h*l}}for(s=0;s<this.gLabs.numChildren;s+=1){var p=this.gLabs.getChildAt(s),l=o[s],c=N12.gID(i[s]).name;p.text=c+"*"+l}},t.prototype.oCC=function(){App.CM.apF(O6.C25,Jade.Const.CloseDecomposeView)},t.prototype.ZL90=function(){var t=this,e="",i=App.CM.gtM(O6.C25),s=!1;for(var o in i.selectMap)i.selectMap[o]&&0<N12.giC(o)&&(e+=e?",":"",e+=o,Jade.Utils.canMountById(parseInt(o))&&(s=!0));if(e){if(s)return void App.VM.open(O7.C54,{handler:function(){App.CM.apF(O6.C25,Jade.Const.DECOMPOSE_REQ,e),t.oCC()},content:O3.tr(5254)});App.CM.apF(O6.C25,Jade.Const.DECOMPOSE_REQ,e),this.oCC()}else P18.sDP(O3.tr(5255))},t.prototype.selectAll=function(){for(var t=App.CM.gtM(O6.C25),e=0,i=App.CM.gtM(O6.C11).packData.item;e<i.length;e++){var s=i[e];if(7===N12.gID(s.id).effecttype)1<Jade.Config.FJ95(s.id).level&&(t.selectMap[s.id]=!0)}},t}(BaseEuiView);__reflect(JadeDecomposeView.prototype,"JadeDecomposeView");var JadeDecomposeItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(){this.cbOn.visible=!0,this.cbOn.bottom=50,this.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.cbOn.addEventListener(egret.Event.CHANGE,this.ZU35,this)},e.prototype.close=function(){this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.cbOn.visible=this.data.toResolve,this.data.toResolve?this.cbOn.selected=this.data.selectState:this.cbOn.selected=!1;App.CM.gtM(O6.C25)},e.prototype.ZU35=function(){this.data.selectState=this.cbOn.selected,App.CM.gtM(O6.C25).selectDecompose(this.data.tid,this.cbOn.selected)},e.prototype.oCI=function(){this.cbOn.selected=!this.cbOn.selected,this.ZU35()},e}(ItemIcon);__reflect(JadeDecomposeItem.prototype,"JadeDecomposeItem");var JadeMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SandMasterSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5731)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5732))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C25);this.ZO78(i),this.imgHead.source="v1_btn_baoyudashi_png"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e);e[0];t instanceof Jade.Model&&this.ZO78(t)},t.prototype.ZO78=function(t){var e=t.data.mst,i=Jade.Utils.FC43(),s=Jade.Utils.FD16(e);if(i.curData?(this.lbNow.textFlow=M18.FG71(O3.tr(5263,"EDD77F",i.needCurLv)),this.addAttrLb(i.curData,this.gpCur,3644,3647)):this.gpAllCur.visible=this.gpAllCur.includeInLayout=!1,i.nextData){var o="DFDFDC";i.curData||(o="d82222"),this.lbNext.textFlow=M18.FG71(O3.tr(5263,o,i.needNextLv)),this.addAttrLb(i.nextData,this.gpNext,3645,3648),this.lbAddPower.visible=!0,this.lbStatus.text=O3.tr(1110,e)}else this.gpAllNext.visible=this.gpAllNext.includeInLayout=!1,this.lbAddPower.visible=!1,this.lbStatus.text=O3.tr(1106,e);this.lbAddPower.text=O3.tr(1109,s)},t.prototype.addAttrLb=function(t,e,i,s){for(var o in t){var r=t[o],n=new eui.Label;n.size=20,n.textFlow="extra"==o?M18.FG71(O3.tr(s,r)):M18.FG71(O3.tr(i,r.name,r.value)),e.addChild(n)}},t.prototype.closeSelf=function(){App.CM.apF(O6.C25,Jade.Const.CloseMasterView)},t.prototype.close=function(){s.prototype.close.call(this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t}(BaseEuiView);__reflect(JadeMasterView.prototype,"JadeMasterView");var JadePolishView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="JadePolishSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.C25)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dgConsume.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgConsume.itemRenderer=JadePolishItemIcon,this.labTr6463.textFlow=O3.tr2(6463),this.labTr6484.textFlow=O3.tr2(6484),this.btn.label=O3.tr(6464)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t),this.GX5(this.model)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dataSource.removeAll(),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){t instanceof Jade.Model&&this.GX5(t)},t.prototype.GX5=function(t){var e=t.data.pls,i=e>=Jade.Config.polishMaxLv;this.currentState=i?"max":"normal",this.validateNow();var s=0,o=Jade.Config.gem_polish[e];this.labCurAttr.text=Jade.Utils.attr2Str(P7.str2kv(o.attr)),e&&(s=M10.gAG(o.attr));var r=Jade.Utils.FL83();if(!i){var n=Jade.Config.gem_polish[e+1];this.labNextAttr.text=Jade.Utils.attr2Str(P7.str2kv(n.attr));var a=!0;P7.FM14()&&(a=!1);var h=P7.str2kv(n.item);this.dataSource.source=h.map(function(t){return{itemData:{data:N12.gID(t.k),ct:t.v},isBottom:a,scale:1}});var p=Jade.Utils.FL1();this.labTips.textFlow=O3.tr2(6462,(p>=n.lv?_cc.dgreen:_cc.red).toString(16),p,n.lv)}this.labPower.text=s.toString(),this.btn.touchEnabled=r,this.btn.imgNew.visible=r,P16.sGF(this.btn,!this.btn.touchEnabled)},t.prototype.onClick=function(){App.CM.apF(O6.C25,Jade.Const.POLISH_REQ)},t}(BaseEuiView);__reflect(JadePolishView.prototype,"JadePolishView");var JadePolishItemIcon=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return __extends(t,i),t.prototype.setBottom=function(t){i.prototype.setBottom.call(this,t),this.lbName.y=84,this.height=108},t.prototype.initItem=function(){i.prototype.initItem.call(this),this.gpCt.visible=!0;var t=N12.giC(this.itemData.data.id),e=this.itemData.ct;this.lbCt.textFlow=M18.FG71(M18.FL30(e,{color:"#"+(e<=t?_cc.green:16711680).toString(16)}))},t}(ItemIcon);__reflect(JadePolishItemIcon.prototype,"JadePolishItemIcon");var JadeProps=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.one=2,i.skinName="JadePropsSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnMerge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMerge,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this),this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.open=function(t,e,i){if(this.currentState=e?"use":"base",this.validateNow(),this.data=N12.gID(t),this.ct=N12.giC(t)||1,this.num=2*Math.floor(this.ct/2)||this.ct,this.ZT1(this.data,this.ct),"use"===this.currentState&&this.useInitUI(),i){var s=i.pos,o=i.t;this.pos=s,this.type=o}this.btnBigAdd.label=O3.tr(6401),this.btnBigMinus.label=O3.tr(6402),this.btnShow.label=O3.tr(6420),this.btnMerge.label=O3.tr(6421),this.labTr6419.textFlow=O3.tr2(6419),this.updateDot()},t.prototype.updateDot=function(){"base"===this.currentState&&(this.btnMerge.imgNew.visible=Jade.Utils.canMerge(this.data.id,1))},t.prototype.uBM=function(t){(t instanceof THH9||t instanceof Jade.Model)&&this.updateDot()},t.prototype.ZT1=function(t,e){this.imgIcon.source=t.icon,!e||e<=1||1!=t.type?this.grpLb.visible=!1:(this.grpLb.visible=!0,this.lbCount.text=e+"",this.ct=parseInt(this.lbCount.text)),O5.FB13(this.lbName,t.name,t.quality),this.imgIcon.source=t.icon,this.imgQuality.source=N12.getBox(t.quality);var i=Jade.Config.FJ95(t.id),s=M18.FL30(t.desc,{color:"#8BD2BF"});this.lbDesc.textFlow=M18.FG71(s);var o=Jade.Config.jadeMaxLv;if(this.gPanel.height=this.gDesc.height+this.gDesc.y+(i.level<o?200:150),this.gSelect.visible=this.btnMerge.visible=i.level<o,this.labTips.visible="base"===this.currentState&&1<i.level&&i.level<o,this.labTips.visible){var r=Jade.Config.FJ95(this.data.id).compose,n=N12.gID(Jade.Config.getl1Jade(this.data.id)).name;this.labTips.text=O3.tr(5256,r,n,Jade.Config.compose-1,this.data.name)}this.btnShow.horizontalCenter=i.level<o?-this.btnMerge.horizontalCenter:0},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this),this.btnMerge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMerge,this),"use"==this.currentState&&(this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this)),this.data=null,this.num=null,this.ct=null},t.prototype.useInitUI=function(){this.lbUseCount.text=this.one.toString(),this.lbUseSum.text="/"+this.ct,this.updateCount(),this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this)},t.prototype.changeUse=function(t){var e=this.one,i=Math.min(this.num,this.ct),s=parseInt(this.lbUseCount.text);switch(t.target.name){case"-":s-=e;break;case"+":s+=e;break;case"--":s=e;break;case"++":s=i}i<s&&(s=i),s<e&&(s=e),this.lbUseCount.text=s.toString(),this.updateCount()},t.prototype.updateCount=function(){var t=this.one,e=Math.min(this.num,this.ct);this.lbUseCount.textColor=e<t?16711680:16777215},t.prototype.onClickMerge=function(){var t=parseInt(this.lbUseCount.text);t<=1?P18.sDP(O3.tr(5257)):"use"===this.currentState?this.apF(Jade.Const.COMPOSE1_REQ,this.data.id,t):this.pos&&this.type&&this.apF(Jade.Const.COMPOSE2_REQ,this.pos,this.type),this.closeSelf()},t.prototype.onClickShow=function(){var t=P7.FF60(),e=N18.FC83(t);if(O4.getLv()<e.needlevel)return P18.sDP(M18.format(K18.init.commonDesc1.value,[e.needlevel])),void this.closeSelf();var i=this.data.name,s=N18.FF97(this.data.quality),o=M18.format("$0,$1",[i,s.colour]),r={nid:F8.A24,channelId:t,param:o,infoId:this.data.id};App.CM.apF(O6.C13,O12.A13,r),this.closeSelf()},t.prototype.closeSelf=function(){this.apF(Jade.Const.CloseProps)},t}(BaseEuiView);__reflect(JadeProps.prototype,"JadeProps");var JadeView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.pageIndex=0,i.maxCount=10,i.equipIndex=1,i.skinName="JadeSkin",i}return __extends(t,o),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.apply(this,t),this.dataSource=new eui.ArrayCollection,this.dgReward.dataProvider=this.dataSource,this.dgReward.itemRenderer=JadeItem;var i=App.CM.gtM(O6.B98);this.updateEquip(i);var s=App.CM.gtM(O6.C11);this.updateList(s),this.updateJades(),this.ZJ10(),this.updatePower(),this.ZT2()},t.prototype.initUI=function(){var e=this;this.items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9],this.items.forEach(function(t){return t.addEventListener(egret.TouchEvent.TOUCH_TAP,e.ZL91,e)});for(var t=0;t<this.jadePanel.numChildren;t+=1){var i=this.jadePanel.getChildAt(t);i.name=(t+1).toString(),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP18,this)}this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.trunPage,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.trunPage,this),this.btnMount.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMount,this),this.btnDecompose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL90,this),this.btnMaster.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),this.labBag.textFlow=M18.HTP.parse(O3.tr(5733)),this.btnMount.label=O3.tr(6486)},t.prototype.uBM=function(t){if(t instanceof TG58)this.updateEquip(t);else if(t instanceof THH9){var e=this.maxCount;this.pageIndex=this.pageIndex>=e?e-1:this.pageIndex,this.updateList(t),this.updateEquip(),this.ZT2()}else if(t instanceof Jade.Model){e=this.maxCount;this.pageIndex=this.pageIndex>=e?e-1:this.pageIndex,this.updateJades(t),this.updateList(),this.updateEquip(),this.updatePower(t),this.ZT2()}this.ZJ10()},t.prototype.trunPage=function(t){var e=t.target===this.btnLeft?-1:1,i=this.pageIndex+e;if(0<=i&&i<this.maxPage){this.pageIndex=i;var s=App.CM.gtM(O6.C11);this.updateList(s),this.ZJ10()}},t.prototype.ZJ10=function(){this.btnLeft.visible=0<this.pageIndex,this.btnRight.visible=this.pageIndex<this.maxPage-1},t.prototype.updatePower=function(t){for(var e=[],i=0,s=(t=t||App.CM.gtM(O6.C25)).data.cpl;i<s.length;i++)for(var o=0,r=s[i].cl;o<r.length;o++){var n=r[o];if(Jade.Utils.isJade(n.tid)){var a=Jade.Config.FJ95(n.tid);e.push(a.attr)}}var h=Jade.Utils.FG35(t.data.mst);this.labPower.text=e.length?(M10.gAG(e.join(";"))+h).toString():"0"},t.prototype.ZL91=function(t){var e=t.target;if(e){var i=parseInt(e.name);this.equipIndex=i,this.updateSelect(),this.updateJades(),this.ZT2()}},t.prototype.ZP18=function(t){var e=parseInt(t.target.name),i=Jade.Utils.getJadeBySlot(this.equipIndex,e);i&&App.CM.apF(O6.C25,Jade.Const.OpenProps,i,!1,{pos:this.equipIndex,t:e})},t.prototype.onClickMount=function(){App.CM.apF(O6.C25,Jade.Const.QUICK_WEAR_REQ,this.equipIndex)},t.prototype.ZL90=function(){for(var t=0,e=Jade.Utils.getHighJadeByType();t<e.length;t++){var i=e[t];if(1<Jade.Config.FJ95(i).level)return void App.CM.apF(O6.C25,Jade.Const.OpenDecomposeView)}P18.sDP(O3.tr(5258))},t.prototype.ZV83=function(){this.apF(Jade.Const.OpenMasterView)},t.prototype.updateSelect=function(){this.ZP19(this.itemSelect,this.equipIndex,!1,!1)},t.prototype.updateEquip=function(t){var e=(t=t||App.CM.gtM(O6.B98)).nowAvaEquip;t.avaEquip,t.canAvaEquip;egret.Tween.get(this).wait(200).call(function(){TG68.FD9(this,N4.avartar_fit_btn,!1,this.change)},this);for(var i=0;i<this.items.length;i++)-1==e.indexOf(i+1+"")||this.ZP19(this.items[i],parseInt(this.items[i].name));this.updateSelect()},t.prototype.updateJades=function(t){t=t||App.CM.gtM(O6.C25);for(var e=Jade.Utils.getHighJadeByType(),i=0,s=t.data.cpl;i<s.length;i++){var o=s[i];if(o.pos===this.equipIndex){for(var r=0,n=o.cl;r<n.length;r++){var a=n[r],h=this.jadePanel.getChildAt(a.t-1),p=!1;if(Jade.Utils.hasEquip(o.pos))for(var l=0,c=e;l<c.length;l++){var u=c[l];if(a.t===Jade.Config.FJ95(u).type&&Jade.Utils.compare(a.tid,u)||Jade.Utils.canMerge(a.tid,1)){p=!0;break}}this.ZT3(h,a.t,a.tid,p)}break}}},t.prototype.ZT2=function(){var t=!1;if(Jade.Utils.hasEquip(this.equipIndex))for(var e=0,i=Jade.Utils.getHighJadeByType();e<i.length;e++){var s=i[e];if(Jade.Utils.canMountByEquipSlot(s,this.equipIndex)){t=!0;break}}this.btnMount.visible=this.btnMount.imgNew.visible=t},t.prototype.ZP19=function(t,e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!0);var o=App.CM.gtM(O6.B98).avaEquip;t.lbClass.visible=i;for(var r=0;r<o.length;r++){var n=M10.FD92(o[r].i.toString(),o[r].t);if(e==n.pos){t.imgHead.source=n.icon,t.imgQuality.source=N12.getBox(n.quality),6==n.quality?App.THH33.aUE(t,"square_hong",-51,-50,-1):App.THH33.rEf(t,"square_hong"),t.lbClass.textColor=0,t.lbClass.text="Lv:"+n.level,t.data=n.quality;var a=!1;if(s)for(var h=0,p=Jade.Utils.getHighJadeByType();h<p.length;h++){var l=p[h];if(Jade.Utils.canMountByEquipSlot(l,e)||Jade.Utils.canMergeByEquipSlot(e)){a=!0;break}}t.imgNew.visible=a}}},t.prototype.ZT3=function(t,e,i,s){if(t.imgJiang.visible=t.gpCt.visible=!1,t.lbName.visible=!!i,t.lbName.y=84,t.imgRed.visible=s,P16.sGF(t.imgIcon,!i),i){var o=N12.gID(i),r=o.icon,n=o.name,a=o.quality;t.imgIcon.source=r,t.imgBg.source=N12.getBox(a),O5.FB13(t.lbName,n,a)}else{r=N12.gID(Jade.Config.FF21(e)).icon;t.imgIcon.source=r,t.imgBg.source=N12.getBox(1)}},Object.defineProperty(t.prototype,"maxPage",{get:function(){for(var t=0,e=0,i=App.CM.gtM(O6.C11).packData.item;e<i.length;e++){var s=i[e];7===N12.gID(s.id).effecttype&&(t+=1)}return Math.ceil(t/this.maxCount)},enumerable:!0,configurable:!0}),t.prototype.updateList=function(t){t=t||App.CM.gtM(O6.C11);for(var e=0,i=this.pageIndex,s=[],o=[],r=0,n=t.packData.item;r<n.length;r++){var a=n[r],h=N12.gID(a.id),p=h.effecttype,l=h.quality;if(7===p){var c=Jade.Config.FJ95(a.id),u=-255*c.level+15*c.type+l;o.push({c:a.c,id:a.id,weight:u})}}o.sort(function(t,e){return t.weight-e.weight});for(var d=0,v=o;d<v.length;d++){a=v[d];var f=N12.gID(a.id);if(10*i<=e&&s.push({itemData:{data:f,ct:a.c},isBottom:!0,pack:!1}),e+=1,10<=s.length)break}this.dataSource.source=s},t.prototype.close=function(){var e=this;App.THH32.rEf(this.itemSelect,"lg_qhyh_01"),App.THH33.rEf(this.itemSelect,"square_hong"),this.items.forEach(function(t){t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.ZL91,e),App.THH32.rEf(t,"lg_qhyh_01"),App.THH33.rEf(t,"square_hong")});for(var t=0;t<this.jadePanel.numChildren;t+=1)this.jadePanel.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP18,this);this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.trunPage,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.trunPage,this),this.btnMount.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMount,this),this.btnDecompose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL90,this),this.btnMaster.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),this.dataSource.removeAll()},t}(BaseEuiView);__reflect(JadeView.prototype,"JadeView");var Jade,JadeItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setBottom=function(t){e.prototype.setBottom.call(this,t),this.lbName.y=84,this.height=108},t.prototype.oCI=function(){App.CM.apF(O6.C25,Jade.Const.OpenProps,this.itemData.data.id,!0)},t}(ItemIcon);__reflect(JadeItem.prototype,"JadeItem"),function(t){var e=function(){function t(t){this.cpl=[],this.mst=0,this.pls=0,this.initActData(t)}return t.prototype.initActData=function(t){if(this.cpl=t.cpl||this.cpl,this.castList=t.gcl||this.castList,t.gp)for(var e in this.cpl)this.cpl[e].pos===t.gp.pos&&(this.cpl[e]=t.gp);if(t.gc)for(var e in this.castList)this.castList[e].i===t.gc.i&&(this.castList[e]=t.gc);this.mst=void 0===t.mst?this.mst:t.mst,this.pls=void 0===t.pls?this.pls:t.pls},t}();t.JadeVo=e,__reflect(e.prototype,"Jade.JadeVo")}(Jade||(Jade={}));var P3=function(){function t(){}return t.OpenView=1e3,t.CloseView=1002,t.GetKefuDataReq=1003,t.GetKefuDataRes=1004,t}();__reflect(P3.prototype,"P3");var TE92=function(i){function t(){var t=i.call(this)||this,e=new THH4(t);return t.proxy=new THH5(t),e.aLV(O7.I92),e.aLV(O7.I64),App.VM.register(O7.I92,"KefuView",t,K17.UI_Main_TOP),t.rgF(P3.OpenView,t.openView,t),t.rgF(P3.CloseView,t.GY64,t),t.rgF(P3.GetKefuDataReq,t.GR33,t),t.rgF(P3.GetKefuDataRes,t.GR34,t),t}return __extends(t,i),t.prototype.openView=function(){App.VM.open(O7.I92)},t.prototype.GY64=function(){App.VM.close(O7.I92)},t.prototype.GR33=function(t){this.proxy.GR33(t)},t.prototype.GR34=function(t){var e=this.gtM();if(0!=t.s){e.ZC13({status:!1})}else e.ZC13(t.r);e.notify()},t}(TE11);__reflect(TE92.prototype,"TE92");var THH4=function(i){function t(t){var e=i.call(this,t)||this;return e.openState=!1,e.redNum=0,e.firstLoginRedNum=0,e}return __extends(t,i),t.prototype.ZC13=function(t){t&&(null!=this.actData?this.actData.updateData(t):this.actData=new KefuData(t))},t.prototype.FL35=function(){var t=0;return t+=this.firstLoginRedNum},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(THH4.prototype,"THH4");var THH5=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.GR33=function(t){var e={channel:t};this.sendHttpMsg("action/user/customer",e),this.rSMO("action/user/customer",this.GR34,this)},t.prototype.GR34=function(t){this.apF(P3.GetKefuDataRes,t)},t}(TG80);__reflect(THH5.prototype,"THH5");var KefuView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="KefuSkin",i}return __extends(t,s),t.prototype.open=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.copyBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX63,this),this.copyBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX64,this),this.copyBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX65,this);var t=App.CM.gtM(O6.C28);this.ZC22(t)},t.prototype.initUI=function(){this.confirm.label=O3.tr(5036),this.copyBtn0.textFlow=new Array({text:O3.tr(7773),style:{underline:!0}}),this.copyBtn1.textFlow=new Array({text:O3.tr(7773),style:{underline:!0}}),this.copyBtn2.textFlow=new Array({text:O3.tr(7773),style:{underline:!0}})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof THH4&&this.ZC22(t)},t.prototype.ZC22=function(t){this.kefulb.textFlow=M18.HTP.parse(t.actData.titLb),this.lbTitle.text=t.actData.titName,t.actData.contact&&this.ZX62(t.actData.contact)},t.prototype.ZX62=function(t){for(var e=t.split("\r\n")[0].split(","),i=0;i<3;i++)if(e[i]){var s=e[i].split(":");this["copyData"+i]=s[1],this["kefuGrp"+i].visible=this["kefuGrp"+i].includeInLayout=!0,this["kefuLb"+i].text="0"==s[0]?O3.tr(7944,s[1]):O3.tr(7943,s[1]),"0"==s[0]?(this["zwLb"+i].width=24,this["kefuLb"+i].width=236):(this["zwLb"+i].width=20,this["kefuLb"+i].width=240)}else this["kefuGrp"+i].visible=this["kefuGrp"+i].includeInLayout=!1},t.prototype.closeSelf=function(){App.CM.apF(O6.C28,P3.CloseView)},t.prototype.ZX63=function(){var t=this.copyData0;"wxgame"===platform.name||"oppo"===platform.name||"vivo"===platform.name?platform.setClipboardData(t,function(){P18.sDP(O3.tr(5650))}):(O4.FE66(t),P18.sDP(O3.tr(5650)))},t.prototype.ZX64=function(){var t=this.copyData1;"wxgame"===platform.name||"oppo"===platform.name||"vivo"===platform.name?platform.setClipboardData(t,function(){P18.sDP(O3.tr(5650))}):(O4.FE66(t),P18.sDP(O3.tr(5650)))},t.prototype.ZX65=function(){var t=this.copyData2;"wxgame"===platform.name||"oppo"===platform.name||"vivo"===platform.name?platform.setClipboardData(t,function(){P18.sDP(O3.tr(5650))}):(O4.FE66(t),P18.sDP(O3.tr(5650)))},t.prototype.close=function(){this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.confirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.copyBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX63,this),this.copyBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX64,this)},t}(BaseEuiView);__reflect(KefuView.prototype,"KefuView");var KefuData=function(){function t(t){this.isOpen=!1,this.updateData(t)}return t.prototype.updateData=function(t){t&&(this.isOpen=t.status,this.titName=t.name,this.titLb=t.context,this.contact=t.contact)},t}();__reflect(KefuData.prototype,"KefuData");var L4=function(){function d(){}return d.FK35=function(t){d.init=t.legion_init,d.power=t.legion_power,d.legionlevel=t.legion_legionlevel,d.activeexp=t.legion_activeexp,d.activelevel=t.legion_activelevel,d.activeday=t.legion_activeday,d.skill=t.legion_skill,d.bless=t.legion_bless,d.record=t.legion_record,d.gameplaySort=t.legion_gameplaysort,d.campExchange=t.legion_campexchange,d.bossInit=t.legionboss_init,d.bossDrop=t.legionboss_drop,d.bossDropGroup=t.legionboss_dropgroup,d.bossHp=t.legionboss_bosshp,d.bossPos=this.FK62(),this.liftCost=this.FJ96(),this.doubleTime=this.ZV6()},d.gIV=function(t,e){return void 0===e&&(e=1),1==e?d.init[t].value:2==e?d.bossInit[t].value:void 0},d.FD20=function(t){return d.legionlevel[t]},d.FHH53=function(t){return d.record[t].content},d.FHH54=function(){return d.gameplaySort},d.FHH55=function(){return d.legionlevel},d.FA48=function(t,e){var i=d.FA71(t);return M10.gAG(i.attrList[e])},d.FA71=function(t){if(!(t<=0)){var e=d.skill[t];if(!e.attrList){for(var i={},s=1;s<=8;s++)i[s]=e["attr"+s];e.attrList=i}return e}},d.FA72=function(t){return d.bless[t]},d.FD21=function(){var t=[],e=App.CM.gtM(O6.B89).myLegion.activeNum;for(var i in d.activeexp){var s=d.activeexp[i],o=1;s.activeNum=0,e[s.id]&&(e[s.id]>=s.limit&&(o=2),s.activeNum=e[s.id]),s.state=o,t.push(s)}t.sort(function(t,e){return t.state!=e.state?t.state-e.state:t.id-e.id});for(var r=0;r<t.length;r++)t[r].index=r;return t},d.FB78=function(t){return d.activelevel[t]},d.FB79=function(){return d.activelevel},d.FA73=function(){return d.activeday},d.FC44=function(){var t=d.FHH55(),e=[];for(var i in t){for(var s=t[i],o=[],r=[],n=M18.FL28(s.bossfristreward,";",":"),a=n.length,h=0;h<a;h++){var p={k:n[h][0],v:n[h][1]};o.push(p)}var l=M18.FL28(s.normalreward,";",":"),c=l.length;for(h=0;h<c;h++){p={k:l[h][0],v:l[h][1]};r.push(p)}var u={firstReward:o,normalReward:r,lv:parseInt(i)};e.push(u)}return e.sort(function(t,e){return t.lv-e.lv}),e},d.FA5=function(t){return d.campExchange[t]},d.FA30=function(t){var e=d.FD20(t),i=N17.FB56(e.bossattr);if(i)return N17.FF93(i.pos8).image},d.FD22=function(){var t=d.gIV("robberBossId"),e=M18.FL28(t,","),i=e.length-1,s=Math.floor(Math.random()*(i-0+1)+0),o=parseInt(e[s]),r=N17.FF93(o);return{image:parseInt(r.image),boss:o}},d.FF23=function(){var t,e=App.CM.gtM(O6.B43).serOpenDay+1;for(var i in d.bossDrop){var s=d.bossDrop[i];e>=s.date&&(!t||t.date>s.date)&&(t=s)}return t},d.FK62=function(){var t={};if(!this.init)return t;var e=this.gIV("bossPosition",2).split(":");return t={x:parseInt(e[0]),y:parseInt(e[1])}},d.FJ96=function(){var t={};if(!this.init)return t;var e=this.gIV("reviveCost",2).split(":");return t={k:parseInt(e[0]),v:parseInt(e[1])}},d.ZV6=function(){var t=[];if(!this.bossInit)return t;var e=this.bossInit.openTime.value,i=M18.FL28(e,","),s=P6.FM3(i[0]),o=P6.FM3(i[1]),r=1e3*this.FE59("duration");return t.push({pt:s,vt:s+r}),t.push({pt:o,vt:o+r}),t},d.FE59=function(t){var e;return this.bossInit?e=parseInt(this.bossInit[t].value):e},d}();__reflect(L4.prototype,"L4");var L11=function(){function t(){}return t.B59=0,t.B38=1,t.B17=2,t.A94=3,t.B18=4,t.A95=5,t.A79=6,t.A70=7,t.B60=8,t.B39=9,t.B40=10,t.B19=11,t.B20=12,t.A96=13,t.B21=14,t.A97=15,t.B41=16,t.B22=17,t.A60=18,t.A54=19,t.B23=20,t.A98=21,t.A71=22,t.A61=23,t.B24=24,t.A99=25,t.B25=26,t.B1=27,t.B42=28,t.B26=29,t.B43=30,t.B27=31,t.A55=32,t.A43=33,t.A80=34,t.A72=35,t.A32=36,t.A22=37,t.A81=38,t.A73=39,t.B2=40,t.A82=41,t.B28=42,t.B3=43,t.A62=44,t.A56=45,t.B85=46,t.B76=47,t.A83=48,t.A74=49,t.B61=50,t.B62=51,t.B29=52,t.B30=53,t.B65=54,t.B66=55,t.B77=56,t.B78=57,t.B31=58,t.B32=59,t.A44=60,t.A45=61,t.B33=62,t.B34=63,t.B67=64,t.B68=65,t.B93=66,t.A75=67,t.A76=68,t.B79=69,t.B80=70,t.A9=71,t.A10=72,t.A33=73,t.A34=74,t.A35=75,t.A36=76,t.B4=77,t.B5=78,t.B81=79,t.B82=80,t.B69=81,t.B70=82,t.B6=83,t.B7=84,t.B72=85,t.B73=86,t.A46=87,t.A47=88,t.A23=89,t.A24=90,t.A37=91,t.A38=92,t.B44=93,t.B45=94,t.B46=95,t.A77=96,t.A78=97,t.B8=98,t.B9=99,t.B10=100,t.B11=101,t.B74=102,t.A84=103,t.A85=104,t.A1=105,t.A2=106,t.A25=107,t.A26=108,t.A14=109,t.A15=110,t.A86=111,t.A87=112,t.A3=113,t.A4=114,t.A27=115,t.A28=116,t.A16=117,t.A17=118,t.A63=119,t.A64=120,t.A11=121,t.A12=122,t.A5=123,t.A88=124,t.A89=125,t.A29=126,t.A30=127,t.A48=128,t.A49=129,t.A18=130,t.A6=131,t.A7=132,t.A50=133,t.A51=134,t.A19=135,t.A20=136,t.A13=137,t.A39=138,t.A40=139,t.A31=140,t.A41=141,t.A42=142,t.A8=143,t.A21=144,t.B12=145,t.B83=146,t.B86=147,t.B47=148,t.B48=149,t.B35=150,t.B36=151,t.B49=152,t.B50=153,t.A90=156,t.A91=157,t.B13=158,t.B14=159,t.A92=160,t.A93=161,t.A65=162,t.A66=163,t.B91=164,t.B92=165,t.B87=166,t.B88=167,t.B15=168,t.B16=169,t.A57=170,t.B51=171,t.B52=172,t.B37=173,t.B84=174,t.B53=175,t.B54=176,t.B55=177,t.B56=178,t.A67=179,t.A68=180,t.A69=181,t.B63=182,t.B64=183,t.B57=184,t.B58=185,t.B71=186,t.A52=187,t.A53=188,t.B89=189,t.B90=190,t.B75=191,t.A58=192,t.A59=193,t}();__reflect(L11.prototype,"L11");var G17=function(){function t(){}return t.A1=1,t.A2=2,t.A3=3,t}();__reflect(G17.prototype,"G17");var B12=function(){function t(){}return t.A3=1,t.A2=2,t.A1=3,t}();__reflect(B12.prototype,"B12");var B6=function(){function t(){}return t.A1=1,t.A3=2,t.A4=3,t.A5=4,t.A2=5,t}();__reflect(B6.prototype,"B6");var C2=function(){function t(){}return t.A1=1,t.A2=2,t.A3=3,t}();__reflect(C2.prototype,"C2");var D1=function(){function t(){}return t.A2=1,t.A1=2,t}();__reflect(D1.prototype,"D1");var E6=function(){function t(){}return t.A7=60,t.A11=10,t.A4=5,t.A8=3,t.A5="doCampTask",t.A14="roleStop",t.A9="GT36",t.A12="miningBreak",t.A6="deadLoadRelease",t.A10="autoBossFight",t.A13="autoRevive",t.A2="bossUiUnable",t.A3="bossUiEnable",t.A1="bossShowMyself",t}();__reflect(E6.prototype,"E6");var TD43=function(i){function t(){var t=i.call(this)||this,e=new TG20(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.G49),e.aLV(O7.G80),e.aLV(O7.E96),e.aLV(O7.E97),e.aLV(O7.D28),e.aLV(O7.G81),e.aLV(O7.F98),e.aLV(O7.E98),e.aLV(O7.E99),e.aLV(O7.G2),e.aLV(O7.B66),e.aLV(O7.F1),e.aLV(O7.C56),e.aLV(O7.F8),e.aLV(O7.G7),e.aLV(O7.G9),e.aLV(O7.D34),e.aLV(O7.HH98),e.aLV(O7.I3),e.aLV(O7.HH29),e.aLV(O7.A64),e.aLV(O7.D35),e.aLV(O7.E19),e.aLV(O7.F9),e.aLV(O7.I76),e.aLV(O7.F13),e.aLV(O7.I39),e.aLV(O7.I64),e.aLV(O7.I63),e.aLV(O7.E50),e.aLV(O7.I85),e.aLV(O7.G82),e.aLV(O7.A93),e.aLV(O7.D54),e.aLV(O7.C2),e.aLV(O7.B42),e.aLV(O7.B43),e.aLV(O7.A33),t.legionProxy=new TG21(t),App.VM.register(O7.G49,"LegionMainVlew",t,K17.UI_Main_TOP),t.rgF(L11.B59,t.GJ88,t),t.rgF(L11.B38,t.GHH87,t),App.VM.register(O7.E96,"LegionNoticeView",t,K17.UI_Main_TOP),t.rgF(L11.B17,t.GG7,t),t.rgF(L11.A94,t.GE73,t),App.VM.register(O7.E97,"LegionRenameView",t,K17.UI_Popup),t.rgF(L11.B18,t.GG8,t),t.rgF(L11.A95,t.GE74,t),App.VM.register(O7.D28,"LegionDonationView",t,K17.UI_Popup),t.rgF(L11.A79,t.GD87,t),t.rgF(L11.A70,t.GC90,t),App.VM.register(O7.G81,"LegionListView",t,K17.UI_Main_TOP),t.rgF(L11.B60,t.GJ89,t),t.rgF(L11.B39,t.GHH88,t),App.VM.register(O7.F98,"LegionApplyView",t,K17.UI_Main_TOP),t.rgF(L11.B40,t.GHH89,t),t.rgF(L11.B19,t.GG9,t),App.VM.register(O7.E98,"LegionMemberView",t,K17.UI_Main_TOP),t.rgF(L11.B20,t.GG10,t),t.rgF(L11.A96,t.GE75,t),App.VM.register(O7.E99,"LegionInvadeView",t,K17.UI_Main_TOP),t.rgF(L11.B21,t.GG11,t),t.rgF(L11.A97,t.GE76,t),App.VM.register(O7.G2,"LegionFubenView",t,K17.UI_Main_TOP),t.rgF(L11.B41,t.GHH90,t),t.rgF(L11.B22,t.GG12,t),App.VM.register(O7.B66,"LegionActiveMainView",t,K17.UI_Main_TOP),t.rgF(L11.B23,t.GG13,t),t.rgF(L11.A98,t.GE77,t),App.VM.register(O7.F8,"LegionCreateView",t,K17.UI_Popup),t.rgF(L11.B25,t.GG14,t),t.rgF(L11.B1,t.GE78,t),App.VM.register(O7.F9,"LegionRecordView",t,K17.UI_Main_TOP),t.rgF(L11.B24,t.GG15,t),t.rgF(L11.A99,t.GE79,t),App.VM.register(O7.G7,"LegionSkillView",t,K17.UI_Main_TOP),t.rgF(L11.B42,t.GHH91,t),t.rgF(L11.B26,t.GG16,t),App.VM.register(O7.G9,"LegionBlessView",t,K17.UI_Main_TOP),t.rgF(L11.B43,t.GHH92,t),t.rgF(L11.B27,t.GG17,t),App.VM.register(O7.B31,"LegionBlessRewardView",t,K17.UI_Main_TOP),t.rgF(L11.A55,t.GB37,t),t.rgF(L11.A43,t.GA98,t),App.VM.register(O7.D34,"LegionActAwardView",t,K17.UI_Main_TOP),t.rgF(L11.A80,t.GD88,t),t.rgF(L11.A72,t.GC91,t),App.VM.register(O7.A64,"LegionCampTaskResetView",t,K17.UI_Popup),t.rgF(L11.A32,t.GA67,t),t.rgF(L11.A22,t.GA50,t),App.VM.register(O7.D35,"LegionCampCallView",t,K17.UI_Popup),t.rgF(L11.A81,t.GD89,t),t.rgF(L11.A73,t.GC92,t),App.VM.register(O7.E19,"LegionCampBuyView",t,K17.UI_Popup),t.rgF(L11.B2,t.GE80,t),t.rgF(L11.A82,t.GD90,t),App.VM.register(O7.F13,"LegionCampUIView",t,K17.Fight),t.rgF(L11.B28,t.GG18,t),t.rgF(L11.B3,t.GE81,t),App.VM.register(O7.B83,"LegionCampMining",t,K17.Fight),t.rgF(L11.A62,t.GC6,t),t.rgF(L11.A56,t.GB38,t),App.VM.register(O7.G82,"LegionCampView",t,K17.Fight),t.rgF(L11.B85,t.GR42,t),t.rgF(L11.B76,t.GP45,t),App.VM.register(O7.A93,"LegionChooseNoticeView",t,K17.UI_Popup),t.rgF(L11.A83,t.GD91,t),t.rgF(L11.A74,t.GC93,t),App.VM.register(O7.D54,"LegionBossView",t,K17.Fight),t.rgF(L11.B91,t.GV10,t),t.rgF(L11.B92,t.GV11,t),App.VM.register(O7.C2,"LegionBossCampUiView",t,K17.Fight),t.rgF(L11.B87,t.GR43,t),t.rgF(L11.B88,t.GR44,t),App.VM.register(O7.A69,"LegionBossDropView",t,K17.UI_Popup),t.rgF(L11.B15,t.GE82,t),t.rgF(L11.B16,t.GE83,t),App.VM.register(O7.B69,"LegionBossReviveView",t,K17.Fight),t.rgF(L11.B63,t.GJ90,t),t.rgF(L11.B64,t.GJ91,t),App.VM.register(O7.C39,"LegionBossOpenBoxView",t,K17.Fight),t.rgF(L11.B57,t.GHH93,t),t.rgF(L11.B58,t.GHH94,t),App.VM.register(O7.B42,"LegionBossLegRankView",t,K17.UI_Main_TOP),t.rgF(L11.B53,t.GHH95,t),t.rgF(L11.B54,t.GHH96,t),App.VM.register(O7.B43,"LegionBossMemRankView",t,K17.UI_Main_TOP),t.rgF(L11.B55,t.GHH97,t),t.rgF(L11.B56,t.GHH98,t),t.rgF(L11.B77,t.GR35,t),t.rgF(L11.B78,t.GL59,t),t.rgF(L11.B29,t.GR36,t),t.rgF(L11.B30,t.GL60,t),t.rgF(L11.B65,t.GP41,t),t.rgF(L11.B66,t.GP42,t),t.rgF(L11.A75,t.GE69,t),t.rgF(L11.A76,t.GE70,t),t.rgF(L11.B67,t.GP43,t),t.rgF(L11.B68,t.GP44,t),t.rgF(L11.B31,t.GJ75,t),t.rgF(L11.B32,t.GJ76,t),t.rgF(L11.A44,t.GJ77,t),t.rgF(L11.A45,t.GJ78,t),t.rgF(L11.A9,t.GF96,t),t.rgF(L11.A10,t.GF97,t),t.rgF(L11.B93,t.GX76,t),t.rgF(L11.B33,t.GJ79,t),t.rgF(L11.B34,t.GJ80,t),t.rgF(L11.A33,t.GB97,t),t.rgF(L11.A34,t.GB98,t),t.rgF(L11.A35,t.GHH75,t),t.rgF(L11.A36,t.GHH76,t),t.rgF(L11.B4,t.GJ81,t),t.rgF(L11.B5,t.GJ82,t),t.rgF(L11.B81,t.GT32,t),t.rgF(L11.B82,t.GT33,t),t.rgF(L11.B6,t.GHH77,t),t.rgF(L11.B7,t.GHH78,t),t.rgF(L11.B61,t.GN50,t),t.rgF(L11.B62,t.GN51,t),t.rgF(L11.B79,t.GT34,t),t.rgF(L11.B80,t.GT35,t),t.rgF(L11.B69,t.GJ83,t),t.rgF(L11.B70,t.GJ84,t),t.rgF(L11.B72,t.GR37,t),t.rgF(L11.B73,t.GR38,t),t.rgF(L11.A46,t.GD75,t),t.rgF(L11.A47,t.GD76,t),t.rgF(L11.A37,t.GC78,t),t.rgF(L11.A38,t.GC79,t),t.rgF(L11.B44,t.GN52,t),t.rgF(L11.B45,t.GN53,t),t.rgF(L11.B46,t.GN54,t),t.rgF(L11.A77,t.GF98,t),t.rgF(L11.A78,t.GF99,t),t.rgF(L11.A41,t.GC80,t),t.rgF(L11.A42,t.GC81,t),t.rgF(L11.A29,t.GB31,t),t.rgF(L11.A30,t.GB32,t),t.rgF(L11.A48,t.GC82,t),t.rgF(L11.A49,t.GC83,t),t.rgF(L11.A50,t.GC84,t),t.rgF(L11.A51,t.GC85,t),t.rgF(L11.A19,t.GC86,t),t.rgF(L11.A20,t.GC87,t),t.rgF(L11.A13,t.GB99,t),t.rgF(L11.A18,t.GA96,t),t.rgF(L11.A6,t.GA48,t),t.rgF(L11.A7,t.GA49,t),t.rgF(L11.A39,t.GC1,t),t.rgF(L11.A40,t.GC2,t),t.rgF(L11.A31,t.GC3,t),t.rgF(L11.A84,t.GG1,t),t.rgF(L11.A85,t.GG2,t),t.rgF(L11.A1,t.GB33,t),t.rgF(L11.A2,t.GB34,t),t.rgF(L11.A25,t.GD77,t),t.rgF(L11.A26,t.GD78,t),t.rgF(L11.A14,t.GC89,t),t.rgF(L11.A15,t.GC88,t),t.rgF(L11.A63,t.GE71,t),t.rgF(L11.A64,t.GE72,t),t.rgF(L11.A11,t.GA97,t),t.rgF(L11.A12,t.GE72,t),t.rgF(L11.A5,t.GE72,t),t.rgF(L11.A86,t.GHH79,t),t.rgF(L11.A87,t.GHH80,t),t.rgF(L11.A16,t.GB36,t),t.rgF(L11.A17,t.GB35,t),t.rgF(L11.A3,t.GA66,t),t.rgF(L11.A4,t.GHH80,t),t.rgF(L11.A27,t.GC5,t),t.rgF(L11.A28,t.GC4,t),t.rgF(L11.A88,t.GHH81,t),t.rgF(L11.A89,t.GHH82,t),t.rgF(L11.B8,t.GV5,t),t.rgF(L11.B9,t.GV6,t),t.rgF(L11.B10,t.GV7,t),t.rgF(L11.B11,t.GV8,t),t.rgF(L11.B47,t.GL61,t),t.rgF(L11.B48,t.GL62,t),t.rgF(L11.B35,t.GJ85,t),t.rgF(L11.B36,t.GJ86,t),t.rgF(L11.B49,t.GL63,t),t.rgF(L11.B50,t.GL64,t),t.rgF(L11.B74,t.GR39,t),t.rgF(L11.A8,t.GR40,t),t.rgF(L11.A21,t.GHH83,t),t.rgF(L11.B12,t.roleStop,t),t.rgF(L11.B86,t.GV9,t),t.rgF(L11.B51,t.GL65,t),t.rgF(L11.B52,t.GL66,t),t.rgF(L11.B37,t.GJ87,t),t.rgF(L11.B84,t.GR41,t),t.rgF(L11.A92,t.GG3,t),t.rgF(L11.A93,t.GG4,t),t.rgF(L11.A65,t.GD79,t),t.rgF(L11.A66,t.GD80,t),t.rgF(L11.A67,t.GHH84,t),t.rgF(L11.A90,t.GD81,t),t.rgF(L11.A91,t.GD82,t),t.rgF(L11.A68,t.GD83,t),t.rgF(L11.A69,t.GD84,t),t.rgF(L11.B13,t.GHH85,t),t.rgF(L11.B14,t.GHH86,t),t.rgF(L11.A57,t.GL67,t),t.rgF(L11.B71,t.GL68,t),t.rgF(L11.A52,t.GG5,t),t.rgF(L11.A53,t.GG6,t),t.rgF(L11.B89,t.legionProxy.GX92,t.legionProxy),t.rgF(L11.B90,t.GX77,t),t.rgF(L11.B75,t.GX77,t),t.rgF(L11.A58,t.GD85,t),t.rgF(L11.A59,t.GD86,t),t}return __extends(t,i),t.prototype.GX76=function(t){if(200==t.head.state){var e=this.gtM();e.GX76(t.body),e.notify(P4.Y14)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR35=function(t){var e=App.CM.gtM(O6.B89);return e.otherId!=t&&null!=t&&(e.isLoadGmChat=!1),e.otherId=t,this.legionProxy.ZD27(t)},t.prototype.GL59=function(t){if(200==t.head.state){var e=this.gtM();e.GR35(t.body),!e.isLoadGmChat&&e.otherId&&(App.CM.apF(O6.C13,O12.A20),e.isLoadGmChat=!0),e.notify(P4.W61)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR36=function(t){this.legionProxy.ZD28(t)},t.prototype.GL60=function(t){if(200==t.head.state){var e=this.gtM();e.GR36(t.body),e.notify(P4.Q40)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP41=function(t,e){this.legionProxy.ZF74(t,e)},t.prototype.GP42=function(t){if(200==t.head.state){var e=this.gtM();e.GR35(t.body),this.ZT94(O6.B89,L11.B1),this.ZT94(O6.B89,L11.B59),e.notify(P4.U86),"fth5"!==platform.name&&"japan"!==platform.name&&"english"!==platform.name&&"wakool"!==platform.name&&"freetop"!==platform.name&&"ft7477"!==platform.name&&"youle"!==platform.name&&"my1737"!==platform.name&&"huanyu"!==platform.name&&"militop"!==platform.name&&"btgame"!==platform.name&&"sdw"!==platform.name&&"gaga"!==platform.name||platform.collect("Contact")}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE69=function(t){this.gtM().tempNotice=t,this.legionProxy.ZB13(t)},t.prototype.GE70=function(t){var e=this.gtM();200==t.head.state?(e.ZHH13(),this.ZT94(O6.B89,L11.A94),e.notify(P4.K26)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP43=function(t){this.gtM().tempName=t,this.legionProxy.ZF75(t)},t.prototype.GP44=function(t){var e=this.gtM();200==t.head.state?(e.ZL97(),this.ZT94(O6.B89,L11.A95),e.notify(P4.U88)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ75=function(t){this.legionProxy.ZJ15(t),this.gtM().tempApplyId=t},t.prototype.GJ76=function(t){if(200==t.head.state){var e=this.gtM();t.body.leg?(e.GR35(t.body),this.ZT94(O6.B89,L11.B39),this.ZT94(O6.B89,L11.B59),e.tempApplyId=null,P18.sDP(O3.tr(1512))):(P18.sDP(O3.tr(1513)),e.ZC71()),e.notify(P4.U86),"fth5"!==platform.name&&"japan"!==platform.name&&"english"!==platform.name&&"wakool"!==platform.name&&"freetop"!==platform.name&&"ft7477"!==platform.name&&"youle"!==platform.name&&"my1737"!==platform.name&&"huanyu"!==platform.name&&"militop"!==platform.name&&"btgame"!==platform.name&&"sdw"!==platform.name&&"gaga"!==platform.name||platform.collect("Contact")}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ77=function(){this.legionProxy.ZC74()},t.prototype.GJ78=function(t){if(200==t.head.state){var e=this.gtM();e.ZF69(t.body),e.notify(P4.F21)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF96=function(){this.legionProxy.ZB53()},t.prototype.GF97=function(t){200==t.head.state?(P18.sDP(O3.tr(1520)),this.gtM().notify(P4.B50)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ79=function(t,e){var i={id:t,accept:e};this.gtM().tempDeal=i,this.legionProxy.ZC75(t,e)},t.prototype.GJ80=function(t){var e=this.gtM();if(200!=t.head.state)return t.head.state==HH2.A1&&App.CM.apF(O6.B89,L11.A44),e.tempDeal=null,void App.CM.apF(O6.B87,L10.A4,t);e.dealApply(),e.notify(P4.Q44)},t.prototype.GB97=function(t){this.gtM();this.legionProxy.ZA44(t)},t.prototype.GB98=function(t){var e=this.gtM();200==t.head.state?(P18.sDP(O3.tr(1520)),e.notify(P4.E2)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH75=function(t){this.legionProxy.ZB93()},t.prototype.GHH76=function(t){var e=this.gtM();200==t.head.state?(e.ZE30(t.body),e.notify(P4.E4)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ81=function(t,e){this.legionProxy.ZC76(t,e)},t.prototype.GJ82=function(t){var e=this.gtM();200==t.head.state?e.notify(P4.E4):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT32=function(){this.legionProxy.ZJ16()},t.prototype.GT33=function(t){var e=this.gtM();if(200==t.head.state){App.CM.apF(O6.B89,L11.B60),P18.sDP(O3.tr(1579)),e.notify(P4.W65);var i=App.CM.gtM(O6.B16);i.isTower=null,i.ZW9()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH77=function(t){this.legionProxy.ZB94(t)},t.prototype.GHH78=function(t){var e=this.gtM();if(200==t.head.state){var i=O3.tr(1538,t.body.e);P18.sDP(i),e.notify(P4.O52)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN50=function(){this.legionProxy.ZE32()},t.prototype.GN51=function(t){var e=this.gtM();if(200==t.head.state){if(t.body.cd){var i=P6.FJ11(1e3*t.body.cd,5);P18.sDP(O3.tr(1540,i))}else P18.sDP(O3.tr(1539));e.notify(P4.T72)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT34=function(){this.legionProxy.ZJ17()},t.prototype.GT35=function(t){var e=this.gtM();200==t.head.state?e.notify(P4.W63):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ83=function(){this.legionProxy.ZC77()},t.prototype.GJ84=function(t){var e=this.gtM();200==t.head.state?(e.ZP26(t.body),e.notify(P4.U90)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR37=function(t){this.legionProxy.ZHH14(t)},t.prototype.GR38=function(t){var e=this.gtM();200==t.head.state?(P5.sIs(t.body.ob),e.ZL93(t.body.bn),e.ZU63(t.body),e.notify(P4.U90)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD75=function(t){this.legionProxy.ZA80(t)},t.prototype.GD76=function(t){var e=this.gtM();if(200==t.head.state){if(P5.sIs(t.body.ob),e.ZJ12(t.body),t.body.e){var i=O3.tr(1538,t.body.e);P18.sDP(i)}e.notify(P4.F23)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC78=function(){this.legionProxy.ZA59()},t.prototype.GC79=function(t){var e=this.gtM();200==t.head.state?(e.ZU63(t.body),P5.sIs(t.body.ob),e.ZC69(t.body.bg),e.notify(P4.E10)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN52=function(t){var e=this.gtM();200==t.head.state?(e.hjPush(t.body),e.notify(P4.S16)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN53=function(){this.legionProxy.ZE33()},t.prototype.GN54=function(t){var e=this.gtM();200==t.head.state?(P5.sIs(t.body.ob),e.ZX67(t.body),e.notify(P4.S18)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GF98=function(t){this.legionProxy.ZB54(t)},t.prototype.GF99=function(t){var e=this.gtM();200==t.head.state?(P5.sIs(t.body.ob),e.ZJ13(t.body),e.notify(P4.K28)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC80=function(t){this.legionProxy.ZA60(t)},t.prototype.GC81=function(t){var e=this.gtM();200==t.head.state?(e.ZL98(t.body),e.notify(P4.E8)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB31=function(t){if(!TG53.FJ54()){var e=this.gtM();if(e.ZP34()){var i=e.ZP27?1:0,s=e.isAutoFight?1:0;this.legionProxy.ZA31(t,i,s)}else P18.sDP(O3.tr(8264))}},t.prototype.GB32=function(t){var e=this.gtM();200==t.head.state?(e.ZL98(t.body),e.notify(P4.C96),this.ZT94(O6.B64,J18.A37,!1)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC82=function(t){TG53.FJ54()||(this.gtM().ZP34()?this.legionProxy.ZA61(t):P18.sDP(O3.tr(8264)))},t.prototype.GC83=function(t){var e=this.gtM();if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void(389==t.head.state&&e.curFubenLv&&App.CM.apF(O6.B89,L11.A41,e.curFubenLv));App.VM.isOpen(O7.G2)||this.GHH90(),e.ZL98(t.body),e.notify(P4.F25),this.ZT94(O6.B64,J18.A37,!1)},t.prototype.GC84=function(){this.legionProxy.ZA62()},t.prototype.GC85=function(t){var e=this.gtM();200==t.head.state?(App.CM.apF(O6.B89,L11.A41,e.curFubenLv),e.notify(P4.F27)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC86=function(t){this.legionProxy.ZA63(t)},t.prototype.GC87=function(t){var e=this.gtM();200==t.head.state?(App.CM.apF(O6.B89,L11.A41,e.curFubenLv),e.notify(P4.C20)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB99=function(t){var e=this.gtM();200==t.head.state?(App.CM.apF(O6.B89,L11.A41,e.curFubenLv),e.notify(P4.B51)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA96=function(t){var e=this.gtM();200==t.head.state?(e.ZL98(t.body),e.notify(P4.C19)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA48=function(t){if(!TG53.FJ54()){var e=this.gtM();if(e.ZP34()){var i=e.ZP27?1:0,s=e.isAutoFight?1:0;this.legionProxy.ZA5(t,i,s)}else P18.sDP(O3.tr(8264))}},t.prototype.GA49=function(t){var e=this.gtM();200==t.head.state?(e.ZL98(t.body),e.notify(P4.A88),this.ZT94(O6.B64,J18.A37,!1)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC1=function(){this.legionProxy.ZA45()},t.prototype.GC2=function(t){var e=this.gtM();200==t.head.state?(e.ZL98(t.body),e.ZP28(),e.ZL99(),e.notify(P4.E6)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC3=function(t){var i=this.gtM();if(200==t.head.state)if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{i.ZL98(t.body),i.ZE31(t.body);var e=P7.isGetView(O7.G2);App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,needResult:!0,type:P15.A15,isAuto:e},function(t,e){e&&App.VM.open(O7.G49,O7.G2),App.CM.apF(O6.B89,L11.A41,i.curFubenLv),i.notify(P4.C99)},this),i.notify(P4.C99)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG1=function(){this.legionProxy.ZB55()},t.prototype.GG2=function(t){var e=this.gtM();if(200==t.head.state){e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.M41);var i=App.CM.gtM(O6.B27);i.fightFinishId&&0<i.fightFinishId.length&&TE55.FB17(i.fightFinishId)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB33=function(){this.legionProxy.ZA32()},t.prototype.GB34=function(t){var e=this.gtM();200==t.head.state?(e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.A90)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD77=function(){this.legionProxy.ZA81()},t.prototype.GD78=function(t){var e=this.gtM();200==t.head.state?(e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.D2)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC88=function(t){var e=this.gtM();200==t.head.state?(e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.C23)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC89=function(){this.legionProxy.ZA64()},t.prototype.GE71=function(t){this.legionProxy.ZB15(t)},t.prototype.GE72=function(t){var e=this.gtM();200==t.head.state?(e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.I54)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA97=function(){this.legionProxy.ZA22()},t.prototype.GHH79=function(t){this.legionProxy.ZB96(t)},t.prototype.GHH80=function(t){var e=this.gtM();if(200==t.head.state)if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{e.ZX69(t.body);var i=P7.isGetView(O7.G82);t.body.fr?App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,needResult:!1,type:P15.A16,isAuto:i},function(){e.notify(P4.M43)},this):(P5.sIs(t.body.ob),e.notify(P4.M43))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC4=function(t){var e=this.gtM();200==t.head.state?(e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.D4)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB35=function(t){var e=this.gtM();200==t.head.state?(e.ZX69(t.body),P5.sIs(t.body.ob),e.notify(P4.C25)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GB36=function(){this.legionProxy.ZA33()},t.prototype.GA66=function(){this.legionProxy.ZA14()},t.prototype.GC5=function(){this.legionProxy.ZA46()},t.prototype.GHH81=function(){this.legionProxy.ZB97()},t.prototype.GHH82=function(t){var e=this.gtM();200==t.head.state?(e.ZL96(t.body),e.notify(P4.M45)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV5=function(){TG53.FJ54()||(App.CM.gtM(O6.B99).isSpFighting?P18.sDP(O3.tr(5301)):this.legionProxy.GV5())},t.prototype.GV6=function(t){if(200==t.head.state){App.SceneManager.runScene(M2.A4),App.VM.setAutoClose(O7.I76,!0),App.VM.close(O7.I76);var e=this.gtM();e.ZJ14(t.body),e.ZHH12(t.body.call),this.apF(L11.B85),e.notify(P4.O54)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV7=function(){this.legionProxy.GV7()},t.prototype.GV8=function(t){if(200==t.head.state){var e=this.gtM();e.ZJ14(t.body),e.notify(P4.O56)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR39=function(t){if(200==t.head.state){var e=this.gtM();e.ZF72(t.body),e.notify(P4.V92)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR40=function(){this.gtM().notify("updateLegionHomeView")},t.prototype.GHH83=function(t){var e=this.gtM();e.isAutoDoCampTask=t,e.notify(E6.A5)},t.prototype.roleStop=function(){this.gtM().notify(E6.A14),App.CM.gtM(O6.B16).notify(E6.A14),App.CM.gtM(O6.A99).notify(E6.A14)},t.prototype.GT36=function(){this.gtM().notify(E6.A9)},t.prototype.GV9=function(){this.gtM().notify(E6.A6)},t.prototype.GN55=function(t,e){if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),!1;var i=this.gtM();return i.GN55(t.body),P5.sIs(t.body.ob),e&&i.notify(e),!0},t.prototype.GL61=function(){this.legionProxy.ZD29()},t.prototype.GL62=function(t){this.GN55(t,P4.S46)},t.prototype.GJ85=function(){App.CM.gtM(O6.B99).fightSceneType!=I4.A2?this.legionProxy.ZC78():P18.sDP(O3.tr(6378))},t.prototype.GJ86=function(t){if(this.GN55(t)){if(t.body.ncd)return void P18.sDP(O3.tr(605,t.body.ncd));var e=App.CM.gtM(O6.B99);e.fightSceneType==I4.A9&&this.GP45(),App.VM.ZT95(),e.fightSceneType=I4.A2,App.SceneManager.runScene(M2.A4);var i=this.gtM();this.apF(L11.B91),i.notify(P4.Q84)}},t.prototype.GL63=function(t){void 0===t&&(t=!1),this.gtM().quitBoss=t,this.legionProxy.GL63()},t.prototype.GL64=function(t){200==t.head.state?(this.gtM().notify(P4.S48),this.GV11(),this.GR44()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL65=function(t,e){App.VM.isOpen(O7.D54)&&this.legionProxy.GL65(t,e)},t.prototype.GL66=function(t){200==t.head.state||App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ87=function(t){if(200==t.head.state){var e=this.gtM();e.ZF73(t.body),e.notify(P4.Q85)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR41=function(t){this.GN55(t,P4.W87)},t.prototype.GG3=function(t){this.legionProxy.GG3(t)},t.prototype.GG4=function(t){this.GT37(t,P4.M92)},t.prototype.GT37=function(t,e){var i=this;if(200==t.head.state)if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var s=this.gtM();s.legionBoss.updateBox(t.body);var o=P7.isGetView(O7.C2);t.body.fr?App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,needResult:!1,type:P15.A11,isAuto:o},function(){TG22.FL2(!1)?i.GJ90():App.CM.apF(O6.B89,L11.B49,!0),s.notify(P4.M92)},this):(P5.sIs(t.body.ob),s.notify(P4.M92),e==P4.M92&&this.apF(L11.B57)),e&&(e==P4.I99&&(s.legionBoss.curBox=null),s.notify(e))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD79=function(t){this.legionProxy.GD79(t)},t.prototype.GD80=function(t){this.GT37(t,P4.I99)},t.prototype.GHH84=function(t){var e=this.gtM();e.legionBoss.isAutoFight=t,e.notify(E6.A10)},t.prototype.GD81=function(){this.legionProxy.ZA83()},t.prototype.GD82=function(t){var i=this,s=this.gtM();if(200==t.head.state)if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{App.VM.isOpen(O7.E50)&&(s.invadeFromHall=!0,App.CM.apF(O6.A60,D17.A1)),s.legionBoss.updateBox(t.body);var e=P7.isGetView(O7.C2);this.GE76(),App.VM.isOpen(O7.G55)&&App.VM.close(O7.G55),App.CM.apF(O6.B99,N1.A11,t.body.fr,{type:P15.A31,needResult:!1,isAuto:e},function(t,e){TG22.FL2(!1)?i.GJ90():App.CM.apF(O6.B89,L11.B49,!0),s.notify(P4.M90)},this)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD83=function(){this.legionProxy.GD83()},t.prototype.GD84=function(t){200==t.head.state||App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GHH85=function(){this.legionProxy.GHH85()},t.prototype.GHH86=function(t){if(200==t.head.state){var e=this.gtM();e.legionBoss.reviveCd=0,e.notify(E6.A3),e.notify(P4.P18),this.GJ91()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL67=function(t){this.GT37(t,P4.HH25)},t.prototype.GL68=function(t){var e=this.gtM();e.legionBoss.isShowMy=t,e.notify(E6.A1)},t.prototype.GG5=function(){this.legionProxy.GG5()},t.prototype.GG6=function(t){var e=this.gtM();e.legionBoss.initRankData(t.body),e.notify(P4.F54)},t.prototype.GX77=function(t){var e=this.gtM();e.ZL98(t.body),e.notify(P4.X87)},t.prototype.GD85=function(){this.legionProxy.GD85()},t.prototype.GD86=function(t){var e=O3.tr(1538,t.body.e);P18.sDP(e),this.GN55(t,P4.G92)},t.prototype.GJ88=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.l,i=parseInt(L4.gIV("unlockLevel"));if(e<i){var s=K18.init.commonDesc1.value;P18.sDP(M18.format(s,[i]))}else{var o=this.gtM();o.myLegion&&o.myLegion.isJoinLegion()?App.VM.open(O7.G49,t):this.ZT94(O6.B89,L11.B60)}},t.prototype.GHH87=function(t){App.VM.close(O7.G49,t)},t.prototype.GG7=function(){App.VM.open(O7.E96)},t.prototype.GE73=function(){App.VM.close(O7.E96)},t.prototype.GG8=function(){App.VM.open(O7.E97)},t.prototype.GE74=function(){App.VM.close(O7.E97)},t.prototype.GD87=function(){App.VM.open(O7.D28)},t.prototype.GC90=function(){App.VM.close(O7.D28)},t.prototype.GJ89=function(){App.VM.open(O7.G81)},t.prototype.GHH88=function(){App.VM.close(O7.G81)},t.prototype.GHH89=function(){App.VM.open(O7.F98)},t.prototype.GG9=function(){App.VM.close(O7.F98)},t.prototype.GG10=function(){App.VM.open(O7.E98)},t.prototype.GE75=function(){App.VM.close(O7.E98)},t.prototype.GG11=function(){App.VM.open(O7.E99)},t.prototype.GE76=function(){App.VM.close(O7.E99)},t.prototype.GHH90=function(){App.VM.open(O7.G49,O7.G2)},t.prototype.GG12=function(){App.VM.close(O7.G49,O7.G2)},t.prototype.GG13=function(){App.VM.open(O7.B66)},t.prototype.GE77=function(){App.VM.close(O7.B66)},t.prototype.GG14=function(){App.VM.open(O7.F8)},t.prototype.GE78=function(){App.VM.close(O7.F8)},t.prototype.GG15=function(){App.VM.open(O7.F9)},t.prototype.GE79=function(){App.VM.close(O7.F9)},t.prototype.GHH91=function(){App.VM.open(O7.G49,O7.G7)},t.prototype.GG16=function(){App.VM.close(O7.G49,O7.G7)},t.prototype.GHH92=function(){App.VM.open(O7.G49,O7.G9)},t.prototype.GG17=function(){App.VM.close(O7.G49,O7.G9)},t.prototype.GB37=function(t){App.VM.open(O7.B31,t)},t.prototype.GA98=function(){App.VM.close(O7.B31)},t.prototype.GD88=function(){App.VM.open(O7.D34)},t.prototype.GC91=function(){App.VM.close(O7.D34)},t.prototype.GA67=function(t){App.VM.open(O7.A64,t)},t.prototype.GA50=function(){App.VM.close(O7.A64)},t.prototype.GD89=function(t){void 0===t&&(t=!1),App.VM.open(O7.D35,t)},t.prototype.GC92=function(){App.VM.close(O7.D35)},t.prototype.GE80=function(){App.VM.open(O7.E19)},t.prototype.GD90=function(){App.VM.close(O7.E19)},t.prototype.GG18=function(){App.VM.open(O7.F13)},t.prototype.GE81=function(){App.VM.close(O7.F13)},t.prototype.GC6=function(){this.gtM().campMining(),App.VM.open(O7.B83)},t.prototype.GB38=function(t){var e=this.gtM();t&&(e.ZP29(),e.notify(E6.A12)),App.VM.close(O7.B83)},t.prototype.GR42=function(){App.VM.setAutoClose(O7.I76,!0),App.VM.close(O7.I76),App.VM.setAutoClose(O7.G82,!1),App.VM.open(O7.G82),App.VM.isOpen(O7.G55)&&App.VM.close(O7.G55);var t=App.CM.gtM(O6.B99);t.isFighting&&(App.VM.setAutoClose(O7.I61,!1),App.VM.open(O7.I61)),t.isSpFighting&&t.notify(FightD.FC_Close_UI),t.fightSceneType=I4.A9},t.prototype.GP45=function(){App.VM.setAutoClose(O7.G82,!0),App.VM.setAutoClose(O7.I76,!1),App.VM.close(O7.G82),this.GE81()},t.prototype.GD91=function(){App.VM.open(O7.A93)},t.prototype.GC93=function(){App.VM.close(O7.A93)},t.prototype.GV10=function(){var t=App.CM.gtM(O6.B99);App.VM.setAutoClose(O7.I76,!0),App.VM.close(O7.I76),App.VM.setAutoClose(O7.D54,!1),App.VM.open(O7.D54),App.VM.isOpen(O7.G55)&&App.VM.close(O7.G55),t.isFighting&&(App.VM.setAutoClose(O7.I61,!1),App.VM.open(O7.I61)),t.isSpFighting&&t.notify(FightD.FC_Close_UI),t.fightSceneType=I4.A2},t.prototype.GV11=function(){App.VM.setAutoClose(O7.D54,!0),App.VM.setAutoClose(O7.I76,!1),App.VM.close(O7.D54);var t=App.CM.gtM(O6.B99);t.fightSceneType=I4.A8;var e=this.gtM();if(e.quitBoss){App.VM.open(O7.I76);var i=App.VM.gOV(O7.I61);if(i&&i.endPlay(!1,!0),App.CM.apF(O6.C10,O16.A10),App.CM.apF(O6.C10,O16.A14),App.CM.apF(O6.C10,O16.A19),App.CM.apF(O6.C13,O12.A32,TG95.curTabIndex),App.CM.apF(O6.B63,K7.A8),App.CM.apF(O6.C20,K2.A10),App.CM.apF(O6.C10,O16.A4),App.CM.apF(O6.A63,D7.A3),App.CM.apF(O6.B16,G13.A52),App.CM.apF(O6.C6,N5.A38),App.CM.apF(O6.B28,HH1.A44),App.CM.apF(O6.B22,G12.A52),App.CM.gtM(O6.C20).ZX93()){App.VM.gOV(O7.I85);t.isFighting&&t.fightType!=P15.A3||(App.CM.apF(O6.C20,K2.A10),App.CM.apF(O6.B64,J18.A34))}}else App.SceneManager.runScene(M2.A5);e.quitBoss=!1},t.prototype.GR43=function(){App.VM.open(O7.C2)},t.prototype.GR44=function(){App.VM.close(O7.C2)},t.prototype.GE82=function(){App.VM.open(O7.A69)},t.prototype.GE83=function(){App.VM.close(O7.A69)},t.prototype.GJ90=function(){var t=this.gtM();t.legionBoss.loadTime5=P6.getTime(!0),this.apF(L11.A68),0<t.legionBoss.ZJ11()&&!t.legionBoss.isAutoRevive?(App.VM.open(O7.B69),t.notify(E6.A2)):t.legionBoss.isAutoRevive&&this.apF(L11.B13)},t.prototype.GJ91=function(){this.gtM().legionBoss.reviveCd=0,App.VM.close(O7.B69)},t.prototype.GHH93=function(){App.VM.open(O7.C39)},t.prototype.GHH94=function(t){if(t){var e=this.gtM();e.legionBoss.curBox&&this.apF(L11.A65,e.legionBoss.curBox)}App.VM.close(O7.C39)},t.prototype.GHH95=function(){App.VM.open(O7.B42)},t.prototype.GHH96=function(){App.VM.close(O7.B42)},t.prototype.GHH97=function(){App.VM.open(O7.B43)},t.prototype.GHH98=function(){App.VM.close(O7.B43)},t}(TE11);__reflect(TD43.prototype,"TD43");var TG20=function(i){function t(t){var e=i.call(this,t)||this;return e._autoJoin=!0,e._autoFightFull=!0,e._autoFight=!0,e.autoFightCd=0,e.autoFightFullCd=E6.A4,e.autoJoinCd=E6.A11,e.isAutoDoCampTask=!1,e.invadeFromHall=!1,e.quitBoss=!1,e}return __extends(t,i),Object.defineProperty(t.prototype,"curFubenLv",{get:function(){return this._curFubenLv},set:function(t){this._curFubenLv=t,this.dragonTeamMsg&&this.dragonTeamMsg.myTeam||App.CM.apF(O6.B89,L11.A41,t),this.notify("changeFuben")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoFight",{get:function(){return this._autoFight},set:function(t){this._autoFight!=t&&this.dragonTeamMsg.myTeam.isLeader&&App.CM.apF(O6.B89,L11.B89,2,this.curFubenLv,t?1:0),this._autoFight=t,this.isAutoFight()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoFightFull",{get:function(){return this._autoFightFull},set:function(t){this._autoFightFull!=t&&this.dragonTeamMsg.myTeam.isLeader&&App.CM.apF(O6.B89,L11.B89,1,this.curFubenLv,t?1:0),this._autoFightFull=t,this.ZP27()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoJoin",{get:function(){return this._autoJoin},set:function(t){this._autoJoin=t,this.isAutoJoin()},enumerable:!0,configurable:!0}),t.prototype.GX76=function(t){if(this.myLegion&&(!t.lv||this.dragonTeamMsg&&this.dragonTeamMsg.myTeam||(this.curFubenLv=t.lv),this.myLegion.GV33(t),App.CM.apF(O6.A42,WarOfAttrition.Const.UPDATE_LEGION_LEVEL),t.cjs)){var e=App.CM.gtM(O6.B82);for(var i in t.cjs){var s=t.cjs[i];if(parseInt(i)==e.avatarInfo.id&&0==s)return void this.ZX68();parseInt(i)==e.avatarInfo.id&&(this.myLegion.job=s),this.memberMsg&&this.memberMsg.rfL(parseInt(i),s)}}},t.prototype.ZX68=function(){this.tempNotice=null,this.tempName=null,this.tempApplyId=null,this.tempDeal=null,this.tempPower=null,this.myLegion=null,this.allLegionData=null,this.applyMsg=null,this.memberMsg=null,this.campTeams=null,this.dragonTeamMsg=null,App.CM.apF(O6.B89,L11.B38),App.CM.apF(O6.B89,L11.A94),App.CM.apF(O6.B89,L11.A95),App.CM.apF(O6.B89,L11.A70),App.CM.apF(O6.B89,L11.B19),App.CM.apF(O6.B89,L11.A96),App.CM.apF(O6.B89,L11.A97),App.CM.apF(O6.B89,L11.B22),App.CM.apF(O6.B89,L11.A98),App.CM.apF(O6.B89,L11.B39),App.CM.apF(O6.B89,L11.B27),App.CM.apF(O6.B89,L11.A99)},t.prototype.GR35=function(t){this.myLegion?this.myLegion.updateData(t):this.myLegion=new LegionData(t)},t.prototype.GR36=function(t){this.allLegionData?this.allLegionData.updateData(t):this.allLegionData=new LegionListData(t)},t.prototype.ZE29=function(){return this.allLegionData?this.allLegionData.curPage+1:0},t.prototype.ZHH13=function(){this.myLegion.legion.notice=this.tempNotice,this.tempNotice=null,this.selectNoticeId=null},t.prototype.ZL97=function(){this.myLegion.legion.name=this.tempName,this.tempName=null},t.prototype.ZC71=function(){this.allLegionData&&this.allLegionData.ZL95(this.tempApplyId),this.tempApplyId=null},t.prototype.ZF69=function(t){this.applyMsg?this.applyMsg.updateData(t):this.applyMsg=new LegionApply(t)},t.prototype.dealApply=function(){this.applyMsg.dealApply(this.tempDeal.id),1==this.tempDeal.accept?P18.sDP(O3.tr(1512)):P18.sDP(O3.tr(1517)),this.tempDeal=null},t.prototype.ZE30=function(t){this.memberMsg?this.memberMsg.updateData(t):this.memberMsg=new LegionMember(t)},t.prototype.ZP26=function(t){this.myLegion.ZP22(t)},t.prototype.ZL93=function(t){this.myLegion.ZL93(t)},t.prototype.ZJ12=function(t){this.myLegion.ZJ12(t)},t.prototype.ZC69=function(t){this.myLegion.ZC69(t)},t.prototype.ZX67=function(t){this.myLegion.ZX67(t)},t.prototype.hjPush=function(t){this.myLegion.hjPush(t)},t.prototype.ZJ13=function(t){this.myLegion.ZJ13(t)},t.prototype.ZL98=function(t){this.dragonTeamMsg?this.dragonTeamMsg.updateData(t):this.dragonTeamMsg=new LegionDragonTeam(t),this.dragonTeamMsg.myTeam&&!this.dragonTeamMsg.myTeam.isLeader?0<=this.dragonTeamMsg.myTeam.cd?this.autoFight=!0:this.autoFight=!1:(this.isAutoFight(),this.ZP27())},t.prototype.isAutoFight=function(){var e=this;if(this.autoFight){if(this.dragonTeamMsg.myTeam)return void(this.autoFightTimer||(this.dragonTeamMsg.myTeam.isLeader?this.autoFightCd=E6.A7:this.autoFightCd=E6.A7-this.dragonTeamMsg.myTeam.cd,this.autoFightTimer=App.K16.doTimer(1e3,this.autoFightCd,function(){var t=Math.max(0,e.autoFightCd-1);e.autoFightCd=t,e.notify("refreshCd")},this,function(){e.dragonTeamMsg&&e.dragonTeamMsg.myTeam&&e.dragonTeamMsg.myTeam.isLeader&&App.CM.apF(O6.B89,L11.A39),e.autoFightTimer&&(App.K16.rBH(e.autoFightTimer),e.autoFightFullTimer=null),e.autoFightCd=E6.A7,e.autoFightTimer=null},this)))}else this.autoFightTimer&&(this.autoFightCd=E6.A7,App.K16.rBH(this.autoFightTimer),this.autoFightTimer=null)},t.prototype.ZP27=function(){var e=this;if(this.autoFightFull&&(this.dragonTeamMsg.myTeam&&this.dragonTeamMsg.myTeam.isLeader&&this.dragonTeamMsg.myTeam.memberList.length>=E6.A8))return void(this.autoFightFullTimer||(this.autoFightFullTimer=App.K16.doTimer(1e3,E6.A4,function(){var t=Math.max(0,e.autoFightFullCd-1);e.autoFightFullCd=t,e.notify("refreshCd")},this,function(){App.CM.apF(O6.B89,L11.A39),e.autoFightFullTimer&&(App.K16.rBH(e.autoFightFullTimer),e.autoFightFullTimer=null),e.autoFightFullCd=E6.A4,e.autoFightFullTimer=null},this)));this.autoFightFullTimer&&(App.K16.rBH(this.autoFightFullTimer),this.autoFightFullTimer=null),this.autoFightFullCd=E6.A4,this.notify("refreshCd")},t.prototype.isAutoJoin=function(){var e=this;!this.autoJoin||this.dragonTeamMsg.myTeam?(this.autoJoinTimer&&(App.K16.rBH(this.autoJoinTimer),this.autoJoinTimer=null),this.autoJoinCd=E6.A11,this.notify("refreshCd")):this.autoJoinTimer||(this.autoJoinTimer=App.K16.doTimer(1e3,E6.A11,function(){var t=Math.max(0,e.autoJoinCd-1);e.autoJoinCd=t,e.notify("refreshCd")},this,function(){e.myLegion.legion.lv>=e.curFubenLv?App.CM.apF(O6.B89,L11.A6,e.curFubenLv):P18.sDP(O3.tr(1593,e.curFubenLv)),e.autoJoinTimer&&(App.K16.rBH(e.autoJoinTimer),e.autoJoinTimer=null),e.autoJoinTimer=null,e.autoJoinCd=E6.A11},this))},t.prototype.ZP28=function(){this.autoJoinTimer&&(App.K16.rBH(this.autoJoinTimer),this.autoJoinTimer=null),this.autoJoinCd=E6.A11},t.prototype.ZL99=function(){this.autoFightTimer&&(App.K16.rBH(this.autoFightTimer),this.autoFightTimer=null),this.autoFightCd=E6.A7,this.autoFightFullTimer&&(App.K16.rBH(this.autoFightFullTimer),this.autoFightFullTimer=null),this.autoFightFullCd=E6.A4},t.prototype.ZE31=function(t){this.myLegion.GV33(t),t.fp&&this.dragonTeamMsg.ZF68(t.fp)},t.prototype.ZX69=function(t){this.myLegion.GV33(t)},t.prototype.ZL96=function(t){this.myLegion.legion.ZL96(t)},t.prototype.campMining=function(){var t=this;if(!(0<this.mindingCd)){var e=parseInt(L4.gIV("readingTime"));this.mindingCd=e,this.mindingHandler&&(App.K16.rBH(this.mindingHandler),this.mindingHandler=null),this.mindingHandler=App.K16.doTimer(1e3,e,function(){t.mindingCd--},this,function(){App.CM.apF(O6.B89,L11.A84),t.ZP29()},this)}},t.prototype.ZP29=function(){this.mindingHandler&&(App.K16.rBH(this.mindingHandler),this.mindingHandler=null,this.mindingCd=0)},t.prototype.ZP30=function(){return 0<this.ZP32()?1:0<this.ZS51()?1:0<this.ZT4()?1:0<this.ZT6()?1:this.ZP31()},t.prototype.ZP31=function(){return this.legionBoss&&2==this.legionBoss.state&&0<this.legionBoss.hp?1:0},t.prototype.ZT4=function(){if(parseInt(L4.gIV("blessTime"))>this.myLegion.blessNum)return 1;for(var t=L4.gIV("blessStageRewards"),e=M18.FL28(t,"|",","),i=0;i<e.length;i++){if(2==this.myLegion.ZF67(parseInt(e[i][0])))return 1}return 0},t.prototype.ZC72=function(){var t=L4.FB78(this.myLegion.activeLv);return t.exp<0?0:this.myLegion.activeExp>=t.exp?1:0},t.prototype.ZB52=function(){var t=L4.FA73();for(var e in t){if(1==this.myLegion.ZE28(parseInt(e)))return 1}return 0},t.prototype.ZP32=function(){return 0<this.ZC72()?1:this.ZB52()},t.prototype.ZT5=function(){if(this.myLegion.applyNum){var t=L4.FD20(this.myLegion.legion.lv).number;return this.myLegion.legion.memberNum>=t?0:this.myLegion.applyNum}return 0},t.prototype.ZS51=function(){var t=this.myLegion.ZP21();if(t.id<0)return 0;var e=L4.FA71(t.lv+1),i=M18.FL28(e.cost,":");return parseInt(i[1])<this.myLegion.devote?1:0},t.prototype.ZL51=function(){var t=L4.FD20(this.myLegion.legion.lv);return this.myLegion.job!=G17.A3&&0<parseInt(t.exp)&&this.myLegion.legion.exp>=parseInt(t.exp)?1:0},t.prototype.ZT6=function(){var t=L4.gIV("rewardTime");return parseInt(t)-this.myLegion.fubenGetNum},t.prototype.FL35=function(){return 0<this.ZP30()?1:0<this.ZF70()?1:this.ZB12()},t.prototype.ZF70=function(){return 0<this.ZT5()?1:0<this.ZL51()?1:this.ZB90()},t.prototype.ZB90=function(){for(var t=M18.FL28(L4.gIV("contribution"),";",":"),e=0;e<t.length;e++){if(0<N12.giC(t[e][0]))return 1}return 0},t.prototype.ZF71=function(){return 0<this.ZC73()?1:this.ZB91()},t.prototype.ZC73=function(){for(var t=0;t<this.myLegion.exchangeReward.length;t++){var e=this.myLegion.exchangeReward[t];if(0==e.v){var i=L4.FA5(e.k),s=M18.FL28(i.cost,";",":"),o=0;for(o=0;o<s.length;o++){if(N12.giC(s[o][0])<parseInt(s[o][1]))break}if(o==s.length)return 1}}return 0},t.prototype.ZB91=function(){return this.myLegion&&this.myLegion.mineState==C2.A2||this.myLegion.robState==C2.A2?1:0},t.prototype.ZB92=function(){return THH27.FB36()},t.prototype.ZB12=function(){return 0<this.ZF71()?1:this.ZB92()},t.prototype.ZU63=function(t){this.myLegion.ZU63(t)},t.prototype.ZJ14=function(t){this.campTeams=t.uss},t.prototype.ZF72=function(t){t.aid&&null==t.us&&this.campTeams&&(this.campTeams[t.aid]=null,delete this.campTeams[t.aid]),t.us&&(null==this.campTeams&&(this.campTeams={}),this.campTeams[t.aid]=t.us)},t.prototype.ZHH12=function(t){null!=t&&this.myLegion.ZHH12(t)},t.prototype.GN55=function(t){this.legionBoss?this.legionBoss.updateData(t):this.legionBoss=new LegionBossData(t)},t.prototype.ZP33=function(){this.legionBoss=null},t.prototype.ZF73=function(t){t.id&&null==t.u&&this.legionBoss.players&&(this.legionBoss.players[t.id]=null,delete this.legionBoss.players[t.id]),t.u&&t.id!=O4.getAid()&&(null==this.legionBoss.players&&(this.legionBoss.players={}),this.legionBoss.players[t.id]=t.u)},t.prototype.ZP34=function(){var t=L4.gIV("assistTime"),e=parseInt(t)-this.myLegion.fubenHelpNum,i=L4.gIV("rewardTime"),s=parseInt(i)-this.myLegion.fubenGetNum;return!(e<=0&&s<=0)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TG20.prototype,"TG20");var TG21=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Q40,e.GL60,e),e.rSM(P4.U86,e.GP42,e),e.rSM(P4.K26,e.GE70,e),e.rSM(P4.U88,e.GP44,e),e.rSM(P4.Q42,e.ZX70,e),e.rSM(P4.F21,e.GJ78,e),e.rSM(P4.B50,e.GF97,e),e.rSM(P4.Y14,e.GX76,e),e.rSM(P4.Q44,e.GJ80,e),e.rSM(P4.E2,e.GB98,e),e.rSM(P4.E4,e.GHH76,e),e.rSM(P4.O50,e.GJ82,e),e.rSM(P4.W65,e.GT33,e),e.rSM(P4.O52,e.GHH78,e),e.rSM(P4.T72,e.GN51,e),e.rSM(P4.W63,e.GT35,e),e.rSM(P4.U90,e.GJ84,e),e.rSM(P4.V91,e.GR38,e),e.rSM(P4.F23,e.GD76,e),e.rSM(P4.E10,e.GC79,e),e.rSM(P4.S16,e.GN52,e),e.rSM(P4.S18,e.GN54,e),e.rSM(P4.K28,e.GF99,e),e.rSM(P4.E8,e.GC81,e),e.rSM(P4.C96,e.GB32,e),e.rSM(P4.F25,e.GC83,e),e.rSM(P4.F27,e.GC85,e),e.rSM(P4.C21,e.GC87,e),e.rSM(P4.B51,e.GB99,e),e.rSM(P4.C19,e.GA96,e),e.rSM(P4.A88,e.GA49,e),e.rSM(P4.E6,e.GC2,e),e.rSM(P4.C97,e.ZB14,e),e.rSM(P4.M41,e.GG2,e),e.rSM(P4.A90,e.GB34,e),e.rSM(P4.D2,e.GD78,e),e.rSM(P4.C23,e.ZB95,e),e.rSM(P4.I54,e.GE72,e),e.rSM(P4.B53,e.ZA82,e),e.rSM(P4.A93,e.ZA65,e),e.rSM(P4.M43,e.GHH80,e),e.rSM(P4.C25,e.GB35,e),e.rSM(P4.A92,e.ZA66,e),e.rSM(P4.D4,e.GC4,e),e.rSM(P4.M45,e.GHH82,e),e.rSM(P4.V92,e.GR39,e),e.rSM(P4.S46,e.GL62,e),e.rSM(P4.Q84,e.GJ86,e),e.rSM(P4.S48,e.GL64,e),e.rSM(P4.S50,e.GL66,e),e.rSM(P4.Q85,e.GJ87,e),e.rSM(P4.W87,e.GR41,e),e.rSM(P4.M92,e.GG4,e),e.rSM(P4.I99,e.GD80,e),e.rSM(P4.M90,e.GD82,e),e.rSM(P4.J2,e.GD84,e),e.rSM(P4.P18,e.GHH86,e),e.rSM(P4.HH25,e.GL67,e),e.rSM(P4.F54,e.GG6,e),e.rSM(P4.G92,e.GD86,e),e.rSM(P4.X87,e.GX77,e),e.rSM(P4.V93,e.teamSetPush,e),e}return __extends(t,i),t.prototype.GX76=function(t){this.apF(L11.B93,t)},t.prototype.ZD27=function(s){var o=this;return new Promise(function(e,t){var i={};i.type=P4.W60,i.body={legId:s},o.rSMO(P4.W61,function(t){o.apF(L11.B78,t),e("加载军团数据完成")},o),o.sSM(i)})},t.prototype.ZD28=function(t){var e={};e.type=P4.Q39,e.body={curPage:t,size:8},this.sSM(e)},t.prototype.GL60=function(t){this.apF(L11.B30,t)},t.prototype.ZF74=function(t,e){var i={};i.type=P4.U85,i.body={lv:t,name:e},this.sSM(i)},t.prototype.GP42=function(t){this.apF(L11.B66,t)},t.prototype.ZB13=function(t){var e={};e.type=P4.K25,e.body={notice:t},this.sSM(e)},t.prototype.GE70=function(t){this.apF(L11.A76,t)},t.prototype.ZF75=function(t){var e={};e.type=P4.U87,e.body={name:t},this.sSM(e)},t.prototype.GP44=function(t){this.apF(L11.B68,t)},t.prototype.ZJ15=function(t){var e={};e.type=P4.Q41,e.body={legId:t},this.sSM(e)},t.prototype.ZX70=function(t){this.apF(L11.B32,t)},t.prototype.ZC74=function(){var t={};t.type=P4.F20,t.body={},this.sSM(t)},t.prototype.GJ78=function(t){this.apF(L11.A45,t)},t.prototype.ZB53=function(){var t={};t.type=P4.B49,t.body={},this.sSM(t)},t.prototype.GF97=function(t){this.apF(L11.A10,t)},t.prototype.ZC75=function(t,e){var i={};i.type=P4.Q43,i.body={applyAid:t,accept:e},this.sSM(i)},t.prototype.GJ80=function(t){this.apF(L11.B34,t)},t.prototype.ZA44=function(t){var e={};e.type=P4.E1,e.body={score:t},this.sSM(e)},t.prototype.GB98=function(t){this.apF(L11.A34,t)},t.prototype.ZB93=function(){var t={};t.type=P4.E3,t.body={},this.sSM(t)},t.prototype.GHH76=function(t){this.apF(L11.A36,t)},t.prototype.ZC76=function(t,e){var i={};i.type=P4.O49,i.body={handleId:t,way:e},this.sSM(i)},t.prototype.GJ82=function(t){this.apF(L11.B5,t)},t.prototype.ZJ16=function(){var t={};t.type=P4.W64,t.body={},this.sSM(t)},t.prototype.GT33=function(t){this.apF(L11.B82,t)},t.prototype.ZB94=function(t){var e={};e.type=P4.O51,e.body={itemId:t},this.sSM(e)},t.prototype.GHH78=function(t){this.apF(L11.B7,t)},t.prototype.ZE32=function(){var t={};t.type=P4.T71,t.body={},this.sSM(t)},t.prototype.GN51=function(t){this.apF(L11.B62,t)},t.prototype.ZJ17=function(){var t={};t.type=P4.W62,t.body={},this.sSM(t)},t.prototype.GT35=function(t){this.apF(L11.B80,t)},t.prototype.ZC77=function(){var t={};t.type=P4.U89,t.body={},this.sSM(t)},t.prototype.GJ84=function(t){this.apF(L11.B70,t)},t.prototype.ZHH14=function(t){var e={};e.type=P4.V90,e.body={bt:t},this.sSM(e)},t.prototype.GR38=function(t){this.apF(L11.B73,t)},t.prototype.ZA80=function(t){var e={};e.type=P4.F22,e.body={bv:t},this.sSM(e)},t.prototype.GD76=function(t){this.apF(L11.A47,t)},t.prototype.ZA59=function(){var t={};t.type=P4.E9,t.body={},this.sSM(t)},t.prototype.GC79=function(t){this.apF(L11.A38,t)},t.prototype.GN52=function(t){this.apF(L11.B44,t)},t.prototype.ZE33=function(){var t={};t.type=P4.S17,t.body={},this.sSM(t)},t.prototype.GN54=function(t){this.apF(L11.B46,t)},t.prototype.ZB54=function(t){var e={};e.type=P4.K27,e.body={target:t},this.sSM(e)},t.prototype.GF99=function(t){this.apF(L11.A78,t)},t.prototype.ZA60=function(t){var e={};e.type=P4.E7,e.body={dlv:t},this.sSM(e)},t.prototype.GC81=function(t){this.apF(L11.A42,t)},t.prototype.ZA31=function(t,e,i){var s={};s.type=P4.C95,s.body={dlv:t,isFull:e,isTime:i},this.sSM(s)},t.prototype.GB32=function(t){this.apF(L11.A30,t)},t.prototype.ZA61=function(t){var e={};e.type=P4.F24,e.body={tid:t},this.sSM(e)},t.prototype.GC83=function(t){this.apF(L11.A49,t)},t.prototype.ZA62=function(){var t={};t.type=P4.F26,t.body={},this.sSM(t)},t.prototype.GC85=function(t){this.apF(L11.A51,t)},t.prototype.ZA63=function(t){var e={};e.type=P4.C20,e.body={tid:t},this.sSM(e)},t.prototype.GC87=function(t){this.apF(L11.A20,t)},t.prototype.GB99=function(t){this.apF(L11.A13,t)},t.prototype.GA96=function(t){this.apF(L11.A18,t)},t.prototype.ZA5=function(t,e,i){var s={};s.type=P4.A87,s.body={dlv:t,isFull:e,isTime:i},this.sSM(s)},t.prototype.GA49=function(t){this.apF(L11.A7,t)},t.prototype.ZA45=function(){var t={};t.type=P4.E5,t.body={},this.sSM(t)},t.prototype.GC2=function(t){this.apF(L11.A40,t)},t.prototype.ZB14=function(t){this.apF(L11.A31,t)},t.prototype.ZB55=function(){var t={};t.type=P4.M40,t.body={},this.sSM(t)},t.prototype.GG2=function(t){this.apF(L11.A85,t)},t.prototype.ZA32=function(){var t={};t.type=P4.A89,t.body={},this.sSM(t)},t.prototype.GB34=function(t){this.apF(L11.A2,t)},t.prototype.ZA81=function(){var t={};t.type=P4.D1,t.body={},this.sSM(t)},t.prototype.GD78=function(t){this.apF(L11.A26,t)},t.prototype.ZA64=function(){var t={};t.type=P4.C22,t.body={},this.sSM(t)},t.prototype.ZB95=function(t){this.apF(L11.A15,t)},t.prototype.ZB15=function(t){var e={};e.type=P4.I53,e.body={eid:t},this.sSM(e)},t.prototype.GE72=function(t){this.apF(L11.A64,t)},t.prototype.ZA22=function(){var t={};t.type=P4.B52,t.body={},this.sSM(t)},t.prototype.ZA82=function(t){this.apF(L11.A12,t)},t.prototype.ZA65=function(t){this.apF(L11.A5,t)},t.prototype.ZB96=function(t){var e={};e.type=P4.M42,e.body={bossId:t},this.sSM(e)},t.prototype.GHH80=function(t){this.apF(L11.A87,t)},t.prototype.ZA33=function(){var t={};t.type=P4.C24,t.body={},this.sSM(t)},t.prototype.GB35=function(t){this.apF(L11.A17,t)},t.prototype.ZA14=function(){var t={};t.type=P4.A91,t.body={},this.sSM(t)},t.prototype.ZA66=function(t){this.apF(L11.A4,t)},t.prototype.ZA46=function(){var t={};t.type=P4.D3,t.body={},this.sSM(t)},t.prototype.GC4=function(t){this.apF(L11.A28,t)},t.prototype.ZB97=function(){var t={};t.type=P4.M44,t.body={},this.sSM(t)},t.prototype.GHH82=function(t){this.apF(L11.A89,t)},t.prototype.GV5=function(){var t={};t.type=P4.O53,t.body={},this.rSM(P4.O54,this.GV6,this),this.sSM(t)},t.prototype.GV6=function(t){this.apF(L11.B9,t)},t.prototype.GV7=function(){var t={};t.type=P4.O55,t.body={},this.rSM(P4.O56,this.GV8,this),this.sSM(t)},t.prototype.GV8=function(t){this.apF(L11.B11,t)},t.prototype.GR39=function(t){this.apF(L11.B74,t)},t.prototype.ZD29=function(){var t={};t.type=P4.S45,t.body={},this.sSM(t)},t.prototype.GL62=function(t){this.apF(L11.B48,t)},t.prototype.ZC78=function(){var t={};t.type=P4.Q83,t.body={},this.sSM(t)},t.prototype.GJ86=function(t){this.apF(L11.B36,t)},t.prototype.GL63=function(){var t={};t.type=P4.S47,t.body={},this.sSM(t)},t.prototype.GL64=function(t){this.apF(L11.B50,t)},t.prototype.GL65=function(t,e){var i={};i.type=P4.S49,i.body={ex:t,ey:e},this.sSM(i)},t.prototype.GL66=function(t){this.apF(L11.B52,t)},t.prototype.GJ87=function(t){this.apF(L11.B37,t)},t.prototype.GR41=function(t){this.apF(L11.B84,t)},t.prototype.GG3=function(t){var e={};e.type=P4.M91,e.body={bid:t},this.sSM(e)},t.prototype.GG4=function(t){this.apF(L11.A93,t)},t.prototype.GD79=function(t){var e={};e.type=P4.I98,e.body={bid:t},this.sSM(e)},t.prototype.GD80=function(t){this.apF(L11.A66,t)},t.prototype.ZA83=function(){var t={};t.type=P4.M89,t.body={},this.sSM(t)},t.prototype.GD82=function(t){this.apF(L11.A91,t)},t.prototype.GD83=function(){var t={};t.type=P4.J1,t.body={},this.sSM(t)},t.prototype.GD84=function(t){this.apF(L11.A69,t)},t.prototype.GHH85=function(){var t={};t.type=P4.P17,t.body={},this.sSM(t)},t.prototype.GHH86=function(t){this.apF(L11.B14,t)},t.prototype.GL67=function(t){this.apF(L11.A57,t)},t.prototype.GG5=function(){var t={};t.type=P4.F53,t.body={},this.sSM(t)},t.prototype.GG6=function(t){this.apF(L11.A53,t)},t.prototype.GD85=function(){var t={};t.type=P4.G91,t.body={},this.sSM(t)},t.prototype.GD86=function(t){this.apF(L11.A59,t)},t.prototype.GX92=function(t,e,i){var s={};s.type=P4.X86,s.body={id:t,dlv:e,state:i},this.sSM(s)},t.prototype.GX77=function(t){this.apF(L11.B90,t)},t.prototype.teamSetPush=function(t){this.apF(L11.B75,t)},t}(TG80);__reflect(TG21.prototype,"TG21");var TG22=function(){function t(){}return t.FG36=function(){var t=App.CM.gtM(O6.B89);return t.myLegion.job==G17.A1||t.myLegion.job==G17.A2},t.FC45=function(t){var e=1;for(var i in K18.vip){var s=K18.FK45(e),o=void 0;if(1==t?o=s.createlegionlv1:2==t&&(o=s.createlegionlv2),1==o)return e;e++}},t.FJ97=function(t){return/^\d+$/.test(t)},t.FG37=function(){var t=L4.FHH55(),e=[];for(var i in t)e.push(parseInt(i));return P7.FD54(e)},t.FA49=function(){var t=App.CM.gtM(O6.B89),e={},i=L4.gIV("skilAttrType"),s=M18.FL28(i,",");for(var o in s)e[s[o]]=0;for(var o in t.myLegion.skillList){var r=t.myLegion.skillList[o],n=L4.FA71(r);if(n){var a=n.attrList[o],h=THH1.FI55(a);for(var p in h){var l=parseInt(h[p]);e[p]+=l}}}return e},t.FF24=function(){var t=L4.gIV("monsterOpening"),e=M18.FL28(t,";"),i=new Date,s=new Date,o=new Date,r=M18.FL28(e[0],":"),n=M18.FL28(e[1],":");return s.setHours(r[0]),s.setMinutes(r[1]),o.setHours(n[0]),o.setMinutes(n[1]),0<i.getTime()-s.getTime()&&0<o.getTime()-i.getTime()},t.FE16=function(t){var e=App.CM.gtM(O6.B89);if(e.dragonTeamMsg)for(var i in e.dragonTeamMsg.firstPassList){if(t==e.dragonTeamMsg.firstPassList[i])return!0}return!1},t.FG38=function(t){return Math.floor(t)+.5<t?Math.ceil(t):Math.floor(t)},t.FA31=function(){var t=App.CM.gtM(O6.B89),e=L4.FB79(),i=[];for(var s in e)if(parseInt(s)<=t.myLegion.activeLv)for(var o=L4.FB78(parseInt(s)),r=M18.FL28(o.attr,";",":"),n=0;n<r.length;n++){for(var a=0;a<i.length;a++)if(r[n][0]==i[a].id){i[a].value=i[a].value+parseInt(r[n][1]);break}if(a==i.length){var h={id:r[n][0],value:parseInt(r[n][1])};i.push(h)}}return i},t.FL2=function(t){void 0===t&&(t=!0);var e=O4.getLv(),i=L4.gIV("unlockLevel");if(e<parseInt(i))return t&&P18.sDP(O3.tr(4398,i)),!1;var s=App.CM.gtM(O6.B89);return!(!s.myLegion||!s.myLegion.legion)||(t&&P18.sDP(O3.tr(2523)),!1)},t}();__reflect(TG22.prototype,"TG22");var BlessRecordVo=function(){function t(t){this.paramList=[],this.initData(t)}return t.prototype.initData=function(t){this.type=t.bt,this.paramList=t.pl,this.time=t.t},t}();__reflect(BlessRecordVo.prototype,"BlessRecordVo");var LegionApply=function(){function t(t){this.applyList=[],this.updateData(t)}return t.prototype.updateData=function(t){this.power=t.ns,this.autoAgree=t.ns,this.applyList=[];for(var e=0;e<t.al.length;e++){var i=new LegionApplyVo(t.al[e]);this.applyList.push(i)}this.applyList.sort(this.ZX66)},t.prototype.dealApply=function(t){for(var e=0;e<this.applyList.length;e++)if(this.applyList[e].aId==t){this.applyList.splice(e,1);break}},t.prototype.ZX66=function(t,e){return t.power!=e.power?e.power-t.power:t.state-e.state},t}();__reflect(LegionApply.prototype,"LegionApply");var LegionApplyVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.aId=t.aid,this.name=t.n,this.icon=t.ic,this.state=t.cd,this.power=t.s},t}();__reflect(LegionApplyVo.prototype,"LegionApplyVo");var LegionBossData=function(){function t(t){this.isShowMy=!0,this.updateData(t)}return t.prototype.updateData=function(t){this.tHp=null!=t.thp?t.thp:this.tHp,this.hp=null!=t.rhp?t.rhp:this.hp,t.rcd&&(this.leftCd=t.rcd,this.loadTime1=P6.getTime(!0)),this.state=null!=t.st?t.st:this.state,t.rcd&&(this.leftCd=t.rcd,this.loadTime1=P6.getTime(!0)),t.cd&&(this.stateCd=t.cd,this.loadTime2=P6.getTime(!0)),this.myRank=null!=t.lr?t.lr:this.myRank,this.timeId=null!=t.idx?t.idx:this.timeId,t.ncd&&(this.enterCd=t.ncd,this.loadTime3=P6.getTime(!0)),t.us&&this.initPlayers(t.us),this.players=t.us||this.players,this.boxList=t.bvs||this.boxList},t.prototype.initPlayers=function(t){var e=App.CM.gtM(O6.B82);for(var i in t){if(parseInt(i)==e.avatarInfo.id){this.mySelf=t[i],delete t[i];break}}this.players=t},t.prototype.FJ24=function(){var t=P6.getTime(!0)-this.loadTime1,e=this.leftCd-t;return e<0?0:e},t.prototype.ZJ11=function(){if(null==this.reviveCd)return 0;var t=P6.getTime(!0)-this.loadTime5,e=this.reviveCd-t;return e<0?0:e},t.prototype.ZL92=function(){var t=P6.getTime(!0)-this.loadTime2,e=this.stateCd-t;return e<0?0:e},t.prototype.ZP20=function(){var t=P6.getTime(!0)-this.loadTime4,e=this.openBoxCd-t;return e<0?0:e},t.prototype.updateBox=function(t){if(this.boxList=t.fbs||this.boxList,t.rb)for(var e in this.boxList)this.boxList[e].id==t.rb&&this.boxList.splice(parseInt(e),1);t.cd&&(this.openBoxCd=t.cd,this.loadTime4=P6.getTime(!0)),t.rcd&&(this.reviveCd=t.rcd,this.loadTime5=P6.getTime(!0))},t.prototype.initRankData=function(t){null!=t&&(this.rankList=[],this.addRankList(t.as))},t.prototype.addRankList=function(t){if(null!=t&&0<t.length)for(var e=0;e<t.length;e++){var i=new RankData(t[e]);this.rankList[e]=i}},t}();__reflect(LegionBossData.prototype,"LegionBossData");var LegionData=function(){function t(t){this.skillList={},this.activeNum={},this.updateData(t)}return t.prototype.updateData=function(t){if(t.leg&&(null==this.legion?this.legion=new LegionVo(t.leg):this.legion.initData(t.leg)),this.getPointList=t.agbs,this.devote=t.mc,this.allDevote=t.mmc,this.job=t.mj,this.skillList=t.lsl,this.blessNum=t.bn,this.hjGetState=t.bg,this.durHj=t.dur,t.lsl)for(var e=1;e<=8;e++)t.lsl[e]?this.skillList[e]=t.lsl[e]:this.skillList[e]=0;for(var i in t.anm)this.activeNum[i]=t.anm[i];if(this.activeExp=t.ae,this.todayActive=t.tae,this.activeLv=t.alv,this.activeGetList=t.ag,this.fubenGetNum=t.pn,this.fubenHelpNum=t.an,this.collectNum=t.mn,this.collectState=t.mg,this.collectResetNum=t.mrn,this.hitMosterNum=t.rn,this.hitMosterResetNum=t.rrn,this.mosterRewardState=t.rg,this.exchangeReward=[],t.eis)for(e=0;e<t.eis.length;e++){var s=t.eis[e];s.index=e,this.exchangeReward.push(s)}this.lastLoadTime=P6.getTime(),this.exchangeResetNum=t.ern,this.applyNum=t.aln,this.refreshCd=t.nrcd,this.isShowCall=t.call,this.ZL94(),this.ZP23()},t.prototype.isJoinLegion=function(){return null!=this.legion},t.prototype.GV33=function(t){for(var e in t){var i=t[e];switch(e){case"n":this.legion.name=i;break;case"e":this.legion.exp=i;break;case"nt":this.legion.notice=i;break;case"lv":this.legion.lv=i;break;case"lbn":this.legion.allBlessNum=i;break;case"bn":this.blessNum=i;break;case"mc":this.devote=i;break;case"mmc":this.allDevote=i;break;case"ns":this.legion.power=i;break;case"na":this.legion.isNeedAgree=i;break;case"ln":this.legion.leader=i;break;case"ms":this.legion.memberNum=i;break;case"bv":this.legion.blessPoint=i;break;case"bg":this.hjGetState=i;break;case"hpPer":(i<this.legion.hjHpPer||100==i)&&(this.legion.hjHpPer=i);break;case"br":var s=new BlessRecordVo(i);this.legion.blessList.push(s),this.legion.ZP25();break;case"r":s=new LegionRecordVo(i);this.legion.recordList.push(s);break;case"agbs":this.getPointList=i;break;case"an":this.fubenHelpNum=i;break;case"pn":this.fubenGetNum=i;break;case"anm":for(var o in this.activeNum={},i)this.activeNum[o]=i[o];break;case"tae":this.todayActive=i;break;case"ae":this.activeExp=i;break;case"ag":this.activeGetList=i;break;case"mn":this.collectNum=i;break;case"mg":this.collectState=i;break;case"mrn":this.collectResetNum=i;break;case"rn":this.hitMosterNum=i;break;case"rrn":this.hitMosterResetNum=i;break;case"rg":this.mosterRewardState=i;break;case"ern":this.exchangeResetNum=i;break;case"eis":this.exchangeReward=[];for(var r=0;r<i.length;r++){var n=i[r];n.index=r,this.exchangeReward.push(n)}break;case"aln":this.applyNum=i;break;case"nrcd":this.refreshCd=i,this.lastLoadTime=P6.getTime();break;case"call":this.isShowCall=i}}this.ZL94(),this.ZP23()},t.prototype.ZP21=function(){var t=[];for(var e in this.skillList){var i={id:e,lv:this.skillList[e]};t.push(i)}t.sort(function(t,e){return t.id-e.id});var s=L4.FD20(this.legion.lv),o=TG22.FG37();if(t[t.length-1].lv>=s.skilllevel)return this.legion.lv==o?{id:-2,lv:t[t.length-1].lv}:{id:-1,lv:t[t.length-1].lv};for(var r=0;r<t.length-1;r++)if(t[r].lv>t[r+1].lv)return t[r+1];return t[0]},t.prototype.ZF66=function(){var t=0;for(var e in this.skillList){var i=this.skillList[e];if(0<i)t+=L4.FA48(i,parseInt(e))}return t},t.prototype.ZP22=function(t){for(var e in this.skillList)t.sid==parseInt(e)&&(this.skillList[e]=t.lv)},t.prototype.ZL93=function(t){this.blessNum=t},t.prototype.ZF67=function(t){var e=1;t<=this.legion.blessPoint&&(e=2);for(var i=0;i<this.getPointList.length;i++)this.getPointList[i]==t&&(e=3);return e},t.prototype.ZJ12=function(t){this.getPointList.push(t.bv)},t.prototype.ZC69=function(t){this.hjGetState=t},t.prototype.ZX67=function(t){this.activeLv=t.alv,this.activeExp=t.ae},t.prototype.ZU63=function(t){for(var e in t){var i=t[e];switch(e){case"tae":this.todayActive=i;break;case"ae":this.activeExp=i;break;case"anm":for(var s in this.activeNum={},i)this.activeNum[s]=i[s]}}},t.prototype.hjPush=function(t){for(var e in t){var i=t[e];switch(e){case"bg":this.hjGetState=i;break;case"dur":this.durHj=i;break;case"hpPer":this.legion.hjHpPer=i}}},t.prototype.ZC70=function(t){var e=1;return this.activeLv>=t&&(e=2),e},t.prototype.ZJ13=function(t){this.activeGetList.push(t.t)},t.prototype.ZE28=function(t){var e=2;this.todayActive>=t&&(e=1);for(var i=0;i<this.activeGetList.length;i++)this.activeGetList[i]==t&&(e=3);return e},t.prototype.ZHH11=function(){var t=P6.getTime();return Math.max(0,1e3*this.refreshCd-(t-this.lastLoadTime))},t.prototype.ZL94=function(){var t=L4.gIV("minesTotal");parseInt(t)<=this.collectNum?0==this.collectState?this.mineState=C2.A2:this.mineState=C2.A3:this.mineState=C2.A1},t.prototype.ZP23=function(){var t=L4.gIV("robberTotal");parseInt(t)<=this.hitMosterNum?0==this.mosterRewardState?this.robState=C2.A2:this.robState=C2.A3:this.robState=C2.A1},t.prototype.isCanMine=function(){var t=parseInt(L4.gIV("minesTotal"));return this.collectNum<t},t.prototype.isCanHitRob=function(){var t=L4.gIV("robberTotal");return this.hitMosterNum<t},t.prototype.ZHH12=function(t){this.isShowCall=t},t}();__reflect(LegionData.prototype,"LegionData");var LegionDragonTeam=function(){function t(t){this.teamList=[],this.firstPassList=[],this.updateData(t)}return t.prototype.updateData=function(t){if(t.tv?(this.myTeam?this.myTeam.updateData(t.tv):this.myTeam=new LegionTeamVo(t.tv),this.myTeam.ZP24()):this.myTeam=null,t.tvl){this.teamList=[];for(var e=0;e<t.tvl.length;e++){var i=new LegionTeamVo(t.tvl[e]);this.teamList.push(i)}}else this.teamList=[];this.firstPassList=t.fpl||this.firstPassList},t.prototype.ZF68=function(t){this.firstPassList.push(t)},t}();__reflect(LegionDragonTeam.prototype,"LegionDragonTeam");var LegionListData=function(){function t(t){this.legionList=[],this.updateData(t)}return t.prototype.updateData=function(t){this.curPage=t.cp,1==this.curPage&&(this.legionList=[]),this.allPage=t.ap;for(var e=0;e<t.ll.length;e++){var i=new LegionVo(t.ll[e]);this.legionList.push(i)}},t.prototype.ZL95=function(t){for(var e=0;e<this.legionList.length;e++)if(this.legionList[e].id==t){this.legionList[e].isApply=1;break}},t}();__reflect(LegionListData.prototype,"LegionListData");var LegionMember=function(){function t(t){this.memberList=[],this.updateData(t)}return t.prototype.updateData=function(t){this.allDevote=t.mmc,this.memberList=[];for(var e=0;e<t.ml.length;e++){var i=new LegionMemberVo(t.ml[e]);this.memberList.push(i)}},t.prototype.rfL=function(t,e){for(var i=0;i<this.memberList.length;i++)if(t==this.memberList[i].aId){0==e?this.memberList.splice(i,1):this.memberList[i].job=e;break}this.memberList.sort(this.sortList)},t.prototype.sortList=function(t,e){return t.job!=e.job?t.job-e.job:t.state!=e.state?t.state-e.state:t.devote!=e.devote?e.devote-t.devote:t.power!=e.power?e.power-t.power:void 0},t}();__reflect(LegionMember.prototype,"LegionMember");var LegionMemberVo=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.aId=t.aid,this.name=t.n,this.icon=t.ic,this.state=t.cd,this.power=t.s,this.job=t.j,this.devote=t.mc},t}();__reflect(LegionMemberVo.prototype,"LegionMemberVo");var LegionRecordVo=function(){function t(t){this.paramList=[],this.initData(t)}return t.prototype.initData=function(t){this.tId=t.tid,this.paramList=t.pl,this.time=t.t},t}();__reflect(LegionRecordVo.prototype,"LegionRecordVo");var LegionTeamMemberVo=function(){function t(t){this.updateData(t)}return t.prototype.updateData=function(t){this.aId=t.aid,this.name=t.n,this.lv=t.lv,this.power=t.sc,this.icon=t.ic},t}();__reflect(LegionTeamMemberVo.prototype,"LegionTeamMemberVo");var LegionTeamVo=function(){function t(t){this.memberList=[],this.isLeader=!1,this.updateData(t)}return t.prototype.updateData=function(t){this.tId=t.tid,this.leader=t.l,this.memberList=[];for(var e=0;e<t.ms.length;e++){var i=new LegionTeamMemberVo(t.ms[e]);this.memberList.push(i)}this.dragonLv=t.dlv,this.cd=P7.getValue(t.cd,this.cd)},t.prototype.ZP24=function(){App.CM.gtM(O6.B82).avatarInfo.id==this.leader?this.isLeader=!0:this.isLeader=!1},t}();__reflect(LegionTeamVo.prototype,"LegionTeamVo");var LegionVo=function(){function t(t){this.recordList=[],this.blessList=[],this.initData(t)}return t.prototype.initData=function(t){if(this.id=t.id,this.name=t.n,this.exp=t.e,this.notice=t.nt,this.memberNum=t.ms,this.leader=t.ln,this.lv=t.lv,this.power=t.ns,this.isNeedAgree=t.na,this.applyNum=t.as,this.isApply=t.ay,this.allBlessNum=t.lbn,this.blessPoint=t.bv,this.hjHpPer=t.hpPer,t.rs)for(var e=0;e<t.rs.length;e++){var i=new LegionRecordVo(t.rs[e]);this.recordList.push(i)}if(t.brl){for(e=0;e<t.brl.length;e++){i=new BlessRecordVo(t.brl[e]);this.blessList.push(i)}this.ZP25()}},t.prototype.ZP25=function(){this.blessList.sort(function(t,e){return e.time-t.time});var t=parseInt(L4.gIV("blessRecord"));if(this.blessList.length>t)for(var e=t;e<this.blessList.length;e++)this.blessList.splice(e,this.blessList.length-t)},t.prototype.ZL96=function(t){if(t.rs){this.recordList=[];for(var e=0;e<t.rs.length;e++){var i=new LegionRecordVo(t.rs[e]);this.recordList.push(i)}}},t.prototype.updateData=function(t){},t}();__reflect(LegionVo.prototype,"LegionVo");var ItemLegionActAward=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionActAwardSkin,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.close=function(){this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.scReward.viewport=this.listReward,this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF,this.lbTip.textFlow=M18.HTP.parse(O3.tr(5081))},t.prototype.dataChanged=function(){this.lbTitle.text=O3.tr(1560,this.data.level);for(var t=M18.FL28(this.data.reward,";",":"),e=[],i=t.length,s=0;s<i;s++){var o={data:N12.gID(t[s][0]),ct:t[s][1]};e.push({itemData:o,isBottom:!1,scale:.8})}switch(this.dataSource.replaceAll(e),this.data.state){case 1:this.imgGot.visible=!1,this.lbTip.visible=!0;break;case 2:this.imgGot.visible=!0,this.lbTip.visible=!1}},t}(eui.ItemRenderer);__reflect(ItemLegionActAward.prototype,"ItemLegionActAward");var ItemLegionApply=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionApplySkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnAgree.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAgree,this),this.btnReject.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX71,this)},t.prototype.close=function(){this.btnAgree.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAgree,this),this.btnReject.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX71,this)},t.prototype.dataChanged=function(){if(this.lbName.textFlow=M18.HTP.parse(O3.tr(4191,this.data.name)),0<this.data.state){this.data.state<3600&&(this.data.state=3600);var t=P6.FJ11(1e3*this.data.state,4);this.lbOnLineState.textFlow=M18.HTP.parse(O3.tr(1514,t))}else this.lbOnLineState.textFlow=M18.HTP.parse(O3.tr(1515));this.imgIcon.source=this.data.icon,this.lbPower.textFlow=M18.HTP.parse(O3.tr(1516,this.data.power)),this.btnAgree.label=O3.tr(4192),this.btnReject.label=O3.tr(4193)},t.prototype.onClickAgree=function(){App.CM.apF(O6.B89,L11.B33,this.data.aId,1)},t.prototype.ZX71=function(){App.CM.apF(O6.B89,L11.B33,this.data.aId,2)},t}(eui.ItemRenderer);__reflect(ItemLegionApply.prototype,"ItemLegionApply");var ItemLegionBless=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemBlessRecordSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=P6.FJ11(1e3*this.data.time);switch(this.lbTime.text=t,this.data.type){case B12.A3:this.lbDesc.textFlow=(new egret.HtmlTextParser).parse(O3.tr(1551,this.data.paramList));break;case B12.A2:this.lbDesc.textFlow=(new egret.HtmlTextParser).parse(O3.tr(1552,this.data.paramList));break;case B12.A1:this.lbDesc.textFlow=(new egret.HtmlTextParser).parse(O3.tr(1553,this.data.paramList))}},t}(eui.ItemRenderer);__reflect(ItemLegionBless.prototype,"ItemLegionBless");var ItemLegionBlessBox=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionBlessBoxSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){switch(this.data.state){case 1:this.imgReward.source="v1_img_baoxiangweikai_png",this.imgRed.visible=!1;break;case 2:this.imgReward.source="v1_img_baoxiangweikai_png",this.imgRed.visible=!0;break;case 3:this.imgReward.source="v1_img_baoxiangkai_png",this.imgRed.visible=!1}},t.prototype.oCI=function(){App.CM.apF(O6.B89,L11.A55,this.data)},t}(eui.ItemRenderer);__reflect(ItemLegionBlessBox.prototype,"ItemLegionBlessBox");var ItemLegionBossRank=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionBossRankSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){if(this.lbRank.text=this.data.nRank,this.lbName.text=this.data.sName,1e4<=this.data.dmg){var t=1e4<=this.data.dmg?(this.data.dmg/1e4).toFixed(1):this.data.dmg;this.lbValue.textFlow=M18.HTP.parser(O3.tr(5363,t))}else this.lbValue.text=this.data.dmg;this.imgBg.visible=this.data.nRank%2!=0},t}(eui.ItemRenderer);__reflect(ItemLegionBossRank.prototype,"ItemLegionBossRank");var ItemLegionCampExchange=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionCampBuySkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN80,this)},t.prototype.close=function(){this.btnExchange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN80,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.itemIcon=new ItemIcon,this.gpIcon.addChild(this.itemIcon)},t.prototype.dataChanged=function(){var t=L4.FA5(this.data.k),e=N12.gID(t.giftitem),i={itemData:{data:e,ct:0},isBottom:!1};this.itemIcon.data=i,this.lbName.text=e.name,O5.FB13(this.lbName,e.name,e.quality);var s=0,o=M18.FL28(t.cost,";",":");for(s=0;s<o.length;s++){var r=this["lbCost"+(p=s+1)],n=this["lbCostNum"+p],a=N12.gID(o[s][0]),h=N12.giC(o[s][0]);r.visible=!0,n.visible=!0,r.text=a.name,n.text=h+"/"+o[s][1],h>=parseInt(o[s][1])?n.textColor=_cc.green:n.textColor=_cc.red}for(;s<2;s++){var p,l=this["lbCost"+(p=s+1)];n=this["lbCostNum"+p];l.visible=!1,n.visible=!1}o.length<2?this.gpCost.height=this.lbCost1.height:this.gpCost.height=2*this.lbCost1.height+10,0==this.data.v?(this.btnExchange.label=O3.tr(1600),P16.sGF(this.btnExchange,!1),this.btnExchange.enabled=!0):(this.btnExchange.label=O3.tr(1601),P16.sGF(this.btnExchange,!0),this.btnExchange.enabled=!1)},t.prototype.ZN80=function(){App.CM.apF(O6.B89,L11.A63,parseInt(this.data.index))},t}(eui.ItemRenderer);__reflect(ItemLegionCampExchange.prototype,"ItemLegionCampExchange");var ItemLegionChooseNotice=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionChooseNoticeSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.cbSelect.addEventListener(egret.Event.CHANGE,this.onSelect,this)},t.prototype.close=function(){this.cbSelect.addEventListener(egret.Event.CHANGE,this.onSelect,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.lbContent.textFlow=M18.FG71(this.data.text),this.cbSelect.selected=this.data.state},t.prototype.onSelect=function(){var t=App.CM.gtM(O6.B89);t.selectNoticeId=this.data.index,t.notify("selectNotice")},t}(eui.ItemRenderer);__reflect(ItemLegionChooseNotice.prototype,"ItemLegionChooseNotice");var ItemLegionDayReward=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionActDayAwardSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.scReward.viewport=this.listReward,this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.B89);switch(this.lbTitle.textFlow=M18.HTP.parse(O3.tr(1561,this.data.level,t.myLegion.todayActive,this.data.level)),this.data.state){case 1:this.btnGet.visible=!0,this.imgGot.visible=!1,this.btnGet.label=O3.tr(1563),P16.sGF(this.btnGet,!1),this.btnGet.enabled=!0;break;case 2:this.btnGet.visible=!0,this.imgGot.visible=!1,this.btnGet.label=O3.tr(1562),P16.sGF(this.btnGet,!0),this.btnGet.enabled=!1;break;case 3:this.btnGet.visible=!1,this.imgGot.visible=!0}for(var e=M18.FL28(this.data.reward,";",":"),i=[],s=e.length,o=0;o<s;o++){var r={data:N12.gID(e[o][0]),ct:e[o][1]};i.push({itemData:r,isBottom:!1,scale:.8})}this.dataSource.replaceAll(i)},t.prototype.onClickGet=function(){App.CM.apF(O6.B89,L11.A77,this.data.level)},t}(eui.ItemRenderer);__reflect(ItemLegionDayReward.prototype,"ItemLegionDayReward");var ItemLegionDonation=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionDonationSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnDonation.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN81,this)},t.prototype.close=function(){this.btnDonation.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN81,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.btnDonation.label=O3.tr(4199)},t.prototype.dataChanged=function(){var t=this.data[0],e=N12.gID(t);this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4197,e.name)),this.lbDesc.textFlow=M18.HTP.parse(O3.tr(4198,e.desc));var i={itemData:{data:e,ct:0},isBottom:!1};null==this.itemIcon&&(this.itemIcon=new ItemIcon,this.gpIcon.addChild(this.itemIcon)),this.itemIcon.data=i},t.prototype.ZN81=function(){App.CM.apF(O6.B89,L11.B6,this.data[0])},t}(eui.ItemRenderer);__reflect(ItemLegionDonation.prototype,"ItemLegionDonation");var ItemLegionDragonTeam=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionTeamSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJoin,this),this.btnOut.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOut,this)},t.prototype.close=function(){this.btnJoin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJoin,this),this.btnOut.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOut,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5082)),this.btnJoin.label=O3.tr(5083)},t.prototype.dataChanged=function(){if(this.data instanceof LegionTeamVo){for(var t in this.gpNoJoin.visible=!0,this.gpJoin.visible=!1,this.data.memberList){var e=this.data.memberList[t];e.aId==this.data.leader&&(this.lbName1.text=e.name,this.imgIcon.source=e.icon)}this.lbNum.text=O3.tr(1567,this.data.memberList.length)}else if(this.data instanceof LegionTeamMemberVo){this.imgIcon.source=this.data.icon,this.gpNoJoin.visible=!1,this.gpJoin.visible=!0;var i=App.CM.gtM(O6.B89),s=App.CM.gtM(O6.B82);this.data.aId==s.avatarInfo.id?this.isMySelf=!0:this.isMySelf=!1,i.dragonTeamMsg.myTeam.isLeader?this.btnOut.visible=!0:this.data.aId==s.avatarInfo.id?this.btnOut.visible=!0:this.btnOut.visible=!1,i.dragonTeamMsg.myTeam.leader==this.data.aId?this.gpLeader.visible=!0:this.gpLeader.visible=!1,this.lbName2.text=this.data.name,this.lbLv.text="Lv."+this.data.lv,this.lbPower.textFlow=M18.HTP.parse(O3.tr(1566,M18.FF65(this.data.power)))}},t.prototype.onClickJoin=function(){App.CM.apF(O6.B89,L11.A48,this.data.tId)},t.prototype.onClickOut=function(){this.isMySelf?App.CM.apF(O6.B89,L11.A50):App.CM.apF(O6.B89,L11.A19,this.data.aId)},t}(eui.ItemRenderer);__reflect(ItemLegionDragonTeam.prototype,"ItemLegionDragonTeam");var ItemLegionFuben=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionFubenSkin,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.close=function(){for(var t in this.gpBoss.removeChildren(),this.objs)this.objs[t].destory();this.objs=[]},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.objs=[],this.itemIcon1=new ItemIcon,this.itemIcon2=new ItemIcon,this.gpIcon1.addChild(this.itemIcon1),this.gpIcon2.addChild(this.itemIcon2)},t.prototype.dataChanged=function(){this.gpBoss.removeChildren();var t={id:L4.FA30(this.data.lv),x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},e=new FightGameObject;e.setData(t,this.gpBoss),this.objs||this.initUI(),this.objs.push(e),this.lbName.text=O3.tr(1564,this.data.lv);var i=this.data.firstReward;this.data.isOpen?(TG22.FE16(this.data.lv)?(i=this.data.normalReward,this.lbGrade.text=O3.tr(1583)):this.lbGrade.text=O3.tr(1584),this.lbGrade.textColor=_cc.brown):(this.lbGrade.text=O3.tr(1585,this.data.lv),this.lbGrade.textColor=_cc.red);for(var s=0;s<2;s++){var o=this["itemIcon"+(s+1)],r={data:N12.gID(i[s].k),ct:i[s].v};o.data={itemData:r,isBottom:!1}}this.data.selected?(this.grpIndex.scaleX=this.grpIndex.scaleY=1,this.imgSel.visible=!0):(this.grpIndex.scaleX=this.grpIndex.scaleY=.9,this.imgSel.visible=!1)},t}(eui.ItemRenderer);__reflect(ItemLegionFuben.prototype,"ItemLegionFuben");var ItemLegionList=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionListSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){1==App.CM.gtM(O6.B82).avatarInfo.gm&&this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.btnApply.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickApply,this)},t.prototype.close=function(){this.btnApply.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickApply,this),this.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.numPos=this.gpNum.x,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5056)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5057)),this.lbTip.textFlow=M18.HTP.parse(O3.tr(5058)),this.btnApply.label=O3.tr(5059)},t.prototype.dataChanged=function(){var t,e=App.CM.gtM(O6.B89);if(e.myLegion&&e.myLegion.legion?this.gpApply.visible=!1:this.gpApply.visible=!0,this.itemIndex+1<=3){switch(this.itemIndex){case 0:t="v1_img_number_jt_st_png";break;case 1:t="v1_img_number_jt_nd_png";break;case 2:t="v1_img_number_jt_rd_png"}this.gpNum.width=this.imgIcon1.width,this.imgIcon1.source=t,this.imgIcon1.visible=!0,this.imgIcon2.visible=!1,this.imgIcon3.visible=!1}else{if(this.itemIndex+1<10)t="v1_img_number_jt"+(this.itemIndex+1).toString()+"_png",this.imgIcon1.source=t,this.imgIcon1.visible=!0,this.imgIcon2.visible=!1,this.imgIcon3.visible=!1,this.gpNum.width=this.imgIcon1.width;else if(this.itemIndex+1<100){var i="v1_img_number_jt"+Math.floor((this.itemIndex+1)/10)+"_png",s="v1_img_number_jt"+(this.itemIndex+1)%10+"_png";this.imgIcon1.source=i,this.imgIcon2.source=s,this.imgIcon1.visible=!0,this.imgIcon2.visible=!0,this.imgIcon3.visible=!1,this.gpNum.width=2*this.imgIcon1.width-6}}this.lbName.text=this.data.name,this.lbLv.text=O3.tr(1510,this.data.lv),this.lbLv.x=this.lbName.x+this.lbName.width+5,this.lbLeader.text=this.data.leader,this.lbPower.textFlow=M18.HTP.parse(O3.tr(1511,this.data.power/1e4));var o=L4.FD20(this.data.lv);this.lbNum.textFlow=M18.HTP.parse(O3.tr(1602,this.data.memberNum,o.number)),this.btnApply.visible=1!=this.data.isApply,this.lbTip.visible=1==this.data.isApply},t.prototype.onClickApply=function(){App.CM.apF(O6.B89,L11.B31,this.data.id)},t.prototype.oCI=function(){App.CM.apF(O6.B89,L11.B77,this.data.id),App.CM.apF(O6.B89,L11.B39)},t}(eui.ItemRenderer);__reflect(ItemLegionList.prototype,"ItemLegionList");var ItemLegionMember=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionMemberSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnYellow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX72,this),this.btnGreen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGreen,this)},t.prototype.close=function(){this.btnYellow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX72,this),this.btnGreen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGreen,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t,e=App.CM.gtM(O6.B89);switch(this.data.job){case 1:t=O3.tr(1522);break;case 2:t=O3.tr(1523);break;case 3:t=O3.tr(1524);break;default:t=""}App.CM.gtM(O6.B82);switch(e.myLegion.job){case G17.A1:switch(this.gpLeader.visible=!0,this.btnGreen.verticalCenter=27,this.btnYellow.verticalCenter=-27,this.btnGreen.visible=!0,this.btnYellow.visible=!0,this.data.job){case G17.A1:this.gpLeader.visible=!1;break;case G17.A2:this.btnYellow.label=O3.tr(1526),this.btnGreen.label=O3.tr(1527);break;case G17.A3:this.btnYellow.label=O3.tr(1528),this.btnGreen.label=O3.tr(1529)}break;case G17.A2:switch(this.data.job){case G17.A1:case G17.A2:this.gpLeader.visible=!1;break;case G17.A3:this.gpLeader.visible=!0,this.btnYellow.visible=!1,this.btnGreen.visible=!0,this.btnGreen.label=O3.tr(1529),this.btnGreen.verticalCenter=0}break;case G17.A3:this.gpLeader.visible=!1}if(this.lbName.textFlow=M18.HTP.parse(O3.tr(1521,t,this.data.name)),this.lbPower.textFlow=M18.HTP.parse(O3.tr(1516,this.data.power)),this.lbDevote.textFlow=M18.HTP.parse(O3.tr(1525,this.data.devote)),this.imgIcon.source=this.data.icon,0<this.data.state){this.data.state<3600&&(this.data.state=3600);var i=P6.FJ11(1e3*this.data.state,4);this.lbOnLineState.textFlow=M18.HTP.parse(O3.tr(1514,i))}else this.lbOnLineState.textFlow=M18.HTP.parse(O3.tr(1515))},t.prototype.ZX72=function(){var t,e=this;if(this.btnYellow.label==O3.tr(1526)){var i=O4.getLv(),s=L4.gIV("abdicationLv");if(i<s)return void P18.sDP(O3.tr(1595,s));t=O3.tr(1530,this.data.name),this.operate=1}else this.btnYellow.label==O3.tr(1528)&&(t=O3.tr(1532,this.data.name),this.operate=3);var o=this.data.aId,r={handler:function(){App.CM.apF(O6.B89,L11.B4,o,e.operate)},content:t,isShowCb:!1};App.VM.open(O7.C54,r)},t.prototype.onClickGreen=function(){var t,e=this;this.btnGreen.label==O3.tr(1527)?(t=O3.tr(1531,this.data.name),this.operate=2):this.btnGreen.label==O3.tr(1529)&&(t=O3.tr(1533,this.data.name),this.operate=4);var i=this.data.aId,s={handler:function(){App.CM.apF(O6.B89,L11.B4,i,e.operate)},content:t,isShowCb:!1,btnNums:2};App.VM.open(O7.C54,s)},t.prototype.doOperation=function(){App.CM.apF(O6.B89,L11.B4,this.data.aId,this.operate)},t}(eui.ItemRenderer);__reflect(ItemLegionMember.prototype,"ItemLegionMember");var ItemLegionRecord=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionRecordSkin,t}return __extends(t,e),t.prototype.dataChanged=function(){var t=P6.FJ11(1e3*this.data.time);this.lbTime.textFlow=M18.HTP.parse(O3.tr(4201,t));var e=M18.format(L4.FHH53(this.data.tId),this.data.paramList);this.lbDesc.textFlow=M18.HTP.parse(e)},t}(eui.ItemRenderer);__reflect(ItemLegionRecord.prototype,"ItemLegionRecord");var ItemLegionSystem=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionSystemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.close=function(){this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.B89);this.lbTitle.text=this.data.title;var e=M18.FL28(this.data.desc,"|");this.lbDesc.text=e[0],e[1]?(this.lbDesc1.text=e[1],this.lbDesc1.visible=!0,this.lbDesc.y=this.lbTitle.y+28):(this.lbDesc1.visible=!1,this.lbDesc.y=this.lbTitle.y+40),this.imgIcon.source=this.data.icon;var i=0;switch(this.data.id){case B6.A1:i=t.ZP32();break;case B6.A3:i=t.ZS51();break;case B6.A4:i=t.ZT4();break;case B6.A5:i=t.ZT6();break;case B6.A2:i=t.ZP31()}P7.FD53(this.btnGo,i)},t.prototype.onClickGo=function(){var t={sLink:this.data.sortid};TG84.goToDlg(t)},t}(eui.ItemRenderer);__reflect(ItemLegionSystem.prototype,"ItemLegionSystem");var ItemLegionTask=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemLegionTaskSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.btnGo.label=O3.tr(5061),this.lbTip.text=O3.tr(909)},t.prototype.dataChanged=function(){this.data.index%2==1?this.bg.visible=!1:this.bg.visible=!0,this.lbExp.text=this.data.exp,this.lbTitle.text=this.data.type,this.lbNum.text=this.data.activeNum+"/"+this.data.limit,1==this.data.state?this.btnGo.visible=!0:this.btnGo.visible=!1,this.lbTip.visible=!this.btnGo.visible},t.prototype.onClickGo=function(){if(2106==this.data.goto){if(App.SceneManager.runScene(M2.A4),App.CM.gtM(O6.B99).isSpFighting)return P18.sDP(O3.tr(5060)),void App.CM.apF(O6.B89,L11.B38);App.CM.apF(O6.B89,L11.B8),App.CM.apF(O6.B89,L11.B38),App.VM.isOpen(O7.G45)&&App.CM.apF(O6.B82,L13.A48),App.CM.apF(O6.B89,L11.A98)}else{var t={sLink:this.data.goto};TG84.goToDlg(t),2103!=this.data.goto&&2104!=this.data.goto||App.VM.close(O7.B66)}},t}(eui.ItemRenderer);__reflect(ItemLegionTask.prototype,"ItemLegionTask");var LegionActAwardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionActAwardSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionActAward,width:this.gpList.width,height:this.gpList.height};this.myListView=new LegionListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(5062)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=[],i=L4.FB79(),s=t.myLegion.activeLv,o=Math.max(0,s-20),r=s+20;for(var n in i)if(0<parseInt(n)&&parseInt(n)>=o&&parseInt(n)<=r){var a=t.myLegion.ZC70(parseInt(n));i[n].state=a,e.push(i[n])}e.sort(function(t,e){return t.state!=e.state?t.state-e.state:t.level-e.level}),this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy()},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A72)},t}(BaseEuiView);__reflect(LegionActAwardView.prototype,"LegionActAwardView");var LegionActiveMainView=function(o){function t(t,e){return o.call(this,t,e)||this}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.VM.rgS(O7.B66,O7.F1,"LegionActiveView",this.content),App.VM.rgS(O7.B66,O7.C56,"LegionDayRewardView",this.content),this.title=O3.tr(1503);var t=[O3.tr(1503),O3.tr(1504)],e=[O7.F1,O7.C56];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this);var i=t[0]||O7.F1;this.ZQ23(i);var s=App.CM.gtM(O6.B89);this.ZE88(s)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){this.btnList.ZHH58(O7.F1,t.ZC72()),this.btnList.ZHH58(O7.C56,t.ZB52())},t.prototype.ZQ23=function(t){switch(t){case O7.F1:this.title=O3.tr(1503),this.btnList.ZM66(t);break;case O7.C56:this.title=O3.tr(1504),this.btnList.ZM66(t)}},t.prototype.close=function(){o.prototype.close.call(this)},t}(BasePanelView);__reflect(LegionActiveMainView.prototype,"LegionActiveMainView");var LegionActiveView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionActiveSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionTask,gap:0,width:this.gpListContent.width-4,height:this.gpListContent.height-10};this.myListView=new LegionListBase(t),this.gpListContent.addChild(this.myListView),this.myListView.verticalCenter=0,this.myListView.horizontalCenter=0,this.scReward.viewport=this.listReward,this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF,this.lbAward.textFlow=M18.HTP.parser(O3.tr(1581)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4215)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4216)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4217)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4218)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4219)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4220)),this.btnUpgrade.label=O3.tr(4222)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.gpAward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE34,this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=L4.FD21();this.myListView.rfL(e),this.lbLv.text=O3.tr(1558,t.myLegion.activeLv);for(var i=L4.FB78(t.myLegion.activeLv),s=L4.FB78(t.myLegion.activeLv+1),o=TG22.FA31(),r=Math.min(o.length,3),n=1;n<=r;n++){var a=O4.FD72(parseInt(o[n-1].id));(l=this["lbCurAttr"+n]).visible=!0,l.text=a,(c=this["lbCurValue"+n]).visible=!0,c.text="+"+o[n-1].value}for(n=r+1;n<=3;n++){(l=this["lbCurAttr"+n]).visible=!1,(c=this["lbCurValue"+n]).visible=!1}if(i.exp<0)this.gpCur.horizontalCenter=0,this.gpNext.visible=!1,this.pBarField.value=100,this.lbExpBar.text=O3.tr(1559);else{this.gpCur.horizontalCenter=-133,this.gpNext.horizontalCenter=133,this.gpNext.visible=!0;var h=M18.FL28(s.attr,";",":"),p=Math.min(h.length,3);for(n=1;n<=p;n++){a=O4.FD72(parseInt(h[n-1][0]));(l=this["lbNextAttr"+n]).visible=!0,l.text=a,(c=this["lbNextValue"+n]).visible=!0,c.text="+"+(parseInt(h[n-1][1])+o[n-1].value)}for(n=p+1;n<=3;n++){var l,c;(l=this["lbNextAttr"+n]).visible=!1,(c=this["lbNextValue"+n]).visible=!1}this.pBarField.value=t.myLegion.activeExp/i.exp*100,this.lbExpBar.textFlow=M18.HTP.parse(O3.tr(4221,t.myLegion.activeExp,i.exp))}var u,d=t.ZC72();P7.FD53(this.btnUpgrade,d),d<=0?(P16.sGF(this.btnUpgrade,!0),this.btnUpgrade.enabled=!1):(this.btnUpgrade.enabled=!0,P16.sGF(this.btnUpgrade,!1));var v=[],f=(u=s?M18.FL28(s.reward,";",":"):M18.FL28(i.reward,";",":")).length;for(n=0;n<f;n++){var g={data:N12.gID(u[n][0]),ct:u[n][1]};v.push({itemData:g,isBottom:!1})}this.dataSource.replaceAll(v)},t.prototype.ZE34=function(){App.CM.apF(O6.B89,L11.A80)},t.prototype.ZR46=function(){App.CM.apF(O6.B89,L11.B45)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy(),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.gpAward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE34,this),this.dataSource.removeAll()},t}(BaseEuiView);__reflect(LegionActiveView.prototype,"LegionActiveView");var LegionApplyView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionApplySkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionApply,width:this.gpList.width,height:this.gpList.height};this.myListView=new LegionListBase(t),this.gpList.addChild(this.myListView),this.dlg.title=O3.tr(4186),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4187)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4188)),this.btnChange.label=O3.tr(4189),this.cbAutoAgree.label=O3.tr(4190)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),App.CM.apF(O6.B89,L11.A44),this.myListView.open(),this.dlg.ZM69(this.closeSelf.bind(this),this),this.cbAutoAgree.addEventListener(egret.Event.CHANGE,this.onChange,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH15,this),this.edPower.addEventListener(egret.Event.CHANGE,this.inputPower,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=t.applyMsg.applyList;this.myListView.rfL(e,!0),1==t.myLegion.legion.isNeedAgree?this.cbAutoAgree.selected=!1:this.cbAutoAgree.selected=!0,this.cbState=this.cbAutoAgree.selected,this.edPower.text=(t.myLegion.legion.power/1e4).toString()},t.prototype.ZHH15=function(){var t=M18.FL28(L4.gIV("reqCombatPower"),","),e=parseInt(this.edPower.text),i=App.CM.gtM(O6.B89);if(this.cbState!=this.cbAutoAgree.selected||i.myLegion.legion.power/1e4!=e){if(NaN!=e)return e<parseInt(t[0])||e>parseInt(t[1])?(P18.sDP(O3.tr(1519)),void(this.edPower.text=(i.myLegion.legion.power/1e4).toString())):void App.CM.apF(O6.B89,L11.A33,e);P18.sDP(O3.tr(1518))}else P18.sDP(O3.tr(1582))},t.prototype.inputPower=function(){var t=this.edPower.text;TG22.FJ97(t)||""==this.edPower.text?this.oldPower=t:this.edPower.text=this.oldPower,P7.FL26()},t.prototype.onChange=function(){this.cbState!=this.cbAutoAgree.selected&&App.CM.apF(O6.B89,L11.A9),TG40.playClickEffect()},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy(),this.cbAutoAgree.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZHH15,this),this.edPower.removeEventListener(egret.Event.CHANGE,this.inputPower,this)},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.B19)},t}(BaseEuiView);__reflect(LegionApplyView.prototype,"LegionApplyView");var LegionBlessRewardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionGetBlessRewardSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.onClickGet.bind(this),this,!0),this.scReward.viewport=this.listReward,this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF,this.dlg.title=O3.tr(5063),this.dlg.strBtnOK=O3.tr(5064)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.data=t[0],this.GX5()},t.prototype.GX5=function(){this.lbTitle.text=O3.tr(1554,this.data.reward[0]);for(var t=M18.FL28(this.data.reward[1],";",":"),e=[],i=t.length,s=0;s<i;s++){var o={data:N12.gID(t[s][0]),ct:t[s][1]};e.push({itemData:o,isBottom:!1})}if(i<=4){var r=this.listReward.layout;this.scReward.width=85*i+(i-1)*r.gap}switch(this.dataSource.replaceAll(e),this.data.state){case 1:this.dlg.setOKEnable(!1);break;case 2:this.dlg.setOKEnable(!0);break;case 3:this.dlg.showOKBtn=!1}this.imgGet.visible=!this.dlg.showOKBtn},t.prototype.onClickGet=function(){App.CM.apF(O6.B89,L11.A46,parseInt(this.data.reward[0]))},t.prototype.close=function(){s.prototype.close.call(this),this.data=null,this.dataSource.removeAll()},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A43)},t}(BaseEuiView);__reflect(LegionBlessRewardView.prototype,"LegionBlessRewardView");var LegionBlessView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.boxPosPer=[],i.skinName=LegionBlessSkin,i}return __extends(t,o),t.prototype.initData=function(){},t.prototype.initUI=function(){o.prototype.initUI.call(this);var t={render:ItemLegionBless,width:this.gpRecordList.width,height:this.gpRecordList.height};this.myListView=new LegionListBase(t),this.gpRecordList.addChild(this.myListView),this.reward1=new ItemLegionBlessBox,this.gpBox1.addChild(this.reward1),this.reward2=new ItemLegionBlessBox,this.gpBox2.addChild(this.reward2),this.reward3=new ItemLegionBlessBox,this.gpBox3.addChild(this.reward3);for(var e=this.gpPross.width,i=1;i<=3;i++){var s=(this["gpBox"+i].x+20)/e;this.boxPosPer.push(s)}this.btnPuTong.label=O3.tr(4230),this.btnReCheng.label=O3.tr(4231),this.btnQianCheng.label=O3.tr(4232),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4236)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4237)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4238)),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4239))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.myListView.open(),this.btnPuTong.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX73,this),this.btnReCheng.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT7,this),this.btnQianCheng.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM1,this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=t.myLegion.legion.blessList;this.myListView.rfL(e);for(var i=1;i<=3;i++){var s=L4.FA72(i),o=this["gpAdd"+i];o.getChildAt(0).text=O3.tr(1546,s.exp);var r=o.getChildAt(1),n=M18.FL28(s.reward,":");r.text=O3.tr(1547,n[1]),o.getChildAt(2).text=O3.tr(1548,s.belief);var a=this["lbCostGood"+i],h=this["imgGood"+i],p=M18.FL28(s.cost,":");a.text=M18.FF65(p[1]);var l=N12.gID(p[0]);h.setData(l),h.setImgSize({w:40,h:40})}var c=L4.FD20(t.myLegion.legion.lv);this.lbQiFu.textFlow=M18.HTP.parse(O3.tr(1549,t.myLegion.legion.allBlessNum,c.number));var u=L4.gIV("blessStageRewards");parseInt(L4.gIV("blessTime"))<=t.myLegion.blessNum?(P16.sGF(this.btnPuTong,!0),P16.sGF(this.btnReCheng,!0),P16.sGF(this.btnQianCheng,!0),this.btnPuTong.enabled=!1,this.btnReCheng.enabled=!1,this.btnQianCheng.enabled=!1):(P16.sGF(this.btnPuTong,!1),P16.sGF(this.btnReCheng,!1),P16.sGF(this.btnQianCheng,!1),this.btnPuTong.enabled=!0,this.btnReCheng.enabled=!0,this.btnQianCheng.enabled=!0);for(var d=M18.FL28(u,"|",","),v=t.myLegion.legion.blessPoint,f=0,g=0,m=0,y=0,A=0,b=0,T=0,C=0;C<d.length;C++){T<parseInt(d[C][0])&&(T=parseInt(d[C][0])),v>=d[C][0]&&(b=C);var w={state:t.myLegion.ZF67(parseInt(d[C][0])),reward:d[C]};this["reward"+(C+1)].data=w}this.lbXinYang.textFlow=M18.HTP.parse(O3.tr(1550,t.myLegion.legion.blessPoint,T)),b>=d.length-1?A=100:y=0==b?(f=0,g=this.boxPosPer[0],m=parseInt(d[0][0]),v):(f=this.boxPosPer[b],g=this.boxPosPer[b+1],m=parseInt(d[b+1][0])-parseInt(d[b][0]),v-parseInt(d[b][0])),0==A&&(A=100*(y/m*(g-f)+f)),this.proBar.value=A},t.prototype.ZX73=function(){App.CM.apF(O6.B89,L11.B72,B12.A3)},t.prototype.ZT7=function(){App.CM.apF(O6.B89,L11.B72,B12.A2)},t.prototype.ZM1=function(){var t=L4.FA72(3),e=M18.FL28(t.cost,":"),i=(N12.gID(e[0]),{handler:function(){App.CM.apF(O6.B89,L11.B72,B12.A1)},content:O3.tr(1605,e[1]),isShowCb:!1});App.VM.open(O7.C54,i)},t.prototype.close=function(){o.prototype.close.call(this),this.myListView.destroy(),this.btnPuTong.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX73,this),this.btnReCheng.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT7,this),this.btnQianCheng.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM1,this)},t.prototype.closeSelf=function(){this.apF(L11.B27)},t}(BaseEuiView);__reflect(LegionBlessView.prototype,"LegionBlessView");var LegionBossCampUiView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=LegionBossCampUiSkin,i}return __extends(t,o),t.prototype.initData=function(){},t.prototype.initUI=function(){o.prototype.initUI.call(this),this.gpBg.touchEnabled=!1,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4318)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4319)),this.btnRank.label=O3.tr(4320),this.cbAutoChallenge.label=O3.tr(4321),this.cbAutoLife.label=O3.tr(4322),this.cbShowMy.label=O3.tr(4323)},t.prototype.isSureClose=function(){var t=this;App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(603)),this,function(){t.GV97(),App.CM.apF(O6.B89,L11.B49,!0)},void 0)},t.prototype.open=function(){for(var i=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.openRank=!1;var s=App.CM.gtM(O6.B89);this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN91,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.isSureClose,this),this.cbAutoChallenge.addEventListener(egret.Event.CHANGE,this.ZD83,this),this.cbShowMy.addEventListener(egret.Event.CHANGE,this.ZW7,this),this.cbAutoLife.addEventListener(egret.Event.CHANGE,this.ZN90,this),App.DelayOptManager.ZE59(this,function(){var t=App.VM.gOV(O7.I85);if(t){var e=P7.FJ17();i.gpBg.bottom=e?t.chartGroup.height==ChatView.minHeig?240:490:t.chartGroup.height==ChatView.minHeig?360:490}}),this.ZE88(s)},t.prototype.updateCbBox=function(t){this.cbAutoLife.selected=t.legionBoss.isAutoRevive,this.cbShowMy.selected=t.legionBoss.isShowMy,this.cbAutoChallenge.selected=t.legionBoss.isAutoFight},t.prototype.ZW7=function(){App.CM.apF(O6.B89,L11.B71,this.cbShowMy.selected)},t.prototype.ZD83=function(){App.CM.apF(O6.B89,L11.A67,this.cbAutoChallenge.selected)},t.prototype.ZN90=function(){var t=App.CM.gtM(O6.B89);this.cbAutoLife.selected?(this.cbAutoLife.selected=!1,this.onClickGo()):t.legionBoss.isAutoRevive=this.cbAutoLife.selected},t.prototype.onClickGo=function(){var t=this,e=L4.liftCost,i={handler:function(){App.CM.gtM(O6.B89).legionBoss.isAutoRevive=t.cbAutoLife.selected=!0},content:O3.tr(718,e.v)};App.VM.open(O7.C54,i)},t.prototype.ZV86=function(t){var e=this,i=t.legionBoss;switch(t.legionBoss.state){case 1:this.timeText.text=O3.tr(710);break;case 2:this.timeText.text=O3.tr(711);break;case 3:this.timeText.text=O3.tr(6328)}this.lbTime.text=P6.FJ11(1e3*i.ZL92(),3),this.challHander||(this.challHander=App.K16.doTimer(1e3,0,function(){e.lbTime.text=P6.FJ11(1e3*i.ZL92(),3)},this))},t.prototype.ZN91=function(){var t={type:RankType.legionBossLeg,currPage:1,size:9};App.CM.apF(O6.C19,O18.A5,t),this.openRank=!0},t.prototype.updateBoss=function(t){var e=t.legionBoss;this.pbarHp.value=e.hp,this.pbarHp.maximum=e.tHp},t.prototype.updateDpe=function(t){var e=t.legionBoss,i=e.myRank?e.myRank+"":O3.tr(214),s=O3.tr(703,i);this.lbMyRanKing.textFlow=M18.HTP.parser(s)},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TG20)switch(e){case P4.S46:this.GV97();case P4.W87:case P4.J2:this.ZE88(t);break;case E6.A2:this.enabled=!1;break;case E6.A3:this.enabled=!0}else t instanceof THH11&&t.nType==RankType.legionBossLeg&&this.openRank&&(App.CM.apF(O6.B89,L11.B53),this.openRank=!1)},t.prototype.ZE88=function(t){this.ZV86(t),this.updateBoss(t),this.updateDpe(t),this.updateCbBox(t)},t.prototype.GV97=function(){this.challHander&&(App.K16.rBH(this.challHander),this.challHander=null)},t.prototype.close=function(){o.prototype.close.call(this),this.btnRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN91,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.isSureClose,this),this.cbShowMy.removeEventListener(egret.Event.CHANGE,this.ZW7,this),this.cbAutoChallenge.removeEventListener(egret.Event.CHANGE,this.ZD83,this),this.cbShowMy.removeEventListener(egret.Event.CHANGE,this.ZW7,this),this.cbAutoLife.removeEventListener(egret.Event.CHANGE,this.ZN90,this),App.CM.gtM(O6.B16).isTower||this.GV97();var t=App.VM.gOV(O7.I85);t&&(t.gpTopBtn.top=-150),egret.Tween.removeTweens(this.gpBg)},t.prototype.setEnabled=function(t){this.gpBg.touchEnabled=t},t.prototype.ZR53=function(t){var e=this;egret.Tween.get(this.gpBg).to({bottom:t},300).call(function(){egret.Tween.removeTweens(e.gpBg)})},t}(BaseEuiView);__reflect(LegionBossCampUiView.prototype,"LegionBossCampUiView");var LegionBossDropView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionBossDropSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dgReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.dgReward.dataProvider=this.dataSource},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.title=O3.tr(6271),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.GX5=function(){var t=L4.gIV("specialItem",2),e=L4.gIV("boxReward",2),i=M18.FL28(t,","),s=M18.FL28(e,";",":"),o=[];for(var r in s){var n=s[r],a=N12.gID(n[0]),h=0<=i.indexOf(n[0]),p=h?TF59.FC9(a.quality):void 0,l={itemData:{data:a,ct:parseInt(n[1]),texiao:p},isBottom:!1,scale:1,isJp:h};o.push(l)}this.dataSource.replaceAll(o)},t.prototype.close=function(){},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.B16)},t}(BaseEuiView);__reflect(LegionBossDropView.prototype,"LegionBossDropView");var LegionBossLegRankView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.maxCount=9,i.skinName=LegionBossRankSkin,i}return __extends(t,o),t.prototype.initData=function(){},t.prototype.initUI=function(){o.prototype.initUI.call(this);var t={render:ItemLegionBossRank,gap:0,width:this.gpList.width,height:this.gpList.height,arrowScale:1};this.listView=new CommonListBase(t),this.gpList.addChild(this.listView),this.listView.noScoller(),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.lbRank.text=O3.tr(6331),this.lbName.text=O3.tr(6332),this.lbValue.text=O3.tr(6333)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.title=O3.tr(6329);var i=App.CM.gtM(O6.C19);this.ZHH63(i),this.curPage=1,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.lbCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.lbCheck.textFlow=M18.HTP.parser(O3.tr(6335))},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e&&0<e.length?e[0]:null;t instanceof THH11&&this.ZHH63(t),t instanceof TG20&&s==P4.F54&&App.CM.apF(O6.B89,L11.B55)},t.prototype.ZHH63=function(t){if(this.curPage=t.nCurrentPage,this.totalPage=t.nAllPage,this.btnLeft.visible=1!=this.curPage,this.btnRight.visible=this.curPage!=this.totalPage&&0<this.totalPage,t.rankList){var e=t.rankList.slice((this.curPage-1)*this.maxCount,this.curPage*this.maxCount);if(t.rankList.length<=9)for(var i=t.rankList.length;i<9;i++){var s=new RankData({r:i+1,n:O3.tr(3304),dmg:0});e.push(s)}this.listView.rfL(e)}this.lbMyRank.textFlow=M18.HTP.parser(O3.tr(6334,t.myRankList.nRank))},t.prototype.onClickLeft=function(){var t=this.curPage-1;this.curPage=Math.max(t,1),this.loadRank()},t.prototype.onClickRight=function(){var t=this.curPage+1;this.curPage=Math.min(t,this.totalPage),this.loadRank()},t.prototype.loadRank=function(){var t={type:RankType.legionBossLeg,currPage:this.curPage+1,size:9};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.onClickRank=function(){App.CM.apF(O6.B89,L11.A52)},t.prototype.close=function(){o.prototype.close.call(this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this)},t.prototype.closeSelf=function(){this.apF(L11.B54)},t}(BaseEuiView);__reflect(LegionBossLegRankView.prototype,"LegionBossLegRankView");var LegionBossMemRankView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.maxCount=9,i.skinName=LegionBossRankSkin,i}return __extends(t,o),t.prototype.initData=function(){},t.prototype.initUI=function(){o.prototype.initUI.call(this);var t={render:ItemLegionBossRank,gap:0,width:this.gpList.width,height:this.gpList.height,arrowScale:1};this.listView=new CommonListBase(t),this.gpList.addChild(this.listView),this.listView.noScoller(),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.lbRank.text=O3.tr(6331),this.lbName.text=O3.tr(5537),this.lbValue.text=O3.tr(6333),this.gpLegionRank.visible=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.title=O3.tr(6330),this.curPage=1;var i=App.CM.gtM(O6.B89);this.ZE88(i),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e&&0<e.length?e[0]:null;t instanceof TG20&&s==P4.F54&&this.ZE88(t)},t.prototype.ZE88=function(t){if(t.legionBoss.rankList){var e=t.legionBoss.rankList.slice((this.curPage-1)*this.maxCount,this.curPage*this.maxCount);if(e.length<=9)for(var i=e.length;i<9;i++){var s=new RankData({r:i+1,n:O3.tr(3304),dmg:0});e.push(s)}this.listView.rfL(e),this.totalPage=Math.ceil(t.legionBoss.rankList.length/9),this.btnLeft.visible=1!=this.curPage,this.btnRight.visible=this.curPage!=this.totalPage&&0!=this.totalPage}},t.prototype.onClickLeft=function(){var t=this.curPage-1;this.curPage=Math.max(t,1);var e=App.CM.gtM(O6.B89);this.ZE88(e)},t.prototype.onClickRight=function(){var t=this.curPage+1;this.curPage=Math.min(t,this.totalPage);var e=App.CM.gtM(O6.B89);this.ZE88(e)},t.prototype.close=function(){o.prototype.close.call(this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this)},t.prototype.closeSelf=function(){this.apF(L11.B56)},t}(BaseEuiView);__reflect(LegionBossMemRankView.prototype,"LegionBossMemRankView");var LegionBossOpenBoxView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=CrossBossOpenSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.touchEnabled=!1,this.touchChildren=!1,this.pBarOpen.slideDuration=0,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5348))},t.prototype.open=function(){this.timeHandler||this.GX5(),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this)},t.prototype.GX5=function(){var t=this,e=App.CM.gtM(O6.B89).legionBoss.ZP20();this.pBarOpen.maximum=e,this.pBarOpen.value=0,this.timeHandler=App.K16.doTimer(1e3,e,function(){t.pBarOpen.value+=1},this,function(){t.closeSelf(!0)},this)},t.prototype.closeSelf=function(t){App.CM.gtM(O6.B89).legionBoss.openBoxCd=0,this.apF(L11.B58,t)},t.prototype.oCC=function(t){this.closeSelf(!0)},t.prototype.close=function(){s.prototype.close.call(this),this.ZHH70()},t.prototype.ZHH70=function(){this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e)},t}(BaseEuiView);__reflect(LegionBossOpenBoxView.prototype,"LegionBossOpenBoxView");var LegionBossReviveView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=CrossBossResurgenceSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(){this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this),this.GX5(),this.btnGo.label=O3.tr(5349)},t.prototype.onClickGo=function(){var t=L4.liftCost,e={handler:function(){App.CM.apF(O6.B89,L11.B13)},cost:t.v,costTp:P10.A1,content:O3.tr(716,t.v)};App.VM.open(O7.C54,e)},t.prototype.GX5=function(){var t=this,e=App.CM.gtM(O6.B89).legionBoss,i=e.ZJ11();this.lbOver.text=O3.tr(715,i),e.isAutoRevive&&App.CM.apF(O6.B89,L11.B13),this.timeHandler||(this.timeHandler=App.K16.doTimer(1e3,i,function(){i--,t.lbOver.text=O3.tr(715,i)},this,function(){t.oCC()},this))},t.prototype.ZW10=function(){this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null)},t.prototype.oCC=function(){App.CM.apF(O6.B89,L11.B64);var t=App.CM.gtM(O6.B89);t.notify(E6.A14),t.notify(E6.A3),App.VM.close(O7.C54)},t.prototype.close=function(){s.prototype.close.call(this),this.ZW10(),this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGo,this)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e)},t}(BaseEuiView);__reflect(LegionBossReviveView.prototype,"LegionBossReviveView");var LegionBossView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i._robotNames={},i.npcList={},i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.grpMap=new FightMapView,this.addChild(this.grpMap),this.grpGround=new eui.Group,this.grpGround.width=1080,this.grpGround.height=1800,this.addChild(this.grpGround),this.mapData=new FightMapData},t.prototype.setChallenge=function(t){this.challenge&&(this.challenge.setBoo=t)},t.prototype.open=function(){o.prototype.open.call(this);var t=L4.gIV("mapId",2);this.setSceneData(t),this.grpMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this);var e=App.CM.gtM(O6.B16),i=App.VM.gOV(O7.C35),s=App.CM.gtM(O6.B89);e.isTower||!i||s.myLegion||e.notify(P4.T82),this.isOpen=!0,this.openSceneUI()},t.prototype.close=function(){o.prototype.close.call(this),this.closeSceneUI(),this.grpMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),this.grpGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR67,this),App.CM.gtM(O6.B99).fightSceneType=I4.A8,egret.Tween.removeTweens(this)},t.prototype.ZR67=function(t){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig&&e.clickUnfold()},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.ZS41(),this.removeAllNpc()},t.prototype.setSceneData=function(t){null!=t&&(this.curMapName=t,this.loadMapRes())},t.prototype.loadMapRes=function(){this.isInit()&&null!=this.curMapName&&(this.showMapName&&this.curMapName==this.showMapName?this.ZL38(!0):(this.showMapName?(FightRes.ZO48(this.curMapName,this.ZI4.bind(this)),this.grpMap.setMapName(this.curMapName)):this.grpMap.setMapName(this.curMapName,this.ZD89.bind(this),mapWH.SET_830_450),this.showMapName=this.curMapName))},t.prototype.ZD89=function(){FightRes.ZO48(this.curMapName,this.ZI4.bind(this))},t.prototype.ZI4=function(){this.mapData.setData(RES.getRes(FightRes.getMapResKey(this.curMapName))),this.grpMap.width=this.grpGround.width=this.mapData.getMapWidth(),this.grpMap.height=this.grpGround.height=this.mapData.getMapHeight(),this.grpMap.x=0,this.grpMap.y=0,this.grpGround.x=0,this.grpGround.y=0,this.ZL38(null,!0)},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.getMapName=function(){return this.curMapName},t.prototype.ZO56=function(){var t=this.ZR68();return{x:this.width/2-t.x,y:this.height/2-t.y}},t.prototype.getBgMap=function(){return this.grpMap},t.prototype.ZR68=function(){return this.grpGround},t.prototype.FK54=function(){return this.mapData},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.openSceneUI=function(){if(!App.VM.isOpen(O7.I64)){this.ZK39(),App.CM.apF(O6.B89,L11.B87),App.CM.apF(O6.B89,L11.B3),App.CM.apF(O6.B89,L11.A97),App.CM.apF(O6.B89,L11.B38),App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.C10,O16.A5),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9);App.CM.gtM(O6.B99)}},t.prototype.closeSceneUI=function(){App.CM.apF(O6.B89,L11.B88)},t.prototype.ZL38=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this.ZS41(),this.ZW80();var i=App.CM.gtM(O6.B89);this.ZE35(i)},t.prototype.ZW80=function(){var t=!1,e=App.CM.gtM(O6.B89).legionBoss;if(null==this._selfTeam){var i=P13.A4,s=TG67.FE98(e.mySelf.sx,e.mySelf.sy);this._selfTeam=new FightMoveTeam(i,Dir.tl,s.y,s.x),t=!0}var o={};(o.effectId=parseInt(M16.gIV("fightEffect")),this._selfTeam.setTeamData(e.mySelf,this,!1,void 0,o),t)&&this._selfTeam.FG91(J11.A7).ZG79()},t.prototype.sendMyPos=function(){if(this._selfTeam){var t=this._selfTeam.FG91(J11.A7);t&&App.CM.apF(O6.B89,L11.B51,t.x,t.y)}},t.prototype.ZE35=function(t){var e=t.legionBoss.players||{};for(var i in null==this._gameObjs&&(this._gameObjs={}),this._gameObjs){var s=this._gameObjs[i];null==(r=e[i])&&(this._gameObjs[i]=null,delete this._gameObjs[i],s.destroy())}var o=!1;for(var i in e){var r=e[i],n=this._gameObjs[i];if(o=!1,null==n){var a=TG67.FE98(r.sx,r.sy);n=new FightMoveTeam(P13.A6,Dir.tl,a.y,a.x),this._gameObjs[i]=n,o=!0}n.setTeamData(r,this,!1);var h=n.teams[0].getComponent(J14.C_Avatar),p=App.CM.gtM(O6.B89);if(h.body.visible=!p.legionBoss.isShowMy,r.ex){a={x:r.ex,y:r.ey};n.ZO40(a)}if(o)n.FG91(J11.A7).addPosComp()}},t.prototype.createNpc=function(t,e,i,s,o,r,n){var a;void 0===n&&(n=null),this.npcList[i]?a=this.npcList[i]:(a=new FightSceneNpc,this.npcList[i]=a);var h={id:t,objType:P13.A6,dir:Dir.br,x:e.x,y:e.y,n:n,ty:e.ty?e.ty:null,npcN:i,bt:BehaviourType.Stand_d,mth:i==FightSceneNpc.npcName.CROSSBOSS_NPC?"wdsg_kffzs_a_001":void 0};a.setData(h,this,s,o,r)},t.prototype.isNpcInPos=function(t){for(var e in this.npcList){var i=this.npcList[e].getTargetPos();if(i.x==t.x&&i.y==t.y)return!0}return!1},t.prototype.getSceneNpc=function(t){return this.npcList[t]},t.prototype.ZW82=function(t){var r=this;switch(t){case 1:var e=L4.gIV("bossId",2),i=N17.FF93(parseInt(e)),s=FightSceneNpc.npcName.CROSSBOSS_NPC,o=P7.copyTab(L4.bossPos);o.ty=J11.A2;var n=App.CM.gtM(O6.B89).legionBoss;0<n.hp&&(2==n.state||1==n.state)?this.createNpc(i.image,o,s,FightSceneNpc.npcType.MODEL,function(){var t=App.CM.gtM(O6.B89).legionBoss;if(t.state){var e=function(){App.CM.apF(O6.B89,L11.A90)};t.isAutoFight?t.isAutoFight&&(0==t.ZJ11()||t.isAutoRevive)&&(App.K16.doTimer(1e3,1,e,r),r.setChallenge(!1)):(r.setChallenge(!0),r.challenge.x=o.x,r.challenge.y=o.y+30,r.challenge.setHander(e))}else r.setChallenge(!1)}):this.ZO58(FightSceneNpc.npcName.CROSSBOSS_NPC);break;case 2:for(var a=App.CM.gtM(O6.B89).legionBoss,h=a.boxList,p=function(t){var e=h[t-1],i={x:e.x,y:e.y},s=FightSceneNpc.npcName.CROSSBOSS_BOX_+e.id,o=L4.gIV("boxResources",2);l.createNpc(o,i,s,FightSceneNpc.npcType.IMAGE,function(){App.CM.apF(O6.B89,L11.A92,e.id),a.curBox=e.id},function(){App.CM.gtM(O6.B89);var t=r.getSceneNpc(s);r._selfTeam.ZO39(t,s)})},l=this,c=1;c<=h.length;c++)p(c)}},t.prototype.ZO59=function(t,e){var i;if(t)i=t;else for(var s=void 0;i=this.mapData.ZS27(),s=TG67.FE98(i.x,i.y),!this.mapData.ZW60(s.x,s.y)||e&&Math.sqrt(e.x-i.x)+Math.sqrt(e.y-i.y)<=10;);return i},t.prototype.ZS41=function(){this.ZL39(),this._selfTeam&&(this._selfTeam.destroy(),this._selfTeam=null)},t.prototype.removeAllNpc=function(){for(var t in this.npcList)this.ZO58(t);this.npcList={}},t.prototype.ZL39=function(){var i=this;this._gameObjs&&Object.keys(this._gameObjs).forEach(function(t){var e=i._gameObjs[t];e&&e.destroy(),i._gameObjs[t]=null,delete i._gameObjs[t]});this._robotNames&&Object.keys(this._robotNames).forEach(function(t){i._robotNames[t]=null,delete i._robotNames[t]})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e&&0<e.length?e[0]:null;t instanceof TG12?this.ZE70(t,s):t instanceof TG65?this.ZG47(t,s):t instanceof TG20&&this.ZE88(t,s)},t.prototype.ZG47=function(t,e){switch(e){case FightD.FC_Update_UI:this.openSceneUI();break;case FightD.FC_Close_UI:this.closeSceneUI()}},t.prototype.ZE70=function(t,e){switch(e){case P4.J63:this.ZW80();break;case P4.S94:FightSoundManager.ZO51();break;default:var i=App.CM.gtM(O6.B99);if(i.isFighting&&i.fightType!=P15.A3)return}},t.prototype.ZW81=function(){for(var t in this.npcList)t!=FightSceneNpc.npcName.CROSSBOSS_NPC&&this.ZO58(t)},t.prototype.ZE88=function(t,e){var i=t.legionBoss;if(i)switch(e){case P4.Q84:this.ZE37(),this.ZS41(),this.removeAllNpc(),this.challenge||(this.challenge=new ClimbChallenge,this.challenge.name=N1.A12,this.grpGround.addChild(this.challenge)),this.ZW80(),this.ZW82(1),this.ZW82(2),this.ZE35(t);break;case P4.S48:if(this.removeAllNpc(),this.ZS41(),this.challenge){var s=this.grpGround.getChildByName(N1.A12);s&&this.grpGround.removeChild(s),this.challenge=null}break;case P4.W87:this.ZW82(1),this.ZW82(2),this.isCloseScene(t);break;case E6.A1:case P4.Q85:this.ZE35(t);break;case P4.HH25:case P4.I99:this.ZW81(),this.ZW82(2);break;case B19.A1:this.setChallenge(!1);break;case P4.P18:case E6.A10:t.legionBoss.isAutoFight?this.ZE36(i):(this.ZE37(),this.isAroundNpc(i));break;case E6.A14:if(this.isOpen)this.isOpen=!1;else if(App.CM.gtM(O6.B99).isFighting||0!=i.ZJ11())this.ZE37();else!this.isAroundNpc(i)&&i.isAutoFight&&this.ZE36(i);break;case P4.Y14:case P4.W65:this.isCloseScene(t)}else this.isCloseScene(t)},t.prototype.isCloseScene=function(t){var e=t.legionBoss;t.myLegion&&t.myLegion.legion&&e&&0!=e.state||(App.CM.gtM(O6.B99).isFighting||App.CM.apF(O6.B89,L11.B49,!0))},t.prototype.ZE36=function(t){this.ZE37(),this.ZW82(1);var e=FightSceneNpc.npcName.CROSSBOSS_NPC,i=this.getSceneNpc(e);i&&this._selfTeam.ZO39(i,e)},t.prototype.ZE37=function(){this._selfTeam&&this._selfTeam.ZO39(null,null)},t.prototype.ZO58=function(t){var e=this.getSceneNpc(t);e&&(this._selfTeam&&this._selfTeam.ZW61()==t&&this.ZE37(),e.destroy(),e=null,delete this.npcList[t])},t.prototype.isBossNpcPos=function(){var t=!1,e=this.getSceneNpc(FightSceneNpc.npcName.CROSSBOSS_NPC);if(e){var i=e.getTargetPos();t=this._selfTeam.isRoundNpc(i.x,i.y)}return t},t.prototype.ZL41=function(){var t=this.getSceneNpc(FightSceneNpc.npcName.CROSSBOSS_NPC);if(t){var e=t.getTargetPos();if(this._selfTeam.isRoundNpc(e.x+40,e.y))return t.targetCallback&&(t.targetCallback(),t.targetCallback=null),!0}return!1},t.prototype.isAroundNpc=function(t){if(!this.ZL41()){if(t.curBox){var e=this.npcList[t.curBox];if(e){var i=e.getTargetPos();if(this._selfTeam.isRoundNpc(i.x,i.y)&&e.targetCallback)return e.targetCallback(),!0}}return!1}},t}(BaseEuiView);__reflect(LegionBossView.prototype,"LegionBossView");var LegionCampBuyView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionCampBuySkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.ZT8.bind(this),this,!1),this.listContent.itemRenderer=ItemLegionCampExchange,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.scList.viewport=this.listContent,this.dlg.title=O3.tr(4158),this.dlg.strBtnOK=O3.tr(4159),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4160)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4161)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4162))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=this,i=t.myLegion.exchangeReward;this.updateCd(),this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null),this.timeHandler=App.K16.doTimer(1e3,t.myLegion.refreshCd,this.updateCd.bind(this),this,function(){e.timeHandler&&(App.K16.rBH(e.timeHandler),e.timeHandler=null)},this),this.dataSource.replaceAll(i);var s=L4.gIV("resetExchangTimes"),o=t.myLegion.exchangeResetNum,r=parseInt(s)-o;this.lbCount.textFlow=M18.HTP.parse(O3.tr(4164,r));var n=L4.gIV("resetExchangecost"),a=M18.FL28(n,":");this.imgGood.setData(N12.gID(a[0])),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(4165,a[1])),r<=0?this.dlg.setOKEnable(!1):this.dlg.setOKEnable(!0)},t.prototype.updateCd=function(){var t=App.CM.gtM(O6.B89).myLegion.ZHH11(),e=P6.FJ11(t,1);this.lbTime.textFlow=M18.HTP.parse(O3.tr(4163,e))},t.prototype.ZT8=function(){var t=M18.FL28(L4.gIV("resetExchangecost"),":"),e=parseInt(t[1]),i={handler:function(){App.CM.apF(O6.B89,L11.A11)},cost:e,costTp:P10.A2,content:O3.tr(1599,e)};App.VM.open(O7.C54,i)},t.prototype.close=function(){this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null),this.dataSource.removeAll()},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A82)},t}(BaseEuiView);__reflect(LegionCampBuyView.prototype,"LegionCampBuyView");var LegionCampCallView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionCampCallSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.clickJump.bind(this),this),this.dlg.title=O3.tr(4248),this.dlg.title=O3.tr(4249)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.isFromChat=t[0];var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){this.lbDesc.textFlow=M18.HTP.parse(O3.tr(1572));var e=M18.FL28(L4.gIV("callTogetherDuration"),","),i=e[0]+"-"+e[1];this.lbTime.textFlow=M18.HTP.parse(O3.tr(1573,i)),this.isFromChat?this.dlg.strBtnOK=O3.tr(3235):this.dlg.strBtnOK=O3.tr(1464)},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.clickJump=function(){this.isFromChat&&App.CM.apF(O6.B89,L11.B8)},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A73)},t}(BaseEuiView);__reflect(LegionCampCallView.prototype,"LegionCampCallView");var LegionCampMining=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionCampMiningSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.touchEnabled=!1,this.touchChildren=!1,this.pBarField.slideDuration=0,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5065))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.GX5()},t.prototype.breakMining=function(){this.closeSelf(!0)},t.prototype.GX5=function(){var t=this,e=parseInt(L4.gIV("readingTime")),i=App.CM.gtM(O6.B89),s=(this.pBarField.maximum=e)-i.mindingCd;this.pBarField.value=s,this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null),this.timeHandler=App.K16.doTimer(1e3,i.mindingCd,function(){s++,t.pBarField.value=s},this,function(){t.closeSelf(!1)},this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]},t.prototype.close=function(){App.K16.rBH(this.timeHandler),this.timeHandler=null},t.prototype.closeSelf=function(t){App.CM.apF(O6.B89,L11.A56,t)},t}(BaseEuiView);__reflect(LegionCampMining.prototype,"LegionCampMining");var LegionCampTaskResetView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionCampTaskResetSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.setOKHandler(this.onClickOk.bind(this),this,!0),this.dlg.ZM69(this.closeSelf.bind(this),this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5066)),this.dlg.title=O3.tr(5067),this.dlg.strBtnOK=O3.tr(5068)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.type=t[0];var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e,i=K18.FK45(O4.getVipLv());switch(this.type){case D1.A2:this.lbTitle.text=O3.tr(1591);var s=L4.gIV("freeMineTime"),o=parseInt(s)+i.minetimes;this.restTime=o-t.myLegion.collectResetNum,this.lbRestCount.textFlow=M18.HTP.parse(O3.tr(1571,this.restTime)),e=M18.FL28(L4.gIV("mineResetCost"),":");var r=K18.FB18(1),n=App.CM.gtM(O6.B82);this.lbVipTip.textFlow=M18.HTP.parse(O3.tr(1574,r.level,r.minetimes)),n.avatarInfo.v<=r.level?this.lbVipTip.visible=!0:this.lbVipTip.visible=!1;break;case D1.A1:this.lbTitle.text=O3.tr(1592);var a=L4.gIV("freeRobberTime");o=parseInt(a)+i.robbertimes;this.restTime=o-t.myLegion.hitMosterResetNum,this.lbRestCount.textFlow=M18.HTP.parse(O3.tr(1571,this.restTime)),e=M18.FL28(L4.gIV("robberResetCost"),":");r=K18.FB18(2);var h=App.CM.gtM(O6.B82);this.lbVipTip.textFlow=M18.HTP.parse(O3.tr(1574,r.level,r.robbertimes)),h.avatarInfo.v<=r.level?this.lbVipTip.visible=!0:this.lbVipTip.visible=!1}if(e){var p=N12.gID(e[0]);this.imgCost.source=p.icon,this.lbNum.text=e[1]}},t.prototype.close=function(){s.prototype.close.call(this),this.type=null},t.prototype.onClickOk=function(){if(this.restTime<=0)P18.sDP(O3.tr(1604));else{var t;switch(this.type){case D1.A2:var e=M18.FL28(L4.gIV("mineResetCost"),":");if(O4.FG88(parseInt(e[1]),2))return void App.CM.apF(O6.B89,L11.A25);t=function(){App.CM.apF(O6.B89,L11.A25)};break;case D1.A1:e=M18.FL28(L4.gIV("robberResetCost"),":");if(O4.FG88(parseInt(e[1]),2))return void App.CM.apF(O6.B89,L11.A27);t=function(){App.CM.apF(O6.B89,L11.A27)}}t&&App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(1603)),this,t)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A22)},t}(BaseEuiView);__reflect(LegionCampTaskResetView.prototype,"LegionCampTaskResetView");var LegionCampUIView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.isShowRight=!0,i.skinName=LegionCampUISkin,i}return __extends(t,r),t.prototype.initData=function(){},t.prototype.initUI=function(){r.prototype.initUI.call(this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.gpBg.touchEnabled=!1,this.listMine.itemRenderer=ItemIcon,this.mineDataSource=new eui.ArrayCollection,this.listMine.dataProvider=this.mineDataSource,this.listRob.itemRenderer=ItemIcon,this.robDataSource=new eui.ArrayCollection,this.listRob.dataProvider=this.robDataSource,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4244)),this.cbAutoComplete.label=O3.tr(4245)},t.prototype.open=function(){for(var i=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var s=App.CM.gtM(O6.B89);this.ZE88(s),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.btnCall.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCall,this),this.btnMine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMine,this),this.btnRob.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRob,this),this.gpShou.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShou,this),this.cbAutoComplete.addEventListener(egret.Event.CHANGE,this.onChange,this);var o=App.VM.gOV(O7.I85);o&&(o.gpTopBtn.top=-70),App.DelayOptManager.ZE59(this,function(){var t=App.VM.gOV(O7.I85);if(t){var e=P7.FJ17();i.gpBg.bottom=e?t.chartGroup.height==ChatView.minHeig?240:490:t.chartGroup.height==ChatView.minHeig?350:490}})},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){if(t.myLegion&&t.myLegion.legion){var e=L4.gIV("minesTotal");this.lbTitle1.text=O3.tr(1586,t.myLegion.collectNum,e);var i=L4.gIV("robberTotal");this.lbTitle2.text=O3.tr(1587,t.myLegion.hitMosterNum,i);var s=void 0,o=void 0;switch(t.myLegion.mineState){case C2.A2:this.btnMine.label=O3.tr(1588),this.btnMine.bgStr="v1_btn_yellow_1_png",this.btnMine.colour="0xe5c7ac",this.gpMineCost.visible=!1;break;case C2.A1:this.btnMine.label=O3.tr(1589),this.btnMine.bgStr="v1_btn_green_1_png",this.gpMineCost.visible=!0,s=M18.FL28(L4.gIV("oneKeyFinishMine"),":");break;case C2.A3:this.gpMineCost.visible=!0,this.btnMine.label=O3.tr(1590),this.btnMine.bgStr="v1_btn_green_1_png",s=M18.FL28(L4.gIV("mineResetCost"),":")}switch(t.myLegion.robState){case C2.A2:this.btnRob.label=O3.tr(1588),this.btnRob.bgStr="v1_btn_yellow_1_png",this.btnRob.colour="0xe5c7ac",this.gpRobCost.visible=!1;break;case C2.A1:this.btnRob.label=O3.tr(1589),this.btnRob.bgStr="v1_btn_green_1_png",this.gpRobCost.visible=!0,o=M18.FL28(L4.gIV("oneKeyFinishRobber"),":");break;case C2.A3:this.gpRobCost.visible=!0,this.btnRob.label=O3.tr(1590),this.btnRob.bgStr="v1_btn_green_1_png",o=M18.FL28(L4.gIV("robberResetCost"),":")}if(s){var r=N12.gID(s[0]);this.imgMineCost.setData(r),this.imgMineCost.setImgSize({w:35,h:35}),this.lbCostMine.textFlow=M18.HTP.parse(O3.tr(4246,s[1]))}if(o){var n=N12.gID(o[0]);this.imgRobCost.setData(n),this.imgRobCost.setImgSize({w:35,h:35}),this.lbCostRob.textFlow=M18.HTP.parse(O3.tr(4247,o[1]))}for(var a=L4.FD20(t.myLegion.legion.lv),h=M18.FL28(a.minereward,";",":"),p=M18.FL28(a.robberreward,";",":"),l=[],c=[],u=0;u<h.length;u++){var d=h[u],v={itemData:{data:N12.gID(d[0]),ct:d[1]},isBottom:!1,scale:.5};l.push(v)}for(u=0;u<p.length;u++){d=p[u],v={itemData:{data:N12.gID(d[0]),ct:d[1]},isBottom:!1,scale:.5};c.push(v)}this.mineDataSource.replaceAll(l),this.robDataSource.replaceAll(c),t.myLegion.mineState==C2.A1||t.myLegion.robState==C2.A1?this.isHaveTask=!0:(this.isHaveTask=!1,t.isAutoDoCampTask=!1),this.cbAutoComplete.selected=t.isAutoDoCampTask,P7.FD53(this.btnBuy,t.ZC73()),this.btnMine.imgNew.visible=t.myLegion.mineState==C2.A2,this.btnRob.imgNew.visible=t.myLegion.robState==C2.A2}},t.prototype.onChange=function(){this.isHaveTask?App.CM.apF(O6.B89,L11.A21,this.cbAutoComplete.selected):(P18.sDP(O3.tr(1598)),this.cbAutoComplete.selected=!1),TG40.playClickEffect()},t.prototype.onClickBuy=function(){App.CM.apF(O6.B89,L11.B2)},t.prototype.onClickCall=function(){App.CM.apF(O6.B89,L11.A81)},t.prototype.onClickMine=function(){switch(App.CM.gtM(O6.B89).myLegion.mineState){case C2.A2:App.CM.apF(O6.B89,L11.A1);break;case C2.A1:var t=M18.FL28(L4.gIV("oneKeyFinishMine"),":"),e=parseInt(t[1]),i={handler:function(){App.CM.apF(O6.B89,L11.A14)},cost:e,costTp:P10.A2,content:O3.tr(1597,e)};App.VM.open(O7.C54,i);break;case C2.A3:App.CM.apF(O6.B89,L11.A32,D1.A2)}},t.prototype.onClickRob=function(){switch(App.CM.gtM(O6.B89).myLegion.robState){case C2.A2:App.CM.apF(O6.B89,L11.A3);break;case C2.A1:var t=M18.FL28(L4.gIV("oneKeyFinishRobber"),":"),e=parseInt(t[1]),i={handler:function(){App.CM.apF(O6.B89,L11.A16)},cost:e,costTp:P10.A2,content:O3.tr(1597,e)};App.VM.open(O7.C54,i);break;case C2.A3:App.CM.apF(O6.B89,L11.A32,D1.A1)}},t.prototype.onClickShou=function(){var t=this;t.gpShou.touchEnabled=!1,this.isShowRight?(egret.Tween.get(t.gpRightContent).to({right:-t.gpRightContent.width},200).call(function(){t.isShowRight=!1,t.gpShou.touchEnabled=!0}),egret.Tween.get(t.gpJiantou).to({right:-t.gpRightContent.width+t.btnShou.width*t.btnShou.scaleX},200).call(function(){t.btnShou.rotation=90})):(egret.Tween.get(t.gpRightContent).to({right:0},200).call(function(){t.isShowRight=!0,t.gpShou.touchEnabled=!0}),egret.Tween.get(t.gpJiantou).to({right:0},200).call(function(){t.btnShou.rotation=270}))},t.prototype.close=function(){r.prototype.close.call(this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.btnCall.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCall,this),this.btnMine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMine,this),this.btnRob.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRob,this),this.gpShou.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShou,this),this.cbAutoComplete.removeEventListener(egret.Event.CHANGE,this.onChange,this);var t=App.VM.gOV(O7.I85);t&&(t.gpTopBtn.top=-150),this.removeTween()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.gpRightContent),egret.Tween.removeTweens(this.gpJiantou),egret.Tween.removeTweens(this.gpRightContent),egret.Tween.removeTweens(this.gpJiantou),egret.Tween.removeTweens(this.gpBg)},t.prototype.ZR53=function(t){var e=this;egret.Tween.get(this.gpBg).to({bottom:t},300).call(function(){egret.Tween.removeTweens(e.gpBg)})},t.prototype.closeSelf=function(){this.apF(L11.B10)},t}(BaseEuiView);__reflect(LegionCampUIView.prototype,"LegionCampUIView");var LegionChooseNoticeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionChooseNoticeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionChooseNotice,width:this.gpList.width,height:this.gpList.height};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(4468),this.dlg.strBtnOK=O3.tr(208)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),this.dlg.setOKHandler(this.ZU35,this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){t.selectNoticeId||(t.selectNoticeId=1617);for(var e=[],i=1617;i<=1623;i++){var s={text:O3.tr(i),index:i,state:i==t.selectNoticeId};e.push(s)}this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.CM.gtM(O6.B89).selectNoticeId=null,App.VM.GY64(this)},t.prototype.ZU35=function(){var t=App.CM.gtM(O6.B89),e=O3.tr(t.selectNoticeId);App.CM.apF(O6.B89,L11.A75,e),this.closeSelf()},t}(BaseEuiView);__reflect(LegionChooseNoticeView.prototype,"LegionChooseNoticeView");var LegionCreateView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.selectLv=1,i.skinName=LegionCreateSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.ZU76.bind(this),this,!1),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5069)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5070)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5070)),this.lbTitle1.textFlow=M18.HTP.parse(O3.tr(5071)),this.lbTitle2.textFlow=M18.HTP.parse(O3.tr(5072)),this.lbTip23.textFlow=M18.HTP.parse(O3.tr(5073)),this.dlg.title=O3.tr(5074),this.dlg.strBtnOK=O3.tr(5074),this.edName.prompt=O3.tr(5617)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.gpOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOne,this),this.gpTwo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTwo,this),this.edName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FL26,this),this.GX5()},t.prototype.FL26=function(){P7.FL26()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5()},t.prototype.GX5=function(){var t=M18.FL28(L4.gIV("createCost1"),":");this.lbCost1.text=t[1];var e=M18.FL28(L4.gIV("createCost2"),":");this.lbCost2.text=e[1];var i=N12.gID(t[0]),s=N12.gID(e[0]);this.imgCost1.setData(i),this.imgCost1.setImgSize({w:40,h:40}),this.imgCost2.setData(s),this.imgCost2.setImgSize({w:40,h:40});var o=TG22.FC45(1),r=TG22.FC45(2);this.lbTip11.text=O3.tr(1506,o),this.lbTip21.text=O3.tr(1506,r);var n=L4.FD20(1),a=L4.FD20(2);this.lbTip12.textFlow=M18.HTP.parser(O3.tr(1507,n.number)),this.lbTip22.textFlow=M18.HTP.parser(O3.tr(1507,a.number))},t.prototype.ZU76=function(){var t=M18.FL28(L4.gIV("nameSize"),","),e=this.edName.text,i=0;switch(this.selectLv){case 1:i=parseInt(this.lbCost1.text);break;case 2:i=parseInt(this.lbCost2.text)}var s=App.CM.gtM(O6.B82),o=TG22.FC45(this.selectLv);if(s.avatarInfo.v<o)P18.sDP(O3.tr(1580));else if(e)if(M18.FF63(e)>2*parseInt(t[1]))P18.sDP(O3.tr(1454));else if(s.avatarInfo.g<i){var r={handler:this.ZL76.bind(this),content:O3.tr(1466),btnStr:O3.tr(1465)};App.VM.open(O7.C54,r)}else App.CM.apF(O6.B89,L11.B65,this.selectLv,e);else P18.sDP(O3.tr(1505))},t.prototype.ZL76=function(){App.CM.apF(O6.C29,P8.A7)},t.prototype.onClickOne=function(){this.selectLv=1,this.imgOne.source="v1_img_chuangjianjuntuan_png",this.imgTwo.source="v1_img_chuangjianjuntuanhui_png"},t.prototype.onClickTwo=function(){this.selectLv=2,this.imgTwo.source="v1_img_chuangjianjuntuan_png",this.imgOne.source="v1_img_chuangjianjuntuanhui_png"},t.prototype.close=function(){s.prototype.close.call(this),this.gpOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOne,this),this.gpTwo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTwo,this),this.edName.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FL26,this)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(LegionCreateView.prototype,"LegionCreateView");var LegionDayRewardView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.width=600,this.height=795;var t=new eui.Image("v1_bg_kelashen01_png");t.scale9Grid=new egret.Rectangle(13,12,14,17),t.width=.97*this.width,t.height=.97*this.height,t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t);var e={render:ItemLegionDayReward,width:.97*this.width,height:.94*this.height};this.myListView=new LegionListBase(e),this.myListView.horizontalCenter=0,this.myListView.verticalCenter=0,this.addChild(this.myListView)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=L4.FA73(),i=[];for(var s in e){var o=t.myLegion.ZE28(parseInt(s));e[s].state=o,i.push(e[s])}i.sort(function(t,e){return t.state!=e.state?t.state-e.state:t.level-e.level}),this.myListView.rfL(i)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy()},t}(BaseEuiView);__reflect(LegionDayRewardView.prototype,"LegionDayRewardView");var LegionDonationView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionDonationSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionDonation,width:this.gpList.width,height:this.gpList.height};this.myListView=new LegionListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.lbFuben.textFlow=M18.HTP.parser(O3.tr(1575)),this.lbYingdi.textFlow=M18.HTP.parser(O3.tr(1576)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4196)),this.btnDonate.label=O3.tr(8372),this.dlg.title=O3.tr(5768)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),this.lbFuben.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFuben,this),this.lbYingdi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCamp,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnDonate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT9,this),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5()},t.prototype.GX5=function(){for(var t=M18.FL28(L4.gIV("contribution"),";",":"),e=[],i=0;i<t.length;i++){var s=N12.giC(t[i][0]);if(0<s)for(var o=0;o<s;o++)e.push(t[i])}this.myListView.rfL(e,!0)},t.prototype.onClickFuben=function(){App.CM.apF(O6.B89,L11.B41),this.closeSelf()},t.prototype.onClickCamp=function(){if(App.SceneManager.runScene(M2.A4),App.CM.gtM(O6.B99).isSpFighting)return P18.sDP(O3.tr(5301)),void App.CM.apF(O6.B89,L11.B38);App.CM.apF(O6.B89,L11.B8),App.CM.apF(O6.B89,L11.B38)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy(),this.lbFuben.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFuben,this),this.lbYingdi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCamp,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnDonate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT9,this)},t.prototype.ZT9=function(){for(var t=M18.FL28(L4.gIV("contribution"),";",":"),e=[],i=0;i<t.length;i++){var s=N12.giC(t[i][0]);if(0<s)for(var o=0;o<s;o++)e.push(t[i])}if(e.length)App.CM.apF(O6.B89,L11.A58);else{var r=O3.tr(8370);P18.sDP(r,!1)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A70)},t}(BaseEuiView);__reflect(LegionDonationView.prototype,"LegionDonationView");var LegionFubenView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.isFirstOpen=!1,i.ckAutoJoinBySelf=!1,i.skinName=LegionFubenSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.scList.viewport=this.listView,this.listView.itemRenderer=ItemLegionFuben,this.dataSource=new eui.ArrayCollection(this.listData),this.listView.dataProvider=this.dataSource,this.scList.scrollPolicyV=eui.ScrollPolicy.OFF,this.listView.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZM2,this),this.listRewardView.itemRenderer=ItemIcon,this.itemDataSource=new eui.ArrayCollection,this.listRewardView.dataProvider=this.itemDataSource,this.listTeam.itemRenderer=ItemLegionDragonTeam,this.teamDataSource=new eui.ArrayCollection,this.listTeam.dataProvider=this.teamDataSource,this.scTeam.viewport=this.listTeam,this.scTeam.scrollPolicyV=eui.ScrollPolicy.OFF,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4206)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4207)),this.btnJoin.label=O3.tr(4209),this.btnCreateTeam.label=O3.tr(4210),this.btnChallenge.label=O3.tr(4211);var t=this.listView.layout;this.gap=t.gap},t.prototype.initData=function(){},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK95,this),this.btnCreateTeam.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ20,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO7,this),this.cbAutoBegin.addEventListener(egret.Event.CHANGE,this.ZX74,this),this.cbAutoBeginFull.addEventListener(egret.Event.CHANGE,this.ZJ21,this),this.cbAutoJoin.addEventListener(egret.Event.CHANGE,this.onChangeJoin,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.listView.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onScroll,this);var i=App.CM.gtM(O6.B89);i.curFubenLv&&i.curFubenLv!=i.myLegion.legion.lv?i.curFubenLv!=i.myLegion.legion.lv&&(i.curFubenLv=i.curFubenLv):i.curFubenLv=i.myLegion.legion.lv,this.isFirstOpen=!0,this.isOpen=!0,this.ZE88(i),this.ZJ18(i),this.updateTeam(i),null==this.loadTeamsTimer&&(this.loadTeamsTimer=App.K16.doTimer(3e3,0,function(){App.CM.apF(O6.B89,L11.A41,i.curFubenLv)},this))},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(s.prototype.uBM.call(this,t,e),t instanceof TG20)switch((e&&0<e.length?e:"")[0]){case"refreshCd":this.ZHH16(t),this.ZJ19(t);break;case"changeFuben":this.ZJ18(t);break;case P4.E8:this.updateTeam(t),this.ZJ18(t);break;case P4.C96:case P4.F25:case P4.F27:case P4.C21:case P4.B51:case P4.C19:case P4.A88:this.ckAutoJoinBySelf=!1,this.updateTeam(t);break;default:this.ZE88(t)}},t.prototype.ZE88=function(t){var e=L4.gIV("assistTime"),i=parseInt(e)-t.myLegion.fubenHelpNum;this.lbTip.textFlow=M18.HTP.parse(O3.tr(1565,i,e));var s=L4.gIV("rewardTime"),o=parseInt(s)-t.myLegion.fubenGetNum;this.lbRestGet.textFlow=M18.HTP.parse(O3.tr(4208,o,s))},t.prototype.ZJ18=function(t){for(var e in this.listData=L4.FC44(),this.listData){var i=this.listData[e];i.lv>t.myLegion.legion.lv?i.isOpen=!1:i.isOpen=!0,this.listData[e].selected=i.lv==t.curFubenLv,this.dataSource.itemUpdated(this.listData[e])}this.isFirstOpen&&(this.dataSource.replaceAll(this.listData),this.isFirstOpen=!1),this.ZM3(t.curFubenLv)},t.prototype.updateTeam=function(t){for(var e=L4.FD20(t.curFubenLv),i=M18.FL28(e.showoddsreward,";",":"),s=[],o=i.length,r=0;r<o;r++){var n={data:N12.gID(i[r][0]),ct:i[r][1]};s.push({itemData:n,isBottom:!1,scale:.9})}this.itemDataSource.replaceAll(s);var a=[];if(t.dragonTeamMsg)if(t.dragonTeamMsg.myTeam)this.oldTeam&&this.oldTeam.tId==t.dragonTeamMsg.myTeam.tId||t.dragonTeamMsg.myTeam.isLeader&&(this.isOpen?this.isOpen=!1:t.ZL99(),t.autoFight=t.autoFight,t.autoFightFull=t.autoFightFull),this.oldTeam=t.dragonTeamMsg.myTeam,a=this.oldTeam.memberList,this.oldTeam.isLeader?(this.gpJoin.visible=!0,this.gpNotJoin.visible=!1,this.cbAutoBegin.selected=t.autoFight,this.cbAutoBeginFull.selected=t.autoFightFull):(this.gpJoin.visible=!1,this.gpNotJoin.visible=!1),this.teamDataSource.replaceAll(a),this.lbTitle.text=O3.tr(1564,this.oldTeam.dragonLv);else{this.lbTitle.text=O3.tr(1564,t.curFubenLv),a=t.dragonTeamMsg.teamList,this.gpJoin.visible=!1,this.gpNotJoin.visible=!0;var h=L4.gIV("rewardTime");parseInt(h)-t.myLegion.fubenGetNum<=0&&!this.ckAutoJoinBySelf&&(t._autoJoin=!1),t.autoJoin=t.autoJoin,this.cbAutoJoin.selected=t.autoJoin,this.teamDataSource.replaceAll(a)}this.gpNotJoin.visible||t.ZP28()},t.prototype.ZHH16=function(t){t.dragonTeamMsg&&t.dragonTeamMsg.myTeam&&(this.cbAutoBegin.label=O3.tr(1568,t.autoFightCd),t.autoFightFull?t.dragonTeamMsg.myTeam&&t.dragonTeamMsg.myTeam.isLeader&&(t.dragonTeamMsg.myTeam.memberList.length>=E6.A8?this.cbAutoBeginFull.label=O3.tr(1568,t.autoFightFullCd):this.cbAutoBeginFull.label=O3.tr(1569)):this.cbAutoBeginFull.label=O3.tr(1569))},t.prototype.ZJ19=function(t){t.dragonTeamMsg&&!t.dragonTeamMsg.myTeam&&(this.cbAutoJoin.label=O3.tr(1570,t.autoJoinCd))},t.prototype.ZM2=function(t){var e=t.item,i=App.CM.gtM(O6.B89);i.curFubenLv!=e.lv&&(i.curFubenLv=e.lv,this.isFirstOpen=!0)},t.prototype.ZJ20=function(){var t=App.CM.gtM(O6.B89);t.curFubenLv>t.myLegion.legion.lv?P18.sDP(O3.tr(1593,t.curFubenLv)):App.CM.apF(O6.B89,L11.A29,t.curFubenLv)},t.prototype.ZO7=function(){var t=App.CM.gtM(O6.B89);t.curFubenLv>t.myLegion.legion.lv?P18.sDP(O3.tr(1593,t.curFubenLv)):App.CM.apF(O6.B89,L11.A6,t.curFubenLv)},t.prototype.ZK95=function(){App.CM.apF(O6.B89,L11.A39)},t.prototype.ZX74=function(){var t=App.CM.gtM(O6.B89);t.autoFight=this.cbAutoBegin.selected,t.autoFight||this.ZHH16(t),TG40.playClickEffect()},t.prototype.ZJ21=function(){var t=App.CM.gtM(O6.B89);t.autoFightFull=this.cbAutoBeginFull.selected,t.autoFightFull||this.ZHH16(t),TG40.playClickEffect()},t.prototype.onChangeJoin=function(){var t=App.CM.gtM(O6.B89);this.cbAutoJoin.selected&&(this.ckAutoJoinBySelf=!0),t.autoJoin=this.cbAutoJoin.selected,TG40.playClickEffect()},t.prototype.onClickRight=function(){var t=this.scList.viewport;t.scrollH=t.scrollH+this.scList.width,t.scrollH>t.contentWidth-this.scList.width&&(t.scrollH=t.contentWidth-this.scList.width),this.btnRight.visible=Math.abs(t.scrollH+this.scList.width)<t.contentWidth,this.btnLeft.visible=0!=t.scrollH},t.prototype.onClickLeft=function(){var t=this.scList.viewport;t.scrollH=t.scrollH-this.scList.width,t.scrollH<0&&(t.scrollH=0),this.btnLeft.visible=0!=t.scrollH,this.btnRight.visible=Math.abs(t.scrollH+this.scList.width)<t.contentWidth},t.prototype.onScroll=function(){var t=this.scList.viewport;this.btnLeft.visible=164<=t.scrollH,this.btnRight.visible=t.scrollH+t.width+164<=t.contentWidth},t.prototype.ZM3=function(t){var e=this.listData.length,i=0<this.listView.contentWidth?(this.listView.contentWidth-this.gap*(e-1))/e:166,s=t-2;t<=2&&(s=0),t==this.listData.length&&(s=this.listData.length-3);var o=s*(i+this.gap-2);egret.Tween.get(this.listView).to({scrollH:o},100),this.onScroll()},t.prototype.close=function(){App.CM.gtM(O6.B89).ZP28(),App.CM.apF(O6.B89,L11.A8),this.btnChallenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK95,this),this.btnCreateTeam.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ20,this),this.btnJoin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZO7,this),this.cbAutoBegin.removeEventListener(egret.Event.CHANGE,this.ZX74,this),this.cbAutoBeginFull.removeEventListener(egret.Event.CHANGE,this.ZJ21,this),this.cbAutoJoin.removeEventListener(egret.Event.CHANGE,this.onChangeJoin,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.listView.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onScroll,this),null!=this.loadTeamsTimer&&(App.K16.rBH(this.loadTeamsTimer),this.loadTeamsTimer=null),this.dataSource.removeAll(),this.teamDataSource.removeAll(),this.isFirstOpen=null},t.prototype.closeSelf=function(){this.apF(L11.B22)},t}(BaseEuiView);__reflect(LegionFubenView.prototype,"LegionFubenView");var LegionHallView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=LegionHallSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbRecord.textFlow=M18.HTP.parser(O3.tr(1577)),this.lbNotice.textFlow=M18.HTP.parser(O3.tr(1578)),this.scContent.viewport=this.gpContent,this.btnWarOfAttrition.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD30,this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4166)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4167)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4169)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4170)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4171)),this.lbStr7.textFlow=M18.HTP.parse(O3.tr(4172)),this.btnList.label=O3.tr(4179),this.btnApply.label=O3.tr(4180),this.btnMember.label=O3.tr(4181),this.btnDonation.label=O3.tr(4182),this.btnReName.label=O3.tr(4183),this.btnUpgrade.label=O3.tr(4184),this.btnRecruit.label=O3.tr(4185),this.items=[this.item0,this.item1,this.item2,this.item3,this.item4]},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.lbRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU49,this),this.lbNotice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV66,this),this.btnReName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV81,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.btnRecruit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT10,this),this.btnList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickList,this),this.btnApply.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickApply,this),this.btnMember.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX76,this),this.btnDonation.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN81,this);var i=App.CM.gtM(O6.B89);this.ZE88(i),App.CM.apF(O6.B89,L11.B47);for(var s=0;s<this.items.length;s++)this.items[s].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);this.ZA67(App.CM.gtM(O6.A42))},t.prototype.onClick=function(t){switch(t.currentTarget.name){case"0":this.ZX75();break;case"1":this.ZP36();break;case"2":this.onClickGo(2101);break;case"3":this.onClickShop();break;case"4":this.ZP35()}TG40.playClickEffect()},t.prototype.ZP35=function(){var t=O4.getLv(),e=N15.FG47(P12.A5);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.I3,P12.A5)},t.prototype.onClickShop=function(){var t=O4.getLv(),e=N15.FG47(P12.A31);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.HH29,P12.A31)},t.prototype.onClickGo=function(t){var e={sLink:t};TG84.goToDlg(e)},t.prototype.ZP36=function(){App.CM.apF(O6.B89,L11.B47),App.CM.apF(O6.B89,L11.B21)},t.prototype.ZX75=function(){if(App.CM.gtM(O6.B99).isSpFighting)return P18.sDP(O3.tr(5301)),void App.CM.apF(O6.B89,L11.B38);App.CM.apF(O6.B89,L11.B8),App.CM.apF(O6.B89,L11.B38)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof TG20?this.ZE88(t):t instanceof WarOfAttrition.Model&&this.ZA67(t)},t.prototype.ZE88=function(t){this.legion=t.myLegion;var e=t.myLegion.legion;this.lbName.textFlow=M18.HTP.parse(O3.tr(4173,e.name)),this.lbLv.textFlow=M18.HTP.parse(O3.tr(4175,e.lv));var i=L4.FD20(e.lv);0<i.exp?(this.lbExp.textFlow=M18.HTP.parse(O3.tr(4176,e.exp.toString(),i.exp)),0<t.ZL51()?(this.btnUpgrade.visible=!0,P7.FD53(this.btnUpgrade,1)):this.btnUpgrade.visible=!1):(this.lbExp.textFlow=M18.HTP.parse(O3.tr(4176,"-","-")),this.btnUpgrade.visible=!1);if(this.lbNum.textFlow=M18.HTP.parse(O3.tr(4177,e.memberNum.toString(),i.number)),e.notice)this.lbNoticeContent.textFlow=M18.HTP.parse(O3.tr(4178,e.notice));else{var s=L4.gIV("defaultNotice");this.lbNoticeContent.textFlow=M18.HTP.parse(O3.tr(4178,s))}this.btnReName.x=this.lbName.left+this.lbName.width+10,this.btnUpgrade.x=this.lbLv.left+this.lbLv.width+10,this.btnRecruit.x=this.lbNum.left+this.lbNum.width+10,P7.FD53(this.btnApply,t.ZT5()),P7.FD53(this.btnDonation,t.ZB90()),0<t.ZF71()?this.items[0].redImg="v1_img_hongdiantishi_png":this.items[0].redImg="",0<t.ZP31()?this.items[1].redImg="v1_img_hongdiantishi_png":this.items[1].redImg="",0<t.ZP32()?this.items[2].redImg="v1_img_hongdiantishi_png":this.items[2].redImg="",0<t.ZB92()&&!O4.FF89(L17.A42)?this.items[4].redImg="v1_img_hongdiantishi_png":this.items[4].redImg=""},t.prototype.ZA67=function(t){this.btnWarOfAttrition.visible=this.btnWarOfAttrition.includeInLayout=0<=t.st,this.btnWarOfAttrition.redImg=t.FL35()?"v1_img_hongdiantishi_png":""},t.prototype.ZU49=function(){App.CM.apF(O6.B89,L11.B24)},t.prototype.ZV66=function(){if(TG22.FG36()){var t=O4.getLv(),e=L4.gIV("noticeLv");t<e?P18.sDP(O3.tr(1596,e)):"awy"===platform.name?App.CM.apF(O6.B89,L11.A83):App.CM.apF(O6.B89,L11.B17)}else P18.sDP(O3.tr(1508))},t.prototype.ZV81=function(){TG22.FG36()?App.CM.apF(O6.B89,L11.B18):P18.sDP(O3.tr(1508))},t.prototype.ZR46=function(){var t={handler:function(){App.CM.apF(O6.B89,L11.B79)},content:O3.tr(1541),isShowCb:!1};App.VM.open(O7.C54,t)},t.prototype.ZT10=function(){TG22.FG36()?App.CM.apF(O6.B89,L11.B61):P18.sDP(O3.tr(1508))},t.prototype.onClickList=function(){App.CM.apF(O6.B89,L11.B60)},t.prototype.ZN81=function(){App.CM.apF(O6.B89,L11.A79)},t.prototype.onClickApply=function(){var t=App.CM.gtM(O6.B89);t.myLegion.job==G17.A2||t.myLegion.job==G17.A1?App.CM.apF(O6.B89,L11.B40):P18.sDP(O3.tr(1508))},t.prototype.ZX76=function(){App.CM.apF(O6.B89,L11.B20)},t.prototype.ZD30=function(){App.CM.apF(O6.A42,WarOfAttrition.Const.OPEN)},t.prototype.close=function(){this.lbRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU49,this),this.lbNotice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV66,this),this.btnReName.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV81,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.btnRecruit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT10,this),this.btnList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickList,this),this.btnApply.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickApply,this),this.btnMember.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX76,this),this.btnDonation.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN81,this),this.legion=null;for(var t=0;t<this.items.length;t++)this.items[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseEuiView);__reflect(LegionHallView.prototype,"LegionHallView");var LegionIcon=function(e){function t(){var t=e.call(this)||this;return t.texiaoImg="",t.iconImg="",t.typeImg="",t.redImg="",t}return __extends(t,e),t}(eui.Component);__reflect(LegionIcon.prototype,"LegionIcon");var LegionInvadeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionInvadeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dgReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.dgReward.dataProvider=this.dataSource,this.dlg.strBtnOK=O3.tr(3874),this.dlg.title=O3.tr(6375),this.proBar.slideDuration=0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.setOKHandler(this.onClickEnter,this,!1),this.isOpenRank=!1;var i={type:RankType.legionBossLeg,currPage:1,size:3};App.CM.apF(O6.C19,O18.A5,i),this.lbDesc.addEventListener(egret.TextEvent.LINK,this.ZM4,this),this.lbShowRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.lbShowRank.textFlow=M18.HTP.parser(O3.tr(6326)),this.scDesc.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t),t instanceof THH11&&this.ZHH63(t)},t.prototype.ZE88=function(t){var i=t.legionBoss;if(0==i.state||3==i.state){this.lbLeftTime.visible=!1,this.proBar.maximum=this.proBar.value=0;var e=L4.gIV("openTime",2),s=M18.FL28(e,",");this.proBar.labelFunction=function(t,e){return O3.tr(6264,s[i.timeId])},this.cTH()}else{this.proBar.maximum=i.tHp,this.proBar.value=i.hp,this.lbLeftTime.visible=!0,this.proBar.labelFunction=function(t,e){return Math.floor(t/e*100)+"%"},this.leftCd=i.FJ24();var o=P6.FJ11(1e3*this.leftCd,5);this.lbLeftTime.text=O3.tr(6256,o),this.cTH(),this.timerHandler=App.K16.doTimer(1e3,this.leftCd,this.GY14,this)}this.lbTip2.text=O3.tr(503),this.lbTip1.text=O3.tr(6255);var r=L4.gIV("entryTips",2);this.lbDesc.textFlow=M18.FG71(r);var n=L4.FF23(),a=L4.gIV("specialItem",2),h=M18.FL28(a,","),p=M18.FL28(n.showitem,","),l=[];for(var c in p){var u=p[c],d=N12.gID(u),v=0<=h.indexOf(u),f={itemData:{data:d,ct:0,texiao:v?TF59.FC9(d.quality):void 0},isBottom:!1,scale:1,isJp:v};l.push(f)}this.dataSource.replaceAll(l),P7.FD53(this.dlg.getBtnOK(),t.ZP31())},t.prototype.GY14=function(){this.leftCd--;var t=P6.FJ11(1e3*this.leftCd,5);this.lbLeftTime.text=O3.tr(6256,t),this.leftCd<=0&&(this.cTH(),this.lbLeftTime.visible=!1)},t.prototype.ZHH63=function(t){if(t.nType==RankType.legionBossLeg){if(this.isOpenRank)App.CM.apF(O6.B89,L11.B53),this.isOpenRank=!1;else for(var e=1;e<=3;e++){var i=t.rankList[e-1],s=void 0;s=i?i.nRank+"."+i.sName:e+"."+O3.tr(3304),this["lbRank"+e].text=s}this.lbMyRank.textFlow=M18.HTP.parser(O3.tr(6265,t.myRankList.nRank))}},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.onClickBtn=function(){App.CM.gtM(O6.B89).myLegion.legion.hjHpPer<=0?App.CM.apF(O6.B89,L11.A37):App.CM.apF(O6.B89,L11.A23)},t.prototype.onClickEnter=function(){App.CM.apF(O6.B89,L11.B35)},t.prototype.ZM4=function(){App.CM.apF(O6.B89,L11.B15)},t.prototype.onClickRank=function(){var t={type:RankType.legionBossLeg,currPage:1,size:9};this.isOpenRank=!0,App.CM.apF(O6.C19,O18.A5,t)},t.prototype.close=function(){this.lbShowRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.lbDesc.removeEventListener(egret.TextEvent.LINK,this.ZM4,this),this.cTH()},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A97)},t}(BaseEuiView);__reflect(LegionInvadeView.prototype,"LegionInvadeView");var LegionListBase=function(i){function t(t){var e=i.call(this)||this;return e.isCanCallback=!0,e.skinName=LegionListBaseSkin,e.width=t.width||e.width,e.height=t.height||e.height,e.scList.width=e.width,e.listView.width=e.width,e.scList.height=e.height,e.listView.height=e.height,e.upArrow.scaleX=t.arrowScale||1,e.upArrow.scaleY=t.arrowScale||1,e.downArrow.scaleX=t.arrowScale||1,e.downArrow.scaleY=t.arrowScale||1,e.downArrow.y=e.height-36,null!=t.gap&&e.resetListGap(t.gap),e.initList(t.render),e}return __extends(t,i),t.prototype.initList=function(t){this.scList.viewport=this.listView,this.listView.itemRenderer=t,this.dataSource=new eui.ArrayCollection(this.listData),this.listView.dataProvider=this.dataSource,this.scList.scrollPolicyH=eui.ScrollPolicy.OFF},t.prototype.open=function(){this.upArrow.visible=!1,this.downArrow.visible=!1,this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.scList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this)},t.prototype.ZJ79=function(t,e){for(var i=0;i<this.listData.length;i++)i==e&&(this.listData[i]=t,this.dataSource.itemUpdated(this.listData[i]))},t.prototype.rfL=function(t,e){void 0===e&&(e=!1),this.listData=t,this.dataSource.replaceAll(t),e&&this.dataSource.refresh(),this.endScroller()},t.prototype.ZU13=function(t,e){this.width=t,this.height=e},t.prototype.resetListGap=function(t){var e=this.listView.layout;e instanceof eui.VerticalLayout?e.gap=t:e instanceof eui.HorizontalLayout&&(e.gap=t)},t.prototype.ZG4=function(t){this.endHandler=t},t.prototype.endScroller=function(){this.scList.validateNow(),this.upArrow.visible=!(this.listView.scrollV<=0),this.listView.contentHeight<=this.height?this.downArrow.visible=!1:(this.height+this.listView.scrollV>=this.listView.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0,this.endHandler&&this.isCanCallback&&(this.endHandler(),this.isCanCallback=!1))},t.prototype.doUpArrow=function(){var t=this.listView.scrollV-this.height;this.listView.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.listView.scrollV+this.height;t+this.height>=this.listView.contentHeight?this.listView.scrollV=this.listView.contentHeight-this.height:this.listView.scrollV=t,this.endScroller()},t.prototype.destroy=function(){this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.scList.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this)},t}(eui.Component);__reflect(LegionListBase.prototype,"LegionListBase");var LegionListView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.isHasLegion=!1,i.skinName=LegionListSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,o),t.prototype.initData=function(){},t.prototype.initUI=function(){o.prototype.initUI.call(this);var t={render:ItemLegionList,width:this.gpList.width,height:this.gpList.height};this.myListView=new CommonListBase(t),this.myListView.ZG4(this.endCallback.bind(this)),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.ZU76.bind(this),this,!1),this.lbTip.textFlow=M18.HTP.parse(O3.tr(5075)),this.dlg.title=O3.tr(5076),this.dlg.strBtnOK=O3.tr(5077)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),App.CM.apF(O6.B89,L11.B29,1),this.myListView.open(),this.myListView.isCanCallback=!0,this.isFirstOpen=!0},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e&&0<e.length?e[0]:null;if(t instanceof TG20){switch(s){case P4.Q40:this.myListView.isCanCallback=!0}this.ZE88(t)}},t.prototype.ZE88=function(t){if(t.myLegion&&t.myLegion.legion&&0==this.isHasLegion?(this.isHasLegion=!0,this.lbTip.visible=!1,this.gpContent.height=this.gpContent.height+this.lbTip.height,this.gpList.height=this.gpList.height+this.lbTip.height,this.myListView.ZU13(this.gpList.width,this.gpList.height),this.dlg.showOKBtn=!1):t.myLegion&&(t.myLegion||t.myLegion.legion)||!this.isHasLegion||(this.isHasLegion=!1,this.lbTip.visible=!0,this.gpContent.height=this.gpContent.height-this.lbTip.height,this.gpList.height=this.gpList.height-this.lbTip.height,this.myListView.ZU13(this.gpList.width,this.gpList.height),this.dlg.showOKBtn=!0),t.allLegionData){var e=t.allLegionData.legionList;this.myListView.rfL(e,this.isFirstOpen),this.isFirstOpen=!1}},t.prototype.endCallback=function(){var t=App.CM.gtM(O6.B89);App.CM.apF(O6.B89,L11.B29,t.ZE29())},t.prototype.ZU76=function(){App.CM.apF(O6.B89,L11.B25)},t.prototype.close=function(){o.prototype.close.call(this),this.myListView.close(),this.isFirstOpen=null},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.B39)},t}(BaseEuiView);__reflect(LegionListView.prototype,"LegionListView");var LegionMainVlew=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sGN("release_legion"),i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.VM.rgS(O7.G49,O7.G80,"LegionHallView",this.content),App.VM.rgS(O7.G49,O7.G9,"LegionBlessView",this.content),App.VM.rgS(O7.G49,O7.G2,"LegionFubenView",this.content),App.VM.rgS(O7.G49,O7.G7,"LegionSkillView",this.content),this.title=O3.tr(1500);var t=[O3.tr(1500),O3.tr(1501),O3.tr(1502),O3.tr(5433)],e=[O7.G80,O7.G9,O7.G2,O7.G7];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this);var i=App.CM.gtM(O6.B89);this.ZE88(i);var s=t[0]||O7.G80;this.ZQ23(s)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(o.prototype.uBM.call(this,t,e),t instanceof TG20)this.ZE88(t);else{var s=App.CM.gtM(O6.B89);this.ZE88(s)}},t.prototype.ZE88=function(t){this.btnList.ZHH58(O7.G9,t.ZT4()),this.btnList.ZHH58(O7.G80,t.ZF70()),this.btnList.ZHH58(O7.G2,t.ZT6()),this.btnList.ZHH58(O7.G7,t.ZS51())},t.prototype.ZQ23=function(t){switch(t){case O7.G80:this.title=O3.tr(1500),this.btnList.ZM66(t);break;case O7.G9:this.title=O3.tr(1501),this.btnList.ZM66(t);break;case O7.G2:this.title=O3.tr(1502),this.btnList.ZM66(t);break;case O7.G7:this.title=O3.tr(5433),this.btnList.ZM66(t)}},t.prototype.openHelpView=function(){var t={title:L4.gIV("tipsTitle"),content:L4.gIV("tipsTex")};App.CM.apF(O6.C18,O10.A24,t)},t.prototype.close=function(){o.prototype.close.call(this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t}(BasePanelView);__reflect(LegionMainVlew.prototype,"LegionMainVlew");var LegionMemberView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionMemberSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionMember,width:this.gpList.width,height:this.gpList.height};this.myListView=new LegionListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.btnQuit.label=O3.tr(4194),this.dlg.title=O3.tr(4195)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),App.CM.apF(O6.B89,L11.A35),this.btnQuit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickQuit,this),this.isOpen=!0},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e,i=t.memberMsg.memberList;switch(this.myListView.rfL(i,this.isOpen),this.isOpen=!1,t.myLegion.job){case G17.A1:e=O3.tr(1522);break;case G17.A2:e=O3.tr(1523);break;case G17.A3:e=O3.tr(1524);break;default:e=""}this.lbPost.text=O3.tr(1534,e),this.lbContribute.textFlow=M18.HTP.parser(O3.tr(1535,t.memberMsg.allDevote))},t.prototype.onClickQuit=function(){var t=App.CM.gtM(O6.B89);if(1<t.memberMsg.memberList.length&&t.myLegion.job==G17.A1)P18.sDP(O3.tr(1536));else{var e={handler:function(){App.CM.apF(O6.B89,L11.B81)},content:O3.tr(1537),isShowCb:!1};App.VM.open(O7.C54,e)}},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy(),this.btnQuit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickQuit,this),this.isOpen=null},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A96)},t}(BaseEuiView);__reflect(LegionMemberView.prototype,"LegionMemberView");var LegionNoticeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionNoticeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.onClickSave.bind(this),this),this.lbTip.textFlow=M18.HTP.parse(O3.tr(4202)),this.dlg.title=O3.tr(4203),this.dlg.strBtnOK=O3.tr(4204)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.edContent.addEventListener(egret.Event.CHANGE,this.inputName,this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZE88=function(t){var e=t.myLegion.legion.notice;e||(e=L4.gIV("defaultNotice")),this.edContent.text=e,this.oldContent=e},t.prototype.inputName=function(){var t=parseInt(L4.gIV("noticeSize")),e=this.edContent.text;M18.FF63(e)>2*t?this.edContent.text=this.oldContent:this.oldContent=e},t.prototype.onClickSave=function(){var t=parseInt(L4.gIV("noticeSize")),e=this.edContent.text;M18.FF63(e)>2*t?P18.sDP(O3.tr(1509)):App.CM.apF(O6.B89,L11.A75,e)},t.prototype.close=function(){this.edContent.removeEventListener(egret.Event.CHANGE,this.inputName,this)},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A94)},t}(BaseEuiView);__reflect(LegionNoticeView.prototype,"LegionNoticeView");var LegionRecordView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionRecordSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemLegionRecord,width:this.gpList.width,height:this.gpList.height};this.myListView=new LegionListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(4200)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),App.CM.apF(O6.B89,L11.A88),this.myListView.open()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=t.myLegion.legion.recordList;e.sort(function(t,e){return e.time-t.time}),this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.destroy()},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A99)},t}(BaseEuiView);__reflect(LegionRecordView.prototype,"LegionRecordView");var LegionRenameView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionRenameSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.setOKHandler(this.onClickSave.bind(this),this),this.lbTip.textFlow=M18.HTP.parse(O3.tr(5078)),this.dlg.title=O3.tr(5079),this.dlg.strBtnOK=O3.tr(5080)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.edName.addEventListener(egret.Event.CHANGE,this.inputName,this),this.edName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FL26,this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.ZE88=function(t){var e=t.myLegion.legion;this.edName.text=e.name;var i=M18.FL28(L4.gIV("changeNameCost"),":"),s=N12.gID(i[0]);this.imgCost.setData(s),this.imgCost.setImgSize({w:40,h:40}),this.lbCost.text=i[1]},t.prototype.inputName=function(){var t=M18.FL28(L4.gIV("nameSize"),","),e=this.edName.text;M18.FF63(e)>2*parseInt(t[1])?this.edName.text=this.oldName:this.oldName=e},t.prototype.onClickSave=function(){var t=M18.FL28(L4.gIV("nameSize"),","),e=this.edName.text;if(e)if(M18.FF63(e)>2*parseInt(t[1]))P18.sDP(O3.tr(1454));else{var i=M18.FL28(L4.gIV("changeNameCost"),":");if(App.CM.gtM(O6.B82).avatarInfo.g<parseInt(i[1])){var s={handler:this.ZL76.bind(this),content:O3.tr(1466),btnStr:O3.tr(1465)};App.VM.open(O7.C54,s)}else App.CM.apF(O6.B89,L11.B67,e)}else P18.sDP(O3.tr(1505))},t.prototype.ZL76=function(){App.CM.apF(O6.C29,P8.A7)},t.prototype.close=function(){this.edName.removeEventListener(egret.Event.CHANGE,this.inputName,this),this.edName.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FL26,this)},t.prototype.FL26=function(){P7.FL26()},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.A95)},t}(BaseEuiView);__reflect(LegionRenameView.prototype,"LegionRenameView");var Library,LegionSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=LegionSkillSkin,i}return __extends(t,s),t.prototype.initData=function(){},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.iconList=[{select:this.imgSelect1,icon:this.imgIcon1},{select:this.imgSelect2,icon:this.imgIcon2},{select:this.imgSelect3,icon:this.imgIcon3},{select:this.imgSelect4,icon:this.imgIcon4},{select:this.imgSelect5,icon:this.imgIcon5},{select:this.imgSelect6,icon:this.imgIcon6},{select:this.imgSelect7,icon:this.imgIcon7},{select:this.imgSelect8,icon:this.imgIcon8}],this.lbMax.textFlow=M18.HTP.parse(O3.tr(4223)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4224)),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4225)),this.btnUpgrade.label=O3.tr(4226)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this);var i=App.CM.gtM(O6.B89);this.ZE88(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG20&&this.ZE88(t)},t.prototype.ZE88=function(t){var e=t.myLegion;for(var i in P7.FD53(this.btnUpgrade,t.ZS51()),this.iconList)this.iconList[i].select.visible=!1;e.skillList;var s=M18.FL28(L4.gIV("skilIcon"),",");for(i=0;i<8;i++)this.iconList[i].icon.source=s[i];this.GW61=e.ZP21(),0<this.GW61.id?(this.iconList[this.GW61.id-1].select.visible=!0,P16.sGF(this.btnUpgrade,!1),this.btnUpgrade.enabled=!0):-1==this.GW61.id?(P16.sGF(this.btnUpgrade,!0),this.btnUpgrade.enabled=!1):-2==this.GW61.id&&(P16.sGF(this.btnUpgrade,!0),this.btnUpgrade.enabled=!1);var o=L4.FD20(e.legion.lv);if(this.lblvLimit.textFlow=M18.HTP.parse(O3.tr(1542,this.GW61.lv,o.skilllevel)),this.lbPower.text=e.ZF66().toString(),-2!=this.GW61.id){this.gpSkillAttr.visible=!0,this.lbMax.visible=!1;var r=void 0,n=L4.FA71(this.GW61.lv+1),a=void 0,h=void 0;h=-1==this.GW61.id?n.attrList[1]:n.attrList[this.GW61.id];var p=void 0,l=THH1.FI55(h);0<this.GW61.lv&&(r=L4.FA71(this.GW61.lv),a=-1==this.GW61.id?r.attrList[1]:r.attrList[this.GW61.id],p=THH1.FI55(a));var c=1;for(var u in l){var d=l[u],v=this["lbCurAttr"+c],f=this["lbNextAttr"+c],g=O4.FD72(parseInt(u));f.text=O3.tr(1543,g,d),0==this.GW61.lv?v.text=O3.tr(1543,g,0):v.text=O3.tr(1543,g,p[u]),c++}switch(c-1){case 1:this.lbCurAttr2.text=this.lbCurAttr1.text,this.lbCurAttr1.visible=!1,this.lbCurAttr3.visible=!1,this.lbNextAttr2.text=this.lbNextAttr1.text,this.lbNextAttr1.visible=!1,this.lbNextAttr3.visible=!1,this.lbCurAttr2.visible=!0,this.lbNextAttr2.visible=!0;break;case 2:this.gpCurAttr.layout.gap=8,this.gpCurAttr.verticalCenter=5,this.gpNextAttr.layout.gap=8,this.gpNextAttr.verticalCenter=5,this.lbCurAttr1.visible=!0,this.lbCurAttr2.visible=!0,this.lbCurAttr3.visible=!1,this.lbNextAttr1.visible=!0,this.lbNextAttr2.visible=!0,this.lbNextAttr3.visible=!1;break;case 3:this.gpCurAttr.layout.gap=6,this.gpCurAttr.verticalCenter=0,this.gpNextAttr.layout.gap=6,this.gpNextAttr.verticalCenter=0,this.lbCurAttr1.visible=!0,this.lbCurAttr2.visible=!0,this.lbCurAttr3.visible=!0,this.lbNextAttr1.visible=!0,this.lbNextAttr2.visible=!0,this.lbNextAttr3.visible=!0}var m=M18.FL28(n.cost,":"),y="#75c01a";parseInt(m[1])>e.devote&&(y="#d82222");var A=N12.gID(m[0]);this.imgGood.setData(A),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(1545,y,e.devote,m[1]))}else this.gpSkillAttr.visible=!1,this.lbMax.visible=!0;var b=TG22.FA49(),T=0;for(var u in b){var C=b[u];g=O4.FD72(parseInt(u));this.gpAttr.getChildAt(T).textFlow=M18.HTP.parse(O3.tr(1544,g,C)),T++}},t.prototype.ZR46=function(){var t=App.CM.gtM(O6.B89).myLegion,e=L4.FA71(this.GW61.lv+1),i=M18.FL28(e.cost,":");if(t.devote>=parseInt(i[1])){var s=this.iconList[this.GW61.id-1].icon.parent;App.THH33.aUE(s,"iconSkill",-s.width/2-10,-s.height/2-10,1,function(){App.THH33.rEf(s,"iconSkill")})}App.CM.apF(O6.B89,L11.B69)},t.prototype.close=function(){this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this)},t.prototype.closeSelf=function(){App.CM.apF(O6.B89,L11.B26)},t}(BaseEuiView);__reflect(LegionSkillView.prototype,"LegionSkillView"),function(t){var e=function(){function r(){}return r.FK35=function(t){var e=t.library_tower,i=t.library_init;for(var s in r.unlockLv=parseFloat(i.unlockLv.value),r.unlockDate=parseFloat(i.unlockDate.value),e){var o=e[s];r.towerInfo[o.chapter]||(r.towerInfo[o.chapter]={}),r.towerInfo[o.chapter][o.battle]=o}r.library_tower=e,r.towerCount=Reincarnate.Utils.mapkeyMax(r.towerInfo),r.towerHighest=Reincarnate.Utils.mapkeyMax(r.library_tower),r.aidTime=parseFloat(i.aidTime.value),r.starReq1=parseFloat(i.starReq1.value),r.starReq2=parseFloat(i.starReq2.value),r.starReq3=parseFloat(i.starReq3.value),r.sweep=Number(i.sweep.value)},r.getTower=function(t,e){return r.towerInfo[t]?r.towerInfo[t][e]:void 0},r.FC15=function(e){return Object.keys(r.towerInfo[e]).sort(function(t,e){return parseFloat(t)-parseFloat(e)}).map(function(t){return r.towerInfo[e][t]})},r.FI71=function(t){return r.library_tower[t+1]?t+1:t},r.FI72=function(t){return this.library_tower[t]},r.towerInfo={},r.towerCount=0,r.towerHighest=0,r.unlockLv=255,r.unlockDate=255,r.aidTime=0,r.starReq1=0,r.starReq2=0,r.starReq3=0,r.sweep=0,r}();t.Config=e,__reflect(e.prototype,"Library.Config")}(Library||(Library={})),function(t){var e=function(){function t(){}return t.SELECT=1000001,t.SET_AUTO_CHALLENGE=1000002,t.SET_FULL_AUTO_CHALLENGE=1000003,t.OPEN_TOWER_INFO_VIEW=1000004,t.RECEIVE=2e6,t.LOAD=2000001,t.LOAD_RES=2000002,t.CREATE_TEAM=2000003,t.CREATE_TEAM_RES=2000004,t.JOIN_TEAM=2000005,t.JOIN_TEAM_RES=2000006,t.QUICK_JOIN_TEAM=2000007,t.QUICK_JOIN_TEAM_RES=2000008,t.QUIT_TEAM=2000009,t.QUIT_TEAM_RES=2000010,t.DISMISSION_TEAM=2000011,t.DISMISSION_TEAM_RES=2000012,t.LOAD_TEAMS=2000013,t.LOAD_TEAMS_RES=2000014,t.CHALLENGE=2000015,t.CHALLENGE_RES=2000016,t.CHALLENGE_PUSH=2000017,t.SWEEP=2000019,t.SWEEP_RES=2000020,t.RESET_WEEK_RES=2000021,t.TEAM_PUSH=2000024,t.DISMISSION_TEAM_PUSH=2000026,t.LIBRARY_SET_REQ=2000027,t.LIBRARY_SET_RES=2000028,t.LIB_PUSH=2000029,t}();t.Const=e,__reflect(e.prototype,"Library.Const")}(Library||(Library={})),function(n){var t=function(s){function t(){var t=s.call(this)||this;App.VM.register(O7.C10,"LibraryTowerInfoView",t,K17.UI_Main_TOP),t.rgF(n.Const.SELECT,t.select,t),t.rgF(n.Const.SET_AUTO_CHALLENGE,t.GN56,t),t.rgF(n.Const.SET_FULL_AUTO_CHALLENGE,t.GF60,t),t.rgF(n.Const.OPEN_TOWER_INFO_VIEW,t.GL69,t);var e=new n.Model(t);e.aLV(O7.I53),e.aLV(O7.C10),e.aLV(O7.HH95),e.aLV(O7.I64),e.aLV(O7.I85);var i=t.proxy=new n.Proxy(t);return t.rgF(n.Const.RECEIVE,t.receive,t),t.rgF(n.Const.LOAD,i.load,i),t.rgF(n.Const.LOAD_RES,t.loadRes,t),t.rgF(n.Const.LOAD_TEAMS,i.loadTeams,i),t.rgF(n.Const.LOAD_TEAMS_RES,t.GU56,t),t.rgF(n.Const.CREATE_TEAM,t.GX78,t),t.rgF(n.Const.CREATE_TEAM_RES,t.GS69,t),t.rgF(n.Const.JOIN_TEAM,t.joinTeam,t),t.rgF(n.Const.JOIN_TEAM_RES,t.GV99,t),t.rgF(n.Const.QUICK_JOIN_TEAM,t.GY65,t),t.rgF(n.Const.QUICK_JOIN_TEAM_RES,t.GN57,t),t.rgF(n.Const.QUIT_TEAM,i.quitTeam,i),t.rgF(n.Const.QUIT_TEAM_RES,t.GW2,t),t.rgF(n.Const.DISMISSION_TEAM,i.ZT11,i),t.rgF(n.Const.DISMISSION_TEAM_RES,t.GL70,t),t.rgF(n.Const.TEAM_PUSH,t.teamPush,t),t.rgF(n.Const.DISMISSION_TEAM_PUSH,t.GJ92,t),t.rgF(n.Const.CHALLENGE,t.challenge,t),t.rgF(n.Const.CHALLENGE_RES,t.GU62,t),t.rgF(n.Const.SWEEP,i.sweep,i),t.rgF(n.Const.SWEEP_RES,t.sweepRes,t),t.rgF(n.Const.CHALLENGE_PUSH,t.GT38,t),t.rgF(n.Const.RESET_WEEK_RES,t.GT39,t),t.rgF(n.Const.LIBRARY_SET_REQ,t.proxy.ZX78,t.proxy),t.rgF(n.Const.LIBRARY_SET_RES,t.teamPush,t),t.rgF(n.Const.LIB_PUSH,t.teamPush,t),t}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return this.gtM()},enumerable:!0,configurable:!0}),t.prototype.select=function(t){var e=App.VM.gOV(O7.C10);e&&e.select(t)},t.prototype.GL69=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];n.Utils.isOpen()?(t=App.VM).open.apply(t,[O7.C10].concat(e)):P18.sDP(O3.tr(5054,n.Config.unlockDate,n.Config.unlockLv))},t.prototype.GN56=function(t){var i=this;App.K16.removeAll(this);var s=this.model;if((s.timeAutoChanllenge=t)&&0<=s.team.cd){var e=s.autoChallengeCountdown=60-s.team.cd;App.K16.doTimer(1e3,e,function(){i.model.autoChallengeCountdown-=1;var t=App.VM.gOV(O7.C10);t&&t.ZA47(i.model.autoChallengeCountdown);var e=App.VM.gOV(O7.I85);e&&e.ZG48(),s.notify()},this,function(){App.K16.removeAll(i),i.apF(n.Const.CHALLENGE)})}else s.autoChallengeCountdown=60;var o=App.VM.gOV(O7.C10);o&&o.ZA47(s.autoChallengeCountdown);var r=App.VM.gOV(O7.I85);r&&r.ZG48()},t.prototype.GF60=function(t){this.model.fullAutoChallenge=t,this.apF(n.Const.LIBRARY_SET_REQ,1,t?1:0),t&&3<=this.model.teams.length&&this.apF(n.Const.CHALLENGE)},t.prototype.receive=function(t,e){if(200!=e.head.state)return App.CM.apF(O6.B87,L10.A4,e);this.apF(t,e)},t.prototype.GU56=function(t){this.model.update(t.body,!0)},t.prototype.loadRes=function(t){this.model.update(t.body,!0)},t.prototype.GS69=function(t){var e=this.model;e.update(t.body,!0),e.FL44&&(e.timeAutoChanllenge&&this.GN56(!0),n.Utils.FD75());var i=App.VM.gOV(O7.C10);i&&i.refresh()},t.prototype.GW2=function(t){App.K16.removeAll(this);var e=this.model;e.update(t.body),delete e.team,e.teams=[],e.notify()},t.prototype.GX78=function(t){if(P7.FF59()){var e=this.model,i=e.fullAutoChallenge?1:0,s=e.timeAutoChanllenge?1:0;this.proxy.GX78(t,i,s)}},t.prototype.joinTeam=function(t){P7.FF59()&&this.proxy.joinTeam(t)},t.prototype.GY65=function(t){if(P7.FF59()){var e=this.model,i=e.fullAutoChallenge?1:0,s=e.timeAutoChanllenge?1:0;this.proxy.ZX77(t,i,s)}},t.prototype.GV99=function(t){this.model.update(t.body,!0),0<=this.model.team.cd?this.GN56(!0):this.GN56(!1);var e=App.VM.gOV(O7.C10);if(e)e.refresh();else{var i=n.Config.FI72(this.model.team.bossId),s=i.chapter,o=i.battle;App.VM.open(O7.C10,s,o-1)}},t.prototype.GN57=function(t){this.model.update(t.body,!0),this.model.FL44?(this.GN56(this.model.timeAutoChanllenge),n.Utils.FD75()):0<=this.model.team.cd?this.GN56(!0):this.GN56(!1)},t.prototype.GL70=function(t){this.model.update(t.body,!0)},t.prototype.teamPush=function(t){if(P7.isEmpty(t.body)){var e=this.model;return e.update(t.body),delete e.team,e.teams=[],void e.notify()}var i=this.model.FL44,s=this.model;s.update(t.body,!0),s.FL44&&!i&&this.GN56(s.timeAutoChanllenge),0<=s.team.cd?this.GN56(!0):this.GN56(!1),i&&s.FL44&&3<=s.team.members.length&&s.fullAutoChallenge&&this.apF(n.Const.CHALLENGE)},t.prototype.GJ92=function(t){var e=this.model;e.update(t.body),delete e.team,e.teams=[],e.notify()},t.prototype.challenge=function(){var t=this.model;t.FL44?this.proxy.challenge(t.team.teamId):Log.trace("error:不在队伍或者不是队长")},t.prototype.GU62=function(t){this.model.update(t.body,!0)},t.prototype.GT38=function(t){var e=this;this.model.update(t.body),delete this.model.team,this.model.teams=[],this.model.notify(t.head.protoType);var i=P7.isGetView(O7.I53);if(t.body.fr){App.VM.close(O7.HH95),App.VM.close(O7.C10);var s=t.body.s?t.body.s.v:0;App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,needResult:!0,type:P15.A43,star:s,isAuto:i},function(){return e.GL69()},this)}},t.prototype.GT39=function(t){delete this.model.team,this.model.update(t.body,!0,t.head.protoType)},t.prototype.sweepRes=function(t){this.model.update(t.body,!0,t.head.protoType);var e={rewards:t.body.ob};App.VM.open(O7.F74,1,e)},t}(TE11);n.Controller=t,__reflect(t.prototype,"Library.Controller")}(Library||(Library={})),function(e){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.fullAutoChallenge=!0,e.timeAutoChanllenge=!0,e.autoChallengeCountdown=0,e.mk=[],e.ya={},e.teams=[],e.ass=0,e.lc=0,e.ss=[],e}return __extends(t,i),t.prototype.update=function(t,e){void 0===e&&(e=!1);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(t){if(this.teams=void 0===t.teams?this.teams:t.teams,this.ya=void 0===t.ya?this.ya:t.ya,this.mk=void 0===t.mk?this.mk:t.mk,this.ass=void 0===t.ass?this.ass:t.ass,this.lc=void 0===t.lc?this.lc:t.lc,this.team=void 0===t.team?this.team:t.team,this.ss=void 0===t.ss?this.ss:t.ss,t.s){for(var o=!1,r=0;r<this.ss.length;r++)if(this.ss[r].k==t.s.k){this.ss[r].v<t.s.v&&(this.ss[r]=t.s),o=!0;break}o||this.ss.push(t.s)}e&&this.notify.apply(this,i)}},Object.defineProperty(t.prototype,"currentLevelId",{get:function(){return this.mk.length?this.mk[this.mk.length-1]+1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTowerId",{get:function(){return this.isAllPass?e.Config.towerCount:e.Config.FI72(this.currentLevelId).chapter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAllPass",{get:function(){return 0<=this.mk.lastIndexOf(e.Config.towerHighest)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInTeam",{get:function(){return!!this.team},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FL44",{get:function(){return this.isInTeam&&O4.getAid()==this.team.leader},enumerable:!0,configurable:!0}),t.prototype.getStar=function(t){for(var e=0,i=this.ss;e<i.length;e++){var s=i[e];if(s.k==t)return s.v}return 0},Object.defineProperty(t.prototype,"stars",{get:function(){for(var t=0,e=0,i=this.ss;e<i.length;e++){t+=i[e].v}return t},enumerable:!0,configurable:!0}),t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.notifyView.apply(this,[this].concat(t))},t}(TG79);e.Model=t,__reflect(t.prototype,"Library.Model")}(Library||(Library={})),function(s){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.quickReceiveList={},e.quickReceive(P4.L1,s.Const.CREATE_TEAM_RES),e.quickReceive(P4.P24,s.Const.JOIN_TEAM_RES),e.quickReceive(P4.P26,s.Const.QUIT_TEAM_RES),e.quickReceive(P4.E43,s.Const.QUICK_JOIN_TEAM_RES),e.quickReceive(P4.HH31,s.Const.DISMISSION_TEAM_RES),e.quickReceive(P4.N1,s.Const.LOAD_TEAMS_RES),e.quickReceive(P4.J9,s.Const.TEAM_PUSH),e.quickReceive(P4.F63,s.Const.DISMISSION_TEAM_PUSH),e.quickReceive(P4.L2,s.Const.CHALLENGE_PUSH),e.quickReceive(P4.M98,s.Const.CHALLENGE_RES),e.quickReceive(P4.V17,s.Const.SWEEP_RES),e.quickReceive(P4.L3,s.Const.RESET_WEEK_RES),e.quickReceive(P4.W90,s.Const.LIBRARY_SET_RES),e.quickReceive(P4.Y28,s.Const.LIB_PUSH),e}return __extends(t,i),t.prototype.receiveData=function(t){var e=this.quickReceiveList[t.head.protoType];e&&this.apF(s.Const.RECEIVE,e,t)},t.prototype.quickReceive=function(t,e){this.quickReceiveList[t]&&Log.trace(t+" 已经被注册过了"),this.quickReceiveList[t]=e,this.rSM(t,this.receiveData,this)},t.prototype.load=function(){var i=this;this.rSMO(P4.W11,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apF.apply(i,[s.Const.LOAD_RES].concat(t))},this);var t={type:P4.W10,body:{}};this.sSM(t)},t.prototype.loadTeams=function(t){this.sSM({type:P4.M99,body:{bossId:t}})},t.prototype.GX78=function(t,e,i){this.sSM({type:P4.K99,body:{bossId:t,isFull:e,isTime:i}})},t.prototype.joinTeam=function(t){this.sSM({type:P4.P23,body:{teamId:t}})},t.prototype.ZX77=function(t,e,i){this.sSM({type:P4.E42,body:{bossId:t,isFull:e,isTime:i}})},t.prototype.quitTeam=function(){this.sSM({type:P4.P25,body:{}})},t.prototype.ZT11=function(t){this.sSM({type:P4.HH30,body:{targeId:t}})},t.prototype.challenge=function(t){this.sSM({type:P4.M97,body:{teamId:t}})},t.prototype.sweep=function(t,e){this.sSM({type:P4.V16,body:{type:e,bossId:t}})},t.prototype.ZX78=function(t,e){this.sSM({type:P4.W89,body:{id:t,state:e}})},t}(TG80);s.Proxy=t,__reflect(t.prototype,"Library.Proxy")}(Library||(Library={})),function(s){var t=function(){function t(){}return t.canSweep=function(t){var e=s.Config.FI72(t);if(e){var i=App.CM.gtM(O6.B78);if(i)return e.chapter<=i.lc-s.Config.sweep&&i.mk.indexOf(t)<0}return!1},t.FD75=function(){t.inviteClock=P6.getTime(!0)+N18.FL48(2018).sharecd},t.FC16=function(){return t.inviteClock-P6.getTime(!0)},t.hasDot=function(){var t=App.CM.gtM(O6.B78);if(t){for(var e=0,i=1;i<=t.lc-s.Config.sweep;i++)e+=Object.keys(s.Config.towerInfo[i]).length;if(e>t.mk.length)return!0}return!1},t.isOpen=function(){var t=App.CM.gtM(O6.B43);return!!(t&&t.serOpenDay+1>=s.Config.unlockDate&&O4.getLv()>=s.Config.unlockLv)},t.inviteClock=0,t}();s.Utils=t,__reflect(t.prototype,"Library.Utils")}(Library||(Library={}));var LibraryBossInfoItemView=function(s){function t(){var t=s.call(this)||this;return t.skinName="LibraryBossInfoItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,s),t.prototype.childrenCreated=function(){s.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){s.prototype.dataChanged.call(this);var t=this.data.modelId;if(this.imgNew.visible=this.data.dot,this.modelId!=t){var e={id:t,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.modelId=t,this.objBoss=new FightGameObject,this.objBoss.setData(e,this.gpBoss)}if(this.nameLabel.textFlow=M18.HTP.parse(O3.tr(3935,this.data.name)),this.gStar.visible=this.data.pass,this.labTr6868.visible=!this.gStar.visible,this.labTr6868.textFlow=this.data.in?O3.tr2(6963):O3.tr2(6868),this.gStar.visible)for(var i=0;i<this.gStar.numChildren;i++){this.gStar.getChildAt(i).source=i<this.data.stars?"v1_img_star1_png":"v1_img_star2_png"}this.data.selected?(this.baseGroup.scaleX=this.baseGroup.scaleY=1,this.width=182,this.imgSel.visible=!0):(this.baseGroup.scaleX=this.baseGroup.scaleY=.9,this.width=163.8,this.imgSel.visible=!1)},t.prototype.onSelect=function(t){App.CM.gtM(O6.B78).isInTeam?P18.sDP(O3.tr(532)):App.CM.apF(O6.B78,Library.Const.SELECT,this.itemIndex)},t.prototype.onAddToStage=function(){this.clickGroup.addEventListener(egret.TouchEvent.TOUCH_END,this.onSelect,this)},t.prototype.onRemoveStage=function(){this.clickGroup.removeEventListener(egret.TouchEvent.TOUCH_END,this.onSelect,this),this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null)},t}(eui.ItemRenderer);__reflect(LibraryBossInfoItemView.prototype,"LibraryBossInfoItemView");var LibraryTeamItemView=function(h){function t(){var t=h.call(this)||this;return t.maxNum=3,t.skinName="BossMenHuoTeamSkin",t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,h),t.prototype.dataChanged=function(){if(h.prototype.dataChanged.call(this),this.joinBtn.label=O3.tr(6492),0==this.data.type){this.deleteBtn.visible=!1,this.teamImg.visible=!1,this.baseGroup.visible=!0,this.teamGroup.visible=!1,this.joinGroup.visible=!0;for(var t=void 0,e=0,i=this.data.teamData.members;e<i.length;e++){var s=i[e];if(s.aid===this.data.teamData.leader){t=s;break}}this.nameLabel1.text=t.name,this.head.setIcon(t.icon),this.memberLabel.text=O3.tr(529,this.data.teamData.members.length,this.maxNum),this.data.teamData.members.length>=this.maxNum?(P16.sGF(this.joinBtn,!0),this.joinBtn.touchEnabled=!1):(P16.sGF(this.joinBtn,!1),this.joinBtn.touchEnabled=!0),this.recruitBtn.visible=!1}else{var o=this.data.memberData,r=O4.getAid();this.recruitBtn.visible=this.deleteBtn.visible=this.joinGroup.visible=!1,this.teamGroup.visible=!0,this.baseGroup.visible=!!o.data;var n=o.leader==r;if(o.data){var a=r==o.data.aid;this.nameLabel.text=o.data.name,this.head.setIcon(o.data.icon),this.lvLabel.text="Lv."+o.data.lv,this.scoreLabel.text=O3.tr(541)+o.data.sc,this.teamImg.visible=o.leader==o.data.aid,this.deleteBtn.visible=a||n}else n&&(this.recruitBtn.visible=!0,this.GY14())}},t.prototype.onRecrui=function(){if(0<THH25.FC16())P18.sDP(O3.tr(549));else{App.CM.gtM(O6.B82),App.CM.gtM(O6.B78);if(team){var t=this.data.memberData.teamId,e=this.data.memberData.bossId,i=Library.Config.FI72(e),s=i.chapter,o=i.battle,r=M18.format("$0,$1",[s,o]),n={nid:F8.A9,channelId:1,param:r,infoId:t};Library.Utils.FD75(),App.CM.apF(O6.C13,O12.A13,n)}else P18.sDP(O3.tr(5654))}},t.prototype.onDelete=function(){if(1==this.data.type){var t=O4.getAid();t==this.data.memberData.data.aid?App.CM.apF(O6.B78,Library.Const.QUIT_TEAM):this.data.memberData.leader==t&&App.CM.apF(O6.B78,Library.Const.DISMISSION_TEAM,this.data.memberData.data.aid)}},t.prototype.onJoin=function(){App.CM.apF(O6.B78,Library.Const.JOIN_TEAM,this.data.teamData.teamId)},t.prototype.GY14=function(){var t=O4.getAid();if(1===this.data.type&&t==this.data.memberData.leader){var e=Library.Utils.FC16();this.recruitBtn.touchEnabled=e<=0,P16.sGF(this.recruitBtn,!this.recruitBtn.touchEnabled),this.recruitBtn.label=0<e?O3.tr(547,Math.ceil(e)):O3.tr(548)}},t.prototype.childrenCreated=function(){h.prototype.childrenCreated.call(this),this.recruitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecrui,this),this.deleteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this),this.joinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoin,this),this.cdHandler||(this.cdHandler=App.K16.doTimer(1e3,0,this.GY14,this,null,this))},t.prototype.onRemoveStage=function(){this.recruitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecrui,this),this.deleteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this),this.joinBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoin,this),this.cdHandler&&(App.K16.rBH(this.cdHandler),this.cdHandler=null)},t}(eui.ItemRenderer);__reflect(LibraryTeamItemView.prototype,"LibraryTeamItemView");var LibraryTowerInfoView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.max=0,i.refreshTeamTime=5e3,i.skinName="LibraryTowerInfoSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.chapterList.dataProvider=this.dsBoss=new eui.ArrayCollection,this.chapterList.itemRenderer=LibraryBossInfoItemView,this.itemList.dataProvider=this.dsReward=new eui.ArrayCollection,this.itemList.itemRenderer=ItemIcon,this.teamList.dataProvider=this.dsTeam=new eui.ArrayCollection,this.teamList.itemRenderer=LibraryTeamItemView,this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV42,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR23,this),this.chapterScroller.addEventListener(egret.TouchEvent.CHANGE,this.changeDong,this),this.cbBlank.addEventListener(egret.Event.CHANGE,this.ZD31,this),this.cbAutoFight.addEventListener(egret.Event.CHANGE,this.ZB16,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick2,this),this.dlg.title=O3.tr(6866),this.labTr3931.textFlow=O3.tr2(3931),this.labTr6938.textFlow=O3.tr2(6938),this.cbAutoFight.label=O3.tr(6932)},Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B78)},enumerable:!0,configurable:!0}),t.prototype.open=function(t,e){this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this);var i=this.model;if(i.isInTeam)this.refresh();else{if("number"!=typeof t)if(t=i.currentTowerId,i.isAllPass)e=0;else{var s=Library.Config.FI72(i.currentLevelId);t=s.chapter,e=s.battle-1}this.chapterId=t,this.chaptersData=Library.Config.FC15(this.chapterId),this.max=this.chaptersData.length,this.select(e)}App.K16.removeAll(this),App.K16.doTimer(this.refreshTeamTime,0,this.loadTeams,this)},t.prototype.refresh=function(){var t=this.model;if(t.isInTeam){var e=void 0;this.chapterId=Library.Config.FI72(t.team.bossId).chapter,this.chaptersData=Library.Config.FC15(this.chapterId),this.max=this.chaptersData.length;for(var i=0;i<this.chaptersData.length;i++)if(this.chaptersData[i].id==t.team.bossId){e=i;break}this.select(e)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dsBoss.removeAll(),this.dsReward.removeAll(),App.K16.removeAll(this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV42,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR23,this),this.chapterScroller.removeEventListener(egret.TouchEvent.CHANGE,this.changeDong,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.ZD31,this),this.cbAutoFight.removeEventListener(egret.Event.CHANGE,this.ZB16,this),this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this),this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick2,this),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t,e){t instanceof Library.Model&&(e!=P4.V17&&e!=P4.L3&&e!=P4.L2||this.ZQ73(t),this.GX5())},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.ZD31=function(){App.CM.apF(O6.B78,Library.Const.SET_AUTO_CHALLENGE,this.cbBlank.selected),this.apF(Library.Const.LIBRARY_SET_REQ,2,this.cbBlank.selected?1:0)},t.prototype.ZB16=function(){App.CM.apF(O6.B78,Library.Const.SET_FULL_AUTO_CHALLENGE,this.cbAutoFight.selected),this.apF(Library.Const.LIBRARY_SET_REQ,1,this.cbAutoFight.selected?1:0)},t.prototype.changeDong=function(){var t=this.chapterScroller.viewport;this.leftBtn.visible=164<=t.scrollH,this.rightBtn.visible=t.scrollH+t.width+164<=t.contentWidth},t.prototype.ZR23=function(){var t=this.chapterScroller.viewport;t.scrollH=t.scrollH+this.chapterScroller.width,t.scrollH>t.contentWidth-this.chapterScroller.width&&(t.scrollH=t.contentWidth-this.chapterScroller.width),this.rightBtn.visible=Math.abs(t.scrollH+this.chapterScroller.width)<t.contentWidth,this.leftBtn.visible=0!=t.scrollH},t.prototype.ZV42=function(){var t=this.chapterScroller.viewport;t.scrollH=t.scrollH-this.chapterScroller.width,t.scrollH<0&&(t.scrollH=0),this.leftBtn.visible=0!=t.scrollH,this.rightBtn.visible=Math.abs(t.scrollH+this.chapterScroller.width)<t.contentWidth},t.prototype.onClick1=function(){this.model.isInTeam||(Library.Utils.canSweep(this.id)?App.CM.apF(O6.B78,Library.Const.SWEEP,this.id,1):App.CM.apF(O6.B78,Library.Const.CREATE_TEAM,this.id))},t.prototype.onClick2=function(){var t=this.model;t.isInTeam&&t.FL44?App.CM.apF(O6.B78,Library.Const.CHALLENGE):Library.Utils.canSweep(this.id)?App.CM.apF(O6.B78,Library.Const.SWEEP,this.id,2):App.CM.apF(O6.B78,Library.Const.QUICK_JOIN_TEAM,this.id)},t.prototype.ZN52=function(t){var e=this;void 0===t&&(t=this.index),this.chapterScroller.validateNow();var i=this.chapterScroller.viewport;0==t&&(t=1),t==this.max-1&&2<this.max&&(t=this.max-2),t&&egret.Tween.get(i).to({scrollH:185.8*(t-1)},100).wait(10).call(function(){egret.Tween.removeTweens(i),e.changeDong()},this)},t.prototype.select=function(t){var e=Math.max(Math.min(this.max-1,t),0),i=this.index===e;this.index=e,this.id=this.chaptersData[this.index].id,i||this.loadTeams(),this.ZQ73(this.model),this.updateReward(),this.GX5(),this.ZN52(t)},t.prototype.GX5=function(){var t=this.model;this.btn1.imgNew.visible=this.btn2.imgNew.visible=this.gCb.visible=this.btn1.visible=this.btn2.visible=!1;var e=this.chaptersData[this.index].battle;if(this.titleLabel.text=O3.tr(6937,this.chapterId,e),this.labCount.textFlow=O3.tr2(6939,Library.Config.aidTime-t.ass,Library.Config.aidTime),t.isInTeam){for(var i=t.team,s=i.members.map(function(t){return{type:1,memberData:{data:t,leader:i.leader}}});s.length<3;)s.push({type:1,memberData:{teamId:i.teamId,bossId:i.bossId,leader:i.leader,data:void 0}});this.dsTeam.source=s,t.FL44&&(this.gCb.visible=this.btn2.visible=!0,this.btn2.label=O3.tr(6929),this.cbBlank.label=O3.tr(6933,t.autoChallengeCountdown),this.cbBlank.selected=t.timeAutoChanllenge,this.cbAutoFight.selected=t.fullAutoChallenge)}else Library.Utils.canSweep(this.id)?(this.btn2.visible=this.btn1.visible=!0,this.btn1.label=O3.tr(6930),this.btn2.label=O3.tr(6931),this.btn1.imgNew.visible=Library.Utils.canSweep(this.id),this.btn2.imgNew.visible=Library.Utils.hasDot()):(this.btn2.visible=this.btn1.visible=!0,this.btn1.label=O3.tr(6927),this.btn2.label=O3.tr(6928),this.dsTeam.source=t.teams.map(function(t){return{type:0,teamData:t}}))},t.prototype.updateReward=function(){this.chapterId&&this.id&&(this.dsReward.source=P7.str2kv(Library.Config.FI72(this.id).predrop,",").map(function(t){return{itemData:{data:N12.gID(t.k),ct:t.v},isBottom:!1,scale:1}}))},t.prototype.ZQ73=function(t){var i=this;if(this.chapterId&&0<=this.index){var s=this.model,o=s.currentLevelId;this.dsBoss.replaceAll(Library.Config.FC15(this.chapterId).map(function(t,e){return{selected:i.index==e,name:O3.tr(6937,i.chapterId,t.battle),modelId:t.premoster,id:t.id,stars:s.getStar(t.id),in:t.id==o,dot:Library.Utils.canSweep(t.id),pass:t.id<o}}))}},t.prototype.ZA47=function(t){this.cbBlank.label=O3.tr(6933,t)},t.prototype.loadTeams=function(){!this.model.isInTeam&&this.id&&App.CM.apF(O6.B78,Library.Const.LOAD_TEAMS,this.id)},t}(BaseEuiView);__reflect(LibraryTowerInfoView.prototype,"LibraryTowerInfoView");var LibraryTowerItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="LibraryTowerItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.labTr6867.textFlow=O3.tr2(6867),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnEnter.label=O3.tr(6934)},t.prototype.remove=function(){this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.labTr6869b.textFlow=this.labTr6869.textFlow=O3.tr2(6869,this.data.tower),this.gStar.visible=this.labTr6867.visible=!1,this.btnEnter.touchEnabled=this.data.pass||this.data.in,P16.sGF(this.btnEnter,!this.btnEnter.touchEnabled),this.cIcon.visible=this.data.in,this.cIcon.visible&&(this.cIcon.icon.source=O4.getHead()),this.imgLentern.source=this.imgLentern1.source=this.data.in||this.data.pass?"com_dlonliang_png":"com_dlonliang2_png",this.data.pass||this.data.in?(this.gStar.visible=!0,this.labStar.textFlow=O3.tr2(6874,this.data.stars)):this.labTr6867.visible=!0},t.prototype.onClick=function(){var t=0;if(this.data.in)for(var e=App.CM.gtM(O6.B78),i=Library.Config.FC15(this.data.tower),s=0;s<i.length;s++)if(i[s].id==e.currentLevelId){t=s;break}App.VM.open(O7.C10,this.data.tower,t)},t}(eui.ItemRenderer);__reflect(LibraryTowerItemView.prototype,"LibraryTowerItemView");var LibraryView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="LibrarySkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shopImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.listTower.dataProvider=this.dataSource=new eui.ArrayCollection,this.listTower.itemRenderer=LibraryTowerItemView,this.updateTower()},Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B78)},enumerable:!0,configurable:!0}),t.prototype.open=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];s.prototype.open.apply(this,t),App.K16.doFrame(1,1,function(){return e.ZX79(e.model.currentTowerId)},this),App.K16.doFrame(1,1,function(){var t=App.VM.gOV(O7.HH95);t&&(t.helpBtn.visible=!0,t.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickHelp,e))},this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.shopImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this);var i=App.VM.gOV(O7.HH95);i&&(i.helpBtn.visible=!1,i.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this)),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){t instanceof Library.Model&&this.updateTower()},t.prototype.updateTower=function(){for(var t=[],e=this.model,i=e.isAllPass?Library.Config.towerCount:e.currentTowerId,s=Library.Config.towerCount;0<s;s--){for(var o=0,r=0,n=0,a=Library.Config.FC15(s);n<a.length;n++){var h=a[n];o+=3,r+=e.getStar(h.id)}t.push({tower:s,stars:r,maxStar:o,in:s===i,pass:s<i})}this.dataSource.replaceAll(t)},t.prototype.ZX79=function(t){var e=Library.Config.towerCount,i=this.scTower.maxHeight,s=197*(e-1)+203-5;if(i<s){var o=197*(e-Math.min(Math.max(t,0),e))-5+6;s-i<o&&(o=s-i),this.listTower.scrollV=o}},t.prototype.onClickHelp=function(){var t={title:O3.tr(6866),content:O3.tr(6935)};this.aCF(O6.C18,O10.A24,t)},t.prototype.onClickShop=function(){App.VM.isOpen(O7.HH98)&&App.VM.close(O7.HH98);var t=O4.getLv(),e=N15.FG47(P12.A16);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.I3,P12.A16)},t}(BaseEuiView);__reflect(LibraryView.prototype,"LibraryView");var TG72=function(){function e(){}return e.FK35=function(t){e.init=t.mail_init,e.system=t.mail_system},e}();__reflect(TG72.prototype,"TG72");var O17=function(){function t(){}return t.A6=10001,t.A7=10002,t.A8=10003,t.A9=10004,t.A3=10005,t.A4=10007,t.A10=10008,t.A5=10009,t.A12=10010,t.A11=10011,t.A2=10012,t.A1=10013,t}();__reflect(O17.prototype,"O17");var TE93=function(i){function t(){var t=i.call(this)||this,e=new THH6(t);return e.aLV(O7.I84),e.aLV(O7.G59),e.aLV(O7.I64),e.aLV(O7.HH30),e.aLV(O7.I85),t.mailProxy=new THH7(t),App.VM.register(O7.I84,"MailView",t,K17.UI_Main),t.rgF(O17.A12,t.GV12,t),t.rgF(O17.A11,t.GT42,t),App.VM.register(O7.G59,"MailDetail",t,K17.UI_Main_TOP),t.rgF(O17.A2,t.GJ93,t),t.rgF(O17.A1,t.GHH99,t),t.rgF(O17.A6,t.GW52,t),t.rgF(O17.A7,t.GT40,t),t.rgF(O17.A8,t.GW53,t),t.rgF(O17.A3,t.GR45,t),t.rgF(O17.A4,t.GN58,t),t.rgF(O17.A10,t.GT41,t),t.rgF(O17.A5,t.GP46,t),t.rgF(O17.A9,t.GW54,t),t}return __extends(t,i),t.prototype.GW52=function(t){void 0===t&&(t=!1);var e=0;t||(e=this.gtM().ZM5(1));return this.mailProxy.ZP37(e)},t.prototype.GT40=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify(P4.X62)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW53=function(t){this.gtM().setMailRead(t.mid),this.mailProxy.ZP38(t)},t.prototype.GR45=function(t){this.mailProxy.ZF76(t)},t.prototype.GN58=function(t){if(200==t.head.state){var e=this.gtM();e.ZQ26(t.body.ids),P5.sIs(t.body.ob),e.notify(P4.V53,t.body.ids)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW54=function(t){200==t.head.state?this.gtM().notify(P4.X64):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT41=function(t){if(200==t.head.state){var e=this.gtM();e.addMail(t.body.m,!0),e.notify(P4.Y22)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP46=function(t){if(200==t.head.state){var e=this.gtM();e.deletMail(t.body.ids);e.notify(P4.R55,t.body.ids)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV12=function(){App.VM.open(O7.I84)},t.prototype.GT42=function(){App.VM.close(O7.I84)},t.prototype.GJ93=function(t){this.gtM().ZT12(t),App.VM.open(O7.G59)},t.prototype.GHH99=function(){App.VM.close(O7.G59)},t}(TE11);__reflect(TE93.prototype,"TE93");var THH6=function(i){function t(t){var e=i.call(this,t)||this;return e.mailList={},e.curNumList=[],e}return __extends(t,i),t.prototype.initData=function(t){null!=t&&(this.nCurrentPage=t.c,this.nPageSize=t.ps,this.nAllPage=t.a,this.nTotal=t.t,this.addMail(t.m,!1))},t.prototype.addMail=function(t,e){if(null!=t&&0<t.length)for(var i=0;i<t.length;i++){var s=t[i];if(!this.mailList[s.id]){var o=new MailData(s);this.mailList[s.id]=o,this.curNumList[o.nCategory]||(this.curNumList[o.nCategory]=0),this.curNumList[o.nCategory]++}}e&&(this.nTotal=this.nTotal+t.length)},t.prototype.setMailRead=function(t){this.mailList[t]&&(this.mailList[t].nReadState=1)},t.prototype.ZM5=function(t){return this.curNumList[t]?this.curNumList[t]:0},t.prototype.isLoadMore=function(t){return this.ZM5(t)<this.nTotal},t.prototype.ZT12=function(t){this.sCurOpenMail=t},t.prototype.ZT13=function(){return this.mailList[this.sCurOpenMail]},t.prototype.ZQ26=function(t){if(t)for(var e=0;e<t.length;e++){var i=t[e];this.mailList[i]&&(this.mailList[i].nGetState=1,this.mailList[i].nReadState=1)}},t.prototype.deletMail=function(t){t&&(this.nTotal=this.nTotal-t.length);for(var e=!1,i=0;i<t.length;i++){var s=t[i];this.mailList[s]&&(e=!0,this.mailList[s]=null,delete this.mailList[s])}return e},t.prototype.ZT14=function(){for(var t in this.mailList){var e=this.mailList[t];if(e.itemList&&0<e.itemList.length&&0==e.nGetState)return!0}return!1},t.prototype.FL35=function(){for(var t in this.mailList){var e=this.mailList[t];if(0==e.nReadState)return 1;if(e.itemList&&0<e.itemList.length&&0==e.nGetState)return 1}return 0},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(THH6.prototype,"THH6");var THH7=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.X64,e.GW54,e),e.rSM(P4.V53,e.ZT15,e),e.rSM(P4.Y22,e.newMailPush,e),e.rSM(P4.R55,e.ZX80,e),e}return __extends(t,i),t.prototype.ZP37=function(s){var o=this;return new Promise(function(e,t){var i={};i.type=P4.X61,i.body={category:1,count:s},o.rSMO(P4.X62,function(t){o.apF(O17.A7,t),e("加载邮件数据完成")},o),o.sSM(i)})},t.prototype.ZP38=function(t){var e={};e.type=P4.X63,e.body={category:t.category,mid:t.mid},this.sSM(e)},t.prototype.GW54=function(t){this.apF(O17.A9,t)},t.prototype.ZF76=function(t){var e={};e.type=P4.V52,e.body={},e.body.category=t.category,t.mid&&(e.body.mid=t.mid),this.sSM(e)},t.prototype.ZT15=function(t){this.apF(O17.A4,t)},t.prototype.newMailPush=function(t){this.apF(O17.A10,t)},t.prototype.ZX80=function(t){this.apF(O17.A5,t)},t}(TG80);__reflect(THH7.prototype,"THH7");var THH8=function(){};__reflect(THH8.prototype,"THH8");var MailView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.isLoadMore=!1,i.list=[],i.skinName=MailSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t={render:ItemMail,gap:10,width:this.gpList.width,height:this.gpList.height,arrowScale:1};this.listView=new CommonListBase(t),this.gpList.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0,this.dlg.title=O3.tr(3987),this.dlg.strBtnOK=O3.tr(3988)},t.prototype.open=function(){o.prototype.open.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.setOKHandler(this.onGetClicked,this,!1),this.listView.ZG4(this.outHandler.bind(this)),this.listView.isCanCallback=!0,this.listView.open();var t=App.CM.gtM(O6.C15);this.updateBtnGet(t),this.addItemMail(!1)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e;if(t instanceof THH6){switch(s[0]){case P4.X62:this.addItemMail(!1),this.listView.isCanCallback=!0;break;case P4.V53:this.ZT16(s[1]);break;case P4.Y22:this.addItemMail(!0);break;case P4.R55:this.ZT17(s[1])}this.updateBtnGet(t)}},t.prototype.updateBtnGet=function(t){this.dlg.ZM70(t.ZT14())},t.prototype.addItemMail=function(t){var e=App.CM.gtM(O6.C15);for(var i in e.mailList){var s=e.mailList[i];if(s){var o=0;for(o=0;o<this.list.length;o++){if(this.list[o].sId==i)break}o==this.list.length&&this.list.push(s)}}this.list.sort(function(t,e){return t.nSendTime>e.nSendTime?-1:1}),this.listView.rfL(this.list,t)},t.prototype.ZT16=function(t){if(t)for(var e=0;e<t.length;e++)for(var i=t[e],s=0;s<this.list.length;s++){var o=this.list[s];o.sId==i&&this.listView.ZJ79(o,s)}},t.prototype.ZT17=function(t){if(t){for(var e=0;e<t.length;e++)for(var i=t[e],s=0;s<this.list.length;s++){if(this.list[s].sId==i){this.list.splice(s,1);break}}this.listView.rfL(this.list,!0)}},t.prototype.moveHandler=function(t){var e=App.CM.gtM(O6.C15);this.scList.viewport.scrollV>this.scList.viewport.contentHeight-this.scList.viewport.height+60&&(this.isLoadMore=e.isLoadMore(1))},t.prototype.outHandler=function(){App.CM.apF(O6.C15,O17.A6),this.listView.isCanCallback=!1},t.prototype.closeSelf=function(){App.CM.apF(O6.C15,O17.A11)},t.prototype.onGetClicked=function(){if(P7.FF59()){var t={category:1};App.CM.apF(O6.C15,O17.A3,t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t),this.listView.close(),this.scList.removeEventListener(eui.UIEvent.CHANGE,this.moveHandler,this),this.scList.removeEventListener(eui.UIEvent.CHANGE_END,this.outHandler,this)},t}(BaseEuiView);__reflect(MailView.prototype,"MailView");var ItemMail=function(e){function t(){var t=e.call(this)||this;return t.nIndex=0,t.skinName=ItemMailSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.lbTitle.textFlow=M18.HTP.parser(this.data.sTitle);var t=P6.format(this.data.nSendTime,"yyyy-MM-dd hh:mm:ss");this.lbTime.textFlow=M18.HTP.parse(O3.tr(3989,t)),0==this.data.nReadState?this.lbReadState.textFlow=M18.HTP.parse(O3.tr(3990)):this.lbReadState.textFlow=M18.HTP.parse(O3.tr(3991)),this.lbReadState.x=this.lbTitle.x+this.lbTitle.width+8;var e=!1;this.data.itemList&&0<this.data.itemList.length&&0==this.data.nGetState&&(e=!0),this.imgReward.visible=e},t.prototype.oCI=function(){if(0==this.data.nReadState){var t={};t.category=this.data.nCategory,t.mid=this.data.sId,App.CM.apF(O6.C15,O17.A8,t),this.data.nReadState=1,this.dataChanged()}App.CM.apF(O6.C15,O17.A2,this.data.sId),TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(ItemMail.prototype,"ItemMail");var MailDetail=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=MailDetailSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,s),t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.lbContent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT18,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT19,this),this.updateViews()},t.prototype.initUI=function(){var t=this.itemList.layout;this.listGap=t.gap,this.itemList.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.itemList.dataProvider=this.dataSource,this.scView.viewport=this.itemList,this.scView.scrollPolicyV=eui.ScrollPolicy.OFF,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(3992)),this.btnGet.label=O3.tr(3993),this.dlg.title=O3.tr(3994)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];switch(s.prototype.uBM.call(this,t,e),e[0]){case P4.V53:this.updateGetBtn(!1)}},t.prototype.updateViews=function(){var t=App.CM.gtM(O6.C15);this.mailData=t.ZT13(),this.lbContent.textFlow=M18.HTP.parser(this.mailData.sContent.split("@@")[0]),this.copytab=this.mailData.sContent.split("@@")[1],this.mailData.itemList&&0<this.mailData.itemList.length?(this.ZX81(),0==this.mailData.nGetState?this.updateGetBtn(!0):this.updateGetBtn(!1)):(this.btnGet.$setVisible(!1),this.gpGet.$setVisible(!1))},t.prototype.ZX81=function(){var t=[],e=!0;P7.FM14()&&(e=!1);for(var i=0;i<this.mailData.itemList.length;i++){var s=this.mailData.itemList[i],o={itemData:{data:N12.gID(s.k),ct:s.v},isShowLv:!0,isBottom:e};t.push(o)}this.dataSource.replaceAll(t);var r=this.mailData.itemList.length;this.scView.width=r<=5?85*r+this.listGap*r:500},t.prototype.closeSelf=function(){App.CM.apF(O6.C15,O17.A1)},t.prototype.close=function(){this.dataSource.removeAll(),this.lbContent.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT18,this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT19,this)},t.prototype.ZT18=function(t){if(this.copytab){var e=this.lbContent.text,i=new RegExp(this.copytab,"g"),s=this.copytab.length,o=M18.FG70(this.copytab,22),r=e.search(i);if(-1!=r){for(var n=0,a=0,h=0,p=0,l=0,c=0;c<r;c++)/\W/.test(e.charAt(c))?l+=22:l+=11,460<l&&(c-=1,l=0,h+=22);a=(n=l)+o,p=h+22;var u=t.stageX-this.lbContent.localToGlobal().x,d=t.stageY-this.lbContent.localToGlobal().y;if(n<u&&u<a&&h<d&&d<p)platform.setClipboardData(this.copytab,function(){P18.sDP(O3.tr(5650))});else{if(a<=460)return;for(c=r;c<r+s;c++)/\W/.test(e.charAt(c))?l+=22:l+=11,460<l&&(c-=1,l=0,h+=22);a=l,p=h+22,(n=0)<u&&u<a&&h<d&&d<p&&platform.setClipboardData(this.copytab,function(){P18.sDP(O3.tr(5650))})}}}},t.prototype.ZT19=function(){if(P7.FF59()){var t={};t.mid=this.mailData.sId,t.category=this.mailData.nCategory,App.CM.apF(O6.C15,O17.A3,t)}},t.prototype.updateGetBtn=function(t){this.btnGet.$setVisible(t),this.gpGet.visible=!t},t}(BaseEuiView);__reflect(MailDetail.prototype,"MailDetail");var MailData=function(){function t(t){this.initData(t)}return t.prototype.initData=function(t){this.nCategory=t.c,this.nMid=t.mid,this.sId=t.id,this.nRid=t.rid,this.sRname=t.rn,this.nRlv=t.rl,this.nReadState=t.o,this.nSendTime=t.st,this.nLastModTime=t.lmt,this.paramList=t.rc,this.itemList=t.r,this.nGetState=t.get,this.nSName=t.cn,this.sTitle=t.title,this.sContent=t.content,t.mid&&this.initDataByDB()},t.prototype.initDataByDB=function(){var t=TG72.system[this.nMid];this.sTitle=t.title,this.sContent=M18.format(t.content,this.paramList)},t}();__reflect(MailData.prototype,"MailData");var I7=function(){function r(){}return r.FK35=function(t){r.init=t.marriage_init,r.house=t.marriage_house,r.intimacy=t.marriage_intimacy,r.closeReward=r.init.closeReward.value.split("|").map(function(t){var e=t.split(","),i=e[0],s=e[1];return{target:parseInt(i),rewardList:P7.str2kv(s)}}),r.interval=parseInt(r.init.interval.value),r.waterQuantity=parseInt(r.init.waterQuantity.value),r.watering=parseInt(r.init.watering.value);var e=r.init.lovetips.value.split(";"),i=e[0],s=e[1];r.lovetips=i.split(","),r.lovetipsdelay=1e3*parseInt(s),r.growth=P7.str2kv(r.init.growth.value,";",",");var o=0;r.growth.forEach(function(t){return o+=t.v}),r.growthTime=o,r.commonOL=parseInt(r.init.commonOL.value),r.experienceOL=parseInt(r.init.experienceOL.value),r.experience=parseInt(r.init.experience.value)},r.FC46=function(t,e){if(t){var i=P7.getValue(e,TF83.getYm());if(0==i){if(!r.grades[t]){var s=r.init.grade.value;M18.FL28(s,"|",",",";",":").forEach(function(t){r.grades[t[0]]=t[1]})}return r.grades[t]}if(1!=i)return null;if(!r.gradeOld[t]){var o=r.init.gradeOld.value;M18.FL28(o,"|",",",";",":").forEach(function(t){r.gradeOld[t[0]]=t[1]})}return r.gradeOld[t]}},r.FB80=function(t){if(t){if(!r.prices[t]){var e=r.init.gradeprice.value;M18.FL28(e,"|",",",":").forEach(function(t){r.prices[t[0]]=t[1]})}return r.prices[t]}},r.FE17=function(t){if(t){if(!r.blessingPrices[t]){var e=r.init.blessingprice.value;M18.FL28(e,"|",",",":").forEach(function(t){r.blessingPrices[t[0]]=t[1]})}return r.blessingPrices[t]}},r.FE18=function(t){if(t){if(!r.blessingGrade[t]){var e=r.init.blessingGrade.value;M18.FL28(e,"|",",",":").forEach(function(t){r.blessingGrade[t[0]]=t[1]})}return r.blessingGrade[t]}},r.FB81=function(t,e,s){void 0===e&&(e=null);var o=[],i=r.FC46(t,e);return i&&0<i.length&&i.forEach(function(t){var e=N12.gID(t[0]);if(e){var i={data:e,ct:parseInt(t[1])};o.push({itemData:i,isBottom:!1,scale:s})}}),o},r.FG39=function(t){if(!this.upgradeList[t])for(var e in this.upgradeList[t]={},r.house){var i=r.house[e];i.id==t&&(this.upgradeList[t]=i)}return this.upgradeList[t]},r.FL84=function(t){if(!t)return 0;var e=r.FG39(t);return e?parseInt(e.exp):0},r.FJ98=function(t){if(!t)return 0;var e=r.FG39(t);return e?M18.FL28(e.lvcost,";",":"):[]},r.FL3=function(t,e){if(!e)return 0;var i=r.FG39(e),s=0;switch(t){case 101:s=i.atk;break;case 102:s=i.def;break;case 103:s=i.hp}return s},r.isMaxLx=function(t){var e=r.FG39(t);if(e)return e.exp<=0},r.FL66=function(){return r.init.openLv.value||0},r.FE19=function(t){var e=[],i=r.intimacy[t];return i&&(e=P7.str2kv(i.attr),null!=i.breakcost&&(e=P7.mergekvs(e,[{k:r.breakAttrId,v:i.breakcost}]))),e},r.FF25=function(t){return t==MarriageTileVo.SOW?"com_huatianzhonzi_png":t==MarriageTileVo.WATER?"com_huatianjiaoshui_png":t==MarriageTileVo.HARVEST?"com_huatianliandao_png":(MarriageTileVo.NONE,"")},r.FL4=function(t,e){for(var i=0,s=1;s<=t;s++){var o=r.intimacy[s];o&&(i+=o.cost)}return i+=e},r.grades={},r.gradeOld={},r.prices={},r.blessingPrices={},r.upgradeList={},r.blessingGrade={},r.intimacy={},r.growthTime=0,r.interval=4095,r.watering=0,r.waterQuantity=0,r.loveNum=0,r.experience=0,r.commonOL=0,r.experienceOL=0,r.closeReward=[],r.breakAttrId=2001,r.lovetips=[],r.lovetipsdelay=1e3,r}();__reflect(I7.prototype,"I7");var I9=function(){function t(){}return t.A32=10001,t.A33=10002,t.A22=10003,t.A23=10004,t.A1=10005,t.A2=10006,t.A12=10007,t.A13=10008,t.A30=10009,t.A31=10010,t.A4=10011,t.A5=10012,t.A25=10013,t.A18=10014,t.A26=10015,t.A34=10016,t.A28=10017,t.A14=10018,t.A8=10019,t.A9=10020,t.A43=10021,t.A39=10022,t.A45=10023,t.A42=10024,t.A44=10025,t.A40=10026,t.A41=10027,t.A36=10028,t.A37=10029,t.A38=10030,t.A35=10031,t.A29=20001,t.A27=20002,t.A6=20003,t.A3=20004,t.A19=20005,t.A15=20006,t.A16=20007,t.A11=20008,t.A24=20009,t.A20=20010,t.A10=20011,t.A7=20012,t.A21=20013,t.A17=20014,t}();__reflect(I9.prototype,"I9");var TC27=function(i){function t(){var t=i.call(this)||this,e=new TF45(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.E10),e.aLV(O7.B29),e.aLV(O7.D26),e.aLV(O7.I64),e.aLV(O7.I66),e.aLV(O7.I85),e.aLV(O7.I4),e.aLV(O7.F40),e.aLV(O7.B50),e.aLV(O7.E73),App.VM.register(O7.E73,"MarriageMainView",t,K17.UI_Main),App.VM.register(O7.D27,"MarriageNoticeView",t,K17.UI_Tips_Top),App.VM.register(O7.F97,"MarriageAskView",t,K17.UI_Popup),t.rgF(I9.A29,t.GI3,t),t.rgF(I9.A27,t.GG23,t),App.VM.register(O7.A86,"MarriageBridePriceView",t,K17.UI_Popup),t.rgF(I9.A6,t.GA99,t),t.rgF(I9.A3,t.GA68,t),App.VM.register(O7.D25,"MarriageCongraView",t,K17.UI_Popup),t.rgF(I9.A19,t.GD94,t),t.rgF(I9.A15,t.GC96,t),App.VM.register(O7.C55,"MarriageFriendsView",t,K17.UI_Main_TOP),t.rgF(I9.A16,t.GC97,t),t.rgF(I9.A11,t.GC9,t),App.VM.register(O7.B29,"MarriageHouseInfoView",t,K17.UI_Main_TOP),t.rgF(I9.A10,t.GB39,t),t.rgF(I9.A7,t.GB1,t),App.VM.register(O7.E10,"MarriageHouseView",t,K17.UI_Main_TOP),t.rgF(I9.A24,t.GE84,t),t.rgF(I9.A20,t.GD95,t),App.VM.register(O7.D26,"MarriageSelectView",t,K17.UI_Main_TOP),t.rgF(I9.A21,t.GD96,t),t.rgF(I9.A17,t.GC98,t),App.VM.register(O7.F40,"MarriageFarmView",t,K17.UI_Main_TOP),App.VM.register(O7.B50,"MarriageHappinessView",t,K17.UI_Popup),t.proxy=new TF46(t),t.rgF(I9.A32,t.GP48,t),t.rgF(I9.A33,t.GP49,t),t.rgF(I9.A22,t.GI1,t),t.rgF(I9.A23,t.GI2,t),t.rgF(I9.A1,t.GC7,t),t.rgF(I9.A2,t.GC8,t),t.rgF(I9.A12,t.GG20,t),t.rgF(I9.A13,t.GG21,t),t.rgF(I9.A30,t.GN59,t),t.rgF(I9.A31,t.GN60,t),t.rgF(I9.A4,t.GC94,t),t.rgF(I9.A5,t.GC95,t),t.rgF(I9.A25,t.GJ95,t),t.rgF(I9.A18,t.GG19,t),t.rgF(I9.A26,t.GJ94,t),t.rgF(I9.A34,t.GP47,t),t.rgF(I9.A28,t.GL71,t),t.rgF(I9.A14,t.GG22,t),t.rgF(I9.A8,t.GD92,t),t.rgF(I9.A9,t.GD93,t),t.rgF(I9.A45,t.proxy.plant,t.proxy),t.rgF(I9.A43,t.proxy.water,t.proxy),t.rgF(I9.A44,t.proxy.harvest,t.proxy),t.rgF(I9.A38,t.proxy.ZHH17,t.proxy),t}return __extends(t,i),t.prototype.GP47=function(t){if(200==t.head.state){var e=TF83.getYm();this.gtM().ZC91(t.body),App.CM.apF(O6.B42,I9.A29,null,2,e,t.body.grade)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ94=function(t){if(200==t.head.state){var e=this.gtM();e.nData.push(t.body),e.xitei+=1,e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG19=function(t){200==t.head.state?this.gtM().ZE38(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ95=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC94=function(t){this.proxy.GC94(t)},t.prototype.GC95=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN59=function(){this.proxy.GN59()},t.prototype.GN60=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG20=function(t,e,i){this.proxy.GG20(t,e,i)},t.prototype.GG21=function(t){200==t.head.state?(App.CM.apF(O6.B42,I9.A15),P18.sDP(O3.tr(1820))):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC7=function(t,e){this.proxy.GC7(t,e),1==e?TF83.FB33():2==e&&TF83.FD23()},t.prototype.GC8=function(t){200==t.head.state||App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP48=function(){return this.proxy.GP48()},t.prototype.GP49=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI1=function(t,e){this.proxy.GI1(t,e)},t.prototype.GI2=function(t){200==t.head.state?(P18.sDP(O3.tr(5681)),App.CM.apF(O6.B42,I9.A17),App.CM.apF(O6.B42,I9.A3)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL71=function(t){200==t.head.state?(TF83.FL85(),this.gtM().notify()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG22=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD92=function(){this.proxy.GD92()},t.prototype.GD93=function(t){200==t.head.state?(this.gtM().ZC91(t.body),this.GB1()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI3=function(t,e,i,s){App.VM.open(O7.F97,t,e,i,s)},t.prototype.GG23=function(){App.VM.close(O7.F97)},t.prototype.GA99=function(t){App.VM.open(O7.A86,t)},t.prototype.GA68=function(){App.VM.close(O7.A86)},t.prototype.GD94=function(t){App.VM.open(O7.D25,t)},t.prototype.GC96=function(){App.VM.close(O7.D25)},t.prototype.GC97=function(){App.VM.open(O7.C55)},t.prototype.GC9=function(){App.VM.close(O7.C55)},t.prototype.GE84=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];(t=App.VM).open.apply(t,[O7.E73].concat(e))},t.prototype.GD95=function(){App.VM.close(O7.E10)},t.prototype.GB39=function(){App.VM.open(O7.B29)},t.prototype.GB1=function(){App.VM.close(O7.B29)},t.prototype.GD96=function(){var t=I7.FL66();if(App.CM.gtM(O6.B82).avatarInfo.l<t){var e=K18.init.commonDesc1.value;P18.sDP(M18.format(e,[t]))}else App.VM.open(O7.D26)},t.prototype.GC98=function(){App.VM.close(O7.D26)},t.prototype.gtM=function(){return i.prototype.gtM.call(this)},t.prototype.waterRes=function(t){if(200==t.head.state){var e=App.VM.gOV(O7.F40),i=this.gtM();if(e)for(var s in t.body.seed)e.ZU73(s,t.head.protoType),e.tips(t.head.protoType,s);i.ZC91(t.body)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.sowRes=function(t){if(200==t.head.state){var e=App.VM.gOV(O7.F40);if(e)for(var i in t.body.seed)e.ZU73(i,t.head.protoType);this.gtM().ZC91(t.body)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX79=function(e){if(200==e.head.state){var i=App.VM.gOV(O7.F40);i&&e.body.pos.split(",").forEach(function(t){i.ZU73(t,e.head.protoType)}),this.gtM().ZC91(e.body,!0,e.head.protoType),P5.sIs(e.body.ob)}else App.CM.apF(O6.B87,L10.A4,e)},t.prototype.GX80=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT43=function(t){if(200==t.head.state){var e=this.gtM(),i=I7.FL4(e.lv,e.in);e.ZC91(t.body,!1);var s=I7.FL4(e.lv,e.in)-i;0<s&&e.notify(t.head.protoType,s)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR46=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE85=function(t){200==t.head.state?(this.gtM().ZC91(t.body),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TC27.prototype,"TC27");var TF45=function(i){function t(t){var e=i.call(this,t)||this;return e.mn=0,e.ce=0,e.xitei=0,e.nData=[],e.yet=[],e.lv=0,e.in=0,e.seed={},e}return __extends(t,i),t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t.prototype.ZC91=function(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(this.mn=P7.getValue(t.mn,this.mn),t.house&&(this.house||(this.house=new MarriageHouseVo),this.house.ZC91(t.house)),t.fere&&(this.fere||(this.fere=new MarriageFereVo),this.fere.ZC91(t.fere)),t.he){this.he||(this.he=[]);for(var o=0;o<t.he.length;o++)if(t.he[o]){var r=new MarriageExpVo;r.ZC91(t.he[o]),20<=this.he.length&&this.he.splice(0,1),this.he.push(r)}this.he.sort(function(t,e){return e.time-t.time})}for(var n in(t.ce||0==t.ce)&&(this.ce=P7.getValue(t.ce,this.ce)),(t.ym||0==t.ym)&&(this.ym=P7.getValue(t.ym,this.ym)),this.yet=P7.getValue(t.yet,this.yet),this.lv=P7.getValue(t.lv,this.lv),this.in=P7.getValue(t.in,this.in),t.seed)this.seed[n]||(this.seed[n]=new MarriageTileVo),this.seed[parseInt(n)].update(t.seed[n]);if(t.pos)for(var a=0,h=t.pos.split(",");a<h.length;a++){var p=h[a];delete this.seed[p]}e&&this.notify.apply(this,i)},t.prototype.FI74=function(t){this.temporaryData=t,this.notify()},t.prototype.FG40=function(){this.temporaryData=null},t.prototype.FB33=function(){this.proposalList.shift();for(var t=0;t<this.proposalList.length;t++)(!this.proposalList[t]||this.proposalList[1].FJ24()<=0)&&this.proposalList.splice(t,1);this.proposalList[0]&&App.CM.apF(O6.B42,I9.A29,this.proposalList[0])},t.prototype.FD23=function(){this.proposalList=null},t.prototype.ZE38=function(t){if(t){this.proposalList||(this.proposalList=[]);var e=new MarriageProposalVo;e.ZC91(t),this.proposalList.push(e)}this.proposalList[0]&&this.proposalList.length&&App.CM.apF(O6.B42,I9.A29,this.proposalList[0])},t.prototype.FHH56=function(){if(!this.house)return 0;var t=0;1<=this.house.type&&(t=K18.FJ32("103").power*I7.FL3(103,this.house.hid));var e=0;2<=this.house.type&&(e=K18.FJ32("102").power*I7.FL3(102,this.house.hid));var i=0;if(3<=this.house.type){var s=K18.FJ32("101").power;i=I7.FL3(101,this.house.hid)*s}return Math.floor(t+e+i+this.house.addSc)},t.prototype.getExpRedNum=function(){if(!this.fere)return 0;var t=0;return 0<this.ce&&(t+=1),t},t.prototype.ZL51=function(){if(!this.fere)return 0;if(this.house){for(var t=this.house.hid,e=I7.FJ98(t),i=0;i<e.length;i++){var s=parseInt(e[i][0]),o=parseInt(e[i][1]);if(N12.giC(s)<o)return 0}return 1}return 0},t.prototype.FL35=function(){return this.getExpRedNum()+this.ZL51()+this.getCanGetNum()+this.getFarmDot()+THH27.FF46()},t.prototype.getFarmDot=function(){var t=0;if(this.fere)for(var e=1;e<=9;e++){var i=this.seed[e];if(i)switch(i.state){case MarriageTileVo.SOW:case MarriageTileVo.WATER:case MarriageTileVo.HARVEST:t+=1}else t++}return t},t.prototype.ZJ22=function(t){return 0<=this.yet.indexOf(t)?J13.A2:this.lv>=t?J13.A3:J13.A1},t.prototype.getCanGetNum=function(){for(var t=0,e=0,i=I7.closeReward;e<i.length;e++){var s=i[e];this.ZJ22(s.target)==J13.A3&&(t+=1)}return t},t}(TG79);__reflect(TF45.prototype,"TF45");var TF46=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.O45,e.GI2,e),e.rSM(P4.D99,e.GC8,e),e.rSM(P4.K21,e.GG21,e),e.rSM(P4.T70,e.GN60,e),e.rSM(P4.F18,e.GC95,e),e.rSM(P4.Q37,e.GJ95,e),e.rSM(P4.M39,e.GG19,e),e.rSM(P4.Q38,e.GJ94,e),e.rSM(P4.U84,e.GP47,e),e.rSM(P4.S15,e.GL71,e),e.rSM(P4.K22,e.GG22,e),e.rSM(P4.G85,e.GD93,e),e.rSM(P4.K24,t.waterRes,t),e.rSM(P4.O47,t.sowRes,t),e.rSM(P4.G87,t.GX79,t),e.rSM(P4.G89,t.GE85,t),e.rSM(P4.F19,t.GX80,t),e.rSM(P4.G90,t.GX80,t),e.rSM(P4.O48,t.GT43,t),e.rSM(P4.I52,t.GR46,t),e}return __extends(t,i),t.prototype.GD93=function(t){this.apF(I9.A9,t)},t.prototype.GD92=function(){var t={type:P4.G84,body:{}};this.sSM(t)},t.prototype.GG22=function(t){this.apF(I9.A14,t)},t.prototype.GP48=function(){var s=this;return new Promise(function(e,t){var i={type:P4.U82,body:{}};s.rSMO(P4.U83,function(t){s.apF(I9.A33,t),e("加载婚姻数据完成")},s),s.sSM(i)})},t.prototype.GI1=function(t,e){var i={type:P4.O44,body:{targeId:t,grade:e}};this.sSM(i)},t.prototype.GC7=function(t,e){var i={type:P4.D98,body:{targeId:t,type:e}};this.sSM(i)},t.prototype.GG20=function(t,e,i){var s={type:P4.K20,body:{targeId1:t,targeId2:e,grade:i}};this.sSM(s)},t.prototype.GN59=function(){var t={type:P4.T69,body:{}};this.sSM(t)},t.prototype.GC94=function(t){var e={type:P4.F17,body:{type:t}};this.sSM(e)},t.prototype.GI2=function(t){this.apF(I9.A23,t)},t.prototype.GC8=function(t){this.apF(I9.A2,t)},t.prototype.GG21=function(t){this.apF(I9.A13,t)},t.prototype.GN60=function(t){this.apF(I9.A31,t)},t.prototype.GC95=function(t){this.apF(I9.A5,t)},t.prototype.GJ95=function(t){this.apF(I9.A25,t)},t.prototype.GG19=function(t){this.apF(I9.A18,t)},t.prototype.GJ94=function(t){this.apF(I9.A26,t)},t.prototype.GP47=function(t){this.apF(I9.A34,t)},t.prototype.GL71=function(t){this.apF(I9.A28,t)},t.prototype.ZHH17=function(t){var e={type:P4.G88,body:{lv:t}};this.sSM(e)},t.prototype.water=function(t){var e={type:P4.K23,body:{pos:t}};this.sSM(e)},t.prototype.harvest=function(t){var e={type:P4.G86,body:{pos:t}};this.sSM(e)},t.prototype.plant=function(t){var e={type:P4.O46,body:{pos:t}};this.sSM(e)},t}(TG80);__reflect(TF46.prototype,"TF46");var TF83=function(){function t(){}return t.isMarry=function(){return!!App.CM.gtM(O6.B42).house},t.FI73=function(){return App.CM.gtM(O6.B42).temporaryData},t.FI74=function(t){App.CM.gtM(O6.B42).FI74(t)},t.FG40=function(){App.CM.gtM(O6.B42).FG40()},t.FD23=function(){App.CM.gtM(O6.B42).FD23()},t.FB33=function(){App.CM.gtM(O6.B42).FB33()},t.FI75=function(){var t=App.CM.gtM(O6.B42);return t.house?t.house.type:1},t.getHouse=function(){var t=App.CM.gtM(O6.B42);if(t.house)return t.house},t.FJ99=function(){var t=App.CM.gtM(O6.B42);return t.fere?t.fere.name:null},t.getFere=function(){return App.CM.gtM(O6.B42).fere},t.FL85=function(){App.CM.gtM(O6.B42).fere=null},t.getCe=function(){return App.CM.gtM(O6.B42).ce},t.getHe=function(){return App.CM.gtM(O6.B42).he||[]},t.getYm=function(){return App.CM.gtM(O6.B42).ym},t.FL35=function(){return App.CM.gtM(O6.B42).FL35()},t.FHH56=function(){return App.CM.gtM(O6.B42).FHH56()},t.FK53=function(){return 0<App.CM.gtM(O6.B84).redPoint+t.FL35()+TG73.FL35()},t}();__reflect(TF83.prototype,"TF83");var MarriageAskView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MarriageAskSkin",i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ItemIcon,this.sayNoBtn.label=O3.tr(5034),this.sayYesBtn.label=O3.tr(5035),this.comfirmBtn.label=O3.tr(5036)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.data=t[0],this.type=t[1]||1,this.ym=t[2],this.grade=t[3],this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.sayNoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.noHandler,this),this.sayYesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yesHandler,this),this.comfirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),!this.timerHandler&&this.data?(this.timerHandler=App.K16.doTimer(1e3,this.data.FJ24(),this.GY14,this,this.closeSelf),this.grade=this.data.type,this.cdLabel.visible=!0):this.cdLabel.visible=!1,this.updateViews()},t.prototype.GY14=function(){this.cdLabel.text=P6.FJ11(1e3*this.data.FJ24(),1)},t.prototype.close=function(){this.data&&!this.isYes&&App.CM.apF(O6.B42,I9.A1,this.data.aid,2),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.sayNoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.noHandler,this),this.sayYesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.yesHandler,this),this.comfirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null),this.itemCollection.removeAll()},t.prototype.noHandler=function(){App.CM.apF(O6.B42,I9.A1,this.data.aid,2),this.closeSelf()},t.prototype.yesHandler=function(){this.isYes=!0,App.CM.apF(O6.B42,I9.A1,this.data.aid,1),this.closeSelf()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t)},t.prototype.ZC94=function(t){this.updateViews()},t.prototype.updateViews=function(){var t,e;switch(1==this.type?(this.tipsLabel1.visible=!0,this.tipsLabel1.textFlow=M18.HTP.parser(O3.tr(1800,this.data.name)),this.tipsLabel2.textFlow=M18.HTP.parser(O3.tr(1801)),this.sayNoBtn.visible=!0,this.sayYesBtn.visible=!0,this.comfirmBtn.visible=!1,t=this.data.name,e=this.data.aid):2==this.type&&(this.tipsLabel1.visible=!1,this.tipsLabel2.textFlow=M18.HTP.parser(O3.tr(1805)),this.sayNoBtn.visible=!1,this.sayYesBtn.visible=!1,this.comfirmBtn.visible=!0,t=TF83.getFere().name,e=TF83.getFere().aid),this.grade){case 1:this.titleImg.source="v1_fonts_jiepujiehun_png";break;case 2:this.titleImg.source="v1_fonts_haohuajiehun_png";break;case 3:this.titleImg.source="v1_fonts_diwangjiehun_png"}var i=App.CM.gtM(O6.B82);this.nameLabel1.text=t,this.nameLabel2.text=i.avatarInfo.n,this.head1||(this.head1=new AvatarHead,this.headGroup1.addChild(this.head1));var s={id:e,name:t};this.head1.setData(s);var o=App.CM.gtM(O6.B84).getFanById(e);o&&this.head1.setIcon(o.ic),this.head2||(this.head2=new AvatarHead,this.headGroup2.addChild(this.head2));var r={id:i.avatarInfo.id,name:i.avatarInfo.n};this.head2.setData(r),this.head2.setIcon(O4.getHead());var n=I7.FB81(this.grade,this.ym,.85);this.itemCollection.replaceAll(n);var a=this.itemList.layout,h=(this.itemScroller.width-73.1*n.length)/(n.length-1);a.gap=h<10?10:h},t.prototype.closeSelf=function(){App.CM.apF(O6.B42,I9.A27)},t}(BaseEuiView);__reflect(MarriageAskView.prototype,"MarriageAskView");var MarriageBridePriceView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MarriageBridepriceSkin",i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemCollection=new eui.ArrayCollection,this.priceList.dataProvider=this.itemCollection,this.priceList.itemRenderer=MarriagePriceItem,this.confirmBtn.label=O3.tr(5037),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5038))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.data=t[0]||{},this.list=[{type:1},{type:2},{type:3}],this.itemCollection.replaceAll(this.list),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT20,this),this.priceList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.close=function(){this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT20,this),this.priceList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listHandler,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemCollection.removeAll()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t)},t.prototype.listHandler=function(t){this.type=this.list[t.itemIndex].type},t.prototype.ZC94=function(t){},t.prototype.ZT20=function(){this.type?App.CM.apF(O6.B42,I9.A22,this.data.nId,this.type):P18.sDP(O3.tr(5682))},t.prototype.closeSelf=function(){App.CM.apF(O6.B42,I9.A3)},t}(BaseEuiView);__reflect(MarriageBridePriceView.prototype,"MarriageBridePriceView");var MarriageCongraView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName="MarriageCongraSkin",i}return __extends(t,r),t.prototype.initData=function(){r.prototype.initData.call(this)},t.prototype.initUI=function(){r.prototype.initUI.call(this);for(var t=1;t<=3;t++){var e=I7.FE17(t);e&&(this["costLabel"+t].text=e[1]);var i=I7.FE18(t);if(i){var s=N12.gID(i[0]);if(s){var o={itemData:{data:s,ct:parseInt(i[1])},isBottom:!1};this["icon"+t].data=o}}}this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5039)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5040)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5041)),this.congraBtn1.label=O3.tr(5042),this.congraBtn2.label=O3.tr(5042),this.congraBtn3.label=O3.tr(5042)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t),this.data=t[0],this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.congraBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.congraBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.congraBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.GX5()},t.prototype.close=function(){this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.congraBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.congraBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.congraBtn3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this);var t=App.CM.gtM(O6.B42);0<t.xitei&&(t.xitei-=1,App.CM.apF(O6.B42,I9.A19,t.nData[t.xitei]),t.notify())},t.prototype.onHandler=function(t){var e=parseInt(t.target.name),i=I7.FE17(e),s=N12.FK5(i[0]);App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(1825,i[1]+s)),this,this.sendGift,[e])},t.prototype.sendGift=function(t){App.CM.apF(O6.B42,I9.A12,this.data.pid,this.data.aid,t)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t)},t.prototype.ZC94=function(t){this.GX5()},t.prototype.GX5=function(){this.tipsLabel.textFlow=M18.HTP.parser(O3.tr(1816,this.data.name,this.data.pn))},t.prototype.closeSelf=function(){App.CM.apF(O6.B42,I9.A15)},t}(BaseEuiView);__reflect(MarriageCongraView.prototype,"MarriageCongraView");var MarriageFarmTileView=function(e){function t(){var t=e.call(this)||this;return t.isPlayAnimation=!1,t.skinName="MarriageFarmTileSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.touchChildren=!0,this.imgHit.alpha=.01,this.pos=parseInt(this.name),this.imgState.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.imgHit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.imgHit.pixelHitTest=!0,this.pBarField.slideDuration=0,this.pBarField.maximum=I7.growthTime,this.pBarField.labelFunction=function(t,e){return P6.FJ11(1e3*t,11)}},t.prototype.set=function(t){this.info=t,this.update()},t.prototype.update=function(){if(this.pBarField.visible=this.imgState.visible=!1,!this.isPlayAnimation){var t=this.state;switch(this.imgState.source=I7.FF25(t),t){case MarriageTileVo.WATER:case MarriageTileVo.HARVEST:case MarriageTileVo.SOW:this.imgState.visible=!0;break;case MarriageTileVo.NONE:this.pBarField.visible=!0,this.pBarField.value=this.info.harvestTime;case MarriageTileVo.BAN:}this.updateImage()}},t.prototype.updateImage=function(){var e=this,t=[,"wdsg_xiaoc_longgu_02","wdsg_yezi_longgu_03","wdsg_hua_longgu_01"],i=t[this.stage_];this.gImg.getChildByName(i)&&this.stage_||(t.forEach(function(t){return t&&App.THH32.rEf(e.gImg,t)}),i&&App.THH32.aUE(this.gImg,i))},Object.defineProperty(t.prototype,"state",{get:function(){return this.info?this.info.state:MarriageTileVo.SOW},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stage_",{get:function(){return this.info?this.info.stage:0},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){if(!this.isPlayAnimation){var t=this.state,e=void 0;t==MarriageTileVo.SOW?e=I9.A45:t==MarriageTileVo.WATER?e=I9.A43:t==MarriageTileVo.HARVEST?e=I9.A44:t==MarriageTileVo.NONE||t==MarriageTileVo.BAN&&console.log("需要结婚后才能操作农田"),e&&App.CM.apF(O6.B42,e,this.pos)}},t.prototype.remove=function(){this.imgState.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.imgHit.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);for(var t=0;t<this.gImg.numChildren;t++)App.THH32.rEf(this.gImg,this.gImg.getChildAt(t).name)},t.prototype.popTips=function(t,e){var i=this,s=(new MarriageFarmTipsView).set(t,e);this.gTips.addChild(s),egret.Tween.get(s).to({y:-70,alpha:.8},900).call(function(){i.gTips.removeChild(s),egret.Tween.removeTweens(s)})},t.prototype.ZU73=function(t,e){var i=this;if(!this.isPlayAnimation){this.imgState.visible=this.pBarField.visible=!1,this.isPlayAnimation=!0;var s=void 0;t==MarriageTileVo.SOW?s="wdsg_bozhong_002":t==MarriageTileVo.WATER?s="wdsg_jiaohua_001":t==MarriageTileVo.HARVEST&&(s="wdsg_caihua_001"),s&&App.THH32.aUE(this.gEff,s,0,0,1,null,function(){i.isPlayAnimation=!1,e&&e(t),i.update()},null,null,t==MarriageTileVo.HARVEST?"bf_1":void 0)}},t}(eui.Component);__reflect(MarriageFarmTileView.prototype,"MarriageFarmTileView");var MarriageFarmTipsView=function(e){function t(){var t=e.call(this)||this;return t.skinName="MarriageFarmTipsSkin",t}return __extends(t,e),t.prototype.set=function(t,e){return"string"==typeof t?this.lab.text=t:this.lab.textFlow=t,this.imgIcon.visible=!!e,this.imgIcon.source=e||"",this},t}(eui.Component);__reflect(MarriageFarmTipsView.prototype,"MarriageFarmTipsView");var MarriageFarmView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="MarriageFarmSkin",i}return __extends(t,o),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B42)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.btnHappiness.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM6,this),this.addEventListener("HELP",this.openHelpView,this),this.labTr7389.textFlow=O3.tr2(7389),this.labTr7391.textFlow=O3.tr2(7391),this.labTr7392.textFlow=O3.tr2(7392),this.pBarField.slideDuration=0,this.labOnline.textFlow=O3.tr2(7393,Math.floor(I7.commonOL/60),I7.experienceOL),this.pBarField.labelFunction=function(t,e){return 1==e?O3.tr(7405):t+"/"+e}},t.prototype.open=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o.prototype.open.apply(this,e);var s=this.model;this.GX5(s),this.updatePBar(s),this.updateTips(),App.K16.doTimer(I7.lovetipsdelay,0,this.updateTips,this),this.timer=this.timer||App.K16.doTimer(1e3,0,function(){return t.updateTiles(t.model)},this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeEventListener("HELP",this.openHelpView,this),this.btnShop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.btnHappiness.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM6,this),App.K16.remove(this.updateTips,this),App.K16.rBH(this.timer),this.timer=null;for(var i=0;i<this.gTiles.numChildren;i++)this.gTiles.getChildAt(i).remove();o.prototype.close.apply(this,t)},t.prototype.uBM=function(t,e,i){t instanceof TF45?(this.GX5(t),e!=P4.G87&&(e==P4.O48&&i&&this.updateExpLab(i),this.updatePBar(t))):(t instanceof THH14||t instanceof TG12)&&this.GX5(this.model)},t.prototype.GX5=function(t){this.updateAttr(t),this.labLv.textFlow=O3.tr2(7388,t.lv),this.updateTiles(t),this.btnHappiness.imgNew.visible=0<t.getCanGetNum(),this.btnShop.imgNew.visible=0<+THH27.FF46()},t.prototype.updatePBar=function(t){var e=I7.intimacy[t.lv+1],i=!e;this.pBarField.maximum=i?1:e.cost,this.pBarField.value=i?1:t.in},t.prototype.updateTiles=function(t){for(var e=0;e<this.gTiles.numChildren;e++){var i=this.gTiles.getChildAt(e);i.set(t.seed[i.name])}},t.prototype.updateAttr=function(t){var e,i=t.lv+1,s=!I7.intimacy[i],o=I7.FE19(i);e=0==t.lv?o.map(function(t){var e=t.k;t.v;return{k:e,v:0}}):I7.FE19(t.lv);var r,n=((r={})[I7.breakAttrId]={id:I7.breakAttrId,name:O3.tr(7390),show:0,initAttr:0,growAttr:0,power:0},r);this.labNowAttr.text=P7.FM5(e,void 0,{percentTemplate:"$0+$1%",template:"$0:$1"},n),this.labNextAttr.text=s?O3.tr(7405):P7.FM5(o,void 0,{percentTemplate:"+$1%",template:"$1"},n)},t.prototype.updateTips=function(){this.labTips.textFlow=O3.tr2(I7.lovetips[Math.floor(I7.lovetips.length*Math.random())])},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClickShop=function(){App.VM.open(O7.HH98,O7.E72,P12.A28)},t.prototype.openHelpView=function(){var t={title:O3.tr(1831),content:O3.tr(7394)};App.CM.apF(O6.C18,O10.A24,t)},t.prototype.ZM6=function(){App.VM.open(O7.B50)},t.prototype.tips=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];t==P4.K24?this.gTiles.getChildByName(e).popTips(O3.tr2(7413,I7.watering)):P4.G87},t.prototype.ZE39=function(t,e,i){var s=this,o=new eui.Image("wdsg_xianhuatubiao_png");t.addChild(o),o.x=e,o.y=i,o.anchorOffsetX=21,o.anchorOffsetY=21,o.scaleX=o.scaleY=0;var r=this.pBarField.gEff,n=new egret.Point(0,0),a=P7.FJ14(n,o,r);r.addChild(o),o.x=a.x,o.y=a.y,egret.Tween.get(o).wait(200).to({scaleX:1.25,scaleY:1.25},100).to({scaleX:1,scaleY:1},200).wait(100).to({x:1,y:1},800).call(function(){egret.Tween.removeTweens(o),App.TF56.ZJ66(o),App.THH32.aUE(r,"wdsg_caihua_001",0,0,1,null,function(){return s.updatePBar(s.model)},null,null,"bf_2"),s.updateExpLab(I7.experience)})},t.prototype.ZU73=function(t,e){var i=this.gTiles.getChildByName(t);e==P4.G87?(i.ZU73(MarriageTileVo.HARVEST),this.ZE39(i.gEff,0,0)):e==P4.K24?i.ZU73(MarriageTileVo.WATER):e==P4.O47&&i.ZU73(MarriageTileVo.SOW)},t.prototype.updateExpLab=function(t){var e=this;this.lbAddExp.text="+"+t,egret.Tween.get(this.lbAddExp).to({visible:!0}).to({y:-40},200).call(function(){e.lbAddExp.y=-24,e.lbAddExp.visible=!1})},t}(BaseEuiView);__reflect(MarriageFarmView.prototype,"MarriageFarmView");var MarriageFriendItem=function(i){function t(){var t=i.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,i),t.prototype.childrenCreated=function(){i.prototype.createChildren.call(this),this.lbTip1.text=O3.tr(5886),this.selectBtn.label=O3.tr(4352)},t.prototype.dataChanged=function(){i.prototype.dataChanged.call(this),this.lbName.text=this.data.sName,this.imgIcon.setIcon(this.data.ic);var t=this.lbName.width;this.imgV.x=121+t,this.lbLv.text=O3.tr(2620)+this.data.nLv,this.lbPower.text=O3.tr(2621)+this.data.nPower;var e="";0==this.data.bOnlineState?(this.selectBtn.visible=!1,this.tipsLabel.visible=!0,this.tipsLabel.text=O3.tr(1802),e=O3.tr(2622),this.lbState.textColor=parseInt("0xff0000")):(e=(0==this.data.bStarState?(this.selectBtn.visible=!1,this.tipsLabel.visible=!0,this.tipsLabel.text=O3.tr(1803)):1==this.data.fere?(this.selectBtn.visible=!1,this.tipsLabel.visible=!0,this.tipsLabel.text=O3.tr(1824)):(this.selectBtn.visible=!0,this.tipsLabel.visible=!1),O3.tr(2623)),this.lbState.textColor=parseInt("0x0090ff")),this.imgIcon.x=0,this.imgStar.visible=!0,1==this.data.bStarState?this.imgStar.source="v1_img_star_1_png":0==this.data.bStarState?this.imgStar.source="v1_img_star3_png":(this.imgIcon.y=10,this.imgStar.visible=!1),this.lbState.text=e},t.prototype.onWarnSelect=function(){TF83.FI74(this.data),App.CM.apF(O6.B42,I9.A11)},t.prototype.onAddToStage=function(){this.selectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWarnSelect,this)},t.prototype.onRemoveStage=function(){this.selectBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWarnSelect,this)},t}(eui.ItemRenderer);__reflect(MarriageFriendItem.prototype,"MarriageFriendItem");var MarriageFriendsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.curPageNum=1,i.allData=[],i.list=[],i.itemsNum=0,i.skinName="MarriageFriendsSkin",i.itemCollection=new eui.ArrayCollection,i.itemList.dataProvider=i.itemCollection,i.itemList.itemRenderer=MarriageFriendItem,i.dlg.ZM69(i.oCC,i),i.dlg.ZQ14(i.oCC,i),i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.title=O3.tr(5746)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV42,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR23,this),this.dlg.ZQ16(this.openHelpView,this),this.ZM7()},t.prototype.close=function(){this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV42,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR23,this),this.itemCollection.removeAll()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t),t instanceof TG30&&this.ZE99(t)},t.prototype.ZC94=function(t){},t.prototype.ZE99=function(t){this.allData=t.myFollowList,this.updateList()},t.prototype.ZM7=function(){App.CM.gtM(O6.B84);App.CM.apF(O6.B84,L14.A3)},t.prototype.oCC=function(){App.CM.apF(O6.B42,I9.A11)},t.prototype.ZV42=function(){1!=this.curPageNum&&(this.curPageNum=this.curPageNum-1,this.updateList())},t.prototype.ZR23=function(){this.curPageNum!=this.pageNum&&(this.curPageNum=this.curPageNum+1,this.updateList())},t.prototype.updateList=function(){this.ZT21(),this.itemCollection.replaceAll(this.list),this.ZM92()},t.prototype.ZT21=function(){var t=5*(this.curPageNum-1),e=Math.min(t+5,this.allData.length);this.list=this.allData.slice(t,e),this.pageNum=Math.ceil(this.allData.length/5)},t.prototype.ZM92=function(){0==this.pageNum&&(this.pageNum=1),this.pageLabel.text=this.curPageNum+"/"+this.pageNum},t.prototype.openHelpView=function(){var t={title:O3.tr(1831),content:I7.init.help.value};App.CM.apF(O6.C18,O10.A24,t)},t}(BaseEuiView);__reflect(MarriageFriendsView.prototype,"MarriageFriendsView");var MarriageHappinessItemView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.lbTitle.textFlow=(new egret.HtmlTextParser).parser(O3.tr(7398,this.data.conf.target))},e.prototype.onClickGet=function(){App.CM.apF(O6.B42,I9.A38,this.data.conf.target)},e}(DoubleRingDrawQuestionItem);__reflect(MarriageHappinessItemView.prototype,"MarriageHappinessItemView");var MarriageHappinessView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=CatchFishRewardSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:MarriageHappinessItemView,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(7395)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open();var i=App.CM.gtM(O6.B42);this.GX5(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.GX5(t)},t.prototype.GX5=function(e){this.lbCatchNum.textFlow=O3.tr2(7397,e.lv),this.myListView.rfL(I7.closeReward.map(function(t){return{conf:t,state:e.ZJ22(t.target)}}).sort(function(t,e){return t.state-e.state}))},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(MarriageHappinessView.prototype,"MarriageHappinessView");var MarriageHouseInfoView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MarriageHouseInfoSkin",i.itemCollection=new eui.ArrayCollection,i.itemList.dataProvider=i.itemCollection,i.itemList.itemRenderer=MarriageHouseItem,i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.getBtn.label=O3.tr(5043),this.dlg.title=O3.tr(5044)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ14(this.closeSelf,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.updateViews()},t.prototype.close=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHandler,this),this.itemCollection.removeAll()},t.prototype.onHandler=function(){0!=TF83.getCe()?App.CM.apF(O6.B42,I9.A8):P18.sDP(O3.tr(5683))},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t)},t.prototype.ZC94=function(t){this.updateViews()},t.prototype.updateViews=function(){this.expLabel.textFlow=M18.HTP.parser(O3.tr(1826,TF83.getCe()));var t=TF83.getHe();this.itemCollection.replaceAll(t)},t.prototype.closeSelf=function(){App.CM.apF(O6.B42,I9.A7)},t}(BaseEuiView);__reflect(MarriageHouseInfoView.prototype,"MarriageHouseInfoView");var MarriageHouseItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this)},e.prototype.dataChanged=function(){switch(t.prototype.dataChanged.call(this),this.data.type){case 1:this.label1.textFlow=M18.HTP.parser(O3.tr(1823,this.data.exp))}this.label2.text=P6.FJ11(1e3*this.data.time,2)},e}(eui.ItemRenderer);__reflect(MarriageHouseItem.prototype,"MarriageHouseItem");var MarriageHouseView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.isAutoUpgrade=!1,i.isFinish=!0,i.sGN("release_marry"),i.skinName="MarriageHouseSkin",i.data=TF83.getHouse(),i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.pBarField.slideDuration=0,this.itemImg1.setImgSize({w:40,h:40}),this.itemImg2.setImgSize({w:40,h:40}),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4003)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4005)),this.cbBlank.label=O3.tr(3967),this.upgradeBtn.label=O3.tr(4059),this.autoUpgradeBtn.label=O3.tr(4060),this.addEventListener("HELP",this.openHelpView,this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.cbBlank.addEventListener(egret.Event.CHANGE,this.ZHH18,this),this.upgradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpgrade,this),this.autoUpgradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX82,this),this.divorceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDivorce,this),this.expBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExp,this),this.updateViews()},t.prototype.onExp=function(){App.CM.apF(O6.B42,I9.A10)},t.prototype.onDivorce=function(){App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(1821)),this,this.divorce)},t.prototype.divorce=function(){App.CM.apF(O6.B42,I9.A30)},t.prototype.onUpgrade=function(){TF83.FJ99()?this.timerHandler||this.reqUpgrade():P18.sDP(O3.tr(1822))},t.prototype.ZX82=function(){if(!TF83.FJ99())return P18.sDP(O3.tr(1822)),void this.ZX83();this.isAutoUpgrade?this.ZX83():(this.oldLv=this.data.hid,this.isAutoUpgrade=!0,this.autoUpgradeBtn.label=O3.tr(1819),this.timerHandler||(this.timerHandler=App.K16.doTimer(300,0,this.reqUpgrade,this)))},t.prototype.ZX83=function(){this.isAutoUpgrade=!1,this.autoUpgradeBtn.label=O3.tr(1818),this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.ZM8=function(){this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.close=function(){this.removeEventListener("HELP",this.openHelpView,this),this.cbBlank.removeEventListener(egret.Event.CHANGE,this.ZHH18,this),this.upgradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpgrade,this),this.autoUpgradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX82,this),this.divorceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDivorce,this),this.expBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onExp,this),this.ZX83(),this.objMyBoss&&(this.objMyBoss.destory(),this.objMyBoss=null),this.objFereBoss&&(this.objFereBoss.destory(),this.objFereBoss=null),egret.Tween.removeTweens(this.lbAddExp),egret.Tween.removeTweens(this.pBarField)},t.prototype.onHandler=function(){},t.prototype.setData=function(t){this.data=t,this.updateViews()},t.prototype.ZHH18=function(){this.isAuto=this.cbBlank.selected,TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t),t instanceof THH9&&this.updateRedNum(),t instanceof TG12&&this.updateRedNum()},t.prototype.updateViews=function(){var s=this;this.oldLv<this.data.hid&&this.ZX83();var t,e=this.data.FL84(),i=this.data.getExp();this.oldExp?this.oldExp!=i&&(t=this.oldExp<i?i-this.oldExp:this.oldMaxExp-this.oldExp+i,this.oldExp=i):(this.oldExp=i,this.oldMaxExp=e),I7.isMaxLx(this.data.hid)?(this.pBarField.labelFunction=function(t,e){return O3.tr(1463)},this.pBarField.maximum=100,this.pBarField.value=100):t&&0<t?this.littleAddExp():(this.pBarField.maximum=e,this.pBarField.value=i);var o,r=I7.FJ98(this.data.hid),n=1;r.forEach(function(t){var e=N12.gID(t[0]);s["itemImg"+n].setData(e),s.needItemNum=parseInt(t[1]);var i=N12.giC(t[0]);o=75002==t[0]?t[1]:i+"/"+t[1],s.needItemNum<=i?s["itemLabel"+n].textFlow=M18.HTP.parse(O3.tr(4001,o)):s["itemLabel"+n].textFlow=M18.HTP.parse(O3.tr(4002,o)),n+=1}),this.lvLabel.text=O3.tr(1812,this.data.hid),this.attrLabel1.textFlow=M18.HTP.parser(O3.tr(1806,I7.FL3(103,this.data.hid))),this.attrLabel2.textFlow=M18.HTP.parser(O3.tr(1807,I7.FL3(102,this.data.hid))),this.attrLabel3.textFlow=M18.HTP.parser(O3.tr(1808,I7.FL3(101,this.data.hid)));var a=I7.FL3(101,this.data.hid+1),h=I7.FL3(102,this.data.hid+1),p=I7.FL3(103,this.data.hid+1);switch(I7.isMaxLx(this.data.hid)?(this.resultLabel1.textFlow=M18.HTP.parser(O3.tr(1813)),this.resultLabel2.textFlow=M18.HTP.parser(O3.tr(1813)),this.resultLabel3.textFlow=M18.HTP.parser(O3.tr(1813))):(this.resultLabel1.textFlow=M18.HTP.parser(O3.tr(1806,p)),this.resultLabel2.textFlow=M18.HTP.parser(O3.tr(1807,h)),this.resultLabel3.textFlow=M18.HTP.parser(O3.tr(1808,a))),this.data.type){case 1:this.nameLabel.text=O3.tr(1809),this.resultLabel2.textFlow=M18.HTP.parser(O3.tr(1814)),this.resultLabel3.textFlow=M18.HTP.parser(O3.tr(1815)),this.attrLabel2.textFlow=M18.HTP.parser(O3.tr(1829,I7.FL3(102,this.data.hid))),this.attrLabel3.textFlow=M18.HTP.parser(O3.tr(1830,I7.FL3(101,this.data.hid)));break;case 2:this.nameLabel.text=O3.tr(1810),this.resultLabel3.textFlow=M18.HTP.parser(O3.tr(1815)),this.attrLabel3.textFlow=M18.HTP.parser(O3.tr(1830,I7.FL3(101,this.data.hid)));break;case 3:this.nameLabel.text=O3.tr(1811)}var l=App.CM.gtM(O6.B82);this.nameLabel1.textFlow=M18.HTP.parse(O3.tr(4e3,l.avatarInfo.n)),this.scoreLabel.text=TF83.FHH56()+"";var c=TF83.FJ99();this.nameBg.visible=c?(this.divorceBtn.visible=!0,this.nameLabel2.textFlow=M18.HTP.parser(O3.tr(1817,c)),!0):(this.nameLabel2.text="",this.divorceBtn.visible=!1),0<TF83.getCe()?this.expBtn.visible=!0:this.expBtn.visible=!1,this.updateRedNum(),this.showBoss();var u=App.CM.gtM(O6.B42);u.fere&&u.fere.obj?this.showFereBoss(u.fere.obj):this.objFereBoss&&(this.objFereBoss.destory(),this.objFereBoss=null)},t.prototype.littleAddExp=function(){var t=App.CM.gtM(O6.B42),e=this.pBarField.value,i=0,s=1;0==t.house.exp?i=this.pBarField.maximum-e:(i=t.house.exp-e)<=0&&(i=this.pBarField.maximum-e+t.house.exp),e+i>this.pBarField.maximum&&(s+=1),this.updataExp(e,i,s,t)},t.prototype.updataExp=function(t,e,i,p){var l=this,c=function(t,e,i){var s,o=0,r=l,n=p.house.hid;(s=((o=e+i>=r.pBarField.maximum?(i-=r.pBarField.maximum-e,r.pBarField.maximum):i+e)-r.pBarField.value)/r.pBarField.maximum*1e3)<200&&(s=200);var a,h=I7.FG39(n);h&&(a=h.add),egret.Tween.get(r.pBarField).to({value:o},s).call(function(){egret.Tween.removeTweens(r.pBarField),r.lbAddExp.textFlow=M18.HTP.parse(O3.tr(4004,a)),egret.Tween.get(r.lbAddExp).to({visible:!0}).to({y:24},200).call(function(){egret.Tween.removeTweens(r.lbAddExp),r.lbAddExp.y=40,r.lbAddExp.visible=!1}),r.pBarField.value==r.pBarField.maximum&&(e=0,r.pBarField.maximum=h.exp,r.pBarField.value=r.pBarField.slideDuration=r.pBarField.imgShort.width=r.pBarField.imgShort.x=0,0<t-1&&c(--t,e,i))})};c(i,t,e)},t.prototype.ZC94=function(t){this.updateViews()},t.prototype.updateRedNum=function(){var t=App.CM.gtM(O6.B42);P7.FD53(this.expBtn,t.getExpRedNum()),P7.FD53(this.upgradeBtn,t.ZL51()),P7.FD53(this.autoUpgradeBtn,t.ZL51())},t.prototype.reqUpgrade=function(){if(I7.isMaxLx(this.data.hid))return P18.sDP(O3.tr(1828)),void this.ZX83();for(var t=I7.FJ98(this.data.hid),e=!0,i=[],s=0;s<t.length;s++){var o=parseInt(t[s][0]),r=parseInt(t[s][1]),n=N12.giC(o);n<r&&(i.push({id:o,ct:r-n}),e=!1)}if(e)App.CM.apF(O6.B42,I9.A4,1);else{var a=!1,h=0,p=0,l=void 0;for(s=0;s<i.length;s++){var c=i[s];if(N15.FL12(c.id)){l||(l=c);var u=N15.FB92(c.id);-1==u?h=-1:-1!=h&&(h+=u*c.ct);var d=N15.FA50(c.id);-1==d?p=-1:-1!=p&&(p+=d*c.ct)}else if(a=!0,l)break}if(this.isAuto){if(a)this.ZX84(l),this.ZX83();else if(0<p)p<=N12.giC(75001)?App.CM.apF(O6.B42,I9.A4,2):(this.ZX84(l),this.ZX83());else if(0<h){h<=N12.giC(75e3)?App.CM.apF(O6.B42,I9.A4,2):(this.ZX84(l),this.ZX83())}}else this.ZX84(l),this.ZX83()}},t.prototype.ZX84=function(t){P18.sDP(O3.tr(5684)),t&&App.VM.open(O7.G87,t.id,t.ct)},t.prototype.showBoss=function(){var t=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],e=new TF39;if(e.id=t.id,e.h=t.h,e.we=t.we,e.wi=t.wi,e.f=t.f,e.bt=BehaviourType.Attack_d,e.sr=1,null==this.objMyBoss){this.objMyBoss=new FightGameObject,this.objMyBoss.action=Action.Stand;var i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objMyBoss.setBaseData(i)}this.objMyBoss.setData(e,this.myObj)},t.prototype.showFereBoss=function(t){if(null==this.objFereBoss){this.objFereBoss=new FightGameObject,this.objFereBoss.action=Action.Stand;var e={x:0,y:0,dir:Dir.bl,objType:P13.A6};this.objFereBoss.setBaseData(e)}t.bt=BehaviourType.Attack_d,this.objFereBoss.setData(t,this.fereObj)},t.prototype.openHelpView=function(){var t={title:O3.tr(1831),content:I7.init.help.value};App.CM.apF(O6.C18,O10.A24,t)},t.prototype.closeSelf=function(){App.CM.apF(O6.B42,I9.A20)},t}(BaseEuiView);__reflect(MarriageHouseView.prototype,"MarriageHouseView");var MarriageMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.set(O7.E73,"").rgS(O7.E10,"MarriageHouseView",O3.tr(6439)).rgS(O7.F40,"MarriageFarmView",O3.tr(7387)),i}return __extends(t,s),t.prototype.canOpen=function(t){return this.helpBtn.visible=!1,O7.E10!=t&&O7.F40!=t||(this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),this.helpBtn.visible=!0),!0},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.apply(this,t),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this)},t.prototype.updateDot=function(t,e){var i=App.CM.gtM(O6.B42);return e==O7.E10?0<i.getExpRedNum()+i.ZL51():e==O7.F40&&0<i.getFarmDot()+i.getCanGetNum()+THH27.FF46()},t.prototype.onClickHelp=function(){if(0<=this.index){var t=this.subMap[this.index],e=App.VM.gOV(t.vconst);e&&e.dispatchEventWith("HELP")}},t}(BasePanelViewX);__reflect(MarriageMainView.prototype,"MarriageMainView");var MarriageNoticeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.initTime=2e4,i.initWidth=10,i.rec=[],i.skinName=HomeNoticeSkin,i}return __extends(t,s),t.prototype.initUI=function(){this.lbStr.visible=!1,s.prototype.initUI.call(this);var t=App.VM.gOV(O7.G54);this.y=t?220:180,this.touchEnabled=!1,this.grpNotice.visible=!1},t.prototype.initChatData=function(){App.CM.gtM(O6.B42);if(this.noticeData){if(this.notice="",1==this.noticeData.type){switch(this.noticeData.chan){case P9.A17:this.notice+=O3.tr(5045,"62ee3e");break;case P9.A16:case P9.A19:case P9.A13:case P9.A14:default:this.notice+=O3.tr(5046,"fafa8e")}var t=1==this.noticeData.gender?"92ddf4":"f294d1",e=this.noticeData.sn;this.noticeData.sa&&(e=e+"."+this.noticeData.sa),this.noticeData.said==O4.getAid()||this.noticeData.sid&&this.noticeData.sid!=O4.getSid()?this.notice+=O3.tr(5047,e,t):this.notice+=O3.tr(5048,e,t,ViewMapingIndex.AvatarOther)}else this.notice+=O3.tr(5049,"92ddf4");if(this.noticeData.nid&&0<this.noticeData.nid){var i=N18.FL48(this.noticeData.nid).noticecontent;this.noticeData.fl&&(i=M18.format(i,this.noticeData.fl.split(","))),this.notice+=i}else this.notice+=M18.format("$0C:$1;",[this.noticeData.cnt||"","fafa8e"])}},t.prototype.initData=function(){},t.prototype.removeTween=function(){egret.Tween.removeTweens(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t);var i=App.CM.gtM(O6.C13);this.noticeData=i.noticeData,this.noticeData&&(this.ZX27(),this.loadNotice())},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.saveNotice()},t.prototype.saveNotice=function(){var t=App.CM.gtM(O6.C13);this.richLabel&&(t.noticeX=this.richLabel.x)},t.prototype.loadNotice=function(){var t=App.CM.gtM(O6.C13);this.richLabel.x=null!=t.noticeX?t.noticeX:640,this.richLabel.text=this.notice,this.w=-this.richLabel.width,this.startRoll()},t.prototype.startRoll=function(){var t=this;this.grpNotice.visible=!0,this.noticeTween=egret.Tween.get(this.richLabel).to({x:this.w},this.initTime).call(function(){t.removeNotice()})},t.prototype.ZX27=function(){this.initChatData(),null==this.richLabel&&(this.richLabel=com.RichLabel.create(),this.richLabel.text="",this.richLabel.maxWidth=1e4,this.richLabel.color=16448142,this.richLabel.size=20,(this.richLabel.clickObj=this).richLabel.verticalCenter=0,this.grpNotice.addChild(this.richLabel))},t.prototype.removeNotice=function(){egret.Tween.removeTweens(this.richLabel),this.ZO91();var t=App.CM.gtM(O6.C13);this.noticeData=t.noticeData=null,t.noticeX=null,this.richLabel=null,this.grpNotice.visible=!1,this.noticeTween=null},t.prototype.ZO91=function(){this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t}(BaseEuiView);__reflect(MarriageNoticeView.prototype,"MarriageNoticeView");var MarriagePriceItem=function(o){function t(){var t=o.call(this)||this;return t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,o),t.prototype.close=function(){this.itemCollection.removeAll()},t.prototype.childrenCreated=function(){o.prototype.createChildren.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ItemIcon,this.lbCost1.textFlow=M18.HTP.parser(O3.tr(6436)),this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6437)),this.lbCost2.textFlow=M18.HTP.parser(O3.tr(6438))},t.prototype.dataChanged=function(){switch(o.prototype.dataChanged.call(this),this.data.type){case 1:this.imgType.source="v1_fonts_jpjh_png",this.titleImg.source="v1_fonts_jisanpu_png";break;case 2:this.imgType.source="v1_fonts_hhjh_png",this.titleImg.source="v1_fonts_haohua_png";break;case 3:this.imgType.source="v1_fonts_dwjh_png",this.titleImg.source="v1_fonts_diwang_png"}var t=I7.FB81(this.data.type,null,.85);this.itemCollection.replaceAll(t);var e=I7.FB80(this.data.type);this.costLabel1.text=e[1],this.imgGood1.setData(N12.gID(e[0])),this.imgGood1.setImgSize({w:40,h:40});var i=App.CM.gtM(O6.A80);if(1==i.openState){var s=i.actData.getConfData(this.data.type);this.costLabel2.text=s.cost[0].v,this.imgGood2.setData(N12.gID(s.cost[0].k)),this.imgZK.visible=!0,this.imgGood2.setImgSize({w:40,h:40}),this.gpCost.width=300,this.gpCost2.visible=!0}else this.imgZK.visible=!1,this.gpCost2.visible=!1,this.gpCost.width=150},t}(eui.ItemRenderer);__reflect(MarriagePriceItem.prototype,"MarriagePriceItem");var MarriageSelectView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=MarriageSelectSkin,i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZG3(!1),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5050)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5051)),this.marriageBtn.label=O3.tr(5052),this.dlg.title=O3.tr(5745)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.closeBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.selectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM9,this),this.houseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT22,this),this.marriageBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ23,this),this.icon.ZC12(this.ZM9,this),this.dlg.ZQ16(this.openHelpView,this),this.updateViews()},t.prototype.close=function(){this.closeBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.selectBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM9,this),this.houseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT22,this),this.marriageBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ23,this),TF83.FG40()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF45&&this.ZC94(t)},t.prototype.ZC94=function(t){this.updateViews()},t.prototype.updateViews=function(){var t=TF83.FI73();this.nameLabel.text=t?(this.icon.visible=!0,this.icon.iconStr=t.ic,this.icon.setIconWidth(82),this.icon.ZU14(82),this.selectBtn.visible=!1,t.sName):(this.icon.visible=!1,this.selectBtn.visible=!0,O3.tr(1804))},t.prototype.oCC=function(){App.CM.apF(O6.B42,I9.A17)},t.prototype.ZM9=function(){App.CM.apF(O6.B42,I9.A16)},t.prototype.ZT22=function(){TF83.getHouse()?App.CM.apF(O6.B42,I9.A24):P18.sDP(O3.tr(1827))},t.prototype.ZJ23=function(){var t=TF83.FI73();t?App.CM.apF(O6.B42,I9.A6,t):P18.sDP(O3.tr(1804))},t.prototype.openHelpView=function(){var t={title:O3.tr(1831),content:I7.init.help.value};App.CM.apF(O6.C18,O10.A24,t)},t}(BaseEuiView);__reflect(MarriageSelectView.prototype,"MarriageSelectView");var MarriageExpVo=function(){function t(){this.exp=0}return t.prototype.initData=function(t){},t.prototype.ZC91=function(t){this.exp=t.exp,this.type=t.type,this.time=t.time},t}();__reflect(MarriageExpVo.prototype,"MarriageExpVo");var MarriageFereVo=function(){function t(){this.aid=0}return t.prototype.initData=function(t){},t.prototype.ZC91=function(t){this.aid=t.aid||this.aid,this.name=t.name||this.name,this.obj=t.u},t}();__reflect(MarriageFereVo.prototype,"MarriageFereVo");var MarriageHouseVo=function(){function t(){this.hid=0,this.exp=0,this.type=1,this.addSc=0}return t.prototype.initData=function(t){},t.prototype.ZC91=function(t){this.hid=P7.getValue(t.hid,this.hid),this.exp=P7.getValue(t.exp,this.exp),this.type=P7.getValue(t.type,this.type),this.addSc=P7.getValue(t.score,this.addSc)},t.prototype.FL84=function(){return I7.FL84(this.hid)},t.prototype.getExp=function(){return this.exp},t.prototype.getHp=function(){return this.exp},t}();__reflect(MarriageHouseVo.prototype,"MarriageHouseVo");var MarriageProposalVo=function(){function t(){this.aid=0,this.cd=0,this.type=0}return t.prototype.initData=function(t){},t.prototype.ZC91=function(t){this.aid=t.aid,t.cd&&(this.cd=t.cd,this.lastLoadTime=P6.getTime(!0)),this.name=t.name||this.name,this.type=t.grade||this.type},t.prototype.FJ24=function(){var t=P6.getTime(!0)-this.lastLoadTime,e=this.cd-t;return 0<e?e:0},t}();__reflect(MarriageProposalVo.prototype,"MarriageProposalVo");var MarriageTileVo=function(){function t(){this.tdf=0}return t.prototype.update=function(t){this.data=t,this.tdf=P6.getTime()},Object.defineProperty(t.prototype,"state",{get:function(){return this.harvestTime<=0?t.HARVEST:0==this.waterTime?t.WATER:t.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"growth",{get:function(){return Math.min(I7.growthTime,this.data.t+this.ZJ24(!0)+this._watertime)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"harvestTime",{get:function(){return Math.max(0,I7.growthTime-this.growth)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waterTime",{get:function(){var t=I7.interval-(this.data.pt+this.ZJ24(!0));return this.data.c>=I7.waterQuantity?-1:Math.max(0,t)},enumerable:!0,configurable:!0}),t.prototype.ZJ24=function(t){return void 0===t&&(t=!0),Math.floor(P6.getTime()-this.tdf)/(t?1e3:1)},Object.defineProperty(t.prototype,"_watertime",{get:function(){return(this.data.c+this.data.oc)*I7.watering},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){if(this.harvestTime<=0)return 3;for(var t=this.growth,e=0,i=I7.growth;e<i.length;e++){var s=i[e];if((t-=s.v)<=0)return s.k}return 0},enumerable:!0,configurable:!0}),t.WATER=1,t.SOW=2,t.HARVEST=3,t.NONE=0,t.BAN=-1,t}();__reflect(MarriageTileVo.prototype,"MarriageTileVo");var L8=function(){function r(){}return r.FK35=function(t){r.init=t.master_init,r.mission=t.master_mission,r.MasterOL=t.master_init.MasterOL.value.split(";").map(function(t){var e=t.split(","),i=e[0],s=e[1];return{seconds:parseInt(i),reward:P7.str2kv1(s)}}),r.discipleOL=t.master_init.discipleOL.value.split(";").map(function(t){var e=t.split(","),i=e[0],s=e[1];return{seconds:parseInt(i),reward:P7.str2kv1(s)}})},r.FA99=function(t,e){for(var i=0,s=0,o=0===t?r.MasterOL:r.discipleOL;s<o.length;s++){e>=o[s].seconds&&(i+=1)}return i},r.FA10=function(t,e){for(var i=0,s=0===t?r.MasterOL:r.discipleOL;i<s.length;i++){var o=s[i];if(e<o.seconds)return o.seconds-e}return-1},r.FL66=function(){return parseInt(r.init.openLv.value||0)},r.FK1=function(){return parseInt(r.init.masterLv.value||0)},r.FF26=function(){r.init.discipleItem.value},r.FC47=function(){var t=r.init.graduationCosts.value;return M18.FL28(t,":")},r.FHH57=function(){return 60*parseInt(r.init.graduation.value||0)},r.FB82=function(){return 60*parseInt(r.init.masterGraduation.value||0)},r.MasterOL=[],r.discipleOL=[],r}();__reflect(L8.prototype,"L8");var M1=function(){function t(){}return t.A29=10001,t.A30=10002,t.A21=10003,t.A22=10004,t.A17=10005,t.A11=10006,t.A12=10007,t.A18=10008,t.A19=10009,t.A8=10010,t.A1=10011,t.A13=10012,t.A14=10013,t.A15=10014,t.A16=10015,t.A26=10016,t.A4=10017,t.A5=10018,t.A6=10019,t.A7=10020,t.A9=10021,t.A10=10022,t.A2=10023,t.A3=10024,t.A23=10025,t.A24=10026,t.A31=10027,t.A25=20001,t.A20=20002,t.A28=20003,t.A27=20004,t}();__reflect(M1.prototype,"M1");var TD44=function(i){function t(){var t=i.call(this)||this,e=new TG23(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.G50),e.aLV(O7.HH52),e.aLV(O7.F2),e.aLV(O7.D29),e.aLV(O7.B77),e.aLV(O7.I66),e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.E93),e.aLV(O7.HH98),e.aLV(O7.I3),e.aLV(O7.I85),App.VM.register(O7.G50,"MasterMainView",t,K17.UI_Main_TOP),t.rgF(M1.A25,t.GE86,t),t.rgF(M1.A20,t.GD99,t),t.rgF(M1.A28,t.GL72,t),t.proxy=new TG24(t),t.rgF(M1.A29,t.GT44,t),t.rgF(M1.A30,t.GT45,t),t.rgF(M1.A21,t.GI6,t),t.rgF(M1.A22,t.GI7,t),t.rgF(M1.A17,t.GG28,t),t.rgF(M1.A11,t.GD2,t),t.rgF(M1.A12,t.GD3,t),t.rgF(M1.A18,t.GG26,t),t.rgF(M1.A19,t.GG27,t),t.rgF(M1.A8,t.GC12,t),t.rgF(M1.A1,t.GA69,t),t.rgF(M1.A13,t.GD97,t),t.rgF(M1.A14,t.GD98,t),t.rgF(M1.A15,t.GG24,t),t.rgF(M1.A16,t.GG25,t),t.rgF(M1.A26,t.GN61,t),t.rgF(M1.A4,t.GI4,t),t.rgF(M1.A5,t.GI5,t),t.rgF(M1.A6,t.GC10,t),t.rgF(M1.A7,t.GC11,t),t.rgF(M1.A9,t.GC99,t),t.rgF(M1.A10,t.GD1,t),t.rgF(M1.A2,t.GE87,t),t.rgF(M1.A3,t.GE88,t),t.rgF(M1.A23,t.proxy.ZP40,t.proxy),t.rgF(M1.A24,t.GJ96,t),t.rgF(M1.A31,t.GX80,t),t}return __extends(t,i),t.prototype.GC99=function(t,e){this.proxy.GC99(t,e)},t.prototype.GD1=function(t){200==t.head.state?(this.gtM().ZC91(t.body),t.body.ob&&P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC10=function(t){this.proxy.GC10(t)},t.prototype.GC11=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI4=function(t){this.proxy.GI4(t)},t.prototype.GI5=function(t){200==t.head.state?(this.gtM().ZC91(t.body),t.body.ob&&P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN61=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG24=function(t,e){this.proxy.GG24(t,e)},t.prototype.GG25=function(t){200==t.head.state?(this.gtM().ZC91(t.body),t.body.ob&&P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD97=function(t,e){this.proxy.GD97(t,e)},t.prototype.GD98=function(t){200==t.head.state?(this.gtM().ZC91(t.body),t.body.ob&&P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GA69=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GC12=function(t){if(200==t.head.state){var e=this.gtM();e.ZC91({at:t.body.at,ata:t.body.ata},!1),t.body.as&&e.asPush(t.body.as),t.body.ms&&e.msPush(t.body.ms),e.ZJ25(),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG26=function(t,e){this.proxy.GG26(t,e)},t.prototype.GG27=function(t,e,i){if(200==t.head.state){var s=this.gtM();s.ZX86(e),s.ZC91({mt:t.body.mt,mta:t.body.mta},!1),1==i&&t.body.ms&&s.msPush(t.body.ms),s.ZJ25(),s.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD2=function(){this.proxy.GD2()},t.prototype.GD3=function(t){200==t.head.state?this.gtM().ZC91(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG28=function(t){if(200==t.head.state){var e=this.gtM();e.ZT24(t.body),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI6=function(t){var e=this,i=TG73.FF26(),s=N12.FK5(i[0]),o={handler:function(){e.proxy.GI6(t)},content:O3.tr(6509,s,i[1]),isShowCb:!1};App.VM.open(O7.C54,o)},t.prototype.GI7=function(t,e){200==t.head.state?(P18.sDP(O3.tr(1921)),this.gtM().ZP39(e)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT44=function(){return this.proxy.GT44()},t.prototype.GT45=function(t){if(200==t.head.state){var e=this.gtM();e.loadBossData(t.body),e.ZJ25()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GE86=function(){App.VM.open(O7.G50)},t.prototype.GD99=function(){App.VM.close(O7.G50)},t.prototype.GL72=function(){App.VM.open(O7.G50,O7.HH52)},t.prototype.GE87=function(){this.proxy.GE87()},t.prototype.GE88=function(t){if(200==t.head.state){var e=this.gtM();e.ZC91(t.body),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ96=function(t){if(200==t.head.state){var e=this.gtM();e.ZC91(t.body),e.notify(),P5.sIs(t.body.ob)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX80=function(t){if(200==t.head.state){var e,i,s=this.gtM(),o=t.body,r=o.t,n=o.aid,a=o.ot,h=o.on;if(1==r)s.FL86().ZC91({on:h}),s.ZC91({mt:(e={},e[n]=a,e)},!1);else{var p=s.getMyAs(1);p&&p.aid==n&&p.ZC91({on:h});var l=s.getMyAs(2);l&&l.aid==n&&l.ZC91({on:h}),s.ZC91({at:(i={},i[n]=a,i)},!1)}s.ZJ25(),s.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TD44.prototype,"TD44");var TG23=function(i){function t(t){var e=i.call(this,t)||this;return e.ms=[],e.myAs=[],e.durTime=30,e.mt={},e.at={},e.mta={},e.ata={},e}return __extends(t,i),t.prototype.FI77=function(t){this.temAsInfo=t},t.prototype.FI78=function(){return this.temAsInfo},t.prototype.FG41=function(){this.temAsInfo=null},t.prototype.getMawsById=function(t){if(!this.maws)return null;for(var e=0;e<this.maws.length;e++)if(t==this.maws[e].k)return this.maws[e].v;return null},t.prototype.getAsMission=function(t,e){var i=this.getMawsById(t);if(i)for(var s=0;s<i.length;s++)if(i[s].k==e)return i[s];return null},t.prototype.FD26=function(t){for(var e=0;e<this.asMissions.length;e++){this.asMissions[e].aid=t;var i=this.getAsMission(t,this.asMissions[e].id);i?(this.asMissions[e].setFinish(!0),1==i.v?this.asMissions[e].state=3:this.asMissions[e].state=1):(this.asMissions[e].setFinish(!1),this.asMissions[e].state=2)}return this.asMissions.sort(function(t,e){return t.state!=e.state?t.state-e.state:t.id-e.id}),this.asMissions},t.prototype.loadBossData=function(t){if(!this.missions)for(var e in this.missions=[],L8.mission){(i=new MasterTaskVo).initData(L8.mission[e]),this.missions.push(i)}if(!this.asMissions)for(var e in this.asMissions=[],L8.mission){var i;(i=new MasterAsTaskVo).initData(L8.mission[e]),this.asMissions.push(i)}this.ZC91(t)},t.prototype.FD24=function(t){if(!this.mse)return!1;for(var e=0;e<this.mse.length;e++)if(t==this.mse[e])return!0;return!1},t.prototype.FHH58=function(t){if(!this.ase)return!1;for(var e=0;e<this.ase.length;e++)if(t==this.ase[e])return!0;return!1},t.prototype.ZC91=function(t,e){if(void 0===e&&(e=!0),t.aps){this.aps=[];for(var i=0;i<t.aps.length;i++){(s=new InvitationInfoVo).ZC91(t.aps[i]),this.aps.push(s)}}if(t.ivs){this.ivs=[];for(i=0;i<t.ivs.length;i++){(s=new InvitationInfoVo).ZC91(t.ivs[i]),this.ivs.push(s)}}if(t.ms){this.ms=[];for(i=0;i<t.ms.length;i++){(s=this.ZX85(t.ms[i].aid))||(s=new InvitationInfoVo,this.ms.push(s)),s.ZC91(t.ms[i])}}if(t.as){this.myAs=[];for(i=0;i<t.as.length;i++){(s=this.ZX85(t.as[i].aid))||(s=new InvitationInfoVo,this.myAs.push(s)),s.ZC91(t.as[i])}}if(t.ym){this.ym=t.ym||this.ym;for(i=0;i<t.ym.length;i++){(s=this.ZT25(t.ym[i])).updateState()}}if(t.mission)if(0==t.mission.length)for(i=0;i<this.missions.length;i++){(s=this.missions[i])&&s.reset()}else for(i=0;i<t.mission.length;i++){var s;(s=this.ZT25(t.mission[i].k))&&s.ZC91(t.mission[i])}for(var o in this.mse=t.mse||this.mse,this.ase=t.ase||this.ase,this.maws=t.maws||this.maws,t.mt)this.mt[o]?this.mt[parseInt(o)].update(t.mt[o]):this.mt[o]=new MasterOnlineVo(t.mt[o]);for(var o in t.at)this.at[o]?this.at[parseInt(o)].update(t.at[o]):this.at[o]=new MasterOnlineVo(t.at[o]);for(var o in t.mta)this.mta[o]=t.mta[o];for(var o in t.ata)this.ata[o]=t.ata[o];this.ZJ26(),e&&this.notify()},t.prototype.getMyAsById=function(t){if(this.myAs)for(var e=0;e<this.myAs.length;e++)if(this.myAs[e].aid==t)return this.myAs[e];return null},t.prototype.ZT23=function(t){for(var e=0;e<this.ms.length;e++)if(this.ms[e].aid==t)return this.ms[e];return null},t.prototype.ZT24=function(t){this.ivs||(this.ivs=[]);for(var e=0;e<t.ivs.length;e++){var i=this.getIvsById(t.ivs[e].aid);i?i.ZC91(t.ivs[e]):((i=new InvitationInfoVo).ZC91(t.ivs[e]),this.ivs.push(i))}this.notify()},t.prototype.ZT25=function(t){if(!this.missions)return null;for(var e=0;e<this.missions.length;e++)if(this.missions[e].id==t)return this.missions[e];return null},t.prototype.FL86=function(){return this.ms?this.ms[0]:null},t.prototype.ZX85=function(t){for(var e=0;e<this.ms.length;e++)if(this.ms[e]==t)return this.ms[e];return null},t.prototype.getIvsById=function(t){for(var e=0;e<this.ivs.length;e++)if(this.ivs[e]==t)return this.ivs[e];return null},t.prototype.isGetById=function(t){for(var e=0;e<this.aps.length;e++)if(this.aps[e]==t)return!0;return!1},t.prototype.getApById=function(t){if(null!=this.aps)for(var e=0;e<this.aps.length;e++)if(this.aps[e].aid==t)return this.aps[e];return null},t.prototype.getMyAs=function(t){var e;if(1==this.myAs.length){if(1==t)return this.myAs[0];if(2==t)return null}for(var i=0;i<this.myAs.length;i++)e?1==t?e.getDayTime()<this.myAs[i].getDayTime()?e=this.myAs[i]:e.getDayTime()==this.myAs[i].getDayTime()&&(e=1==t?this.myAs[0]:this.myAs[1]):2==t&&(e.getDayTime()>this.myAs[i].getDayTime()?e=this.myAs[i]:e.getDayTime()==this.myAs[i].getDayTime()&&(e=1==t?this.myAs[0]:this.myAs[1])):e=this.myAs[i];return e},t.prototype.getMyAsNum=function(){if(this.myAs)return this.myAs.length},t.prototype.FK2=function(){return this.missions.sort(function(t,e){return t.state!=e.state?t.state-e.state:t.id-e.id}),this.missions},t.prototype.getAps=function(){return this.aps},t.prototype.getIvs=function(){return this.ivs},t.prototype.isOnline=function(t){for(var e=0,i=[this.FL86(),this.getMyAs(1),this.getMyAs(2)];e<i.length;e++){var s=i[e];if(s&&s.aid==t&&s.on)return!0}return!1},t.prototype.FD25=function(t){for(var e=0;e<this.ym.length;e++)if(this.ym[e]==t)return!0;return!1},t.prototype.ZP39=function(t){if(t){var e=this.getApById(t);e&&(e.as=1)}this.notify()},t.prototype.ZX86=function(t){if(this.ivs&&t)for(var e=0;e<this.ivs.length;e++)this.ivs[e].aid==t&&this.ivs.splice(e,1);this.notify()},t.prototype.asPush=function(t){if(t&&t.length)for(var e=0;e<t.length;e++){var i=this.getMyAsById(t[e].aid);i||(i=new InvitationInfoVo,this.myAs.push(i)),i.ZC91(t[e])}this.notify()},t.prototype.ZJ25=function(){for(var t=0,e=[this.getMyAs(1),this.getMyAs(2)];t<e.length;t++){var i=e[t];i&&(this.at[i.aid].onlineState=i.on)}var s=this.FL86();s&&(this.mt[s.aid].onlineState=s.on)},t.prototype.msPush=function(t){if(t&&t.length)for(var e=0;e<t.length;e++){var i=this.ZX85(t[e].aid);i||(i=new InvitationInfoVo,this.ms.push(i)),i.ZC91(t[e])}this.notify()},t.prototype.haveInvs=function(){var t=0,e=this.FL86();return this.ivs&&!e&&(t=this.ivs.length),t},t.prototype.FI79=function(){var t=0;if(this.ms){var e=App.CM.gtM(O6.B82);if(K18.FHH93(e.avatarInfo.l)<=0)return t;for(var i=0;i<this.ms.length;i++)this.FHH58(this.ms[i].aid)||0<this.ms[i].FJ24()&&(t+=1)}return t},t.prototype.FI80=function(t){void 0===t&&(t=1);var e=0,i=this.getMyAs(t);if(i){var s=App.CM.gtM(O6.B82);if(K18.FHH93(s.avatarInfo.l)<=0)return e;this.FD24(i.aid)||0<i.FJ24()&&(e+=1)}return e},t.prototype.FB84=function(){var t=0;if(this.missions&&this.ms&&this.ms[0]&&0<this.ms[0].FJ24())for(var e=0;e<this.missions.length;e++)if(1==this.missions[e].state){t=1;break}return t},t.prototype.FB85=function(t){void 0===t&&(t=1);var e=0,i=this.getMyAs(t);if(i&&0<i.FJ24())for(var s=this.FD26(i.aid),o=0;o<s.length;o++)if(1==s[o].state){e=1;break}return e},t.prototype.FL87=function(){var t=0;if(this.ms)for(var e=0;e<this.ms.length;e++)this.ms[e].FJ24()<=0&&(t+=1);return t},t.prototype.FHH59=function(){this.lastSendTime=P6.getTime(!0)},t.prototype.FF29=function(){var t=P6.getTime(!0)-this.lastSendTime,e=this.durTime-t;return 0<e?e:0},t.prototype.FK3=function(t){var e=0,i=this.getMyAs(t);return i&&i.ZP42()<=0&&(e+=1),e},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t.prototype.ZJ26=function(){var t=this;this.onlineTimer&&App.K16.rBH(this.onlineTimer),delete this.onlineTimer;var e=[],i=this.FL86(),s=this.getMyAs(1),o=this.getMyAs(2);i&&i.on&&0<i.FJ24()&&e.push(L8.FA10(0,this.mt[i.aid].seconds)),s&&s.on&&0<s.FJ24()&&e.push(L8.FA10(1,this.at[s.aid].seconds)),o&&o.on&&0<o.ZP42()&&e.push(L8.FA10(1,this.at[o.aid].seconds));var r=Math.min.apply(null,e);0<r&&(this.onlineTimer=App.K16.doTimer(r,1e3*Math.ceil(r),function(){t.notify(),t.ZJ26()},this))},t}(TG79);__reflect(TG23.prototype,"TG23");var TG24=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.B56,e.GE88,e),e.rSM(P4.M46,e.GG28,e),e.rSM(P4.F29,e.GD3,e),e.rSM(P4.E11,e.GC12,e),e.rSM(P4.B54,e.GA69,e),e.rSM(P4.G94,e.GD98,e),e.rSM(P4.K33,e.GG25,e),e.rSM(P4.T75,e.GN61,e),e.rSM(P4.C27,e.GI5,e),e.rSM(P4.D6,e.GC11,e),e.rSM(P4.E13,e.GD1,e),e.rSM(P4.K35,e.GJ96,e),e.rSM(P4.T76,e.GX80,e),e}return __extends(t,i),t.prototype.GC99=function(t,e){var i={type:P4.E12,body:{missionId:t,targeId:e}};this.sSM(i)},t.prototype.GD1=function(t){this.apF(M1.A10,t)},t.prototype.GC10=function(t){var e={type:P4.D5,body:{missionId:t}};this.sSM(e)},t.prototype.GC11=function(t){this.apF(M1.A5,t)},t.prototype.GI4=function(t){var e={type:P4.C26,body:{targeId:t}};this.sSM(e)},t.prototype.GI5=function(t){this.apF(M1.A5,t)},t.prototype.GN61=function(t){this.apF(M1.A26,t)},t.prototype.GG24=function(t,e){var i={type:P4.K32,body:{targeId:t,type:e}};this.sSM(i)},t.prototype.GG25=function(t){this.apF(M1.A16,t)},t.prototype.GD97=function(t,e){var i={type:P4.G93,body:{targeId:t,type:e}};this.sSM(i)},t.prototype.GD98=function(t){this.apF(M1.A14,t)},t.prototype.GA69=function(t){this.apF(M1.A1,t)},t.prototype.GC12=function(t){this.apF(M1.A8,t)},t.prototype.GG26=function(t,e){var i={type:P4.M47,body:{targeId:t,type:e}},s={};s.targeId=t,s.type=e,this.rSMO(P4.M48,this.GG27,this,s),this.sSM(i)},t.prototype.GG27=function(t,e){var i=e.targeId,s=e.type;this.apF(M1.A19,t,i,s)},t.prototype.GD2=function(){var t={type:P4.F28,body:{}};this.sSM(t)},t.prototype.GD3=function(t){this.apF(M1.A12,t)},t.prototype.GG28=function(t){this.apF(M1.A17,t)},t.prototype.GI6=function(t){var e={type:P4.O59,body:{targeId:t}},i={};i.targeId=t,this.rSMO(P4.O60,this.GI7,this,i),this.sSM(e)},t.prototype.GI7=function(t,e){var i=e.targeId;this.apF(M1.A22,t,i)},t.prototype.GT44=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W74,body:{}};s.rSMO(P4.W75,function(t){s.apF(M1.A30,t),e("加载师徒数据完成")},s),s.sSM(i)})},t.prototype.GE87=function(){var t={type:P4.B55,body:{}};this.sSM(t)},t.prototype.GE88=function(t){this.apF(M1.A3,t)},t.prototype.ZP40=function(t,e,i){var s={type:P4.K34,body:{type:t,tid:e,time:i}};this.sSM(s)},t.prototype.GJ96=function(t){this.apF(M1.A24,t)},t.prototype.GX80=function(t){this.apF(M1.A31,t)},t}(TG80);__reflect(TG24.prototype,"TG24");var TG73=function(){function c(){}return c.getMyAs=function(t){return void 0===t&&(t=1),App.CM.gtM(O6.B92).getMyAs(t)},c.FL86=function(){return App.CM.gtM(O6.B92).FL86()},c.FD24=function(t){return App.CM.gtM(O6.B92).FD24(t)},c.FHH58=function(t){return App.CM.gtM(O6.B92).FHH58(t)},c.FK2=function(){return App.CM.gtM(O6.B92).FK2()},c.FB83=function(t,e,i,s){return 0!=t&&1!=t?[]:(0===t?L8.discipleOL:L8.MasterOL).map(function(t){return{data:t,aid:s,state:0<=i.indexOf(t.seconds)?J13.A2:e>=t.seconds?J13.A3:J13.A1}})},c.getAps=function(){return App.CM.gtM(O6.B92).getAps()},c.getIvs=function(){return App.CM.gtM(O6.B92).getIvs()},c.FI76=function(){return App.CM.gtM(O6.B92).getMyAsNum()},c.FD25=function(t){return App.CM.gtM(O6.B92).FD25(t)},c.FD26=function(t){return App.CM.gtM(O6.B92).FD26(t)},c.FI77=function(t){return App.CM.gtM(O6.B92).FI77(t)},c.FI78=function(){return App.CM.gtM(O6.B92).FI78()},c.FG41=function(){return App.CM.gtM(O6.B92).FG41()},c.getExp=function(t){var e,i;1==t?(e=parseFloat(L8.init.discipleExp.value||1),i=parseFloat(L8.init.disciplemaxExp.value)):2==t&&(e=parseFloat(L8.init.masterExp.value||1),i=parseFloat(L8.init.mastermaxExp.value));var s=App.CM.gtM(O6.B82);return Math.floor(K18.FHH93(s.avatarInfo.l)*e)>=i?i:Math.floor(K18.FHH93(s.avatarInfo.l)*e)},c.FF27=function(){var t=L8.init.mediumReward.value,s=[],e=M18.FL28(t,";",":");return e&&0<e.length&&e.forEach(function(t){var e=N12.gID(t[0]);if(e){var i={data:e,ct:parseInt(t[1])};s.push({itemData:i,isBottom:!1,scale:.8})}}),s},c.FB1=function(){var t=L8.init.mediumRewardMaster.value,s=[],e=M18.FL28(t,";",":");return e&&0<e.length&&e.forEach(function(t){var e=N12.gID(t[0]);if(e){var i={data:e,ct:parseInt(t[1])};s.push({itemData:i,isBottom:!1,scale:.8})}}),s},c.FF28=function(){var t=L8.init.seniorReward.value,s=[],e=M18.FL28(t,";",":");return e&&0<e.length&&e.forEach(function(t){var e=N12.gID(t[0]);if(e){var i={data:e,ct:parseInt(t[1])};s.push({itemData:i,isBottom:!1,scale:.8})}}),s},c.FB2=function(){var t=L8.init.seniorRewardMaster.value,s=[],e=M18.FL28(t,";",":");return e&&0<e.length&&e.forEach(function(t){var e=N12.gID(t[0]);if(e){var i={data:e,ct:parseInt(t[1])};s.push({itemData:i,isBottom:!1,scale:.8})}}),s},c.FF26=function(){var t=L8.init.discipleItem.value;return M18.FL28(t,":")},c.canGetAs=function(t){void 0===t&&(t=!1);var e=c.FF26(),i=parseInt(e[0]),s=N12.giC(i),o=parseInt(e[1]);return!(s<o)||(t||P18.sDP(O3.tr(1920)),App.VM.open(O7.G87,i,o),!1)},c.haveInvs=function(){return App.CM.gtM(O6.B92).haveInvs()},c.FI79=function(){return App.CM.gtM(O6.B92).FI79()},c.FI80=function(t){return App.CM.gtM(O6.B92).FI80(t)},c.FB84=function(){return App.CM.gtM(O6.B92).FB84()},c.FB85=function(t){return App.CM.gtM(O6.B92).FB85(t)},c.FL87=function(){return App.CM.gtM(O6.B92).FL87()},c.FK3=function(t){return App.CM.gtM(O6.B92).FK3(t)},c.FF29=function(){return App.CM.gtM(O6.B92).FF29()},c.FHH59=function(){return App.CM.gtM(O6.B92).FHH59()},c.FA1=function(t){var e=0,i=App.CM.gtM(O6.B92);if(i){var s=i.getMyAs(t);s&&(e=c.FC48(0,s.aid))}return e},c.FA8=function(){var t=0,e=App.CM.gtM(O6.B92);if(e){var i=e.FL86();i&&(t=c.FC48(1,i.aid))}return t},c.FC48=function(t,e){var i=0,s=App.CM.gtM(O6.B92);if(s){var o=void 0;if(0==t){var r=s.getMyAs(1),n=s.getMyAs(2);if(r&&r.aid==e&&(o=r),n&&n.aid==e){if(n.ZP42()<=0)return i;o=n}}else 1==t&&(o=s.FL86());if(!o||o.aid!=e||o.FJ24()<=0)return i;if(o)for(var a=1==t?s.mt[e].seconds:s.at[e].seconds,h=1==t?s.mta[e]:s.ata[e],p=0,l=c.FB83(t,a,h,e);p<l.length;p++){l[p].state==J13.A3&&(i+=1)}}return i},c.FL35=function(){var t=c.FI80(1)+c.FI80(2),e=c.FB85(1)+c.FB85(2),i=c.FK3(1)+c.FK3(2);return c.haveInvs()+c.FI79()+t+e+c.FB84()+i+c.FL87()+c.FA8()+c.FA1(1)+c.FA1(2)},c.FA99=function(){var t=0,e=App.CM.gtM(O6.B92);if(e){var i=e.getMyAs(1);i&&(t+=L8.FA99(1,e.at[i.aid].seconds));var s=e.getMyAs(2);s&&(t+=L8.FA99(2,e.at[s.aid].seconds))}return t},c}();__reflect(TG73.prototype,"TG73");var MasterApprenticeItem=function(s){function t(t,e){var i=s.call(this)||this;return i.skinName="MasterApprenticeItemSkin",i.type=e||1,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRemoveStage,i),i}return __extends(t,s),t.prototype.onAddToStage=function(){this.expBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExp,this),this.avatarHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAvatar,this)},t.prototype.onRemoveStage=function(){this.expBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onExp,this),this.avatarHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAvatar,this)},t.prototype.initUI=function(){},t.prototype.onExp=function(){App.CM.apF(O6.B92,M1.A13,this.data.aid,2)},t.prototype.onAvatar=function(){if(this.data){var t={nId:this.data.aid,sName:this.data.name};App.CM.apF(O6.B84,L14.A20,t)}},t.prototype.updateViews=function(){if(this.data){var t=TG73.getExp(2);this.expBtn.label=(this.expBtn.touchEnabled=0<t?(P16.sGF(this.expBtn,!1),!0):(t=0,P16.sGF(this.expBtn,!0),!1),O3.tr(4031)),P7.FD53(this.expBtn,t);var e=M18.FM20(t,2,1e6);this.expLabel.text=O3.tr(1911,e),this.nameLabel.textFlow=M18.HTP.parse(O3.tr(4032,this.data.name)),this.imgV.x=this.nameLabel.x+this.nameLabel.width,this.lvLabel.textFlow=M18.HTP.parse(O3.tr(4033,this.data.lv)),this.avatarHead.source=this.data.icon,this.avatarHead.width=this.avatarHead.height=82,this.data.on?(this.onlineLabel.text=O3.tr(1904),this.onlineLabel.textColor=37119):(this.onlineLabel.text=O3.tr(1905),this.onlineLabel.textColor=16711680),this.group1.visible=!1;var i=this.data.FJ24();if(0<i){this.group2.visible=!0,this.group3.visible=!1;var s=Math.floor(i/86400);0==s?(this.dayLabel.text=O3.tr(1912),this.cdText.text=O3.tr(1913)):(this.cdText.text=O3.tr(1914),this.dayLabel.text=O3.tr(1906,s)),TG73.FD24(this.data.aid)?(this.group1.visible=!1,this.group2.visible=!0):(this.group1.visible=!0,this.group2.visible=!1),this.group3.visible=!1}else this.group1.visible=!1,this.group2.visible=!1,this.group3.visible=!0}},t.prototype.setLogo=function(t){t&&(this.logoImg.source=t)},t.prototype.setData=function(t){this.data=t,this.updateViews(),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4034)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4035)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4036))},t}(eui.Component);__reflect(MasterApprenticeItem.prototype,"MasterApprenticeItem");var MasterApprenticeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.tabIndex=0,i.skinName="MasterApprenticeNewSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B92)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.apprenticeItem1||(this.apprenticeItem1=new MasterApprenticeItem(this,1),this.group1.addChild(this.apprenticeItem1),this.apprenticeItem1.setLogo("v1_fonts_datudi_png")),this.apprenticeItem2||(this.apprenticeItem2=new MasterApprenticeItem(this,2),this.group2.addChild(this.apprenticeItem2),this.apprenticeItem2.setLogo("v1_fonts_xiaotudi_png")),this.masterAsFinishItem1||(this.masterAsFinishItem1=new MasterAsFinishItem,this.finishGroup.addChild(this.masterAsFinishItem1)),this.masterAsFinishItem2||(this.masterAsFinishItem2=new MasterAsFinishItem,this.finishGroup.addChild(this.masterAsFinishItem2)),this.gotoBtn.label=O3.tr(4016),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4017)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4018)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(7365)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4021)),this.rbTask.label=O3.tr(7363),this.rbOnline.label=O3.tr(7364),App.THH32.aUE(this.pbTime.gStar,"wdsg_jgsxtxa_sa_001",0,0,0)},t.prototype.initData=function(){s.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.dgOnlineReward.dataProvider=this.onlineRewardDataSource=new eui.ArrayCollection,this.dgOnlineReward.itemRenderer=MasterOnlineRewardItem2,this.pbTime.labelDisplay.visible=!1,this.onBigHandler(),this.ZF77()},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.itemScroller.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.gotoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX87,this),this.clickBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBigHandler,this),this.clickBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT26,this),this.rbOnline.addEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.rbTask.addEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.GX5()},t.prototype.ZM10=function(t){var s=this,e=t.getMyAs(this.type),i=e.aid,o=e.on,r=t.at[i].seconds;this.pbTime.gStar.visible=!!o&&0<L8.FA10(1,r),this.gP.validateNow(),this.updatePB(1,r);var n=TG73.FB83(0,r,t.ata[i],i);this.onlineRewardDataSource.replaceAll(n);var a=0;n.forEach(function(t,e){var i=s.gP.getChildAt(e+1);i.title=O3.tr(7369,t.data.seconds/60),i.select=r>=t.data.seconds,a=i.select?e+1:a})},t.prototype.updatePB=function(t,e){for(var i=[],s=1;s<=4;s++){var o=this.gP.getChildAt(s);i.push(o.x)}this.pbTime.maximum=this.gP.width;var r,n=e,a=0==t?L8.MasterOL:L8.discipleOL,h=0;for(r=a.length-1;0<=r&&!(n>=a[r].seconds);r-=1);if(r>=i.length-1)h=this.pbTime.maximum;else{var p=a[r]?a[r].seconds:0,l=i[r]?i[r]:0;h=l+(n-p)/(a[r+1].seconds-p)*(i[r+1]-l)}this.pbTime.value=h},t.prototype.ZJ26=function(t){var e=this,i=!1,s=t.getMyAs(this.type);s&&0<(1==this.type?s.FJ24():s.ZP42())&&s.on&&1==this.tabIndex&&(i=!0),i?this.onlineTimer||(this.onlineTimer=App.K16.doTimer(1e3,0,function(){return e.ZM10(e.model)},this)):(this.onlineTimer&&App.K16.rBH(this.onlineTimer),delete this.onlineTimer)},t.prototype.onBigHandler=function(){this.type=1,this.clickBtn1.source="v1_btn_yellow_xuanzhong3_png",this.clickBtn2.source="v1_btn_yellow_changtai3_png",this.ZJ26(this.model),this.GX5()},t.prototype.onSwitchTab=function(t){t.currentTarget==this.rbTask?this.tabIndex=0:t.currentTarget==this.rbOnline&&(this.tabIndex=1);var e=this.model;this.ZJ26(e),this.GX5()},t.prototype.ZT26=function(){this.type=2,this.clickBtn2.source="v1_btn_yellow_xuanzhong3_png",this.clickBtn1.source="v1_btn_yellow_changtai3_png",this.ZJ26(this.model),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG23&&(this.ZJ26(t),this.ZF77()),this.GX5()},t.prototype.ZF77=function(){var t=TG73.FB85(1)+TG73.FK3(1)+TG73.FA1(1);this.imgNew1.visible=0<t;var e=TG73.FB85(2)+TG73.FK3(2)+TG73.FA1(2);this.imgNew2.visible=0<e},t.prototype.ZX87=function(){App.CM.apF(O6.B92,M1.A28)},t.prototype.GX5=function(){if(this.bigAs=TG73.getMyAs(1),this.smallAs=TG73.getMyAs(2),this.bigAs?(this.apprenticeItem1.contentGroup.visible=!0,this.apprenticeItem1.setData(this.bigAs)):this.apprenticeItem1.contentGroup.visible=!1,this.smallAs?(this.apprenticeItem2.contentGroup.visible=!0,this.apprenticeItem2.setData(this.smallAs)):this.apprenticeItem2.contentGroup.visible=!1,this.group1.visible=this.group2.visible=this.group3.visible=this.group4.visible=!1,this.bigAs||this.smallAs){this.group1.visible=this.group2.visible=this.group3.visible=!0;var t=1==this.type?this.bigAs:this.smallAs;if(this.finishGroup.visible=this.itemScroller.visible=this.gOnline.visible=!1,this.rbOnline.visible=this.rbTask.visible=!0,t)if(0<(1==this.type?t.FJ24():t.ZP42()))if(this.rbOnline.imgNew.visible=0<TG73.FA1(this.type),this.rbTask.imgNew.visible=0<TG73.FB85(this.type),0==this.tabIndex){this.itemScroller.visible=!0,this.itemList.itemRendererSkinName="MasterAwardItemSkin",this.itemList.itemRenderer=MasterAwardItem;var e=TG73.FD26(t.aid);this.itemCollection.replaceAll(P7.copyTab(e)),this.lbStr4.textFlow=O3.tr2(7365)}else 1==this.tabIndex&&(this.gOnline.visible=!0,this.ZM10(this.model),this.labTr7360.text=O3.tr(7376,t.on?O3.tr(7361):O3.tr(7362)),this.labTr7360.textColor=t.on?_cc.green:_cc.red,this.lbStr4.textFlow=O3.tr2(7366));else this.rbOnline.visible=this.rbTask.visible=!1,this.finishGroup.visible=!0,this.masterAsFinishItem1&&this.masterAsFinishItem1.setData({as:t,type:1}),this.masterAsFinishItem2&&this.masterAsFinishItem2.setData({as:t,type:2})}else this.group4.visible=!0},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.itemList.scrollV=0,this.itemScroller.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.gotoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX87,this),this.clickBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBigHandler,this),this.clickBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT26,this),this.rbOnline.removeEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.rbTask.removeEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.onlineTimer&&App.K16.rBH(this.onlineTimer),delete this.onlineTimer,this.itemCollection.removeAll(),App.THH32.rEf(this.pbTime.gStar,"wdsg_jgsxtxa_sa_001")},t.prototype.endScroller=function(){},t}(BaseEuiView);__reflect(MasterApprenticeView.prototype,"MasterApprenticeView");var MasterAsFinishItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MasterAsFinishItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t.itemCollection=new eui.ArrayCollection,t.itemList.dataProvider=t.itemCollection,t.itemList.itemRenderer=ItemIcon,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5028)),this.costLabel.textFlow=M18.HTP.parse(O3.tr(5029)),this.stateLabel.textFlow=M18.HTP.parse(O3.tr(5030)),this.finishBtn.label=O3.tr(5031)},t.prototype.onAddToStage=function(){this.finishBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP41,this)},t.prototype.onRemoveStage=function(){this.finishBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP41,this),this.itemCollection.removeAll()},t.prototype.updateViews=function(){var t;1==this.data.type?(this.nameLabel.text=O3.tr(1907),this.nameLabel.textColor=7716890,this.costLabel.visible=!0,this.finishBtn.visible=!0,this.data.as&&0<this.data.as.ZP42()?(this.finishBtn.visible=!1,this.stateLabel.visible=!0):(this.finishBtn.visible=!0,this.stateLabel.visible=!1),t=TG73.FB1()):2==this.data.type&&(this.nameLabel.text=O3.tr(1908),this.nameLabel.textColor=15691279,this.costLabel.visible=!1,this.finishBtn.visible=!1,this.stateLabel.visible=!0,t=TG73.FB2()),this.itemCollection.replaceAll(t)},t.prototype.ZP41=function(){App.CM.apF(O6.B92,M1.A4,this.data.as.aid)},t.prototype.setData=function(t){this.data=t,this.updateViews()},t}(eui.Component);__reflect(MasterAsFinishItem.prototype,"MasterAsFinishItem");var MasterAwardItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI(),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ItemIcon},t.prototype.initUI=function(){P7.FD53(this.getBtn,1),this.noLabel.textFlow=M18.HTP.parse(O3.tr(4038)),this.getBtn.label=O3.tr(4039)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.nameLabel.textFlow=M18.HTP.parse(O3.tr(4037,this.data.taskDes)),this.data.finish?1==this.data.state?(this.getImg.visible=!1,this.getBtn.visible=!0,this.noLabel.visible=!1):2==this.data.state?(this.getImg.visible=!1,this.getBtn.visible=!1,this.noLabel.visible=!0):3==this.data.state&&(this.getImg.visible=!0,this.getBtn.visible=!1,this.noLabel.visible=!1):(this.getImg.visible=!1,this.getBtn.visible=!1,this.noLabel.visible=!0);var t=this.data.ZX88();this.itemCollection.replaceAll(t)},t.prototype.onGetHandler=function(){App.CM.apF(O6.B92,M1.A9,this.data.id,this.data.aid)},t.prototype.onAddToStage=function(){this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this)},t.prototype.onRemoveStage=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.itemCollection.removeAll()},t}(eui.ItemRenderer);__reflect(MasterAwardItem.prototype,"MasterAwardItem");var MasterFinishItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=MasterFinishItemSkin,t.touchEnabled=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t.itemCollection=new eui.ArrayCollection,t.itemList.dataProvider=t.itemCollection,t.itemList.itemRenderer=ItemIcon,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.finishBtn.label=O3.tr(5032),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5033))},t.prototype.onAddToStage=function(){this.finishBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP41,this)},t.prototype.onRemoveStage=function(){this.finishBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP41,this),this.itemCollection.removeAll()},t.prototype.updateViews=function(){var t;1==this.type?(this.nameLabel.text=O3.tr(1907),this.nameLabel.textColor=7716890,this.costImg.visible=!1,this.costLabel.text=O3.tr(1918),this.costLabel.x=460,t=TG73.FF27()):2==this.type&&(this.nameLabel.text=O3.tr(1908),this.nameLabel.textColor=15691279,this.costImg.visible=!0,this.costLabel.text=L8.FC47()[1],this.costLabel.x=467,t=TG73.FF28()),this.itemCollection.replaceAll(t)},t.prototype.setData=function(t){this.type=t,this.updateViews()},t.prototype.ZP41=function(){1==this.type?this.onSend():2==this.type&&App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(1919,L8.FC47()[1])),this,this.onSend)},t.prototype.onSend=function(){var t=TG73.FL86();App.CM.apF(O6.B92,M1.A15,t.aid,this.type)},t}(eui.Component);__reflect(MasterFinishItem.prototype,"MasterFinishItem");var MasterGetItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.noBtn.visible=!1,this.yesBtn.visible=!1,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4026)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4027)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4028)),this.inviteLabel.textFlow=M18.HTP.parse(O3.tr(4029)),this.getBtn.label=O3.tr(4030)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.nameLabel.textFlow=M18.HTP.parse(O3.tr(4023,this.data.name)),this.imgV.x=this.nameLabel.x+this.nameLabel.width,this.sroceLabel.textFlow=M18.HTP.parse(O3.tr(4025,this.data.sc)),this.lvLabel.textFlow=M18.HTP.parse(O3.tr(4024,this.data.lv)),this.avatarHead.source=this.data.icon,this.avatarHead.width=this.avatarHead.height=82,this.data.on?(this.onlineLabel.text=O3.tr(1904),this.onlineLabel.textColor=37119):(this.onlineLabel.text=O3.tr(1905),this.onlineLabel.textColor=16711680),this.data.as?(this.getBtn.visible=!1,this.inviteLabel.visible=!0):(this.getBtn.visible=!0,this.inviteLabel.visible=!1)},t.prototype.onGetHandler=function(){TG73.canGetAs()&&App.CM.apF(O6.B92,M1.A21,this.data.aid)},t.prototype.onAddToStage=function(){this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this)},t.prototype.onRemoveStage=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this)},t}(eui.ItemRenderer);__reflect(MasterGetItem.prototype,"MasterGetItem");var MasterGetView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MasterInviteSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.titleLabel1.text=O3.tr(1915),this.titleLabel2.text=O3.tr(1916),"japan"===platform.name?(this.titleLabel1.x=120,this.titleLabel2.x=350,this.needLabel.x=500):(this.titleLabel1.x=180,this.titleLabel2.x=320,this.needLabel.x=420);var t=TG73.FF26(),e=N12.FK5(t[0]);this.needLabel.textFlow=M18.HTP.parse(O3.tr(4022,e,t[1]))},t.prototype.initData=function(){s.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=MasterGetItem},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.itemScroller.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.needLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNeed,this);var i=TG73.FI78();i?(this.ap=new InvitationInfoVo,this.ap.ZC91(P7.copyTab(i)),TG73.FG41()):(this.ap=null,App.CM.apF(O6.B92,M1.A11)),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5()},t.prototype.GX5=function(){if(this.ap)this.itemCollection.replaceAll([this.ap]);else{var t=TG73.getAps();this.itemCollection.replaceAll(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.itemScroller.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.needLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNeed,this),this.itemCollection.removeAll()},t.prototype.onNeed=function(){var t=TG73.FF26(),e=parseInt(t[0]);App.VM.open(O7.G87,e)},t.prototype.endScroller=function(){this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.arrowImg.visible=!1:this.arrowImg.visible=!0},t}(BaseEuiView);__reflect(MasterGetView.prototype,"MasterGetView");var MasteringInviteItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI(),this.getBtn.visible=!1,this.inviteLabel.visible=!1},t.prototype.initUI=function(){P7.FD53(this.yesBtn,1),this.lbStr1.text=O3.tr(1127),this.lbStr2.text=O3.tr(2621),this.lbStr3.text=O3.tr(5886),this.noBtn.label=O3.tr(4193),this.getBtn.label=O3.tr(2641),this.getBtn.label=O3.tr(6443),this.yesBtn.label=O3.tr(6457),this.inviteLabel.text=O3.tr(5933)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.nameLabel.text=this.data.name,this.imgV.x=this.nameLabel.x+this.nameLabel.width,this.sroceLabel.text=this.data.sc+"",this.lvLabel.text=this.data.lv+"",this.avatarHead.source=this.data.icon,this.avatarHead.width=this.avatarHead.height=82,this.data.on?(this.onlineLabel.text=O3.tr(1904),this.onlineLabel.textColor=37119):(this.onlineLabel.text=O3.tr(1905),this.onlineLabel.textColor=16711680),TG73.FL86()?P16.sGF(this.yesBtn,!0):P16.sGF(this.yesBtn,!1)},t.prototype.onAvatar=function(){if(this.data){var t={nId:this.data.aid,sName:this.data.name};App.CM.apF(O6.B84,L14.A20,t)}},t.prototype.yesHandler=function(){App.CM.apF(O6.B92,M1.A18,this.data.aid,1)},t.prototype.noHandler=function(){App.CM.apF(O6.B92,M1.A18,this.data.aid,2)},t.prototype.onAddToStage=function(){this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.noHandler,this),this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.yesHandler,this),this.avatarHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAvatar,this)},t.prototype.onRemoveStage=function(){this.noBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.noHandler,this),this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.yesHandler,this),this.avatarHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAvatar,this)},t}(eui.ItemRenderer);__reflect(MasteringInviteItem.prototype,"MasteringInviteItem");var MasterInviteView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MasterInviteSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.titleLabel1.text=O3.tr(1917),this.titleLabel1.x=220,this.titleLabel2.visible=!1,this.needLabel.visible=!1,this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=MasteringInviteItem},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.itemScroller.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),App.CM.apF(O6.B92,M1.A2)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),this.GX5()},t.prototype.ZX87=function(){},t.prototype.GX5=function(){var t=TG73.getIvs();this.itemCollection.replaceAll(t),this.itemCollection.refresh()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.itemScroller.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.itemCollection.removeAll()},t.prototype.endScroller=function(){this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.arrowImg.visible=!1:this.arrowImg.visible=!0},t}(BaseEuiView);__reflect(MasterInviteView.prototype,"MasterInviteView");var MasterMainView=function(r){function t(t,e){var i=r.call(this,t,e)||this;i.sGN("release_shitu"),App.VM.rgS(O7.G50,O7.D29,"MasterMyMasterView",i.content),App.VM.rgS(O7.G50,O7.B77,"MasterApprenticeView",i.content),App.VM.rgS(O7.G50,O7.F2,"MasterInviteView",i.content),App.VM.rgS(O7.G50,O7.HH52,"MasterGetView",i.content),i.helpBtn.visible=!0;var s=[O3.tr(1900),O3.tr(1901),O3.tr(1902),O3.tr(1903)],o=[O7.D29,O7.B77,O7.F2,O7.HH52];return i.btnList=new ButtonList(s,o,i.ZQ23.bind(i)),i.btnList.init(),i.btnGroup.addChild(i.btnList),i.btnShop=new com.Button,i.btnShop.bgStr="v1_btn_shengwangshangdian_png",i.content.addChild(i.btnShop),i.btnShop.x=60,i.btnShop.y=-60,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var i=new MasterTop(this);this.content.addChild(i),i.top=0;var s=App.CM.gtM(O6.B92);this.ZF77(s),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopView,this);var o=t[0]||O7.D29;this.ZQ23(o)},t.prototype.openShopView=function(){var t=O4.getLv(),e=N15.FG47(P12.A14);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.I3,P12.A14)},t.prototype.openHelpView=function(){var t={title:O3.tr(1901),content:L8.init.help.value};this.aCF(O6.C18,O10.A24,t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this,t),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openShopView,this)},t.prototype.ZQ23=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.l;switch(t){case O7.D29:this.title=O3.tr(1900),this.btnList.ZM66(t);break;case O7.B77:this.title=O3.tr(1901),this.btnList.ZM66(t);break;case O7.F2:this.title=O3.tr(1902),this.btnList.ZM66(t);break;case O7.HH52:var i=L8.FL66()+L8.FK1();if(e<i){var s=K18.init.commonDesc1.value;return void P18.sDP(M18.FM18(s,i))}this.title=O3.tr(1903),this.btnList.ZM66(t)}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t instanceof TG23&&this.ZF77(t)},t.prototype.ZF77=function(t){var e=TG73.FI79()+TG73.FB84()+TG73.FL87()+TG73.FA8();this.btnList.ZHH58(O7.D29,0<e?1:0);var i=TG73.FI80(1)+TG73.FI80(2)+TG73.FB85(1)+TG73.FB85(2)+TG73.FK3(1)+TG73.FK3(2)+TG73.FA1(1)+TG73.FA1(2);this.btnList.ZHH58(O7.B77,0<i?1:0);var s=TG73.haveInvs();this.btnList.ZHH58(O7.F2,0<s?1:0);var o=THH27.FD37();this.btnShop.imgNew.visible=0<o},t}(BasePanelView);__reflect(MasterMainView.prototype,"MasterMainView");var MasterMyMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.tabIndex=0,i.skinName="MasterMyMasterNewSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B92)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),P7.FD53(this.expBtn,1),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4043)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4044)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4045)),this.tipsLabel.textFlow=M18.HTP.parse(O3.tr(4011)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4013)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4014)),this.rbTask.label=O3.tr(7363),this.rbOnline.label=O3.tr(7364),this.expBtn.label=O3.tr(4015),App.THH32.aUE(this.pbTime.gStar,"wdsg_jgsxtxa_sa_001",0,0,0)},t.prototype.initData=function(){s.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=MasterTaskItem,this.dgOnlineReward.dataProvider=this.onlineRewardDataSource=new eui.ArrayCollection,this.dgOnlineReward.itemRenderer=MasterOnlineRewardItem,this.pbTime.labelDisplay.visible=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.itemScroller.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX87,this),this.expBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExp,this),this.avatarHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAvatar,this),this.rbOnline.addEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.rbTask.addEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.cdHandler||(this.GY14(),this.cdHandler=App.K16.doTimer(1e3,0,this.GY14,this,null,this)),this.GX5(this.model)},t.prototype.onAvatar=function(){var t=TG73.FL86();if(t){var e={nId:t.aid,sName:t.name};App.CM.apF(O6.B84,L14.A20,e)}},t.prototype.onSwitchTab=function(t){t.currentTarget==this.rbTask?this.tabIndex=0:t.currentTarget==this.rbOnline&&(this.tabIndex=1);var e=this.model;this.ZJ26(e),this.GX5(e)},t.prototype.ZJ26=function(t){var e=this,i=t.FL86();i&&i.on&&0<i.FJ24()&&1==this.tabIndex?this.onlineTimer||(this.onlineTimer=App.K16.doTimer(1e3,0,function(){return e.ZM10(e.model)},this)):(this.onlineTimer&&App.K16.rBH(this.onlineTimer),delete this.onlineTimer)},t.prototype.onExp=function(){App.CM.apF(O6.B92,M1.A13,this.msData.aid,1)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG23&&this.ZJ26(t),this.GX5(this.model)},t.prototype.ZX87=function(){if(0<TG73.FF29())P18.sDP(O3.tr(549));else{var t={nid:F8.A15,channelId:1,param:""};TG73.FHH59(),App.CM.apF(O6.C13,O12.A13,t)}},t.prototype.GX5=function(t){if(this.msData=TG73.FL86(),this.group1.visible=this.group2.visible=this.group3.visible=!1,this.msData){this.group1.visible=this.group2.visible=!0,this.nameLabel.textFlow=M18.HTP.parse(O3.tr(4009,this.msData.name)),this.imgV.x=this.nameLabel.x+this.nameLabel.width,this.lvLabel.textFlow=M18.HTP.parse(O3.tr(4010,this.msData.lv)),this.avatarHead.source=this.msData.icon,this.avatarHead.width=this.avatarHead.height=82,this.msData.on?(this.onlineLabel.text=O3.tr(1904),this.onlineLabel.textColor=37119):(this.onlineLabel.text=O3.tr(1905),this.onlineLabel.textColor=16711680),this.labTr7360.text=O3.tr(7360,this.msData.on?O3.tr(7361):O3.tr(7362)),this.labTr7360.textColor=this.msData.on?_cc.green:_cc.red;var e=TG73.getExp(1);this.expBtn.touchEnabled=0<e?(P16.sGF(this.expBtn,!1),!0):(e=0,P16.sGF(this.expBtn,!0),!1),P7.FD53(this.expBtn,e);var i=M18.FM20(e,2,1e6);this.expLabel.text=O3.tr(1911,i);var s=this.msData.FJ24();if(this.gTab.visible=this.gFinish.visible=!1,0<s){this.gTab.visible=!0,this.rbOnline.imgNew.visible=TG73.FC48(1,this.msData.aid),this.rbTask.imgNew.visible=TG73.FB84(),this.taskGroup.visible=0==this.tabIndex,this.gOnline.visible=!this.taskGroup.visible,this.finishTips.visible=!1,this.leftTimeTips.visible=!0;var o=Math.floor(s/86400);if(0==o?(this.dayLabel.text=O3.tr(1912),this.lbCs.text=O3.tr(1913)):(this.lbCs.text=O3.tr(1914),this.dayLabel.text=O3.tr(1906,o)),TG73.FHH58(this.msData.aid)?(this.rewardTips.visible=!1,this.leftTimeTips.visible=!0):(this.rewardTips.visible=!0,this.leftTimeTips.visible=!1),0==this.tabIndex){var r=TG73.FK2();this.itemCollection.replaceAll(P7.copyTab(r)),this.lbStr5.textFlow=O3.tr2(7370)}else 1==this.tabIndex&&(this.ZM10(t),this.lbStr5.textFlow=O3.tr2(7366))}else this.finishTips.visible=!0,this.leftTimeTips.visible=!1,this.rewardTips.visible=!1,this.taskGroup.visible=!1,this.gFinish.visible=!0,this.masterFinishItem1||(this.masterFinishItem1=new MasterFinishItem,this.masterFinishItem1.setData(1),this.finishGroup.addChild(this.masterFinishItem1)),this.masterFinishItem2||(this.masterFinishItem2=new MasterFinishItem,this.masterFinishItem2.setData(2),this.finishGroup.addChild(this.masterFinishItem2)),this.itemCollection.replaceAll([]);this.lbStr5.visible=!this.gFinish.visible}else this.group3.visible=!0},t.prototype.GY14=function(){if(0<TG73.FF29()){var t=Math.ceil(TG73.FF29());P16.sGF(this.sendBtn,!0),this.sendBtn.label=O3.tr(1910,t)}else P16.sGF(this.sendBtn,!1),this.sendBtn.label=O3.tr(1909)},t.prototype.ZM10=function(t){var s=this,e=t.FL86(),i=e.aid,o=e.on,r=t.mt[i].seconds;this.gP.validateNow(),this.updatePB(0,r),this.pbTime.gStar.visible=!!o&&0<L8.FA10(0,r);var n=TG73.FB83(1,r,t.mta[i],i);this.onlineRewardDataSource.replaceAll(n);var a=0;n.forEach(function(t,e){var i=s.gP.getChildAt(e+1);i.title=O3.tr(7369,t.data.seconds/60),i.select=r>=t.data.seconds,a=i.select?e+1:a})},t.prototype.updatePB=function(t,e){for(var i=[],s=1;s<=4;s++){var o=this.gP.getChildAt(s);i.push(o.x)}this.pbTime.maximum=this.gP.width;var r,n=e,a=0==t?L8.MasterOL:L8.discipleOL,h=0;for(r=a.length-1;0<=r&&!(n>=a[r].seconds);r-=1);if(r>=i.length-1)h=this.pbTime.maximum;else{var p=a[r]?a[r].seconds:0,l=i[r]?i[r]:0;h=l+(n-p)/(a[r+1].seconds-p)*(i[r+1]-l)}this.pbTime.value=h},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.itemList.scrollV=0,this.itemScroller.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.endScroller,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX87,this),this.expBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onExp,this),this.avatarHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAvatar,this),this.rbOnline.removeEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.rbTask.removeEventListener(eui.UIEvent.CHANGE,this.onSwitchTab,this),this.cdHandler&&(App.K16.rBH(this.cdHandler),this.cdHandler=null),this.onlineTimer&&App.K16.rBH(this.onlineTimer),delete this.onlineTimer,App.THH32.rEf(this.pbTime.gStar,"wdsg_jgsxtxa_sa_001"),this.itemCollection.removeAll()},t.prototype.endScroller=function(){this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.arrowImg.visible=!1:this.arrowImg.visible=!0},t}(BaseEuiView);__reflect(MasterMyMasterView.prototype,"MasterMyMasterView");var MasterOnlineRewardItem2=function(e){function t(){var t=e.call(this)||this;return t.skinName="MasterOnlineItemSkin2",t}return __extends(t,e),t.prototype.onClick=function(){App.CM.apF(O6.B92,M1.A23,1,this.data.aid,this.data.data.seconds)},t}(MasterOnlineRewardItem);__reflect(MasterOnlineRewardItem2.prototype,"MasterOnlineRewardItem2");var MasterTaskItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI(),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ItemIcon},t.prototype.initUI=function(){P7.FD53(this.getBtn,1),this.getBtn.label=O3.tr(4040),this.clickBtn.label=O3.tr(5889)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.nameLabel.textFlow=M18.HTP.parse(O3.tr(4041,this.data.taskDes)),this.numLabel.textFlow=M18.HTP.parse(O3.tr(4042,this.data.progress,this.data.needCount)),TG73.FD25(this.data.id)?(this.getImg.visible=!0,this.getBtn.visible=!1,this.clickBtn.visible=!1):this.data.isFinish()?(this.getImg.visible=!1,this.getBtn.visible=!0,this.clickBtn.visible=!1):(this.getImg.visible=!1,this.getBtn.visible=!1,this.clickBtn.visible=!0);var t=this.data.getExpDrop();this.itemCollection.replaceAll(t)},t.prototype.ZT27=function(){TG84.FM16(this.data.linked)},t.prototype.onGetHandler=function(){App.CM.apF(O6.B92,M1.A6,this.data.id)},t.prototype.onAddToStage=function(){this.clickBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT27,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this)},t.prototype.onRemoveStage=function(){this.clickBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT27,this),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetHandler,this),this.itemCollection.removeAll()},t}(eui.ItemRenderer);__reflect(MasterTaskItem.prototype,"MasterTaskItem");var MasterTop=function(i){function t(t){var e=i.call(this)||this;return e.skinName="MasterTopSkin",e.initUI(),e}return __extends(t,i),t.prototype.initUI=function(){},t}(eui.Component);__reflect(MasterTop.prototype,"MasterTop");var InvitationInfoVo=function(){function t(){this.day=0}return t.prototype.initData=function(t){},t.prototype.ZC91=function(t){this.aid=t.aid||this.aid,this.name=t.name||this.name,this.lv=t.lv||this.lv,this.sc=t.sc||this.sc,this.on=P7.getValue(t.on,this.on),this.as=P7.getValue(t.as,this.as),this.icon=t.icon||this.icon,this.gender=t.gender||this.gender,this.c=t.c||this.c,(t.day||0==t.day)&&(this.day=P7.getValue(t.day,this.day),this.lastLoadTime=P6.getTime(!0))},t.prototype.getDayTime=function(){return this.day+(P6.getTime(!0)-this.lastLoadTime)},t.prototype.FJ24=function(){var t=L8.FHH57(),e=P6.getTime(!0)-this.lastLoadTime,i=t-this.day-e;return 0<i?i:0},t.prototype.ZP42=function(){var t=L8.FB82(),e=P6.getTime(!0)-this.lastLoadTime,i=t-this.day-e;return 0<i?i:0},t}();__reflect(InvitationInfoVo.prototype,"InvitationInfoVo");var MasterAsTaskVo=function(){function t(){this.state=0}return t.prototype.initData=function(t){this.id=t.id||0,this.taskDes=t.taskdes||"",this.mode=t.mode||0,this.needCount=t.needcount||0,this.bindGold=t.bindgold||0,this.exp=t.exp||0,this.coin=t.coin||0,this.dropId=t.dropid||"",this.masterDropId=t.masterdropid||"",this.linked=t.linked||""},t.prototype.ZC91=function(t){this.state=P7.getValue(t.v,this.state)},t.prototype.setFinish=function(t){this.finish=t},t.prototype.ZX88=function(){var s=[],t=M18.FL28(this.masterDropId,";",":");return t&&0<t.length&&t.forEach(function(t){var e=N12.gID(t[0]);if(e){var i={data:e,ct:parseInt(t[1])};s.push({itemData:i,isBottom:!1,scale:.7})}}),s},t}();__reflect(MasterAsTaskVo.prototype,"MasterAsTaskVo");var MasterOnlineVo=function(){function t(t){this.onlineState=0,this.update(t)}return t.prototype.update=function(t){this.tdf=P6.getTime(),this._seconds=t},Object.defineProperty(t.prototype,"seconds",{get:function(){return this.onlineState?Math.floor(this._seconds+(P6.getTime()-this.tdf)/1e3):Math.floor(this._seconds)},enumerable:!0,configurable:!0}),t}();__reflect(MasterOnlineVo.prototype,"MasterOnlineVo");var MasterTaskVo=function(){function t(){this.progress=0,this.state=2}return t.prototype.initData=function(t){this.id=t.id||0,this.taskDes=t.taskdes||"",this.mode=t.mode||0,this.needCount=t.needcount||0,this.bindGold=t.bindgold||0,this.exp=t.exp||0,this.coin=t.coin||0,this.dropId=t.dropid||"",this.masterDropId=t.masterdropid||"",this.linked=t.linked||""},t.prototype.reset=function(){this.progress=0,this.state=2},t.prototype.ZC91=function(t){this.progress=P7.getValue(t.v,this.progress),TG73.FD25(this.id)?this.state=3:this.progress==this.needCount&&(this.state=1)},t.prototype.updateState=function(){TG73.FD25(this.id)&&(this.state=3)},t.prototype.isFinish=function(){return this.progress>=this.needCount},t.prototype.getExpDrop=function(){var t=[],e=N12.gID("75004");if(e){var i=App.CM.gtM(O6.B82),s={data:e,ct:Math.floor(K18.FHH93(i.avatarInfo.l)*this.exp)};t.push({itemData:s,isBottom:!1,scale:.7})}return t},t}();__reflect(MasterTaskVo.prototype,"MasterTaskVo");var D5=function(){function s(){}return s.FK35=function(t){s.init=t.military_init,s.book=t.military_book,s.lvdata=t.military_lvdata,s.FHH61(),s.FL88(t.military_spdata)},s.FL88=function(t){for(var e in s.spData={},t){var i=t[e];s.spData[i.spattrid]||(s.spData[i.spattrid]={}),s.spData[i.spattrid][i.id]=i}},s.gIV=function(t){return s.init[t].value},s.FK4=function(){return this.book},s.FF30=function(t){return this.book[t]},s.FD27=function(t){return this.lvdata[t]},s.FHH60=function(){return this.lvdata},s.FI81=function(t){var e=s.FF30(t);return M10.gAG(e.baseattr)},s.FHH61=function(){s.breakList={};var t=s.FHH60();for(var e in t)t[e].upcost&&(s.breakList[t[e].lv]=t[e].upcost)},s.FI82=function(){return s.breakList},s.FL89=function(t,e){var i,s;for(var o in this.spData[t]){(r=this.spData[t][o]).reqbooklv<=e&&(!i||i.reqbooklv<r.reqbooklv)&&(i=r)}if(i)0<i.nextid&&(s=this.spData[t][i.nextid]);else for(var o in this.spData[t]){var r=this.spData[t][o];(!s||s.reqbooklv>r.reqbooklv)&&(s=r)}return{curData:i,nextData:s}},s}();__reflect(D5.prototype,"D5");var D6=function(){function t(){}return t.A12=0,t.A3=1,t.A4=2,t.A5=3,t.A6=4,t.A11=5,t.A1=6,t.A2=7,t.A9=8,t.A10=9,t.A7=10,t.A8=11,t.ENSIGN_PUSH=100,t.ENSIGN_LOADDATA_REQ=101,t.ENSIGN_LOADDATA_RES=102,t.ENSIGN_LVUP_REQ=103,t.ENSIGN_LVUP_RES=104,t.ENSIGN_EXCHANGE_REQ=105,t.ENSIGN_EXCHANGE_RES=106,t.ENSIGN_BUY_REQ=107,t.ENSIGN_BUY_RES=108,t}();__reflect(D6.prototype,"D6");var A16=function(){function t(){}return t.A2=1,t.A3=2,t.A1=3,t}();__reflect(A16.prototype,"A16");var TA72=function(i){function t(){var t=i.call(this)||this,e=new TC79(t);return e.aLV(O7.C28),e.aLV(O7.I37),e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.MilitaryFlag),e.aLV(O7.MilitaryFlagExchangeView),e.aLV(O7.MilitaryFlagChildView),e.aLV(O7.MilitaryFlagConView),t.rgF(D6.A12,t.GX81,t),t.militaryProxy=new TC80(t),t.rgF(D6.A5,t.GP50,t),t.rgF(D6.A6,t.GI8,t),t.rgF(D6.A1,t.GL73,t),t.rgF(D6.A2,t.GL74,t),t.rgF(D6.A9,t.GT46,t),t.rgF(D6.A10,t.GT47,t),t.rgF(D6.A7,t.GP51,t),t.rgF(D6.A8,t.GP52,t),t.rgF(D6.A11,t.GI8,t),t.rgF(D6.ENSIGN_PUSH,t.flagPushRes,t),t.rgF(D6.ENSIGN_LOADDATA_REQ,t.flagLoadReq,t),t.rgF(D6.ENSIGN_LOADDATA_RES,t.flagLoadRes,t),t.rgF(D6.ENSIGN_LVUP_REQ,t.flagLvUpReq,t),t.rgF(D6.ENSIGN_LVUP_RES,t.flagLvUpRes,t),t.rgF(D6.ENSIGN_EXCHANGE_REQ,t.flagExchangeReq,t),t.rgF(D6.ENSIGN_EXCHANGE_RES,t.flagExchangeRes,t),t.rgF(D6.ENSIGN_BUY_REQ,t.flagBuyReq,t),t.rgF(D6.ENSIGN_BUY_RES,t.flagBuyRes,t),App.VM.register(O7.C28,"MilitaryBookMainView",t,K17.UI_Main),t.rgF(D6.A3,t.GJ97,t),t.rgF(D6.A4,t.GJ98,t),App.VM.register(O7.MilitaryFlagChildView,"MilitaryFlagChildView",t,K17.UI_Main_TOP),App.VM.register(O7.MilitaryFlagExchangeView,"MilitaryFlagExchangeView",t,K17.UI_Main_TOP),App.VM.register(O7.MilitaryFlagConView,"MilitaryFlagConView",t,K17.UI_Main_TOP),App.VM.register(O7.MilitaryFlagAttrView,"MilitaryFlagAttrView",t,K17.UI_Main_TOP),App.VM.register(O7.MilitaryFlagDsView,"MilitaryFlagDsView",t,K17.UI_Main_TOP),t}return __extends(t,i),t.prototype.GX81=function(t){var e=this.gtM();e.setCurBook(t),e.notify("GX81")},t.prototype.GP50=function(){this.militaryProxy.ZF78()},t.prototype.GI8=function(t){if(200==t.head.state){var e=this.gtM();e.ZT28(t.body.bs),e.notify(P4.U99)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL73=function(){var t=this.gtM();t.curBook&&this.militaryProxy.ZD32(t.curBook)},t.prototype.GL74=function(t){if(200==t.head.state){var e=this.gtM();e.updateBook(t.body.b),e.notify(P4.S25)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT46=function(t,e,i){this.militaryProxy.ZJ27(t,e,i)},t.prototype.GT47=function(t){if(200==t.head.state){if(0<t.body.c){var e=O3.tr(2008,t.body.n,t.body.c);P18.showTipsDownToUpSp(e)}var i=this.gtM();i.updateBook(t.body.b),i.notify(P4.S25)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP51=function(){var t=this.gtM();t.curBook&&this.militaryProxy.ZF79(t.curBook)},t.prototype.GP52=function(t){if(200==t.head.state){var e=this.gtM();e.updateBook(t.body.b),e.notify(P4.S25)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.flagPushRes=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.updataFlag(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.flagLoadReq=function(){return this.militaryProxy.flagLoadReq()},t.prototype.flagLoadRes=function(t){t&&t.head&&200==t.head.state?this.gtM().updataFlag(t.body):P18.sDP(K18.getTips(t.head.state))},t.prototype.flagLvUpReq=function(t){this.militaryProxy.flagLvUpReq(t)},t.prototype.flagLvUpRes=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.updataFlag(t.body),e.notify(P4.W99)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.flagExchangeReq=function(t){this.militaryProxy.flagExchangeReq(t)},t.prototype.flagExchangeRes=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.updataFlag(t.body),P5.sIs(t.body.ob),e.notify(P4.S87)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.flagBuyReq=function(){this.militaryProxy.flagBuyReq()},t.prototype.flagBuyRes=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.updataFlag(t.body),P5.sIs(t.body.ob),e.notify(P4.X58)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GJ97=function(){var t=parseInt(D5.gIV("openLv"));if(O4.getLv()>=t)App.VM.open(O7.C28,O7.I37);else{var e=K18.init.commonDesc1.value;P18.sDP(M18.format(e,[t]))}},t.prototype.GJ98=function(){App.VM.close(O7.I37)},t}(TE11);__reflect(TA72.prototype,"TA72");var TC79=function(i){function t(t){var e=i.call(this,t)||this;return e.isUseGoldAlert=!0,e}return __extends(t,i),t.prototype.ZT28=function(t){for(var e in this.bookList||(this.bookList={}),t){var i=t[e];this.bookList[i.id]?this.bookList[i.id].updateData(i):this.bookList[i.id]=new MilitaryBookData(i)}},t.prototype.updataFlag=function(t){if(this.emList=t.em?t.em:this.emList,this.rn=0<=t.rn?t.rn:this.rn,this.exList=t.ex?t.ex:this.exList,t.id)if(this.emList[t.id]){this.emList[t.id];var e={id:t.id,lv:t.lv};this.emList[t.id]=e}else{e={id:t.id,lv:t.lv||0};this.emList[t.id]=e}},t.prototype.updateBook=function(t){this.bookList||(this.bookList={}),this.bookList[t.id]?this.bookList[t.id].updateData(t):this.bookList[t.id]=new MilitaryBookData(t)},t.prototype.ZT29=function(){return null!=this.bookList},t.prototype.getBookById=function(t){return this.bookList[t]},t.prototype.FK4=function(){return this.bookList},t.prototype.setCurBook=function(t){this.curBook=t},t.prototype.FL35=function(){var t=D5.gIV("maxLV");for(var e in this.bookList){if((s=this.bookList[e]).getBookLv()<t&&0<s.FL35())return 1}var i=D5.FK4();for(var e in i)if(!this.bookList[e]){var s=i[e];if(N12.giC(s.upitem)>=s.activenum)return 1}},t.prototype.getFlagRedNum=function(){if(!this.getMinBookLv())return 0;if(!MilitaryFlagUtils.isOpenFlag(!1))return 0;if(this.getConRed())return 1;for(var t=1;t<=6;t++)if(this.getFlagItemRed(t))return 1;return 0},t.prototype.getFlagItemRed=function(t){var e=this.getPartInfo(t);if(e.lv<MilitaryFlagConfig.lvMax){MilitaryFlagConfig.getLvUpAttr(e.id,Number(e.lv)+1);var i=MilitaryFlagConfig.getLvUpLvD(e.lv+1),s=MilitaryFlagConfig.gIV("matLv");if(Number(i.exp)<=N12.giC(s)&&Number(i.conditions)<=this.getMinBookLv())return 1}return 0},t.prototype.getMinBookLv=function(){for(var t=1e5,e=1;e<=8;e++){var i=this.bookList[e];if(!i)return 0;t>=i.showLv&&(t=i.showLv)}return Number(t)},t.prototype.getFlagConData=function(){var t=MilitaryFlagConfig.bqExchange,e=[];for(var i in t){var s=t[i],o={reset:1,count:this.getExListCount(i),max:s.limitnum,needs:P7.str2kv(s.material,";",":"),gives:P7.str2kv(s.exp,";",":"),eid:i};e.push(o)}return e},t.prototype.getExListCount=function(t){for(var e in this.exList)if(e==t)return this.exList[e];return 0},t.prototype.getPartInfo=function(t){for(var e in this.emList)if(this.emList[e].id==t)return this.emList[e];return{id:t,lv:0}},t.prototype.getAllJCAttr=function(){for(var t=[],e=1;e<=6;e++){var i=this.getPartInfo(e),s=MilitaryFlagConfig.getLvUpAttrD(i.id,i.lv,0),o={attr:MilitaryFlagConfig.FL55(s)};t.push(o)}return MilitaryFlagConfig.countAttr(t)},t.prototype.getDsLv=function(){for(var t="{}"==JSON.stringify(this.emList)?0:1e5,e=1;e<=6;e++){var i=this.emList[e]&&this.emList[e].lv?this.emList[e].lv:0;i<=t&&(t=i)}var s=MilitaryFlagConfig.bqMaster,o=0;for(var e in s){if(!(Number(s[e].lv)<=t))return o;o++}return o},t.prototype.getConRed=function(){if(O4.FF89(L17.MFLAG_CON))return 0;var t=this.getFlagConData();for(var e in t){var i=t[e],s=i.max,o=i.count,r=(i.reset,i.needs);i.gives;if(0<s-o&&N12.FL6(r))return 1}return 0},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TC79.prototype,"TC79");var TC80=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.U99,e.ZP43,e),e.rSM(P4.S25,e.GL74,e),e.rSM(P4.W80,e.GT47,e),e.rSM(P4.V2,e.GP52,e),e.rSM(P4.X96,e.ZP43,e),e.rSM(P4.Y16,e.flagPushRes,e),e}return __extends(t,i),t.prototype.ZF78=function(){var t={};t.type=P4.U98,t.body={},this.sSM(t)},t.prototype.ZP43=function(t){this.apF(D6.A6,t)},t.prototype.ZD32=function(t){var e={};e.type=P4.S24,e.body={bid:t},this.sSM(e)},t.prototype.GL74=function(t){this.apF(D6.A2,t)},t.prototype.ZJ27=function(t,e,i){var s={};s.type=P4.W79,s.body={bid:e,t:t,num:i},this.sSM(s)},t.prototype.GT47=function(t){this.apF(D6.A10,t)},t.prototype.ZF79=function(t){var e={};e.type=P4.V1,e.body={bid:t},this.sSM(e)},t.prototype.GP52=function(t){this.apF(D6.A8,t)},t.prototype.flagPushRes=function(t){this.apF(D6.ENSIGN_PUSH,t)},t.prototype.flagLoadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.S84,body:{}};s.rSMO(P4.S85,function(t){s.apF(D6.ENSIGN_LOADDATA_RES,t),e("加载兵旗数据完成")},s),s.sSM(i)})},t.prototype.flagLvUpReq=function(t){var e={type:P4.W98,body:{eid:t}};this.rSMO(P4.W99,this.flagLvUpRes,this),this.sSM(e)},t.prototype.flagLvUpRes=function(t){this.apF(D6.ENSIGN_LVUP_RES,t)},t.prototype.flagExchangeReq=function(t){var e={type:P4.S86,body:{target:t}};this.rSMO(P4.S87,this.flagExchangeRes,this),this.sSM(e)},t.prototype.flagExchangeRes=function(t){this.apF(D6.ENSIGN_EXCHANGE_RES,t)},t.prototype.flagBuyReq=function(){var t={type:P4.X57,body:{}};this.rSMO(P4.X58,this.flagBuyRes,this),this.sSM(t)},t.prototype.flagBuyRes=function(t){this.apF(D6.ENSIGN_BUY_RES,t)},t}(TG80);__reflect(TC80.prototype,"TC80");var TC81=function(){function t(){}return t.FI55=function(t){var e=App.CM.gtM(O6.A65),i=e.getBookById(t),s=e.getDsLv(),o=1+(s?Number(MilitaryFlagConfig.bqMaster[s].attradd):0),r={},n={},a={},h={},p=parseInt(D5.gIV("maxLV")),l=D5.FF30(t),c=THH1.FI55(l.baseattr);for(var u in c){var d=O4.FD72(parseInt(u)),v=parseInt(c[u]);null==h[u]&&(h[u]={value:0,name:d}),h[u].value=h[u].value+v*o}if(i){var f=i.getShowLv(),g=D5.FD27(f),m=THH1.FI55(g.addattr);for(var u in m){var y=O4.FD72(parseInt(u));v=parseInt(m[u]);n[u]={value:v*o+h[u].value,name:y}}if(p<=f)r={curData:n};else{var A=D5.FD27(f+1),b=THH1.FI55(A.addattr);for(var u in b){var T=O4.FD72(parseInt(u));v=parseInt(b[u]);a[u]={value:v*o+h[u].value,name:T}}r={curData:n,nextData:a}}}else{for(var u in h)n[u]={value:0,name:h[u].name};r={curData:n,nextData:h}}return r},t.FB3=function(){var t=App.CM.gtM(O6.A65),e=t.FK4(),i=0;for(var s in e){i+=e[s].getBookPower()}var o=t.getDsLv(),r=1+(o?Number(MilitaryFlagConfig.bqMaster[o].attradd):0);return Math.floor(i*r)},t.FK53=function(){var t=App.CM.gtM(O6.A65),e=App.CM.gtM(O6.B54),i=!!Practice.Utils.FG43(!1)&&0<e.FL35();return 0<t.FL35()||i},t}();__reflect(TC81.prototype,"TC81");var MilitaryFlagConfig=function(){function i(){}return i.FK35=function(t){i.init=t.ensign_init,i.bqLv=t.ensign_bqlv,i.bqExchange=t.ensign_bqexchange,i.bqMaster=t.ensign_bqmaster,i.saveNewConfig()},i.gIV=function(t){return i.init[t].value},i.saveNewConfig=function(){for(var t in this.new_bqLv={},this.lvMax=0,i.bqLv){var e=i.bqLv[t];this.new_bqLv[e.lv]=e,this.lvMax++}},i.getLvUpLvD=function(t){return this.new_bqLv[t]},i.getLvUpAttr=function(t,e){var i=[],s={attr:this.getLvUpLvD(1)["breakattr"+t].replace("|",";"),scale:0};i.push(s);for(var o=1;o<=e;o++){var r={attr:this.getLvUpLvD(o)["breakattr"+t].replace("|",";")};i.push(r)}var n=this.countAttr(i);this.FL55(n);return n},i.getLvUpAttrD=function(t,e,i){var s=[],o={attr:this.getLvUpLvD(1)["breakattr"+t].split("|")[i],scale:0};s.push(o);for(var r=1;r<=e;r++){var n={attr:this.getLvUpLvD(r)["breakattr"+t].split("|")[i]};s.push(n)}var a=this.countAttr(s);this.FL55(a);return a},i.countAttr=function(t){var e=[];for(var i in t){var s=t[i].attr,o=0<=t[i].scale?t[i].scale:1,r=this.FL56(s);for(var n in r){var a=this.isInList(r[n].k,e);if("-1"==a){var h={k:r[n].k,v:Number(r[n].v)*o};e.push(h)}else e[a].v=Number(e[a].v)+Number(r[n].v)*o}}return e},i.isInList=function(t,e){for(var i in e)if(e[i].k==t)return i;return"-1"},i.FL56=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={k:o[0],v:o[1]};e.push(r)}return e},i.FL55=function(t,e){void 0===e&&(e=1);var i="";for(var s in t)"0"!=s&&(i+=";"),i+=t[s].k+":"+Number(t[s].v)*e;return i},i}();__reflect(MilitaryFlagConfig.prototype,"MilitaryFlagConfig");var MilitaryFlagUtils=function(){function t(){}return t.isOpenFlag=function(t){var e=parseInt(MilitaryFlagConfig.gIV("openDay"));return!(App.CM.gtM(O6.B43).serOpenDay+1<e)||(t&&P18.sDP(O3.tr(8962)),!1)},t.getTepByPos=function(t){var e,i=this.getTepName(Number(t));return(e={})[1]={id:1,name:i+O3.tr(8956),show:0,initAttr:0,growAttr:0,power:0},e[2]={id:2,name:i+O3.tr(8957),show:0,initAttr:0,growAttr:0,power:0},e[3]={id:3,name:i+O3.tr(8958),show:0,initAttr:0,growAttr:0,power:0},e[101]={id:101,name:O3.tr(9001),show:1,initAttr:0,growAttr:0,power:3},e[102]={id:102,name:O3.tr(9002),show:1,initAttr:0,growAttr:0,power:3},e[103]={id:103,name:O3.tr(9003),show:1,initAttr:0,growAttr:0,power:.5},e},t.getTepByPos1=function(t){var e,i=this.getTepName(Number(t));return(e={})[1]={id:1,name:i+O3.tr(9006),show:0,initAttr:0,growAttr:0,power:0},e[2]={id:2,name:i+O3.tr(9007),show:0,initAttr:0,growAttr:0,power:0},e[3]={id:3,name:i+O3.tr(9008),show:0,initAttr:0,growAttr:0,power:0},e[101]={id:101,name:O3.tr(9001),show:1,initAttr:0,growAttr:0,power:3},e[102]={id:102,name:O3.tr(9002),show:1,initAttr:0,growAttr:0,power:3},e[103]={id:103,name:O3.tr(9003),show:1,initAttr:0,growAttr:0,power:.5},e},t.getTepName=function(t){var e;switch(t){case 1:e=O3.tr(8950);break;case 2:e=O3.tr(8951);break;case 3:e=O3.tr(8952);break;case 4:e=O3.tr(8953);break;case 5:e=O3.tr(8954);break;case 6:e=O3.tr(8955)}return e},t}();__reflect(MilitaryFlagUtils.prototype,"MilitaryFlagUtils");var MilitaryBookData=function(){function t(t){this.updateData(t)}return t.prototype.updateData=function(t){for(var e in t){var i=t[e];switch(e){case"id":this.id=i;break;case"exp":this.exp=i;break;case"lv":this.lv=i;break;case"un":this.upgradeNum=i;break;case"ps":this.breakList=i}}this.setShowLv()},t.prototype.setShowLv=function(){this.showLv=null;var t=D5.FI82();for(var e in t)this.lv>=parseInt(e)&&this.breakList.indexOf(parseInt(e))<0&&(!this.showLv||this.showLv>parseInt(e))&&(this.showLv=parseInt(e)-1);this.showLv||(this.showLv=this.lv)},t.prototype.getShowLv=function(){return this.showLv},t.prototype.getBookLv=function(){return this.lv},t.prototype.getBookExp=function(){return this.exp},t.prototype.getBookPower=function(){var t=D5.FI81(this.id),e=(parseInt(D5.gIV("normalExp")),D5.FD27(this.showLv));t+=M10.gAG(e.addattr);var i=D5.FF30(this.id),s=D5.FL89(i.spattrid,this.showLv);s.curData&&(t+=M10.gAG(s.curData.attr));return t},t.prototype.ZX89=function(){D5.FD27(this.showLv),this.lv,this.showLv;return this.lv>this.showLv?A16.A2:A16.A3},t.prototype.getCRTTime=function(){var t=M18.FL28(D5.gIV("multiple"),","),e=parseInt(D5.gIV("counter")),i=t[Math.floor(this.upgradeNum/e)]||t[t.length-1];return{rest:e-this.upgradeNum%e,multiple:i}},t.prototype.ZL51=function(){var t={1:0,10:0,50:0},e=D5.gIV("req2Item"),i=parseInt(D5.gIV("req1Cost")),s=N12.giC(e),o=parseInt(D5.gIV("req3cost")),r=N12.giC(N12.itemId.coin);return i<=s&&o<=r?(t[1]=1,10*i<=s&&10*o<=r&&(t[10]=1,50*i<=s&&50*o<=r&&(t[50]=1)),t):t},t.prototype.ZS65=function(){var t=D5.FD27(this.showLv+1),e=D5.FF30(this.id);return N12.giC(e.upitem)>=t.upcost?1:0},t.prototype.FL35=function(){switch(this.ZX89()){case A16.A3:case A16.A1:if(0<this.ZL51()[1])return 1;break;case A16.A2:return this.ZS65()}},t}();__reflect(MilitaryBookData.prototype,"MilitaryBookData");var ItemMilitaryBook=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemMilitaryBookSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBook,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBook,this)},Object.defineProperty(t.prototype,"initData",{get:function(){return this._initData},set:function(t){this._initData=t},enumerable:!0,configurable:!0}),t.prototype.dataChanged=function(){if(this.imgIcon.source=this.initData.icon,this.data)P16.sGF(this.imgIcon,!1),this.imgNotActivity.visible=!1,this.gpLv.visible=!0,this.lbLv.text=O3.tr(2e3,this.data.getShowLv()),this.data.getShowLv()<parseInt(D5.gIV("maxLV"))?this.imgRed.visible=0<this.data.FL35():this.imgRed.visible=!1;else{P16.sGF(this.imgIcon,!0),this.imgNotActivity.visible=!0,this.gpLv.visible=!1;var t=D5.FF30(this.initData.id);N12.giC(t.upitem)>=t.activenum?this.imgRed.visible=!0:this.imgRed.visible=!1}},t.prototype.ZT30=function(t){this.imgSelect.visible=t},t.prototype.onClickBook=function(){App.CM.apF(O6.A65,D6.A12,this.initData.id)},t.prototype.ZX71=function(){},t}(eui.ItemRenderer);__reflect(ItemMilitaryBook.prototype,"ItemMilitaryBook");var MilitaryBookMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){var t,e;s.prototype.initUI.call(this),App.VM.rgS(O7.C28,O7.I37,"MilitaryBookView",this.content),App.VM.rgS(O7.C28,O7.MilitaryFlag,"MilitaryFlagView",this.content),App.VM.rgS(O7.C28,O7.I52,"PracticeView",this.content),e=this.model.getMinBookLv()&&MilitaryFlagUtils.isOpenFlag(!1)?(t=[O3.tr(6677),O3.tr(8960),O3.tr(7960)],[O7.I37,O7.MilitaryFlag,O7.I52]):(t=[O3.tr(6677),O3.tr(7960),O3.tr(8960)],[O7.I37,O7.I52,O7.MilitaryFlag]),this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t);this.ZF80(),this.ZHH19();var i=t[0]||O7.I37;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t);if(t instanceof THH9)switch(e){case P4.V43:this.ZF80(),this.ZHH19()}t instanceof Practice.Model&&this.ZHH19(),t instanceof TC79&&this.ZF80(),t instanceof TG12&&this.ZF80()},t.prototype.ZF80=function(){var t=App.CM.gtM(O6.A65),e=t.FL35();this.btnList.ZHH58(O7.I37,e);var i=t.getFlagRedNum();this.btnList.ZHH58(O7.MilitaryFlag,i)},t.prototype.ZHH19=function(){var t,e=App.CM.gtM(O6.B54);t=!!Practice.Utils.FG43(!1)&&0<e.FL35()?1:0,this.btnList.ZHH58(O7.I52,t)},t.prototype.close=function(){s.prototype.close.call(this)},t.prototype.ZQ23=function(t){this.viewId=t,this.helpBtn.visible=!1;var e,i=App.CM.gtM(O6.B82).avatarInfo;switch(t){case O7.I37:if(e=parseInt(D5.gIV("openLv")),i.l<e){var s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[e])),-1}this.title=O3.tr(6677),this.btnList.ZM66(t);break;case O7.I52:if(!Practice.Utils.FG43(!0))return-1;this.title=O3.tr(7960),this.btnList.ZM66(t);break;case O7.MilitaryFlag:MilitaryFlagUtils.isOpenFlag(!1)&&this.model.getMinBookLv()?(this.title=O3.tr(8961),this.helpBtn.visible=!0,this.btnList.ZM66(t)):P18.sDP(O3.tr(8962))}},t.prototype.openHelpView=function(){var t,e;e=this.viewId==O7.MilitaryFlag?(t=O3.tr(8979),O3.tr(8980)):(t=O3.tr(8273),O3.tr(8274));var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t}(BasePanelView);__reflect(MilitaryBookMainView.prototype,"MilitaryBookMainView");var MilitaryBookView=function(a){function t(t,e){var i=a.call(this,t,e)||this;return i.sGN("release_book"),i.skinName=MilitaryBookSkin,i}return __extends(t,a),t.prototype.initData=function(){},t.prototype.initUI=function(){a.prototype.initUI.call(this),this.pBarPro.slideDuration=0,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(3952)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(3953)),this.lbItem.textFlow=M18.HTP.parse(O3.tr(3954)),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(3956)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(3959)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(3962)),this.btnUpg1.label=O3.tr(3964),this.btnUpg2.label=O3.tr(3965),this.btnUpg3.label=O3.tr(3966),this.btnBreak.label=O3.tr(3963),this.btnActive.label=O3.tr(5772),this.cbAutoSmelt.label=O3.tr(3967)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.open.call(this),this.btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX90,this),this.btnBreak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this),this.btnUpg1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpg1,this),this.btnUpg2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpg10,this),this.btnUpg3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpg50,this),this.lbLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this),this.bookItemList=[];for(var i=1;i<=8;i++){var s=new ItemMilitaryBook;this["gpBook"+i].addChild(s),s.horizontalCenter=0,s.verticalCenter=0,this.bookItemList.push(s)}var o=D5.FK4(),r=0;for(var i in o)this.bookItemList[r].initData=o[i],r++;var n=App.CM.gtM(O6.A65);n.setCurBook(this.bookItemList[0].initData.id),this.ZB17(n)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(a.prototype.uBM.call(this,t,e),t instanceof TC79)this.ZB17(t);else{var s=App.CM.gtM(O6.A65);this.ZB17(s)}},t.prototype.ZB17=function(t){for(var e in this.bookItemList){var i=this.bookItemList[e].initData,s=t.getBookById(i.id);this.bookItemList[e].data=s,this.bookItemList[e].ZT30(i.id==t.curBook)}var o=t.getBookById(t.curBook),r=D5.FF30(t.curBook);o?o.ZX89()==A16.A2?this.currentState="break":this.currentState="upgrade":this.currentState="active",this.imgCurBook.source=r.icon,this.lbName.textFlow=M18.HTP.parse(O3.tr(3951,r.name)),this.lbTotalPower.textFlow=M18.HTP.parse(O3.tr(2005,TC81.FB3().toString()));var n=1,a=TC81.FI55(r.id),h=N12.gID(r.upitem),p=N12.giC(r.upitem);for(var e in this.imgItem.setData(h),this.imgItem.setImgSize({w:40,h:40}),this.lbItemNum.textFlow=M18.HTP.parse(O3.tr(3955,p.toString())),a.curData){var l=a.curData[e];this["lbCurAttr"+n].textFlow=M18.HTP.parse(O3.tr(2002,l.name,Math.floor(l.value))),n++}var c=o?o.getShowLv():0,u=D5.FL89(r.spattrid,c);if(u.curData){var d=M18.FL28(u.curData.attr,":"),v=O4.FD72(parseInt(d[0])),f=(Math.ceil(1e3*parseFloat(d[1]))/10).toFixed(1);this.lbCurAttr4.textFlow=M18.HTP.parse(O3.tr(2006,v,f))}if(u.nextData){d=M18.FL28(u.nextData.attr,":");var g=O4.FD72(parseInt(d[0]));if(!u.curData){this.lbCurAttr4.textFlow=M18.HTP.parse(O3.tr(2006,g,0))}var m=(Math.ceil(1e3*parseFloat(d[1]))/10).toFixed(1);this.lbNextAttr4.textFlow=M18.HTP.parse(O3.tr(2007,g,m,u.nextData.reqbooklv))}if(!a.nextData)return this.pBarPro.labelFunction=function(t,e){return"0/0"},this.currentState="maxLv",void(this.gpAttr.width=this.gpCurAttr.width);for(var e in n=1,a.nextData){l=a.nextData[e];this["lbNextAttr"+n].textFlow=M18.HTP.parse(O3.tr(2003,l.name,Math.floor(l.value))),n++}switch(this.gpAttr.width=374,this.pBarPro.labelFunction=null,this.currentState){case"upgrade":var y=D5.FD27(o.getShowLv());this.pBarPro.maximum=y.reqexp,this.pBarPro.value=o.getBookExp();var A=D5.gIV("req2Item"),b=parseInt(D5.gIV("req1Cost")),T=N12.gID(A),C=N12.giC(A);this.imgGoodU.setData(T),this.imgGoodU.setImgSize({w:40,h:40}),this.lbCostGoodU.textFlow=M18.HTP.parse(O3.tr(3960,C,b)),this.lbCostGoodU.textColor=b<=C?_cc.dgreen:_cc.red;var w=parseInt(D5.gIV("req3cost")),O=N12.gID(N12.itemId.coin),M=N12.giC(N12.itemId.coin);this.imgCoin.setData(O),this.imgCoin.setImgSize({w:40,h:40}),this.lbCostCoin.textFlow=M18.HTP.parse(O3.tr(3961,w.toString())),this.lbCostCoin.textColor=w<=M?_cc.dgreen:_cc.red;var _=o.getCRTTime();this.lbTip.text=O3.tr(2001,_.rest,_.multiple);var F=o.ZL51();P7.FD53(this.btnUpg1,F[1]),P7.FD53(this.btnUpg2,F[10]),P7.FD53(this.btnUpg3,F[50]);break;case"break":this.validateNow();y=D5.FD27(o.getShowLv()+1);var E=N12.gID(r.upitem);this.lbCostName.textFlow=M18.HTP.parse(O3.tr(3957,E.name));var P=N12.giC(r.upitem);this.imgGood.setData(E),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(3958,P,y.upcost)),P>=y.upcost?(this.ZJ28(!0,this.btnBreak),this.lbCostGood.textColor=_cc.dgreen):(this.ZJ28(!1,this.btnBreak),this.lbCostGood.textColor=_cc.red);break;case"active":this.validateNow();var L=N12.gID(r.upitem),S=N12.giC(r.upitem);this.lbCostName.textFlow=M18.HTP.parse(O3.tr(3957,L.name)),this.imgGood.setData(L),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.textFlow=M18.HTP.parse(O3.tr(3958,S,r.activenum)),S>=r.activenum?(this.ZJ28(!0,this.btnActive),this.lbCostGood.textColor=_cc.dgreen):(this.ZJ28(!1,this.btnActive),this.lbCostGood.textColor=_cc.red)}var I=M18.FL28(r.link,":");this.jumpId=I[1],this.lbLink.textFlow=M18.HTP.parse(O3.tr(2004,I[0]))},t.prototype.ZJ28=function(t,e){t?(e.enabled=!0,P16.sGF(e,!1),P7.FD53(e,1)):(e.enabled=!1,P16.sGF(e,!0),P7.FD53(e,0))},t.prototype.doUpgrade=function(t){var e=this,i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.A65),o=s.getBookById(s.curBook),r=(D5.FD27(o.getShowLv()),D5.gIV("req2Item")),n=t*parseInt(D5.gIV("req1Cost")),a=N12.gID(r),h=N12.giC(r);if(h<n&&!this.cbAutoSmelt.selected)App.VM.open(O7.G87,r,n-h);else{var p=t*parseInt(D5.gIV("req3cost")),l=(N12.gID(N12.itemId.coin),N12.giC(N12.itemId.coin));if(!(l<p)){var c=1,u=N15.FB92(r);if(this.cbAutoSmelt.selected&&p<=l&&h<n){if(!(i.avatarInfo.g>=u*n))return void P7.FA78();c=3}var d=function(){s.isUseGoldAlert=!1,e.apF(D6.A9,c,s.curBook,t)};if(3==c&&s.isUseGoldAlert){var v={handler:d,cost:u*n,costTp:P10.A2,content:O3.tr(2009,a.name)};App.VM.open(O7.C54,v)}else d();return!0}App.VM.open(O7.F12)}},t.prototype.onClickBreak=function(){App.CM.apF(O6.A65,D6.A7)},t.prototype.ZX90=function(){App.CM.apF(O6.A65,D6.A1)},t.prototype.onClickUpg1=function(){"upgrade"==this.currentState&&this.doUpgrade(1)},t.prototype.onClickUpg10=function(){"upgrade"==this.currentState&&this.doUpgrade(10)},t.prototype.onClickUpg50=function(){"upgrade"==this.currentState&&this.doUpgrade(50)},t.prototype.onClickJump=function(){TG84.FM16(this.jumpId)},t.prototype.closeSelf=function(){this.apF(D6.A4)},t.prototype.close=function(){for(var t=1;t<=8;t++)this["gpBook"+t].removeChildren();this.btnActive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX90,this),this.btnBreak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBreak,this)},t}(BaseEuiView);__reflect(MilitaryBookView.prototype,"MilitaryBookView");var MilitaryFlagAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MilitaryFlagAttrSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8964),this.lbTitle1.textFlow=O3.tr2(8966),this.lbTitle0.textFlow=O3.tr2(8967)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.updataView()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e)},t.prototype.updataView=function(){var t=this.model.getAllJCAttr();for(var e in t){var i=new eui.Label;this.grpJC.addChild(i),i.y=30*Number(e);var s=P7.FM5([t[e]]).split(":");i.textFlow=O3.tr2(8981,s[0],":"+s[1])}for(e=1;e<=6;e++)for(var o=this.model.getPartInfo(e),r=MilitaryFlagConfig.getLvUpAttrD(o.id,o.lv,1),n=MilitaryFlagUtils.getTepByPos1(e),a=1;a<=3;a++){i=new eui.Label;this.grpZD.addChild(i),i.y=30*Number(e);var h={k:a,v:this.getListVByK(r,a)};s=P7.FM5([h],"\n",null,n).split(":");i.textFlow=O3.tr2(8981,s[0],"+"+s[1])}},t.prototype.getListVByK=function(t,e){for(var i in t)if(t[i].k==e)return t[i].v;return 0},t.prototype.close=function(){},t.prototype.closeSelf=function(){App.VM.close(O7.MilitaryFlagAttrView)},t}(BaseEuiView);__reflect(MilitaryFlagAttrView.prototype,"MilitaryFlagAttrView");var MilitaryFlagChildView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.nowDsLv=0,i.skinName="MilitaryFlagChildSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8961),this.lbStr0.textFlow=O3.tr2(8968),this.lbStr1.textFlow=O3.tr2(8969),this.lbStr.textFlow=O3.tr2(8971),this.lbMax.textFlow=O3.tr2(8970)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.part=t[0],this.updataView(),this.btnLvUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnLvUpEvent,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnHelpEvent,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.close=function(){},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TC79&&(e[0]==P4.W99&&this.showDsView(),this.updataView()),t instanceof THH9&&this.updataView()},t.prototype.showDsView=function(){this.model.getDsLv()>this.nowDsLv&&App.VM.open(O7.MilitaryFlagDsView)},t.prototype.updataView=function(){var t=this.model.getPartInfo(this.part),e=MilitaryFlagConfig.getLvUpAttr(t.id,t.lv),i=MilitaryFlagUtils.getTepByPos(this.part),s=MilitaryFlagUtils.getTepName(Number(this.part));this.lbName.text=s+O3.tr(8959)+"Lv."+t.lv;var o="bq_mc_6getub_"+this.part;if(App.THH33.aUE(this.gEffect,o,-185,-195),this.btnLvUp.imgNew.visible=!1,this.btnLvUp.label=O3.tr(8972),t.lv<MilitaryFlagConfig.lvMax){var r=MilitaryFlagConfig.getLvUpAttr(t.id,Number(t.lv)+1);this.lbAttrL.text=P7.FM5(e,"\n",{percentTemplate:"$0+$1%"},i),this.lbAttrN.text=P7.FM5(r,"\n",{percentTemplate:"$0+$1%"},i);var n=MilitaryFlagConfig.getLvUpLvD(t.lv+1),a=MilitaryFlagConfig.gIV("matLv"),h=Number(n.exp),p=N12.giC(a),l=N12.gID(a);this.itemCost.setData(l),this.lbCost.textFlow=h<=p?(Number(n.conditions)<=this.model.getMinBookLv()&&(this.btnLvUp.imgNew.visible=!0),M18.HTP.parse(O3.tr(8811,"",p+"/"+h))):M18.HTP.parse(O3.tr(8811,p,"/"+h))}else this.lbAttrL.text=P7.FM5(e,"\n",{percentTemplate:"$0+$1%"},i),this.lbAttrN.visible=!1,this.lbMax.visible=!0,this.btnLvUp.enabled=!1,this.grpLvUp.visible=!1,this.btnLvUp.label=O3.tr(8970),P16.sGF(this.btnLvUp,!0);this.updataPower()},t.prototype.updataPower=function(){var t=this.model.getPartInfo(this.part),e=MilitaryFlagConfig.getLvUpAttrD(t.id,t.lv,0),i=MilitaryFlagConfig.FL55(e),s=M10.gAG(i);this.lbPower.text=s+""},t.prototype.btnLvUpEvent=function(){var t=this.model.getPartInfo(this.part);if(t.lv>=MilitaryFlagConfig.lvMax)P18.sDP(O3.tr(8970));else{var e=MilitaryFlagConfig.getLvUpLvD(t.lv+1);if(Number(e.conditions)>this.model.getMinBookLv()){var i=O3.tr(8978,e.conditions);P18.sDP(i)}else{this.nowDsLv=this.model.getDsLv();var s=MilitaryFlagConfig.gIV("matLv")||75002,o=Number(e.exp),r=N12.giC(s),n=N12.gID(s);this.itemCost.setData(n),o<=r?this.apF(D6.ENSIGN_LVUP_REQ,this.part):App.VM.open(O7.G87,s,o-r)}}},t.prototype.btnHelpEvent=function(){var t={title:O3.tr(8979),content:O3.tr(8980)};App.CM.apF(O6.C18,O10.A24,t)},t.prototype.closeSelf=function(){App.VM.close(O7.MilitaryFlagChildView)},t}(BaseEuiView);__reflect(MilitaryFlagChildView.prototype,"MilitaryFlagChildView");var MilitaryFlagConItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MilitaryFlagConItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ndc.removeAll(),this.gvc.removeAll()},t.prototype.onClick=function(){App.CM.apF(O6.A65,D6.ENSIGN_EXCHANGE_REQ,this.data.eid)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.ndc=new eui.ArrayCollection,this.rwN.dataProvider=this.ndc,this.rwN.itemRenderer=MilitaryFlagComListItem,this.gvc=new eui.ArrayCollection,this.rwG.dataProvider=this.gvc,this.rwG.itemRenderer=MilitaryFlagComListItem,this.btnGet.label=O3.tr(5888)},t.prototype.dataChanged=function(){var t=this.data,e=t.max,i=t.count,s=t.reset,o=t.needs,r=t.gives,n=0<e-i&&N12.FL6(o);this.btnGet.$setEnabled(n),P16.sGF(this.btnGet,!n),this.btnGet.imgNew.visible=n&&!O4.FF89(L17.MFLAG_CON),this.labTips.text=s?O3.tr(3504):O3.tr(3503),this.labCount.textFlow=(new egret.HtmlTextParser).parser(O3.tr(3505,e-i,e));var a=o.map(function(t){return{itemData:{data:N12.gID(t.k),ct:{nc:t.v,oc:N12.giC(t.k)}},isBottom:!1,scale:1}}),h=r.map(function(t){return{itemData:{data:N12.gID(t.k),ct:t.v},isBottom:!1,scale:1}});this.ndc.replaceAll(a),this.gvc.replaceAll(h)},t}(eui.ItemRenderer);__reflect(MilitaryFlagConItem.prototype,"MilitaryFlagConItem");var MilitaryFlagComListItem=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return __extends(t,o),t.prototype.setBottom=function(t){if(o.prototype.setBottom.call(this,t),!t){var e=this.getChildAt(0);this.height=e.height=80}},t.prototype.initItem=function(){if(o.prototype.initItem.call(this),"object"==typeof this.itemData.ct){var t=this.itemData.ct,e=t.oc,i=t.nc,s=M18.FF65(e);this.lbCt.text=M18.format("$0/$1",[s,i]),this.lbCt.textColor=e<i?_cc.red:_cc.green,this.gpCt.visible=!0,P16.sGF(this.imgIcon,e<i)}},t}(ItemIcon);__reflect(MilitaryFlagComListItem.prototype,"MilitaryFlagComListItem");var MilitaryFlagConView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MilitaryFlagConSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:MilitaryFlagConItem,width:this.gpList.width,height:this.gpList.height,gap:5};this.myListView=new CommonListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(8965),this.ckDot.label=O3.tr(7414)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.myListView.open(),this.ckDotTime=Date.now(),this.ZHH77(this.model),this.ckDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this),this.ckDot.selected=O4.FF89(L17.MFLAG_CON)},t.prototype.ckDotEvnet=function(){App.CM.apF(O6.B82,L13.A24,L17.MFLAG_CON)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TC79&&e[0]==P4.S87&&this.ZHH77(t),t instanceof TG12&&this.ZHH77(this.model)},t.prototype.ZHH77=function(t){var e=t.getFlagConData();this.myListView.rfL(e)},t.prototype.close=function(){s.prototype.close.call(this),this.myListView.close(),this.ckDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this)},t.prototype.closeSelf=function(){App.VM.close(O7.MilitaryFlagConView)},t}(BaseEuiView);__reflect(MilitaryFlagConView.prototype,"MilitaryFlagConView");var MilitaryFlagDsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MilitaryFlagDsSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.text=O3.tr(8308),this.lbStr2.text=O3.tr(8309)},t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var t=this.model.getDsLv();this.updataView(t)},t.prototype.updataView=function(t){var e=TB84.FI66(MilitaryFlagConfig.bqMaster);if(this.imgHead.source="com_btn_shengjidashi_png",e<=t){this.lGrp.visible=this.lGrp.includeInLayout=!0,this.NGrp.visible=this.NGrp.includeInLayout=!1,this.lbLift.visible=this.lbLift.includeInLayout=!1,this.lbStatus.textColor=7716890;var i=(r=MilitaryFlagConfig.bqMaster[t]).lv,s=r.attraward;this.lbNow.textFlow=O3.tr2(9004,i);var o={type:"militaryFlag",data:s};this.dataG.data=o,this.lbStatus.text=O3.tr(8311),this.lbDeseL.text=r.describe}else if(0<t&&t<e){this.lGrp.visible=this.lGrp.includeInLayout=!0,this.NGrp.visible=this.NGrp.includeInLayout=!0,this.lbLift.visible=this.lbLift.includeInLayout=!0,this.lbStatus.textColor=7716890;var r;i=(r=MilitaryFlagConfig.bqMaster[t]).lv,s=r.attraward;this.lbNow.textFlow=O3.tr2(9004,i);o={type:"militaryFlag",data:s};this.dataG.data=o,this.lbDeseL.text=r.describe,this.lbStatus.textFlow=O3.tr2(9004,i);var n=(p=MilitaryFlagConfig.bqMaster[t+1]).lv,a=p.attraward;this.lbNext.textFlow=O3.tr2(9004,n);var h={type:"militaryFlag",data:a};this.NdataG.data=h,this.lbLift.text=O3.tr(1109,Math.ceil(M10.gAG(a)-M10.gAG(s))),this.lbDeseN.text=p.describe}else{this.lGrp.visible=this.lGrp.includeInLayout=!1;var p;n=(p=MilitaryFlagConfig.bqMaster[t+1]).lv,a=p.attraward;this.lbNext.textFlow=O3.tr2(9004,n);h={type:"militaryFlag",data:a};this.NdataG.data=h,this.lbStatus.textColor=14164514,this.lbStatus.text=O3.tr(8307),this.lbLift.text=O3.tr(1109,Math.ceil(M10.gAG(a))),this.lbDeseN.text=h.describe}},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.close(O7.MilitaryFlagDsView)},t}(BaseEuiView);__reflect(MilitaryFlagDsView.prototype,"MilitaryFlagDsView");var MilitaryFlagExchangeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MilitaryFlagExchangeSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbTitle.text=O3.tr(8973),this.btnExchange.label=O3.tr(8976)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.updataView(),this.btnExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnExchangeEvent,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TC79&&this.updataView()},t.prototype.close=function(){},t.prototype.updataView=function(){var t=MilitaryFlagConfig.gIV("buyExp").split(":"),e=MilitaryFlagConfig.gIV("buyMoney").split(":");this.lbDesc.textFlow=O3.tr2(8974,e[1],t[1]),this.lbSY.textFlow=O3.tr2(8975,this.model.rn);var i=Number(e[1]),s=N12.giC(e[0]),o=N12.gID(e[0]);this.itemCost.setData(o),this.lbCost.textFlow=i<=s?M18.HTP.parse(O3.tr(8811,"",s+"/"+i)):M18.HTP.parse(O3.tr(8811,s,"/"+i))},t.prototype.btnExchangeEvent=function(){this.model.rn?this.apF(D6.ENSIGN_BUY_REQ):P18.sDP(O3.tr(8977))},t.prototype.closeSelf=function(){App.VM.close(O7.MilitaryFlagExchangeView)},t}(BaseEuiView);__reflect(MilitaryFlagExchangeView.prototype,"MilitaryFlagExchangeView");var MilitaryFlagItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MilitaryFlagItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.open=function(){},t.prototype.close=function(){var t="bq_mc_6getub_"+this.data;App.THH33.rEf(this.gEffect,t),this.cTH()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.redImg.touchEnabled=!1},t.prototype.dataChanged=function(){var t=this.data,e="bq_mc_6getub_"+t;App.THH33.aUE(this.gEffect,e,-185,-195),this.lbName.text=MilitaryFlagUtils.getTepName(Number(t))+O3.tr(8959);var i=this.model.getPartInfo(t);this.lbLv.text="Lv."+i.lv},t.prototype.showTx=function(){null==this.timerHandler&&(this.showNorTween(),App.THH33.aUE(this.redGrp,"bqxt_mc_gm",-20,-30),this.timerHandler=App.K16.doTimer(660,0,this.showNorTween,this))},t.prototype.hideTx=function(){App.THH33.rEf(this.redGrp,"bqxt_mc_gm"),this.cTH()},t.prototype.showNorTween=function(){this.redImg.alpha,egret.Tween.get(this.redImg).to({alpha:.5},250).to({alpha:.2},410).pause()},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t}(eui.ItemRenderer);__reflect(MilitaryFlagItem.prototype,"MilitaryFlagItem");var MilitaryFlagView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName="MilitaryFlagSkin",i}return __extends(t,r),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A65)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){var t,e;r.prototype.initUI.call(this),this.itemS=((t={})[1]=this.item1,t[2]=this.item2,t[3]=this.item3,t[4]=this.item4,t[5]=this.item5,t[6]=this.item6,t),this.gEffectS=((e={})[1]=this.gEffect1,e[2]=this.gEffect2,e[3]=this.gEffect3,e[4]=this.gEffect4,e[5]=this.gEffect5,e[6]=this.gEffect6,e),this.btnAttrShow.textFlow=new Array({text:O3.tr(8964),style:{underline:!0}}),this.btnCon.label=O3.tr(8963)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in r.prototype.open.call(this),this.itemS)this.itemS[i].touch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.select.bind(this,i),this);this.btnCon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnConEvent,this),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnShopEvent,this),this.btnDs.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnDsEvent,this),this.btnAttrShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAttrShowEvent,this);var s=MilitaryFlagConfig.gIV("matLv"),o=N12.gID(s);this.itemUse.setData(o),this.updataView(),null==this.timerHandler&&(this.showNorTween(),App.THH33.aUE(this.fireGrp,"qbxt_mc_hytx",-82,-135),this.timerHandler=App.K16.doTimer(660,0,this.showNorTween,this))},t.prototype.showNorTween=function(){egret.Tween.get(this.imgFire).to({alpha:.5},250).to({alpha:.2},410).pause()},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.select=function(t){App.VM.open(O7.MilitaryFlagChildView,t)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e),t instanceof TC79&&this.updataView(),t instanceof THH9&&this.updataView(),t instanceof TG12&&this.updataView()},t.prototype.updataView=function(){for(var t in this.itemS)this.itemS[t].data=t;var e=MilitaryFlagConfig.gIV("matLv"),i=N12.giC(e);this.lbUseNum.text=""+i,this.updataRed(),this.btnShop.imgNew.visible=0<this.model.getConRed()},t.prototype.updataRed=function(){for(var t in this.itemS){this.model.getFlagItemRed(t)?(App.THH33.rEf(this.gEffectS[t],"bqxt_mc_ljie"),App.THH33.aUE(this.gEffectS[t],"bqxt_mc_ljie",0,0),this.itemS[t].showTx()):(App.THH33.rEf(this.gEffectS[t],"bqxt_mc_ljie"),this.itemS[t].hideTx())}},t.prototype.btnConEvent=function(){App.VM.open(O7.MilitaryFlagExchangeView)},t.prototype.btnShopEvent=function(){App.VM.open(O7.MilitaryFlagConView)},t.prototype.btnDsEvent=function(){App.VM.open(O7.MilitaryFlagDsView)},t.prototype.btnAttrShowEvent=function(){App.VM.open(O7.MilitaryFlagAttrView)},t.prototype.close=function(){for(var t in this.itemS)this.itemS[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.select.bind(this,t),this);this.btnCon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnConEvent,this),this.btnShop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnShopEvent,this),this.btnDs.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnDsEvent,this),this.btnAttrShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAttrShowEvent,this),App.THH33.rEf(this.fireGrp,"qbxt_mc_hytx"),this.cTH()},t}(BaseEuiView);__reflect(MilitaryFlagView.prototype,"MilitaryFlagView");var TF47=function(){function i(){}return i.FK35=function(t){i.init=t.mission_init,i.main=t.mission_main,i.speGuidLv=i.init.speGuidLv.value.split(",").map(function(t){return parseInt(t)})},i.FE61=function(t){return i.main&&i.main[t]?i.main[t]:null},i.FHH62=function(){var t=0;for(var e in i.main)t+=1;return t},i.FC49=function(){var t=void 0;for(var e in i.main){if(!i.main[e].fingerid){t=parseInt(e),t-=1;break}}return t},i.speGuidLv=[0,0],i}();__reflect(TF47.prototype,"TF47");var K2=function(){function t(){}return t.A5=10001,t.A7=10002,t.A8=10003,t.A3=10004,t.A4=10005,t.A1=10006,t.A2=10007,t.A10=20001,t.A9=20002,t.A6=30001,t}();__reflect(K2.prototype,"K2");var TC82=function(i){function t(){var t=i.call(this)||this,e=new TF84(t);return e.aLV(O7.I86),e.aLV(O7.G58),e.aLV(O7.F71),e.aLV(O7.D16),e.aLV(O7.C45),e.aLV(O7.D98),e.aLV(O7.F82),e.aLV(O7.E85),e.aLV(O7.I11),e.aLV(O7.I85),e.aLV(O7.I77),e.aLV(O7.G64),e.aLV(O7.D18),e.aLV(O7.G75),e.aLV(O7.D97),e.aLV(O7.G84),e.aLV(O7.F22),e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.HH94),e.aLV(O7.A87),t.taskProxy=new TF85(t),t.rgF(K2.A7,t.GW55,t),t.rgF(K2.A8,t.GW56,t),t.rgF(K2.A5,t.GV15,t),t.rgF(K2.A3,t.GT48,t),t.rgF(K2.A4,t.GT49,t),t.rgF(K2.A1,t.GE89,t),t.rgF(K2.A2,t.GE90,t),t.rgF(K2.A6,t.GP53,t),App.VM.register(O7.I86,"MissionView",t,K17.UI),t.rgF(K2.A10,t.GV16,t),t.rgF(K2.A9,t.GT50,t),t}return __extends(t,i),t.prototype.GU26=function(t){t.fightType!==P15.A3&&this.GV13()},t.prototype.GV13=function(){var t=App.VM.gOV(O7.I86);t&&t.setVisible(!0)},t.prototype.GQ48=function(t){t.fightType!==P15.A3&&this.GV14()},t.prototype.GV14=function(){var t=App.VM.gOV(O7.I86);t&&t.setVisible(!1)},t.prototype.GW55=function(){return this.taskProxy.loadTaskReq()},t.prototype.GV15=function(t){var e=this.gtM();t.body&&e&&(94==t.body.i&&1==t.body.f&&(App.CM.apF(O6.B45,I12.A1),e.homeExtra=1),e.ZHH20(),e.ZC91(t.body))},t.prototype.GW56=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e&&(e.ZHH20(),e.ZC91(t.body),e.notify())}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT48=function(t){this.taskProxy&&t&&this.taskProxy.GT48(t)},t.prototype.GT49=function(t){var e=this.gtM();if(200!=t.head.state&&t.body)e.ZX91(t.body);else if(t.body){t.body.o&&(P5.sIs(t.body.o),e.ZM11(t.body),e.notify());var i=TF47.FC49();if(t.body.i&&t.body.i==i)if(platform.collect("StartTrial"),platform instanceof SDWPlatform)platform.adjust("Tutorial_completion")}},t.prototype.GE89=function(t){this.taskProxy.GE89(t)},t.prototype.GE90=function(t){200==t.head.state||App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP53=function(t){this.gtM().homeExtra=0,t&&TG68.FK89()},t.prototype.GV16=function(){if(App.SceneManager.getCurrScene()==M2.A4){var t=this.gtM();t.ZM12()&&t.ZX93()&&App.VM.open(O7.I86),TG68.update(this.gtM())}},t.prototype.GT50=function(){App.VM.close(O7.I86)},__decorate([Ioc.Listener(GameEvent.EXIT_BATTLE)],t.prototype,"GU26",null),__decorate([Ioc.Listener(GameEvent.ENTRY_BATTLE)],t.prototype,"GQ48",null),t=__decorate([Ioc.MVC],t)}(TE11);__reflect(TC82.prototype,"TC82");var TF84=function(i){function t(t){var e=i.call(this,t)||this;return e.showMission=!0,e.homeExtra=0,e}return __extends(t,i),t.prototype.initData=function(t){},t.prototype.ZHH20=function(){this.tMissions=[],this.tCurAgencyTask=null},t.prototype.ZX91=function(t){t.i&&this.ZHH21(t.i),this.tMissions&&this.tMissions.sort(function(t,e){return t.nFinish==e.nFinish?t.nId<e.nId?1:-1:t.nFinish>e.nFinish?-1:1}),this.ZF81(),this.notify()},t.prototype.ZM11=function(t){t.i&&this.ZHH21(t.i);var e={};e.missions=t.missions,this.ZC91(e)},t.prototype.ZC91=function(t){if(t.missions)if(t.missions.length<=0)this.tMissions=[];else for(var e=0;e<t.missions.length;e++){(i=this.ZP44(t.missions[e].i))?i.ZC91(t.missions[e]):(i=new MissionData)&&(i.ZC91(t.missions[e]),this.tMissions.push(i))}var i;t.i&&((i=this.ZP44(t.i))?i.ZC91(t):(i=new MissionData)&&(i.ZC91(t),this.tMissions.push(i)));this.tMissions&&this.tMissions.sort(function(t,e){return t.nFinish==e.nFinish?t.nId<e.nId?1:-1:t.nFinish>e.nFinish?-1:1}),this.ZF81(),this.notify()},t.prototype.ZP44=function(t){for(var e=0;e<this.tMissions.length;e++)if(this.tMissions[e].nId==t)return this.tMissions[e];return null},t.prototype.ZF81=function(){this.tCurAgencyTask=null;for(var t=0;t<this.tMissions.length;t++)if(this.tMissions[0]){this.tCurAgencyTask=this.tMissions[0],TG68.FG26(this.tCurAgencyTask);break}},t.prototype.ZJ29=function(t){if(t){var e=this.ZP44(t);return!(!e||1!=e.nFinish)}},t.prototype.ZHH21=function(t){if(t)for(var e=0;e<this.tMissions.length;e++)if(this.tMissions[e].nId==t){this.tMissions.splice(e,1);break}},t.prototype.ZM12=function(){return this.tCurAgencyTask},t.prototype.ZX92=function(t){this.showMission=t},t.prototype.ZX93=function(){return this.showMission},t.prototype.ZT31=function(){return this.tMissions},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t),TG68.update(this)},t}(TG79);__reflect(TF84.prototype,"TF84");var TF85=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.R99,e.GV15,e),e.rSM(P4.O21,e.GT49,e),e}return __extends(t,i),t.prototype.GV15=function(t){this.apF(K2.A5,t)},t.prototype.loadTaskReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.V70,body:{}};s.rSMO(P4.V71,function(t){s.apF(K2.A8,t),e("加载任务数据完成")},s),s.sSM(i)})},t.prototype.GT49=function(t){this.apF(K2.A4,t)},t.prototype.GT48=function(t){var e={type:P4.O20,body:{taskId:t}};this.sSM(e)},t.prototype.GE89=function(t){var e={type:P4.I20,body:{taskId:t}};this.sSM(e)},t.prototype.GE90=function(t){this.apF(K2.A2,t)},t}(TG80);__reflect(TF85.prototype,"TF85");var MissionView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TaskViewSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.touchBegin=function(){this.currentState="down"},t.prototype.touchEnd=function(){this.currentState="up"},t.prototype.onBegin=function(){},t.prototype.open=function(t){this.touchEnabled=!1,this.gpContent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.taskClick,this),this.gpContent.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.gpContent.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.gpContent.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this);var e=App.CM.gtM(O6.C20);this.ZI95(e);var i=App.VM.gOV(O7.I85);if(i&&i.chartGroup.height<=ChatView.minHeig){var s=P7.FJ17();this.missGroup.bottom=s?240:360}else this.missGroup.bottom=490},t.prototype.close=function(){var t=!1,e=TG68.FG25();e&&e.parent&&e.parent==this.homeTaskLayer&&(t=!0),TG68.guideView&&t&&TG68.FK89(),egret.Tween.removeTweens(this.missGroup),egret.Tween.removeTweens(this.lbGroup),egret.Tween.removeTweens(this),this.id=null,this.gpContent.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.taskClick,this),this.gpContent.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.gpContent.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.gpContent.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},t.prototype.uBM=function(t){t instanceof TF84&&this.ZI95(t),t instanceof TF80&&this.ZD73(t)},t.prototype.ZD73=function(t){var e=App.CM.gtM(O6.C20),i=e.ZM12();if(i&&TG68.currStepId==i.nId){if("998"==i.fingerId)if(e.ZJ29(i.nId))TG68.guideView?TG68.FD98(!0):this.ZT32();else{var s=App.CM.gtM(O6.B64),o=s.ZV44();s.chData.s>=o.time&&0==s.chData.p?TG68.guideView?TG68.FD98(!0):this.ZT32():TG68.FK89()}}else TG68.FK89()},t.prototype.ZI95=function(t){var i=t.ZM12();if(i)if(this.id&&this.id<i.nId)this.id=i.nId,egret.Tween.get(this.lbGroup).to({x:250,alpha:0},200).to({x:-30}).call(function(){this.visible=!0;var t=i.getDesStr();this.lbTaskTitle.textFlow=t;var e=i.getBindGold();0<e?(this.lbTaskDes.visible=!0,this.lbTaskDes.text=O3.tr(2102)+e):this.lbTaskDes.visible=!1},this).to({x:50,alpha:1},200);else{this.id=i.nId,this.visible=!0;var e=i.getDesStr();this.lbTaskTitle.textFlow=e;var s=i.getBindGold();0<s?(this.lbTaskDes.visible=!0,this.lbTaskDes.text=O3.tr(2102)+s):this.lbTaskDes.visible=!1}else this.visible=!1,TG68.FK89()},t.prototype.ZT32=function(){var t=this;if(TG68.FL77(this.homeTaskLayer,this.lyTask.width/2,this.lyTask.height/2)){var e=TG68.FG25();this.lyTask.hasEventListener(egret.Event.RESIZE)||this.lyTask.addEventListener(egret.Event.RESIZE,function(){e&&e.parent===t.homeTaskLayer&&(e.x=t.lyTask.width/2,e.y=t.lyTask.height/2)},this)}},t.prototype.taskClick=function(){TG40.playClickEffect();var t=App.CM.gtM(O6.C20).ZM12();if(t)if(t.FJ39())App.CM.apF(O6.C20,K2.A3,t.nId);else if(132===t.nId){var e=App.VM.gOV(O7.I85);e&&e.chartGroup.height>ChatView.minHeig?(e.clickUnfold(),egret.Tween.get(this).wait(300).call(function(){TG84.goToDlg(t)})):TG84.goToDlg(t)}else TG84.goToDlg(t)},t.prototype.ZJ30=function(t){egret.Tween.get(this.missGroup).to({bottom:t},300)},t}(BaseEuiView);__reflect(MissionView.prototype,"MissionView");var MonarchTest,MissionData=function(){function t(){}return t.prototype.ZC91=function(t){t&&(this.nId=P7.getValue(t.i,this.nId),this.nProgress=P7.getValue(t.p,this.nProgress),this.nGet=P7.getValue(t.w,this.nGet),this.nFinish=P7.getValue(t.f,this.nFinish)),this.initData()},t.prototype.initData=function(){if(this.nId){var t=TF47.FE61(this.nId);t&&(this.sTaskDes=t.taskdes,this.sLink=t.linked,this.nNeedCount=t.needcount,this.nBindGold=t.bindgold,this.fingerId=t.fingerid,this.nMode=t.mode,this.nTarget=t.target)}},t.prototype.getDesStr=function(){return 1==this.nFinish?M18.HTP.parser(O3.tr(2101,this.sTaskDes)):M18.HTP.parser(O3.tr(2100,this.sTaskDes,this.nProgress,this.nNeedCount))},t.prototype.FJ39=function(){return 1==this.nFinish&&0==this.nGet},t.prototype.getBindGold=function(){return this.nBindGold&&0<this.nBindGold?this.nBindGold:0},t.prototype.getFingerIds=function(){return void 0===this.figerids&&(this.fingerId?this.figerids=M18.FL28(this.fingerId,":"):this.figerids=null),this.figerids},t}();__reflect(MissionData.prototype,"MissionData"),function(t){var e=function(){function d(){}return d.FK35=function(t){var e=t.crossworldboss_init,i=t.crossworldboss_personalreward,s=t.crossworldboss_rankingreward;for(var o in i){var r=i[o],n=P7.str2kv1(r.rank,","),a=n.k,h=n.v;d.personalreward.push({b:a,e:h,reward:P7.str2kv(r.reward)})}for(var o in d.personalreward.sort(function(t,e){return t.b-e.b}),s){r=s[o];var p=P7.str2kv1(r.rank,",");a=p.k,h=p.v;d.rankingreward.push({b:a,e:h,reward:P7.str2kv(r.reward)})}d.rankingreward.sort(function(t,e){return t.b-e.b}),d.defeatsReward=e.defeatsReward.value,d.killReward=e.killReward.value,d.unlockLv=parseInt(e.unlockLv.value),d.autoAttackVip=parseInt(e.autoAttackVip.value),d.reviveCost=P7.str2kv1(e.reviveCost.value),d.bossSize=parseFloat(e.bossSize.value),d.serverDate=parseInt(e.serverDate.value),d.openDay=e.openDay.value.split(",").map(function(t){return parseInt(t)});var l=(d.openTimeStr=e.openTime.value).split(","),c=P6.FM3(l[0]),u=P6.FM3(l[1]);this.doubleTime={pt:c,vt:u},d.openTime=c,e.inspire.value.split("|").forEach(function(t){var e=t.split(","),i=e[0],s=e[1],o=e[2],r=parseInt(i),n=P7.str2kv1(s),a=parseFloat(o);d.inspire[r]={rate:a,cost:n,level:r}})},d.FJ53=function(){return d.openTimeStr.split(",")[0]},d.isOpen=function(){var t=App.CM.gtM(O6.B43),e=t?t.serOpenDay+1:0,i=O4.getLv();return d.unlockLv<=i&&d.serverDate<=e},d.personalreward=[],d.rankingreward=[],d.unlockLv=255,d.autoAttackVip=0,d.inspire={},d.bossSize=1,d.serverDate=0,d.openTimeStr="",d.openTime=0,d.openDay=[],d}();t.Config=e,__reflect(e.prototype,"MonarchTest.Config")}(MonarchTest||(MonarchTest={})),function(t){var e=function(){function t(){}return t.OPEN=10001,t.UPDATE_AUTO_STATE=10002,t.SET_AUTO_STATE=10003,t.OPEN_HELP=10004,t.SET_RANK_TIMER=10005,t.LOAD_STATE=20001,t.LOAD_STATE_RES=20002,t}();t.Const=e,__reflect(e.prototype,"MonarchTest.Const")}(MonarchTest||(MonarchTest={})),function(r){var t=function(s){function t(){var t=s.call(this)||this;t.autoChallenge=!1,t.loadedOpen=!1,App.VM.register(O7.G33,"MonarchTestView",t,K17.UI_Main),App.VM.register(O7.A74,"MonarchTestMainView",t,K17.UI_Main_TOP),App.VM.register(O7.B16,"MonarchInspireView",t,K17.UI_Popup),App.VM.register(O7.A5,"MonarchAutoChallengeView",t,K17.UI_Popup),App.VM.register(O7.B53,"MonarchRewardView",t,K17.UI_Popup),App.VM.register(O7.A10,"MonarchCurLegionRankView",t,K17.UI_Main_TOP),t.rgF(r.Const.OPEN,t.open,t),t.rgF(r.Const.SET_AUTO_STATE,t.GV17,t),t.rgF(r.Const.OPEN_HELP,t.openHelp,t),t.rgF(r.Const.SET_RANK_TIMER,t.GV18,t);var e=new r.Model(t);e.aLV(O7.A10),e.aLV(O7.A9),e.aLV(O7.A29),e.aLV(O7.A30),e.aLV(O7.A74),e.aLV(O7.G33),e.aLV(O7.I39),e.aLV(O7.I64),e.aLV(O7.E25);var i=t.proxy=new r.Proxy(t);return t.rgF(r.Const.LOAD_STATE,i.loadState,i),t.rgF(r.Const.LOAD_STATE_RES,t.GU20,t),t.rgF(P4.P48,i.load,i),t.rgF(P4.J38,t.fight,t),t.rgF(P4.N28,i.revive,i),t.rgF(P4.J40,i.inspire,i),t.rgF(P4.D30,i.ZR17,i),t.rgF(P4.D28,i.ZT33,i),t.rgF(P4.L46,i.loadKiller,i),t}return __extends(t,s),t.prototype.gtM=function(){return s.prototype.gtM.call(this)},t.prototype.openHelp=function(){var t=TC90.getHelp(ActivityHallType.CROSS_WORLD_BOSS);App.VM.open(O7.I8,t)},t.prototype.open=function(){App.CM.gtM(O6.B99).isSpFighting?P18.sDP(O3.tr(5301)):r.Config.isOpen()?this.gtM().openState?this.gtM().isInit?App.VM.gOV(O7.G33)||(this.gtM().autoChallenge=this.autoChallenge,App.VM.open(O7.G33)):(this.loadedOpen=!0,this.apF(P4.P48)):P18.sDP(O3.tr(7941)):P18.sDP(O3.tr(3370,r.Config.serverDate,r.Config.unlockLv))},t.prototype.fight=function(){var t=this.gtM();t.rcd<=0&&t.bo.rhp?(this.autoChallenge=t.autoChallenge,this.proxy.fight()):P18.sDP(O3.tr(2815))},t.prototype.GU20=function(t){this.GY21(t)},t.prototype.loadRes=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=this.gtM();e.isInit=!0,e.updateHP(t.body.bo,!0),this.gtM().update(t.body),this.loadedOpen&&(this.apF(r.Const.OPEN),this.loadedOpen=!1)}},t.prototype.GL75=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=t.body,i=e.mr,s=e.lrs;this.gtM().update({mlr:i},!0,t.head.protoType,s)}},t.prototype.GK99=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=t.body,i=e.mr,s=e.prs;this.gtM().update({mr:i},!0,t.head.protoType,s)}},t.prototype.fightRes=function(t){var i=this;if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else if(t.body.cd_)P7.fightCoolingCD(t.body.cd_);else{var e=t.body,s=e.rcd,o=e.bo,r=e.ob;s=s||0;var n=this.gtM();n.update({rcd:s},!1),App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:r,needResult:!1,type:P15.A44},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.update({bo:o}),n.openState&&(0<n.rcd&&n.autoRevive&&i.apF(P4.N28),i.open())},this)}},t.prototype.GY42=function(t){var e=this.gtM();if(200!=t.head.state)215!=t.head.state&&222!=t.head.state||(e.autoRevive=!1,P7.FA78(),e.notify(r.Const.UPDATE_AUTO_STATE)),App.CM.apF(O6.B87,L10.A4,t);else if(e.update({rcd:0}),e.autoChallenge){var i=App.VM.gOV(O7.G33);i&&i.ZF82(e)}},t.prototype.GX54=function(t){200!=t.head.state?App.CM.apF(O6.B87,L10.A4,t):this.gtM().update(t.body)},t.prototype.exitRes=function(t){200!=t.head.state?App.CM.apF(O6.B87,L10.A4,t):this.gtM().update(t.body)},t.prototype.GY21=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=this.gtM(),i=t.body,s=i.st,o=i.open;1==s&&1==o?(this.proxy.register(),e.openState=!0,this.apF(P4.P48)):(e.openState=!1,this.proxy.unregister(),Log.trace("活动未开启"),App.VM.close(O7.A10),App.VM.close(O7.G33)),e.update(t.body),r.Utils.FHH98()}},t.prototype.GV17=function(t,e){var i=this.gtM();1==t?(e&&(O4.getVipLv()>=r.Config.autoAttackVip||(App.VM.open(O7.A5),e=!1)),i.autoChallenge=e,this.autoChallenge=e):2==t&&(i.autoRevive=e),i.notify(r.Const.UPDATE_AUTO_STATE)},t.prototype.GY66=function(t){200!=t.head.state?App.CM.apF(O6.B87,L10.A4,t):this.gtM().update(t.body,!0,t.head.protoType)},t.prototype.GX82=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=t.body,i=e.rk,s=e.ob;App.VM.open(O7.B53,i,s)}},t.prototype.GT51=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=t.body.n;this.gtM().update({killer:e})}},t.prototype.GV18=function(t){var e=App.VM.gOV(O7.G33);e&&e.GV18(t)},t}(TE11);r.Controller=t,__reflect(t.prototype,"MonarchTest.Controller")}(MonarchTest||(MonarchTest={})),function(t){var e=function(i){function t(t){var e=i.call(this,t)||this;return e.isShow=!1,e.autoRevive=!1,e.autoChallenge=!1,e.openState=!1,e.st=0,e.open=0,e.killer="",e.cd=0,e.lv=0,e.rcd=0,e.mr=0,e.mlr=0,e.isInit=!1,e}return __extends(t,i),t.prototype.updateHP=function(t,e){void 0===e&&(e=!1),t&&(e?this.bo=t:this.bo.rhp=Math.min(this.bo.rhp,t.rhp))},t.prototype.update=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.cd=P7.getValue(t.cd,this.cd),this.updateHP(t.bo),this.lv=P7.getValue(t.lv,this.lv),this.cd=P7.getValue(t.cd,this.cd),this.rcd=P7.getValue(t.rcd,this.rcd),this.mr=P7.getValue(t.mr,this.mr),this.mlr=P7.getValue(t.mlr,this.mlr),this.killer=P7.getValue(t.killer,this.killer),this.st=P7.getValue(t.st,this.st),this.open=P7.getValue(t.open,this.open),e&&this.notify.apply(this,i)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},__decorate([Common.timeRefresh()],t.prototype,"cd",void 0),__decorate([Common.timeRefresh()],t.prototype,"rcd",void 0),t}(TG79);t.Model=e,__reflect(e.prototype,"MonarchTest.Model")}(MonarchTest||(MonarchTest={})),function(o){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.L44,t.GY21,t),e.rSM(P4.A21,t.GX82,t),e.rSM(P4.D29,t.GL75,t),e.rSM(P4.D31,t.GK99,t),e.rSM(P4.L47,t.GT51,t),e}return __extends(t,i),t.prototype.register=function(){var t=this._controller;this.rSM(P4.P49,t.loadRes,t),this.rSM(P4.J39,t.fightRes,t),this.rSM(P4.N29,t.GY42,t),this.rSM(P4.J41,t.GX54,t),this.rSM(P4.J42,t.GY66,t)},t.prototype.unregister=function(){var t=this._controller;this.ZM57(P4.P49,t.loadRes,t),this.ZM57(P4.J39,t.fightRes,t),this.ZM57(P4.N29,t.GY42,t),this.ZM57(P4.J41,t.GX54,t),this.ZM57(P4.J42,t.GY66,t)},t.prototype.loadState=function(){var s=this;return new Promise(function(e,t){var i={};i.type=P4.F89,i.body={},s.rSMO(P4.F90,function(t){s.apF(o.Const.LOAD_STATE_RES,t),e("加载君主测试状态")},s),s.sSM(i)})},t.prototype.load=function(){var t={type:P4.P48,body:{}};this.sSM(t)},t.prototype.fight=function(){var t={type:P4.J38,body:{}};this.sSM(t)},t.prototype.revive=function(){var t={type:P4.N28,body:{}};this.sSM(t)},t.prototype.inspire=function(){var t={type:P4.J40,body:{}};this.sSM(t)},t.prototype.ZR17=function(t,e){var i={type:P4.D30,body:{curPage:t,size:e}};this.sSM(i)},t.prototype.ZT33=function(t,e){var i={type:P4.D28,body:{curPage:t,size:e}};this.sSM(i)},t.prototype.loadKiller=function(){var t={type:P4.L46,body:{}};this.sSM(t)},t}(TG80);o.Proxy=t,__reflect(t.prototype,"MonarchTest.Proxy")}(MonarchTest||(MonarchTest={})),function(a){var t=function(){function n(){}return n.FHH98=function(){var t=App.CM.gtM(O6.A93),e=App.CM.gtM(O6.B43),i=a.Config.unlockLv,s=a.Config.serverDate,o=O4.getLv();if(!(!t.openState||t.isShow||o<i||e.serOpenDay<=s))if(1==t.st){var r={handler:function(){return n.FC89()},str:O3.tr(7942),ctrlConst:O6.A93};App.K16.doTimer(2e3,1,function(){return App.VM.open(O7.A82,r)},void 0)}else{App.CM.gtM(O6.B99).fightSceneType!=I4.A8&&App.VM.close(O7.A82)}},n.FC89=function(){var t=a.Config.unlockLv,e=App.CM.gtM(O6.A93);if(O4.getLv()<t){var i=K18.init.commonDesc1.value;return P18.sDP(M18.format(i,[t])),!1}return e.st<=0?(P18.sDP(O3.tr(3205)),!1):(App.CM.apF(O6.A93,a.Const.OPEN),!0)},n.FI83=function(t){return 1e8<=t?App.TG81.toFixed(t/1e8,4)+O3.tr(5735):1e4<=t?P7.FL23(t,[1e4,1e3],[".",O3.tr(5734)]):t+""},n}();a.Utils=t,__reflect(t.prototype,"MonarchTest.Utils")}(MonarchTest||(MonarchTest={}));var MonarchLegionRankItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="MonarchTestLegionRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgRank.visible=this.labRank.visible=!1,this.data.rank<=3?(this.imgRank.visible=!0,this.imgRank.source=[,"v1_img_first_png","v1_img_scend_png","v1_img_third_png"][this.data.rank]):(this.labRank.visible=!0,this.labRank.text=this.data.rank+""),this.labName.text=this.data.name,this.labValue.text=this.data.value+"",this.imgBg.visible=this.itemIndex%2==0},t}(eui.ItemRenderer);__reflect(MonarchLegionRankItemView.prototype,"MonarchLegionRankItemView");var MonarchRankItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="MonarchTestSingleRankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon},t.prototype.remove=function(){this.dataSource.removeAll()},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.updateReward(),this.imgBg2.visible=this.imgBg3.visible=this.labName.visible=this.labDamage.visible=this.labRank.visible=this.imgRank.visible=!1,1==this.data.type||2==this.data.type){if(this.data.role){var t=this.data.role;t.rank==t.rend?(this.labName.visible=this.labDamage.visible=this.imgBg2.visible=this.imgBg3.visible=!0,t.rank<=3?(this.imgRank.visible=!0,this.imgRank.source=[,"v1_fonts_di1m_png","v1_fonts_2nd_png","v1_fonts_di3m_png"][t.rank]):(this.labRank.visible=!0,this.labRank.verticalCenter=-37,this.labRank.text=O3.tr(7949,t.rend)),this.labDamage.textFlow=O3.tr2(7946,MonarchTest.Utils.FI83(t.damage)),this.labName.text=t.name):(this.labRank.visible=!0,this.labRank.verticalCenter=0,this.labRank.text=O3.tr(7947,t.rank,t.rend))}}else 3==this.data.type?(this.labName.visible=this.imgBg2.visible=this.imgRank.visible=!0,this.imgRank.source=this.data.img,this.labName.textFlow=O3.tr2(7910)):4==this.data.type&&(this.labName.visible=this.labDamage.visible=this.imgBg2.visible=this.imgBg3.visible=this.imgRank.visible=!0,this.imgRank.source=this.data.img,this.labName.text=this.data.role.name,this.labDamage.textFlow=O3.tr2(7911))},t.prototype.updateReward=function(){this.dataSource.source=this.data.reward.map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1}})},t}(eui.ItemRenderer);__reflect(MonarchRankItemView.prototype,"MonarchRankItemView");var MonarchTestItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="MonarchTestRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgRank.visible=this.labRank.visible=!1,this.data.rank<=3?(this.imgRank.visible=!0,this.imgRank.source=[,"v1_img_first_png","v1_img_scend_png","v1_img_third_png"][this.data.rank]):(this.labRank.visible=!0,this.labRank.text=this.data.rank+""),this.labName.text=this.data.name},t}(eui.ItemRenderer);__reflect(MonarchTestItemView.prototype,"MonarchTestItemView");var MonarchAutoChallengeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MonarchTestAutoChallengeSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.dlg.title=O3.tr(7913),this.btnOK.label=O3.tr(7915),this.lab.textFlow=O3.tr2(7914,MonarchTest.Config.autoAttackVip),this.dlg.ZM69(this.oCC,this),this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoto,this)},t.prototype.close=function(){this.btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGoto,this),s.prototype.close.call(this)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClickGoto=function(){App.CM.apF(O6.C29,P8.A7),this.oCC()},t}(BaseEuiView);__reflect(MonarchAutoChallengeView.prototype,"MonarchAutoChallengeView");var MonarchCurLegionRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.num=100,i.listData=[],i.pageSize=20,i.index=1,i.skinName="MonarchTestLegionRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){var t=this;this.list=new CommonListBase({render:MonarchLegionRankItemView,gap:10,width:this.gList.width,height:this.gList.height,arrowScale:1}),this.gList.addChild(this.list),this.labTr7900.textFlow=O3.tr2(7900),this.labTr7901.textFlow=O3.tr2(7901),this.labTr7902.textFlow=O3.tr2(7902),this.dlg.title=O3.tr(7899),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.list.endHandler=function(){return t.ZU17()},this.dlg.ZHH61(this.gView),this.gView.y=0},t.prototype.open=function(){s.prototype.open.call(this),this.list.open(),this.ZU17()},t.prototype.uBM=function(t,e,i){var s=this;if(t instanceof MonarchTest.Model){if(this.GX5(t),e==P4.D29){var o=i;o.length===this.pageSize&&(this.index=Math.ceil(o[0].r/this.pageSize)+1),o.forEach(function(t){s.listData[t.r-1]={name:t.sa+"."+t.n,value:t.d,rank:t.r}})}this.list.rfL(this.listData)}},t.prototype.close=function(){this.list.close(),s.prototype.close.call(this)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.ZU17=function(){this.index,this.pageSize;App.CM.apF(O6.A93,P4.D28,this.index,this.pageSize)},t.prototype.GX5=function(t){this.lab.textFlow=O3.tr2(7880,t.mlr<=0?O3.tr(7892):t.mlr)},t}(BaseEuiView);__reflect(MonarchCurLegionRankView.prototype,"MonarchCurLegionRankView");var MonarchInspireView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName="MonarchTestInspireSkin",i}return __extends(t,n),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A93)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.ZM69(this.oCC,this),this.dlg.title=O3.tr(7887),this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnOK.label=O3.tr(7890)},t.prototype.open=function(t){n.prototype.open.call(this);var e=this.model,i=MonarchTest.Config.inspire[e.lv],s=MonarchTest.Config.inspire[e.lv+1];this.lab.textFlow=M18.FG71("$0\n$1\n$2",O3.tr(7891),O3.tr(7893,i?O3.tr(7897,e.lv,Math.floor(100*i.rate)):O3.tr(7894)),O3.tr(7896,s?O3.tr(7897,e.lv+1,Math.floor(100*s.rate)):O3.tr(7895)));var o=s.cost.v,r="<font color=#feeedf>$1</font>";P16.FL31(this.gCost,s.cost.k,o,{textTemplate:r,lackTextTemplate:r})},t.prototype.close=function(){this.btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),n.prototype.close.call(this)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClick=function(){var t=this.model,e=MonarchTest.Config.inspire[t.lv+1];e&&(N12.FK6(e.cost)?App.CM.apF(O6.A93,P4.J40):P7.FA78()),this.oCC()},t}(BaseEuiView);__reflect(MonarchInspireView.prototype,"MonarchInspireView");var MonarchNormalRewardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MonarchTestRewardRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.list=new CommonListBase({render:MonarchRankItemView,gap:5,width:this.gList.width,height:this.gList.height}),this.gList.addChild(this.list)},t.prototype.open=function(){s.prototype.open.call(this),this.list.open(),App.CM.apF(O6.A93,P4.L46),this.updateList(App.CM.gtM(O6.A93))},t.prototype.close=function(){s.prototype.open.call(this),this.list.close()},t.prototype.uBM=function(t){t instanceof MonarchTest.Model&&this.updateList(t)},t.prototype.updateList=function(t){var e=[];e.push({type:3,reward:P7.str2kv(MonarchTest.Config.defeatsReward),img:"com_jibaijiangli_png"}),e.push({type:4,reward:P7.str2kv(MonarchTest.Config.killReward),role:{name:t.killer?t.killer:O3.tr(610)},img:"com_jishajiangli_png"}),this.list.rfL(e)},t}(BaseEuiView);__reflect(MonarchNormalRewardView.prototype,"MonarchNormalRewardView");var MonarchRewardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.cd=5,i.skinName="MonarchTestSingleRewardSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.title=O3.tr(7917),this.dlg.ZM69(this.oCC,this),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon,this.btnOK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnOK.label=O3.tr(7916)},t.prototype.open=function(t,e){s.prototype.open.call(this),this.cd=5,App.K16.doTimer(1e3,this.cd,this.countdown,this),this.updateBtn(),this.rw=e,this.lab.textFlow=O3.tr2(7912,t),this.dataSource.source=e.map(function(t){return{itemData:{data:N12.gID(t.k),ct:t.v,texiao:!1},isBottom:!1}})},t.prototype.countdown=function(){this.cd-=1,this.cd<=0&&this.oCC(),this.updateBtn()},t.prototype.updateBtn=function(){this.btnOK.label=O3.tr(5189,this.cd)},t.prototype.close=function(){this.btnOK.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),s.prototype.close.call(this)},t.prototype.oCC=function(){App.VM.GY64(this),P5.sIs(this.rw)},t}(BaseEuiView);__reflect(MonarchRewardView.prototype,"MonarchRewardView");var MonarchSingleRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MonarchTestSingleRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.type=2,this.labTips.textFlow=O3.tr2(7909)},t.prototype.GX5=function(t){this.labRank.textFlow=O3.tr2(7878,t.mr<=0?O3.tr(7892):t.mr)},t.prototype.loadRank=function(){if(2==this.type){for(var t=this.conf,e=3,i=t.length-1;0<=i;i--){var s=t[i];if(s.b==s.e){e=s.b;break}}App.CM.apF(O6.A93,P4.D30,1,e)}},t}(MonarchLegionRankView);__reflect(MonarchSingleRankView.prototype,"MonarchSingleRankView");var MonarchTestMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.set(O7.A74).rgS(O7.A30,"MonarchLegionRankView",O3.tr(7906)).rgS(O7.A29,"MonarchSingleRankView",O3.tr(7907)).rgS(O7.A9,"MonarchNormalRewardView",O3.tr(7908)),i}return __extends(t,s),t.prototype.open=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return App.CM.apF(O6.A93,MonarchTest.Const.SET_RANK_TIMER,!1),s.prototype.open.apply(this,[t].concat(e))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return App.CM.apF(O6.A93,MonarchTest.Const.SET_RANK_TIMER,!0),s.prototype.close.apply(this,t)},t}(BasePanelViewX);__reflect(MonarchTestMainView.prototype,"MonarchTestMainView");var MonarchTestView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.hpCount=0,i.nextChallengeTime=0,i.skinName="MonarchTestSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A93)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){var o=this;s.prototype.initUI.call(this),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.dlg.ZQ16(this.onClickHelp,this),this.dlg.ZHH61(this.gView),this.btnRivive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX94,this),this.btnReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFight,this),this.btnInspire.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX95,this),this.labCheckDamage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.autoRevive.addEventListener(eui.UIEvent.CHANGE,this.ZHH22,this),this.autoChallenge.addEventListener(eui.UIEvent.CHANGE,this.ZD31,this),this.dlg.title=O3.tr(7876),this.autoRevive.label=O3.tr(7884),this.autoChallenge.label=O3.tr(7882,MonarchTest.Config.autoAttackVip),this.labCheckDamage.text=O3.tr(7881),this.btnRivive.label=O3.tr(7919),this.labTr7877.textFlow=O3.tr2(7877),this.labTr7883.textFlow=O3.tr2(7883),this.btnStart.label=O3.tr(7886),this.btnInspire.label=O3.tr(7887),this.listRank=new CommonListBase({render:MonarchTestItemView,gap:10,width:this.gSRank.width,height:this.gSRank.height,arrowScale:1}),this.gSRank.addChild(this.listRank),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon,M18.FHH83(this.labCheckDamage);var t=O3.tr(610);this.singleRankData=[{rank:1,name:t},{rank:2,name:t},{rank:3,name:t}],this.gAvatar.scaleX=this.gAvatar.scaleY=MonarchTest.Config.bossSize,this.pHp.labelFunction=function(t,e){var i=t/e*100,s=Math.floor(i)===i?i:App.TG81.toFixed(i,2);return 0<o.hpCount?O3.tr(7885,s,o.hpCount):s+"%"}},t.prototype.open=function(t){s.prototype.open.call(this),this.listRank.open();var e=this.model;this.GX5(e),this.ZP45(e),this.updateReward(),this.updateHpBar(e,!0),App.K16.doTimer(1e3,0,this.GX42,this),this.GV18(!0),this.updateRank(),this.ZM14(),this.listRank.rfL(this.singleRankData),App.CM.apF(O6.A93,P4.D30,1,1),App.CM.apF(O6.A93,P4.D28,1,1),this.ZF82(e),this.ZM13(e),this.GX42()},t.prototype.close=function(){this.listRank.close(),this.model.autoChallenge=!1,this.removeAvatar(),this.dataSource.removeAll(),this.GV18(!1),App.K16.remove(this.GX42,this),this.btnRivive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX94,this),this.btnStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFight,this),this.btnReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU27,this),this.btnInspire.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZX95,this),this.labCheckDamage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheck,this),this.autoRevive.removeEventListener(eui.UIEvent.CHANGE,this.ZHH22,this),this.autoChallenge.removeEventListener(eui.UIEvent.CHANGE,this.ZD31,this),delete this.singleRankData,s.prototype.close.call(this)},t.prototype.uBM=function(t,e,i){if(t instanceof MonarchTest.Model)if(this.GX5(t),this.updateHpBar(t,!1),e==P4.D31){for(var s=0,o=i;s<o.length;s++){var r=o[s];r.r<=3&&(this.singleRankData[r.r-1]={name:r.sa+"."+r.n,rank:r.r})}this.listRank.rfL(this.singleRankData)}else e==MonarchTest.Const.UPDATE_AUTO_STATE&&this.ZP45(t);else if(t instanceof THH9){var n=this.model;this.GX5(n)}},t.prototype.GV18=function(t){t?(this.updateRankTimer=this.updateRankTimer||App.K16.doTimer(1e3,0,this.updateRank,this),this.updateLegionRankTimer=this.updateLegionRankTimer||App.K16.doTimer(5e3,0,this.ZM14,this)):(this.updateLegionRankTimer&&(App.K16.rBH(this.updateLegionRankTimer),delete this.updateLegionRankTimer),this.updateRankTimer&&(App.K16.rBH(this.updateRankTimer),delete this.updateRankTimer))},t.prototype.GX5=function(t){if(this.gRevive.visible=!1,!this.enemyAvatar){var e=N17.monster[t.bo.id].image;this.enemyAvatar=new FightGameObject,this.enemyAvatar.setData({id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},this.gAvatar)}this.labSingleRank.textFlow=O3.tr2(7878,t.mr<=0?O3.tr(7892):t.mr),this.labLegionRank.textFlow=O3.tr2(7880,t.mlr<=0?O3.tr(7892):t.mlr);var i=0;0<t.lv&&(i=MonarchTest.Config.inspire[t.lv].rate),this.labDamageRate.textFlow=O3.tr2(7889,Math.floor(100*i)),0<t.rcd&&(this.gRevive.visible=!0)},t.prototype.ZP45=function(t){this.autoRevive.selected=t.autoRevive,this.autoChallenge.selected=t.autoChallenge,t.autoChallenge||(this.autoChallenge.label=O3.tr(7882,MonarchTest.Config.autoAttackVip))},t.prototype.ZM13=function(t){var e=MonarchTest.Config.reviveCost.v,i="<font color=#feeedf>$1</font>";P16.FL31(this.gReviveCost,MonarchTest.Config.reviveCost.k,e,{textTemplate:i,lackTextTemplate:i})},t.prototype.GX42=function(){var t=this.model;if(this.labTime.textFlow=O3.tr2(7888,P6.FJ11(1e3*t.cd,5)),0<t.rcd)this.labReviveTime.textFlow=O3.tr2(7918,t.rcd),this.autoChallenge.label=O3.tr(7882,MonarchTest.Config.autoAttackVip);else if(t.autoChallenge){var e=Math.floor((this.nextChallengeTime-P6.getTime(!1))/1e3);e<=0&&(this.onClickFight(),this.nextChallengeTime=Number.MAX_VALUE),this.autoChallenge.label=O3.tr(7931,Math.max(0,e))}},t.prototype.updateReward=function(){var t=TB86.FG72(ActivityHallType.CROSS_WORLD_BOSS).reward;this.dataSource.source=t.split(",").map(function(t){return{k:parseInt(t),v:0}}).map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1}})},t.prototype.updateHpBar=function(t,e){if(void 0===e&&(e=!1),t.bo){this.pHp.slideDuration=0;var i=t.bo.thp/6,s=t.bo.rhp/i,o=0;o=s==Math.floor(s)?i:t.bo.rhp-i*Math.floor(s),this.pHp.maximum=i,this.pHp.value=o,this.hpCount=Math.ceil(s);var r=Math.ceil(s),n=["v1_bar_red_tfdz_png","v1_bar_lu_png","v1_bar_huang_a2_png","v1_bar_blue_tfdz_png","v1_bar_red_fen_png","v1_bar_red_zi_png"];this.pHp.thumb.source=n[Math.max(0,r-1)],this.pHp.img.source=r<=0?"":n[r-2]}},t.prototype.ZF82=function(t){t.autoChallenge&&(t.rcd,this.nextChallengeTime=P6.getTime(!1)+1e3*Math.max(0,t.rcd)+5e3,this.GX42())},t.prototype.ZU27=function(){App.VM.open(O7.A74)},t.prototype.ZHH22=function(){App.CM.apF(O6.A93,MonarchTest.Const.SET_AUTO_STATE,2,this.autoRevive.selected)},t.prototype.ZD31=function(){App.CM.apF(O6.A93,MonarchTest.Const.SET_AUTO_STATE,1,this.autoChallenge.selected),this.autoChallenge.selected&&this.ZF82(this.model)},t.prototype.onClickCheck=function(){App.VM.open(O7.A10)},t.prototype.onClickFight=function(){App.CM.apF(O6.A93,P4.J38)},t.prototype.ZX94=function(){App.CM.apF(O6.A93,P4.N28)},t.prototype.ZX95=function(){this.model.lv>=Reincarnate.Utils.mapkeyMax(MonarchTest.Config.inspire)?P18.sDP(O3.tr(7935)):App.VM.open(O7.B16)},t.prototype.oCC=function(){App.CM.apF(O6.A93,MonarchTest.Const.SET_AUTO_STATE,1,!1),App.VM.GY64(this)},t.prototype.onClickHelp=function(){App.CM.apF(O6.A93,MonarchTest.Const.OPEN_HELP)},t.prototype.removeAvatar=function(){this.enemyAvatar&&(this.gAvatar.removeChildren(),this.enemyAvatar.destory())},t.prototype.updateRank=function(){App.CM.apF(O6.A93,P4.D30,1,3)},t.prototype.ZM14=function(){App.CM.apF(O6.A93,P4.D28,1,1)},t}(BaseEuiView);__reflect(MonarchTestView.prototype,"MonarchTestView");var J8=function(){function t(){}return t.A4=1e3,t.A3=1002,t.A1=1003,t.A2=1004,t}();__reflect(J8.prototype,"J8");var TC28=function(i){function t(){var t=i.call(this)||this,e=new TF48(t);return t.proxy=new TF49(t),e.aLV(O7.I38),e.aLV(O7.HH30),App.VM.register(O7.I38,"MoreGameView",t,K17.UI_Main_TOP),t.rgF(J8.A4,t.openView,t),t.rgF(J8.A3,t.GY64,t),t.rgF(J8.A1,t.GJ99,t),t.rgF(J8.A2,t.GK1,t),t}return __extends(t,i),t.prototype.openView=function(){App.VM.open(O7.I38)},t.prototype.GY64=function(){App.VM.close(O7.I38)},t.prototype.GJ99=function(t){this.proxy.GJ99(t)},t.prototype.GK1=function(t){var e=this.gtM();if(0!=t.s){e.ZC13({r:!1})}else e.ZC13(t.r);e.notify()},t}(TE11);__reflect(TC28.prototype,"TC28");var TF48=function(i){function t(t){var e=i.call(this,t)||this;return e.openState=!1,e.redNum=0,e.firstLoginRedNum=0,e}return __extends(t,i),t.prototype.ZC13=function(t){null!=this.actData?this.actData.updateData(t):this.actData=new MoreGameData(t)},t.prototype.FL35=function(){var t=0;return t+=this.firstLoginRedNum},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TF48.prototype,"TF48");var TF49=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.GJ99=function(t){var e={channel:t};this.sendHttpMsg("action/user/gamepush",e),this.rSMO("action/user/gamepush",this.GK1,this)},t.prototype.GK1=function(t){this.apF(J8.A2,t)},t}(TG80);__reflect(TF49.prototype,"TF49");var MoreGameItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MoreGameItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEvent,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEvent,this)},t.prototype.clickEvent=function(){var t=this;App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(8697,this.data.name)),this,function(){t.ZX96()})},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.imgIcon.source=this.data.img,this.lbName.text=this.data.name},t.prototype.ZX96=function(){platform.navigateToMiniGame(this.data.jump)},t}(eui.ItemRenderer);__reflect(MoreGameItem.prototype,"MoreGameItem");var MoreGameView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="MoreGameSkin",i}return __extends(t,s),t.prototype.open=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var t=App.CM.gtM(O6.B60);this.ZC22(t)},t.prototype.initUI=function(){this.itemGrp.itemRenderer=MoreGameItem,this.itemGrp.dataProvider=this.collection=new eui.ArrayCollection,this.lbTitle.text=O3.tr(8698)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF48&&this.ZC22(t)},t.prototype.ZC22=function(t){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(t){switch(t.label){case 0:return[4,platform.navigateGameList()];case 1:return"undefined"==(e=t.sent())?P18.sDP(O3.tr(8696),!0):(i=[],e.forEach(function(t){var e={img:t.icon,name:t.gameName,jump:t.pkgName};i.push(e)}),this.collection.source=i),[2]}})})},t.prototype.closeSelf=function(){App.CM.apF(O6.B60,J8.A3)},t.prototype.close=function(){this.collection.removeAll()},t}(BaseEuiView);__reflect(MoreGameView.prototype,"MoreGameView");var MoreGameData=function(){function t(t){this.updateData(t)}return t.prototype.updateData=function(t){this.isOpen=t},t}();__reflect(MoreGameData.prototype,"MoreGameData");var OpeningRewardView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName="OpeningRewardSkin",i}return __extends(t,r),t.prototype.initData=function(){r.prototype.initData.call(this)},t.prototype.initUI=function(){r.prototype.initUI.call(this);var t=App.CM.gtM(O6.C12).selectHid;if(t){var e=new TF39,i=N14.FF4(t);e.id=i.model;var s=new FightGameObject;s.action=Action.Stand;var o={x:0,y:0,dir:Dir.br,objType:P13.A6};s.setBaseData(o),e.bt=BehaviourType.Attack_d,s.setData(e,this.roleGroup),this.nameLabel.text=i.name}this.btnGet.label=O3.tr(5027)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.GY64(this);var t=App.CM.gtM(O6.C20);TG67.showFigerAct=!0,t.notify()},t}(BaseEuiView);__reflect(OpeningRewardView.prototype,"OpeningRewardView");var N12=function(){function h(){}return h.FK35=function(t){h.base=t.item_base,h.resource=t.item_resource},h.gID=function(t){if("number"!=typeof t&&(t=parseInt(t)),1e4<=t&&t<11e3);else if(11e3<=t&&t<12e3);else if(12e3<=t&&t<13e3);else if(13e3<=t&&t<14e3);else if(14e3<=t&&t<15e3);else if(15e3<=t&&t<16e3);else if(16e3<=t&&t<17e3);else{if(2e4<=t&&t<3e4)return M10.ava[t];if(3e4<=t&&t<32e3)return M10.horse[t];if(32e3<=t&&t<34e3)return M10.wing[t];if(34e3<=t&&t<36e3)return M10.faqi[t];if(36e3<=t&&t<38e3)return M10.weapon[t];if(38e3<=t&&t<4e4)return M10.formation[t];if(4e4<=t&&t<42e3)return M10.general[t];if(42e3<=t&&t<44e3)return M10.prestige[t];if(44e3<=t&&t<46e3)return M10.soul[t];if(46e3<=t&&t<48e3)return M10.animal[t];if(48e3<=t&&t<5e4)return M10.psychic[t];if(5e4<=t&&t<52e3)return M10.spirit[t];if(52e3<=t&&t<54e3)return M10.asoul[t];if(54e3<=t&&t<55e3)return L5.base[t];if(55e3<=t&&t<56e3)return G8.FE5(t);if(56e3<=t&&t<56999)return I5.toy[t];if(57e3<=t&&t<57999)return RedMakeup.Config.equip[t];if(6e4<=t&&t<75e3)return h.base[t];if(58e3<=t&&t<58100)return TE89.base[t];if(58100<=t&&t<58150)return TC22.FJ42(t);if(59e3<=t&&t<6e4)return Classup.Config.equipment[t];if(75e3<=t)return h.resource[t]}},h.FK5=function(t){if(null==t||null==t)return String(t);"string"!=typeof t&&(t=String(t));var e=h.gID(t);return e&&e.name?e.name:t},h.FJ86=function(t){if(null!=t&&null!=t){"string"!=typeof t&&(t=String(t));var e=h.gID(t);if(e&&e.icon)return RES.hasRes(e.icon)?e.icon:""}},h.FL5=function(t){if(null==t||null==t)return"v1_img_kuang_bai_png";"string"!=typeof t&&(t=String(t));var e=h.gID(t);return e&&e.quality?h.getBox(e.quality):"v1_img_kuang_bai_png"},h.FL6=function(t){for(var e=t.map(function(t){return t.k}),i=0,s=e;i<s.length;i++){var o=s[i];if(e.indexOf(o)!=e.indexOf(o))return Log.trace("可能是错误的数据 具有相同的物品ID"),!1}for(var r=0,n=t;r<n.length;r++){var a=n[r];if(h.giC(a.k)<a.v)return!1}return!0},h.FK6=function(t){return!(h.giC(t.k)<t.v)},h.giC=function(t){"number"!=typeof t&&(t=parseInt(t));var e=0;if(t<75e3){var i=App.CM.gtM(O6.C11).packData.item;if(i)for(var s=0;s<i.length;s++)if(i[s].id==t){e=i[s].c;break}return e}var o=App.CM.gtM(O6.B82).avatarInfo;if(75e3==t)e=o.g;else if(75001==t)e=o.bg;else if(75002==t)e=o.co;else if(75003==t)e=o.vp;else if(75004==t)e=o.e;else if(75005==t)e=o.ac;else if(75006==t){var r=App.CM.gtM(O6.B89);r.myLegion&&(e=r.myLegion.devote)}else if(75007==t)e=o.rt;else if(75008==t)e=o.fc;else if(75009==t)e=o.ic;else if(75010==t)e=o.dc;else if(75011==t)e=o.re;else if(75012==t)e=o.cbc;else if(75013==t)e=o.fbc;else if(75015==t)e=o.ec;else if(75020==t)e=o.ccc;else if(75019==t)e=o.ilc;else if(75023==t)e=o.sec;else if(75021==t)e=o.mc;else if(75025==t)e=o.ap;else if(75026==t)e=o.ce;else if(75027==t)e=o.sco;else if(t==h.itemId.enc)e=o.enc;else if(t==h.itemId.drp)e=o.drp;else if(t==h.itemId.sjgs){e=App.CM.gtM(O6.B35).integral}else if(t==h.itemId.lover)e=o.lo;else if(t==h.itemId.ldc)e=o.ldc;else if(t==h.itemId.dfc){var n=App.CM.gtM(O6.A43);e=n&&n.shop?n.shop.co:0}else t==h.itemId.hcc&&(e=o.hcc);return e},h.getBox=function(t){var e="";switch(t){case 1:e="v1_img_kuang_bai_png";break;case 2:e="v1_img_kuang_lv_png";break;case 3:e="v1_img_kuang_lan_png";break;case 4:e="v1_img_kuang_zi_png";break;case 5:e="v1_img_kuang_cheng_png";break;case 6:e="v1_img_kuang_hong_png";break;case 7:e="v1_img_kuang_hong2_png";break;default:e="v1_img_kuang_bai_png"}return e},h.FL90=function(t){var e="";switch(t){case 1:e="v1_img_yuankuang_bai_png";break;case 2:e="v1_img_yuankuang_lv_png";break;case 3:e="v1_img_yuankuang_lan_png";break;case 4:e="v1_img_yuankuang_zi_png";break;case 5:e="v1_img_yuankuang_cheng_png";break;case 6:e="v1_img_yuankuang_hong_png";break;default:e="v1_img_yuankuang_bai_png"}return e},h.itemId={gold:75e3,bindGold:75001,coin:75002,exp:75004,faBao:75013,exped:75015,drp:75016,sjgs:75017,lover:75018,ldc:75022,sec:75023,dfc:75024,ce:75026,hcc:75028,enc:75029},h}();__reflect(N12.prototype,"N12");var O14=function(){function t(){}return t.A12=10001,t.A13=10002,t.A7=10003,t.A16=10004,t.A17=10005,t.A10=10006,t.A18=10007,t.A19=11001,t.A14=11002,t.A15=11003,t.A11=11004,t.A8=11005,t.A5=11006,t.A9=11007,t.A6=11008,t.A3=11009,t.A1=11010,t.A4=11011,t.A2=11012,t}();__reflect(O14.prototype,"O14");var ItemSpecialType={legion_package:3,WomenCard:5},TE94=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.HH97,"PackMainView",t,K17.UI_Main_TOP),t.rgF(O14.A9,t.GN62,t),t.rgF(O14.A6,t.GL76,t),t.rgF(O14.A19,t.GV19,t),t.rgF(O14.A14,t.GT52,t),App.VM.register(O7.I75,"Props",t,K17.UI_Tips),t.rgF(O14.A15,t.GT53,t),t.rgF(O14.A11,t.GR47,t),App.VM.register(O7.I5,"PackLack",t,K17.UI_Tips),t.rgF(O14.A8,t.GN63,t),t.rgF(O14.A5,t.GL77,t),App.VM.register(O7.E35,"TC83",t,K17.UI_Tips),t.rgF(O14.A3,t.GE91,t),t.rgF(O14.A1,t.GE1,t),App.VM.register(O7.E36,"PackChooseUseView",t,K17.UI_Main_TOP),t.rgF(O14.A4,t.GE92,t),t.rgF(O14.A2,t.GE2,t);var e=new THH9(t);return e.aLV(O7.I83),e.aLV(O7.HH97),e.aLV(O7.HH30),e.aLV(O7.I1),e.aLV(O7.I88),e.aLV(O7.I87),e.aLV(O7.HH34),e.aLV(O7.G63),e.aLV(O7.HH37),e.aLV(O7.F79),e.aLV(O7.I77),e.aLV(O7.I65),e.aLV(O7.I78),e.aLV(O7.G64),e.aLV(O7.D98),e.aLV(O7.F82),e.aLV(O7.E85),e.aLV(O7.I11),e.aLV(O7.E4),e.aLV(O7.B27),e.aLV(O7.B76),e.aLV(O7.E90),e.aLV(O7.C45),e.aLV(O7.A39),e.aLV(O7.I62),e.aLV(O7.F85),e.aLV(O7.G48),e.aLV(O7.C44),e.aLV(O7.I39),e.aLV(O7.HH25),e.aLV(O7.I79),e.aLV(O7.F84),e.aLV(O7.E1),e.aLV(O7.B73),e.aLV(O7.C43),e.aLV(O7.D99),e.aLV(O7.F83),e.aLV(O7.HH41),e.aLV(O7.G58),e.aLV(O7.G45),e.aLV(O7.E15),e.aLV(O7.G1),e.aLV(O7.E11),e.aLV(O7.E10),e.aLV(O7.I64),e.aLV(O7.I66),e.aLV(O7.I67),e.aLV(O7.F4),e.aLV(O7.F5),e.aLV(O7.G85),e.aLV(O7.HH51),e.aLV(O7.HH50),e.aLV(O7.I37),e.aLV(O7.E36),e.aLV(O7.D43),e.aLV(O7.E39),e.aLV(O7.C67),e.aLV(O7.E71),e.aLV(O7.E40),e.aLV(O7.C70),e.aLV(O7.B91),e.aLV(O7.HH99),e.aLV(O7.I63),e.aLV(O7.F27),e.aLV(O7.F99),e.aLV(O7.G52),e.aLV(O7.I80),e.aLV(O7.HH27),e.aLV(O7.D51),e.aLV(O7.HH1),e.aLV(O7.C4),e.aLV(O7.G25),e.aLV(O7.HH74),e.aLV(O7.F30),e.aLV(O7.E51),e.aLV(O7.HH77),e.aLV(O7.HH79),e.aLV(O7.I52),e.aLV(O7.HH6),e.aLV(O7.D86),e.aLV(O7.D63),e.aLV(O7.HH80),e.aLV(O7.C85),e.aLV(O7.C84),e.aLV(O7.D91),e.aLV(O7.F38),e.aLV(O7.HH10),e.aLV(O7.E10),e.aLV(O7.F40),e.aLV(O7.I66),e.aLV(O7.E63),e.aLV(O7.F48),e.aLV(O7.F53),e.aLV(O7.D80),e.aLV(O7.C26),e.aLV(O7.D3),e.aLV(O7.D1),e.aLV(O7.B57),e.aLV(O7.B58),e.aLV(O7.D4),e.aLV(O7.F57),e.aLV(O7.I36),e.aLV(O7.I73),e.aLV(O7.D85),e.aLV(O7.I59),e.aLV(O7.A76),e.aLV(O7.D6),e.aLV(O7.B59),e.aLV(O7.B60),e.aLV(O7.A20),e.aLV(O7.I32),e.aLV(O7.F43),e.aLV(O7.E66),e.aLV(O7.A6),e.aLV(O7.A11),e.aLV(O7.F59),e.aLV(O7.D10),e.aLV(O7.HeroVeinMain),e.aLV(O7.HeroVeinLvView),e.aLV(O7.HeroVeinClassView),e.aLV(O7.C28),t.packProxy=new THH10(t),t.rgF(O14.A12,t.GW57,t),t.rgF(O14.A13,t.GW58,t),t.rgF(O14.A7,t.GT54,t),t.rgF(O14.A16,t.GX83,t),t.rgF(O14.A17,t.GX84,t),t.rgF(O14.A10,t.GT55,t),t.rgF(O14.A18,t.FK28,t),t}return __extends(t,i),t.prototype.GN62=function(t){App.VM.open(O7.HH97,t)},t.prototype.GL76=function(){App.VM.close(O7.HH97)},t.prototype.GV19=function(){App.VM.open(O7.I83)},t.prototype.GT52=function(){App.VM.close(O7.I83)},t.prototype.GT53=function(t,e,i){if(t.skinid){var s=M18.FL28(t.skinid,":");if(1==s.length){if(t.effecttype===ItemSpecialType.WomenCard&&THH23.isActivityWomenByItemId(t.id))return void App.VM.open(O7.I75,t,e);this.GE91(t)}else if(1<s.length){var o=App.CM.gtM(O6.C12),r=P7.copyTab(o.baseHeroList[s[1]]);r.skillEvoType?App.CM.apF(O6.C12,O8.A82,r):App.CM.apF(O6.C12,O8.A62,r)}}else 2==t.effecttype&&i?this.GE92(t,e):App.VM.open(O7.I75,t,e)},t.prototype.GR47=function(){App.VM.close(O7.I75)},t.prototype.GN63=function(){App.VM.open(O7.I5)},t.prototype.GL77=function(){App.VM.close(O7.I5)},t.prototype.GE91=function(t){App.VM.open(O7.E35,t)},t.prototype.GE1=function(){App.VM.close(O7.E35)},t.prototype.GE92=function(t,e){App.VM.open(O7.E36,t,e)},t.prototype.GE2=function(){App.VM.close(O7.E36)},t.prototype.GW57=function(){return this.packProxy.GW57()},t.prototype.GW58=function(t){if(200==t.head.state){var e=this.gtM(),i=App.CM.gtM(O6.B82);e.initData(t.body),e.isShowHong(),i.ZV15(),i.ZN35(),e.notify(P4.T3)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT54=function(t){if(200==t.head.state){if(App.readyNotify){var e,i,s=this.gtM(),o=App.CM.gtM(O6.B98),r=App.CM.gtM(O6.B82),n=App.CM.gtM(O6.B90),a=App.CM.gtM(O6.B88),h=App.CM.gtM(O6.B49),p=App.CM.gtM(O6.A99),l=[],c=r.avatarInfo.v;if(t.body.tys&&h.setData(t.body),t.body.ua){if(r.avatarInfo.g>t.body.ua.g)if(platform instanceof SDWPlatform)platform.adjust("Spent_credit");var u=r.avatarInfo.l;r.ZK27(t.body.ua),t.body.ua.l&&t.body.ua.l!=u&&(THH25.FL45(),App.CM.apF(O6.C13,O12.A18),TC56.FK40(),THH34.FK40(),r.isRefreshPre=this.GY15()),r.isCanSkill(),r.isCanGrade(),o.updateLegend(),o.updateIsShow()}if(t.body.ui){P5.sIs(t.body.ui);var d=void 0;if(s.packData){for(var v=s.packData.item,f=0;f<v.length;f++)l.push(v[f].id);var g=t.body.ui;for(f=0;f<g.length;f++)0<=l.indexOf(g[f].i)?0==g[f].c?(v.splice(l.indexOf(g[f].i),1),l.splice(l.indexOf(g[f].i),1)):v[l.indexOf(g[f].i)].c=g[f].c:(l.push(g[f].i),v.push({c:g[f].c,id:g[f].i})),!d&&0<g[f].c&&(d=s.isRewardType(g[f].i));d&&(s.setNewReward(),p.notify(P4.V43)),s.isShowHong(),o.ZW35(),o.updateIsShow(),n.isShowImgNew(),a.isShowImgNew(),r.ZV15(),r.ZN35(),o.notify(P4.V43),s.notify(P4.V43)}}if((t.body.ue||t.body.re)&&(o.ZR92(t.body.ue,t.body.re),o.notify(P4.V43)),t.body.te&&(n.bagData.bag=n.bagData.bag.concat(t.body.te),n.sortBagData(),n.isShowImgNew(),n.notify(P4.V43)),t.body.ul)(e=App.CM.gtM(O6.B89)).GX76(t.body.ul),e.notify(P4.V43);if(t.body.heq)(e=App.CM.gtM(O6.B26)).addEquip(t.body.heq),e.notify(P4.V43);if(t.body.rd)(i=App.CM.gtM(O6.B34)).ZD48({rd:t.body.rd});if(t.body.ie)(i=App.CM.gtM(O6.B56)).setItemInfo(t.body.ie);if(t.body.cd)(i=App.CM.gtM(O6.B49)).ChildrenDoorData.setItemInfo(t.body.cd),i.notify(P4.V43);c<r.avatarInfo.v&&!r.showGiftRed&&this.ZT94(O6.B82,L13.A65),r.notify(P4.V43)}}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY15=function(){var t=TF50.preview;for(var e in t)if(parseInt(t[e].lv)==O4.getLv())return!0;return!1},t.prototype.GX83=function(t){this.packProxy.GX83(t)},t.prototype.FK28=function(t){this.gtM();var e=App.VM.gOV(O7.E36);e&&e.updateChoose(t)},t.prototype.GX84=function(t){if(this.GR47(),200==t.head.state){t.body.o&&P5.sIs(t.body.o);var e=this.gtM();e.isShowHong(),e.notify(P4.N84)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT55=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.isShowHong(),e.notify(P4.W22)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TE94.prototype,"TE94");var THH9=function(i){function t(t){var e=i.call(this,t)||this;return e.isNewReward=!1,e.isHong=0,e}return __extends(t,i),t.prototype.initData=function(t){this.packData=t,this.ZU47()},t.prototype.ZU47=function(){if(this.rewardData=[],this.packData&&this.packData.item){var t=this.packData.item;for(var e in t){this.isRewardType(t[e].id)&&this.rewardData.push(t[e])}}},t.prototype.isRewardType=function(t){return-1!==F6.itemIds.indexOf(t)},t.prototype.setNewReward=function(){this.isNewReward=!0,this.ZU47()},t.prototype.isShowHong=function(){if(this.isHong=0,O4.FF89(L17.A43))this.isHong=0;else if(this.packData&&this.packData.item)for(var t=0;t<this.packData.item.length;t++){var e=N12.gID(this.packData.item[t].id+""),i=O4.getLv();if(60006==this.packData.item[t].id&&TG73.FI76()<2&&58<=i&&i<100?this.isHong=1:e&&e.canuse&&(e.effecttype===ItemSpecialType.WomenCard?this.isHong=THH23.isActivityWomenByItemId(e.id)?1:0:(!e.uselevel||i>=e.uselevel)&&(this.isHong=1)),this.isHong)break}},t.prototype.has=function(t){return 0<N12.giC(t)},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(THH9.prototype,"THH9");var THH10=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.V43,e.ZT34,e),e.rSM(P4.W22,e.GT55,e),e}return __extends(t,i),t.prototype.GW57=function(){var s=this;return new Promise(function(e,t){var i={type:P4.T2,body:{}};s.rSMO(P4.T3,function(t){s.apF(O14.A13,t),e("加载道具数据完成")},s),s.sSM(i)})},t.prototype.ZT34=function(t){this.apF(O14.A7,t)},t.prototype.GX83=function(t){t.exchId||(t.exchId=0);var e={type:P4.N83,body:t};this.rSMO(P4.N84,this.ZHH23,this),this.sSM(e)},t.prototype.ZHH23=function(t){this.apF(O14.A17,t)},t.prototype.GT55=function(t){this.apF(O14.A10,t)},t}(TG80);__reflect(THH10.prototype,"THH10");var PackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=PackViewSkin,i.sGN("release_pack"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.ckDot.label=O3.tr(8369),this.propData.dataProvider=this.propCollection=new eui.ArrayCollection,this.propData.itemRenderer=PackItemIcon},t.prototype.open=function(){var t=App.CM.gtM(O6.C11);this.updatePack(t),this.ckDot.selected=O4.FF89(L17.A43),this.ckDot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH9)switch(e){case P4.T3:case P4.V43:case P4.W22:this.updatePack(t)}else if(t instanceof TG12){var i=App.CM.gtM(O6.C11);this.updatePack(i),i.notify()}},t.prototype.updatePack=function(t){var e=[],i=t.packData.item,s=!0;for(var o in P7.FM14()&&(s=!1),i){var r=i[o],n=P7.copyTab(N12.gID(r.id+""));if(n&&n.isshow){var a={itemData:{data:n,ct:r.c},isBottom:s,pack:!0,fl:1};e.push(a)}}e=e.sort(function(t,e){return t.itemData.data.sequence-e.itemData.data.sequence}),this.propCollection.replaceAll(e)},t.prototype.close=function(){s.prototype.close.call(this),this.propCollection.removeAll(),this.ckDot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ckDotEvnet,this)},t.prototype.ckDotEvnet=function(){App.CM.apF(O6.B82,L13.A24,L17.A43)},t}(BaseEuiView);__reflect(PackView.prototype,"PackView");var pack,PackItemIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.lbName.size=20,this.itemData&&this.itemData.data&&this.itemData.data.id){var t=this.itemData.data.id;65300<=t&&t<=65400&&(this.handler=this.ZP46)}},t.prototype.ZP46=function(){var t=this.itemData.data.id;App.VM.open(O7.E66,t)},t}(ItemIcon);__reflect(PackItemIcon.prototype,"PackItemIcon"),function(t){var e=function(){function t(){}return t.GOLD=75e3,t.BIND_GOLD=75001,t.COIN=75002,t.VIP_POINT=75003,t.EXP=75004,t.COMPETITION_COIN=75005,t}();t.I11=e,__reflect(e.prototype,"pack.I11")}(pack||(pack={}));var PackAttrItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.lbAttr.textFlow=M18.HTP.parser(O3.tr(6728,this.data.name,this.data.value))},e}(ChildrenBaseItem);__reflect(PackAttrItem.prototype,"PackAttrItem");var PackChooseitem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.seeTips,this),this.imgChoose.addEventListener(egret.Event.CHANGE,this.startChoose,this)},t.prototype.close=function(){this.imgHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.seeTips,this),this.imgChoose.removeEventListener(egret.Event.CHANGE,this.startChoose,this)},t.prototype.startChoose=function(){this.imgChoose.selected?(TG40.playClickEffect(),App.CM.apF(O6.C11,O14.A18,this.data.index)):this.imgChoose.selected=!0},t.prototype.dataChanged=function(){this.imgChoose.visible=!0,this.gpCt.visible=!0,this.imgChoose.selected=!!this.data.isShow;var t=N12.gID(this.data.itemId);this.imgQuality.source=N12.getBox(t.quality),this.imgHead.source=t.icon,this.lbCt.text=this.data.ct,t.type==P11.CHILDREN_TOY?(this.lbLv.visible=!0,this.lbLv.stroke=1,this.lbLv.text=O3.tr(7100,t.lv)):this.lbLv.visible=!1},t.prototype.seeTips=function(){if(58e3<this.data.itemId&&this.data.itemId<6e4)App.CM.apF(O6.B56,J4.A16,{t:this.data.itemId,show:!0,type:!1});else{var t=N12.gID(this.data.itemId);P5.FC75(t)}TG40.playClickEffect()},t}(eui.ItemRenderer);__reflect(PackChooseitem.prototype,"PackChooseitem");var propDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZN40=function(){this.itemBaseData.c=this.data.c;var t={};switch(this.itemBaseData.effecttype){case 1:var e=this.itemBaseData.param.split("_");t=M10.FD92(e[1],parseInt(e[0])),App.CM.apF(O6.B98,M19.A17,t);break;default:App.CM.apF(O7.I83,O14.A15,this.itemBaseData,0,!0)}},t.prototype.dataChanged=function(){var t=this.data.id.toString();this.itemBaseData=N12.gID(t),this.imgNew.visible=!!this.itemBaseData.canuse,this.grpCount.visible=1<this.data.c,this.lbNum.text=this.data.c,O5.FB13(this.lbName,this.itemBaseData.name,this.itemBaseData.quality),this.imgQuality.source=N12.getBox(this.itemBaseData.quality),this.imgHead.source=this.itemBaseData.icon},t}(eui.ItemRenderer);__reflect(propDataItem.prototype,"propDataItem");var PackChooseUseView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=PackChooseUseSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.packChooseitem.dataProvider=this.packCollection=new eui.ArrayCollection,this.packChooseitem.itemRenderer=PackChooseitem,this.lbTitle.textFlow=M18.HTP.parse(O3.tr(5020)),this.btnSure.label=O3.tr(5021),this.btnBigMinus.label=O3.tr(6402),this.btnBigAdd.label=O3.tr(6401)},t.prototype.open=function(t,e){this.packData=t,this.ct=e,this.num=this.packData.batchusenum,this.lbUseCount.text="1",this.lbUseSum.text="/"+this.ct,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureOpenPack,this),this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.initPackData()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureOpenPack,this),this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.packItemData=null,this.packCollection.removeAll(),this.num=null,this.ct=null,this.packData=null},t.prototype.initPackData=function(){var t=P7.copyTab(this.packData.param),e=M18.FL28(t,"|",",",":");this.packItemData=[];for(var i=0;i<e.length;i++)for(var s=0;s<e[i].length;s++)switch(this.packItemData[i]||(this.packItemData[i]={}),this.packItemData[i].isShow=!1,s){case 0:this.packItemData[i].index=parseInt(e[i][s]);break;case 1:this.packItemData[i].itemId=parseInt(e[i][s][0]),this.packItemData[i].ct=parseInt(e[i][s][1])}this.FK28=this.packItemData[0].index,this.packItemData[0].isShow=!0,this.packCollection.replaceAll(this.packItemData)},t.prototype.updateChoose=function(t){for(var e=0;e<this.packItemData.length;e++)this.packItemData[e].isShow=this.packItemData[e].index==t;this.FK28=t,this.packCollection.replaceAll(this.packItemData)},t.prototype.changeUse=function(t){var e=parseInt(this.lbUseCount.text);if(!this.packData.batchuse)return P18.sDP(O3.tr(2203)),!1;switch(t.target.name){case"-":0<e-1&&(this.lbUseCount.text=(e-1).toString());break;case"+":e+1<=this.num&&e<this.ct&&(this.lbUseCount.text=(e+1).toString());break;case"--":0<e&&(this.lbUseCount.text="1");break;case"++":this.num<=this.ct?this.lbUseCount.text=this.num+"":this.lbUseCount.text=this.ct+""}},t.prototype.sureOpenPack=function(){var t={useId:this.packData.id,useNum:parseInt(this.lbUseCount.text),exchId:this.FK28};this.apF(O14.A16,t)},t.prototype.closeSelf=function(){this.apF(O14.A2)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH9)switch(e){case P4.N84:var i=N12.giC(this.packData.id);(this.ct=i)&&0<i?(this.lbUseCount.text="1",this.lbUseSum.text="/"+i):this.closeSelf()}},t}(BaseEuiView);__reflect(PackChooseUseView.prototype,"PackChooseUseView");var PackLack=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=PackLackSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(5022)),this.lbContent.textFlow=M18.HTP.parse(O3.tr(5023)),this.btnSure.label=O3.tr(5024)},t.prototype.open=function(){this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureOpenPack,this)},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureOpenPack,this)},t.prototype.sureOpenPack=function(){App.CM.apF(O6.B98,M19.A31),this.closeSelf()},t.prototype.closeSelf=function(){this.apF(O14.A5)},t}(BaseEuiView);__reflect(PackLack.prototype,"PackLack");var PackMainView=function(o){function t(t,e){return o.call(this,t,e)||this}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),App.VM.rgS(O7.HH97,O7.I78,"EquipView",this.content),App.VM.rgS(O7.HH97,O7.I83,"PackView",this.content),App.VM.rgS(O7.HH97,O7.E38,"HeroEquipPackView",this.content),App.VM.rgS(O7.HH97,O7.E48,"ChildrenEquipView",this.content);var t=[O3.tr(2200),O3.tr(2201),O3.tr(3600),O3.tr(6516)],e=[O7.I78,O7.I83,O7.E38,O7.E48];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.onClickBack=function(){if(this.btnList.getCurView()==O7.E38){var t=App.VM.gOV(O7.E38);if("resolve"==t.currentState)return void t.changeState("unResolve")}this.closeSelf()},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),this.title=O3.tr(2202),this.ZG74();var i=t[0]||O7.I78;this.ZQ23(i),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBack,this);var s=App.CM.gtM(O6.B26);this.ZO78(s)},t.prototype.ZQ23=function(t){switch(t){case O7.I78:case O7.I83:case O7.E38:case O7.E48:this.btnList.ZM66(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBack,this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B98),e=App.CM.gtM(O6.C11);this.btnList.ZHH58(O7.I78,t.isSmelt),this.btnList.ZHH58(O7.I83,e.isHong)},t.prototype.ZO78=function(t){this.btnList.ZHH58(O7.E38,t.ZF50())},t.prototype.uBM=function(t,e){o.prototype.uBM.call(this,t,e),this.ZG74(),t instanceof TE86&&this.ZO78(t)},t}(BasePanelView);__reflect(PackMainView.prototype,"PackMainView");var TC83=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=PackModelTIpsSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(t){this.data=t,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.lbDesc.textFlow=M18.HTP.parser(t.desc),this.imgIcon.source=t.icon,O5.FB13(this.lbName,t.name,t.quality),this.imgIcon.source=t.icon,this.imgQuality.source=N12.getBox(t.quality);var e,i=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],s=t.skinid.split(","),o={id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};1==s.length?e=parseInt(s[0]):(o.h=i.h,e=1==O4.getSex()?parseInt(s[0]):parseInt(s[1]));o.id=e;var r=O1.getSkin(e);if("title"==r.type)this.showImg(r);else{if("horses"==r.type&&(o.id=i.id,o.h=e),"magicthing"==r.type&&(o.id=i.id,o.f=e,o.x=40,o.y=50),"wing"==r.type&&(o.y=35),"huanling"==r.type&&(o.y=50),this.objBoss&&(this.gpModel.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setData(o,this.gpModel),"horses"==r.type)for(var n=this.gpModel.getChildAt(0),a=0;a<n.numChildren;a++){if((h=n.getChildAt(a)).fight_st&&"b"==h.fight_st){h.visible=!1;break}}if("magicthing"==r.type)for(n=this.gpModel.getChildAt(0),a=0;a<n.numChildren;a++){(h=n.getChildAt(a)).fight_st&&"f"!=h.fight_st&&(h.visible=!1)}if("wing"==r.type)for(n=this.gpModel.getChildAt(0),a=0;a<n.numChildren;a++){(h=n.getChildAt(a)).fight_st&&"b"!=h.fight_st&&(h.visible=!1)}if("huanling"==r.type)for(n=this.gpModel.getChildAt(0),a=0;a<n.numChildren;a++){var h;(h=n.getChildAt(a)).fight_st&&"b"!=h.fight_st&&(h.visible=!1)}}},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.data=null,this.imgGn.source=null,this.objBoss&&(this.gpModel.removeChildren(),this.objBoss.destory(),this.objBoss=null)},t.prototype.showImg=function(t){var e=FightD.AV_RES_PATH+t.type+"/"+t.picture;FightRes.ZS35(this.imgGn,t.picture,e)},t.prototype.closeSelf=function(){this.apF(O14.A1)},t}(BaseEuiView);__reflect(TC83.prototype,"TC83");var item,Props=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=PropsSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5025)),this.btnBigMinus.label=O3.tr(6402),this.btnBigAdd.label=O3.tr(6401),this.btnUse.label=O3.tr(4651),this.btnJump.label=O3.tr(5902),this.attrData.dataProvider=this.attrCollection=new eui.ArrayCollection,this.attrData.itemRenderer=PackAttrItem},t.prototype.open=function(t,e){if(this.data=t,this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.lbDesc.textFlow=M18.HTP.parser(t.desc),this.imgIcon.source=t.icon,!e||e<=1||1!=t.type?(this.grpLb.visible=!1,11==t.type&&0<e&&(this.grpLb.visible=!0,this.lbCount.text=e+"",this.ct=parseInt(this.lbCount.text))):(this.grpLb.visible=!0,this.lbCount.text=e+"",this.ct=parseInt(this.lbCount.text)),O5.FB13(this.lbName,t.name,t.quality),this.imgIcon.source=t.icon,this.imgQuality.source=N12.getBox(t.quality),this.data.effecttype===ItemSpecialType.WomenCard&&(this.btnUse.label=O3.tr(5026)),t.mix&&11!=t.type){this.currentState="childSlice",this.lbStr2.textFlow=M18.HTP.parse(O3.tr(6727));var i=TF35.FI17(t.mix);return this.attrCollection.replaceAll(i),void(this.lbLv.text=O3.tr(7100,t.lv))}if(t.canuse&&App.VM.isOpen(O7.I83))this.currentState="use",this.lbCount.text=e+"",this.ct=parseInt(this.lbCount.text),this.useInitUI();else if(t.goto&&App.VM.isOpen(O7.I83)){this.currentState="jumpUse",this.btnJump.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this);var s=M18.FL28(t.goto,":");this.btnJump.lable=s[1],this.jumpId=parseInt(s[0])}else this.currentState="base"},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),"use"==this.currentState?(this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this)):"jumpUse"==this.currentState&&this.btnJump.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this),this.data=null,this.num=null,this.ct=null,this.jumpId=null},t.prototype.useInitUI=function(){this.num=this.data.batchusenum,this.lbUseCount.text="1",this.lbUseSum.text="/"+this.ct,this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this)},t.prototype.changeUse=function(t){var e=parseInt(this.lbUseCount.text);if(!this.data.batchuse)return P18.sDP(O3.tr(2203)),!1;switch(t.target.name){case"-":0<e-1&&(this.lbUseCount.text=(e-1).toString());break;case"+":e+1<=this.num&&e<this.ct&&(this.lbUseCount.text=(e+1).toString());break;case"--":0<e&&(this.lbUseCount.text="1");break;case"++":this.num<=this.ct?this.lbUseCount.text=this.num+"":this.lbUseCount.text=this.ct+""}},t.prototype.showUseTips=function(){P18.sDP(O3.tr(2204))},t.prototype.startUse=function(){var t=App.CM.gtM(O6.B82);if(this.data.effecttype==ItemSpecialType.legion_package){var e=App.CM.gtM(O6.B89);if(!e.myLegion||!e.myLegion.legion){this.closeSelf();var i={handler:function(){var t=O4.getLv(),e=parseInt(L4.gIV("unlockLevel"));if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.CM.apF(O6.B89,L11.B60)},content:O3.tr(1616)};return void App.VM.open(O7.C54,i)}}var s=t.avatarInfo.l;if(this.data.uselevel<=s){var o={useId:this.data.id,useNum:parseInt(this.lbUseCount.text)};this.apF(O14.A16,o)}else P18.sDP(O3.tr(2207,this.data.uselevel))},t.prototype.onClickJump=function(){this.jumpId&&(TG84.FM16(this.jumpId)&&(this.closeSelf(),this.apF(O14.A6)))},t.prototype.closeSelf=function(){this.apF(O14.A11)},t}(BaseEuiView);__reflect(Props.prototype,"Props"),function(t){var e=function(){};(item||(item={})).ItemRes=e,__reflect(e.prototype,"item.ItemRes")}(),function(t){var e=function(){};(item||(item={})).ItemVo=e,__reflect(e.prototype,"item.ItemVo")}();var L9=function(){function h(){}return h.FK35=function(t){h.init=t.pellet_init,h.pelletAttr=t.pellet_pelletattr,h.stargaze=t.pellet_stargaze,this.FI84()},h.FI84=function(){for(var t=Object.keys(h.stargaze).length,e={},i=1;i<=t;i++){for(var s=h.stargaze[i],o=1;o<=11;o++){var r=s["attr"+o];TG74.FI85(r,e,1)}this.attrCount[i]=e,e=TG74.copyMap(e)}},h.FK81=function(t,e){var i={},s=t-1;1<=s&&(i=TG74.copyMap(this.attrCount[s]));for(var o=e-1,r=h.stargaze[t],n=1;n<=o;n++){var a=r["attr"+n];TG74.FI85(a,i,1)}return i},h.gIV=function(t){var e=void 0;return h.init?e=h.init[t].value:e},h.FL91=function(t){var e=void 0;return h.pelletAttr?e=h.pelletAttr[t]:e},h.FF31=function(t){var e=void 0;return h.stargaze?e=h.stargaze[t]:e},h.FF32=function(t,e){var i=h.stargaze[t];if(i)return i["attr"+e]},h.FL7=function(t){return this.gIV("starName").split(",")[t-1]},h.attrCount={},h}();__reflect(L9.prototype,"L9");var M5=function(){function t(){}return t.A5=10001,t.A6=10002,t.A7=10003,t.A8=10004,t.A3=10005,t.A4=10006,t.A2=10007,t.A1=10008,t}();__reflect(M5.prototype,"M5");var TD45=function(i){function t(){var t=i.call(this)||this,e=new TG25(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.HH50),e.aLV(O7.D30),e.aLV(O7.G45),t.pelletProxy=new TG26(t),App.VM.register(O7.HH50,"PelletView",t,K17.UI_Main),t.rgF(M5.A5,t.GT56,t),t.rgF(M5.A6,t.GT57,t),t.rgF(M5.A7,t.GV20,t),t.rgF(M5.A8,t.GV21,t),App.VM.register(O7.D30,"PelletStarGazeView",t,K17.UI_Main),t.rgF(M5.A3,t.GL78,t),t.rgF(M5.A4,t.GL79,t),App.VM.register(O7.D31,"PelletStarAttrView",t,K17.UI_Main_TOP),t.rgF(M5.A2,t.GE3,t),t.rgF(M5.A1,t.GD4,t),t}return __extends(t,i),t.prototype.GE3=function(){App.VM.open(O7.D31)},t.prototype.GD4=function(){App.VM.close(O7.D31)},t.prototype.GT56=function(){return this.pelletProxy.GT56()},t.prototype.GT57=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.isShowImgNew(),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV20=function(t){this.pelletProxy.GV20(t)},t.prototype.GV21=function(t){if(200==t.head.state){var e=this.gtM();t.body.ps&&(e.ps=t.body.ps),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL78=function(){this.pelletProxy.GL78()},t.prototype.GL79=function(t){var e=this.gtM();if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void App.VM.gOV(O7.D30).ZP49(!0);e.sd=t.body.sd,e.isShowImgNew(),e.notify(P4.S14)},t}(TE11);__reflect(TD45.prototype,"TD45");var TG25=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.initData=function(t){this.ps=t.ps,this.sd=t.sd},t.prototype.getUseNum=function(t){for(var e=0;e<this.ps.length;e++)if(this.ps[e].id==t)return this.ps[e].n;return 0},t.prototype.calcAttrAdd=function(){for(var t={},e=0;e<this.ps.length;e++){var i=this.ps[e].id,s=this.ps[e].n,o=L9.FL91(i).attribution;TG74.FI85(o,t,s)}return t},t.prototype.notify=function(t){e.prototype.notifyView.call(this,this,t)},t.prototype.isShowImgNew=function(){this.stargaze=0;var t=App.CM.gtM(O6.B82).avatarInfo.l;if(parseInt(L9.gIV("starGazeLv"))<=t){var e=L9.FF31(this.sd.k),i=null;i=11==this.sd.v?e.reqitem2:e.reqitem1;var s=parseInt(i.split(":")[0]),o=parseInt(i.split(":")[1]);if(N12.giC(s)>=Number(o))if(this.stargaze=1,App.VM.isOpen(O7.D30))App.VM.gOV(O7.D30).ZQ39();var r=Object.keys(L9.stargaze).length;this.sd.k==r&&(this.stargaze=0)}if(this.pelletNum=0,parseInt(L9.gIV("pelletLV"))<=t)for(var n in L9.pelletAttr){var a=L9.pelletAttr[n].reqitem,h=parseInt(a.split(":")[0]),p=parseInt(a.split(":")[1]);if(N12.giC(h)>=Number(p))return void(this.pelletNum=1)}},t}(TG79);__reflect(TG25.prototype,"TG25");var TG26=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.GT56=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W58,body:{}};s.rSMO(P4.W59,function(t){s.apF(M5.A6,t),e("加载丹药筋脉数据完成")},s),s.sSM(i)})},t.prototype.GV20=function(t){var e={type:P4.X25,body:t};this.rSMO(P4.X26,this.GV21,this),this.sSM(e)},t.prototype.GV21=function(t){this.apF(M5.A8,t)},t.prototype.GL78=function(){var t={type:P4.S13,body:{}};this.rSMO(P4.S14,this.GL79,this),this.sSM(t)},t.prototype.GL79=function(t){this.apF(M5.A4,t)},t}(TG80);__reflect(TG26.prototype,"TG26");var TG74=function(){function t(){}return t.copyMap=function(t){var e={};for(var i in t)e[i]=t[i];return e},t.FL92=function(t){var e={};if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=Number(i[s].split(":")[0]),r=Number(i[s].split(":")[1]);e[o]?e[o]=e[o]+r:e[o]=r}return e},t.FI85=function(t,e,i){if(void 0===i&&(i=1),!t||i<=0)return e;for(var s=t.split(";"),o=0;o<s.length;o++){var r=Number(s[o].split(":")[0]),n=Number(s[o].split(":")[1])*i;e[r]?e[r]=e[r]+n:e[r]=n}return e},t.FI86=function(t){switch(t){case 1:return _ccq.white;case 2:return _ccq.green;case 3:return _ccq.blue;case 4:return _ccq.purple;case 5:return _ccq.orange;case 6:return _ccq.red;default:return _ccq.white}},t}();__reflect(TG74.prototype,"TG74");var PelletDanItem=function(e){function t(){var t=e.call(this)||this;return t.isSelected=!1,t.skinName=PelletDanItemSkin,t.touchEnabled=!1,t.imgSelected.visible=!1,t}return __extends(t,e),t.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this)},t.prototype.setData=function(t){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU35,this);var e=(this.pConf=t).reqitem,i=parseInt(e.split(":")[0]),s=parseInt(e.split(":")[1]),o=N12.giC(i);s<=o?(this.imgNew.visible=!0,this.itemHas&&this.itemHas>o&&App.THH33.aUE(this.gpEffect,"iconSkill",-this.gpEffect.width/2+3,-this.gpEffect.height/2+3,1)):(this.imgNew.visible&&App.THH33.aUE(this.gpEffect,"iconSkill",-this.gpEffect.width/2+3,-this.gpEffect.height/2+3,1),this.imgNew.visible=!1),this.itemHas=o,this.lbName.text=t.desc,this.imgDan.source=t.icon},t.prototype.ZK29=function(t,e){this.selectHandler=t,this.selectCallObj=e},t.prototype.ZU35=function(){this.selectHandler&&this.selectHandler.call(this.selectCallObj,this)},Object.defineProperty(t.prototype,"selected",{get:function(){return this.isSelected},set:function(t){this.isSelected=t,this.imgSelected.visible=this.isSelected},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(PelletDanItem.prototype,"PelletDanItem");var PelletStarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=PelletStarItemSkin,t}return __extends(t,e),t.prototype.setData=function(t,e,i){var s=null,o=(s=t==Object.keys(L9.stargaze).length?this.getIdAndPos(t,e,i):this.getIdAndPos(t,e,i+1)).id,r=s.pos;L9.FF32(o,r)?(this.visible=!0,this.imgOne.source="v1_fonts_jingmai"+r+"_png"):this.visible=!1,11==Number(r)?this.imgStar.source="v1_img_tupo_png":this.imgStar.source="v1_img_shengxing_png",this.imgSelected.visible=3==i},t.prototype.getIdAndPos=function(t,e,i){var s={},o=e+(i-4),r=0;11<o?(o-=11,r++):o<=0&&(o+=11,r--);var n=t+r;return s.id=n,s.pos=o,s},t}(eui.Component);__reflect(PelletStarItem.prototype,"PelletStarItem");var PelletStarAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="PelletStarAttr",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);for(var t=1;t<=9;t++)this["lbStr"+t].textFlow=M18.HTP.parse(O3.tr(4915+t))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B88);this.ZE66(i)},t.prototype.uBM=function(t){s.prototype.uBM.call(this,t),t instanceof TG25&&this.ZE66(t)},t.prototype.ZE66=function(t){var e=t.sd.k,i=t.sd.v,s=L9.FK81(e,i),o=avatar.AttributeKey;s[o.ATK]?this.atkLb.text=String(s[o.ATK]):this.atkLb.text="0",s[o.DEF]?this.defLb.text=String(s[o.DEF]):this.defLb.text="0",s[o.HP]?this.hpLb.text=String(s[o.HP]):this.hpLb.text="0",s[o.SPEED]?this.speedLb.text=String(s[o.SPEED]):this.speedLb.text="0",s[o.HIT]?this.hitLb.text=String(s[o.HIT]):this.hitLb.text="0",s[o.DOD]?this.dodLb.text=String(s[o.DOD]):this.dodLb.text="0",s[o.CRIT]?this.critLb.text=String(s[o.CRIT]):this.critLb.text="0",s[o.PHY]?this.phyLb.text=String(s[o.PHY]):this.phyLb.text="0"},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){this.apF(M5.A1)},t}(BaseEuiView);__reflect(PelletStarAttrView.prototype,"PelletStarAttrView");var PelletStarGazeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.posData={},i.zhuMoveData={},i.skinName=pelletStarGazeSkin,i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.ZP47(),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4652)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4653)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4653)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4653))},t.prototype.ZP47=function(){var t=new PelletZhuPosition(130,96,.7,.7);this.zhuMoveData[1]=t;var e=new PelletZhuPosition(89,176,.8,.8);this.zhuMoveData[2]=e;var i=new PelletZhuPosition(163,253,.9,.9);this.zhuMoveData[3]=i;var s=new PelletZhuPosition(302,300,1,1);this.zhuMoveData[4]=s;var o=new PelletZhuPosition(441,253,.9,.9);this.zhuMoveData[5]=o;var r=new PelletZhuPosition(515,176,.8,.8);this.zhuMoveData[6]=r;var n=new PelletZhuPosition(474,96,.7,.7);this.zhuMoveData[7]=n},t.prototype.initZhuUI=function(){var t=App.CM.gtM(O6.B88),e=t.sd.k,i=t.sd.v;this.posData={};for(var s=0;s<7;s++){var o=this.grpZhu.getChildAt(s);(this.posData[s+1]=o).setData(e,i,s)}},t.prototype.moveZhu=function(){for(var t={},e=1;e<=7;e++){var i=this.posData[e],s=e-1;0==s&&(s=7);var o=this.zhuMoveData[s];this.startMove(i,o,s),t[s]=i}this.posData=t},t.prototype.startMove=function(t,e,i){var s=this,o=App.CM.gtM(O6.B88),r=o.sd.k,n=o.sd.v;if(t.imgSelected.visible=!1,7==i){t.visible=!1;var a=App.K16.doTimer(200,1,function(){t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY},t,function(){t.setData(r,n,i-1),App.K16.rBH(a),a=null,s.ZP49(!0)});this.handler=a}else egret.Tween.get(t).to({x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY},200).call(function(){t.setData(r,n,i-1),egret.Tween.removeTweens(t)})},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU30,this),this.imgDan0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openProsView,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP48,this),this.resetZhuGrp(),this.initZhuUI(),this.ZQ39()},t.prototype.resetZhuGrp=function(){for(var t=0;t<7;t++){var e=this.zhuMoveData[t+1],i=this.grpZhu.getChildAt(t);i.$setX(e.x),i.$setY(e.y),i.$setScaleX(e.scaleX),i.$setScaleY(e.scaleY)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU30,this),this.imgDan0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openProsView,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP48,this),this.handler&&(App.K16.rBH(this.handler),this.handler=null),this.needItemId=null,this.needItemName=null,this.needNum=null},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG25&&this.ZE66()},t.prototype.ZE66=function(){var t=App.CM.gtM(O6.B88);if(t){var e=t.sd.k;Object.keys(L9.stargaze).length!=e&&this.moveZhu(),this.ZQ39()}},t.prototype.ZQ39=function(){var t=App.CM.gtM(O6.B82);this.avatarImg.source=O4.FHH96(t.avatarInfo.ge,t.avatarInfo.c);var e=App.CM.gtM(O6.B88),i=e.sd.k,s=e.sd.v,o=Object.keys(L9.stargaze).length,r=L9.FK81(i,s),n=O4.getScore(r);if(this.lbScore.$setText(n+""),o==i){this.grpDi.visible=!1,this.lbMax.visible=!0,this.lbMax.$setText(O3.tr(2301));var a=L9.FF31(i);this.lbChong.$setText(a.name),this.lbAttrOne.visible=!1,this.lbAttrTwo.visible=!1,this.lbAttrThree.visible=!1,this.lbAttrFour.visible=!1}else this.setBaseData(i,s),this.grpDi.visible=!0,this.lbMax.visible=!1,this.ZT35(i,s)},t.prototype.ZT35=function(t,e){var i=K18.attribute;this.lbAttrOne.visible=!0,this.lbAttrTwo.visible=!0,this.lbAttrThree.visible=!1,this.lbAttrFour.visible=!1;var s=L9.FF32(t,e);if(s){var o=s.split(";");3==o.length?this.lbAttrThree.visible=!0:4==o.length&&(this.lbAttrThree.visible=!0,this.lbAttrFour.visible=!0);for(var r=0;r<o.length;r++){var n=i[o[r].split(":")[0]].name,a=o[r].split(":")[1];this.getLbAttr(r).textFlow=M18.HTP.parser(O3.tr(2302,n,a))}}},t.prototype.getLbAttr=function(t){switch(t){case 0:return this.lbAttrOne;case 1:return this.lbAttrTwo;case 2:return this.lbAttrThree;case 3:default:return this.lbAttrFour}},t.prototype.setBaseData=function(t,e){var i=L9.FF31(t);this.lbChong.$setText(i.name);var s=i.reqitem1,o=s.split(":")[0],r=parseInt(s.split(":")[1]),n=N12.giC(parseInt(o));this.lbHas1.$setText(n+""),n<=0?this.lbHas1.$setTextColor(16458017):this.lbHas1.$setTextColor(7716890),this.imgDan.setData(N12.gID(o));var a=i.reqitem2.split(":")[0],h=parseInt(s.split(":")[1]),p=N12.giC(parseInt(a));this.lbHas2.$setText(p+""),p<=0?this.lbHas2.$setTextColor(16458017):this.lbHas2.$setTextColor(7716890),this.imgDan1.setData(N12.gID(a)),11==e?this.ZT36(a,h,p):this.ZT36(o,r,n),this.btnUse.label=L9.FL7(e)},t.prototype.ZT36=function(t,e,i){this.needItemId=t;var s=N12.gID(t),o=parseInt(s.quality);this.img_kuang.source=N12.getBox(o),this.imgDan0.source=N12.FJ86(t);var r=TG74.FI86(o),n=s.name,a="*"+e;this.lbDanName.textFlow=M18.HTP.parser(O3.tr(2303,r,n,a)),this.needItemName=s.name,this.needNum=e,this.lbHas.$setText(i+""),i<e?(this.btnUse.imgNew.visible=!1,this.lbHas.$setTextColor(16458017)):(this.btnUse.imgNew.visible=!0,this.lbHas.$setTextColor(7716890))},t.prototype.ZU30=function(){var t=Number(this.lbHas.text);if(t<this.needNum){var e=this.needNum-t;App.VM.open(O7.G87,this.needItemId,e)}else this.ZP49(!1),App.CM.apF(O6.B88,M5.A3)},t.prototype.openProsView=function(){var t=N12.gID(this.needItemId);this.aCF(O6.C11,O14.A15,t,this.lbHas.text)},t.prototype.ZP48=function(){App.CM.apF(O6.B88,M5.A2)},t.prototype.ZP49=function(t){this.btnUse.touchEnabled=t},t}(BaseEuiView);__reflect(PelletStarGazeView.prototype,"PelletStarGazeView");var PelletZhuPosition=function(t,e,i,s){this.x=t,this.y=e,this.scaleX=i,this.scaleY=s};__reflect(PelletZhuPosition.prototype,"PelletZhuPosition");var pellet,Practice,PelletView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=PelletSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.ZP50(),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4638)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4639)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4640)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4641)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4642)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4643)),this.lbStr7.textFlow=M18.HTP.parse(O3.tr(4644)),this.lbStr8.textFlow=M18.HTP.parse(O3.tr(4645)),this.lbStr9.textFlow=M18.HTP.parse(O3.tr(4646)),this.lbStr10.textFlow=M18.HTP.parse(O3.tr(4647)),this.lbStr11.textFlow=M18.HTP.parse(O3.tr(4648)),this.lbStr12.textFlow=M18.HTP.parse(O3.tr(4649))},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU30,this),this.imgDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openProsView,this),this.ZI45(),this.ZE66()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU30,this),this.imgDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openProsView,this);for(var i=0;i<8;i++){var s=this.grpPellets.getChildAt(i);s&&s.destroy()}this.selectedPellet=null},t.prototype.openProsView=function(t){var e=N12.gID(this.itemID);this.aCF(O6.C11,O14.A15,e)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof TG25&&this.ZE66(),t instanceof THH9&&this.ZI45()},t.prototype.ZP50=function(){for(var t=0;t<8;t++){var e=this.grpPellets.getChildAt(t);e&&e.ZK29(this.GW87,this)}},t.prototype.ZE66=function(){var t=App.CM.gtM(O6.B88);if(this.ZP51(t),null!=this.selectedPellet){var e=this.selectedPellet.pConf;this.lbUse.$setText(t.getUseNum(e.id)+"")}},t.prototype.ZI45=function(){if(this.selectedPellet=null,App.CM.gtM(O6.B88)){for(var t=0;t<8;t++){var e=L9.FL91(t+1),i=this.grpPellets.getChildAt(t);i&&(i.setData(e),i.selected=!1,null==this.selectedPellet?this.selectedPellet=i:0!=i.itemHas&&0==this.selectedPellet.itemHas?this.selectedPellet=i:0!=i.itemHas&&0!=this.selectedPellet.itemHas&&this.selectedPellet.pConf.id>e.id&&(this.selectedPellet=i))}this.selectedPellet&&(this.selectedPellet.selected=!0),this.ZQ39()}},t.prototype.ZP51=function(t){var e=t.calcAttrAdd();for(var i in e)this["lb"+i]&&(this["lb"+i].text=e[i]);var s=O4.getScore(e);this.lbScore.$setText(s+"")},t.prototype.ZQ39=function(){var t=this.selectedPellet.pConf,e=t.attribution;this.lbAttrOne.text=K18.dealAttr(e);var i=TG74.FL92(e),s=O4.getScore(i);this.lbAttrThree.text=O3.tr(2300)+s;var o=App.CM.gtM(O6.B88);this.imgDan.source=t.icon;var r=t.reqitem,n=r.split(":")[0];this.itemID=n;var a=N12.gID(n),h=parseInt(a.quality),p=parseInt(r.split(":")[1]),l=TG74.FI86(h),c=t.desc,u="*"+p;this.lbDanName2.textFlow=(new egret.HtmlTextParser).parser(O3.tr(2303,l,c,u)),this.img_kuang.source=N12.getBox(h),this.LbDanName.$setText(t.desc),this.LbDanName.$setTextColor(TG74.FI86(h));var d=N12.giC(parseInt(n));this.lbHas.$setText(d+""),this.btnUse.imgNew.visible=d<=0?(this.lbHas.$setTextColor(16458017),!1):(this.lbHas.$setTextColor(7716890),!0),d>=parseInt(L9.init.batch.value)?this.btnUse.label=O3.tr(4650):this.btnUse.label=O3.tr(4651),this.lbUse.$setText(o.getUseNum(t.id)+"")},t.prototype.GW87=function(t){this.selectedPellet&&(this.selectedPellet.selected=!1),this.selectedPellet=t,this.selectedPellet.selected=!0,this.ZQ39()},t.prototype.ZU30=function(){if(null!=this.selectedPellet){var t=this.selectedPellet.pConf,e=t.reqitem,i=parseInt(e.split(":")[1]);if(this.selectedPellet.itemHas<i)P18.sDP(t.desc+"不足");else{var s={id:parseInt(t.id)};App.CM.apF(O6.B88,M5.A7,s)}}},t}(BaseEuiView);__reflect(PelletView.prototype,"PelletView"),function(t){var e=function(){};(pellet||(pellet={})).PelletVo=e,__reflect(e.prototype,"pellet.PelletVo")}(),function(a){var t=function(){function n(){}return n.FK35=function(t){var e=t.practice_init,i=t.practice_control,s=t.practice_power,o=t.practice_wisdom,r=t.practice_skill;n.control=i,n.power=s,n.wisdom=o,n.skillCtr=this.FG42(a.Const.practiceType.control,r),n.skillPower=this.FG42(a.Const.practiceType.power,r),n.skillWisdom=this.FG42(a.Const.practiceType.wisdom,r),n.init=e},n.FG42=function(t,e){var i={};for(var s in e){var o=e[s];o.type==t&&(i[o.lv]=o)}return i},n.gIV=function(t){return n.init[t].value},n.FB86=function(t,e,i){var s;switch(t){case a.Const.practiceType.control:s=n.control;break;case a.Const.practiceType.power:s=n.power;break;case a.Const.practiceType.wisdom:s=n.wisdom}if(s)for(var o in s){var r=s[o];if(r.lv==e&&r.type==i)return r}},n.FF33=function(t){var e;switch(t){case a.Const.practiceType.control:e=n.control;break;case a.Const.practiceType.power:e=n.power;break;case a.Const.practiceType.wisdom:e=n.wisdom}return e},n.FB4=function(t,e){var i=n.FF33(t);for(var s in i)i[s].type==e&&((void 0)[i[s].lv]=i[s])},n.FE20=function(t,e){switch(t){case a.Const.practiceType.control:return this.skillCtr[e];case a.Const.practiceType.power:return this.skillPower[e];case a.Const.practiceType.wisdom:return this.skillWisdom[e]}},n}();a.Config=t,__reflect(t.prototype,"Practice.Config")}(Practice||(Practice={})),function(t){var e=function(){function t(){}return t.GT58=100,t.GT59=101,t.PRACTICE_LOAD_REQ=200,t.PRACTICE_LOAD_RES=201,t.PRACTICE_CTRL_UPLV_REQ=202,t.PRACTICE_CTRL_UPLV_RES=203,t.PRACTICE_PW_UPLV_REQ=204,t.PRACTICE_PW_UPLV_RES=205,t.PRACTICE_WIS_UPLV_REQ=206,t.PRACTICE_WIS_UPLV_RES=207,t.practiceType={control:1,power:2,wisdom:3},t}();t.Const=e,__reflect(e.prototype,"Practice.Const")}(Practice||(Practice={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return t.proxy=new i.Proxy(t),t.rgF(i.Const.GT58,t.GT58,t),t.rgF(i.Const.GT59,t.GT59,t),t.rgF(i.Const.PRACTICE_LOAD_REQ,t.proxy.loadDataReq,t.proxy),t.rgF(i.Const.PRACTICE_LOAD_RES,t.GV70,t),t.rgF(i.Const.PRACTICE_CTRL_UPLV_REQ,t.proxy.ctrlUpLvReq,t.proxy),t.rgF(i.Const.PRACTICE_CTRL_UPLV_RES,t.GW59,t),t.rgF(i.Const.PRACTICE_PW_UPLV_REQ,t.proxy.pwUpLvReq,t.proxy),t.rgF(i.Const.PRACTICE_PW_UPLV_RES,t.GY67,t),t.rgF(i.Const.PRACTICE_WIS_UPLV_REQ,t.proxy.wisUpLvReq,t.proxy),t.rgF(i.Const.PRACTICE_WIS_UPLV_RES,t.GX85,t),new i.Model(t),t.model.aLV(O7.I52),t.model.aLV(O7.C28),t.model.aLV(O7.I64),t.model.aLV(O7.I64),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.gtM()},enumerable:!0,configurable:!0}),t.prototype.GV70=function(t){200==t.head.state?(this.model.updateData(t.body),this.model.notify(P4.V15)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW59=function(t){200==t.head.state?(this.model.ZM15(t.body),this.model.notify(P4.M96)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY67=function(t){200==t.head.state?(this.model.ZM15(t.body),this.model.notify(P4.M96)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX85=function(t){200==t.head.state?(this.model.ZM15(t.body),this.model.notify(P4.M96)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT58=function(){App.VM.open(O7.C28,O7.I52)},t.prototype.GT59=function(){App.VM.close(O7.C28,O7.I52)},t}(TE11);i.Controller=t,__reflect(t.prototype,"Practice.Controller")}(Practice||(Practice={})),function(p){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.updateData=function(t){t&&(this.ctrList=t.cdt||this.ctrList,this.powerList=t.pdt||this.powerList,this.wisdomList=t.wdt||this.wisdomList,this.skillList=t.sdt||this.skillList)},t.prototype.ZM15=function(t){if(t.cd)for(var e in this.ctrList)this.ctrList[e].t==t.cd.t&&(this.ctrList[e]=t.cd);if(t.pd)for(var e in this.powerList)this.powerList[e].t==t.pd.t&&(this.powerList[e]=t.pd);if(t.wd)for(var e in this.wisdomList)this.wisdomList[e].t==t.wd.t&&(this.wisdomList[e]=t.wd);if(t.sd)for(var e in this.skillList)this.skillList[e].t==t.sd.t&&(this.skillList[e]=t.sd)},t.prototype.getViewList=function(){switch(this.curPage){case p.Const.practiceType.control:return this.ctrList;case p.Const.practiceType.power:return this.powerList;case p.Const.practiceType.wisdom:return this.wisdomList}},t.prototype.ZT37=function(){switch(this.curIndex=1,this.curPage){case p.Const.practiceType.control:case p.Const.practiceType.power:case p.Const.practiceType.wisdom:}},t.prototype.getPageRed=function(t){var e,i;switch(t){case p.Const.practiceType.control:e=this.ctrList,i="controlItem";break;case p.Const.practiceType.power:e=this.powerList,i="powerItem";break;case p.Const.practiceType.wisdom:e=this.wisdomList,i="wisdomItem";break;default:return 0}var s=1;for(var o in e){var r=p.Config.FB86(t,e[o].l,e[o].t),n=p.Config.gIV(i+s);if(N12.giC(n)>=r.cost&&0<r.cost)return 1;s++}return 0},t.prototype.ZT38=function(t){var e,i;switch(t){case p.Const.practiceType.control:e=this.ctrList,i="controlSkill";break;case p.Const.practiceType.power:e=this.powerList,i="powerSkill";break;case p.Const.practiceType.wisdom:e=this.wisdomList,i="wisdomSkill"}var s=M18.FL28(p.Config.gIV(i),",");for(var o in this.skillList){var r=this.skillList[o];if(r.t==t){var n=0;for(var a in e){var h=e[a];h.l>r.l&&0<=s.indexOf(h.t.toString())&&n++}return n}}},t.prototype.FL35=function(){for(var t in p.Const.practiceType)if(0<this.getPageRed(p.Const.practiceType[t]))return 1;return 0},t.prototype.notify=function(t){e.prototype.notifyView.call(this,this,t)},t}(TG79);p.Model=t,__reflect(t.prototype,"Practice.Model")}(Practice||(Practice={})),function(o){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.M96,e.GW59,e),e.rSM(P4.Q88,e.GY67,e),e.rSM(P4.P22,e.GX85,e),e}return __extends(t,i),t.prototype.loadDataReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.V14,body:{}};s.rSMO(P4.V15,function(t){s.apF(o.Const.PRACTICE_LOAD_RES,t),e("加载修炼系统信息完成")},s),s.sSM(i)})},t.prototype.ctrlUpLvReq=function(t){var e={type:P4.M95,body:{type:t}};this.sSM(e)},t.prototype.GW59=function(t){this.apF(o.Const.PRACTICE_CTRL_UPLV_RES,t)},t.prototype.pwUpLvReq=function(t){var e={type:P4.Q87,body:{type:t}};this.sSM(e)},t.prototype.GY67=function(t){this.apF(o.Const.PRACTICE_PW_UPLV_RES,t)},t.prototype.wisUpLvReq=function(t){var e={type:P4.P21,body:{type:t}};this.sSM(e)},t.prototype.GX85=function(t){this.apF(o.Const.PRACTICE_WIS_UPLV_RES,t)},t}(TG80);o.Proxy=t,__reflect(t.prototype,"Practice.Proxy")}(Practice||(Practice={})),function(d){var t=function(){function t(){}return t.FG43=function(t){void 0===t&&(t=!0);App.CM.gtM(O6.B82);var e=App.CM.gtM(O6.B43),i=O4.getLv(),s=e.serOpenDay+1,o=parseInt(d.Config.gIV("unlockLv")),r=parseInt(d.Config.gIV("unlockDate")),n=!0;return(s<r||i<o)&&(n=!1,t&&P18.sDP(O3.tr(6811,o,r))),n},t.FF34=function(t,e,i){var s=d.Config.FB86(t,i,e),o=THH1.FI55(s.gradeattr),r={},n={};for(var a in o){var h=O4.FD72(parseInt(a)),p=parseInt(o[a]);r[a]={value:p,name:h}}if(0<s.cost){var l=d.Config.FB86(t,i+1,e),c=THH1.FI55(l.gradeattr);for(var a in c){var u=O4.FD72(parseInt(a));p=parseInt(c[a])-r[a].value;n[a]={value:p,name:u}}}return{curData:r,addData:n}},t.FE21=function(t,e,i){var s=d.Config.FB86(t,i,e);return M10.gAG(s.gradeattr).toString()},t}();d.Utils=t,__reflect(t.prototype,"Practice.Utils")}(Practice||(Practice={}));var ItemPracticeIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemPracticeIconSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){},t.prototype.dataChanged=function(){this.imgIcon.source=this.data.icon,this.imgSel.visible=this.data.isSel,this.imgRed.visible=this.data.isRed,this.imgNotActive.visible=!(0<this.data.lv),this.gpCt.visible=0<this.data.lv,0<this.data.lv?(this.gpCt.visible=!0,this.lbCt.text=this.data.lv,P16.sGF(this.imgIcon,!1)):P16.sGF(this.imgIcon,!0)},t.prototype.oCI=function(){var t=App.CM.gtM(O6.B54);t.curIndex=this.data.type,t.notify("changeType")},t}(eui.ItemRenderer);__reflect(ItemPracticeIcon.prototype,"ItemPracticeIcon");var PracticeAttr=function(e){function t(){var t=e.call(this)||this;return t.skinName=PracticeAttrSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){},t.prototype.dataChanged=function(){this.lbName.textFlow=M18.HTP.parser(O3.tr(6850,this.data.name,this.data.curValue)),0<this.data.addValue?(this.lbPre.text=this.data.addValue,this.imgUp.visible=this.lbPre.visible=!0):this.imgUp.visible=this.lbPre.visible=!1},t}(eui.ItemRenderer);__reflect(PracticeAttr.prototype,"PracticeAttr");var PracticeTopIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName=PracticeTopIconSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){},t.prototype.initData=function(t){switch(t.page){case Practice.Const.practiceType.control:this.imgIcon.source=Practice.Config.gIV("controlIcon"),this.lbName.text=O3.tr(6824);break;case Practice.Const.practiceType.power:this.imgIcon.source=Practice.Config.gIV("powerIcon"),this.lbName.text=O3.tr(6825);break;case Practice.Const.practiceType.wisdom:this.imgIcon.source=Practice.Config.gIV("wisdomIcon"),this.lbName.text=O3.tr(6826)}this.updateData(t)},t.prototype.updateData=function(t){this.data=t,this.imgSel.visible=t.isSelect,this.imgRed.visible=t.isRed},t.prototype.oCI=function(){var t=App.CM.gtM(O6.B54);t.curPage=this.data.page,t.notify("changePage")},t}(eui.Component);__reflect(PracticeTopIcon.prototype,"PracticeTopIcon");var PracticeView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=PracticeSkin,i}return __extends(t,o),t.prototype.initUI=function(){this.sGN("release_practice"),this.itemCollection=new eui.ArrayCollection,this.dgAttr.dataProvider=this.itemCollection,this.dgAttr.itemRenderer=PracticeAttr,o.prototype.initUI.call(this),this.lbTitle.textFlow=M18.HTP.parser(O3.tr(6849)),this.btnTrain.label=O3.tr(6857),this.lbMax.text=O3.tr(6865)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.lbWay.addEventListener(egret.TextEvent.LINK,this.onClickWay,this),this.btnTrain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTrain,this);var i=App.CM.gtM(O6.B54);i.curPage=Practice.Const.practiceType.control,i.ZT37(),this.ZD33(i),this.ZU39(i,!0),this.ZHH24(i),egret.Tween.get(this.imgIcon,{loop:!0}).to({top:21},0).to({top:27},650).to({top:21},650),egret.Tween.get(this.imgIcon0,{loop:!0}).to({top:21,alpha:.2},0).to({top:27,alpha:0},650).to({top:21,alpha:.2},650),App.THH32.aUE(this.gpAction,"wdsg_xiulianjiem_bjfg_001",this.gpAction.width/2,this.gpAction.height/2,null,null,null,null)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof Practice.Model)switch(this.ZD33(t),s){case"changePage":t.ZT37(),this.ZHH24(t),this.ZU39(t),this.ZD33(t);break;case"changeType":this.ZHH24(t),this.ZD33(t);break;case P4.M96:case P4.Q88:case P4.P22:this.ZHH24(t),this.ZU39(t),this.ZD33(t)}else t instanceof THH9&&(this.ZHH24(),this.ZU39(),this.ZD33())},t.prototype.ZD33=function(t){t=t||App.CM.gtM(O6.B54);var e,i="";for(var s in t.skillList)t.skillList[s].t==t.curPage&&(e=t.skillList[s],0==t.skillList[s].l&&(i=O3.tr(6831)));var o,r,n,a,h,p,l=Practice.Config.FE20(e.t,e.l),c=Practice.Config.FE20(e.t,e.l+1),u="";switch(c&&(u=O3.tr(6843)),t.curPage){case Practice.Const.practiceType.control:o=6828,r=6840,n=6837,a="controlItem",h=t.ctrList,p=Practice.Config.gIV("controlIcon");break;case Practice.Const.practiceType.power:o=6829,r=6841,n=6838,a="powerItem",h=t.powerList,p=Practice.Config.gIV("powerIcon");break;case Practice.Const.practiceType.wisdom:o=6830,r=6842,n=6839,a="wisdomItem",h=t.wisdomList,p=Practice.Config.gIV("wisdomIcon")}this.setIcon(p),this.lbName.textFlow=M18.HTP.parser(O3.tr(o)+i),this.lbName2.textFlow=M18.HTP.parser(O3.tr(r)+u);var d=0==l.lv?O3.tr(6943):Math.floor(100*l.trigger)+"%",v=0==l.lv?O3.tr(6944):Math.floor(100*l.ratio)+"%";for(var s in this.lbDesc.textFlow=M18.HTP.parser(O3.tr(6836,d,v,O3.tr(n))),this.lbCur1.textFlow=M18.HTP.parser(O3.tr(6845,Math.floor(100*l.trigger))),this.lbCur2.textFlow=M18.HTP.parser(O3.tr(6846,Math.floor(100*l.ratio))),c?(this.gpUpAttr1.visible=this.gpUpAttr1.includeInLayout=!0,this.gpUpAttr2.visible=this.gpUpAttr2.includeInLayout=!0,this.gpEff.width=280,this.gpEff2.width=280,this.lbNext1.textFlow=M18.HTP.parser(O3.tr(6847,Math.floor(100*c.trigger))),this.lbNext2.textFlow=M18.HTP.parser(O3.tr(6847,Math.floor(100*c.ratio))),this.lbDesc1.visible=!0,this.lbDesc1.textFlow=M18.HTP.parser(O3.tr(6844,c.lv,t.ZT38(c.type),5))):(this.lbDesc1.visible=!1,this.gpUpAttr1.visible=this.gpUpAttr1.includeInLayout=!1,this.gpUpAttr2.visible=this.gpUpAttr2.includeInLayout=!1,this.gpEff.width=this.lbCur1.width,this.gpEff2.width=this.lbCur2.width,this.validateNow()),h)if(h[s].t==t.curIndex){this.curInfo=h[s];break}this.lbPowerTop.text=Practice.Utils.FE21(t.curPage,t.curIndex,this.curInfo.l);var f=Practice.Utils.FF34(t.curPage,t.curIndex,this.curInfo.l),g=[];for(var s in f.curData){var m=f.curData[s],y={name:m.name,curValue:m.value,addValue:f.addData[s]?f.addData[s].value:0};g.push(y)}this.itemCollection.replaceAll(g);var A=Practice.Config.FB86(t.curPage,this.curInfo.l,this.curInfo.t);if(0<A.cost){this.gpCost.visible=!0,this.lbMax.visible=!1,this.costId=Practice.Config.gIV(a+t.curIndex);var b=N12.gID(this.costId),T={data:b,ct:0};this.item.data={itemData:T,isBottom:!1,scale:1};var C=N12.giC(this.costId),w=_cc.green;if(C<A.cost&&(w=_cc.red),this.lbOwn.textFlow=M18.HTP.parser(O3.tr(6855,w,C)),this.lbItem.textFlow=M18.HTP.parser(O3.tr(6854,b.name,A.cost)),b.link){var O=M18.FL28(b.link,":");this.curLink=Number(O[1]),this.lbWay.textFlow=M18.HTP.parser(O3.tr(6856,O[0]))}else this.lbWay.visible=!1,this.curLink=null;P7.FD53(this.btnTrain,C>=A.cost?1:0)}else this.gpCost.visible=!1,this.lbMax.visible=!0},t.prototype.ZHH24=function(t){var e=(t=t||App.CM.gtM(O6.B54)).getViewList(),i=1,s="";for(var o in e){var r=Practice.Config.FB86(t.curPage,e[o].l,e[o].t);switch(t.curPage){case Practice.Const.practiceType.control:s="controlItem";break;case Practice.Const.practiceType.power:s="powerItem";break;case Practice.Const.practiceType.wisdom:s="wisdomItem"}var n=Practice.Config.gIV(s+i),a=N12.giC(n),h=N12.gID(n),p=0<r.cost&&a>=r.cost,l={type:e[o].t,icon:h.icon,lv:e[o].l,isRed:p,isSel:e[o].t==t.curIndex};this["com"+i].data=l,i++}},t.prototype.ZU39=function(t,e){void 0===e&&(e=!1),t=t||App.CM.gtM(O6.B54);for(var i=1;i<=3;i++){var s=this["icon"+i],o={page:i,isSelect:t.curPage==i,isRed:0<t.getPageRed(i)};e?s.initData(o):s.updateData(o)}},t.prototype.setIcon=function(t){this.imgIcon.source=t,this.imgIcon0.source=t},t.prototype.onClickWay=function(){TG84.FM16(this.curLink)},t.prototype.onClickTrain=function(){var t=App.CM.gtM(O6.B54),e=Practice.Config.FB86(t.curPage,this.curInfo.l,this.curInfo.t),i=N12.giC(this.costId);if(i<e.cost)App.VM.open(O7.G87,this.costId,e.cost-i);else switch(t.curPage){case Practice.Const.practiceType.control:App.CM.apF(O6.B54,Practice.Const.PRACTICE_CTRL_UPLV_REQ,t.curIndex);break;case Practice.Const.practiceType.power:App.CM.apF(O6.B54,Practice.Const.PRACTICE_PW_UPLV_REQ,t.curIndex);break;case Practice.Const.practiceType.wisdom:App.CM.apF(O6.B54,Practice.Const.PRACTICE_WIS_UPLV_REQ,t.curIndex)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B54,Practice.Const.GT59)},t.prototype.close=function(){o.prototype.close.call(this),this.btnTrain.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTrain,this),egret.Tween.removeTweens(this.imgIcon),egret.Tween.removeTweens(this.imgIcon0),App.THH32.rEf(this.gpAction,"wdsg_xiulianjiem_bjfg_001")},t}(BaseEuiView);__reflect(PracticeView.prototype,"PracticeView");var TF50=function(){function b(){}return b.FK35=function(t){b.preview=t.preview_preview},b.FB5=function(t){return b.preview[t]},b.FE22=function(t){var e=b.preview,i=void 0;for(var s in e){if(parseInt(e[s].lv)>t)return e[s].lv;i=e[s].lv}parseInt(i)},b.FB87=function(t,e){var i=b.preview;for(var s in i)if(t==parseInt(i[s].type))return 1==e?i[s].model:i[s].res},b.FC50=function(t){var e,i,s,o=new TF39;4==(e=parseInt(t.type))||7==e||8==e?s=t.model:i=parseInt(t.model);var r=App.CM.gtM(O6.B82),n=r.avatarInfo.us[J11.A7],a=this.FC52(r.avatarInfo.ge,r.avatarInfo.c),h=this.FB88(r.avatarInfo.ge,r.avatarInfo.c),p=App.CM.gtM(O6.C12),l=THH1.FG28(),c=(l=l.sort(THH1.FI57))[0];p.battleList&&0<p.battleList.length&&(c=p.heroList[p.battleList[0].v]);var u=c.heroModel,d=App.CM.gtM(O6.B91),v=K19.init.initialSkin.value;d.ao&&d.ao.s&&(v=d.ao.s);var f=parseInt(t.model),g=b.preview[2];switch(e){case 1:o.id=a,o.h=parseInt(t.model),o.we=h;break;case 2:o.id=f;break;case 4:var m=s.split(",");1==r.avatarInfo.ge?o.id=m[0]:o.id=m[1],o.h=n.h;break;case 5:o.id=i;break;case 7:var y=s.split(",");1==r.avatarInfo.ge?o.id=y[0]:o.id=y[1],o.h=n.h;break;case 8:var A=s.split(",");1==r.avatarInfo.c?o.we=A[0]:2==r.avatarInfo.c?o.we=A[1]:3==r.avatarInfo.c&&(o.we=A[2]),o.id=n.id,o.h=n.h,o.f=n.f;break;case 9:o.id=n.id,o.wi=i,o.h=n.h,o.f=n.f,o.we=n.we;break;case 10:o.id=parseInt(g.model),o.fi=i;break;case 11:o.id=parseInt(g.model),o.gi=i;break;case 12:o.id=u,o.ps=i;break;case 13:o.id=u,o.ss=i;break;case 15:o.id=v;break;case 16:o.id=v,o.aps=i;break;case 17:o.id=v;break;case 18:o.id=v,o.ass=i;break;case 22:o.id=i;break;default:o=void 0}return o},b.FL8=function(t){var e=b.preview,i=void 0;for(var s in e)if(parseInt(e[s].lv)>t){i=e[s].res;break}return i},b.FG44=function(t){var e=b.preview,i=void 0;for(var s in e)if(parseInt(e[s].lv)==t){i=e[s].res;break}return i},b.FC51=function(t){var e=b.preview;for(var i in e)if(parseInt(e[i].lv)>t)return e[i].name},b.FE23=function(t){var e=b.preview;for(var i in e)if(parseInt(e[i].lv)==t)return e[i].id},b.FB88=function(t,e){var i;if(1==t)switch(e){case 1:i=K18.init.avatarMaleWeapon1.value;break;case 2:i=K18.init.avatarMaleWeapon2.value;break;case 3:i=K18.init.avatarMaleWeapon3.value}else switch(e){case 1:i=K18.init.avatarFemaleWeapon1.value;break;case 2:i=K18.init.avatarFemaleWeapon2.value;break;case 3:i=K18.init.avatarFemaleWeapon3.value}return i},b.FC52=function(t,e){var i;if(1==t)switch(e){case 1:i=K18.init.avatarMaleMount1.value;break;case 2:i=K18.init.avatarMaleMount2.value;break;case 3:i=K18.init.avatarMaleMount3.value}else switch(e){case 1:i=K18.init.avatarFemaleMount1.value;break;case 2:i=K18.init.avatarFemaleMount2.value;break;case 3:i=K18.init.avatarFemaleMount3.value}return i},b.FA32=function(t){var e=b.preview;for(var i in e)if(parseInt(e[i].lv)>=t)return e[i].word},b.FC53=function(t){var e=b.preview;for(var i in e)if(parseInt(e[i].lv)>t)return e[i]},b.FD28=function(t){for(var e,i=O4.getLv(),s=App.CM.gtM(O6.B43),o=Reincarnate.Utils.mapkeyMax(b.preview),r=1;r<=o;r++)if(t.gotList&&t.gotList.indexOf(r)<0){var n=b.preview[r];i>=(e=n).lv&&s.serOpenDay+1>=n.day?t.state=J13.A3:t.state=J13.A1;break}return e},b}();__reflect(TF50.prototype,"TF50");var K7=function(){function t(){}return t.A8=0,t.A7=1,t.A5=2,t.A6=3,t.A3=100,t.A4=101,t.A1=102,t.A2=103,t}();__reflect(K7.prototype,"K7");var TC84=function(i){function t(){var t=i.call(this)||this;t.proxy=new TF87(t),new TF86(t).aLV(O7.I41);var e=P7.FJ17();return App.VM.register(O7.I41,"PreviewView",t,e?K17.UpFight:K17.UI),t.rgF(K7.A8,t.GP33,t),t.rgF(K7.A7,t.GN42,t),App.VM.register(O7.G24,"PreviewInfoView",t,K17.UI_Popup),t.rgF(K7.A5,t.GT60,t),t.rgF(K7.A6,t.GT61,t),t.rgF(K7.A3,t.GR48,t),t.rgF(K7.A4,t.GR49,t),t.rgF(K7.A1,t.GK2,t),t.rgF(K7.A2,t.GK3,t),t}return __extends(t,i),t.prototype.GU26=function(t){t.fightType!==P15.A3&&this.GP54()},t.prototype.GP54=function(){var t=App.VM.gOV(O7.I41);t&&t.setVisible(!0)},t.prototype.GQ48=function(t){t.fightType!==P15.A3&&this.GP55()},t.prototype.GP55=function(){var t=App.VM.gOV(O7.I41);t&&t.setVisible(!1)},t.prototype.GR48=function(){this.proxy.GR48()},t.prototype.GR49=function(t){var e=this.gtM();200==t.head.state?(P5.sIs(t.body.ob),e.updateData(t.body),e.notify(P4.W7)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GK2=function(t){this.proxy.GK2(t)},t.prototype.GK3=function(t){var e=this.gtM();if(200==t.head.state){var i=TF50.FB5(t.body.index),s=i.res,o=TF50.FC50(i),r=i.word;if(s&&!App.VM.isOpen(O7.G69)){var n={titleImg:r,showImg:s,previewData:i};App.VM.open(O7.G69,n)}if(o){var a={id:o.id,h:o.h,wi:o.wi,we:o.we,f:o.f,fi:o.fi,gi:o.gi,ps:o.ps,ss:o.ss,aps:o.aps,ass:o.ass,x:0,y:o.h?10:0,dir:Dir.bl,objType:P13.A6};if(!App.VM.isOpen(O7.G69)){n={objData:a,titleImg:r,previewData:i,ob:t.body.ob};App.VM.open(O7.G69,n)}}e.updateData(t.body),e.notify(P4.W7)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP33=function(){if(App.SceneManager.getCurrScene()==M2.A4){var t=this.gtM();if(TF50.FD28(t)){if(App.VM.isOpen(O7.I41))return;App.VM.open(O7.I41)}else App.VM.isOpen(O7.I41)&&this.apF(K7.A7)}},t.prototype.GN42=function(){App.VM.close(O7.I41)},t.prototype.GT60=function(){App.VM.open(O7.G24)},t.prototype.GT61=function(){App.VM.close(O7.G24)},__decorate([Ioc.Listener(GameEvent.EXIT_BATTLE)],t.prototype,"GU26",null),__decorate([Ioc.Listener(GameEvent.ENTRY_BATTLE)],t.prototype,"GQ48",null),t=__decorate([Ioc.MVC],t)}(TE11);__reflect(TC84.prototype,"TC84");var PreviewInfoView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="PreviewInfoSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemCollection=new eui.ArrayCollection,this.rewardList.dataProvider=this.itemCollection,this.rewardList.itemRenderer=ItemIcon},t.prototype.open=function(t){this.dlg.title=O3.tr(6214),this.dlg.strBtnOK=O3.tr(1464),this.lbStr1.text=O3.tr(6213),this.dlg.ZM69(this.closeSelf,this);var e=App.CM.gtM(O6.B63);this.ZE40(e)},t.prototype.close=function(){this.objBoss&&(this.gpHero.removeChildren(),this.objBoss.destory(),this.objBoss=null)},t.prototype.uBM=function(t,e){t instanceof TF86&&this.ZE40(t)},t.prototype.ZE40=function(t){var e=TF50.FD28(t),i=(e.word,e.lv),s=O3.tr(6212,i);this.lbLv.textFlow=M18.HTP.parser(s),0<e.day?(this.gpOpenday.visible=this.gpOpenday.includeInLayout=!0,this.lbOpenDay.textFlow=M18.HTP.parser(O3.tr(6254,e.day))):this.gpOpenday.visible=this.gpOpenday.includeInLayout=!1,this.lbTitle.text=e.name,e.explain?this.lbDesc.text=e.explain:this.lbDesc.textFlow=M18.HTP.parser(O3.tr(6215,e.powerup));var o=TF50.FC50(e);if(o)this.gpHero.visible=!0,this.imgRes&&(this.imgRes.visible=!1),this.showBoss(o);else{var r=e.res;r&&(null==this.imgRes&&(this.imgRes=new eui.Image,this.imgRes.horizontalCenter="0",this.imgRes.verticalCenter="0",this.grpPreview.addChildAt(this.imgRes,0)),this.imgRes.source=r,this.imgRes.visible=!0,this.gpHero.visible=!1)}var n=M18.FL28(e.award,";",":"),a=[],h=!0;for(var p in P7.FM14()&&(h=!1),n){var l={data:N12.gID(n[p][0]),ct:n[p][1]};a.push({itemData:l,isBottom:h,scale:1})}this.itemCollection.replaceAll(a)},t.prototype.showBoss=function(t){if(this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,TF50.FB87(5,1)==t.id){this.gpHero.$setScaleX(1.5),this.gpHero.$setScaleY(1.5);var e={x:0,y:-25,dir:Dir.bl,objType:P13.A6};this.objBoss.setBaseData(e),t.bt=BehaviourType.Attack_d,t.sr=1,this.objBoss.setData(t,this.gpHero),this.objBoss.action=Action.Stand;for(var i=this.gpHero.getChildAt(0),s=0;s<i.numChildren;s++){var o=i.getChildAt(s);o.fight_st&&"b"!=o.fight_st&&(o.visible=!1)}}else{this.gpHero.$setScaleX(1),this.gpHero.$setScaleY(1);e={x:0,y:t.h?10:0,dir:Dir.bl,objType:P13.A6};this.objBoss.setBaseData(e),t.bt=BehaviourType.Stand_d,this.objBoss.setData(t,this.gpHero)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B63,K7.A6)},t}(BaseEuiView);__reflect(PreviewInfoView.prototype,"PreviewInfoView");var TF86=function(i){function t(t){return i.call(this,t)||this}return __extends(t,i),t.prototype.updateData=function(t){this.gotList=null!=t.alGet?t.alGet:this.gotList,this.index=null!=t.index?t.index:this.index},t.prototype.isShowView=function(){var t=TF50.FB5(this.index);return!(O4.getLv()>=t.lv)||this.gotList.indexOf(this.index)<0},t.prototype.FL35=function(){return 0},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TF86.prototype,"TF86");var TF87=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Q82,e.GK3,e),e}return __extends(t,i),t.prototype.GR48=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W6,body:{}};s.rSMO(P4.W7,function(t){s.GR49(t),e("加载系统预告完成")},s),s.sSM(i)})},t.prototype.GR49=function(t){this.apF(K7.A4,t)},t.prototype.GK2=function(t){var e={type:P4.Q81,body:{index:t}};this.sSM(e)},t.prototype.GK3=function(t){this.apF(K7.A2,t)},t}(TG80);__reflect(TF87.prototype,"TF87");var PreviewView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="PreviewViewSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(t){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetail,this);var e=App.CM.gtM(O6.B63);this.ZE40(e)},t.prototype.close=function(){this.objBoss&&(this.grpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetail,this)},t.prototype.uBM=function(t,e){if(t instanceof TG12){var i=App.CM.gtM(O6.B63);this.ZE40(i)}else t instanceof TF86&&this.ZE40(t)},t.prototype.ZE40=function(t){var e=TF50.FD28(t);if(e){O4.getLv(),e.word,e.id;var i=e.lv;if(this.imgRed.visible=t.state==J13.A3,i){var s=O3.tr(2642,i);if(this.lbPreLv.textFlow=M18.HTP.parser(s),this.lbPreName.text=e.name,this.curData!=e){this.curData=e;var o=TF50.FC50(this.curData);if(o)this.grpBoss.visible=!0,this.imgRes&&(this.imgRes.visible=!1),this.showBoss(o);else{var r=this.curData.res;r&&(null==this.imgRes&&(this.imgRes=new eui.Image,this.imgRes.horizontalCenter="0",this.imgRes.y=31,this.grpPreview.addChildAt(this.imgRes,5)),this.imgRes.source=r,this.imgRes.visible=!0,this.grpBoss.visible=!1)}}}else App.CM.apF(O6.B63,K7.A7)}else this.apF(K7.A7)},t.prototype.showBoss=function(t){if(this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,TF50.FB87(5,1)==t.id){this.grpBoss.$setScaleX(1.5),this.grpBoss.$setScaleY(1.5);var e={x:0,y:-25,dir:Dir.bl,objType:P13.A6};this.objBoss.setBaseData(e),t.bt=BehaviourType.Attack_d,t.sr=1,this.objBoss.setData(t,this.grpBoss),this.objBoss.action=Action.Stand;for(var i=this.grpBoss.getChildAt(0),s=0;s<i.numChildren;s++){var o=i.getChildAt(s);o.fight_st&&"b"!=o.fight_st&&(o.visible=!1)}}else{this.grpBoss.$setScaleX(1),this.grpBoss.$setScaleY(1);e={x:0,y:t.h?10:0,dir:Dir.bl,objType:P13.A6};this.objBoss.setBaseData(e),t.bt=BehaviourType.Stand_d,this.objBoss.setData(t,this.grpBoss)}},t.prototype.openDetail=function(){App.CM.gtM(O6.B63).state==J13.A3?App.CM.apF(O6.B63,K7.A1,this.curData.index):App.CM.apF(O6.B63,K7.A5)},t}(BaseEuiView);__reflect(PreviewView.prototype,"PreviewView");var TG75=function(){function o(){}return o.FK35=function(t){o.init=t.rank_init,o.rank=t.rank_rank,o.newRank=o.FL9(o.rank)},o.FB34=function(){var t=App.CM.gtM(O6.B82).avatarInfo.l,e=[];for(var i in o.newRank){var s=o.newRank[i].name;o.newRank[i].unlocklv<=t&&1==o.newRank[i].show&&e.push(s)}return e},o.FHH63=function(){return o.init.openLv.value},o.FF35=function(t){var e="",i=o.rank;for(var s in i)if(i[s].id==t){e=i[s].name;break}return e},o.FF36=function(t){var e=1,i=o.rank;for(var s in i)if(i[s].name==t){e=i[s].id;break}return e},o.FL9=function(t){var e={};for(var i in t){e[t[i].serial]=t[i]}return e},o}();__reflect(TG75.prototype,"TG75");var O18=function(){function t(){}return t.A5=10001,t.A6=10002,t.A1=10003,t.A2=10004,t.A4=11001,t.A3=11002,t}();__reflect(O18.prototype,"O18");var TE95=function(i){function t(){var t=i.call(this)||this,e=new THH11(t);return e.aLV(O7.I10),e.aLV(O7.HH39),e.aLV(O7.D96),e.aLV(O7.D97),e.aLV(O7.B26),e.aLV(O7.E83),e.aLV(O7.B71),e.aLV(O7.B24),e.aLV(O7.F75),e.aLV(O7.G5),e.aLV(O7.I69),e.aLV(O7.G88),e.aLV(O7.E25),e.aLV(O7.I63),e.aLV(O7.G13),e.aLV(O7.B90),e.aLV(O7.A25),e.aLV(O7.G20),e.aLV(O7.HH71),e.aLV(O7.E99),e.aLV(O7.B42),e.aLV(O7.B43),e.aLV(O7.C2),e.aLV(O7.I51),e.aLV(O7.D61),e.aLV(O7.D66),e.aLV(O7.C88),e.aLV(O7.D73),e.aLV(O7.F47),e.aLV(O7.E61),e.aLV(O7.HH18),e.aLV(O7.F52),t.rankProxy=new THH12(t),App.VM.register(O7.I10,"RankMainView",t,K17.UI_Main_TOP),t.rgF(O18.A4,t.GN66,t),t.rgF(O18.A3,t.GL80,t),t.rgF(O18.A5,t.GW60,t),t.rgF(O18.A6,t.GT62,t),t.rgF(O18.A1,t.GN64,t),t.rgF(O18.A2,t.GN65,t),t}return __extends(t,i),t.prototype.GW60=function(t){this.rankProxy.ZP52(t)},t.prototype.GT62=function(t){var e=this.gtM();e.initData(t.body),e.notify(P4.X79)},t.prototype.GN64=function(t){this.rankProxy.GN64(t)},t.prototype.GN65=function(t){var e=this.gtM();e.ZT40(t.body),e.notify(P4.R72)},t.prototype.GN66=function(t){App.VM.open(O7.I10,t)},t.prototype.GL80=function(){App.VM.close(O7.I10)},t}(TE11);__reflect(TE95.prototype,"TE95");var RankMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.curIndex=0,i.pageNum=1,i.curPageNum=1,i.rankType=1,i.skinName=RankViewSkin,i.lbMyName.text="",i.dataSource=new eui.ArrayCollection,i.listView.itemRenderer=ItemRankView,i.listView.dataProvider=i.dataSource,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4425)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4428))},t.prototype.initData=function(){},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.scBtnList.addEventListener(eui.UIEvent.CHANGE,this.moveHandler,this),this.scBtnList.addEventListener(eui.UIEvent.CHANGE_END,this.outHandler,this),null!=t[0]?(this.setCurIndex(t[0]),this.listBtnView.selectedIndex=t[0]):(this.setCurIndex(0),this.listBtnView.selectedIndex=0),this.loadListData(),this.ZS9(),this.ZX98(ItemRankTabView)},t.prototype.ZS9=function(){var t;t=TG75.FB34(),this.dataBtnSource=new eui.ArrayCollection(t)},t.prototype.loadListData=function(){var t={type:this.rankType,currPage:this.curPageNum,size:5};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH11)switch(this.ZB18(t),e){case P4.X79:this.ZE41(t,1);break;case P4.R72:this.ZE41(t,2)}},t.prototype.ZB18=function(t){if(this.curPageNum=null!=t.nCurrentPage?t.nCurrentPage:1,this.pageNum=null!=t.nAllPage?t.nAllPage:1,this.rankType=null!=t.nType?t.nType:this.rankType,t.rankList&&this.dataSource.replaceAll(t.rankList),null==t.myRankList.nRank||100<t.myRankList.nRank||0==t.myRankList.nRank)this.lbMyRank.textFlow=M18.HTP.parse(O3.tr(4429));else{var e=O3.tr(4430,t.myRankList.nRank);this.lbMyRank.textFlow=M18.HTP.parser(e)}this.ZM92()},t.prototype.ZE41=function(t,e){if(1==e)""==this.lbMyName.text?t.rankList[0]&&t.rankList[0].nId==t.curId&&t.rankList[0].obj?(this.ZX97(t.rankList[0].sName),this.showBoss(t.rankList[0].obj),this.grpBossArm.visible=!0):this.grpBossArm.visible=!1:this.grpBossArm.visible=!0;else if(2==e)if(0<t.rankList.length)for(var i=0;i<t.rankList.length;i++)t.rankList[i]&&t.rankList[i].nId==t.curId&&t.rankList[i].obj&&(this.ZX97(t.rankList[i].sName),this.showBoss(t.rankList[i].obj),this.grpBossArm.visible=!0),null==t.rankList[i]&&(this.grpBossArm.visible=!1);else this.grpBossArm.visible=!1},t.prototype.showBoss=function(t){this.objBoss&&(this.grpBossArm.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject;var e={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss.setBaseData(e),t.bt=BehaviourType.Attack_d,t.sr=1,this.objBoss.setData(t,this.grpBossArm),this.objBoss.action=Action.Stand},t.prototype.ZX97=function(t){this.lbMyName.textFlow=M18.HTP.parse(O3.tr(4426,t))},t.prototype.ZX98=function(t){this.listBtnView.itemRenderer=t,this.listBtnView.dataProvider=this.dataBtnSource,this.scBtnList.viewport=this.listBtnView,this.listBtnView.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemHandler,this)},t.prototype.ZM92=function(){this.lbNum.textFlow=M18.HTP.parse(O3.tr(4427,this.curPageNum,this.pageNum))},t.prototype.itemHandler=function(t){this.setCurIndex(t.itemIndex)},t.prototype.ZT39=function(t){return TG75.FB34()[t]},t.prototype.setCurIndex=function(t){var e=this.ZT39(t);this.rankType=TG75.FF36(e),this.curPageNum=1,this.lbMyName.text="",this.loadListData()},t.prototype.onClickLeft=function(){1!=this.curPageNum&&(this.curPageNum=this.curPageNum-1,this.loadListData(),this.ZM92())},t.prototype.onClickRight=function(){this.curPageNum>=this.pageNum||(this.curPageNum=this.curPageNum+1,this.loadListData(),this.ZM92())},t.prototype.moveHandler=function(t){},t.prototype.outHandler=function(t){},t.prototype.closeSelf=function(){this.apF(O18.A3)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.listBtnView.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemHandler,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.scBtnList.removeEventListener(eui.UIEvent.CHANGE,this.moveHandler,this),this.scBtnList.removeEventListener(eui.UIEvent.CHANGE_END,this.outHandler,this),this.dataSource.removeAll(),this.dataBtnSource.removeAll(),this.objBoss&&(this.grpBossArm.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject},t}(BaseEuiView);__reflect(RankMainView.prototype,"RankMainView");var RankType={tongque:17,through:18,shudao:19,chapter:20,answer:21,christmas:29,legionBossLeg:30,goldPig:31,expEdition:36,shootRange:37,BattleField:38,Anecdote:39,LuckRank:40,JubaoRank:41,SouthCAward:42,Fairyland:43},THH11=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.initData=function(t){null!=t&&(this.rankList=[],this.nCurrentPage=t.currPage,this.nAllPage=t.allPage,this.nType=t.tp,this.addRankList(t.as),this.myRankList=new RankData(t.me))},t.prototype.addRankList=function(t){if(null!=t&&0<t.length){this.curId=t[0].i;for(var e=0;e<t.length;e++){var i=new RankData(t[e]);this.rankList[e]=i}}},t.prototype.ZT40=function(t){if(this.nType==t.t&&0<this.rankList.length)for(var e=0;e<this.rankList.length;e++)this.rankList[e]&&this.rankList[e].nId==t.tg&&(this.rankList[e].obj=t.u)},t.prototype.notify=function(t){e.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(THH11.prototype,"THH11");var THH12=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.X79,e.GV96,e),e.rSM(P4.R72,e.GN65,e),e}return __extends(t,i),t.prototype.ZP52=function(t){var e={type:P4.X78,body:t};this.sSM(e)},t.prototype.GV96=function(t){this.apF(O18.A6,t)},t.prototype.GN64=function(t){var e={type:P4.R71,body:t};this.sSM(e)},t.prototype.GN65=function(t){this.apF(O18.A2,t)},t}(TG80);__reflect(THH12.prototype,"THH12");var ItemRankTabView=function(e){function t(){var t=e.call(this)||this;return t.skinName=RankTabViewSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.onItemTap=function(){TG40.playClickEffect()},t.prototype.dataChanged=function(){this.lbName.text=this.data.name||this.data,this.imgRedPoint.$setVisible(0<this.data.isShowRed)},t}(eui.ItemRenderer);__reflect(ItemRankTabView.prototype,"ItemRankTabView");var ItemRankView=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemRankSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){if(null!=this.data){this.lbPoint.visible=!1,this.data.rlv&&(this.lbPoint.visible=!0,this.lbPoint.textFlow=M18.HTP.parse(O3.tr(4436,this.data.rlv))),0<this.data.rwLv+this.data.rws&&(this.lbPoint.visible=!0,this.lbPoint.textFlow=O3.tr2(5567,this.data.rwLv)),this.updateThree(),this.lbRank.textFlow=M18.HTP.parse(O3.tr(4431,this.data.nRank)),this.lbName.textFlow=M18.HTP.parse(O3.tr(4432,this.data.sName));var t=this.lbName.$getWidth();if(this.imgV.$setX(130+t),1e4<this.data.nPower){var e=THH13.FL93(this.data.nPower);this.lbPower.textFlow=M18.HTP.parse(O3.tr(4433,e))}else 0<this.data.nPower?this.lbPower.textFlow=M18.HTP.parse(O3.tr(4433,this.data.nPower)):this.lbPower.textFlow=M18.HTP.parse(O3.tr(4433,"0"));var i=App.CM.gtM(O6.C19);1==i.nType||2==i.nType||3==i.nType||46==i.nType?this.lbLevel.textFlow=M18.HTP.parse(O3.tr(4434,this.data.nLv)):this.lbLevel.textFlow=M18.HTP.parse(O3.tr(4435,this.data.nLv))}},t.prototype.updateThree=function(){this.lbRank.visible=!1,this.imgRank.visible=!0,1==this.data.nRank?this.imgRank.source="v1_img_first_png":2==this.data.nRank?this.imgRank.source="v1_img_scend_png":3==this.data.nRank?this.imgRank.source="v1_img_third_png":(this.lbRank.visible=!0,this.imgRank.visible=!1)},t.prototype.oCI=function(){if(null!=this.data){var t=App.CM.gtM(O6.C19);t.curId=this.data.nId;var e={type:t.nType,target:this.data.nId};App.CM.apF(O6.C19,O18.A1,e),TG40.playClickEffect()}},t}(eui.ItemRenderer);__reflect(ItemRankView.prototype,"ItemRankView");var RankData=function(){function t(t){this.consumption=0,this.climbIntegral=0,this.serverName=0,this.hc=0,this.initData(t)}return t.prototype.initData=function(t){t&&(this.nId=t.i,this.nRank=t.r,this.sName=t.n,this.nLv=t.wlv||t.hlv||t.plv||t.slv||t.holv||t.palv||t.pgnlv||t.pfmlv||t.alv||t.aplv||t.asplv||t.aslv||t.flv||t.wplv||t.l,this.nPower=t.wso||t.hso||t.pso||t.sso||t.hoso||t.paso||t.pgnso||t.pfmso||t.ao||t.apo||t.aspo||t.aso||t.fso||t.wpso||t.z,this.on=t.on,t.u&&(this.obj=t.u),this.inte=t.inte,this.s=t.s,this.st=t.st,this.smid=t.smid,this.spo=t.spo,this.consumption=null==t.am?this.consumption:t.am,this.climbIntegral=t.p,this.serverName=t.sn,this.u=t.u,this.rlv=t.rlv,this.rm=t.rm,this.su=null==t.su?this.su:t.su,this.dmg=null==t.dmg?this.dmg:t.dmg,this.rws=null==t.rws?this.rws:t.rws,this.rwLv=null==t.rwLv?this.rwLv:t.rwLv,this.val=null==t.val?this.val:t.val,this.hc=null==t.hc?this.hc:t.hc,this.fbc=null==t.fbc?this.fbc:t.fbc,this.cg=null==t.cg?this.cg:t.cg,this.tcg=null==t.tcg?this.tcg:t.tcg,this.ff=null==t.ff?this.ff:t.ff,this.z=null==t.z?this.z:t.z,this.flr=null==t.flr?this.flr:t.flr)},t}();__reflect(RankData.prototype,"RankData");var THH13=function(){function t(){}return t.FL93=function(t){t=Math.floor(t/1e3);return P7.FM14()?10*t%10==0?t+".0K":t+"K":10*(t/=10)%10==0?t+".0万":t+"万"},t}();__reflect(THH13.prototype,"THH13"),function(i){var t=function(){function p(){}return p.FK35=function(t){var e=t.reddress_init,i=t.reddress_part,s=t.reddress_lvup,o=t.reddress_equip,r=t.reddress_advance,n=t.reddress_lvmaster,a=t.reddress_advmaster,h=t.reddress_star;p.openLv=parseInt(e.openLv.value),p.openDays=parseInt(e.openDay.value),p.lvItem=parseInt(e.lvItem.value),p.lvUp=s,p.starItem=parseInt(e.starItem.value),p.splitItem=parseInt(e.splitItem.value),p.starExp=parseInt(e.starExp.value),p.lvmaster=n,p.advmaster=a,p.equip=o,p.star=h,p.part=i,p.initAdvance(r)},p.initAdvance=function(t){var e={};for(var i in t){var s=t[i];e[s.part]||(e[s.part]={}),e[s.part][s.level]=s}p.advance=e},p.FA28=function(t,e){return e==i.AttrType.LEVEL?p.lvmaster[t]:e==i.AttrType.EXTRACT?p.advmaster[t]:void 0},p.FD29=function(t){for(var e in this.equip){var i=this.equip[e];if(i.pos==t)return i.id}},p.FHH64=function(t,e){var i=[];if(t<=Reincarnate.Utils.mapkeyMax(p.lvUp))for(var s=p.lvUp,o=1;o<=t;o++){var r=s[o];i=P7.mergekvs(i,P7.str2kv(r.attr)),r.breakattr&&(o<t||0==e)&&(i=P7.mergekvs(i,P7.str2kv(r.breakattr)))}return i},p.FF37=function(t,e,i){var s=[];if(t){var o=N12.gID(t);s=P7.str2kv(o.attr),i=o.pos}for(var r=1;r<=e;r+=1)s=P7.mergekvs(s,P7.str2kv(p.advance[i][r].attr));return s},p.FI87=function(t,e){for(var i=[],s=p.star,o=1;o<=t+1;o++){var r=s[o];if(r){for(var n=0;n<(t<o?e:r.exp)/p.starExp;n++)i=P7.mergekvs(i,P7.str2kv(r.attr1));o<=t&&(i=P7.mergekvs(i,P7.str2kv(r.attr2)))}}return i},p.FL10=function(t){for(var e=0,i=1;i<=t;i++)e+=p.star[i].exp;return e},p.FG33=function(t){return 10<t?"v1_img_star_red_png":5<t?"v1_img_star1_blue_png":0<t?"v1_img_star1_png":"v1_img_star2_png"},p.isOpen=function(){var t=App.CM.gtM(O6.B43);return O4.getLv()>=p.openLv&&t.serOpenDay+1>=p.openDays},p.FI37=function(t){for(var e in p.equip){var i=p.equip[e];if(i.pos==t)return i.icon}return""},p.openLv=255,p.maxStar=10,p.maxLv=0,p}();i.Config=t,__reflect(t.prototype,"RedMakeup.Config")}(RedMakeup||(RedMakeup={})),function(t){var e=function(){function t(){}return t.OPEN_MAIN_VIEW=2001,t.LOAD=1001,t.LOAD_RES=1002,t.UPGRADE=1003,t.UPGRADE_RES=1004,t.EXTRACT=1005,t.EXTRACT_RES=1006,t.UPSTAR=1008,t.UPSTAR_RES=1007,t.ADORN=1009,t.ADORN_RES=1010,t.BAGINFO=1011,t.BAGINFO_RES=1012,t.DECOMPOSE=1013,t.DECOMPOSE_RES=1014,t}();t.Const=e,__reflect(e.prototype,"RedMakeup.Const")}(RedMakeup||(RedMakeup={})),function(a){var t=function(e){function t(){var t=e.call(this)||this;return App.VM.register(O7.D91,"RedMakeupMainView",t,K17.UI_Main_TOP),App.VM.register(O7.C83,"RedMakeupMasterView",t,K17.UI_Main_TOP),App.VM.register(O7.A28,"RedMakeupMasterView",t,K17.UI_Main_TOP),App.VM.register(O7.F38,"RedMakeupBagView",t,K17.UI_Main_TOP),App.VM.register(O7.B11,"RedMakeupEquipDetails",t,K17.UI_Popup),t.rgF(a.Const.OPEN_MAIN_VIEW,t.GR50,t),new a.Model(t),t.model.aLV(O7.I39),t.model.aLV(O7.D91),t.model.aLV(O7.C83),t.model.aLV(O7.A28),t.model.aLV(O7.C84),t.model.aLV(O7.C85),t.model.aLV(O7.F38),t.model.aLV(O7.HH80),t.model.aLV(O7.F38),t.model.aLV(O7.I79),t.proxy=new a.Proxy(t),t.rgF(a.Const.LOAD,t.proxy.load,t.proxy),t.rgF(a.Const.LOAD_RES,t.loadRes,t),t.rgF(a.Const.UPGRADE,t.proxy.upgrade,t.proxy),t.rgF(a.Const.UPGRADE_RES,t.GX86,t),t.rgF(a.Const.UPSTAR,t.proxy.upstar,t.proxy),t.rgF(a.Const.UPSTAR_RES,t.GY68,t),t.rgF(a.Const.EXTRACT,t.proxy.extract,t.proxy),t.rgF(a.Const.EXTRACT_RES,t.GX87,t),t.rgF(a.Const.ADORN,t.proxy.equip,t.proxy),t.rgF(a.Const.ADORN_RES,t.equipRes,t),t.rgF(a.Const.DECOMPOSE,t.proxy.decompose,t.proxy),t.rgF(a.Const.DECOMPOSE_RES,t.GV22,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.gtM()},enumerable:!0,configurable:!0}),t.prototype.GR50=function(){a.Config.isOpen()?App.VM.open(O7.D91):P18.sDP(O3.tr(6811,a.Config.openLv,a.Config.openDays))},t.prototype.loadRes=function(t){200==t.head.state?this.model.ZD48(t.body,!0):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX86=function(t){if(200==t.head.state){var e=this.model,i=e.data.lv,s=App.VM.gOV(O7.HH80);s&&s.playAnima(),e.ZD48(t.body,!0),e.data.lv>i&&App.VM.open(O7.C83,a.AttrType.LEVEL)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY68=function(t){var e,i,s=App.VM.gOV(O7.C85);if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void(s&&s.stop());if(s){var o=s.index,r=t.body.rdm[o],n=this.model.data.rdm[o];r&&r.s>n.s&&(e=r.s),i=a.Config.FL10(r.s)+r.sexp-(a.Config.FL10(n.s)+n.sexp)}this.model.ZD48(t.body,!0),s&&(0<=e&&(s.stop(),s.playAnima(e)),0<i&&s.updateExp(i,i>a.Config.starExp))},t.prototype.GX87=function(t){var e=this.model,i=e.data.adv;if(e.ZD48(t.body,!0),200==t.head.state){var s=App.VM.gOV(O7.C84);s&&s.playAnima(),e.data.adv>i&&App.VM.open(O7.C83,a.AttrType.EXTRACT)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.equipRes=function(t){200==t.head.state?this.model.ZD48(t.body,!0):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV22=function(t){200==t.head.state?(this.model.ZD48(t.body,!0),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);a.Controller=t,__reflect(t.prototype,"RedMakeup.Controller")}(RedMakeup||(RedMakeup={})),function(a){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.redNum=0,e.useGoldUp=!1,e.useGoldUpstar=!1,e.decomposeItem=[],e.equipIndex=1,e}return __extends(t,i),t.prototype.ZD48=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];t&&(null!=this.data?this.data.update(t):this.data=new a.RedMakeupVo(t),e&&this.notify.apply(this,i))},t.prototype.updateRed=function(){this.redNum=0,a.Config.isOpen()&&(this.redNum+=this.canEquip()?1:0,this.redNum+=this.canUpgrade()?1:0,this.redNum+=this.canExtract()?1:0,this.redNum+=this.canUpstar()?1:0)},t.prototype.FL35=function(){return this.updateRed(),this.redNum},t.prototype.canEquip=function(){if(this.data)for(var t in this.data.rdm)if(this.ZP53(parseInt(t)))return!0;return!1},t.prototype.ZP53=function(t){if(!this.data.rdm[t].eid)for(var e=0,i=this.data.bag;e<i.length;e++){var s=i[e];if(N12.gID(s.tid).pos==t)return!0}return!1},t.prototype.canUpgrade=function(){if(this.data)for(var t in this.data.rdm)if(this.ZJ31(parseInt(t)))return!0;return!1},t.prototype.ZJ31=function(t){var e=this.data.rdm[t],i=e.lv,s=e.slv,o=e.eid,r=a.Config.lvUp[s?i:i+1];if(r&&o){var n=s?P7.str2kv(r.breakcost):[{k:a.Config.lvItem,v:r.cost}];return N12.FL6(n)}return!1},t.prototype.canUpstar=function(){if(this.data)for(var t in this.data.rdm)if(this.ZM16(parseInt(t)))return!0;return!1},t.prototype.ZM16=function(t){var e=this.data.rdm[t],i=e.s,s=e.eid,o=a.Config.star[i+1];return!(!o||!s)&&N12.FL6([{k:a.Config.starItem,v:o.costitem}])},t.prototype.canExtract=function(){if(this.data)for(var t in this.data.rdm)if(this.ZJ32(parseInt(t)))return!0;return!1},t.prototype.ZJ32=function(t){var e=this.data.rdm[t],i=e.ad,s=e.eid,o=a.Config.advance[t][i+1];return!(!o||!s)&&this.ZX99(a.Config.FD29(t))>=o.num},t.prototype.ZX99=function(t){for(var e=0,i=0,s=this.data.bag;i<s.length;i++){s[i].tid==t&&(e+=1)}return e},t.prototype.ZP54=function(t,e){var i=this.decomposeItem.indexOf(t);e?i<=-1&&(this.decomposeItem.push(t),this.notify()):0<=i&&(this.decomposeItem.splice(i,1),this.notify())},t.prototype.getStarPower=function(){var t=0;for(var e in this.data.rdm){var i=this.data.rdm[e];i.eid&&0<=i.s&&(t+=M10.FHH18(a.Config.FI87(i.s,i.sexp)))}return t},t.prototype.ZY1=function(){var t=0;for(var e in this.data.rdm){var i=this.data.rdm[e];i.eid&&0<=i.lv&&(t+=M10.FHH18(a.Config.FHH64(i.lv,i.slv)))}return t},t.prototype.ZP55=function(){var t=0;for(var e in this.data.rdm){var i=this.data.rdm[e];i.eid&&0<=i.ad&&(t+=M10.FHH18(a.Config.FF37(i.eid,i.ad)))}return t},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);a.Model=t,__reflect(t.prototype,"RedMakeup.Model")}(RedMakeup||(RedMakeup={})),function(s){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.N3,e.loadRes,e),e.rSM(P4.Q94,e.GY68,e),e.rSM(P4.Q92,e.GX87,e),e.rSM(P4.P28,e.GX86,e),e}return __extends(t,i),t.prototype.load=function(){this.sSM({type:P4.N2,body:{}})},t.prototype.loadRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.LOAD_RES].concat(t))},t.prototype.upgrade=function(t,e,i){this.sSM({type:P4.P27,body:{pos:t,s:e,buy:i}})},t.prototype.GX86=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.UPGRADE_RES].concat(t))},t.prototype.upstar=function(t,e){this.sSM({type:P4.Q93,body:{pos:t,buy:e}})},t.prototype.GY68=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.UPSTAR_RES].concat(t))},t.prototype.extract=function(t){this.sSM({type:P4.Q91,body:{pos:t}})},t.prototype.GX87=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.EXTRACT_RES].concat(t))},t.prototype.decompose=function(t){this.sSM({type:P4.S59,body:{item:t}}),this.rSMO(P4.S60,this.GV22,this)},t.prototype.GV22=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.DECOMPOSE_RES].concat(t))},t.prototype.equip=function(){this.sSM({type:P4.U11,body:{}}),this.rSMO(P4.U12,this.equipRes,this)},t.prototype.equipRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.ADORN_RES].concat(t))},t}(TG80);s.Proxy=t,__reflect(t.prototype,"RedMakeup.Proxy")}(RedMakeup||(RedMakeup={})),function(A){var b=function(){function t(){}return t.LEVEL=1,t.EXTRACT=2,t}();A.AttrType=b,__reflect(b.prototype,"RedMakeup.AttrType");var t=function(){function t(){}return t.FC37=function(t){var e,i,s,o,r=App.CM.gtM(O6.B34),n=r.data.lv,a=r.data.adv,h={},p=0;if(t==b.LEVEL?(s=A.Config.FA28(n,t),o=n+1):t==b.EXTRACT&&(s=A.Config.FA28(a,t),o=a+1),s){e={};var l=THH1.FI55(s.attraward);for(var c in l){var u=O4.FD72(parseInt(c)),d=void 0;if((g=K18.attribute[c])&&0==g.show)d=(0===(m=parseFloat(l[c]))?0:(100*m).toFixed(1))+"%";else d=parseInt(l[c]);e[c]={value:d,name:u}}p=s.lv,e.extra=s.describe}var v=A.Config.FA28(o,t);if(v){i={};var f=THH1.FI55(v.attraward);for(var c in f){var g,m,y=O4.FD72(parseInt(c));d=void 0;if((g=K18.attribute[c])&&0==g.show)d=(0===(m=parseFloat(f[c]))?0:(100*m).toFixed(1))+"%";else d=parseInt(f[c]);i[c]={value:d,name:y}}i.extra=v.describe,h={curData:e,nextData:i,needCurLv:p,needNextLv:v.lv}}else h={curData:e,needCurLv:s.lv};return h},t.FD16=function(t,e){var i=1,s=0,o=A.Config.FA28(t,e);o&&(s=M10.gAG(o.attraward),i=o.index+1);var r=A.Config.FA28(i,e),n=0;return r&&(n=M10.gAG(r.attraward)),Math.max(n-s,0)},t}();A.Utils=t,__reflect(t.prototype,"RedMakeup.Utils")}(RedMakeup||(RedMakeup={}));var RedMakeupBagView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="RedMakeupDecomposeSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B34)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.labTr7119.textFlow=O3.tr2(7119),this.labTr7121.textFlow=O3.tr2(7121),this.btnDecompose.label=O3.tr(7122),this.btnSelectAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAll,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnDecompose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL90,this),this.dgItems.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgItems.itemRenderer=RedMakeupDecomposeItem;var t=this.model;t.decomposeItem=[],this.uBM(t)},t.prototype.close=function(){this.btnSelectAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAll,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnDecompose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL90,this),s.prototype.close.call(this)},t.prototype.uBM=function(t){t instanceof RedMakeup.Model&&(this.GX5(t),this.updateItems(t))},t.prototype.updateItems=function(t,e){void 0===e&&(e=!1);var i=[],s=!0;P7.FM14()&&(s=!1);for(var o=0,r=t.data.bag;o<r.length;o++){var n=r[o],a=N12.gID(n.tid);i.push({itemData:{data:a,ct:0},isBottom:s,pack:!1,w:-t.data.rdm[a.pos].eid+n.tid,toResolve:0<t.data.rdm[a.pos].eid,uid:n.uid,selectState:0<=t.decomposeItem.indexOf(n.uid)})}this.dataSource.replaceAll(i.sort(function(t,e){return t.w-e.w}))},t.prototype.GX5=function(t){this.btnSelectAll.label=t.decomposeItem.length==this.items.length&&0<t.decomposeItem.length?O3.tr(7291):O3.tr(7290);for(var e=[],i=0,s=t.data.bag;i<s.length;i++){var o=s[i];0<=t.decomposeItem.indexOf(o.uid)&&e.push(o.tid)}for(var r=0,n=0,a=e;n<a.length;n++){o=a[n];r+=N12.gID(o).decompose}P16.FL31(this.gCons,RedMakeup.Config.splitItem,r,{textTemplate:"<font color=#feeedf>$1</font>",lackTextTemplate:"<font color=#feeedf>$1</font>"})},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.ZL90=function(){var t=this.model.decomposeItem.join(",");t?(App.CM.apF(O6.B34,RedMakeup.Const.DECOMPOSE,t),this.oCC()):P18.sDP(O3.tr(7292))},t.prototype.selectAll=function(){var t=this.model;t.decomposeItem.length==this.items.length?t.decomposeItem=[]:t.decomposeItem=this.items,this.GX5(t),this.updateItems(t)},Object.defineProperty(t.prototype,"items",{get:function(){for(var t=this.model,e=[],i=0,s=t.data.bag;i<s.length;i++){var o=s[i];t.data.rdm[N12.gID(o.tid).pos].eid&&e.push(o.uid)}return e},enumerable:!0,configurable:!0}),t}(BaseEuiView);__reflect(RedMakeupBagView.prototype,"RedMakeupBagView");var RedMakeupDecomposeItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(){this.cbOn.visible=!0,this.cbOn.bottom=50,this.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.cbOn.addEventListener(egret.Event.CHANGE,this.ZU35,this)},e.prototype.close=function(){this.imgIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this),this.cbOn.removeEventListener(egret.Event.CHANGE,this.ZU35,this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.cbOn.visible=this.data.toResolve,this.data.toResolve?this.cbOn.selected=this.data.selectState:this.cbOn.selected=!1},e.prototype.ZU35=function(){this.data.toResolve&&(this.data.selectState=this.cbOn.selected,App.CM.gtM(O6.B34).ZP54(this.data.uid,this.cbOn.selected))},e}(ItemIcon);__reflect(RedMakeupDecomposeItem.prototype,"RedMakeupDecomposeItem");var RedMakeupEquipDetails=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="RedMakeupEquipDetailSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.labTr7305.text=O3.tr(7296),this.labTr7306.text=O3.tr(7306),this.labTr7307.text=O3.tr(7307),this.lbLevel.text="",this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this);for(var t=this.gpStar.numChildren;t<5;t++){var e=new eui.Image("v1_img_star2_png");this.gpStar.addChild(e)}},t.prototype.close=function(){this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShow,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),delete this.slot,s.prototype.close.call(this)},t.prototype.open=function(t){if("number"==typeof t){this.btnShow.visible=!0;var e=App.CM.gtM(O6.B34);this.slot=e.data.rdm[t]}else this.btnShow.visible=!1,this.slot=t;this.GX5()},t.prototype.GX5=function(){var t=this.slot;this.gpAttr1.visible=this.gpAttr1.includeInLayout=this.gpAttr2.visible=this.gpAttr2.includeInLayout=!1;var e=0;if(t.eid){var i=t.s?RedMakeup.Config.star[t.s].attrpercent:0,s=N12.gID(t.eid);this.lbPos.textFlow=M18.FG71(O3.tr(3628,RedMakeup.Config.part[s.pos].part));var o=RedMakeup.Config.FF37(t.eid,t.ad);if(e+=M10.FHH18(o),0<i){for(var r=0;r<o.length;r++)o[r].a=Math.ceil(o[r].v*i);e+=M10.FHH18(o.map(function(t){return{k:t.k,v:t.a}})),this.addAttrLb2(o,this.gpBase0,7333,["k","v","a"])}else this.addAttrLb(o,this.gpBase0);if(this.imgHead.source=s.icon,O5.FB13(this.lbName,s.name,s.quality),t.lv){this.gpAttr1.visible=this.gpAttr1.includeInLayout=!0;var n=RedMakeup.Config.FHH64(t.lv,t.slv);e+=M10.FHH18(n),this.addAttrLb(n,this.gpBase1)}if(t.s){this.gpAttr2.visible=this.gpAttr2.includeInLayout=!0;var a=RedMakeup.Config.FG33(t.s-5),h=RedMakeup.Config.FG33(t.s),p=5*Math.ceil(t.s/5)-5;for(r=0;r<5;r+=1){this.gpStar.getChildAt(r).source=p+r<t.s?h:a}var l=RedMakeup.Config.FI87(t.s,t.sexp);e+=M10.FHH18(l),this.addAttrLb(l,this.gpBase2);var c=new eui.Label;c.size=20,c.textFlow=M18.FG71("<font color=#$0>$1</font>",_cc.brown.toString(16),O3.tr(7123,Math.floor(100*i))),this.gpBase2.addChild(c)}}this.lbGrade.text=O3.tr(1126,e),this.lbPower.text=e.toString()},t.prototype.addAttrLb=function(t,e){for(var i=0,s=t;i<s.length;i++){var o=s[i],r=new eui.Label;r.size=20,r.textFlow=M18.FG71(O3.tr(3627,O4.FD72(o.k),o.v)),e.addChild(r)}},t.prototype.addAttrLb2=function(t,s,o,r){void 0===o&&(o=3627);for(var e=function(e){var t=new eui.Label;t.size=20;var i=r.map(function(t){return"k"==t?O4.FD72(e[t]):e[t]});t.textFlow=M18.FG71(O3.tr.apply(O3,[o].concat(i))),s.addChild(t)},i=0,n=t;i<n.length;i++){e(n[i])}},t.prototype.onClickShow=function(){var t=P7.FF60(),e=N18.FC83(t);if(O4.getLv()<e.needlevel)P18.sDP(M18.format(K18.init.commonDesc1.value,[e.needlevel]));else{var i=App.CM.gtM(O6.C13).ZR28(F8.A6);if(0<i)P18.sDP(O3.tr(3637,i));else{var s=N12.gID(this.slot.eid),o=s.name,r=N18.FF97(s.quality),n=M18.format("$0,$1",[o,r.colour]),a={nid:F8.A6,channelId:t,param:n,infoId:s.pos};App.CM.apF(O6.C13,O12.A13,a)}}},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(RedMakeupEquipDetails.prototype,"RedMakeupEquipDetails");var RedMakeupEquipItem=function(e){function t(){var t=e.call(this)||this;return t.iconBg="",t.icon="",t.select=!1,t.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.oCI,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.setIcon(),this.setScale(),this.setEffect(),this.setLevel(),this.ZT41(),this.setStar(),this.imgNew.visible=this.data.dot)},t.prototype.setSelect=function(t){this.select=t,this.selected,this.imgChoose.visible=this.select},t.prototype.ZT41=function(){this.gRefine.visible=0<this.data.refineLv,this.labRefine.text=M18.FF66(this.data.refineLv)},t.prototype.setLevel=function(){this.gLevel.visible=0<this.data.lv,this.labLevel.text=this.data.lv+""},t.prototype.setStar=function(){this.gS.visible=0<this.data.star;for(var t=RedMakeup.Config.FG33(this.data.star-5),e=RedMakeup.Config.FG33(this.data.star),i=5*Math.ceil(this.data.star/5)-5,s=0;s<5;s+=1){var o=this.gStars.getChildAt(s);o.includeInLayout=o.visible=!(this.data.star<5)||s<this.data.star,o.source=i+s<this.data.star?e:t}},t.prototype.setIcon=function(){this.iconBg=N12.getBox(this.itemData.data.quality),this.icon=this.itemData.data.icon,P16.sGF(this.imgHead,!this.itemData.data.id)},t}(ItemIconBase);__reflect(RedMakeupEquipItem.prototype,"RedMakeupEquipItem");var RedMakeupMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.set(O7.D91,O3.tr(7106)).rgS(O7.HH80,"RedMakeupUpgrade",O3.tr(7107),RedMakeup.Config.openLv).rgS(O7.C84,"RedMakeupRefine",O3.tr(7108),RedMakeup.Config.openLv).rgS(O7.C85,"RedMakeupUpstar",O3.tr(7109),RedMakeup.Config.openLv),i}return __extends(t,s),t.prototype.updateDot=function(t,e){var i=this.model;return e==O7.HH80?i.canUpgrade():e==O7.C84?i.canExtract():e==O7.C85&&i.canUpstar()},Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B34)},enumerable:!0,configurable:!0}),t}(BasePanelViewX);__reflect(RedMakeupMainView.prototype,"RedMakeupMainView");var RedMakeupMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=SandMasterSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5105)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5106))},t.prototype.open=function(t){s.prototype.open.call(this),this.type=t,this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var e=App.CM.gtM(O6.B34);this.ZO78(e),this.imgHead.source=this.type==RedMakeup.AttrType.LEVEL?"bz_shengji_png":"hz_ninglian_png"},t.prototype.uBM=function(t){s.prototype.uBM.call(this,t),t instanceof RedMakeup.Model&&this.ZO78(t)},t.prototype.ZO78=function(t){var e=this.type==RedMakeup.AttrType.LEVEL?t.data.lv:t.data.adv,i=RedMakeup.Utils.FC37(this.type),s=RedMakeup.Utils.FD16(e,this.type);if(i.curData?(this.lbNow.textFlow=M18.FG71(O3.tr(this.type==RedMakeup.AttrType.LEVEL?7293:7294,"EDD77F",i.needCurLv)),this.addAttrLb(i.curData,this.gpCur,3644,3647)):this.gpAllCur.visible=this.gpAllCur.includeInLayout=!1,i.nextData){var o="DFDFDC";i.curData||(o="d82222"),this.lbNext.textFlow=M18.FG71(O3.tr(this.type==RedMakeup.AttrType.LEVEL?7293:7294,o,i.needNextLv)),this.addAttrLb(i.nextData,this.gpNext,3645,3648),this.lbAddPower.visible=!0,this.lbStatus.text=O3.tr(1110,e)}else this.gpAllNext.visible=this.gpAllNext.includeInLayout=!1,this.lbAddPower.visible=!1,this.lbStatus.text=O3.tr(1106,e);this.lbAddPower.text=O3.tr(1109,s)},t.prototype.addAttrLb=function(t,e,i,s){for(var o in t){var r=t[o],n=new eui.Label;n.size=20,n.textFlow="extra"==o?M18.FG71(O3.tr(s,r)):M18.FG71(O3.tr(i,r.name,r.value)),e.addChild(n)}},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),s.prototype.close.call(this)},t}(BaseEuiView);__reflect(RedMakeupMasterView.prototype,"RedMakeupMasterView");var RedMakeupRefine=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.iconItems={},i.skinName="RedMakeupRefineSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B34)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.labTr7159.textFlow=O3.tr2(7303),this.labTr7168.textFlow=O3.tr2(7168),this.btn.label=O3.tr(7172),this.btnAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),this.btnBag.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBag,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this);for(var t=0;t<this.gLE.numChildren;t++){var e=this.gLE.getChildAt(t);(this.iconItems[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)}for(t=0;t<this.gRE.numChildren;t++){var i=this.gRE.getChildAt(t);(this.iconItems[i.name]=i).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t);var i=this.model;this.updateEquip(i),this.select(i.equipIndex),this.ZT42()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in this.btnAttr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),this.btnBag.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBag,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.iconItems)this.iconItems[i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this);this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){if(t instanceof RedMakeup.Model)this.updateEquip(t),this.GX5(t);else if(t instanceof THH9){var e=this.model;this.updateEquip(e),this.GX5(e)}},t.prototype.GX5=function(t){this.updateAttr(t),this.ZU99(t),this.btn.imgNew.visible=t.ZJ32(this.index),this.labPower.text=t.ZP55().toString()},t.prototype.ZU99=function(t){var e=t.data.rdm[this.index],i=RedMakeup.Config.advance[this.index][e.ad+1];if(this.gConsume.visible=this.labTr7159.visible=!1,i){this.gConsume.visible=!0;var s=i.num,o=RedMakeup.Config.FD29(this.index),r=N12.gID(o),n=t.ZX99(o);this.itemIcon.data={itemData:{data:r,ct:0},isBottom:!1},this.labItemName.textFlow=O3.tr2(7114,r.name,s),this.labItemCount.textFlow=O3.tr2(7299,(n<=0?_cc.red:_cc.green).toString(16),n),this.labRate.textFlow=O3.tr2(7169,Math.floor(100*i.rate+100*e.rate))}else this.labTr7159.visible=!0},t.prototype.updateAttr=function(t){var a=this,e=t.data.rdm[this.index],i=e.eid?e.ad:1,s=RedMakeup.Config.FF37(e.eid,i,this.index);e.eid||s.forEach(function(t){return t.v=0});var o=RedMakeup.Config.advance[this.index][i+1],h=o?P7.str2kv(o.attr):[];s.forEach(function(t,e){var i=a.gAttr.getChildAt(e+1),s=i.getChildAt(0).getChildByName("attr"),o=i.getChildAt(0).getChildByName("up"),r=i.getChildByName("bar"),n=r.imgShort;r.labelDisplay.visible=!1,r.maximum=(h[e]?h[e].v:0)+t.v,r.value=t.v,r.validateNow(),n.width=h[e]&&0<t.v?r.width-r.thumb.scrollRect.width+5:0,t.v<=0||!h[e]?(s.textFlow=M18.FG71(P7.attr2str([t],null,{template:"$0+$1"})),o.visible=!1):(s.textFlow=M18.FG71("$0<font color=#75c01c> $1</font>",P7.attr2str([t],null,{template:"$0+$1"}),h[e].v),o.visible=!0)})},t.prototype.updateEquip=function(t){var e=t.data.rdm;for(var i in e){var s=e[i].eid,o=s?N12.gID(s):{icon:RedMakeup.Config.FI37(parseInt(i)),quality:1};this.iconItems[i].data={itemData:{data:o},refineLv:e[i].ad,lv:e[i].lv,star:e[i].s,dot:t.ZJ32(parseInt(i))}}},t.prototype.select=function(t){this.iconItems[this.index]&&this.iconItems[this.index].setSelect(!1),this.index=t,this.iconItems[this.index]&&this.iconItems[this.index].setSelect(!0);var e=this.model;e.equipIndex=t,this.GX5(e)},t.prototype.oCI=function(t){var e=t.currentTarget;e&&e.name&&(this.index==e.name&&this.model.data.rdm[this.index].eid&&App.VM.open(O7.B11,this.index),this.select(parseInt(e.name)))},t.prototype.ZV83=function(){App.VM.open(O7.C83,RedMakeup.AttrType.EXTRACT)},t.prototype.onClickBag=function(){App.VM.open(O7.F38)},t.prototype.onClickUp=function(){this.model.data.rdm[this.index].eid?App.CM.apF(O6.B34,RedMakeup.Const.EXTRACT,this.index):P18.sDP(O3.tr(7298))},t.prototype.ZT42=function(){var t=App.CM.gtM(O6.C3);if(t.ps.length){var e=M11.getWomen(t.war.length?t.war[0].v:t.ps[0].id).model;this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null);var i={id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj=new FightGameObject,this.womenObj.setData(i,this.wGroup),this.womenObj.action=Action.Stand}},t.prototype.playAnima=function(){App.THH32.rEf(this.gEffect,"wdsg_sjcg_s1_001"),App.THH32.aUE(this.gEffect,"wdsg_sjcg_s1_001",0,0,1,null,null,null,null,"nlcg001")},t}(BaseEuiView);__reflect(RedMakeupRefine.prototype,"RedMakeupRefine");var RedMakeupStarAnimation=function(e){function t(){var t=e.call(this)||this;return t.light=!1,t.lightImg="v1_img_star1_png",t.normalImg="v1_img_star2_png",t.skinName="RedMakeupStarAnimationSkin",t.stop(),t}return __extends(t,e),t.prototype.play=function(){var t=this;return this.stop(),this.a0.source=this.normalImg,this.a1.scaleX=this.a1.scaleY=20,this.a1.alpha=.2,this.a1.visible=!0,egret.Tween.get(this.a1).to({scaleX:1,scaleY:1,alpha:1},270).call(function(){t.updateLight(),t.a2.visible=t.a3.visible=!0,egret.Tween.get(t.a2).to({alpha:.5},130).to({alpha:0},620),t.a3.alpha=.35,t.a3.scaleX=t.a3.scaleY=1.5,egret.Tween.get(t.a3).to({alpha:0,scaleX:2,scaleY:2},.75),App.THH32.aUE(t,"wdsg_jgsxtxa_sa_002",t.width/2,t.height/2,1,null,function(){return t.stop()})}),this},t.prototype.stop=function(){this.updateLight(),this.a1.visible=this.a2.visible=this.a3.visible=!1,this.a1.scaleX=this.a1.scaleY=this.a2.scaleX=this.a2.scaleY=this.a3.scaleX=this.a3.scaleY=1,this.a1.alpha=this.a2.alpha=this.a3.alpha=1,egret.Tween.removeTweens(this.a1),egret.Tween.removeTweens(this.a2),egret.Tween.removeTweens(this.a3),App.THH32.rEf(this,"wdsg_jgsxtxa_sa_002")},t.prototype.setLight=function(t){return this.light=t,this.updateLight(),this},t.prototype.updateLight=function(){this.a0.source=this.light?this.lightImg:this.normalImg},t.prototype.getLight=function(){return this.light},t.prototype.setImage=function(t,e){this.lightImg=t,this.normalImg=e,this.a1.source=this.a2.source=this.a3.source=t,this.updateLight()},t}(eui.Component);__reflect(RedMakeupStarAnimation.prototype,"RedMakeupStarAnimation");var RedMakeupUpgrade=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.iconItems={},i.skinName="RedMakeupSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B34)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.labTr7110.textFlow=O3.tr2(7110),this.labTr7111.textFlow=O3.tr2(7111),this.labTr7159.textFlow=O3.tr2(7159),this.btn.label=O3.tr(7112),this.cbAutoSmelt.label=O3.tr(7113),this.btnEquip.label=O3.tr(7171),this.btnAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),this.btnBag.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBag,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this);for(var t=0;t<this.gLE.numChildren;t++){var e=this.gLE.getChildAt(t);(this.iconItems[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)}for(t=0;t<this.gRE.numChildren;t++){var i=this.gRE.getChildAt(t);(this.iconItems[i.name]=i).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t);var i=this.model;this.updateEquip(i),this.select(i.equipIndex),this.ZT42()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in this.btnAttr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),this.btnBag.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBag,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this),this.iconItems)this.iconItems[i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this);this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){if(t instanceof RedMakeup.Model)this.updateEquip(t),this.GX5(t);else if(t instanceof THH9){var e=this.model;this.updateEquip(e),this.GX5(e)}},t.prototype.GX5=function(t){this.updateAttr(t),this.ZU99(t),this.btnEquip.visible=this.btnEquip.imgNew.visible=t.canEquip(),this.labPower.text=t.ZY1().toString()},t.prototype.ZU99=function(t){this.gConsume.visible=this.labTr7159.visible=!1;var e=t.data.rdm[this.index],i=e.lv,s=e.slv,o=RedMakeup.Config.lvUp[i+1];if(o){this.gConsume.visible=!0,this.btn.imgNew.visible=t.ZJ31(this.index);var r=o.cost,n=RedMakeup.Config.lvItem;if(this.btn.label=O3.tr(s?7170:7112),this.btn.verticalCenter=s?0:26,this.cbAutoSmelt.visible=!s,s){var a=P7.str2kv1(RedMakeup.Config.lvUp[i].breakcost);n=a.k,r=a.v}var h=N12.gID(n),p=N12.giC(n);this.itemIcon.data={itemData:{data:h,ct:0},isBottom:!1},this.labItemName.textFlow=O3.tr2(7114,h.name,r),this.labItemCount.textFlow=O3.tr2(7299,(p<=0?_cc.red:_cc.green).toString(16),p)}else this.labTr7159.visible=!0},t.prototype.updateEquip=function(t){var e=t.data.rdm;for(var i in e){var s=e[i].eid,o=s?N12.gID(s):{icon:RedMakeup.Config.FI37(parseInt(i)),quality:1};this.iconItems[i].data={itemData:{data:o},refineLv:e[i].ad,lv:e[i].lv,star:e[i].s,dot:t.ZJ31(parseInt(i))||t.ZP53(parseInt(i))}}},t.prototype.updateAttr=function(t){var e,i,s=t.data.rdm[this.index],o=s.lv,r=s.slv;if(1==r)e=RedMakeup.Config.FHH64(o,0);else{var n=RedMakeup.Config.lvUp[o+1],a=n&&n.breakattr?1:0;e=RedMakeup.Config.FHH64(o+1,a)}i=0==o?e.map(function(t){return{k:t.k,v:0}}):RedMakeup.Config.FHH64(o,r),this.labAttr.text=Jade.Utils.attr2Str(i),this.labNAttr.text=e.length?P7.attr2str(e,"\n",{template:"$1"}):O3.tr(7158),this.updateUpicon(e.length)},t.prototype.updateUpicon=function(t){for(t<1&&(t=1),this.gUp.visible=0<t;this.gUp.numChildren>t;)this.gUp.removeChildAt(this.gUp.numChildren-1);for(var e=this.gUp.getChildAt(0),i=this.gUp.numChildren;i<t;i++){var s=new eui.Image(e.source);s.rotation=e.rotation,this.gUp.addChild(s)}},t.prototype.select=function(t){this.iconItems[this.index]&&this.iconItems[this.index].setSelect(!1),this.index=t,this.iconItems[this.index]&&this.iconItems[this.index].setSelect(!0);var e=this.model;e.equipIndex=t,this.GX5(e)},t.prototype.ZV83=function(){App.VM.open(O7.C83,RedMakeup.AttrType.LEVEL)},t.prototype.onClickBag=function(){App.VM.open(O7.F38)},t.prototype.oCI=function(t){var e=t.currentTarget;e&&e.name&&(this.index==e.name&&this.model.data.rdm[this.index].eid&&App.VM.open(O7.B11,this.index),this.select(parseInt(e.name)))},t.prototype.onClickEquip=function(){App.CM.apF(O6.B34,RedMakeup.Const.ADORN)},t.prototype.onClickUp=function(){var t=this,e=this.model.data.rdm[this.index];if(e.eid){this.btn.touchEnabled=!1,egret.Tween.get(this.btn).wait(200).call(function(){egret.Tween.removeTweens(t.btn),t.btn.touchEnabled=!0});var i=e.slv;e.lv;i?App.CM.apF(O6.B34,RedMakeup.Const.UPGRADE,this.index,i,1):this.upgrade()}else P18.sDP(O3.tr(7298))},t.prototype.upgrade=function(){var t=this.model.data.rdm[this.index],e=t.slv,i=t.lv,s=RedMakeup.Config.lvUp[i+1],o=[{k:RedMakeup.Config.lvItem,v:s.cost}],r=this.model;if(N12.FL6(o))App.CM.apF(O6.B34,RedMakeup.Const.UPGRADE,this.index,e,1);else{var n=App.CM.gtM(O6.B82),a=o[0].k,h=o[0].v,p=N12.giC(a),l=void 0,c=h;if(this.cbAutoSmelt.selected){var u=r.useGoldUp,d=N15.FA50(a),v=N15.FB92(a),f=n.avatarInfo,g=f.g,m=f.bg;if(0<d){if(h*d<=m)l=2;else if(v<0)return void P18.sDP(O3.tr(5354))}else u=r.useGoldUp=!0;if(0<v){if(!(v*h<g))return void P7.FA78();if(!u)return void this.ZX12();l=3}l?App.CM.apF(O6.B34,RedMakeup.Const.UPGRADE,this.index,e,l):P18.sDP(O3.tr(1483))}else App.VM.open(O7.G87,a,c-p)}},t.prototype.ZX12=function(){var t=this,e=App.CM.gtM(O6.B34);if(e.useGoldUp)this.upgrade();else{App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){e.useGoldUp=!0,t.upgrade()})}},t.prototype.ZT42=function(){var t=App.CM.gtM(O6.C3);if(t.ps.length){var e=M11.getWomen(t.war.length?t.war[0].v:t.ps[0].id).model;this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null);var i={id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj=new FightGameObject,this.womenObj.setData(i,this.wGroup),this.womenObj.action=Action.Stand}},t.prototype.playAnima=function(){App.THH32.rEf(this.gEffect,"wdsg_sjcg_s1_001"),App.THH32.aUE(this.gEffect,"wdsg_sjcg_s1_001",0,0,1,null,null,null,null,"sjcg002")},t}(BaseEuiView);__reflect(RedMakeupUpgrade.prototype,"RedMakeupUpgrade");var RedMakeup,RedMakeupUpstar=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.iconItems={},i.stars=[],i.skinName="RedMakeupStarSkin",i}return __extends(t,o),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B34)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.labTr7116.textFlow=O3.tr2(7116),this.labTr7117.textFlow=O3.tr2(7117),this.labTr7118.textFlow=O3.tr2(7118,2,5),this.labTr7159.textFlow=O3.tr2(7302),this.cbAutoSmelt.label=O3.tr(7113),this.pBarPro.labelDisplay.textColor=_cc.brown,this.pBarPro.labelFunction=function(t,e){return 1==e?O3.tr(7304):t+"/"+e},this.btnBag.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBag,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this);for(var t=0;t<this.gLE.numChildren;t++){var e=this.gLE.getChildAt(t);(this.iconItems[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)}for(t=0;t<this.gRE.numChildren;t++){var i=this.gRE.getChildAt(t);(this.iconItems[i.name]=i).addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)}for(t=0;t<5;t+=1){var s=new RedMakeupStarAnimation;this.stars.push(s),this.gStar.addChild(s)}App.THH32.aUE(this.pBarPro.gStar,"wdsg_jgsxtxa_sa_001",0,0,0)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.apply(this,t);var i=this.model;this.updateEquip(i),this.select(i.equipIndex),this.ZT42()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in App.THH32.rEf(this.pBarPro.gStar,"wdsg_jgsxtxa_sa_001"),this.iconItems)this.iconItems[i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this);this.btnBag.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBag,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.stop(),o.prototype.close.apply(this,t)},t.prototype.select=function(t){t!=this.index&&this.stop(),this.stars.forEach(function(t){return t.stop()}),this.iconItems[this.index]&&this.iconItems[this.index].setSelect(!1),this.index=t,this.iconItems[this.index]&&this.iconItems[this.index].setSelect(!0);var e=this.model;e.equipIndex=t;var i=this.pBarPro.slideDuration;this.pBarPro.slideDuration=0,this.GX5(e),this.pBarPro.slideDuration=i},t.prototype.uBM=function(t){if(t instanceof RedMakeup.Model)this.updateEquip(t),this.GX5(t);else if(t instanceof THH9){var e=this.model;this.updateEquip(e),this.GX5(e)}},t.prototype.GX5=function(t){this.ZU99(t),this.updateAtttr(t),this.updateStar(t),this.btn.imgNew.visible=t.ZM16(this.index),this.btn.label=this.timer?O3.tr(7167):O3.tr(7166),this.labPower.text=t.getStarPower().toString()},t.prototype.ZU99=function(t){this.gConsume.visible=this.labTr7159.visible=!1;var e=t.data.rdm[this.index].s,i=RedMakeup.Config.star[e+1];if(i){this.gConsume.visible=!0;var s=i.costitem,o=RedMakeup.Config.starItem,r=N12.gID(o),n=N12.giC(o);this.itemIcon.data={itemData:{data:r,ct:0},isBottom:!1},this.labItemName.textFlow=O3.tr2(7114,r.name,s),this.labItemCount.textFlow=O3.tr2(7299,(n<=0?_cc.red:_cc.green).toString(16),n)}else this.labTr7159.visible=!0},t.prototype.updateStar=function(t){for(var e=t.data.rdm[this.index].s,i=RedMakeup.Config.FG33(e-5),s=RedMakeup.Config.FG33(e),o=5*Math.ceil(e/5)-5,r=0;r<5;r+=1){var n=this.stars[r];n.setImage(s,i),n.setLight(o+r<e)}},t.prototype.updateEquip=function(t){var e=t.data.rdm;for(var i in e){var s=e[i].eid,o=s?N12.gID(s):{icon:RedMakeup.Config.FI37(parseInt(i)),quality:1};this.iconItems[i].data={itemData:{data:o},refineLv:e[i].ad,lv:e[i].lv,star:e[i].s,dot:t.ZM16(parseInt(i))}}},t.prototype.updateAtttr=function(t){var e,i=t.data.rdm[this.index],s=i.s,o=i.sexp,r=s+1,n=RedMakeup.Config.FI87(r,0),a=RedMakeup.Config.star[r];e=0==s&&o<=0?n.map(function(t){return{k:t.k,v:0}}):RedMakeup.Config.FI87(s,o);var h=0<s?RedMakeup.Config.star[s].attrpercent:0,p=a?a.attrpercent:0;this.labAttr.textFlow=M18.FG71(Jade.Utils.attr2Str(e)+"\n<font color=#"+_cc.brown.toString(16)+">"+O3.tr(7123,Math.floor(100*h))+"</font>"),this.labNAttr.textFlow=M18.FG71(a?P7.attr2str(n,"\n",{template:"$1"})+"\n<font color=#"+_cc.brown.toString(16)+">"+Math.floor(100*p)+"%</font>":O3.tr(7304)),this.updateUpicon(a?n.length+1:1);var l=this.pBarPro.gStar;l&&(l.visible=!!a),this.pBarPro.value=a?(this.pBarPro.maximum=a.exp,i.sexp):this.pBarPro.maximum=1},t.prototype.updateUpicon=function(t){for(this.gUp.visible=0<t,t<1&&(t=1);this.gUp.numChildren>t;)this.gUp.removeChildAt(this.gUp.numChildren-1);for(var e=this.gUp.getChildAt(0),i=this.gUp.numChildren;i<t;i++){var s=new eui.Image(e.source);s.rotation=e.rotation,this.gUp.addChild(s)}},t.prototype.upgrade=function(){var t=this.model,e=t.data.rdm[this.index].s,i=RedMakeup.Config.star[e+1];if(i){var s=[{k:RedMakeup.Config.starItem,v:i.costitem}];if(N12.FL6(s))App.CM.apF(O6.B34,RedMakeup.Const.UPSTAR,this.index,1);else{var o=App.CM.gtM(O6.B82),r=s[0].k,n=s[0].v,a=N12.giC(r),h=void 0,p=n;if(this.cbAutoSmelt.selected){var l=t.useGoldUpstar,c=N15.FA50(r),u=N15.FB92(r),d=o.avatarInfo,v=d.g,f=d.bg;if(0<c){if(n*c<=f)h=2;else if(u<0)return P18.sDP(O3.tr(5354)),void this.stop()}else l=t.useGoldUpstar=!0;if(0<u){if(!(u*n<v))return P7.FA78(),void this.stop();if(!l)return this.ZX12(),void this.stop();h=3}h?App.CM.apF(O6.B34,RedMakeup.Const.UPSTAR,this.index,h):(P18.sDP(O3.tr(1483)),this.stop())}else App.VM.open(O7.G87,r,p-a),this.stop()}}else this.stop()},t.prototype.ZX12=function(){var t=this,e=App.CM.gtM(O6.B34);if(e.useGoldUpstar)this.upgrade();else{App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){e.useGoldUpstar=!0,t.upgrade()})}},t.prototype.onClickBag=function(){App.VM.open(O7.F38)},t.prototype.onClickUp=function(){this.model.data.rdm[this.index].eid?(this.timer?this.stop():(this.timer=App.K16.doTimer(300,0,this.upgrade,this),this.upgrade()),this.btn.label=this.timer?O3.tr(7167):O3.tr(7166)):P18.sDP(O3.tr(7298))},t.prototype.oCI=function(t){var e=t.currentTarget;e&&e.name&&(this.index==e.name&&this.model.data.rdm[this.index].eid&&App.VM.open(O7.B11,this.index),this.select(parseInt(e.name)))},t.prototype.ZT42=function(){var t=App.CM.gtM(O6.C3);if(t.ps.length){var e=M11.getWomen(t.war.length?t.war[0].v:t.ps[0].id).model;this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null);var i={id:e,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj=new FightGameObject,this.womenObj.setData(i,this.wGroup),this.womenObj.action=Action.Stand}},t.prototype.stop=function(){this.timer&&App.K16.rBH(this.timer),this.btn.label=O3.tr(7166),delete this.timer},t.prototype.playAnima=function(t){var e=t%5;0==e&&5<=t&&(e=5);var i=this.stars[e-1];i&&i.setLight(!0).play()},t.prototype.updateExp=function(t,e){var i=this;this.lbAddExp.text=e?O3.tr(7332,t):"+"+t,egret.Tween.get(this.lbAddExp).to({visible:!0}).to({y:-40},200).call(function(){i.lbAddExp.y=-24,i.lbAddExp.visible=!1})},t}(BaseEuiView);__reflect(RedMakeupUpstar.prototype,"RedMakeupUpstar"),function(t){var e=function(){function t(t){this.lv=0,this.adv=0,this.rdc={},this.rdm={},this.bag=[],this.update(t)}return t.prototype.update=function(t){for(var e in this.lv=null==t.lv?this.lv:t.lv,this.adv=null==t.adv?this.adv:t.adv,this.rdc=null==t.rdc?this.rdc:t.rdc,t.rdm)this.rdm[e]=t.rdm[e];for(var e in t.brdm)this.rdm[e]=t.brdm[e];if(this.bag=null==t.bag?this.bag:t.bag,t.uids)for(var i=0,s=t.uids.split(",");i<s.length;i++){for(var o=s[i],r=-1,n=0;n<this.bag.length;n++)if(this.bag[n].uid==o){r=n;break}0<=r&&this.bag.splice(r,1)}t.rd&&(this.bag=this.bag.concat(t.rd))},t}();t.RedMakeupVo=e,__reflect(e.prototype,"RedMakeup.RedMakeupVo")}(RedMakeup||(RedMakeup={})),function(d){var t=function(){function u(){}return u.FK35=function(t){var e=t.rewake_init,i=t.rewake_lvup,s=t.rewake_skill,o=t.rewake_breakskill,r=t.rewake_equip,n=t.rewake_equipsuit,a=t.rewake_soullv,h=t.rewake_soulsuit;u.openLv=parseInt(e.openLv.value),u.lvUp=i,u.skillData=s,u.breakSkill=o,u.maxLv=d.Utils.mapkeyMax(u.lvUp),u.maxSkillLv=d.Utils.mapkeyMax(u.skillData),u.equipRaw=r,u.soulLv=a,u.soulSuit=h,u.initEquips(),u.initSouls(),u.rewakeId=parseInt(e.rewakeId.value);var p=e.expRate.value.split(":"),l=p[0],c=p[1];u.expRate=parseInt(c)/parseInt(l),u.expCost=parseFloat(e.expCost.value),u.freeTime=parseInt(e.freeTime.value),u.openDays=parseInt(e.openDays.value),u.payTime=parseInt(e.payTime.value),u.soulOpen=parseInt(e.soulOpenReq.value),u.soulItem=parseInt(e.soulItem.value),u.price=d.Utils.str2kv(e.price.value),u.equipSuit=n},u.initEquips=function(){for(var t in this.equip={},u.equipRaw){var e=u.equipRaw[t];this.equip[e.part]=this.equip[e.part]||{},this.equip[e.part][e.level]=e}},u.initSouls=function(){for(var t in this.soul={},u.soulLv){var e=u.soulLv[t];this.soul[e.part]=this.soul[e.part]||{},this.soul[e.part][e.lv]=e}},u.FB89=function(t,e){return this.equip[t]?this.equip[t][e]:void 0},u.getSoulInfoByLevel=function(t,e){return this.soul[t]?this.soul[t][e]:void 0},u.FC54=function(t){return u.lvUp[t]},u.FB90=function(t){return u.skillData[t]},u.getAttri=function(i,s){for(var o={},r=u.lvUp,t=function(e){var t=r[e];d.Utils.str2kv(t.unlockattr,";",":").forEach(function(t){o[t.k]||(o[t.k]=0),o[t.k]+=t.v*(i===e?s:u.maxStar)}),d.Utils.str2kv(t.rewakeattr,";",":").forEach(function(t){o[t.k]||(o[t.k]=0),o[t.k]+=t.v})},e=0;e<=i;e++)t(e);return o},u.FD30=function(i,s){for(var o={},r=u.skillData,t=function(e){var t=r[e];if(!t)return"continue";d.Utils.str2kv(t.starattr,";",":").forEach(function(t){o[t.k]||(o[t.k]=0),o[t.k]+=t.v*(i===e?s:u.maxStar)}),d.Utils.str2kv(t.lvupattr,";",":").forEach(function(t){o[t.k]||(o[t.k]=0),o[t.k]+=t.v})},e=0;e<=i;e++)t(e);return o},u.getSoulSuit=function(t){var e;for(var i in u.soulSuit){e=i;var s=u.soulSuit[Number(e)+1];if(!s||u.soulSuit[i].lvreq<=t&&t<s.lvreq)break}return{lData:u.soulSuit[e],nData:u.soulSuit[Number(e)+1]}},u.FK7=function(t){return this.price[t]},u.isOpen=function(){var t=App.CM.gtM(O6.B43);return O4.getLv()>=u.openLv&&t.serOpenDay+1>=u.openDays},u.FI37=function(t){return[,"rewake_equipPart1_png","rewake_equipPart2_png","rewake_equipPart3_png","rewake_equipPart4_png","rewake_equipPart5_png","rewake_equipPart6_png","rewake_equipPart7_png","rewake_equipPart8_png","rewake_equipPart9_png","rewake_equipPart10_png"][t]},u.FI88=function(t,e){var i=d.Config.breakSkill[t];return i?i.initrate+e*i.damage:0},u.openLv=255,u.maxStar=10,u.maxLv=0,u.expRate=1,u}();d.Config=t,__reflect(t.prototype,"Reincarnate.Config")}(Reincarnate||(Reincarnate={})),function(t){var e=function(){function t(){}return t.OpenMainView=1e3,t.CloseMainView=1002,t.OpenExchangeView=1003,t.CloseExchangeView=1004,t.SelectSkill=10005,t.UPGRADE_REQ=20001,t.UPGRADE_RES=20002,t.EXCHANGE_REQ=20003,t.EXCHANGE_RES=20004,t.BUY_EXCHANGE_REQ=20005,t.BUY_EXCHANGE_RES=20006,t.LOAD_REQ=20007,t.LOAD_RES=20008,t.RESET_RES=20009,t.UPGRADE_STAR_REQ=200011,t.UPGRADE_STAR_RES=200012,t.SKILL_UPGRADE_STAR_REQ=200013,t.SKILL_UPGRADE_STAR_RES=200014,t.SKILL_UPGRADE_REQ=200015,t.SKILL_UPGRADE_RES=200016,t.EQUIP_UPGRADE_REQ=200017,t.EQUIP_UPGRADE_RES=200018,t.EXCHANGE_DOT=200019,t.EXCHANGE_DOT_RES=200020,t.SOUL_UPGRADE_REQ=200021,t.SOUL_UPGRADE_RES=200022,t}();t.Const=e,__reflect(e.prototype,"Reincarnate.Const")}(Reincarnate||(Reincarnate={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return App.VM.register(O7.C38,"ReincarnateBaseMain",t,K17.UI_Main_TOP),t.rgF(i.Const.OpenMainView,t.GT93,t),t.rgF(i.Const.CloseMainView,t.GR99,t),App.VM.register(O7.A68,"ReincarnateExchangeView",t,K17.UI_Popup),t.rgF(i.Const.OpenExchangeView,t.GN67,t),t.rgF(i.Const.CloseExchangeView,t.GL81,t),App.VM.register(O7.A17,"ReincarnateEquipMasterView",t,K17.UI_Popup),t.rgF(i.Const.SelectSkill,t.GW61,t),new i.Model(t),t.model.aLV(O7.A68),t.model.aLV(O7.C4),t.model.aLV(O7.C6),t.model.aLV(O7.ReincarnateSoul),t.model.aLV(O7.C38),t.model.aLV(O7.G23),t.model.aLV(O7.G58),t.model.aLV(O7.I39),t.model.aLV(O7.I4),t.proxy=new i.Proxy(t),t.rgF(i.Const.UPGRADE_STAR_REQ,t.proxy.upgradeStar,t.proxy),t.rgF(i.Const.UPGRADE_STAR_RES,t.ZT44,t),t.rgF(i.Const.UPGRADE_REQ,t.proxy.upgrade,t.proxy),t.rgF(i.Const.UPGRADE_RES,t.GX86,t),t.rgF(i.Const.LOAD_REQ,t.proxy.load,t.proxy),t.rgF(i.Const.LOAD_RES,t.loadRes,t),t.rgF(i.Const.EXCHANGE_REQ,t.proxy.exchange,t.proxy),t.rgF(i.Const.EXCHANGE_RES,t.GV59,t),t.rgF(i.Const.BUY_EXCHANGE_REQ,t.proxy.buyExchange,t.proxy),t.rgF(i.Const.BUY_EXCHANGE_RES,t.ZT45,t),t.rgF(i.Const.RESET_RES,t.resetRes,t),t.rgF(i.Const.SKILL_UPGRADE_STAR_REQ,t.proxy.ZM17,t.proxy),t.rgF(i.Const.SKILL_UPGRADE_STAR_RES,t.GI9,t),t.rgF(i.Const.SKILL_UPGRADE_REQ,t.proxy.skillUpgrade,t.proxy),t.rgF(i.Const.SKILL_UPGRADE_RES,t.GP56,t),t.rgF(i.Const.EQUIP_UPGRADE_REQ,t.proxy.equipUpgrade,t.proxy),t.rgF(i.Const.EQUIP_UPGRADE_RES,t.GP57,t),t.rgF(i.Const.EXCHANGE_DOT,t.proxy.GQ59,t.proxy),t.rgF(i.Const.EXCHANGE_DOT_RES,t.GL82,t),t.rgF(i.Const.SOUL_UPGRADE_REQ,t.proxy.soulUpgrade,t.proxy),t.rgF(i.Const.SOUL_UPGRADE_RES,t.soulUpgradeRes,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.gtM()},enumerable:!0,configurable:!0}),t.prototype.GT93=function(){App.VM.open(O7.C38)},t.prototype.GR99=function(){App.VM.close(O7.C38)},t.prototype.GN67=function(){App.VM.open(O7.A68)},t.prototype.GL81=function(){App.VM.close(O7.A68)},t.prototype.GX86=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.ZT44=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV59=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.ZT45=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.loadRes=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.resetRes=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI9=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP56=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW61=function(t){var e=App.VM.gOV(O7.C4);e&&e.select(t)},t.prototype.GP57=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL82=function(t){200==t.head.state?this.model.ZD48(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.soulUpgradeRes=function(t){200==t.head.state?this.model.ZD48(t.body,P4.HH18):App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);i.Controller=t,__reflect(t.prototype,"Reincarnate.Controller")}(Reincarnate||(Reincarnate={})),function(a){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.useGoldUpStar=!1,e.redNum=0,e}return __extends(t,i),t.prototype.ZD48=function(t,e){void 0===e&&(e=null),null!=this.data?this.data.update(t):this.data=new a.ReincarnateVo(t),this.notify(e)},Object.defineProperty(t.prototype,"isShowExchangeDot",{get:function(){return!!this.data&&!!this.data.slrp},enumerable:!0,configurable:!0}),t.prototype.updateRed=function(){this.redNum=0,O4.getLv()>=a.Config.openLv&&a.Config.isOpen()&&(this.redNum+=this.ZT43()?1:0,this.redNum+=this.canUpgrade()?1:0,this.redNum+=a.Utils.FF38()?1:0,this.redNum+=a.Utils.FL11()?1:0,this.redNum+=a.Utils.soulCanUp()?1:0)},t.prototype.canExchange=function(){if(this.data&&0<this.data.count){var t=App.CM.gtM(O6.B82),e=K18.FHH93(t.avatarInfo.l)*a.Config.expCost;return t.avatarInfo.e>=e}return!1},t.prototype.ZT43=function(){return this.isShowExchangeDot&&this.canExchange()},t.prototype.canUpgrade=function(){if(this.data){if(this.isMaxLv())return!1;var t=this.data.lvDt.lv,e=a.Config.FC54(t);if(10!==this.data.lvDt.star)return N12.giC(a.Config.rewakeId)>=e.unlockcost;if(O4.getLv()>=e.needlv)return N12.FL6(a.Utils.str2kv(e.rewakecost))}return!1},t.prototype.getNext=function(t,e){return a.Config.maxStar===e&&t===a.Config.maxLv||((e+=1)>a.Config.maxStar&&(e=0,t+=1),t>a.Config.maxLv&&(t=a.Config.maxLv)),{star:e,lv:t}},t.prototype.getSkillNext=function(t,e){return a.Config.maxStar>=e&&t>=a.Config.maxLv||((e+=1)>a.Config.maxStar&&(e=0,t+=1),t>a.Config.maxLv&&(t=a.Config.maxLv)),{star:e,lv:t}},t.prototype.isMaxLv=function(){return!!this.data&&(this.data.lvDt.lv===a.Config.maxLv&&this.data.lvDt.star===a.Config.maxStar)},t.prototype.skillIsMax=function(t){if(this.data){var e=this.data.getSkillInfo(t);return e.lv>=a.Config.maxSkillLv&&e.star>=a.Config.maxStar}return!1},t.prototype.countSoulPower=function(){var t=0,e=0;for(var i in this.data.eqDts){var s=this.data.eqDts[i],o=a.Config.getSoulInfoByLevel(s.part,s.soLv);t+=M10.gAG(o.attr),e+=s.soLv}var r=a.Config.getSoulSuit(e),n=r.lData;r.nData;return t+=M10.gAG(n.attr)},t.prototype.FL35=function(){return this.updateRed(),this.redNum},t.prototype.isOpenSoulTurn=function(){if(!this.data||!this.data.eqDts)return!1;for(var t in this.data.eqDts){if(this.data.eqDts[t].ulck)return!0}return!1},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);a.Model=t,__reflect(t.prototype,"Reincarnate.Model")}(Reincarnate||(Reincarnate={})),function(s){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.S42,e.GX86,e),e.rSM(P4.O98,e.ZT44,e),e.rSM(P4.M79,e.GV59,e),e.rSM(P4.E35,e.ZT45,e),e.rSM(P4.W84,e.loadRes,e),e.rSM(P4.V7,e.resetRes,e),e.rSM(P4.P1,e.GP56,e),e.rSM(P4.K79,e.GI9,e),e.rSM(P4.P3,e.GP57,e),e.rSM(P4.HH18,e.soulUpgradeRes,e),e}return __extends(t,i),t.prototype.resetRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.RESET_RES].concat(t))},t.prototype.load=function(){this.sSM({type:P4.W83,body:{}})},t.prototype.loadRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.LOAD_RES].concat(t))},t.prototype.upgrade=function(){this.sSM({type:P4.S41,body:{}})},t.prototype.GX86=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.UPGRADE_RES].concat(t))},t.prototype.upgradeStar=function(){this.sSM({type:P4.O97,body:{}})},t.prototype.ZT44=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.UPGRADE_STAR_RES].concat(t))},t.prototype.exchange=function(){this.sSM({type:P4.M78,body:{}})},t.prototype.GV59=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.EXCHANGE_RES].concat(t))},t.prototype.buyExchange=function(){this.sSM({type:P4.E34,body:{}})},t.prototype.ZT45=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.BUY_EXCHANGE_RES].concat(t))},t.prototype.skillUpgrade=function(t){this.sSM({type:P4.O99,body:{skillId:t}})},t.prototype.GP56=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.SKILL_UPGRADE_RES].concat(t))},t.prototype.ZM17=function(t,e){this.sSM({type:P4.K78,body:{skillId:t,type:e}})},t.prototype.GI9=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.SKILL_UPGRADE_STAR_RES].concat(t))},t.prototype.equipUpgrade=function(t){this.sSM({type:P4.P2,body:{part:t}})},t.prototype.GP57=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.EQUIP_UPGRADE_RES].concat(t))},t.prototype.GQ59=function(t){this.sSM({type:P4.C40,body:{show:t}}),this.rSMO(P4.C41,this.GL82,this)},t.prototype.GL82=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.EXCHANGE_DOT_RES].concat(t))},t.prototype.soulUpgrade=function(t,e){this.sSM({type:P4.HH17,body:{part:t,type:e}})},t.prototype.soulUpgradeRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.apF.apply(this,[s.Const.SOUL_UPGRADE_RES].concat(t))},t}(TG80);s.Proxy=t,__reflect(t.prototype,"Reincarnate.Proxy")}(Reincarnate||(Reincarnate={})),function(a){var t=function(){function o(){}return o.str2kv=function(t,e,i){return void 0===e&&(e=","),void 0===i&&(i=":"),P7.str2kv(t,e,i)},o.mapkeyMax=function(t){if("object"==typeof t){if(t instanceof Array)return t.length-1;var e=[];for(var i in t)isNaN(parseInt(i))||e.push(parseInt(i));if(0<e.length)return e.sort(function(t,e){return e-t})[0]}return-1},o.FK8=function(t,e,i){void 0===e&&(e="\n"),void 0===i&&(i=":");var s="";for(var o in t)s+=s?e:"",s+=O4.FD72(parseInt(o))+i+t[o];return s},o.FF38=function(){for(var t=0,e=App.CM.gtM(O6.A87).data.skDts;t<e.length;t++){var i=e[t];if(o.FB91(i.sid))return!0}return!1},o.FB91=function(t){var e=App.CM.gtM(O6.A87);if(e.data){var i=e.data.getSkillInfo(t);if(1===i.isUnlock&&!e.skillIsMax(i.sid)){var s=a.Config.FB90(i.lv);return i.star===a.Config.maxStar?e.data.lvDt.lv>=s.breaklv&&N12.FL6(o.str2kv(s.lvupcost)):N12.FL6(o.str2kv(s.starcost))}}return!1},o.FL11=function(){var t=App.CM.gtM(O6.A87);if(t.data)for(var e=0,i=t.data.eqDts;e<i.length;e++){var s=i[e];if(o.FE24(s.part))return!0}return!1},o.soulCanUp=function(){var t=App.CM.gtM(O6.A87);if(t.data)for(var e=0,i=t.data.eqDts;e<i.length;e++){var s=i[e];if(o.soulCanUpByPart(s.part))return!0}return!1},o.FE24=function(t){var e=App.CM.gtM(O6.A87),i=App.CM.gtM(O6.B98).nowAvaEquip;if(e&&e.data&&0<=i.indexOf(t+"")){var s=e.data.getPartInfo(t);if(s){var o=s.ulck?s.lv+1:0,r=a.Config.FB89(t,o);if(r)return e.data.lvDt.lv>=r.needlv&&N12.FL6(P7.str2kv(r.cost))}}return!1},o.soulCanUpByPart=function(t){var e=App.CM.gtM(O6.A87),i=App.CM.gtM(O6.B98).nowAvaEquip;if(e&&e.data&&0<=i.indexOf(t+"")){var s=e.data.getPartInfo(t);if(s.ulck){var o=s.ulck?s.soLv:0,r=a.Config.getSoulInfoByLevel(t,o),n=N12.giC(a.Config.soulItem);if(r.cost)if(n>=r.cost)return!0}}return!1},o}();a.Utils=t,__reflect(t.prototype,"Reincarnate.Utils")}(Reincarnate||(Reincarnate={}));var ReincarnateBaseMain=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.set(O7.C38,O3.tr(5557)).rgS(O7.G23,"ReincarnateView",O3.tr(5558)).rgS(O7.C4,"ReincarnateSkillView",O3.tr(6460)).rgS(O7.C6,"ReincarnateEquipView",O3.tr(6497)).rgS(O7.ReincarnateSoul,"ReincarnateSoulView",O3.tr(8794)),i}return __extends(t,s),t.prototype.updateDot=function(t,e){if(O4.getLv()>=Reincarnate.Config.openLv&&Reincarnate.Config.isOpen()){if(e===O7.C6)return Reincarnate.Utils.FL11();if(e===O7.C4)return Reincarnate.Utils.FF38();if(e===O7.G23){var i=App.CM.gtM(O6.A87),s=0;return s+=i.ZT43()?1:0,0<(s+=i.canUpgrade()?1:0)}if(e===O7.ReincarnateSoul)return Reincarnate.Utils.soulCanUp()}return!1},t.prototype.canOpen=function(t){if(t!==O7.ReincarnateSoul)return!0;var e=App.CM.gtM(O6.A87);for(var i in e.data.eqDts){if(e.data.eqDts[i].ulck)return!0}var s=O3.tr(8795);return P18.sDP(s,!1),!1},t}(BasePanelViewX);__reflect(ReincarnateBaseMain.prototype,"ReincarnateBaseMain");var ReincarnateEquipMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ReincarnateEquipMasterSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.labTr6501.textFlow=O3.tr2(6501);var t=App.CM.gtM(O6.A87);if(0<t.data.slv){var e=Reincarnate.Config.equipSuit[t.data.slv];this.ZY2(e,this.gAttr);var i=e.rewakelv.split(":"),s=i[0],o=i[1];this.labTr6502.textFlow=O3.tr2(6502,s,o)}else this.labTr6502.includeInLayout=this.labTr6502.visible=this.gAttr.includeInLayout=this.gAttr.visible=!1;var r=Reincarnate.Config.equipSuit[t.data.slv+1];if(r){this.ZY2(r,this.gNAttr);var n=r.rewakelv.split(":");s=n[0],o=n[1];this.labTr6503.textFlow=O3.tr2(6503,s,o)}else this.labTr6503.textFlow=O3.tr2(6568),this.gNAttr.includeInLayout=this.gNAttr.visible=!1;this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this)},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),s.prototype.close.call(this)},t.prototype.ZY2=function(t,e){var i="",s="";P7.str2kv(t.attr).forEach(function(t,e){e%2==0?i+=(i?"\n":"")+P7.attr2str([t]):s+=(s?"\n":"")+P7.attr2str([t])}),this.setAttr(e,i,s)},t.prototype.setAttr=function(t,e,i){var s=t.getChildAt(0),o=t.getChildAt(1);s.text=e,o.text=i},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(ReincarnateEquipMasterView.prototype,"ReincarnateEquipMasterView");var ReincarnateEquipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.items={},i.part=1,i.skinName="ReincarnateEquipSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A87)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.initEquips(),this.labTr6498.textFlow=O3.tr2(6498),this.labTr6499.textFlow=O3.tr2(6499),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.btnAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this),P7.FD57(O3.tr(7127),this.btnAttr.lbName)},t.prototype.open=function(){s.prototype.open.call(this),this.GX5()},t.prototype.close=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUp,this),this.btnAttr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV83,this);for(var t=0;t<this.gLE.numChildren;t++)this.gLE.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this);for(t=0;t<this.gRE.numChildren;t++)this.gRE.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this);s.prototype.close.call(this)},t.prototype.initEquips=function(){for(var t=0;t<this.gLE.numChildren;t++){var e=this.gLE.getChildAt(t);(this.items[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this)}for(t=0;t<this.gRE.numChildren;t++){e=this.gRE.getChildAt(t);(this.items[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this)}},t.prototype.uBM=function(t){t instanceof Reincarnate.Model&&this.GX5()},t.prototype.GX5=function(){this.updateEquips(),this.updateAttr(),this.updateInfo(),this.ZU99()},t.prototype.updateInfo=function(){var t=App.CM.gtM(O6.B98),e=t.nowAvaEquip,i=this.model;this.imgIcon.source=Reincarnate.Config.FI37(this.part);var s=0,o=i.data.getPartInfo(this.part);if(o.ulck&&0<=e.indexOf(o.part.toString())){for(var r="",n=0,a=t.avaEquip;n<a.length;n++){var h=a[n],p=M10.FD92(h.i.toString(),h.t);if(p.pos==o.part){r=p.name;break}}this.labName.text=O3.tr(6505,M18.FF66(o.lv),r);var l=Reincarnate.Config.FB89(o.part,o.lv);s+=M10.gAG(l.attr)}else this.labName.text=O3.tr(6571);this.labPower.text=s.toString(),this.btn.imgNew.visible=Reincarnate.Utils.FE24(this.part),this.btn.label=O3.tr(o.ulck?6573:6572)},t.prototype.ZU99=function(){var t,r=this,e=this.model.data.getPartInfo(this.part),n=!1;e.ulck?(t=Reincarnate.Config.FB89(this.part,e.lv+1))||(n=!0,t=Reincarnate.Config.FB89(this.part,e.lv)):t=Reincarnate.Config.FB89(this.part,0);var i=t.cost;P7.str2kv(i).forEach(function(t){var e=t.k,i=t.v,s=N12.gID(e),o=N12.giC(e);P16.setIcon(r.itemIcon,s,i,{showName:!1,showCount:!1}),r.itemIcon.imgNameBg.visible=!1,r.labItemName.textFlow=n?O3.tr2(6568):O3.tr2(6570,s.name,i),r.labItemCount.textFlow=O3.tr2(6449,"#"+(i<=o?_cc.green:_cc.red).toString(16),o)})},t.prototype.updateAttr=function(){var t=this.model.data.getPartInfo(this.part),e=Reincarnate.Config.FB89(t.part,t.lv),i=Reincarnate.Config.FB89(t.part,t.lv+1),s=P7.str2kv(e.attr),o=i?P7.str2kv(i.attr):s;this.labAttr.text=Jade.Utils.attr2Str(s),this.labNAttr.text=P7.attr2str(o,"\n",{template:"$1"}),this.updateUpicon(s.length)},t.prototype.updateUpicon=function(t){for(this.gUp.visible=0<t,t<1&&(t=1);this.gUp.numChildren>t;)this.gUp.removeChildAt(this.gUp.numChildren);for(var e=this.gUp.getChildAt(0),i=this.gUp.numChildren;i<t;i++){var s=new eui.Image(e.source);s.rotation=e.rotation,this.gUp.addChild(s)}},t.prototype.updateEquips=function(){var t=App.CM.gtM(O6.B98),e=this.model,i=t.avaEquip;for(var s in this.items){var o=this.items[s],r=parseInt(o.name),n=e.data.getPartInfo(r);o.lbClass.bottom=-3,o.imgChoose.visible=r===this.part,o.lbClass.textFlow=n.ulck?O3.tr2(6504,M18.FF66(n.lv)):O3.tr2(6571),o.imgNew.visible=Reincarnate.Utils.FE24(r)}for(var a=0,h=i;a<h.length;a++){s=h[a];var p=M10.FD92(s.i.toString(),s.t);o=this.items[p.pos];(n=e.data.getPartInfo(parseInt(p.pos))).ulck&&(o.imgHead.source=p.icon,o.imgQuality.source=N12.getBox(p.quality),6==p.quality?App.THH33.aUE(o.gIcon,"square_hong",-51,-50,-1):App.THH33.rEf(o.gIcon,"square_hong"))}},t.prototype.select=function(t){this.part=t,this.GX5()},t.prototype.onClickEquip=function(t){var e=t.currentTarget;this.select(parseInt(e.name))},t.prototype.onClickUp=function(){var t=this.model,e=t.data.getPartInfo(this.part),i=e.ulck?e.lv+1:0,s=Reincarnate.Config.FB89(this.part,i);if(s){var o=P7.str2kv(s.cost);N12.FL6(o)?t.data.lvDt.lv>=s.needlv?App.CM.apF(O6.A87,Reincarnate.Const.EQUIP_UPGRADE_REQ,this.part):P18.sDP(O3.tr(6575,s.needlv)):App.VM.open(O7.G87,o[0].k,o[0].v)}else App.CM.apF(O6.A87,Reincarnate.Const.EQUIP_UPGRADE_REQ,this.part)},t.prototype.ZV83=function(){App.VM.open(O7.A17)},t}(BaseEuiView);__reflect(ReincarnateEquipView.prototype,"ReincarnateEquipView");var ReincarnateExchangeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ReincarnateExchangeSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN80,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.ckDot.addEventListener(eui.UIEvent.CHANGE,this.ZN78,this);var t=App.CM.gtM(O6.A87);this.GX5(),this.ckDot.selected=!t.isShowExchangeDot,this.lbTitle.text=O3.tr(5568),this.ckDot.label=O3.tr(5572),this.btnExchange.label=O3.tr(6417)},t.prototype.uBM=function(t){t instanceof TG12?this.GX5():t instanceof Reincarnate.Model&&this.GX5(t)},t.prototype.GX5=function(t){t=t||App.CM.gtM(O6.A87);var e=Reincarnate.Utils.mapkeyMax(K18.levelup),i=O4.getLv();e<=i&&(i=e-1);var s=K18.FHH93(i),o=TG22.FG38(s*Reincarnate.Config.expCost);this.labExp.text=O3.tr(5570,o),this.labItem.text=O3.tr(5569,TG22.FG38(o*Reincarnate.Config.expRate)),this.labCount.text=O3.tr(5571,t.data.count)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnExchange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN80,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.ckDot.removeEventListener(eui.UIEvent.CHANGE,this.ZN78,this),s.prototype.close.apply(this,t)},t.prototype.oCC=function(){App.CM.apF(O6.A87,Reincarnate.Const.CloseExchangeView)},t.prototype.ZN80=function(){var t=App.CM.gtM(O6.B82),e=Reincarnate.Utils.mapkeyMax(K18.levelup),i=O4.getLv();e<=i&&(i=e-1);var s=K18.FHH93(i),o=TG22.FG38(s*Reincarnate.Config.expCost);t.avatarInfo.e>=o?App.CM.apF(O6.A87,Reincarnate.Const.EXCHANGE_REQ):P18.sDP(O3.tr(5580)),this.oCC()},t.prototype.onClickBuy=function(){var t=App.CM.gtM(O6.A87),e=Reincarnate.Config.FK7(t.data.lbe);if(e){var i={handler:function(){return App.CM.apF(O6.A87,Reincarnate.Const.BUY_EXCHANGE_REQ)},content:O3.tr(5573,e.v,t.data.canBuyCount),title:O3.tr(6409)};App.VM.open(O7.C54,i)}else P18.sDP(O3.tr(5534))},t.prototype.ZN78=function(){App.CM.gtM(O6.A87);App.CM.apF(O6.A87,Reincarnate.Const.EXCHANGE_DOT,this.ckDot.selected?0:1)},t}(BaseEuiView);__reflect(ReincarnateExchangeView.prototype,"ReincarnateExchangeView");var ReincarnateSkillItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ReincarnateSkillItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.currentState=this.data.isLock?"lock":"normal",this.validateNow();var t=this.data;this.imgRed.visible=!!t&&t.hasDot,this.labName.text=t?t.name:"",this.lbLevel.text=t?O3.tr(6456,t.lv,t.star):"",this.imgIcon.source=t?t.icon:"",this.imgSelected.visible=t.selected,this.labLock.textFlow=O3.tr2(6458,this.data.openLv),P16.sGF(this.imgIcon,this.data.isLock)},t.prototype.onClick=function(){App.CM.apF(O6.A87,Reincarnate.Const.SelectSkill,this.itemIndex)},t}(eui.ItemRenderer);__reflect(ReincarnateSkillItemView.prototype,"ReincarnateSkillItemView");var ReincarnateSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.index=0,i.skill={name:"",lv:0,star:0,icon:"",id:0,isOpen:!1},i.skinName="ReincarnateSkillSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A87)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.listSkill.dataProvider=this.dataSource=new eui.ArrayCollection,this.listSkill.itemRenderer=ReincarnateSkillItemView,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.labTr6445.textFlow=O3.tr2(6445),this.cbAutoSmelt.label=O3.tr(6450),this.initStars(),this.GX5()},t.prototype.open=function(){s.prototype.open.call(this)},t.prototype.close=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.dataSource.removeAll(),s.prototype.close.call(this)},t.prototype.uBM=function(t){(t instanceof TG12||t instanceof Reincarnate.Model||t instanceof THH9)&&this.GX5()},t.prototype.GX5=function(){var r=this,t=this.model;this.updateInfo(),this.updateSkills(),this.updateStars();var e,i=this.skill.lv,s=this.skill.star,o=t.getNext(i,s),n=o.lv,a=o.star,h=Reincarnate.Config.FD30(n,a);if(this.labNextAttri.textFlow=M18.FG71(Reincarnate.Utils.FK8(h,"\n","+")),i===s&&0===s)for(var p in e={},h)e[p]=0;else e=Reincarnate.Config.FD30(i,s);var l=Reincarnate.Utils.FK8(e,"\n","+"),c=s<Reincarnate.Config.maxStar,u=Reincarnate.Config.FB90(i),d=c?u.starcost:u.lvupcost;P7.str2kv(d).forEach(function(t){var e=t.k,i=t.v,s=N12.gID(e),o=N12.giC(e);P16.setIcon(r.itemIcon,s,i,{showName:!1,showCount:!1}),r.labItemName.textFlow=O3.tr2(6448,s.name,i),r.labItemCount.textFlow=O3.tr2(6449,"#"+(i<=o?_cc.green:_cc.red).toString(16),o)}),this.btn.label=c?O3.tr(5560):O3.tr(5559),this.labTr6446.textFlow=O3.tr2(c?6446:6447),this.labAttri.textFlow=M18.FG71(l),this.labLv.text=O3.tr(5567,Math.min(i+1,Reincarnate.Config.maxSkillLv)),this.cbAutoSmelt.visible=c;var v=Reincarnate.Config.breakSkill[this.skill.id];if(v){var f=(100*(v.initrate+i*v.damage)).toFixed(1);this.labCurSkillInfo.textFlow=M18.FG71(v.desc,f);var g=(100*(v.initrate+Math.min(i+1,Reincarnate.Config.maxSkillLv)*v.damage)).toFixed(1);this.labNextSkillInfo.textFlow=M18.FG71(v.desc,g)}var m=[];for(var p in e)m.push(p+":"+e[p]);this.labPower.text=M10.gAG(m.join(";")).toString(),this.btn.imgNew.visible=Reincarnate.Utils.FB91(this.skill.id)},t.prototype.updateInfo=function(){var t=App.CM.gtM(O6.B82),e=this.model,i=t.sl[this.index+1],s=i.skillid,o=i.name,r=i.icon,n=e.data.getSkillInfo(s),a=n.star,h=n.lv,p=n.isUnlock;this.skill={name:o,icon:r,lv:h,star:a,id:s,isOpen:1===p}},t.prototype.updateSkills=function(){for(var t=App.CM.gtM(O6.B82),e=this.model,i=t.sl,s=[],o=0;o<5;o++){var r=i[o+1],n=e.data.getSkillInfo(r.skillid),a=Reincarnate.Config.breakSkill[n.sid];s.push({hasDot:Reincarnate.Utils.FB91(n.sid),icon:r.icon,isLock:!n.isUnlock,name:r.name,lv:n.lv,star:n.star,k:o+1,sid:n.sid,selected:this.index===o,openLv:a.reqrewakelv})}this.dataSource.source=s},t.prototype.ZR46=function(){this.model.skillIsMax(this.skill.id)?P18.sDP(O3.tr(5583)):this.skill.isOpen?this.skill.star===Reincarnate.Config.maxStar?this.upgrade():this.upgradeStar():P18.sDP(O3.tr(6510,Reincarnate.Config.breakSkill[this.skill.id].reqrewakelv))},t.prototype.upgrade=function(){var t=Reincarnate.Config.FB90(this.skill.lv);if(this.model.data.lvDt.lv>=t.breaklv){var e=Reincarnate.Utils.str2kv(t.lvupcost);if(N12.FL6(e))App.CM.apF(O6.A87,Reincarnate.Const.SKILL_UPGRADE_REQ,this.skill.id);else{var i=e[0].v-N12.giC(e[0].k),s=App.VM.open(O7.G87,e[0].k,i);s&&(s.bind2goldAsk=!0)}}else P18.sDP(O3.tr(6511,t.breaklv))},t.prototype.upgradeStar=function(){var t=Reincarnate.Config.FB90(this.skill.lv),e=Reincarnate.Utils.str2kv(t.starcost),i=this.model;if(N12.FL6(e))App.CM.apF(O6.A87,Reincarnate.Const.SKILL_UPGRADE_STAR_REQ,this.skill.id,1);else{var s=App.CM.gtM(O6.B82),o=e[0].k,r=e[0].v,n=N12.giC(o),a=void 0,h=r;if(this.cbAutoSmelt.selected){var p=i.useGoldUpStar,l=N15.FA50(o),c=N15.FB92(o),u=s.avatarInfo,d=u.g,v=u.bg;if(0<l){if(r*l<=v)a=2;else if(c<0)return void P18.sDP(O3.tr(5354))}else p=i.useGoldUpStar=!0;if(0<c){if(!(c*r<d))return void P7.FA78();if(!p)return void this.ZX12();a=3}a?App.CM.apF(O6.A87,Reincarnate.Const.SKILL_UPGRADE_STAR_REQ,this.skill.id,a):P18.sDP(O3.tr(1483))}else App.VM.open(O7.G87,o,h-n)}},t.prototype.ZX12=function(){var t=this,e=App.CM.gtM(O6.A87);if(e.useGoldUpStar)this.upgradeStar();else{App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){e.useGoldUpStar=!0,t.upgradeStar()})}},t.prototype.initStars=function(){for(var t=this.bgStars.numChildren;t<Reincarnate.Config.maxStar;t++){var e=new eui.Image("v1_img_starx2_png");e.scaleX=e.scaleY=.5,this.bgStars.addChild(e)}},t.prototype.updateStars=function(){for(var t=0;t<Reincarnate.Config.maxStar;t++)this.bgStars.getChildAt(t).source=t<this.skill.star?"v1_img_starx1_png":"v1_img_starx2_png"},t.prototype.select=function(t){this.index=t,this.updateInfo(),this.GX5()},t}(BaseEuiView);__reflect(ReincarnateSkillView.prototype,"ReincarnateSkillView");var ReincarnateSoulView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.items={},i.part=1,i.skinName="ReincarnateSoulSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A87)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.initEquips(),this.labTr6498.textFlow=O3.tr2(8813),this.labTr6499.textFlow=O3.tr2(8814),this.lbNoAct.text=O3.tr(8798),this.lbNoAct1.text=O3.tr(8799),this.lbStr.text=O3.tr(8800),this.lbStr1.text=O3.tr(8796),this.btnOne.label=O3.tr(8802),this.btnTen.label=O3.tr(8803);var t=O3.tr(8801);this.btnGet.textFlow=new Array({text:t,style:{underline:!0}})},t.prototype.open=function(){s.prototype.open.call(this),this.part=this.getBestPos(),this.GX5(),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnGet,this),this.btnOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOne,this),this.btnTen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTen,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnGet,this),this.btnOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnOne,this),this.btnTen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTen,this);for(var t=0;t<this.gLE.numChildren;t++)this.gLE.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this);for(t=0;t<this.gRE.numChildren;t++)this.gRE.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this);s.prototype.close.call(this)},t.prototype.initEquips=function(){for(var t=0;t<this.gLE.numChildren;t++){var e=this.gLE.getChildAt(t);(this.items[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this)}for(t=0;t<this.gRE.numChildren;t++){e=this.gRE.getChildAt(t);(this.items[e.name]=e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEquip,this)}},t.prototype.uBM=function(t,e){t instanceof Reincarnate.Model?(e==P4.HH18&&this.showSoulLv(),this.GX5()):t instanceof TG12&&this.GX5()},t.prototype.showSoulLv=function(){var t=this.model.data.getPartInfo(this.part);0<=this.lastLv&&t.soLv>this.lastLv&&App.THH32.aUE(this.items[this.part],"lg_qhyh_01",51,51,1)},t.prototype.GX5=function(){this.updateEquips(),this.updateAttr(),this.updateInfo(),this.ZU99()},t.prototype.updateInfo=function(){var t=App.CM.gtM(O6.B98).nowAvaEquip,e=this.model,i=0;for(var s in e.data.eqDts)i+=e.data.eqDts[s].soLv;var o=e.data.getPartInfo(this.part);o.ulck&&0<=t.indexOf(o.part.toString())?(this.grpAct.visible=this.grpAct1.visible=!0,this.lbNoAct.visible=this.lbNoAct1.visible=!1):(this.grpAct.visible=this.grpAct1.visible=!1,this.lbNoAct.visible=this.lbNoAct1.visible=!0);var r=Reincarnate.Config.getSoulSuit(i),n=r.lData,a=r.nData,h=P7.str2kv(n.attr),p=a?P7.str2kv(a.attr):h;this.lbSuitL.text=P7.attr2str4(h),this.lbSuitN.text=P7.attr2str4(p,"\n",{percentTemplate:"$1‰"}),this.updateUpicon(h.length,this.gSuitUp),this.lbSuit.textFlow=a?(this.lbSuitL.left=24,this.gSuitUp.visible=this.lbSuitN.visible=!0,O3.tr2(8797,a.lvreq,i,a.lvreq)):(this.lbSuitL.left=114,this.gSuitUp.visible=this.lbSuitN.visible=!1,O3.tr2(8804));var l=this.model.countSoulPower();this.labPower.text=l.toString()},t.prototype.ZU99=function(){var t,e=this.model.data.getPartInfo(this.part),i=Reincarnate.Config.soulItem;if(e.ulck)if(this.lbNoAct1.visible=!1,this.grpAct1.visible=!0,0!=(t=Reincarnate.Config.getSoulInfoByLevel(this.part,e.soLv)).cost){this.processBar.setData(e.e,t.exp),this.grpCost.visible=!0;var s=N12.gID(i),o=N12.giC(i);this.itemCost.setData(s),o>=t.cost?(this.btnTen.imgNew.visible=this.btnOne.imgNew.visible=!0,this.lbCost.textFlow=M18.HTP.parse(O3.tr(8811,"",o+"/"+t.cost))):(this.btnTen.imgNew.visible=this.btnOne.imgNew.visible=!1,this.lbCost.textFlow=M18.HTP.parse(O3.tr(8811,o,"/"+t.cost)))}else this.processBar.showMaxUI(),this.grpCost.visible=!1,this.btnTen.imgNew.visible=this.btnOne.imgNew.visible=!1;else this.processBar.showNullUI(),this.grpAct1.visible=!1,this.lbNoAct1.visible=!0},t.prototype.updateAttr=function(){var t=this.model.data.getPartInfo(this.part),e=Reincarnate.Config.getSoulInfoByLevel(t.part,t.soLv),i=Reincarnate.Config.getSoulInfoByLevel(t.part,t.soLv+1),s=P7.str2kv(e.attr),o=i?P7.str2kv(i.attr):s;this.labAttr.text=Jade.Utils.attr2Str(s),this.labNAttr.text=P7.attr2str(o,"\n",{template:"$1"}),this.updateUpicon(s.length,this.gUp),this.gUp.visible=this.labTr6499.visible=this.labNAttr.visible=i?(this.labAttr.horizontalCenter=this.labTr6498.horizontalCenter=-85,!0):(this.labAttr.horizontalCenter=this.labTr6498.horizontalCenter=0,!1)},t.prototype.updateUpicon=function(t,e){for(e.visible=0<t,t<1&&(t=1);e.numChildren>t;)e.removeChildAt(e.numChildren);for(var i=e.getChildAt(0),s=e.numChildren;s<t;s++){var o=new eui.Image(i.source);o.rotation=i.rotation,e.addChild(o)}},t.prototype.updateEquips=function(){var t=App.CM.gtM(O6.B98),e=this.model,i=t.avaEquip;for(var s in this.items){var o=this.items[s],r=parseInt(o.name),n=e.data.getPartInfo(r);o.lbClass.bottom=-3,o.imgChoose.visible=r===this.part,o.lbClass.textFlow=n.ulck?O3.tr2(933,n.soLv):O3.tr2(6571),o.imgNew.visible=Reincarnate.Utils.soulCanUpByPart(r)}for(var a=0,h=i;a<h.length;a++){s=h[a];var p=M10.FD92(s.i.toString(),s.t);o=this.items[p.pos];(n=e.data.getPartInfo(parseInt(p.pos))).ulck&&(o.imgHead.source=p.icon,o.imgQuality.source=N12.getBox(p.quality),6==p.quality?App.THH33.aUE(o.gIcon,"square_hong",-51,-50,-1):App.THH33.rEf(o.gIcon,"square_hong"))}},t.prototype.select=function(t){this.part=t,this.GX5()},t.prototype.onClickEquip=function(t){var e=t.currentTarget;this.select(parseInt(e.name)),this.lastLv=-1},t.prototype.onBtnGet=function(){var t=Reincarnate.Config.soulItem;App.VM.open(O7.G87,t,1)},t.prototype.onBtnOne=function(){var t=this.model.data.getPartInfo(this.part);this.lastLv=t.soLv;var e=t.ulck?t.soLv:0,i=Reincarnate.Config.getSoulInfoByLevel(this.part,e),s=N12.giC(Reincarnate.Config.soulItem);if(0!=i.cost){s>=i.cost?App.CM.apF(O6.A87,Reincarnate.Const.SOUL_UPGRADE_REQ,this.part,1):App.VM.open(O7.G87,Reincarnate.Config.soulItem,i.cost-s)}else{var o=O3.tr(8804);P18.sDP(o,!1)}},t.prototype.onBtnTen=function(){var t=this.model.data.getPartInfo(this.part);this.lastLv=t.soLv;var e=t.ulck?t.soLv:0,i=Reincarnate.Config.getSoulInfoByLevel(this.part,e),s=N12.giC(Reincarnate.Config.soulItem);if(0!=i.cost){s>=i.cost?App.CM.apF(O6.A87,Reincarnate.Const.SOUL_UPGRADE_REQ,this.part,10):App.VM.open(O7.G87,Reincarnate.Config.soulItem,i.cost-s)}else{var o=O3.tr(8804);P18.sDP(o,!1)}},t.prototype.ZV83=function(){App.VM.open(O7.A17)},t.prototype.getBestPos=function(){var t=this.model.data.eqDts,e=0;for(var i in t){var s=t[i];if(s.ulck){e=e||Number(s.part);var o=s.ulck?s.soLv:0,r=Reincarnate.Config.getSoulInfoByLevel(Number(s.part),o),n=N12.giC(Reincarnate.Config.soulItem);if(0!=r.cost)if(n>=r.cost)return s.part}}return e},t}(BaseEuiView);__reflect(ReincarnateSoulView.prototype,"ReincarnateSoulView");var Reincarnate,ReincarnateView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ReincarnateSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.labGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.labGet.textFlow=O3.tr2(5566),this.lab.textFlow=O3.tr2(5564),this.lab2.textFlow=O3.tr2(5557)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t);var i=this.model;this.updateStar(i),this.GX5(i)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.labGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){t instanceof Reincarnate.Model?(this.GX5(t),this.updateStar(t)):t instanceof THH14&&this.GX5()},Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A87)},enumerable:!0,configurable:!0}),t.prototype.GX5=function(t){var e,n=this,i=(t=t||this.model).data.lvDt.lv,s=t.data.lvDt.star,o=t.getNext(i,s),r=o.lv,a=o.star,h=Reincarnate.Config.getAttri(r,a);if(this.labNextAttri.textFlow=O3.tr2(5574,this.FK8(h)),i===s&&0===s)for(var p in e={},h)e[p]=0;else e=Reincarnate.Config.getAttri(i,s);var l=this.FK8(e),c=s<Reincarnate.Config.maxStar,u=Reincarnate.Config.FC54(i);if(c){var d=N12.giC(Reincarnate.Config.rewakeId);this.labExp.textFlow=O3.tr2(5561,d<u.unlockcost?"#ff0000":"#E5C7AC",d,u.unlockcost)}else l+="\n"+O3.tr(5562,O4.getLv()<u.needlv?"#ff0000":"#E5C7AC",O4.getLv(),u.needlv),u.rewakecost.split(";").forEach(function(t){var e=t.split(":"),i=e[0],s=e[1],o=N12.gID(parseInt(i));n.imgConsume.source=o.icon,n.labConsume.text=O3.tr(5563);var r=N12.giC(parseInt(i));n.labConsumeCount.textFlow=M18.FG71(M18.FL30(r.toString(),{color:r<parseInt(s)?"#ff0000":"#E5C7AC"})+"/"+s)});this.labAttri.textFlow=M18.FG71(l),this.btn.label=c?O3.tr(5560):O3.tr(5559),this.labExp.visible=c,this.imgConsume.visible=this.labConsume.visible=this.labConsumeCount.visible=!c,this.labLv.text=O3.tr(5567,i),this.btn.imgNew.visible=t.canUpgrade(),this.imgGetRed.visible=t.ZT43(),this.lab1.textFlow=O3.tr2(c?5565:5577);var v=[];for(var p in e)v.push(p+":"+e[p]);this.labPower.text=M10.gAG(v.join(";")).toString()},t.prototype.updateStar=function(t){for(var e=(t=t||this.model).data.lvDt.star,i=0;i<Reincarnate.Config.maxStar;i+=1){this.gStar.getChildAt(i).source=i<e?"com_zhuanshengjie_png":"com_zhuanshengfong_png"}},t.prototype.onClick=function(){var t=this.model;if(t.isMaxLv())P18.sDP(O3.tr(5583));else{var e=Reincarnate.Config.FC54(t.data.lvDt.lv);if(t.data.lvDt.star===Reincarnate.Config.maxStar)if(O4.getLv()>=e.needlv){var i=Reincarnate.Utils.str2kv(e.rewakecost);if(N12.FL6(i))App.CM.apF(O6.A87,Reincarnate.Const.UPGRADE_REQ);else{var s=i[0].v-N12.giC(i[0].k),o=App.VM.open(O7.G87,i[0].k,s);o&&(o.bind2goldAsk=!0)}}else P18.sDP(O3.tr(5578));else if(N12.giC(Reincarnate.Config.rewakeId)>=e.unlockcost){App.CM.apF(O6.A87,Reincarnate.Const.UPGRADE_STAR_REQ);var r=this.gStar.getChildAt(t.data.lvDt.star);r&&App.THH33.addUIEffect2(this.gStar,"iconSkill",1,{name:"iconSkill"+t.data.lvDt.star,x:r.x-40,y:r.y-44,scaleX:.8,scaleY:.8})}else P18.sDP(O3.tr(5579))}},t.prototype.onClickGet=function(){App.CM.apF(O6.A87,Reincarnate.Const.OpenExchangeView)},t.prototype.FK8=function(t){return Reincarnate.Utils.FK8(t)},t}(BaseEuiView);__reflect(ReincarnateView.prototype,"ReincarnateView"),function(e){var t=function(){function t(t){this.skDts=[],this.eqDts=[],this.update(t)}return t.prototype.update=function(t){if(this.lvDt=t.lvDt||this.lvDt,this.le=void 0!==t.le?t.le:this.le,this.lbe=void 0!==t.lbe?t.lbe:this.lbe,this.eqDts=void 0!==t.eqDts?t.eqDts:this.eqDts,this.slv=void 0!==t.slv?t.slv:this.slv,this.slrp=void 0!==t.slrp?t.slrp:this.slrp,this.skDts=t.skDts||this.skDts,t.skDt){var e=!1;for(var i in this.skDts)this.skDts[i].sid===t.skDt.sid&&(this.skDts[i]=t.skDt,e=!0);!e&&this.skDts.push(t.skDt)}if(t.eqDt)for(var i in this.eqDts)this.eqDts[i].part===t.eqDt.part&&(this.eqDts[i]=t.eqDt)},t.prototype.getPartInfo=function(t){for(var e=0,i=this.eqDts;e<i.length;e++){var s=i[e];if(s.part===t)return s}},t.prototype.getSkillInfo=function(t){for(var e=0,i=this.skDts;e<i.length;e++){var s=i[e];if(s.sid===t)return s}},Object.defineProperty(t.prototype,"count",{get:function(){return e.Config.freeTime+this.lbe-this.le},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canBuyCount",{get:function(){return e.Config.payTime-this.lbe},enumerable:!0,configurable:!0}),t}();e.ReincarnateVo=t,__reflect(t.prototype,"Reincarnate.ReincarnateVo")}(Reincarnate||(Reincarnate={}));var L3=function(){function i(){}return i.FK35=function(t){i.strs=[O3.tr(7729),O3.tr(7730),O3.tr(7731)],i.init=t.reveal_init,i.revealLv=t.reveal_reveallv,i.starNum=this.getStarNum(),i.advancedLv=this.ZY3(),i.openLv=this.getOpen()},i.gIV=function(t){var e="未配置";return i.init&&i.init[t]&&(e=i.init[t].value),e},i.ZY3=function(){var t=0;return i.init?t=parseInt(this.gIV("advancedLv")):t},i.getStarNum=function(){var t=0;return i.init?t=parseInt(this.gIV("starNum")):t},i.getOpen=function(){var t=0;return i.init?t=parseInt(this.gIV("openLv")):t},i.FI89=function(t){var e;return i.revealLv?e=i.revealLv[t]:e},i.strs=[],i}();__reflect(L3.prototype,"L3");var M4=function(){function t(){}return t.A9=10001,t.A10=10002,t.A6=10003,t.A7=10004,t.A2=10005,t.A3=10006,t.A4=11001,t.A1=11002,t.A8=11003,t.A5=11004,t}();__reflect(M4.prototype,"M4");var TD46=function(i){function t(){var t=i.call(this)||this;t.revealProxy=new TG28(t),App.VM.register(O7.I70,"RevealPointView",t,K17.UI_Main_TOP),t.rgF(M4.A4,t.GI10,t),t.rgF(M4.A1,t.GG29,t),App.VM.register(O7.G93,"RevealEverView",t,K17.UI_Main_TOP),t.rgF(M4.A8,t.GK4,t),t.rgF(M4.A5,t.GI11,t);var e=new TG27(t);return e.aLV(O7.I64),e.aLV(O7.I70),e.aLV(O7.I88),e.aLV(O7.I1),e.aLV(O7.I77),e.aLV(O7.I87),e.aLV(O7.I65),e.aLV(O7.G43),e.aLV(O7.I67),e.aLV(O7.G85),e.aLV(O7.F5),e.aLV(O7.F4),e.aLV(O7.HH25),e.aLV(O7.B73),e.aLV(O7.E1),e.aLV(O7.HH96),e.aLV(O7.B76),e.aLV(O7.E90),t.rgF(M4.A9,t.GT63,t),t.rgF(M4.A10,t.GT64,t),t.rgF(M4.A6,t.GP58,t),t.rgF(M4.A7,t.GP59,t),t.rgF(M4.A2,t.GN68,t),t.rgF(M4.A3,t.GN69,t),t}return __extends(t,i),t.prototype.GI10=function(t){var e=this.gtM(),i=TG76.FF39(e.riseConst);if(!(L3.openLv<=O4.getLv())){var s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[L3.openLv])),void(e.riseConst=null)}if(i)App.VM.open(O7.I70,t);else{var o=O3.tr(2411,TE12.AdvanceSystemTypeText[e.riseConst],L3.advancedLv);P18.sDP(o),e.riseConst=null}},t.prototype.GG29=function(){App.VM.close(O7.I70)},t.prototype.GK4=function(t){App.VM.open(O7.G93,t)},t.prototype.GI11=function(){App.VM.close(O7.G93)},t.prototype.GT63=function(){return this.revealProxy.GT63()},t.prototype.GT64=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZT46(e,P4.W82),i.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP58=function(t){var e=this.gtM();this.revealProxy.GP58(e.riseConst,t)},t.prototype.GP59=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZM18(e,P4.T92),i.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN68=function(){var t=this.gtM();this.revealProxy.GN68(t.riseConst)},t.prototype.GN69=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZM18(e,P4.S29),i.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TD46.prototype,"TD46");var TG27=function(i){function t(t){var e=i.call(this,t)||this;return e.actList=[],e.isShowBY={},e}return __extends(t,i),t.prototype.ZT46=function(t,e){var i=t.mul;if(null!=i&&0<i.length)for(var s=0;s<i.length;s++)this.ZM18(i[s],e),this.isShowBY[i[s].sys]=!0},t.prototype.ZM18=function(t,e){if(t&&t.sys){var i=TG76.FC55(t.sys);i&&(i.ZD48(t),i.updateRed(),i.notify(e))}},t.prototype.ZM19=function(t,e){if(t)switch(e){case P4.U30:case P4.N58:this.ZM18(t,e)}},t.prototype.addAct=function(t,e){t&&t.id&&this.ZM18(t,e)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TG27.prototype,"TG27");var TG28=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.GT63=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W81,body:{}};s.rSMO(P4.W82,function(t){s.apF(M4.A10,t),e("加载点化进阶加载完成")},s),s.sSM(i)})},t.prototype.GP58=function(t,e){var i={type:P4.T91,body:{sysId:t,type:e}};this.rSMO(P4.T92,this.GP59,this),this.sSM(i)},t.prototype.GP59=function(t){this.apF(M4.A7,t)},t.prototype.GN68=function(t){var e={type:P4.S28,body:{sysId:t}};this.rSMO(P4.S29,this.GN69,this),this.sSM(e)},t.prototype.GN69=function(t){this.apF(M4.A3,t)},t}(TG80);__reflect(TG28.prototype,"TG28");var TG76=function(){function t(){}return t.FC55=function(t){if(t)switch(t){case E5.A11:return App.CM.gtM(O6.C2);case E5.A12:return App.CM.gtM(O6.C18);case E5.A13:return App.CM.gtM(O6.C17);case E5.A9:return App.CM.gtM(O6.B83);case E5.A14:case E5.A6:case E5.A7:return App.CM.gtM(O6.C12);case E5.A8:case E5.A5:case E5.A3:return App.CM.gtM(O6.C3);case E5.A10:case E5.A1:case E5.A2:case E5.A4:return App.CM.gtM(O6.B91)}},t.FG45=function(t){if(t)switch(t){case E5.A11:return App.CM.gtM(O6.C2).pointData;case E5.A12:return App.CM.gtM(O6.C18).pointData;case E5.A13:return App.CM.gtM(O6.C17).pointData;case E5.A9:return App.CM.gtM(O6.B83).pointData;case E5.A7:return App.CM.gtM(O6.C12).pointSoulData;case E5.A6:return App.CM.gtM(O6.C12).pointPrestigeData;case E5.A5:return App.CM.gtM(O6.C3).pointFmData;case E5.A3:return App.CM.gtM(O6.C3).pointGmData;case E5.A10:return App.CM.gtM(O6.B91).pointData1;case E5.A1:return App.CM.gtM(O6.B91).pointData2;case E5.A2:return App.CM.gtM(O6.B91).pointData3;case E5.A4:return App.CM.gtM(O6.B91).pointData4}},t.FI90=function(t){if(t)switch(t){case E5.A11:return M13.init.advancedItem.value;case E5.A12:return N13.init.advancedItem.value;case E5.A13:return N16.init.advancedItem.value;case E5.A9:return L2.init.advancedItem.value;case E5.A7:return N14.init.soulItem.value;case E5.A6:return N14.init.prestigeItem.value;case E5.A5:return M11.init.fmAdvItem.value;case E5.A3:return M11.init.gnAdvItem.value;case E5.A10:return K19.init.animalAdvItem.value;case E5.A1:return K19.init.psychicAdvItem.value;case E5.A2:return K19.init.spiritAdvItem.value;case E5.A4:return K19.init.soulAdvItem.value}},t.FHH65=function(t){if(t)switch(t){case E5.A11:return N12.giC(parseInt(M13.init.timeItem.value));case E5.A12:return N12.giC(parseInt(N13.init.timeItem.value));case E5.A13:return N12.giC(parseInt(N16.init.timeItem.value));case E5.A9:return N12.giC(parseInt(L2.init.timeItem.value));case E5.A7:return N12.giC(parseInt(N14.init.timeItem2.value));case E5.A6:return N12.giC(parseInt(N14.init.timeItem1.value));case E5.A5:return N12.giC(parseInt(M11.gIV("timeItem1")));case E5.A3:return N12.giC(M11.gIV("timeItem2"));case E5.A10:return N12.giC(parseInt(K19.init.timeItem1.value));case E5.A1:return N12.giC(parseInt(K19.init.timeItem2.value));case E5.A2:return N12.giC(parseInt(K19.init.timeItem3.value));case E5.A4:return N12.giC(parseInt(K19.init.timeItem4.value))}},t.FF39=function(t){if(t)switch(t){case E5.A11:return App.CM.gtM(O6.C2).initHorseData.h.lv>=L3.advancedLv;case E5.A12:return App.CM.gtM(O6.C18).initWingData.ws[0].t>=L3.advancedLv;case E5.A13:return App.CM.gtM(O6.C17).initFaqiData.faqi.lv>=L3.advancedLv;case E5.A9:return App.CM.gtM(O6.B83).initWeaponData.w.lv>=L3.advancedLv;case E5.A7:return App.CM.gtM(O6.C12).soulLv>=L3.advancedLv;case E5.A6:return App.CM.gtM(O6.C12).prestigeLv>=L3.advancedLv;case E5.A5:return App.CM.gtM(O6.C3).fm.t>=L3.advancedLv;case E5.A3:return App.CM.gtM(O6.C3).gn.t>=L3.advancedLv;case E5.A10:return App.CM.gtM(O6.B91).ao.lv>=L3.advancedLv;case E5.A1:return App.CM.gtM(O6.B91).apo.lv>=L3.advancedLv;case E5.A2:return App.CM.gtM(O6.B91).aspo.lv>=L3.advancedLv;case E5.A4:return App.CM.gtM(O6.B91).aso.lv>=L3.advancedLv}},t.FK9=function(t){if(t)switch(t){case E5.A11:return App.CM.gtM(O6.C2).initHorseData.h.lv;case E5.A12:return App.CM.gtM(O6.C18).initWingData.ws[0].t;case E5.A13:return App.CM.gtM(O6.C17).initFaqiData.faqi.lv;case E5.A9:return App.CM.gtM(O6.B83).initWeaponData.w.lv;case E5.A7:return App.CM.gtM(O6.C12).soulLv;case E5.A6:return App.CM.gtM(O6.C12).prestigeLv;case E5.A5:return App.CM.gtM(O6.C3).fm.t;case E5.A3:return App.CM.gtM(O6.C3).gn.t;case E5.A10:return App.CM.gtM(O6.B91).ao.lv;case E5.A1:return App.CM.gtM(O6.B91).apo.lv;case E5.A2:return App.CM.gtM(O6.B91).aspo.lv;case E5.A4:return App.CM.gtM(O6.B91).aso.lv}},t.FD31=function(t){if(t){var e,i,s=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],o=new TF39;o.id=s.id;var r={};switch(t){case E5.A11:return e=App.CM.gtM(O6.C2),o.h=e.initHorseData.h.k,o.bt=BehaviourType.Stand_d,i={id:e.initHorseData.h.k,x:0,y:-18,dir:Dir.br,objType:P13.A6},r.objData=i,r.objModel=o,r;case E5.A12:return e=App.CM.gtM(O6.C18),o.wi=e.initWingData.ws[0].k,o.h=s.h,o.we=s.we,o.bt=BehaviourType.Stand_d,i={id:e.initWingData.ws[0].k,x:0,y:-10,dir:Dir.br,objType:P13.A6},r.objData=i,r.objModel=o,r;case E5.A13:return i={id:(e=App.CM.gtM(O6.C17)).initFaqiData.faqi.k,x:0,y:-10,dir:Dir.br,objType:P13.A6},o.h=s.h,o.wi=s.wi,o.we=s.we,o.f=e.initFaqiData.faqi.k,o.bt=BehaviourType.Stand_d,r.objData=i,r.objModel=o,r;case E5.A9:return e=App.CM.gtM(O6.B83),o.h=s.h,o.wi=s.wi,o.we=e.initWeaponData.w.k,o.bt=BehaviourType.Stand_d,i={id:e.initWeaponData.w.k,x:0,y:-10,dir:Dir.br,objType:P13.A6},r.objData=i,r.objModel=o,r;case E5.A7:e=App.CM.gtM(O6.C12);var n=THH1.FE4(),a=N14.FB72(e.soulLv);return i={id:n,x:0,y:0,dir:Dir.br,objType:P13.A6,ss:a.skin,bt:BehaviourType.Attack_d},r.objData=i,r;case E5.A6:e=App.CM.gtM(O6.C12);var h=THH1.FE4(),p=N14.FA46(e.prestigeLv);return i={id:h,x:0,y:0,dir:Dir.br,objType:P13.A6,ps:p.skin,bt:BehaviourType.Attack_d},r.objData=i,r;case E5.A5:e=App.CM.gtM(O6.C3);var l=M11.FI35(e.fm.t);return i={id:THH23.FF57(e).model,x:0,y:-20,dir:Dir.br,objType:P13.A6,fi:l.skin,bt:BehaviourType.Attack_d},r.objData=i,r;case E5.A3:return r;case E5.A10:return e=App.CM.gtM(O6.B91),i={id:K19.init.initialSkin.value,x:0,y:-20,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d},r.objData=i,r;case E5.A1:return e=App.CM.gtM(O6.B91),(i={id:K19.init.initialSkin.value,x:0,y:-20,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d}).aps=e.apo.s,r.objData=i,r;case E5.A2:return e=App.CM.gtM(O6.B91),i={id:K19.init.initialSkin.value,x:0,y:-20,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d},r.objData=i,r;case E5.A4:return e=App.CM.gtM(O6.B91),(i={id:K19.init.initialSkin.value,x:0,y:-20,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d}).ass=e.aso.s,r.objData=i,r}}},t.FI91=function(t){App.CM.gtM(O6.B95).riseConst=t},t.FG46=function(){App.CM.gtM(O6.B95).riseConst=null},t.FK10=function(){var t=App.CM.gtM(O6.B95);return t.isShowBY[t.riseConst]},t.FK11=function(){var t=App.CM.gtM(O6.B95);t.isShowBY[t.riseConst]=!1},t}();__reflect(TG76.prototype,"TG76");var RevealEverView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.getIndex=1,i.array=[],i.strs=[O3.tr(5742),O3.tr(5743),O3.tr(5744)],i.skinName=RevealEverSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.attrData.dataProvider=this.attrCollection=new eui.ArrayCollection,this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4688))},t.prototype.open=function(t){this.arr=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updateUI();var e=App.CM.gtM(O6.B95);TG76.FD31(e.riseConst);switch(e.riseConst){case E5.A3:this.showImg();break;default:this.setBoss()}},t.prototype.showImg=function(){var t=App.CM.gtM(O6.C3),e=M11.FK75(t.gn.t),i=O1.getSkin(e.skin),s=FightD.AV_RES_PATH+i.type+"/"+i.picture;FightRes.ZS35(this.imgGn,i.picture,s)},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attrCollection.removeAll(),this.model=null,this.array=null,this.nowModel=null,this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.imgGn.source=null},t.prototype.closeSelf=function(){this.apF(M4.A5)},t.prototype.setBoss=function(){var t=App.CM.gtM(O6.B95),e=TG76.FD31(t.riseConst);this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(e.objData),e.objModel?this.objBoss.setData(e.objModel,this.gpBoss):this.objBoss.setData(e.objData,this.gpBoss),this.objBoss.action=Action.Attack;for(var i=this.gpBoss.getChildAt(0),s=0;s<i.numChildren;s++){var o=i.getChildAt(s);switch(t.riseConst){case E5.A11:o.fight_st&&"b"==o.fight_st&&(o.visible=!1)}}switch(t.riseConst){case E5.A6:case E5.A7:case E5.A5:case E5.A3:this.gpBoss.scaleX=this.gpBoss.scaleY=1.3;break;default:this.gpBoss.scaleX=this.gpBoss.scaleY=1}},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B95),e=TG76.FG45(t.riseConst);this.ZJ33(e)},t.prototype.ZJ33=function(t){this.array=[];var e=0;this.getIndex=0,this.getCount(t.lv);for(var i={n0:0,n1:0,n2:0},s=0;s<this.getIndex;s++){var o=L3.FI89(s).starattr,r=N13.getData(o);if(s==t.lv)for(var n=0;n<r.length;n++)for(var a in r[n]){var h=K18.attribute[a].power;e+=parseInt(r[n][a])*h*t.s,0<=(p=L3.strs.indexOf(K18.attribute[a].name))&&(i["n"+p]+=parseInt(r[n][a])*t.s)}else for(n=0;n<r.length;n++)for(var a in r[n]){var p;h=K18.attribute[a].power;e+=parseInt(r[n][a])*h*L3.starNum,0<=(p=L3.strs.indexOf(K18.attribute[a].name))&&(i["n"+p]+=parseInt(r[n][a])*L3.starNum)}}var l=L3.FI89(t.lv).percent;for(var a in this.array.push({name:O3.tr(2406),n0:i.n0,n1:i.n1,n2:i.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.arr){h=K18.attribute[a].power;e+=this.arr[a]*h*l}var c={n0:Math.round(this.arr[101]*l),n1:Math.round(this.arr[102]*l),n2:Math.round(this.arr[103]*l)};this.array.push({name:O3.tr(2407),n0:c.n0,n1:c.n1,n2:c.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.attrCollection.replaceAll(this.array),this.scoreLb.text=Math.round(e)+""},t.prototype.getCount=function(t){L3.FI89(t)&&(this.getIndex+=1,this.getCount(t-1))},t}(BaseEuiView);__reflect(RevealEverView.prototype,"RevealEverView");var RevealPointView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinPower=0,i.getIndex=1,i.array=[],i.strs=[O3.tr(5742),O3.tr(5743),O3.tr(5744)],i.skinName=RevealPointSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbMost.textFlow=M18.HTP.parse(O3.tr(4073)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4074)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4075)),this.btnBreach.label=O3.tr(4076),this.cbAutoSmelt.label=O3.tr(4687),this.lbTitle.text=O3.tr(5862),this.btnAddStar.label=O3.tr(2409)},t.prototype.open=function(t){this.arr=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnBreach.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startBreach,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GK4,this),this.btnAddStar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startAddStar,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.chooseChange,this);var e=App.CM.gtM(O6.B82);this.cbAutoSmelt.selected=-1!=e.setting.indexOf(L17.A23),this.updateUI(),this.ZM20(!0);var i=App.CM.gtM(O6.B95);TG76.FD31(i.riseConst);switch(i.riseConst){case E5.A3:this.showImg();break;default:this.setBoss()}},t.prototype.showImg=function(){var t=App.CM.gtM(O6.C3),e=M11.FK75(t.gn.t),i=O1.getSkin(e.skin),s=FightD.AV_RES_PATH+i.type+"/"+i.picture;FightRes.ZS35(this.imgGn,i.picture,s)},t.prototype.setBoss=function(){var t=App.CM.gtM(O6.B95),e=TG76.FD31(t.riseConst);this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(e.objData),e.objModel?this.objBoss.setData(e.objModel,this.gpBoss):this.objBoss.setData(e.objData,this.gpBoss),this.objBoss.action=Action.Attack;for(var i=this.gpBoss.getChildAt(0),s=0;s<i.numChildren;s++){var o=i.getChildAt(s);switch(t.riseConst){case E5.A11:o.fight_st&&"b"==o.fight_st&&(o.visible=!1)}}switch(t.riseConst){case E5.A6:case E5.A7:case E5.A5:case E5.A3:this.gpBoss.scaleX=this.gpBoss.scaleY=1.3;break;default:this.gpBoss.scaleX=this.gpBoss.scaleY=1}},t.prototype.GK4=function(){this.apF(M4.A8,this.arr)},t.prototype.startBreach=function(){var t=this;if(!this.clickBreach)if(this.clickBreach=!0,egret.Tween.get(this).wait(300).call(function(){t.clickBreach=null}),this.btnBreach.imgNew.visible)this.apF(M4.A2);else if(2987793==this.lbAmount.textColor)P18.sDP(this.lbShort.text);else{var e=this.needBreakNum-this.nowBreakNum;App.VM.open(O7.G87,this.breakItemId,e)}},t.prototype.startAddStar=function(){var t=this;if(!this.clickAddStar)if(this.clickAddStar=!0,egret.Tween.get(this).wait(300).call(function(){t.clickAddStar=null}),this.btnAddStar.imgNew.visible)this.apF(M4.A6,1);else if(2987793==this.lbPay.textColor){if(this.cbAutoSmelt.selected){var e=N15.FA50(this.starItemId),i=N15.FB92(this.starItemId);return O4.FG88(e,2)?void this.apF(M4.A6,2):TG76.FK10()?void this.canExpend():O4.FG88(i,1)?void this.apF(M4.A6,3):void P7.FA78()}var s=this.needNum-this.nowNum;App.VM.open(O7.G87,this.starItemId,s)}else App.VM.open(O7.F12)},t.prototype.canExpend=function(){App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){TG76.FK11()})},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnBreach.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startBreach,this),this.btnAddStar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startAddStar,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GK4,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.chooseChange,this),this.num=null,this.model=null,this.skinPower=null,this.power=null,this.fitDreData=null,this.array=null,this.skinId=null,this.nowModel=null,this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.imgGn.source=null,TG76.FG46(),egret.Tween.removeTweens(this)},t.prototype.ZM20=function(t){this.cbAutoSmelt.touchChildren=t},t.prototype.chooseChange=function(){this.cbAutoSmelt.touchChildren&&(this.ZM20(!1),this.aCF(O6.B82,L13.A24,L17.A23),TG40.playClickEffect())},t.prototype.closeSelf=function(){this.apF(M4.A1)},t.prototype.ZT47=function(t){var e=App.CM.gtM(O6.B95);this.lbNowStar.text=O3.tr(2405,t.lv,t.s);var i=L3.FI89(t.lv);this.lbNowClass.text=this.lbClass.text=O3.tr(2404,t.lv),this.lbNowAdvanced.text=O3.tr(2403,TE12.AdvanceSystemTypeText[e.riseConst],Math.round(100*i.percent));var s=L3.FI89(t.lv+1);if(s?(this.grpAttr.visible=this.lbNextClass.visible=!0,this.lbMost.visible=!1,this.lbNextClass.text=O3.tr(2404,t.lv+1),this.lbNextAdvanced.text=O3.tr(2403,TE12.AdvanceSystemTypeText[e.riseConst],Math.round(100*s.percent))):(this.lbMost.visible=!0,this.grpAttr.visible=this.lbNextClass.visible=!1),t.s==L3.starNum){if(s&&(this.lbNextStar.text=O3.tr(2405,t.lv+1,0)),0<i.advancelv){this.lbMost.bottom=20,this.grpNext.visible=!0,this.cbAutoSmelt.visible=!1,this.lbShort.visible=!0,this.grpExpend.visible=!0,this.btnAddStar.label=O3.tr(2409),P16.sGF(this.btnAddStar,!1),this.lbShort.text=O3.tr(2400,TE12.AdvanceSystemTypeText[e.riseConst],i.advancelv);var o=i.breakcost.split(":"),r=N12.giC(parseInt(o[0])),n=N12.gID(o[0]);this.imgDan.setData(n),this.lbAmount.text=O3.tr(2410,r,o[1]),this.lbAmount.textColor=r>=parseInt(o[1])?2987793:15669836,this.needBreakNum=parseInt(o[1]),this.nowBreakNum=r,this.breakItemId=n.id,this.grpCost.visible=!1,this.btnBreach.visible=!0,this.btnAddStar.visible=!1;var a=TG76.FK9(e.riseConst);this.btnBreach.imgNew.visible=2987793==this.lbAmount.textColor&&a>=i.advancelv,this.lbShort.textColor=a>=i.advancelv?2987793:15669836}else this.grpNext.visible=!1,this.grpExpend.visible=!1,this.btnAddStar.label=O3.tr(2408),P16.sGF(this.btnAddStar,!0),this.cbAutoSmelt.visible=!0,this.lbShort.visible=!1,this.lbMost.bottom=88;this.grpImg.visible=!1}else{this.lbNextStar.text=O3.tr(2405,t.lv,t.s+1),this.lbShort.visible=!1,this.cbAutoSmelt.visible=!0,this.btnBreach.visible=!1,this.btnAddStar.visible=!0,this.grpCost.visible=!0,this.grpImg.visible=!0;var h=i.starcost.split(":"),p=N12.gID(N12.itemId.coin),l=N12.giC(parseInt(h[0])),c=TG76.FI90(e.riseConst),u=TG76.FHH65(e.riseConst);n=N12.gID(c);this.imgDan.setData(n);var d=N12.giC(c)+u;this.imgGlod.setData(p),this.lbAmount.text=O3.tr(2410,d,i.pillcost),this.lbAmount.textColor=d>=i.pillcost?2987793:15669836,this.needNum=i.pillcost,this.nowNum=d,this.starItemId=c,this.lbPay.text=h[1],this.lbPay.textColor=l>=parseInt(h[1])?2987793:15669836,this.btnAddStar.imgNew.visible=2987793==this.lbAmount.textColor&&2987793==this.lbPay.textColor}for(var v=this.grpImgSt.numChildren,f=0;f<v;f++){this.grpImgSt.getChildAt(f).source=t.s>=f+1?"v1_img_star1_png":"v1_img_star2_png"}},t.prototype.ZJ33=function(t){var e=0;this.getIndex=0,this.getCount(t.lv);for(var i={101:0,102:0,103:0},s={101:0,102:0,103:0},o=0;o<this.getIndex;o++){var r=L3.FI89(o).starattr,n=N13.getData(r);if(o==t.lv)for(var a=0;a<n.length;a++)for(var h in n[a]){var p=K18.attribute[h].power;e+=parseInt(n[a][h])*p*t.s,0<=(l=L3.strs.indexOf(K18.attribute[h].name))&&(i["10"+(l+1)]+=parseInt(n[a][h])*t.s,t.s==L3.starNum?s["10"+(l+1)]+=parseInt(n[a][h])*t.s:s["10"+(l+1)]+=parseInt(n[a][h])*(t.s+1))}else for(a=0;a<n.length;a++)for(var h in n[a]){var l;p=K18.attribute[h].power;e+=parseInt(n[a][h])*p*L3.starNum,0<=(l=L3.strs.indexOf(K18.attribute[h].name))&&(i["10"+(l+1)]+=parseInt(n[a][h])*L3.starNum,t.s,L3.starNum,s["10"+(l+1)]+=parseInt(n[a][h])*L3.starNum)}}var c=L3.FI89(t.lv).percent;for(var h in this.arr){p=K18.attribute[h].power;e+=parseInt(this.arr[h])*p*c}this.scoreLb.text=Math.round(e)+"";var u="";for(var h in i)u+=O3.tr(2401,K18.attribute[h].name,i[h]);this.lbNowAttr.textFlow=M18.HTP.parser(u);var d="";for(var h in s)d+="103"==h?O3.tr(2402,K18.attribute[h].name,s[h]):O3.tr(2401,K18.attribute[h].name,s[h]);this.lbNextAttr.textFlow=M18.HTP.parser(d)},t.prototype.updateUI=function(){App.CM.gtM(O6.B98),App.CM.gtM(O6.C18).initWingData;var t=App.CM.gtM(O6.B95),e=TG76.FG45(t.riseConst);this.ZT47(e),this.ZJ33(e)},t.prototype.getCount=function(t){L3.FI89(t)&&(this.getIndex+=1,this.getCount(t-1))},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.updateUI(),t instanceof TG12)switch(e){case P4.S94:this.ZM20(!0)}},t}(BaseEuiView);__reflect(RevealPointView.prototype,"RevealPointView");var RevealConfVo=function(){function t(t){this.updateData(t)}return t.prototype.updateData=function(t){t&&(this.target=null!=t.t?t.t:this.target,this.rewardList=null!=t.rw?t.rw:this.rewardList)},t.prototype.getTarget=function(){return this.target},t.prototype.getList=function(){return this.rewardList},t}();__reflect(RevealConfVo.prototype,"RevealConfVo");var RevealVo=function(){function t(t){this.initActData(t)}return t.prototype.initActData=function(t){t&&(this.lv=null!=t.lv?t.lv:this.lv,this.s=null!=t.s?t.s:this.s,this.sys=null!=t.sys?t.sys:this.sys)},t}();__reflect(RevealVo.prototype,"RevealVo");var _a,N15=function(){function st(){}return st.FK35=function(t){st.init=t.shop_init,st.base=t.shop_base,st.equip=t.shop_equip,st.material=t.shop_material,st.autobuy=t.shop_autobuy,st.star=t.shop_star,st.arena=t.shop_arena,st.answer=t.shop_answer,st.friends=t.shop_friends,st.single=t.shop_single,st.people=t.shop_people,st.escort=t.shop_escort,st.leg=t.shop_leg,st.legwelfare=t.shop_legwelfare,st.partner=t.shop_partner,st.shudao=t.shop_shudao,st.arena_fuli=t.shop_arena_fuli,st.skin=t.shop_skin,st.menghuo=t.shop_menghuo,st.teacher=t.shop_teacher,st.invite=t.shop_share,st.duel=t.shop_duel,st.quick=t.shop_qucik,st.comeback=t.shop_comeback,st.fabao=t.shop_fabao,st.library=t.shop_library,st.doublering=t.shop_double,st.loveshop=t.shop_loveshop,st.cliff=t.shop_cliff,st.legionduel=t.shop_legionduel,st.classup=t.shop_classup,st.herocomp=t.shop_herocomp,st.HeroStarShop=t.shop_illustrationshop,st.artifactshop=t.shop_artifactshop,st.merit=t.shop_merit},st.FA50=function(t){var e=-1;if(!st.autobuy)return e;for(var i in st.autobuy){var s=st.autobuy[i];if(1==s.type&&s.item==t){e=s.price;break}}return e},st.FB92=function(t){var e=-1;if(!st.autobuy)return e;for(var i in st.autobuy){var s=st.autobuy[i];if(2==s.type&&s.item==t){e=s.price;break}}return e},st.FL12=function(t){var e=st.FA50(t);return"number"==typeof e&&-1!=e||"number"==typeof(e=st.FB92(t))&&-1!=e},st.FB93=function(t){var e={};for(var i in st.autobuy){var s=st.autobuy[i];if(s.type==t){var o=s;e[s.index]=o}}return e},st.FA19=function(t,e){var i=void 0;if(!st.autobuy)return i;for(var s in st.autobuy){var o=st.autobuy[s];if(o.type==t&&o.item==e){i=o;break}}return i},st.FHH66=function(t){var i=this,e=this.ZJ34(),s=new Array,o=App.CM.gtM(O6.B43).serOpenDay+1,r=O4.FF89(L17.A42);if(st.FK13(P12.A26)==t&&-1==e.indexOf(P12.A26)){var n={};n.shopid=P12.A26,n.text=O3.tr(5692),n.bg="v1_img_wukuangdi_js_png",n.selected=0,n.nameicon="",n.icon=st.FK12(P12.A26),n.type=st.FK13(P12.A26),n.red=0;var a=st.init.arenaMoney.value;n.showid=Number(a),n.showicon=N12.FJ86(a),s.push(n)}if(st.FK13(P12.A14)==t&&-1==e.indexOf(P12.A14)){var h={};h.shopid=P12.A14,h.text=O3.tr(5693),h.bg="v1_img_wukuangdi_js_png",h.selected=0,h.nameicon="",h.icon=st.FK12(P12.A14),h.type=st.FK13(P12.A14),h.red=!r&&0<THH27.FD37()?"v1_img_hongdiantishi_png":"";var p=st.init.teacherMoney.value;h.showid=Number(p),h.showicon=N12.FJ86(p),s.push(h)}if(st.FK13(P12.A31)==t&&-1==e.indexOf(P12.A31)){var l={};l.shopid=P12.A31,l.text=O3.tr(5694),l.bg="v1_img_wukuangdi_js_png",l.selected=0,l.nameicon="",l.icon=st.FK12(P12.A31),l.type=st.FK13(P12.A31),l.red=0;var c=st.init.legMoney.value;l.showid=Number(c),l.showicon=N12.FJ86(c),s.push(l)}if(st.FK13(P12.A22)==t&&-1==e.indexOf(P12.A22)){(et={}).shopid=P12.A22,et.text=O3.tr(5695),et.bg="v1_img_wukuangdi_js_png",et.selected=0,et.nameicon="v1_fonts_zhuangbeishangdian_png",et.icon=st.FK12(P12.A22),et.type=st.FK13(P12.A22),et.red=0,et.view=O7.HH28;var u=st.init.equipMoney.value;et.showid=Number(u),et.showicon=N12.FJ86(u),s.push(et)}if(st.FK13(P12.A13)==t&&-1==e.indexOf(P12.A13)){var d={};d.shopid=P12.A13,d.text=O3.tr(5696),d.bg="v1_img_wukuangdi_js_png",d.selected=0,d.nameicon="",d.icon=st.FK12(P12.A13),d.type=st.FK13(P12.A13),d.red=0;var v=st.init.bindingMoney.value;d.showid=Number(v),d.showicon=N12.FJ86(v),s.push(d)}if(st.FK13(P12.A29)==t&&-1==e.indexOf(P12.A29)&&("PM001109"!=platform.gameId||"2"!=window.isPayType)){var f={};f.shopid=P12.A29,f.text=O3.tr(5697),f.bg="v1_img_wukuangdi_js_png",f.selected=0,f.nameicon="",f.icon=st.FK12(P12.A29),f.type=st.FK13(P12.A29),f.red=0;var g=st.init.goldMoney.value;f.showid=Number(g),f.showicon=N12.FJ86(g),s.push(f)}if(st.FK13(P12.A23)==t&&-1==e.indexOf(P12.A23)){var m={};m.shopid=P12.A23,m.text=O3.tr(5698),m.bg="v1_img_wukuangdi_js_png",m.selected=0,m.nameicon="",m.icon=st.FK12(P12.A23),m.type=st.FK13(P12.A23),m.red=0;var y=st.init.womanMoney.value;m.showid=Number(y),m.showicon=N12.FJ86(y),s.push(m)}if(st.FK13(P12.A24)==t&&-1==e.indexOf(P12.A24)&&("PM001109"!=platform.gameId||"2"!=window.isPayType)){var A={};A.shopid=P12.A24,A.text=O3.tr(5699),A.bg="v1_img_wukuangdi_js_png",A.selected=0,A.nameicon="",A.icon=st.FK12(P12.A24),A.type=st.FK13(P12.A24),A.red=0;var b=st.init.dressMoney.value;A.showid=Number(b),A.showicon=N12.FJ86(b),s.push(A),s=s.sort(st.FL94)}if(st.FK13(P12.A9)==t&&-1==e.indexOf(P12.A9)){var T={};T.shopid=P12.A9,T.text=O3.tr(5700),T.bg="v1_img_wukuangdi_js_png",T.selected=0,T.nameicon="",T.icon=st.FK12(P12.A9),T.type=st.FK13(P12.A9),T.red=!r&&0<THH27.FC59()?"v1_img_hongdiantishi_png":"";var C=st.init.materialMoney.value;T.showid=Number(C),T.showicon=N12.FJ86(C),s.push(T)}if(st.FK13(P12.A17)==t&&-1==e.indexOf(P12.A17)){var w={};w.shopid=P12.A17,w.text=O3.tr(5701),w.bg="v1_img_wukuangdi_js_png",w.selected=0,w.nameicon="",w.icon=st.FK12(P12.A17),w.type=st.FK13(P12.A17),w.red=!r&&0<THH27.FE32()?"v1_img_hongdiantishi_png":"";var O=st.init.friendMoney.value;w.showid=Number(O),w.showicon=N12.FJ86(O),s.push(w)}if(st.FK13(P12.A20)==t&&-1==e.indexOf(P12.A20)){var M={};M.shopid=P12.A20,M.text=O3.tr(5702),M.bg="v1_img_wukuangdi_js_png",M.selected=0,M.nameicon="",M.icon=st.FK12(P12.A20),M.type=st.FK13(P12.A20),M.red=!r&&0<THH27.FE34()?"v1_img_hongdiantishi_png":"";var _=st.init.peopleMoney.value;M.showid=Number(_),M.showicon=N12.FJ86(_),s.push(M)}if(st.FK13(P12.A32)==t&&-1==e.indexOf(P12.A32)){var F={};F.shopid=P12.A32,F.text=O3.tr(5703),F.bg="v1_img_wukuangdi_js_png",F.selected=0,F.nameicon="",F.icon=st.FK12(P12.A32),F.type=st.FK13(P12.A32),F.red=!r&&0<THH27.FE35()?"v1_img_hongdiantishi_png":"";var E=st.init.ownMoney.value;F.showid=Number(E),F.showicon=N12.FJ86(E),s.push(F)}if(st.FK13(P12.A18)==t&&-1==e.indexOf(P12.A18)){var P={};P.shopid=P12.A18,P.text=O3.tr(5704),P.bg="v1_img_wukuangdi_js_png",P.selected=0,P.nameicon="",P.icon=st.FK12(P12.A18),P.type=st.FK13(P12.A18),P.red=!r&&0<THH27.FE36()?"v1_img_hongdiantishi_png":"";var L=st.init.escortMoney.value;P.showid=Number(L),P.showicon=N12.FJ86(L),s.push(P)}if(st.FK13(P12.A5)==t&&-1==e.indexOf(P12.A5)){var S={};S.shopid=P12.A5,S.text=O3.tr(5705),S.bg="v1_img_wukuangdi_js_png",S.selected=0,S.nameicon="",S.icon=st.FK12(P12.A5),S.type=st.FK13(P12.A5),S.red=!r&&0<THH27.FB36()?"v1_img_hongdiantishi_png":"";var I=st.init.legWelfareMoney.value;S.showid=Number(I),S.showicon=N12.FJ86(I),s.push(S)}if(st.FK13(P12.A30)==t&&-1==e.indexOf(P12.A30)){var H={};H.shopid=P12.A30,H.text=O3.tr(5706),H.bg="v1_img_wukuangdi_js_png",H.selected=0,H.nameicon="",H.icon=st.FK12(P12.A30),H.type=st.FK13(P12.A30),H.red=!r&&0<THH27.FE37()?"v1_img_hongdiantishi_png":"";var D=st.init.starMoney.value;H.showid=Number(D),H.showicon=N12.FJ86(D),s.push(H)}if(st.FK13(P12.A2)==t&&-1==e.indexOf(P12.A2)){var B={};B.shopid=P12.A2,B.text=O3.tr(5707),B.bg="v1_img_wukuangdi_js_png",B.selected=0,B.nameicon="",B.icon=st.FK12(P12.A2),B.type=st.FK13(P12.A2),B.red=!r&&0<THH27.FB96()?"v1_img_hongdiantishi_png":"";var G=st.init.arenaWelfareMoney.value;B.showid=Number(G),B.showicon=N12.FJ86(G),s.push(B)}if(st.FK13(P12.A19)==t&&-1==e.indexOf(P12.A19)){var x={};x.shopid=P12.A19,x.text=O3.tr(5708),x.bg="v1_img_wukuangdi_js_png",x.selected=0,x.nameicon="",x.icon=st.FK12(P12.A19),x.type=st.FK13(P12.A19),x.red=!r&&0<THH27.FE38()?"v1_img_hongdiantishi_png":"";var k=st.init.answerMoney.value;x.showid=Number(k),x.showicon=N12.FJ86(k),s.push(x)}if(st.FK13(P12.A15)==t&&-1==e.indexOf(P12.A15)){var V={};V.shopid=P12.A15,V.text=O3.tr(5709),V.bg="v1_img_wukuangdi_js_png",V.selected=0,V.nameicon="",V.icon=st.FK12(P12.A15),V.type=st.FK13(P12.A15),V.red=!r&&0<THH27.FD38()?"v1_img_hongdiantishi_png":"";var R=st.init.sevenMoney.value;V.showid=Number(R),V.showicon=N12.FJ86(R),s.push(V)}if(st.FK13(P12.A21)==t&&-1==e.indexOf(P12.A21)&&App.CM.gtM(O6.C14).isShopinvite){var N={};N.shopid=P12.A21,N.text=O3.tr(5710),N.bg="v1_img_wukuangdi_js_png",N.selected=0,N.nameicon="v1_fonts_yaoqing_png",N.icon=st.FK12(P12.A21),N.type=st.FK13(P12.A21),N.red=!r&&0<THH27.FE33()?"v1_img_hongdiantishi_png":"";var U=st.init.shareMoney.value;N.showid=Number(U),N.showicon=N12.FJ86(U),s.push(N)}if(st.FK13(P12.A8)==t&&-1==e.indexOf(P12.A8)){var Z={};Z.shopid=P12.A8,Z.text=O3.tr(5711),Z.bg="v1_img_wukuangdi_js_png",Z.selected=0,Z.nameicon="",Z.icon=st.FK12(P12.A8),Z.type=st.FK13(P12.A8),Z.red="";var K=st.init.duelMoney.value;Z.showid=Number(K),Z.showicon=N12.FJ86(K),s.push(Z)}if(st.FK13(P12.A7)==t&&-1==e.indexOf(P12.A7)){var q={};q.shopid=P12.A7,q.text=O3.tr(7584),q.bg="v1_img_wukuangdi_js_png",q.selected=0,q.nameicon="",q.icon=st.FK12(P12.A7),q.type=st.FK13(P12.A7),q.red="";K=st.init.cliffMoney.value;q.showid=Number(K),q.showicon=N12.FJ86(K),s.push(q)}if(st.FK13(P12.A4)==t&&-1==e.indexOf(P12.A4)){var J={};J.shopid=P12.A4,J.text=O3.tr(7933),J.bg="v1_img_wukuangdi_js_png",J.selected=0,J.nameicon="",J.icon=st.FK12(P12.A4),J.type=st.FK13(P12.A4),J.red="";K=st.init.meritMoney.value;J.showid=Number(K),J.showicon=N12.FJ86(K),s.push(J)}if(st.FK13(P12.A10)==t&&-1==e.indexOf(P12.A10)&&o>=TE62.FE59("afkDuration")){var j={};j.shopid=P12.A10,j.text=O3.tr(6336),j.bg="v1_img_wukuangdi_js_png",j.selected=0,j.nameicon="",j.icon=st.FK12(P12.A10),j.type=st.FK13(P12.A10),j.red=!r&&0<THH27.FC58()?"v1_img_hongdiantishi_png":"";var W=st.init.combackMoney.value;j.showid=Number(W),j.showicon=N12.FJ86(W),s.push(j)}if(st.FK13(P12.A16)==t&&-1==e.indexOf(P12.A16)){var X={};X.shopid=P12.A16,X.text=O3.tr(6960),X.bg="v1_img_wukuangdi_js_png",X.selected=0,X.nameicon="v1_fonts_yaoqing_png",X.icon=st.FK12(P12.A16),X.type=st.FK13(P12.A16),X.red="";U=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A16]].value;X.showid=Number(U),X.showicon=N12.FJ86(U),s.push(X)}if(st.FK13(P12.A6)==t&&-1==e.indexOf(P12.A6)&&App.CM.gtM(O6.A38).openState){var Q={};Q.shopid=P12.A6,Q.text=O3.tr(7014),Q.bg="v1_img_wukuangdi_js_png",Q.selected=0,Q.nameicon="v1_fonts_yaoqing_png",Q.icon=st.FK12(P12.A6),Q.type=st.FK13(P12.A6),Q.red=!r&&0<THH27.FB37()?"v1_img_hongdiantishi_png":"";U=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A6]].value;Q.showid=parseInt(U),Q.showicon=N12.FJ86(U),s.push(Q)}if(st.FK13(P12.A28)==t&&-1==e.indexOf(P12.A28)){var Y={};Y.shopid=P12.A28,Y.text=O3.tr(7410),Y.bg="v1_img_wukuangdi_js_png",Y.selected=0,Y.nameicon="v1_fonts_yaoqing_png",Y.icon=st.FK12(P12.A28),Y.type=st.FK13(P12.A28),Y.red=!r&&0<THH27.FF46()?"v1_img_hongdiantishi_png":"";U=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A28]].value;Y.showid=parseInt(U),Y.showicon=N12.FJ86(U),s.push(Y)}if(st.FK13(P12.A12)==t&&-1==e.indexOf(P12.A12)&&App.CM.gtM(O6.A94).openState){var z={};z.shopid=P12.A12,z.text=O3.tr(8497),z.bg="v1_img_wukuangdi_js_png",z.selected=0,z.nameicon="v1_fonts_yaoqing_png",z.icon=st.FK12(P12.A12),z.type=st.FK13(P12.A12),z.red=!r&&0<THH27.FC60()?"v1_img_hongdiantishi_png":"";U=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A12]].value;z.showid=parseInt(U),z.showicon=N12.FJ86(U),s.push(z)}if(st.FK13(P12.A11)==t&&-1==e.indexOf(P12.A11)){var $={};$.shopid=P12.A11,$.text=O3.tr(7932),$.bg="v1_img_wukuangdi_js_png",$.selected=0,$.nameicon="v1_fonts_yaoqing_png",$.icon=st.FK12(P12.A11),$.type=st.FK13(P12.A11),$.red=!r&&THH27.FG48()?"v1_img_hongdiantishi_png":"";U=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A11]].value;$.showid=parseInt(U),$.showicon=N12.FJ86(U),s.push($)}if(st.FK13(P12.A1)==t&&-1==e.indexOf(P12.A1)){var tt={};tt.shopid=P12.A1,tt.text=O3.tr(8022),tt.bg="v1_img_wukuangdi_js_png",tt.selected=0,tt.nameicon="",tt.icon=st.FK12(P12.A1),tt.type=st.FK13(P12.A1),tt.red="";K=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A1]].value;tt.showid=parseInt(K),tt.showicon=N12.FJ86(K),s.push(tt)}if(st.FK13(P12.A3)==t&&-1==e.indexOf(P12.A3)){(et={}).shopid=P12.A3,et.text=O3.tr(8735),et.bg="v1_img_wukuangdi_js_png",et.selected=0,et.nameicon="v1_fonts_zhuangbeishangdian_png",et.icon=st.FK12(P12.A3),et.type=st.FK13(P12.A3),et.red=0,et.view=O7.B70;u=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.A3]].value;et.showid=Number(u),et.showicon=N12.FJ86(u),s.push(et)}if(st.FK13(P12.HEROBATTLE_SHOP)==t&&-1==e.indexOf(P12.HEROBATTLE_SHOP)){var et;(et={}).shopid=P12.HEROBATTLE_SHOP,et.text=O3.tr(8999),et.bg="v1_img_wukuangdi_js_png",et.selected=0,et.nameicon="v1_fonts_zhuangbeishangdian_png",et.icon=st.FK12(P12.HEROBATTLE_SHOP),et.type=st.FK13(P12.HEROBATTLE_SHOP),et.red=!r&&THH27.FB38(P12.HEROBATTLE_SHOP)?"v1_img_hongdiantishi_png":"";u=st.init[st.SHOPTYPE_TO_SHOPKEY[P12.HEROBATTLE_SHOP]].value;et.showid=Number(u),et.showicon=N12.FJ86(u),s.push(et)}s.sort(st.FL94);var it=App.CM.gtM(O6.B82);return s.forEach(function(t,e){t.index=e,it.avatarInfo.l>=i.FG47(t.shopid)?t.open=!0:t.open=!1}),s},st.ZJ34=function(){var t=new Array,e=App.CM.gtM(O6.A16);return null!=e&&e.openState&&t.push(P12.A24),t},st.FL94=function(t,e){var i=st.base[t.shopid],s=st.base[e.shopid],o=App.CM.gtM(O6.B82).avatarInfo.l;return o>=i.level&&o>=s.level?i.sort-s.sort:o<i.level&&o<s.level?i.sort-s.sort:o>=i.level?-1:o>=s.level?1:0},st.FK12=function(t){return st.base[t]?st.base[t].icon:""},st.FK13=function(t){return st.base[t].type},st.FG47=function(t){return st.base[t].level},st.FK14=function(t){return st.base[t]},st.FE25=function(t){var e=[];for(var i in st.base){var s=st.base[i];s.type==t&&e.push(s.shopid)}return e},st.getQuickShopList=function(t){var e=st.SHOPTYPE_TO_SHOPKEY[t],i=[];for(var s in st.quick){var o=st.quick[s];e===o.type&&i.push(o.item)}return i},st.hasQuickShopList=function(t,e){return!!(0<=st.getQuickShopList(t).indexOf(e)&&st.FB6(t))},st.FB6=function(t){switch(t){case P12.A22:return st.equip;case P12.A29:case P12.A13:return st.base;case P12.A23:return st.partner;case P12.A30:return st.star;case P12.A31:return st.leg;case P12.A5:return st.legwelfare;case P12.A24:return st.skin;case P12.A17:return st.friends;case P12.A14:return st.teacher;case P12.A26:return st.arena;case P12.A2:return st.arena_fuli;case P12.A18:return st.escort;case P12.A19:return st.answer;case P12.A32:return st.single;case P12.A20:return st.people;case P12.A15:return st.menghuo;case P12.A9:return st.material;case P12.A21:return st.invite;case P12.A8:return st.duel;case P12.A10:return st.comeback;case P12.A27:return st.fabao;case P12.A16:return st.library;case P12.A6:return st.doublering;case P12.A28:return st.loveshop;case P12.A11:return st.HeroStarShop;case P12.A1:return st.legionduel;case P12.A12:return st.artifactshop;case P12.A3:return st.classup;case P12.HEROBATTLE_SHOP:return st.herocomp}},st.getShopItemDataByShopType$Index=function(t,e){var i=st.FB6(t);if(i)return i[e]},st.SHOPTYPE_TO_SHOPKEY=((_a={})[P12.A19]="answerMoney",_a[P12.A26]="arenaMoney",_a[P12.A2]="arenaWelfareMoney",_a[P12.A13]="bindingMoney",_a[P12.A25]="crossMoney",_a[P12.A8]="duelMoney",_a[P12.A24]="dressMoney",_a[P12.A22]="equipMoney",_a[P12.A18]="escortMoney",_a[P12.A17]="friendMoney",_a[P12.A29]="goldMoney",_a[P12.A21]="shareMoney",_a[P12.A31]="legMoney",_a[P12.A5]="legWelfareMoney",_a[P12.A9]="materialMoney",_a[P12.A15]="sevenMoney",_a[P12.A32]="ownMoney",_a[P12.A20]="peopleMoney",_a[P12.A30]="starMoney",_a[P12.A14]="teacherMoney",_a[P12.A23]="womanMoney",_a[P12.A10]="combackMoney",_a[P12.A27]="fabaoMoney",_a[P12.A16]="libraryMoney",_a[P12.A6]="doubleMoney",_a[P12.A28]="loveMoney",_a[P12.A11]="illustrationMoney",_a[P12.A7]="cliffMoney",_a[P12.A4]="meritMoney",_a[P12.A1]="legionduelMoney",_a[P12.A12]="artifactMoney",_a[P12.A3]="classupMoney",_a[P12.HEROBATTLE_SHOP]="herocompMoney",_a),st.SHOPKEY_TO_SHOPTYPE={answerMoney:P12.A19,arenaMoney:P12.A26,arenaWelfareMoney:P12.A2,bindingMoney:P12.A13,crossMoney:P12.A25,duelMoney:P12.A8,dressMoney:P12.A24,equipMoney:P12.A22,escortMoney:P12.A18,friendMoney:P12.A17,goldMoney:P12.A29,shareMoney:P12.A21,legMoney:P12.A31,legWelfareMoney:P12.A5,materialMoney:P12.A9,sevenMoney:P12.A15,ownMoney:P12.A32,peopleMoney:P12.A20,starMoney:P12.A30,teacherMoney:P12.A14,womanMoney:P12.A23,combackMoney:P12.A10,fabaoMoney:P12.A27,libraryMoney:P12.A16,doubleMoney:P12.A6,loveMoney:P12.A28,illustrationMoney:P12.A11,cliffMoney:P12.A7,meritMoney:P12.A4,legionduelMoney:P12.A1,artifactMoney:P12.A12,classupMoney:P12.A3,herocompMoney:P12.HEROBATTLE_SHOP},st}();__reflect(N15.prototype,"N15");var O11=function(){function t(){}return t.A65=10001,t.A66=10002,t.A45=10003,t.A46=10004,t.A21=10005,t.A22=10006,t.A29=10007,t.A30=10008,t.A31=10009,t.A32=10010,t.A11=10011,t.A12=10012,t.A33=10013,t.A34=10014,t.A35=10015,t.A36=10016,t.A1=10017,t.A2=10018,t.A47=10019,t.A48=10020,t.A57=10021,t.A58=10022,t.A13=10023,t.A14=10024,t.A64=10025,t.A49=10026,t.A50=10027,t.A37=10028,t.A38=10029,t.A7=10030,t.A8=10031,t.A39=10032,t.A40=10033,t.A59=10034,t.A60=10035,t.A23=10036,t.A24=10037,t.A25=10038,t.A26=10039,t.A61=10040,t.A41=10041,t.A42=10042,t.A62=10043,t.A63=10044,t.A15=10045,t.A16=10046,t.A51=10047,t.A52=10048,t.A27=10049,t.A28=10050,t.A43=10051,t.A44=10052,t.A53=10053,t.A54=10054,t.A17=10055,t.A18=10056,t.A9=10057,t.A10=10058,t.A55=10059,t.A56=10060,t.A3=10061,t.A4=10062,t.A19=10063,t.A20=10064,t.A5=10065,t.A6=10066,t.SHOP_HEROBATTLE_BUY_REQ=10067,t.SHOP_HEROBATTLE_BUY_RES=10068,t}();__reflect(O11.prototype,"O11");var TE96=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I45,"ShopBuyView",t,K17.UI_Popup),App.VM.register(O7.E82,"ShopBuyEquipView",t,K17.UI_Popup),App.VM.register(O7.HH98,"ShopMainNewView",t,K17.UI_Main_TOP),t.shopProxy=new THH15(t);var e=new THH14(t);return e.aLV(O7.HH98),e.aLV(O7.HH28),e.aLV(O7.B70),e.aLV(O7.G57),e.aLV(O7.I3),e.aLV(O7.HH29),e.aLV(O7.E72),e.aLV(O7.D14),e.aLV(O7.G75),e.aLV(O7.G76),e.aLV(O7.I64),e.aLV(O7.G49),e.aLV(O7.G51),e.aLV(O7.G44),e.aLV(O7.HH36),e.aLV(O7.G62),e.aLV(O7.HH33),e.aLV(O7.F78),e.aLV(TF59.FA34(F7.A61)),e.aLV(O7.B84),e.aLV(O7.F65),e.aLV(O7.G89),e.aLV(O7.G90),e.aLV(O7.I22),e.aLV(O7.I47),e.aLV(O7.HH58),e.aLV(O7.HH25),e.aLV(O7.B73),e.aLV(O7.E1),e.aLV(O7.HH96),e.aLV(O7.B76),e.aLV(O7.E90),e.aLV(O7.HH65),e.aLV(O7.HH99),e.aLV(O7.G23),e.aLV(O7.C38),e.aLV(O7.I63),e.aLV(O7.I39),e.aLV(O7.B68),e.aLV(O7.HH79),e.aLV(TF59.FA34(F7.A26)),e.aLV(O7.D63),e.aLV(O7.E6),e.aLV(O7.F40),e.aLV(O7.I66),e.aLV(O7.E73),e.aLV(O7.D71),t.rgF(O11.A64,t.GT65,t),t.rgF(O11.A61,t.GP60,t),t.rgF(O11.A65,t.GW62,t),t.rgF(O11.A66,t.GW63,t),t.rgF(O11.A45,t.GP61,t),t.rgF(O11.A46,t.GP62,t),t.rgF(O11.A21,t.GN70,t),t.rgF(O11.A22,t.GN71,t),t.rgF(O11.A31,t.GN72,t),t.rgF(O11.A32,t.GN73,t),t.rgF(O11.A29,t.GT66,t),t.rgF(O11.A30,t.GT67,t),t.rgF(O11.A11,t.GK5,t),t.rgF(O11.A12,t.GK6,t),t.rgF(O11.A33,t.GN74,t),t.rgF(O11.A34,t.GN75,t),t.rgF(O11.A35,t.GN76,t),t.rgF(O11.A36,t.GN77,t),t.rgF(O11.A1,t.GG30,t),t.rgF(O11.A2,t.GG31,t),t.rgF(O11.A47,t.GP63,t),t.rgF(O11.A48,t.GP64,t),t.rgF(O11.A13,t.GK7,t),t.rgF(O11.A14,t.GK8,t),t.rgF(O11.A57,t.GR51,t),t.rgF(O11.A58,t.GR52,t),t.rgF(O11.A49,t.GP65,t),t.rgF(O11.A50,t.GP66,t),t.rgF(O11.A37,t.GN78,t),t.rgF(O11.A38,t.GN79,t),t.rgF(O11.A7,t.GI12,t),t.rgF(O11.A8,t.GI13,t),t.rgF(O11.A39,t.GN80,t),t.rgF(O11.A40,t.GN81,t),t.rgF(O11.A59,t.GR53,t),t.rgF(O11.A60,t.GR54,t),t.rgF(O11.A23,t.GL83,t),t.rgF(O11.A24,t.GL84,t),t.rgF(O11.A25,t.GL85,t),t.rgF(O11.A26,t.GL86,t),t.rgF(O11.A41,t.GN82,t),t.rgF(O11.A42,t.GN83,t),t.rgF(O11.A62,t.GR55,t),t.rgF(O11.A63,t.GR56,t),t.rgF(O11.A15,t.GK9,t),t.rgF(O11.A16,t.GK10,t),t.rgF(O11.A51,t.GP67,t),t.rgF(O11.A52,t.GP68,t),t.rgF(O11.A27,t.shopProxy.ZJ35,t.shopProxy),t.rgF(O11.A28,t.GL87,t),t.rgF(O11.A43,t.shopProxy.ZE42,t.shopProxy),t.rgF(O11.A44,t.GG32,t),t.rgF(O11.A53,t.shopProxy.ZP58,t.shopProxy),t.rgF(O11.A54,t.GP69,t),t.rgF(O11.A27,t.shopProxy.ZJ35,t.shopProxy),t.rgF(O11.A28,t.GL87,t),t.rgF(O11.A17,t.shopProxy.ZHH25,t.shopProxy),t.rgF(O11.A18,t.GK11,t),t.rgF(O11.A9,t.shopProxy.GG33,t.shopProxy),t.rgF(O11.A10,t.GG33,t),t.rgF(O11.A55,t.shopProxy.GG34,t.shopProxy),t.rgF(O11.A56,t.GG34,t),t.rgF(O11.A3,t.shopProxy.GC13,t.shopProxy),t.rgF(O11.A4,t.GC13,t),t.rgF(O11.A19,t.shopProxy.GK12,t.shopProxy),t.rgF(O11.A20,t.GK12,t),t.rgF(O11.A5,t.shopProxy.GL88,t.shopProxy),t.rgF(O11.A6,t.GL88,t),t.rgF(O11.SHOP_HEROBATTLE_BUY_REQ,t.shopProxy.herobattleShopBuyReq,t.shopProxy),t.rgF(O11.SHOP_HEROBATTLE_BUY_RES,t.herobattleShopBuyRes,t),t}return __extends(t,i),t.prototype.GT65=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZY4(t.body),e.notify(P4.W37)}else{var i=K18.getTips(t.head.state);P18.sDP(i)}},t.prototype.GP60=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.ZT48(t.body),e.notify(P4.U60)}else{var i=K18.getTips(t.head.state);P18.sDP(i)}},t.prototype.GW62=function(){return this.shopProxy.ZP57()},t.prototype.GW63=function(t){if(t&&t.head&&200==t.head.state){var e=this.gtM();e.initShopData(t.body),e.notify(P4.X81)}else{var i=K18.getTips(t.head.state);P18.sDP(i)}},t.prototype.GP61=function(t,e){this.shopProxy.GP61(t,e)},t.prototype.GP62=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.T42),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GN70=function(t,e){this.shopProxy.GN70(t,e)},t.prototype.GN71=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.P96),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GN72=function(t,e){this.shopProxy.GN72(t,e)},t.prototype.GN73=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R76),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GT66=function(t,e){this.shopProxy.GT66(t,e)},t.prototype.GT67=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R74),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GK5=function(t,e){this.shopProxy.GK5(t,e)},t.prototype.GK6=function(t){if(t&&t.head&&200==t.head.state){t.body.shopId=P12.A9;var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R82),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GN74=function(t,e){this.shopProxy.GN74(t,e)},t.prototype.GN75=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R80),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);215==t.head.state?P7.FA78():P18.sDP(s)}},t.prototype.GN76=function(t,e){this.shopProxy.GN76(t,e)},t.prototype.GN77=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.V67),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GG30=function(t,e){this.shopProxy.GG30(t,e)},t.prototype.GG31=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.J98),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GP63=function(t,e){this.shopProxy.GP63(t,e)},t.prototype.GP64=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.T40),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GR51=function(t,e){this.shopProxy.GR51(t,e)},t.prototype.GR52=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.U53),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);215==t.head.state?P7.FA78():P18.sDP(s)}},t.prototype.GK7=function(t,e){this.shopProxy.GK7(t,e)},t.prototype.GK8=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.O11),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GP65=function(t,e){this.shopProxy.GP65(t,e)},t.prototype.GP66=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.Q1),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GN78=function(t,e){this.shopProxy.GN78(t,e)},t.prototype.GN79=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.U57),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GI12=function(t,e){this.shopProxy.GI12(t,e)},t.prototype.GI13=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.K1),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GN80=function(t,e){this.shopProxy.GN80(t,e)},t.prototype.GN81=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R78),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GR53=function(t,e){this.shopProxy.GR53(t,e)},t.prototype.GR54=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.U59),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);215==t.head.state?P7.FA78():P18.sDP(s)}},t.prototype.GL83=function(t,e){this.shopProxy.GL83(t,e)},t.prototype.GL84=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.P98),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GL85=function(t,e){this.shopProxy.GL85(t,e)},t.prototype.GL86=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.Q3),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GN82=function(t,e){this.shopProxy.GN82(t,e)},t.prototype.GN83=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R84),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GR55=function(t,e){this.shopProxy.GR55(t,e)},t.prototype.GR56=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.U62),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GK9=function(t,e){this.shopProxy.GK9(t,e)},t.prototype.GK10=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.O13),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GP67=function(t,e){this.shopProxy.GP67(t,e)},t.prototype.GP68=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.O13),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GL87=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.Q5),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GG32=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.R86),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GP69=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.O15),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GK11=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.G67),e.ob&&P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GG33=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.K3),P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GG34=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.T46),P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GC13=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.I19),P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GK12=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.O17),P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.GL88=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.Q7),P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t.prototype.herobattleShopBuyRes=function(t){if(t&&t.head&&200==t.head.state){var e=t.body,i=this.gtM();i.ZT48(e),i.notify(P4.SHOP_HEROCOMP_BUY_RES),P5.sIs(e.ob)}else{var s=K18.getTips(t.head.state);P18.sDP(s)}},t}(TE11);__reflect(TE96.prototype,"TE96");var THH14=function(i){function t(t){var e=i.call(this,t)||this;return e.isShopinvite=!1,e}return __extends(t,i),t.prototype.initShopData=function(t){this.mul=t.mul,this.tl=t.tl,this.tl&&O4.FF89(L17.A42)&&App.CM.apF(O6.B82,L13.A24,L17.A42)},t.prototype.ZY4=function(t){if(t.mul&&!(t.mul.length<=0))for(var e=0,i=t.mul;e<i.length;e++){var s=i[e];this.ZT48(s)}},t.prototype.getShopData=function(t){for(var e=void 0,i=0,s=this.mul;i<s.length;i++){var o=s[i];if(o.shopId==t){e=o;break}}return e},t.prototype.ZT48=function(t){if(t){for(var e=-1,i=0;i<this.mul.length;i++){if(this.mul[i].shopId==t.shopId){e=i,this.mul[i]=t;break}}-1==e&&this.mul.push(t)}},t.prototype.getBuyTime=function(t,e){var i=this.getShopData(t);if(i)for(var s=0,o=i.buyNum;s<o.length;s++){var r=o[s];if(r.k==e)return r.v}return 0},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(THH14.prototype,"THH14");var I18=function(){function t(){}return t.A5=1,t.A4=2,t.A3=3,t.A6=4,t.A2=5,t.A1=6,t}();__reflect(I18.prototype,"I18");var THH15=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.W37,e.GT65,e),e.rSM(P4.U60,e.GP60,e),e}return __extends(t,i),t.prototype.GT65=function(t){this.apF(O11.A64,t)},t.prototype.GP60=function(t){this.apF(O11.A61,t)},t.prototype.ZP57=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X80,body:{}};s.rSMO(P4.X81,function(t){s.apF(O11.A66,t),e("加载商店信息完成")},s),s.sSM(i)})},t.prototype.GP61=function(t,e){var i={type:P4.T41,body:{itemId:t,num:e}};this.rSMO(P4.T42,this.GP62,this),this.sSM(i)},t.prototype.GP62=function(t){this.apF(O11.A46,t)},t.prototype.GN70=function(t,e){var i={type:P4.P95,body:{gid:t,num:e}};this.rSMO(P4.P96,this.GN71,this),this.sSM(i)},t.prototype.GN71=function(t){this.apF(O11.A22,t)},t.prototype.GN72=function(t,e){var i={type:P4.R75,body:{itemId:t,num:e}};this.rSMO(P4.R76,this.GN73,this),this.sSM(i)},t.prototype.GN73=function(t){this.apF(O11.A32,t)},t.prototype.GT66=function(t,e){var i={type:P4.R73,body:{itemId:t,num:e}};this.rSMO(P4.R74,this.GT67,this),this.sSM(i)},t.prototype.GT67=function(t){this.apF(O11.A30,t)},t.prototype.GK5=function(t,e){var i={type:P4.R81,body:{itemId:t,num:e}};this.rSMO(P4.R82,this.GK6,this),this.sSM(i)},t.prototype.GK6=function(t){this.apF(O11.A12,t)},t.prototype.GN74=function(t,e){var i={type:P4.R79,body:{index:t,num:e}};this.rSMO(P4.R80,this.GN75,this),this.sSM(i)},t.prototype.GN75=function(t){this.apF(O11.A34,t)},t.prototype.GN76=function(t,e){var i={type:P4.V66,body:{index:t,num:e}};this.rSMO(P4.V67,this.GN77,this),this.sSM(i)},t.prototype.GN77=function(t){this.apF(O11.A36,t)},t.prototype.GG30=function(t,e){var i={type:P4.J97,body:{index:t,num:e}};this.rSMO(P4.J98,this.GG31,this),this.sSM(i)},t.prototype.GG31=function(t){this.apF(O11.A2,t)},t.prototype.GP63=function(t,e){var i={type:P4.T39,body:{gid:t,num:e}};this.rSMO(P4.T40,this.GP64,this),this.sSM(i)},t.prototype.GP64=function(t){this.apF(O11.A48,t)},t.prototype.GR51=function(t,e){var i={type:P4.U52,body:{gid:t,num:e}};this.rSMO(P4.U53,this.GR52,this),this.sSM(i)},t.prototype.GR52=function(t){this.apF(O11.A58,t)},t.prototype.GK7=function(t,e){var i={type:P4.O10,body:{gid:t,num:e}};this.rSMO(P4.O11,this.GK8,this),this.sSM(i)},t.prototype.GK8=function(t){this.apF(O11.A14,t)},t.prototype.GP65=function(t,e){var i={type:P4.P99,body:{itemId:t,num:e}};this.rSMO(P4.Q1,this.GP66,this),this.sSM(i)},t.prototype.GP66=function(t){this.apF(O11.A50,t)},t.prototype.GN78=function(t,e){var i={type:P4.U56,body:{itemId:t,num:e}};this.rSMO(P4.U57,this.GN79,this),this.sSM(i)},t.prototype.GN79=function(t){this.apF(O11.A38,t)},t.prototype.GI12=function(t,e){var i={type:P4.J99,body:{itemId:t,num:e}};this.rSMO(P4.K1,this.GI13,this),this.sSM(i)},t.prototype.GI13=function(t){this.apF(O11.A8,t)},t.prototype.GN80=function(t,e){var i={type:P4.R77,body:{index:t,num:e}};this.rSMO(P4.R78,this.GN81,this),this.sSM(i)},t.prototype.GN81=function(t){this.apF(O11.A40,t)},t.prototype.GR53=function(t,e){var i={type:P4.U58,body:{itemId:t,num:e}};this.rSMO(P4.U59,this.GR54,this),this.sSM(i)},t.prototype.GR54=function(t){this.apF(O11.A60,t)},t.prototype.GL83=function(t,e){var i={type:P4.P97,body:{itemId:t,num:e}};this.rSMO(P4.P98,this.GL84,this),this.sSM(i)},t.prototype.GL84=function(t){this.apF(O11.A24,t)},t.prototype.GL85=function(t,e){var i={type:P4.Q2,body:{itemId:t,num:e}};this.rSMO(P4.Q3,this.GL86,this),this.sSM(i)},t.prototype.GL86=function(t){this.apF(O11.A26,t)},t.prototype.GN82=function(t,e){var i={type:P4.R83,body:{itemId:t,num:e}};this.rSMO(P4.R84,this.GN83,this),this.sSM(i)},t.prototype.GN83=function(t){this.apF(O11.A42,t)},t.prototype.GR55=function(t,e){var i={type:P4.U61,body:{gid:t,num:e}};this.rSMO(P4.U62,this.GR56,this),this.sSM(i)},t.prototype.GR56=function(t){this.apF(O11.A63,t)},t.prototype.GK9=function(t,e){var i={type:P4.O12,body:{gid:t,num:e}};this.rSMO(P4.O13,this.GK10,this),this.sSM(i)},t.prototype.GK10=function(t){this.apF(O11.A16,t)},t.prototype.GP67=function(t,e){var i={type:P4.T43,body:{gid:t,num:e}};this.rSMO(P4.T44,this.GP68,this),this.sSM(i)},t.prototype.GP68=function(t){this.apF(O11.A52,t)},t.prototype.ZJ35=function(t,e){var i={type:P4.Q4,body:{gid:t,num:e}};this.rSMO(P4.Q5,this.GL87,this),this.sSM(i)},t.prototype.GL87=function(t){this.apF(O11.A28,t)},t.prototype.ZE42=function(t,e){var i={type:P4.R85,body:{gid:t,num:e}};this.rSMO(P4.R86,this.GG32,this),this.sSM(i)},t.prototype.GG32=function(t){this.apF(O11.A44,t)},t.prototype.ZP58=function(t,e){var i={type:P4.O14,body:{gid:t,num:e}};this.rSMO(P4.O15,this.GP69,this),this.sSM(i)},t.prototype.GP69=function(t){this.apF(O11.A54,t)},t.prototype.ZHH25=function(t,e){var i={type:P4.G66,body:{gid:t,num:e}};this.rSMO(P4.G67,this.GK11,this),this.sSM(i)},t.prototype.GG33=function(t,e){var i={type:P4.K2,body:{gid:t,num:e}};this.rSMO(P4.K3,this.ZE43,this),this.sSM(i)},t.prototype.ZE43=function(t){this.apF(O11.A10,t)},t.prototype.GG34=function(t,e){var i={type:P4.T45,body:{gid:t,num:e}};this.rSMO(P4.T46,this.ZE44,this),this.sSM(i)},t.prototype.ZE44=function(t){this.apF(O11.A56,t)},t.prototype.GK11=function(t){this.apF(O11.A18,t)},t.prototype.GC13=function(t,e){var i={type:P4.I18,body:{gid:t,num:e}};this.rSMO(P4.I19,this.ZB56,this),this.sSM(i)},t.prototype.ZB56=function(t){this.apF(O11.A4,t)},t.prototype.GK12=function(t,e){var i={type:P4.O16,body:{gid:t,num:e}};this.rSMO(P4.O17,this.ZB19,this),this.sSM(i)},t.prototype.ZB19=function(t){this.apF(O11.A20,t)},t.prototype.GL88=function(t,e){var i={type:P4.Q6,body:{gid:t,num:e}};this.rSMO(P4.Q7,this.ZB57,this),this.sSM(i)},t.prototype.ZB57=function(t){this.apF(O11.A6,t)},t.prototype.herobattleShopBuyReq=function(t,e){var i={type:P4.SHOP_HEROCOMP_BUY_REQ,body:{gid:t,num:e}};this.rSMO(P4.SHOP_HEROCOMP_BUY_RES,this.herobattleShopBuyRebateSkin,this),this.sSM(i)},t.prototype.herobattleShopBuyRebateSkin=function(t){this.apF(O11.SHOP_HEROBATTLE_BUY_RES,t)},t}(TG80);__reflect(THH15.prototype,"THH15");var THH27=function(){function g(){}return g.FE26=function(t,e){if(t&&e){if(t.id=e.index,!e.goodsId){var i=P7.str2kv1(e.goods),s=i.k,o=i.v;e.goodsId=s,e.goodsNum=o;var r=P7.str2kv1(e.price);e.priceId=r.k,e.priceNum=r.v}var n=e.goodsId,a=e.goodsNum;t.itemname=N12.FK5(n),t.bg=N12.FL5(n),t.icon=N12.FJ86(n),t.itemid=Number(n),t.itemnum=Number(a);var h=N12.gID(n);t.desc=h.desc;var p=e.priceId,l=e.priceNum;return t.costId=Number(p),t.costIcon=N12.FJ86(p),t.costNum=Number(l),t.cost="x"+l,t.limitnum=e.limitnum,t.batchnum=e.batchnum,t.times=e.times,t.sequence=e.sequence,t.soldout=0,t.lock=1,t.txt=O3.tr(2510),t}},g.FF40=function(t){var e=void 0;if(!t)return e;e={};for(var i=0,s=t;i<s.length;i++){var o=s[i];e[o.k]=o.v}return e},g.FB94=function(){var t=new Array;if(!N15.init||!N15.material)return t;var e=App.CM.gtM(O6.B85).md.totalPassTime,i=App.CM.gtM(O6.C14).getShopData(P12.A9),s=g.FF40(i.buyNum);for(var o in N15.material){var r=N15.material[o],n=g.materialShopCache[o];n||((n=g.materialShopCache[o]={}).shopid=P12.A9,n.controllerConst=O6.C14,n.reqConst=O11.A11,n=g.FE26(n,r));var a=0;s[r.index]&&(a=s[r.index]),-1==r.limitnum?e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2511,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(2510)):a>=r.limitnum?(n.soldout=1,n.lock=0,n.txt=O3.tr(2512)):e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2511,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum)),t.push(n)}return t=t.sort(g.ZP59)},g.FF41=function(){var t=new Array;if(!N15.init||!N15.duel)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A8),i=g.FF40(e.buyNum);for(var s in N15.duel){var o=N15.duel[s],r=g.duelShopCache[s];r||((r=g.duelShopCache[s]={}).shopid=P12.A8,r.controllerConst=O6.C14,r.reqConst=O11.A62,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FE27=function(){var t=new Array;if(!N15.init||!N15.cliff)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A7),i=g.FF40(e.buyNum);for(var s in N15.cliff){var o=N15.cliff[s],r=g.cliffShopCache[s];r||((r=g.cliffShopCache[s]={}).shopid=P12.A7,r.controllerConst=O6.C14,r.reqConst=O11.A9,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FB7=function(){var t=new Array;if(!N15.init||!N15.doublering)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A6),i=g.FF40(e.buyNum);for(var s in N15.doublering){var o=N15.doublering[s],r=g.doubleringShopCache[s];r||((r=g.doubleringShopCache[s]={}).shopid=P12.A6,r.controllerConst=O6.C14,r.reqConst=O11.A43,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FE28=function(){var t=new Array;if(!N15.init||!N15.loveshop)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A28),i=g.FF40(e.buyNum);for(var s in N15.loveshop){var o=N15.loveshop[s],r=g.loverShopCache[s];r||((r=g.loverShopCache[s]={}).shopid=P12.A28,r.controllerConst=O6.C14,r.reqConst=O11.A53,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid,o.index),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FB95=function(){var t=new Array;if(!N15.init||!N15.artifactshop)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A12),i=g.FF40(e.buyNum);for(var s in N15.artifactshop){var o=N15.artifactshop[s],r=g.artifactShopCache[s];r||((r=g.artifactShopCache[s]={}).shopid=P12.A12,r.controllerConst=O6.C14,r.reqConst=O11.A19,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid,o.index),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FF42=function(){var t=new Array;if(!N15.init||!N15.comeback)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A10),i=g.FF40(e.buyNum);for(var s in N15.comeback){var o=N15.comeback[s],r=g.comeBackShopCache[s];r||((r=g.comeBackShopCache[s]={}).shopid=P12.A10,r.controllerConst=O6.C14,r.reqConst=O11.A15,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FC56=function(){var t=new Array;if(!N15.init||!N15.library)return t;var e=App.CM.gtM(O6.B78).stars,i=App.CM.gtM(O6.C14).getShopData(P12.A16),s=g.FF40(i.buyNum);for(var o in N15.library){var r=N15.library[o],n=g.libraryShopCache[o];n||((n=g.libraryShopCache[o]={}).shopid=P12.A16,n.controllerConst=O6.C14,n.reqConst=O11.A27,n=g.FE26(n,r));var a=0;if(s[r.index]&&(a=s[r.index]),-1==r.limitnum)if(-1!=r.limitstar&&e<r.limitstar){var h=r.limitstar;n.soldout=0,n.lock=0,n.txt=O3.tr(6961,h)}else n.soldout=0,n.lock=1,n.txt=O3.tr(2510);else if(a>=r.limitnum)n.soldout=1,n.lock=0,n.txt=O3.tr(2512);else if(e<r.limitstar){h=r.limitstar;n.soldout=0,n.lock=0,n.txt=O3.tr(6961,h)}else n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum);t.push(n)}return t=t.sort(g.ZP59)},g.FE29=function(){var t=new Array;if(!N15.init||!N15.HeroStarShop)return t;App.CM.gtM(O6.B56);var e=App.CM.gtM(O6.C14).getShopData(P12.A11),i=g.FF40(e.buyNum);for(var s in N15.HeroStarShop){var o=N15.HeroStarShop[s],r=g.HeroStarShopCache[s];r||((r=g.HeroStarShopCache[s]={}).shopid=P12.A11,r.controllerConst=O6.C14,r.reqConst=O11.A17,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid,o.index),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FG48=function(){return 0<g.FB38(P12.A30)},g.FE30=function(){var t=new Array;if(!N15.init||!N15.fabao)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A27),i=g.FF40(e.buyNum);for(var s in N15.fabao){var o=N15.fabao[s],r=g.fabaoShopCache[s];r||((r=g.fabaoShopCache[s]={}).shopid=P12.A27,r.controllerConst=O6.C14,r.reqConst=O11.A51,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.ZP59=function(t,e){return t.lock>e.lock?-1:t.lock==e.lock?t.soldout>e.soldout?1:t.soldout==e.soldout?t.times?t.times<e.times?-1:t.times==e.times?t.sequence?t.sequence<e.sequence?-1:t.sequence==e.sequence?0:1:0:1:t.sequence?t.sequence<e.sequence?-1:t.sequence==e.sequence?0:1:0:-1:1},g.FE31=function(){var t=new Array;if(!N15.init||!N15.arena)return t;var e=App.CM.gtM(O6.C4).nTopRank;(e<=0||5e3<e)&&(e=5e3);var i=App.CM.gtM(O6.C14).getShopData(P12.A26),s=g.FF40(i.buyNum);for(var o in N15.arena){var r=N15.arena[o],n=g.arenaShopCache[o];n||((n=g.arenaShopCache[o]={}).shopid=P12.A26,n.controllerConst=O6.C14,n.reqConst=O11.A45,n=g.FE26(n,r));var a=0;s[r.index]&&(a=s[r.index]),-1==r.limitnum?e>r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2513,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(2510)):a>=r.limitnum?(n.soldout=1,n.lock=0,n.txt=O3.tr(2512)):e>r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2513,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum)),t.push(n)}return t=t.sort(g.ZP59)},g.FD32=function(){var t=new Array;if(!N15.init||!N15.answer)return t;var e=App.CM.gtM(O6.B94).an,i=App.CM.gtM(O6.C14).getShopData(P12.A19),s=g.FF40(i.buyNum);for(var o in N15.answer){var r=N15.answer[o],n=g.answerShopCache[o];n||((n=g.answerShopCache[o]={}).shopid=P12.A19,n.controllerConst=O6.C14,n.reqConst=O11.A39,n=g.FE26(n,r));var a=0;s[r.index]&&(a=s[r.index]),-1==r.limitnum?e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2526,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(2510)):a>=r.limitnum?(n.soldout=1,n.lock=0,n.txt=O3.tr(2512)):e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2526,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum)),t.push(n)}return t=t.sort(g.ZP59)},g.FB35=function(){var t=new Array;if(!N15.init||!N15.arena_fuli)return t;var e=App.CM.gtM(O6.C4).nTopRank;(e<=0||5e3<e)&&(e=5e3);var i=App.CM.gtM(O6.C14).getShopData(P12.A2),s=g.FF40(i.buyNum);for(var o in N15.arena_fuli){var r=N15.arena_fuli[o],n=g.arenaFuliShopCache[o];n||((n=g.arenaFuliShopCache[o]={}).shopid=P12.A2,n.controllerConst=O6.C14,n.reqConst=O11.A7,n=g.FE26(n,r));var a=0;s[r.index]&&(a=s[r.index]),-1==r.limitnum?e>r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2513,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(2510)):a>=r.limitnum?(n.soldout=1,n.lock=0,n.txt=O3.tr(2512)):e>r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2513,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum)),t.push(n)}return t=t.sort(g.ZP59)},g.FD33=function(){var t=new Array;if(!N15.init||!N15.friends)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A17),i=g.FF40(e.buyNum);for(var s in N15.friends){var o=N15.friends[s],r=g.friendShopCache[s];r||((r=g.friendShopCache[s]={}).shopid=P12.A17,r.controllerConst=O6.C14,r.reqConst=O11.A21,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2510)):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZB58)},g.FD34=function(){var t=new Array;if(!N15.init||!N15.invite)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A21),i=g.FF40(e.buyNum);for(var s in N15.invite){var o=N15.invite[s],r=g.inviteShopCache[s];r||((r=g.inviteShopCache[s]={}).shopid=P12.A21,r.controllerConst=O6.C14,r.reqConst=O11.A41,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FC57=function(){var t=new Array;if(!N15.init||!N15.teacher)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A14),i=g.FF40(e.buyNum);for(var s in N15.teacher){var o=N15.teacher[s],r=g.teacherShopCache[s];r||((r=g.teacherShopCache[s]={}).shopid=P12.A14,r.controllerConst=O6.C14,r.reqConst=O11.A25,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=""):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZB58)},g.FF43=function(t){var e,i=new Array;switch(t){case 1:e=N15.single;break;case 2:e=N15.people}if(!N15.init||!e)return i;var s,o,r,n=App.CM.gtM(O6.C21),a=0,h=App.CM.gtM(O6.C14);switch(t){case 1:r=g.ownShopCache,s=h.getShopData(P12.A32),a=n.singleBoss.sw,o=O11.A29;break;case 2:r=g.peopleShopCache,s=h.getShopData(P12.A20),a=n.peopleBoss.pw,o=O11.A31}var p=g.FF40(s.buyNum);for(var l in e){var c=e[l];r[l]||(r[l]={});var u=r[l];u.shopid=1==t?P12.A32:P12.A20,u.controllerConst=O6.C14,u.reqConst=o,u=g.FE26(u,c);var d=0;p[c.index]&&(d=p[c.index]),-1==c.limitnum?a<c.times?(u.soldout=0,u.lock=0,u.txt=O3.tr(2515,c.times)):(u.soldout=0,u.lock=1,u.txt=O3.tr(2510)):d>=c.limitnum?(u.soldout=1,u.lock=0,u.txt=O3.tr(2512)):a<c.times?(u.soldout=0,u.lock=0,u.txt=O3.tr(2515,c.times)):(u.soldout=0,u.lock=1,u.txt=O3.tr(g.FC64(u.shopid),d,c.limitnum)),i.push(u)}return i=i.sort(g.ZP59)},g.ZB58=function(t,e){return t.soldout>e.soldout?1:-1},g.FD35=function(){var t=new Array;if(!N15.init||!N15.escort)return t;var e=App.CM.gtM(O6.B86).gn,i=App.CM.gtM(O6.C14).getShopData(P12.A18),s=g.FF40(i.buyNum);for(var o in N15.escort){var r=N15.escort[o],n=g.escortShopCache[o];n||((n=g.escortShopCache[o]={}).shopid=P12.A18,n.controllerConst=O6.C14,n.reqConst=O11.A33,n=g.FE26(n,r));var a=0;s[r.index]&&(a=s[r.index]),-1==r.limitnum?e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2517,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(2510)):a>=r.limitnum?(n.soldout=1,n.lock=0,n.txt=O3.tr(2512)):e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2517,r.times)):(n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum)),t.push(n)}return t=t.sort(g.ZP59)},g.FD36=function(){var t=new Array;if(!N15.init||!N15.leg)return t;var e=App.CM.gtM(O6.B89),i=0;e.myLegion&&e.myLegion.legion&&(i=e.myLegion.legion.lv);var s=App.CM.gtM(O6.C14).getShopData(P12.A31),o=g.FF40(s.buyNum);for(var r in N15.leg){var n=N15.leg[r],a=g.legionShopCache[r];a||((a=g.legionShopCache[r]={}).shopid=P12.A31,a.controllerConst=O6.C14,a.reqConst=O11.A35,a=g.FE26(a,n)),a.limitlv=n.limitlv;var h=0;o[n.index]&&(h=o[n.index]),-1==n.limitnum?i<n.limitlv?(a.soldout=0,a.lock=0,a.txt=O3.tr(2521,n.limitlv)):(a.soldout=0,a.lock=1,a.txt=O3.tr(2510)):h>=n.limitnum?(a.soldout=1,a.lock=0,a.txt=O3.tr(2512)):i<n.limitlv?(a.soldout=0,a.lock=0,a.txt=O3.tr(2521,n.limitlv)):(a.soldout=0,a.lock=1,a.txt=O3.tr(g.FC64(a.shopid),h,n.limitnum)),t.push(a)}return t=t.sort(g.ZP59)},g.FF44=function(){var t=new Array;if(!N15.init||!N15.skin)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A24),i=g.FF40(e.buyNum);for(var s in N15.skin){var o=N15.skin[s],r=g.skinShopCache[s];r||((r=g.skinShopCache[s]={}).shopid=P12.A24,r.controllerConst=O6.C14,r.reqConst=O11.A59,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=""):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(2508,n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FB8=function(){var t=new Array;if(!N15.init||!N15.legwelfare)return t;var e=App.CM.gtM(O6.B89),i=0;e.myLegion&&e.myLegion.legion&&(i=e.myLegion.legion.lv);var s=App.CM.gtM(O6.C14).getShopData(P12.A5),o=g.FF40(s.buyNum);for(var r in N15.legwelfare){var n=N15.legwelfare[r],a=g.legWelfareShopCache[r];a||((a=g.legWelfareShopCache[r]={}).shopid=P12.A5,a.controllerConst=O6.C14,a.reqConst=O11.A1,a=g.FE26(a,n)),a.limitlv=n.limitlv;var h=0;o[n.index]&&(h=o[n.index]),-1==n.limitnum?i<n.limitlv?(a.soldout=0,a.lock=0,a.txt=O3.tr(2521,n.limitlv)):(a.soldout=0,a.lock=1,a.txt=O3.tr(2510)):h>=n.limitnum?(a.soldout=1,a.lock=0,a.txt=O3.tr(2512)):i<n.limitlv?(a.soldout=0,a.lock=0,a.txt=O3.tr(2521,n.limitlv)):(a.soldout=0,a.lock=1,a.txt=O3.tr(g.FC64(a.shopid),h,n.limitnum)),t.push(a)}return t=t.sort(g.ZP59)},g.FB36=function(){return g.FB38(P12.A5)},g.FC58=function(){return g.FB38(P12.A10)},g.FF45=function(){for(var t=0,e=g.FE30(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t+=1;break}}return t},g.FC59=function(){return g.FB38(P12.A9)},g.FE32=function(){for(var t=0,e=g.FD33(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FE33=function(){for(var t=0,e=g.FD34(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FB37=function(){var t=0;if(App.CM.gtM(O6.A38).openState)for(var e=g.FB7(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FF46=function(){var t=0;if(!O4.FF89(L17.A42))for(var e=g.FE28(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FC60=function(){var t=0;if(!O4.FF89(L17.A42))for(var e=g.FB95(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FE34=function(){return g.FB38(P12.A20)},g.FE35=function(){return g.FB38(P12.A32)},g.FE36=function(){return g.FB38(P12.A18)},g.FG49=function(){for(var t=0,e=g.FF41(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FE37=function(){return g.FB38(P12.A30)},g.FB96=function(){return g.FB38(P12.A2)},g.FE38=function(){return g.FB38(P12.A19)},g.FD37=function(){for(var t=0,e=g.FC57(),i=0;i<e.length;i++){var s=e[i].costId,o=N12.giC(s);if(1==e[i].lock&&0==e[i].soldout&&o>=e[i].costNum){t=1;break}}return t},g.FD38=function(){return this.FB38(P12.A15)},g.FE39=function(t){var e=new Array;if(!N15.init||!N15.equip)return e;var i=App.CM.gtM(O6.B85).ZB37(),s=App.CM.gtM(O6.B98),o=App.CM.gtM(O6.C14).getShopData(P12.A22),r=g.FF40(o.buyNum);for(var n in N15.equip){var a=N15.equip[n];if(a.type==t){var h=g.equipShopCache[n];h||((h=g.equipShopCache[n]={}).shopid=P12.A22,h.controllerConst=O6.C14,h.reqConst=O11.A47,h=g.FE26(h,a)),h.type=a.type,1<h.type?h.diffscore=s.ZF26(h.itemid):h.diffscore=0;var p=0;if(r[a.index]&&(p=r[a.index]),-1==a.limitnum)if(-1!=a.times&&i<a.times){var l=L1.tongque[a.times].name;h.soldout=0,h.lock=0,h.txt=O3.tr(2520,l)}else h.soldout=0,(h.lock=1)<h.type?h.txt=0<h.diffscore?O3.tr(5897)+h.diffscore:"":h.txt="";else if(p>=a.limitnum)h.soldout=1,h.lock=0,h.txt=O3.tr(2512);else if(i<a.times){l=L1.tongque[a.times].name;h.soldout=0,h.lock=0,h.txt=O3.tr(2520,l)}else h.soldout=0,(h.lock=1)<h.type?h.txt=0<h.diffscore?O3.tr(5897)+h.diffscore:"":h.txt=O3.tr(g.FC64(h.shopid),p,a.limitnum);e.push(h)}}return e=e.sort(g.ZP59)},g.FA51=function(t){var e=new Array;if(!N15.init||!N15.classup)return e;var i=App.CM.gtM(O6.B85).ZB37(),s=App.CM.gtM(O6.B98),o=App.CM.gtM(O6.C14).getShopData(P12.A3),r=g.FF40(o.buyNum);for(var n in N15.classup){var a=N15.classup[n];if(a.type==t){var h=g.classupEquipShopCache[n];h||((h=g.classupEquipShopCache[n]={}).shopid=P12.A3,h.controllerConst=O6.C14,h.reqConst=O11.A5,h=g.FE26(h,a)),h.type=a.type,1<h.type?h.diffscore=s.ZF26(h.itemid):h.diffscore=0;var p=0;if(r[a.index]&&(p=r[a.index]),-1==a.limitnum)if(-1!=a.times&&i<a.times){var l=L1.tongque[a.times].name;h.soldout=0,h.lock=0,h.txt=O3.tr(2520,l)}else h.soldout=0,(h.lock=1)<h.type?h.txt=0<h.diffscore?O3.tr(5897)+h.diffscore:"":h.txt="";else if(p>=a.limitnum)h.soldout=1,h.lock=0,h.txt=O3.tr(2512);else if(i<a.times){l=L1.tongque[a.times].name;h.soldout=0,h.lock=0,h.txt=O3.tr(2520,l)}else h.soldout=0,(h.lock=1)<h.type?h.txt=0<h.diffscore?O3.tr(5897)+h.diffscore:"":h.txt=O3.tr(g.FC64(h.shopid),p,a.limitnum);e.push(h)}}return e=e.sort(g.ZP59)},g.FI92=function(t){if(!N15.init||!N15.equip)return!1;var e=[];for(var i in N15.equip)e[i]=N15.equip[i];var s=App.CM.gtM(O6.B85).ZB37(),o=App.CM.gtM(O6.B98),r=App.CM.gtM(O6.C14).getShopData(P12.A22),n=g.FF40(r.buyNum),a=O4.getLv();for(var i in e){var h=e[i];if(1!=h.type){var p=h.goods.split(":")[0],l=o.ZF26(p),c=0;n[h.index]&&(c=n[h.index]);var u=h.price.split(":")[0],d=h.price.split(":")[1],v=N12.gID(p);if(!(t!=v.pos||l<=0||d>N12.giC(u)||a<v.level))if(-1==h.limitnum){if(-1!=h.times&&s<h.times)continue;o.shopPosEquip[t]=h.index}else{if(c>=h.limitnum)continue;if(s<h.times)continue;o.shopPosEquip[t]=h.index}}}return!!o.shopPosEquip[t]},g.FA74=function(t){var e=new Array;if(!N15.init||!N15.autobuy)return e;var i=App.CM.gtM(O6.C14),s=1==t?i.getShopData(P12.A13):i.getShopData(P12.A29),o=1==t?g.bindGoldShopCache:g.goldShopCache,r=g.FF40(s.buyNum),n=N15.FB93(t);for(var a in n){var h=n[a];o[a]||(o[a]={});var p=o[a];p.shopid=1==t?P12.A13:P12.A29,p.controllerConst=O6.C14,p.reqConst=1==t?O11.A13:O11.A57,p.id=h.index;var l=h.item,c=h.num;p.itemname=N12.FK5(l),p.bg=N12.FL5(l),p.icon=N12.FJ86(l),p.itemid=Number(l),p.itemnum=Number(c);var u=N12.gID(l);p.desc=u.desc;var d=1==t?pack.I11.BIND_GOLD:pack.I11.GOLD,v=h.price;p.costIcon=N12.FJ86(d),p.costNum=Number(v),p.costId=Number(d),p.cost="x"+v,p.limitnum=h.limitnum,p.batchnum=h.batchnum,p.soldout=0,p.lock=1,p.txt=O3.tr(2510);var f=0;r[h.index]&&(f=r[h.index]),-1==h.limitnum?(p.soldout=0,p.lock=1,p.txt=O3.tr(2507)):f>=h.limitnum?(p.soldout=1,p.lock=0,p.txt=O3.tr(2512)):(p.soldout=0,p.lock=1,p.txt=O3.tr(g.FC64(p.shopid),f,h.limitnum)),e.push(p)}return e=e.sort(g.ZP59)},g.FI93=function(){var t=new Array;if(!N15.init||!N15.equip)return t;var e=new Array;for(var i in N15.equip){var s=N15.equip[i];if(-1==e.indexOf(s.type)){e.push(s.type);var o={};o.type=s.type,o.text=s.typename,t.push(o)}}return t},g.FB97=function(){var t=new Array;if(!N15.init||!N15.classup)return t;var e=new Array;for(var i in N15.classup){var s=N15.classup[i];if(-1==e.indexOf(s.type)){e.push(s.type);var o={};o.type=s.type,o.text=s.typename,t.push(o)}}return t},g.FC61=function(){var t=0,e=App.CM.gtM(O6.B98);return e.remOrangeEquip&&0<e.remOrangeEquip.length&&(t=1),e.remClassupEquip&&0<e.remClassupEquip.length&&(t+=1),0<t?t:g.FD40()||g.FB9()?1:0},g.FE40=function(){var t=new Array;if(!N15.init||!N15.partner)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A23),i=g.FF40(e.buyNum);for(var s in N15.partner){var o=N15.partner[s];g.womenShopCache[s]||(g.womenShopCache[s]={});var r=g.womenShopCache[s];r.shopid=P12.A23,r.controllerConst=O6.C14,r.reqConst=O11.A49,r=g.FE26(r,o);var n=0;i[o.index]&&(n=i[o.index]),-1==o.limitnum?(r.soldout=0,r.lock=1,r.txt=O3.tr(2507)):n>=o.limitnum?(r.soldout=1,r.lock=1,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.FD39=function(){var t=new Array;if(!N15.init||!N15.shudao)return t;var e=App.CM.gtM(O6.B85).ZB37(),i=App.CM.gtM(O6.C14).getShopData(P12.A30),s=g.FF40(i.buyNum);for(var o in N15.shudao){var r=N15.shudao[o];g.shuDaoShopCache[o]||(g.shuDaoShopCache[o]={});var n=g.shuDaoShopCache[o];n.shopid=P12.A30,n.controllerConst=O6.C14,n.reqConst=O11.A37,n=g.FE26(n,r);var a=0;if(s[r.index]&&(a=s[r.index]),-1==r.limitnum)if(-1!=r.times&&e<r.times){var h=L1.tongque[r.times].name;n.soldout=0,n.lock=0,n.txt=O3.tr(2520,h)}else n.soldout=0,n.lock=1,n.txt=O3.tr(2510);else if(a>=r.limitnum)n.soldout=1,n.lock=0,n.txt=O3.tr(2512);else if(e<r.times){h=L1.tongque[r.times].name;n.soldout=0,n.lock=0,n.txt=O3.tr(2520,h)}else n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum);t.push(n)}return t=t.sort(g.ZP59)},g.FC62=function(){var t=new Array;if(!N15.init||!N15.menghuo)return t;var e=THH25.FJ37(),i=App.CM.gtM(O6.C14).getShopData(P12.A15),s=g.FF40(i.buyNum);for(var o in N15.menghuo){var r=N15.menghuo[o];g.mengHuoShopCache[o]||(g.mengHuoShopCache[o]={});var n=g.mengHuoShopCache[o];n.shopid=P12.A15,n.controllerConst=O6.C14,n.reqConst=O11.A23,n=g.FE26(n,r);var a=0;s[r.index]&&(a=s[r.index]),-1==r.limitnum?e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2528,N17.menghuo[r.times].point)):(n.soldout=0,n.lock=1,n.txt=O3.tr(2510)):a>=r.limitnum?(n.soldout=1,n.lock=0,n.txt=O3.tr(2512)):e<r.times?(n.soldout=0,n.lock=0,n.txt=O3.tr(2528,N17.menghuo[r.times].point)):(n.soldout=0,n.lock=1,n.txt=O3.tr(g.FC64(n.shopid),a,r.limitnum)),t.push(n)}return t=t.sort(g.ZP59)},g.FE41=function(){var t=new Array;if(!N15.init||!N15.merit)return t;var e=App.CM.gtM(O6.C14).getShopData(P12.A4),i=g.FF40(e.buyNum);for(var s in N15.merit){var o=N15.merit[s],r=g.meritShopCache[s];r||((r=g.meritShopCache[s]={}).shopid=P12.A4,r.controllerConst=O6.C14,r.reqConst=O11.A55,r=g.FE26(r,o));var n=0;i[o.index]&&(n=i[o.index]),n>=o.limitnum?(r.soldout=1,r.lock=0,r.txt=O3.tr(2512)):(r.soldout=0,r.lock=1,r.txt=O3.tr(g.FC64(r.shopid),n,o.limitnum)),t.push(r)}return t=t.sort(g.ZP59)},g.ZP60=function(t,e,i){var s=[],o=N15.FB6(t),r=App.CM.gtM(O6.C14);if(o&&r){var n=r.getShopData(t),a=g.FF40(n.buyNum);for(var h in o){var p=o[h],l=i[h];l||((l=i[h]={}).shopid=t,l.controllerConst=O6.C14,l.reqConst=e,l=g.FE26(l,p));var c=a[p.index]||0;l.soldout=0,-(l.lock=1)==p.limitnum?l.txt=O3.tr(2507):c>=p.limitnum&&(l.soldout=1,l.lock=0,l.txt=O3.tr(2512)),l.txt=O3.tr(g.FC64(t,p.index),c,p.limitnum),s.push(l)}}return s.sort(g.ZP59),s},g.FK15=function(t){switch(t){case P12.A1:return g.ZP60(P12.A1,O11.A3,g.legionduelCache);case P12.HEROBATTLE_SHOP:return g.ZP60(P12.HEROBATTLE_SHOP,O11.SHOP_HEROBATTLE_BUY_REQ,g.herobattleCache)}return[]},g.FD40=function(){return!!this.FE42(3)},g.FC63=function(){return g.FE32(),0<g.FB38(P12.HEROBATTLE_SHOP)},g.FB9=function(){return!(!g.FB37()&&!g.FF46())},g.FHH67=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.l,i=N15.FK14(t);if(i&&e<i.level){var s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[i.level])),!1}return!0},g.FG50=function(t){var e=N15.FHH66(t);for(var i in e)if(e[i].open)return 0;return N15.FG47(e[0].shopid)},g.FE42=function(t){for(var e=0,i=N15.FE25(t);e<i.length;e++){var s=i[e];if(g.FB38(s))return 1}return 0},g.FB38=function(t){var e=!1;switch(t){case P12.A30:var i=App.CM.gtM(O6.B85);e=this.hasShopRed(t,{valueName:"times",value:i.ZB37()});break;case P12.A15:e=this.hasShopRed(t,{valueName:"times",value:THH25.FJ37()});break;case P12.A5:var s=0,o=App.CM.gtM(O6.B89);o.myLegion&&o.myLegion.legion&&(s=o.myLegion.legion.lv),e=this.hasShopRed(t,{valueName:"limitlv",value:s});break;case P12.A9:var r=App.CM.gtM(O6.B85);e=this.hasShopRed(t,{valueName:"times",value:r.md.totalPassTime});break;case P12.A10:e=this.hasShopRed(t);break;case P12.A19:var n=App.CM.gtM(O6.B94);e=this.hasShopRed(t,{valueName:"times",value:n.an});break;case P12.A18:var a=App.CM.gtM(O6.B86);e=this.hasShopRed(t,{valueName:"times",value:a.gn});break;case P12.A2:var h=App.CM.gtM(O6.C4).nTopRank;(h<=0||5e3<h)&&(h=5e3),e=this.hasShopRed(t,{valueName:"times",value:h,operator:"<="});break;case P12.A14:return g.FD37();case P12.A32:var p=App.CM.gtM(O6.C21).singleBoss.sw;e=g.hasShopRed(t,{valueName:"times",value:p});break;case P12.A20:p=App.CM.gtM(O6.C21).peopleBoss.pw;e=g.hasShopRed(t,{valueName:"times",value:p});break;case P12.A11:e=g.hasShopRed(P12.A11);break;case P12.HEROBATTLE_SHOP:e=g.hasShopRed(P12.HEROBATTLE_SHOP)}return e?1:0},g.FC64=function(t,e){if(t){if(e)switch(t){case P12.A28:case P12.A11:case P12.A12:case P12.HEROBATTLE_SHOP:var i=N15.FB6(t);return g.getLimitStr_(parseInt(i[e].type))}switch(N15.init[N15.SHOPTYPE_TO_SHOPKEY[t]].refresh){case 1:return 3509;case 2:return 3510}}return 2508},g.getLimitStr_=function(t){switch(t){case-1:return 2507;case 1:return 3509;case 2:return 2508;case 3:return 3510}return 2508},g.getShopBuyCount=function(t,e){for(var i=0,s=App.CM.gtM(O6.C14).getShopData(t).buyNum;i<s.length;i++){var o=s[i];if(o.k===e)return o.v}return 0},g.hasShopRed=function(t,e){void 0===e&&(e={});var i=N15.FB6(t);if(i){var s=e.value,o=e.valueName,r=e.operator;r=r||">=";var n=App.CM.gtM(O6.C14).getShopData(t),a=g.FF40(n.buyNum);for(var h in a){if((-1==(u=i[h]).limitnum||0<u.limitnum-a[h])&&N12.FK6(P7.str2kv1(u.price)))return!0}var p=Object.keys(i);o&&p.sort(function(t,e){return i[t][o]-i[e][o]});for(var l=0,c=p;l<c.length;l++){if(!a[h=c[l]]){var u=i[h];if(o&&!P7.FL22(s,u[o],r))break;if(N12.FK6(P7.str2kv1(u.price)))return!0}}}return!1},g.materialShopCache={},g.arenaShopCache={},g.answerShopCache={},g.arenaFuliShopCache={},g.friendShopCache={},g.teacherShopCache={},g.peopleShopCache={},g.ownShopCache={},g.escortShopCache={},g.legionShopCache={},g.skinShopCache={},g.legWelfareShopCache={},g.equipShopCache={},g.bindGoldShopCache={},g.goldShopCache={},g.womenShopCache={},g.shuDaoShopCache={},g.mengHuoShopCache={},g.inviteShopCache={},g.duelShopCache={},g.comeBackShopCache={},g.fabaoShopCache={},g.libraryShopCache={},g.doubleringShopCache={},g.loverShopCache={},g.HeroStarShopCache={},g.cliffShopCache={},g.meritShopCache={},g.legionduelCache={},g.herobattleCache={},g.artifactShopCache={},g.classupEquipShopCache={},g}();__reflect(THH27.prototype,"THH27");var ShopBaseItemNewRender=function(s){function t(){var t=s.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,s),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP56,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP56,this)},t.prototype.ZP56=function(){this.data.shopid==P12.A22&&1==this.data.type?1!=this.data.soldout?App.VM.open(O7.E82,this.data):1==this.data.soldout&&P18.sDP(O3.tr(5015)):1!=this.data.soldout?App.VM.open(O7.I45,this.data):1==this.data.soldout&&P18.sDP(O3.tr(5015)),TG40.playClickEffect()},t.prototype.dataChanged=function(){if(s.prototype.dataChanged.call(this),this.scoreTip.visible=0<this.data.diffscore,this.itemname){var t=N12.gID(this.data.itemid).quality;O5.FB13(this.itemname,this.data.itemname,t,2,!0)}if(this.bg&&(this.bg.source=this.data.bg),this.icon&&(this.icon.source=this.data.icon),this.itemnum&&(this.itemnum.text=M18.FF65(this.data.itemnum,1)),(this.data.shopid==P12.A22||this.data.shopid==P12.A3)&&1<this.data.type){var e=N12.gID(this.data.itemid),i=null==e?0:e.level;this.itemnum.text=O3.tr(5423,i)}if(this.costIcon&&(this.costIcon.source=this.data.costIcon),this.cost&&(this.cost.textFlow=M18.HTP.parse(O3.tr(4149,this.data.cost))),this.lockLb){if(this.lockLb.text=this.data.txt,1==this.data.soldout)return void(this.lockLb.textColor=15188022);1==this.data.lock?this.lockLb.textColor=7788311:this.lockLb.textColor=14164514}},t}(eui.ItemRenderer);__reflect(ShopBaseItemNewRender.prototype,"ShopBaseItemNewRender");var ShopActivityView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ShopPageSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.access.label=O3.tr(5016),this.cbRed.label=O3.tr(7418)},t.prototype.initData=function(){o.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ShopBaseItemNewRender,this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection},t.prototype.open=function(i){var s=this;(o.prototype.open.call(this),i)&&(t=N15.FHH66(I18.A2)).forEach(function(t,e){i===t.shopid&&(s.selectShop=t)});if(this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),!this.selectShop){var t=N15.FHH66(I18.A2);this.selectShop=t[0]}this.cbRed.selected=O4.FF89(L17.A42),this.GX5()},t.prototype.selectChange=function(t){var e=t.currentTarget,i=e.getChildAt(this.selectShop.index);if(!THH27.FHH67(e.selectedItem.shopid)){var s=e.getChildAt(e.selectedItem.index);return e.selectedIndex=this.selectShop.index,i.selected=!0,void(s.selected=!1)}i.selected=!1,this.selectShop=e.selectedItem,this.updateTop(),this.ZJ36(),this.endScroller(),TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof THH14?this.GX5():t instanceof TG12&&e[0]==P4.S94&&this.GX5()},t.prototype.GX5=function(){var i=this,t=N15.FHH66(I18.A2);this.menuCollection.replaceAll(t),this.menuCollection.refresh(),t.forEach(function(t,e){i.selectShop.shopid===t.shopid&&(i.selectShop=t,i.tabBar.selectedIndex=e)}),this.updateTop(),this.ZJ36(),this.endScroller()},t.prototype.ZJ36=function(){if(THH27.FHH67(this.selectShop.shopid)){var t;switch(this.selectShop.shopid){case P12.A8:t=THH27.FF41();break;case P12.A6:t=THH27.FB7();break;case P12.A28:t=THH27.FE28();break;case P12.A12:t=THH27.FB95()}this.itemCollection.replaceAll(t),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=0}},t.prototype.updateTop=function(){var t=0;switch(this.selectShop.shopid){case P12.A8:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.textFlow=M18.HTP.parser(O3.tr(3401));break;case P12.A6:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.textFlow=M18.HTP.parser(O3.tr(7015));break;case P12.A28:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.textFlow=M18.HTP.parser(O3.tr(7411));break;case P12.A12:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.textFlow=M18.HTP.parser(O3.tr(8502))}},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A42),TG40.playClickEffect()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.selectShop=void 0,this.menuCollection.removeAll(),this.itemCollection.removeAll()},t}(BaseEuiView);__reflect(ShopActivityView.prototype,"ShopActivityView");var ShopBuyEquipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ShopBuyEquipSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4151)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5019)),this.buyBtn.label=O3.tr(4155)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0];this._item=i,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deFiveTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeFiveTen,this),this.deTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.inFiveTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInFiveTen,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof THH14&&this.GX5()},t.prototype.doDeFiveTen=function(){var t=Number(this.copies.text);this.copies.text=t-50<1?"1":String(t-50);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doDeTen=function(){var t=Number(this.copies.text);this.copies.text=t-10<1?"1":String(t-10);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doDeOne=function(){var t=Number(this.copies.text);this.copies.text=t-1<1?"1":String(t-1);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doInOne=function(){var t=Number(this.copies.text),e=N12.giC(Number(this._item.costId));if(!((t+1)*this._item.costNum>e)){var i=this._item.batchnum;if(-1!=this._item.limitnum)i=Math.min(i,this._item.limitnum),i-=this.getBuytime(this._item.shopid);var s=Math.floor(e/this._item.costNum);i=s<i?s:i,this.copies.text=i<t+1?String(i):String(t+1);var o=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+o}},t.prototype.doInTen=function(){var t=Number(this.copies.text),e=N12.giC(Number(this._item.costId));if(!((t+1)*this._item.costNum>e)){var i=this._item.batchnum;if(-1!=this._item.limitnum)i=Math.min(i,this._item.limitnum),i-=this.getBuytime(this._item.shopid);var s=Math.floor(e/this._item.costNum);i=s<i?s:i,this.copies.text=i<t+10?String(i):String(t+10);var o=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+o}},t.prototype.doInFiveTen=function(){var t=Number(this.copies.text),e=N12.giC(Number(this._item.costId));if(!((t+1)*this._item.costNum>e)){var i=this._item.batchnum;if(-1!=this._item.limitnum)i=Math.min(i,this._item.limitnum),i-=this.getBuytime(this._item.shopid);var s=Math.floor(e/this._item.costNum);i=s<i?s:i,this.copies.text=i<t+50?String(i):String(t+50);var o=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+o}},t.prototype.GX5=function(){var t=this._item,e=t.bg;this.iconBg.source=e;var i=t.icon;this.icon.source=i;var s=t.itemname;this.nameLb.textFlow=M18.HTP.parse(O3.tr(4153,s));var o=t.itemnum;this.num.textFlow=M18.HTP.parse(O3.tr(4152,o));var r=this.getBuytime(t.shopid),n=t.limitnum;this.buyBtn.touchEnabled=!0,this.buyBtn.filters=[],-1==n||null==n?this.limitLb.text=O3.tr(2507):r<n?this.limitLb.text=O3.tr(2508,r,n):(this.limitLb.textFlow=M18.HTP.parser(O3.tr(2509)),this.buyBtn.touchEnabled=!1,this.buyBtn.filters=[P16.GrayMatrixFilter]);var a=t.desc;this.desc.textFlow=M18.HTP.parse(O3.tr(4154,a));var h=t.costIcon;this.costIcon.source=h;var p=t.costNum;this.copies.text="1";var l=Number(this.copies.text);this.totalCost.text="x"+String(p*l)},t.prototype.getBuytime=function(t){var e=App.CM.gtM(O6.C14),i=NaN,s=this._item.id;switch(t){case P12.A22:i=e.getBuyTime(P12.A22,s)}return i},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deFiveTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeFiveTen,this),this.deTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.inFiveTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInFiveTen,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this)},t.prototype.showItem=function(t){var e=N12.gID(this._item.itemid),i=N12.giC(this._item.itemid);App.CM.apF(O6.C11,O14.A15,e,i)},t.prototype.closeSelf=function(){App.VM.close(O7.E82)},t.prototype.doBuy=function(){if(0!=this._item.lock){var t=this._item.id,e=Number(this.copies.text);App.CM.apF(this._item.controllerConst,this._item.reqConst,t,e),this.closeSelf()}else P18.sDP(O3.tr(2506))},t}(BaseEuiView);__reflect(ShopBuyEquipView.prototype,"ShopBuyEquipView");var ShopBuyView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.maxNum=99,i.skinName="ShopBuySkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.buyBtn.label=O3.tr(5017),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5018)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5019))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0];this._item=i,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof THH14&&this.GX5()},t.prototype.doDeTen=function(){var t=Number(this.copies.text);this.copies.text=t-10<1?"1":String(t-10);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doDeOne=function(){var t=Number(this.copies.text);this.copies.text=t-1<1?"1":String(t-1);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doInOne=function(){var t=Number(this._item.costId),e=Number(this.copies.text),i=N12.giC(t),s=i;if(t==N12.itemId.bindGold){if(s=N12.giC(N12.itemId.gold)+i,(e+1)*this._item.costNum>s)return}else if((e+1)*this._item.costNum>s)return;var o=this._item.batchnum;if(-1!=this._item.limitnum){o=Math.min(o,this._item.limitnum);var r=null!=this._item.buyTime?this._item.buyTime:this.getBuytime(this._item.shopid);if(r>=this._item.limitnum)o=1;else{var n=this._item.limitnum-r;o=o<=n?o:n}}var a=Math.floor(s/this._item.costNum),h=a>this.maxNum?this.maxNum:a;o=h<o?h:o,this.copies.text=o<e+1?String(o):String(e+1);var p=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+p},t.prototype.doInTen=function(){var t=this._item.costId,e=Number(this.copies.text),i=N12.giC(Number(t)),s=i;if(t==N12.itemId.bindGold){if(s=N12.giC(N12.itemId.gold)+i,(e+10)*this._item.costNum>s)return}else if((e+10)*this._item.costNum>s)return;var o=this._item.batchnum;if(-1!=this._item.limitnum){o=Math.min(o,this._item.limitnum);var r=null!=this._item.buyTime?this._item.buyTime:this.getBuytime(this._item.shopid);if(r>=this._item.limitnum)o=1;else{var n=this._item.limitnum-r;o=o<=n?o:n}}var a=Math.floor(s/this._item.costNum),h=a>this.maxNum?this.maxNum:a;o=h<o?h:o,this.copies.text=o<e+10?String(o):String(e+10);var p=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+p},t.prototype.GX5=function(){var t=this._item,e=t.bg;this.iconBg.source=e;var i=t.icon;this.icon.source=i;var s=t.itemname;this.nameLb.text=s;var o=t.itemnum;this.num.text=o;var r=null!=t.buyTime?t.buyTime:this.getBuytime(t.shopid),n=t.limitnum;this.buyBtn.touchEnabled=!0,this.buyBtn.filters=[],-1==n||null==n?this.limitLb.text=O3.tr(2507):r<n?this.limitLb.text=O3.tr(THH27.FC64(t.shopid,t.id),r,n):(this.limitLb.textFlow=M18.HTP.parser(O3.tr(2509)),this.buyBtn.touchEnabled=!1,this.buyBtn.filters=[P16.GrayMatrixFilter]);var a=t.desc;a||(a="",Log.warn("错误的desc:",t)),this.desc.textFlow=M18.FG71(a);var h=t.costIcon;this.costIcon.source=h;var p=t.costNum;this.copies.text="1";var l=Number(this.copies.text);this.totalCost.text="x"+String(p*l)},t.prototype.getBuytime=function(t){var e=App.CM.gtM(O6.C14),i=NaN,s=this._item.id;switch(t){case P12.A9:i=e.getBuyTime(P12.A9,s);break;case P12.A19:i=e.getBuyTime(P12.A19,s);break;case P12.A26:i=e.getBuyTime(P12.A26,s);break;case P12.A2:i=e.getBuyTime(P12.A2,s);break;case P12.A17:i=e.getBuyTime(P12.A17,s);break;case P12.A20:i=e.getBuyTime(P12.A20,s);break;case P12.A32:i=e.getBuyTime(P12.A32,s);break;case P12.A18:i=e.getBuyTime(P12.A18,s);break;case P12.A31:i=e.getBuyTime(P12.A31,s);break;case P12.A5:i=e.getBuyTime(P12.A5,s);break;case P12.A22:i=e.getBuyTime(P12.A22,s);break;case P12.A13:i=e.getBuyTime(P12.A13,s);break;case P12.A29:i=e.getBuyTime(P12.A29,s);break;case P12.A23:i=e.getBuyTime(P12.A23,s);break;case P12.A30:i=e.getBuyTime(P12.A30,s);break;case P12.A24:i=e.getBuyTime(P12.A24,s);break;case P12.A15:i=e.getBuyTime(P12.A15,s);break;case P12.A14:i=e.getBuyTime(P12.A14,s);break;case P12.A21:i=e.getBuyTime(P12.A21,s);break;case P12.A8:i=e.getBuyTime(P12.A8,s);break;case P12.A7:i=e.getBuyTime(P12.A7,s);break;case P12.A10:i=e.getBuyTime(P12.A10,s);break;case P12.A27:i=e.getBuyTime(P12.A27,s);break;case P12.A16:i=e.getBuyTime(P12.A16,s);break;case P12.A6:i=e.getBuyTime(P12.A6,s);break;case P12.A28:i=e.getBuyTime(P12.A28,s);break;case P12.A11:i=e.getBuyTime(P12.A11,s);break;case P12.A4:i=e.getBuyTime(P12.A4,s);break;case P12.A1:i=e.getBuyTime(P12.A1,s);break;case P12.A12:i=e.getBuyTime(P12.A12,s);break;case P12.A3:i=e.getBuyTime(P12.A3,s);break;case P12.HEROBATTLE_SHOP:i=e.getBuyTime(P12.HEROBATTLE_SHOP,s)}return i},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this)},t.prototype.showItem=function(t){if(this._item.type&&1!=this._item.type){var e=N12.gID(this._item.itemid);App.CM.apF(O6.B98,M19.A17,e)}else{var i=N12.gID(this._item.itemid),s=N12.giC(this._item.itemid);App.CM.apF(O6.C11,O14.A15,i,s)}},t.prototype.closeSelf=function(){App.VM.close(O7.I45)},t.prototype.doBuy=function(){var t=this;if(0!=this._item.lock){if(this._item.reqConst==O11.A47||this._item.reqConst==O11.A5)if(App.CM.gtM(O6.B98).isCanBuy())return void P18.sDP(O3.tr(2527));var e=this._item.id,i=Number(this.copies.text),s=Number(this._item.costId),o=N12.giC(s);if(75001==s&&i*this._item.costNum>o){App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){App.CM.apF(t._item.controllerConst,t._item.reqConst,t._item.id,Number(t.copies.text)),t.closeSelf()},void 0,void 0,void 0)}else App.CM.apF(this._item.controllerConst,this._item.reqConst,e,i),this.closeSelf()}else P18.sDP(O3.tr(2506))},t}(BaseEuiView);__reflect(ShopBuyView.prototype,"ShopBuyView");var ShopClassupEquipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ShopPageSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.access.label=O3.tr(4157),this.cbRed.label=O3.tr(7418)},t.prototype.initData=function(){s.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ShopBaseItemNewRender,this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection;var t=N15.FHH66(I18.A1);this.equipShop=t[0]},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(s.prototype.open.call(this),this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.access.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAccess,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),!this.selectMenu){var i=THH27.FB97();this.menuCollection.replaceAll(i),this.menuCollection.refresh(),this.selectMenu=i[0],this.tabBar.selectedIndex=0}this.cbRed.selected=O4.FF89(L17.A42),this.GX5()},t.prototype.selectChange=function(t){var e=t.currentTarget;this.selectMenu=e.selectedItem;var i=e.selectedItem.type,s=THH27.FA51(i);this.itemCollection.replaceAll(s),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=0,this.endScroller(),TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof THH14&&this.GX5(),t instanceof TG58&&this.GX5(),t instanceof TG15&&this.GX5(),t instanceof TG12&&e[0]==P4.S94&&this.GX5()},t.prototype.GX5=function(){this.updateTop();var t=this.selectMenu.type,e=THH27.FA51(t);this.itemCollection.replaceAll(e),this.itemCollection.refresh(),this.endScroller()},t.prototype.updateTop=function(){this.shopDesc.visible=this.shopDesc.includeInLayout=!1,this.access.visible=!0,this.showicon.source=this.equipShop.showicon;var t=N12.giC(this.equipShop.showid);this.ownnum.textFlow=M18.HTP.parse(O3.tr(4156,t));var e=App.CM.gtM(O6.B98);e.remClassupEquip&&0<e.remClassupEquip.length?this.access.imgNew.visible=!0:this.access.imgNew.visible=!1},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.doAccess=function(){App.VM.open(O7.A81)},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A42),TG40.playClickEffect()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.access.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAccess,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.selectMenu=void 0,this.menuCollection.removeAll(),this.itemCollection.removeAll()},t}(BaseEuiView);__reflect(ShopClassupEquipView.prototype,"ShopClassupEquipView");var ShopEquipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ShopPageSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.access.label=O3.tr(4157),this.cbRed.label=O3.tr(7418)},t.prototype.initData=function(){s.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ShopBaseItemNewRender,this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection;var t=N15.FHH66(I18.A5);this.equipShop=t[0]},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(s.prototype.open.call(this),this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.access.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAccess,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),!this.selectMenu){var i=THH27.FI93();this.menuCollection.replaceAll(i),this.menuCollection.refresh(),this.selectMenu=i[0],this.tabBar.selectedIndex=0}this.cbRed.selected=O4.FF89(L17.A42),this.GX5()},t.prototype.selectChange=function(t){var e=t.currentTarget;this.selectMenu=e.selectedItem;var i=e.selectedItem.type,s=THH27.FE39(i);this.itemCollection.replaceAll(s),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=0,this.endScroller(),TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof THH14&&this.GX5(),t instanceof TG58&&this.GX5(),t instanceof TG15&&this.GX5(),t instanceof TG12&&e[0]==P4.S94&&this.GX5()},t.prototype.GX5=function(){this.updateTop();var t=this.selectMenu.type,e=THH27.FE39(t);this.itemCollection.replaceAll(e),this.itemCollection.refresh(),this.endScroller()},t.prototype.updateTop=function(){this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!0,this.showicon.source=this.equipShop.showicon;var t=N12.giC(this.equipShop.showid);this.ownnum.textFlow=M18.HTP.parse(O3.tr(4156,t));var e=App.CM.gtM(O6.B85).ZB37(),i=TG57.FB70(e);this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2522,i?i.name:"0"));var s=App.CM.gtM(O6.B98);s.remOrangeEquip&&0<s.remOrangeEquip.length?this.access.imgNew.visible=!0:this.access.imgNew.visible=!1},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.doAccess=function(){App.VM.isOpen(O7.G46)&&App.VM.close(O7.G46,"byFight"),App.VM.isOpen(O7.HH95)&&App.VM.close(O7.HH95),App.VM.open(O7.E86,"shop")},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A42),TG40.playClickEffect()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.access.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAccess,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.selectMenu=void 0,this.menuCollection.removeAll(),this.itemCollection.removeAll()},t}(BaseEuiView);__reflect(ShopEquipView.prototype,"ShopEquipView");var ShopFuliView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ShopPageSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.access.label=O3.tr(5016),this.cbRed.label=O3.tr(7418)},t.prototype.initData=function(){o.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ShopBaseItemNewRender,this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection},t.prototype.open=function(i){var s=this;(o.prototype.open.call(this),i)&&(t=N15.FHH66(I18.A3)).forEach(function(t,e){i===t.shopid&&(s.selectShop=t)});if(this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),!this.selectShop){var t=N15.FHH66(I18.A3);this.selectShop=t[0]}this.cbRed.selected=O4.FF89(L17.A42),this.GX5()},t.prototype.selectChange=function(t){var e=t.currentTarget,i=e.getChildAt(this.selectShop.index);if(!THH27.FHH67(e.selectedItem.shopid)){var s=e.getChildAt(e.selectedItem.index);return e.selectedIndex=this.selectShop.index,i.selected=!0,void(s.selected=!1)}i.selected=!1,this.selectShop=e.selectedItem,this.updateTop(),this.ZJ36(),this.endScroller(),TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(o.prototype.uBM.call(this,t,e),t instanceof THH14)this.GX5();else if(t instanceof TG15)this.GX5();else if(t instanceof TG20)this.GX5();else if(t instanceof TG23)this.GX5();else if(t instanceof TG48){var s=e[0];if(s&&"time"===s)return;this.GX5()}else t instanceof TG17?this.GX5():t instanceof TG10?this.GX5():t instanceof TG91?this.GX5():t instanceof TG12&&e[0]==P4.S94&&this.GX5()},t.prototype.GX5=function(){var i=this,t=N15.FHH66(I18.A3);this.menuCollection.replaceAll(t),this.menuCollection.refresh(),t.forEach(function(t,e){i.selectShop.shopid===t.shopid&&(i.selectShop=t,i.tabBar.selectedIndex=e)}),this.updateTop(),this.ZJ36(),this.endScroller()},t.prototype.ZJ36=function(){if(THH27.FHH67(this.selectShop.shopid)){var t;switch(this.selectShop.shopid){case P12.A30:t=THH27.FD39();break;case P12.A5:t=THH27.FB8();break;case P12.A14:t=THH27.FC57();break;case P12.A2:t=THH27.FB35();break;case P12.A18:t=THH27.FD35();break;case P12.A19:t=THH27.FD32();break;case P12.A32:t=THH27.FF43(1);break;case P12.A20:t=THH27.FF43(2);break;case P12.A15:t=THH27.FC62();break;case P12.A9:t=THH27.FB94();break;case P12.A21:t=THH27.FD34();break;case P12.A10:t=THH27.FF42();break;case P12.A27:t=THH27.FE30();break;case P12.A16:t=THH27.FC56();break;case P12.A11:t=THH27.FE29()}this.itemCollection.replaceAll(t),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=0}},t.prototype.updateTop=function(){var t=0;switch(this.selectShop.shopid){case P12.A30:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var e=App.CM.gtM(O6.B85).ZB37(),i=TG57.FB70(e);this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2522,i?i.name:"0"));break;case P12.A5:case P12.A14:this.shopDesc.visible=this.shopDesc.includeInLayout=!1,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);break;case P12.A2:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var s=App.CM.gtM(O6.C4),o=5e3;o=0<s.nTopRank&&s.nTopRank<5e3?s.nTopRank:5e3,this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2524,o));break;case P12.A18:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var r=App.CM.gtM(O6.B86);this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2518,r.gn));break;case P12.A19:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var n=App.CM.gtM(O6.B94),a=null!=n.an?n.an:0;this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2525,a));break;case P12.A32:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var h=App.CM.gtM(O6.C21);this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2504,h.singleBoss.sw));break;case P12.A20:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var p=App.CM.gtM(O6.C21);this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2516,p.peopleBoss.pw));break;case P12.A15:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var l=THH25.FJ37();this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2529,0<l?N17.menghuo[l].point:"无"));break;case P12.A9:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var c=App.CM.gtM(O6.B85);this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2505,c.md.totalPassTime));break;case P12.A21:case P12.A10:case P12.A27:case P12.A11:this.shopDesc.visible=this.shopDesc.includeInLayout=!1,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);break;case P12.A16:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var u=App.CM.gtM(O6.B78);return void(this.shopDesc.textFlow=O3.tr2(6959,u.stars))}},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A42),TG40.playClickEffect()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.selectShop=void 0,this.menuCollection.removeAll(),this.itemCollection.removeAll()},t}(BaseEuiView);__reflect(ShopFuliView.prototype,"ShopFuliView");var ShopLimitView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ShopPageSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.access.label=O3.tr(5016),this.cbRed.label=O3.tr(7418)},t.prototype.initData=function(){o.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ShopBaseItemNewRender,this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection},t.prototype.open=function(i){var s=this;(o.prototype.open.call(this),i)&&(t=N15.FHH66(I18.A6)).forEach(function(t,e){i===t.shopid&&(s.selectShop=t)});if(this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),!this.selectShop){var t=N15.FHH66(I18.A6);this.selectShop=t[0]}this.cbRed.selected=O4.FF89(L17.A42),this.GX5()},t.prototype.selectChange=function(t){var e=t.currentTarget,i=e.getChildAt(this.selectShop.index);if(!THH27.FHH67(e.selectedItem.shopid)){var s=e.getChildAt(e.selectedItem.index);return e.selectedIndex=this.selectShop.index,i.selected=!0,void(s.selected=!1)}i.selected=!1,this.selectShop=e.selectedItem,this.updateTop(),this.ZJ36(),this.endScroller(),TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(o.prototype.uBM.call(this,t,e),t instanceof THH14)this.GX5();else if(t instanceof TG15)this.GX5();else if(t instanceof TG20)this.GX5();else if(t instanceof TG30)this.GX5();else if(t instanceof TG48){var s=e[0];if(s&&"time"===s)return;this.GX5()}else t instanceof TG12&&e[0]==P4.S94&&this.GX5()},t.prototype.GX5=function(){var i=this,t=N15.FHH66(I18.A6);this.menuCollection.replaceAll(t),this.menuCollection.refresh(),t.forEach(function(t,e){i.selectShop.shopid===t.shopid&&(i.selectShop=t,i.tabBar.selectedIndex=e)}),this.updateTop(),this.ZJ36(),this.endScroller()},t.prototype.ZJ36=function(){if(THH27.FHH67(this.selectShop.shopid)){var t;switch(this.selectShop.shopid){case P12.A31:t=THH27.FD36();break;case P12.A24:t=THH27.FF44();break;case P12.A17:t=THH27.FD33();break;case P12.A26:t=THH27.FE31();break;case P12.A7:t=THH27.FE27();break;case P12.A4:t=THH27.FE41();break;case P12.A1:case P12.HEROBATTLE_SHOP:t=THH27.FK15(this.selectShop.shopid)}this.itemCollection.replaceAll(t),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=0}},t.prototype.updateTop=function(){var t=0;switch(this.selectShop.shopid){case P12.A31:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2519));break;case P12.A24:this.shopDesc.visible=this.shopDesc.includeInLayout=!1,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);break;case P12.A17:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.text=O3.tr(2514);break;case P12.A26:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t);var e=App.CM.gtM(O6.C4),i=5e3;i=0<e.nTopRank&&e.nTopRank<5e3?e.nTopRank:5e3,this.shopDesc.textFlow=M18.HTP.parser(O3.tr(2524,i));break;case P12.A7:case P12.A4:case P12.A1:case P12.HEROBATTLE_SHOP:this.shopDesc.visible=this.shopDesc.includeInLayout=!0,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t),this.shopDesc.textFlow=M18.HTP.parser(O3.tr(3401))}},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A42),TG40.playClickEffect()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.selectShop=void 0,this.menuCollection.removeAll(),this.itemCollection.removeAll()},t}(BaseEuiView);__reflect(ShopLimitView.prototype,"ShopLimitView");var ShopMainNewView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="SouthCAwardPanelSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.HH98,O7.HH28,"ShopEquipView",this.content),App.VM.rgS(O7.HH98,O7.G57,"ShopNormalView",this.content),App.VM.rgS(O7.HH98,O7.I3,"ShopFuliView",this.content),App.VM.rgS(O7.HH98,O7.HH29,"ShopLimitView",this.content),App.VM.rgS(O7.HH98,O7.E72,"ShopActivityView",this.content),App.VM.rgS(O7.HH98,O7.B70,"ShopClassupEquipView",this.content);var t=[O3.tr(2500),O3.tr(2501),O3.tr(2502),O3.tr(2503),O3.tr(3396),O3.tr(8735)],e=[O7.HH28,O7.G57,O7.I3,O7.HH29,O7.E72,O7.B70];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.btnList.scaleY=this.btnList.scaleX=.7},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(t,e){s.prototype.open.call(this,t);var i=t||O7.HH28;this.ZQ23(i,e),this.ZQ44()},t.prototype.ZQ44=function(){var t=O4.FF89(L17.A42),e=App.CM.gtM(O6.B98);e.remOrangeEquip&&0<e.remOrangeEquip.length&&!t?this.btnList.ZHH58(O7.HH28,1):this.btnList.ZHH58(O7.HH28,0),e.remClassupEquip&&0<e.remClassupEquip.length&&!t?this.btnList.ZHH58(O7.B70,1):this.btnList.ZHH58(O7.B70,0),THH27.FD40()&&!t?this.btnList.ZHH58(O7.I3,1):this.btnList.ZHH58(O7.I3,0),THH27.FC63()&&!t?this.btnList.ZHH58(O7.HH29,1):this.btnList.ZHH58(O7.HH29,0);var i=THH27.FB9();this.btnList.ZHH58(O7.E72,i&&!t?1:0)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t),this.ZQ44()},t.prototype.close=function(t){s.prototype.close.call(this,t)},t.prototype.ZQ23=function(t,e){switch(t){case O7.HH28:this.title=O3.tr(2530),this.btnList.ZM66(t,e);break;case O7.G57:if(!this.isPageOpen(I18.A4))return;this.title=O3.tr(3397),this.btnList.ZM66(t,e);break;case O7.I3:if(!this.isPageOpen(I18.A3))return;this.title=O3.tr(3398),this.btnList.ZM66(t,e);break;case O7.HH29:if(!this.isPageOpen(I18.A6))return;this.title=O3.tr(3399),this.btnList.ZM66(t,e);break;case O7.E72:if(!this.isPageOpen(I18.A2))return;this.title=O3.tr(3400),this.btnList.ZM66(t,e);break;case O7.B70:if(!this.isPageOpen(I18.A1))return;this.title=O3.tr(8753),this.btnList.ZM66(t,e)}},t.prototype.isPageOpen=function(t){var e=THH27.FG50(t);if(0<e){var i=K18.init.commonDesc1.value;return P18.sDP(M18.format(i,[e])),!1}return!0},t}(BasePanelView);__reflect(ShopMainNewView.prototype,"ShopMainNewView");var shop,ShopNormalView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="ShopPageSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.access.label=O3.tr(5016),this.cbRed.label=O3.tr(7418)},t.prototype.initData=function(){o.prototype.initData.call(this),this.itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemCollection,this.itemList.itemRenderer=ShopBaseItemNewRender,this.menuCollection=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuCollection},t.prototype.open=function(i){var s=this;(o.prototype.open.call(this),i)&&(t=N15.FHH66(I18.A4)).forEach(function(t,e){i===t.shopid&&(s.selectShop=t)});if(this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.addEventListener(egret.Event.CHANGE,this.changeCbRed,this),!this.selectShop){var t=N15.FHH66(I18.A4);this.selectShop=t[0]}this.cbRed.selected=O4.FF89(L17.A42),this.GX5()},t.prototype.selectChange=function(t){var e=t.currentTarget,i=e.getChildAt(this.selectShop.index);if(!THH27.FHH67(e.selectedItem.shopid)){var s=e.getChildAt(e.selectedItem.index);return e.selectedIndex=this.selectShop.index,i.selected=!0,void(s.selected=!1)}i.selected=!1,this.selectShop=e.selectedItem,this.updateTop(),this.ZJ36(),this.endScroller(),TG40.playClickEffect()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof THH14?this.updateTop():t instanceof TG12&&e[0]==P4.S94&&this.GX5()},t.prototype.GX5=function(){var i=this,t=N15.FHH66(I18.A4);this.menuCollection.replaceAll(t),this.menuCollection.refresh(),t.forEach(function(t,e){i.selectShop.shopid===t.shopid&&(i.selectShop=t,i.tabBar.selectedIndex=e)}),this.updateTop(),this.ZJ36(),this.endScroller()},t.prototype.ZJ36=function(){if(THH27.FHH67(this.selectShop.shopid)){var t;switch(this.selectShop.shopid){case P12.A29:(t=THH27.FA74(2)).sort(function(t,e){return t.id-e.id});break;case P12.A13:(t=THH27.FA74(1)).sort(function(t,e){return t.id-e.id});break;case P12.A23:t=THH27.FE40();break;case P12.A27:t=THH27.FE30()}this.itemCollection.replaceAll(t),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=0}},t.prototype.updateTop=function(){var t=0;switch(this.selectShop.shopid){case P12.A29:case P12.A13:case P12.A23:this.shopDesc.visible=this.shopDesc.includeInLayout=!1,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.textFlow=M18.HTP.parse(O3.tr(4150,t));break;case P12.A27:this.shopDesc.visible=this.shopDesc.includeInLayout=!1,this.access.visible=!1,this.showicon.source=this.selectShop.showicon,t=N12.giC(this.selectShop.showid),this.ownnum.text=String(t)}},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.changeCbRed=function(){App.CM.apF(O6.B82,L13.A24,L17.A42),TG40.playClickEffect()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.cbRed.removeEventListener(egret.Event.CHANGE,this.changeCbRed,this),this.selectShop=void 0,this.menuCollection.removeAll(),this.itemCollection.removeAll()},t}(BaseEuiView);__reflect(ShopNormalView.prototype,"ShopNormalView"),function(t){var e=function(){};(shop||(shop={})).ShopBuyRes=e,__reflect(e.prototype,"shop.ShopBuyRes")}();var TG29=function(){function e(){}return e.FK35=function(t){e.skillAll=t.skill_skillall||{},e.effectID=t.skill_effectid||{}},e.getSkill=function(t){return e.skillAll[t]},e.FL95=function(t){return e.effectID[t]},e}();__reflect(TG29.prototype,"TG29");var O1=function(){function o(){}return o.FK35=function(t){o.init=t.skin_init||{},o.npcSkins=o.ZY5()},o.getSkin=function(t){return o.init[t]},o.ZY5=function(){var t={};for(var e in o.init){var i=o.init[e],s=i.random;s&&(t[s]||(t[s]=[]),t[s].push(i.id))}return t},o}();__reflect(O1.prototype,"O1");var SmallTipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="SmallTipSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(5013)),this.confirm.label=O3.tr(5014)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.msg=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doConfirm,this)},t.prototype.close=function(){s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.confirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doConfirm,this),this.stringTip=null,this.msg=null,this.controllerConst=null,this.reqConst=null,this.ZT20=null,this.methodObj=null},t.prototype.closeSelf=function(){App.VM.close(O7.I12)},t.prototype.doConfirm=function(){if(this.ZT20)return this.ZT20.call(this.methodObj),void this.closeSelf();this.stringTip&&P18.sDP(this.stringTip),App.CM.apF(this.controllerConst,this.reqConst,this.msg),this.closeSelf()},t}(BaseEuiView);__reflect(SmallTipView.prototype,"SmallTipView");var L14=function(){function t(){}return t.A14=10001,t.A15=10002,t.A16=10003,t.A17=10004,t.A11=10005,t.A6=10006,t.A7=10007,t.A5=10008,t.A27=10009,t.A28=10010,t.A24=10011,t.A29=10012,t.A30=10013,t.A12=10014,t.A13=10015,t.A3=10016,t.A4=10017,t.A1=10018,t.A2=10019,t.A8=10020,t.A9=10021,t.A10=10022,t.A20=10023,t.A21=10024,t.A22=10025,t.A23=10026,t.A31=10027,t.A32=11001,t.A25=11002,t.A19=11003,t.A18=11004,t.A35=11005,t.A34=11006,t.A33=11007,t.A26=11008,t.A37=11009,t.A36=11010,t}();__reflect(L14.prototype,"L14");var TD47=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I66,"SocialView",t,K17.UI_Main),t.rgF(L14.A37,t.GR59,t),t.rgF(L14.A36,t.GP72,t),App.VM.register(O7.G51,"SocialMainView",t,K17.UI_Main_TOP),t.rgF(L14.A32,t.GK16,t),t.rgF(L14.A25,t.GI14,t),t.rgF(L14.A19,t.GD5,t),t.rgF(L14.A18,t.GC14,t),App.VM.register(O7.E93,"FriendDetailView",t,K17.UI_Main_TOP),t.rgF(L14.A35,t.GN88,t),t.rgF(L14.A34,t.GL91,t);var e=new TG30(t);return e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.I66),e.aLV(O7.G51),e.aLV(O7.E92),e.aLV(O7.HH46),e.aLV(O7.F91),e.aLV(O7.C50),e.aLV(O7.E93),e.aLV(O7.HH98),e.aLV(O7.HH29),e.aLV(O7.C55),e.aLV(O7.I85),t.mySocialProxy=new TG31(t),t.rgF(L14.A14,t.GN84,t),t.rgF(L14.A15,t.GN85,t),t.rgF(L14.A16,t.GP70,t),t.rgF(L14.A17,t.GP71,t),t.rgF(L14.A11,t.GK15,t),t.rgF(L14.A6,t.GG35,t),t.rgF(L14.A7,t.GG36,t),t.rgF(L14.A5,t.GE93,t),t.rgF(L14.A27,t.GW65,t),t.rgF(L14.A28,t.GW66,t),t.rgF(L14.A24,t.GW64,t),t.rgF(L14.A29,t.GW67,t),t.rgF(L14.A30,t.GW68,t),t.rgF(L14.A12,t.GN86,t),t.rgF(L14.A13,t.GN87,t),t.rgF(L14.A3,t.GG37,t),t.rgF(L14.A4,t.GG38,t),t.rgF(L14.A1,t.GG39,t),t.rgF(L14.A2,t.GG40,t),t.rgF(L14.A8,t.GR58,t),t.rgF(L14.A9,t.GK13,t),t.rgF(L14.A10,t.GK14,t),t.rgF(L14.A20,t.GL89,t),t.rgF(L14.A21,t.GL90,t),t.rgF(L14.A31,t.GR57,t),t}return __extends(t,i),t.prototype.GR57=function(t){if(200==t.head.state){var e=this.gtM();e.ZF84(t.body),e.ZT53(t.body),App.CM.apF(O6.B84,L14.A9),e.notify(P4.T38)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GL89=function(t,e){void 0===e&&(e=1);var i={targeId:t.nId,targeName:t.sName};this.mySocialProxy.ZD34(i,e)},t.prototype.GL90=function(t,e){if(208!=t.head.state)if(200==t.head.state)if(2==e){var i={};i.aid=t.body.aid,i.name=t.body.name,i.lv=t.body.lv,i.sc=t.body.sc,i.on=t.body.ol,i.as=t.body.as,i.gender=t.body.gender,i.c=t.body.c,i.icon=t.body.ic,TG73.FI77(i),App.VM.open(O7.G50,O7.HH52)}else{var s=this.gtM();s.ZT52(t.body),s.notify(),App.VM.open(O7.E93)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GK13=function(){return this.mySocialProxy.ZHH27()},t.prototype.GK14=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GR58=function(t){if(200==t.head.state){var e=this.gtM(),i=[];i.push(t.body);for(var s=1;s<5;s++)e.ZT49(i,s);e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GK15=function(t){if(200==t.head.state){var e=this.gtM(),i=[];i.push(t.body);for(var s=1;s<5;s++)e.ZT49(i,s);e.notify(),App.CM.apF(O6.B84,L14.A12),App.CM.apF(O6.B84,L14.A9)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GE93=function(t){if(200==t.head.state){var e=this.gtM(),i=[];i.push(t.body);for(var s=1;s<5;s++)e.ZT49(i,s);e.ZT53(t.body),e.notify(P4.C2),App.CM.apF(O6.B84,L14.A9)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG35=function(t){this.mySocialProxy.ZB59(t)},t.prototype.GG36=function(t){if(200==t.head.state){var e=this.gtM();e.ZJ40(t.body),e.ZF85(t.body),e.nFMa=0,e.notify(P4.C85)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW64=function(t){if(200==t.head.state){var e=this.gtM();e.ZJ39(t.body),e.nGetNum+1>parseInt(N18.FA38("collectGiftNum"))?e.redPoint=0:e.redPoint=1,e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW65=function(t){this.mySocialProxy.GW65(t)},t.prototype.GW66=function(t){if(200==t.head.state){P18.sDP(O3.tr(2613));var e=this.gtM();e.ZT49(t.body.ats,1),e.nGiveNum=t.body.gn,e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GW67=function(t){this.mySocialProxy.GW67(t),App.CM.apF(O6.B84,L14.A9)},t.prototype.GW68=function(t){if(200==t.head.state){P18.sDP(O3.tr(2627)),P5.sIs(t.body.ob);this.gtM();App.CM.apF(O6.B84,L14.A12)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GN84=function(t){this.mySocialProxy.ZF86(t)},t.prototype.GN85=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GN86=function(){this.mySocialProxy.ZM23()},t.prototype.GN87=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify(P4.F1)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GP70=function(t){var e={targeId:t.nId||t.nFId,targeName:t.sName||t.sFName};this.mySocialProxy.ZC79(e)},t.prototype.GP71=function(t){if(200==t.head.state){P18.sDP(O3.tr(2630));var e=this.gtM();e.ZE46(t.body),e.nFollowNum<parseInt(N18.FA38("friendNum"))&&(e.nFollowNum=e.nFollowNum+1);var i=[];i.push(t.body);for(var s=1;s<5;s++)e.ZT49(i,s);e.nFMa=1,e.notify(P4.G64),App.CM.apF(O6.B84,L14.A9),App.CM.apF(O6.B84,L14.A3)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG37=function(){this.mySocialProxy.ZF87()},t.prototype.GG38=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG39=function(){this.mySocialProxy.ZE47()},t.prototype.GG40=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GK16=function(){App.VM.open(O7.G51)},t.prototype.GI14=function(){App.VM.close(O7.G51)},t.prototype.GD5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];App.VM.open(O7.I12,i);var s=App.VM.gOV(O7.I12);s.lbContent.text=O3.tr(2631),s.stringTip=O3.tr(2632),s.controllerConst=O6.B84,s.reqConst=L14.A6},t.prototype.GC14=function(){App.VM.close(O7.I12)},t.prototype.GN88=function(){App.VM.open(O7.E93)},t.prototype.GL91=function(){App.VM.close(O7.E93)},t.prototype.GR59=function(){App.VM.open(O7.I66)},t.prototype.GP72=function(){App.VM.close(O7.I66)},t}(TE11);__reflect(TD47.prototype,"TD47");var SocialMainView=function(r){function t(t,e){var i=r.call(this,t,e)||this;App.VM.rgS(O7.G51,O7.E92,"SocialFollowView",i.content),App.VM.rgS(O7.G51,O7.HH46,"SocialFanView",i.content),App.VM.rgS(O7.G51,O7.F91,"SocialBlackView",i.content),App.VM.rgS(O7.G51,O7.C50,"SocialRecommendView",i.content),i.helpBtn.$setVisible(!0),i.btnShop=new com.Button,i.btnShop.bgStr="v1_btn_yqshangdian_png",i.content.addChild(i.btnShop),i.btnShop.$setX(60),i.btnShop.$setY(-54);var s=[O3.tr(2607),O3.tr(2608),O3.tr(2609),O3.tr(2610)],o=[O7.E92,O7.HH46,O7.F91,O7.C50];return i.btnList=new ButtonList(s,o,i.ZQ23.bind(i)),i.btnList.init(),i.btnGroup.addChild(i.btnList),i.title=O3.tr(2607),i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN32,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.content.addChild(this.btnShop);var i=t[0]||O7.E92;this.ZQ23(i),this.updateShopRp(),App.CM.gtM(O6.B84).fanList||App.CM.apF(O6.B84,L14.A12)},t.prototype.updateShopRp=function(){var t=THH27.FE32();this.btnShop.imgNew.visible=0<t},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e),t instanceof TG30&&this.ZE99(t),t instanceof THH14&&this.updateShopRp()},t.prototype.ZE99=function(t){this.btnList.ZHH58(O7.HH46,t.redPoint)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this,t),this.btnShop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN32,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZN32=function(){var t=O4.getLv(),e=N15.FG47(P12.A17);if(t<e){var i=K18.init.commonDesc1.value;P18.sDP(M18.format(i,[e]))}else App.VM.open(O7.HH98,O7.HH29,P12.A17)},t.prototype.openHelpView=function(){var t={title:O3.tr(2635),content:N18.init.help.value};App.VM.open(O7.I8,t)},t.prototype.ZQ23=function(t){switch(t){case O7.E92:this.title=O3.tr(2607),this.btnList.ZM66(t);break;case O7.HH46:this.title=O3.tr(2608),this.btnList.ZM66(t);break;case O7.F91:this.title=O3.tr(2609),this.btnList.ZM66(t);break;case O7.C50:this.title=O3.tr(2610),this.btnList.ZM66(t)}},t}(BasePanelView);__reflect(SocialMainView.prototype,"SocialMainView");var TG30=function(i){function t(t){var e=i.call(this,t)||this;return e.myFollowList=[],e.recommendList=[],e.blackList=[],e.nCurrentPage=1,e.nAllPage=1,e.nGiveNum=0,e.nGetNum=0,e.nFollowNum=0,e.nFanNum=0,e.nBlackNum=0,e.hasGive=0,e.redPoint=0,e.isBlack=!1,e}return __extends(t,i),t.prototype.initData=function(t){null!=t&&(this.redPoint=null!=t.gr?t.gr:this.redPoint,this.nCurrentPage=null!=t.page?t.page:this.nCurrentPage,this.nAllPage=null!=t.tp?t.tp:this.nAllPage,this.ZP64(t.ats),this.addMyFanList(t.fas),this.addBlackList(t.shids),this.ZHH26(t.ras),this.nGiveNum=null!=t.gn?t.gn:this.nGiveNum,this.nGetNum=null!=t.tn?t.tn:this.nGetNum,this.nFollowNum=null!=t.mac?t.mac:this.nFollowNum,this.nFanNum=null!=t.mfc?t.mfc:this.nFanNum,this.nBlackNum=null!=t.shc?t.shc:this.nBlackNum,!t.gr&&this.fanList&&(this.canGiveGift()&&this.nGetNum+1<parseInt(N18.FA38("collectGiftNum"))?this.redPoint=1:this.redPoint=0))},t.prototype.ZT49=function(t,e){if(t){var i;switch(e){case 1:i=this.myFollowList;break;case 2:i=this.fanList||[];break;case 3:i=this.blackList;break;case 4:i=this.recommendList}for(var s=0;s<t.length;s++)for(var o=t[s].aid,r=0;r<i.length;r++){i[r].nId==o&&(i[r].bSendGiftState=null!=t[s].on?t[s].on:i[r].bSendGiftState,i[r].bStarState=null!=t[s].mf?t[s].mf:i[r].bStarState,i[r].bOnlineState=null!=t[s].ol?t[s].ol:i[r].bOnlineState,i[r].nLv=null!=t[s].lv?t[s].lv:i[r].nLv,i[r].nPower=null!=t[s].sc?t[s].sc:i[r].nPower,i[r].sName=null!=t[s].sn?t[s].sn:i[r].sName,i[r].lastLoginTime=null!=t[s].st?t[s].st:i[r].lastLoginTime,i[r].nUnReadInfo=null!=t[s].nr?t[s].nr:i[r].nUnReadInfo,i[r].bGetGiftState=null!=t[s].get?t[s].get:i[r].bGetGiftState)}}},t.prototype.ZP64=function(t){if(null!=t){this.myFollowList=[];for(var e=0;e<t.length;e++){var i=new ChatData(t[e]);this.myFollowList[e]=i}}},t.prototype.addMyFanList=function(t){if(null!=t){this.fanList=[];for(var e=0;e<t.length;e++){var i=new ChatData(t[e]);this.fanList[e]=i}}},t.prototype.getFanById=function(t){if(this.fanList)for(var e=0;e<this.fanList.length;e++)if(t==this.fanList[e].nId)return this.fanList[e];return null},t.prototype.addBlackList=function(t){if(null!=t){this.blackList=[];for(var e=0;e<t.length;e++){var i=new ChatData(t[e]);this.blackList[e]=i}}},t.prototype.ZHH26=function(t){if(null!=t){this.recommendList=[];for(var e=0;e<t.length;e++){var i=new ChatData(t[e]);this.recommendList[e]=i}}},t.prototype.ZT52=function(t){this.nFId=t.aid,this.nFLv=t.lv,this.nFGender=t.gender,this.nFOl=t.ol,this.nFMa=t.ma,this.sFName=t.name,this.nFSc=t.sc,this.nFShie=t.shie,this.lnName=t.ln,this.nFCountry=t.c,this.lPartner=t.pn,this.obj=t.u,this.me=t.me,this.ic=t.ic},t.prototype.canSendGift=function(){for(var t=0;t<this.myFollowList.length;t++)if(0==this.myFollowList[t].bSendGiftState)return!0;return!1},t.prototype.canGiveGift=function(){if(this.fanList){for(var t=0;t<this.fanList.length;t++)if(0==this.fanList[t].bGetGiftState)return!0;return!1}},t.prototype.ZJ39=function(t){if(this.fanList&&0<this.fanList.length)for(var e=0;e<this.fanList.length;e++){this.fanList[e].nId==t.aid&&(this.fanList[e].bGetGiftState=t.get)}},t.prototype.ZM22=function(t){if(0<this.blackList.length)for(var e=0;e<this.blackList.length;e++){this.blackList[e].nId==t.aid&&this.blackList.splice(e,1)}},t.prototype.ZE46=function(t){if(0<this.recommendList.length)for(var e=0;e<this.recommendList.length;e++){this.recommendList[e].nId==t.aid&&this.recommendList.splice(e,1)}},t.prototype.ZF84=function(t){if(0<this.myFollowList.length)for(var e=0;e<this.myFollowList.length;e++){this.myFollowList[e].nId==t.aid&&(this.myFollowList.splice(e,1),this.nFollowNum=this.nFollowNum-1)}},t.prototype.ZT53=function(t){if(this.fanList&&0<this.fanList.length)for(var e=0;e<this.fanList.length;e++){this.fanList[e].nId==t.aid&&(this.fanList.splice(e,1),this.nFanNum=this.nFanNum-1)}},t.prototype.ZJ40=function(t){if(0<this.myFollowList.length)for(var e=0;e<this.myFollowList.length;e++){this.myFollowList[e].nId==t.aids&&(this.myFollowList.splice(e,1),this.nFollowNum=this.nFollowNum-1)}},t.prototype.ZF85=function(t){if(this.fanList&&0<this.fanList.length)for(var e=0;e<this.fanList.length;e++){this.fanList[e].nId==t.aids&&(this.fanList[e].bStarState=0)}},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TG30.prototype,"TG30");var TG31=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.E98,e.ZY10,e),e.rSM(P4.C2,e.ZJ43,e),e.rSM(P4.R67,e.GW64,e),e.rSM(P4.D75,e.ZY9,e),e.rSM(P4.T38,e.ZW86,e),e}return __extends(t,i),t.prototype.ZW86=function(t){this.apF(L14.A31,t)},t.prototype.ZJ41=function(t){var e={type:P4.P95,body:t};this.rSMO(P4.P96,this.ZJ42,this),this.sSM(e)},t.prototype.ZJ42=function(t){this.apF(L14.A23,t)},t.prototype.ZD34=function(t,e){var i={type:P4.P93,body:t},s={};s.type=e,this.rSMO(P4.P94,this.ZD35,this,s),this.sSM(i)},t.prototype.ZD35=function(t,e){var i=e.type;this.apF(L14.A21,t,i)},t.prototype.ZHH27=function(){var s=this;return new Promise(function(e,t){var i={type:P4.D76,body:{}};s.rSMO(P4.D77,function(t){s.apF(L14.A10,t),e("加载社交奖励信息完成")},s),s.sSM(i)})},t.prototype.ZY9=function(t){this.apF(L14.A8,t)},t.prototype.ZY10=function(t){this.apF(L14.A11,t)},t.prototype.ZJ43=function(t){this.apF(L14.A5,t)},t.prototype.GW64=function(t){this.apF(L14.A24,t)},t.prototype.ZB59=function(t){var e={type:P4.C84,body:t};this.rSMO(P4.C85,this.ZA48,this),this.sSM(e)},t.prototype.ZA48=function(t){this.apF(L14.A7,t)},t.prototype.GW65=function(t){var e={type:P4.T34,body:t};this.rSMO(P4.T35,this.ZHH29,this),this.sSM(e)},t.prototype.ZHH29=function(t){this.apF(L14.A28,t)},t.prototype.GW67=function(t){var e={type:P4.T36,body:t};this.rSMO(P4.T37,this.ZP65,this),this.sSM(e)},t.prototype.ZP65=function(t){this.apF(L14.A30,t)},t.prototype.ZF86=function(t){var e={type:P4.G61,body:t};this.rSMO(P4.G62,this.ZHH30,this),this.sSM(e)},t.prototype.ZHH30=function(t){this.apF(L14.A15,t)},t.prototype.ZM23=function(){var t={type:P4.E99,body:{}};this.rSMO(P4.F1,this.ZP66,this),this.sSM(t)},t.prototype.ZP66=function(t){this.apF(L14.A13,t)},t.prototype.ZC79=function(t){var e={type:P4.G63,body:t};this.rSMO(P4.G64,this.ZD36,this),this.sSM(e)},t.prototype.ZD36=function(t){this.apF(L14.A17,t)},t.prototype.ZF87=function(){var t={type:P4.A81,body:{}};this.rSMO(P4.A82,this.ZHH31,this),this.sSM(t)},t.prototype.ZHH31=function(t){this.apF(L14.A4,t)},t.prototype.ZE47=function(){var t={type:P4.A26,body:{}};this.rSMO(P4.A27,this.ZB98,this),this.sSM(t)},t.prototype.ZB98=function(t){this.apF(L14.A2,t)},t}(TG80);__reflect(TG31.prototype,"TG31");var DeleteItem=function(t){function e(){var e=t.call(this)||this;return e.lbBtnState.$setVisible(!1),e.gpFollow.$setVisible(!0),e.btnDelete.$setVisible(!0),e.btnInspire.$setVisible(!1),e.btnDelete.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e.ZP61(),TG40.playClickEffect()},e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.btnInspire.label=O3.tr(5844),this.btnDelete.label=O3.tr(5843)},e.prototype.ZP61=function(){App.CM.gtM(O6.B84);var t={type:1,ids:this.data.nId};App.CM.apF(O6.B84,L14.A19,t)},e}(ItemSocial);__reflect(DeleteItem.prototype,"DeleteItem");var FriendDetailView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="FriendDetailSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4455)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4456)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4457)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4458)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4459)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4460)),this.modifyName.label=O3.tr(4466),this.btnChat.label=O3.tr(4467)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.modifyName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.copyName,this),this.vipBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GP81,this),this.monthBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV21,this),this.btnChat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSelfChat,this),this.btnFollow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY6,this),this.btnTeacher.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openTeacher,this),this.btnShield.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDefriend,this);var i=App.CM.gtM(O6.B84);this.ZE99(i);var s=App.CM.gtM(O6.B92);this.ZF77(s),i.obj&&this.ZN38(i.obj),this.FG75()},t.prototype.FG75=function(){P7.FG67()&&(this.vipBtn.visible=!1,this.monthBtn.visible=!1)},t.prototype.ZF77=function(t){var e=App.CM.gtM(O6.B84);t.getMyAsById(e.nFId)||t.ZT23(e.nFId)?this.btnTeacher.label=O3.tr(2640):this.btnTeacher.label=O3.tr(2641)},t.prototype.ZE99=function(t){t.nFMa?this.btnFollow.label=O3.tr(2603):this.btnFollow.label=O3.tr(2611),t.nFShie?(t.nFMa=0,this.btnShield.label=O3.tr(2638)):this.btnShield.label=O3.tr(2612),this.avatarHead.source=t.ic,this.avatarHead.width=this.avatarHead.height=82,this.scoreLb.text=String(t.nFSc),this.nameLb.textFlow=M18.HTP.parse(O3.tr(4461,t.sFName)),0==t.nFGender?this.genderLb.textFlow=M18.HTP.parse(O3.tr(4462,O3.tr(6713))):this.genderLb.textFlow=M18.HTP.parse(O3.tr(4462,O3.tr(6714))),this.lvLb.textFlow=M18.HTP.parse(O3.tr(4463,String(t.nFLv))),this.unionLb.textFlow=M18.HTP.parse(O3.tr(4464,t.lnName)),""==t.lnName&&(this.unionLb.textFlow=M18.HTP.parse(O3.tr(4464,O3.tr(6715)))),this.partnerLb.textFlow=M18.HTP.parse(O3.tr(4465,O3.tr(6715))),t.lPartner&&(this.partnerLb.textFlow=M18.HTP.parse(O3.tr(4465,t.lPartner))),0==t.me?this.monthBtn.bgStr="v1_btn_yk_wjxq02_png":this.monthBtn.bgStr="v1_btn_yk_wjxq_png"},t.prototype.ZN38=function(t){this.roleObj&&(this.roleGrp.removeChildren(),this.roleObj.destory(),this.roleObj=null),this.roleObj=new FightGameObject,this.roleObj.action=Action.Stand;var e={x:0,y:0,dir:Dir.br,objType:P13.A6};this.roleObj.setBaseData(e),t.bt=BehaviourType.Attack_d,t.sr=1,this.roleObj.setData(t,this.roleGrp),this.roleObj.name=null},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e),t instanceof TG30&&this.ZE99(t),t instanceof TG23&&this.ZF77(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.modifyName.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.copyName,this),this.vipBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GP81,this),this.monthBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV21,this),this.btnChat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSelfChat,this),this.btnFollow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY6,this),this.btnTeacher.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openTeacher,this),this.btnShield.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDefriend,this),this.roleGrp.removeChildren(),this.roleObj.destory(),this.roleObj=null},t.prototype.closeSelf=function(){this.apF(L13.A62)},t.prototype.openSelfChat=function(){var t=App.CM.gtM(O6.B82),e=App.CM.gtM(O6.C13).baseDatas[P9.A15];if(t.avatarInfo.l<e.needlevel)P18.sDP(O3.tr(5685,e.needlevel,e.describe));else{var i=App.CM.gtM(O6.B84),s={aid:i.nFId,sn:i.sFName,sc:i.nFSc,lv:i.nFLv,ol:i.nFOl,c:i.nFCountry,gender:i.nFGender,ic:i.ic};App.CM.apF(O6.C13,O12.A26,s),App.CM.apF(O6.B84,L14.A25),this.closeSelf()}},t.prototype.ZY6=function(){var t=App.CM.gtM(O6.B84);if(t.nFMa){var e={type:1,ids:t.nFId};App.CM.apF(O6.B84,L14.A6,e),P18.sDP(O3.tr(2639))}else App.CM.apF(O6.B84,L14.A16,t)},t.prototype.openDefriend=function(){var t=App.CM.gtM(O6.B84);t.nFShie?App.CM.apF(O6.C13,O12.A8,t.nFId):App.CM.apF(O6.C13,O12.A10,t)},t.prototype.openTeacher=function(){if(TG73.canGetAs()){var t=App.CM.gtM(O6.B84),e=App.CM.gtM(O6.B92);if(e.getMyAsById(t.nFId)){var i={sLink:2502};TG84.goToDlg(i)}if(e.ZT23(t.nFId)){i={sLink:2501};TG84.goToDlg(i)}e.getMyAsById(t.nFId)||e.ZT23(t.nFId)||App.CM.apF(O6.B92,M1.A21,t.nFId)}},t.prototype.ZV22=function(){this.apF(L13.A63)},t.prototype.GP81=function(){App.VM.open(O7.I40)},t.prototype.copyName=function(){var t=this.nameLb.text;"wxgame"===platform.name?platform.setClipboardData(t,function(){P18.sDP("复制成功")}):(O4.FE66(t),P18.sDP("复制成功"))},t.prototype.ZR7=function(){this.apF(L13.A45)},t.prototype.ZV21=function(){App.VM.open(O7.F64,O7.C53)},t}(BaseEuiView);__reflect(FriendDetailView.prototype,"FriendDetailView");var ItemBlackView=function(e){function t(){var t=e.call(this)||this;return t.btnDeleteBlack.$setVisible(!0),t.btnDeleteBlack.addEventListener(egret.TouchEvent.TOUCH_TAP,t.ZP61,t),t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.btnDeleteBlack.label=O3.tr(5843)},t.prototype.ZP61=function(){App.CM.gtM(O6.B84);App.CM.apF(O6.C13,O12.A8,this.data.nId)},t}(ItemSocial);__reflect(ItemBlackView.prototype,"ItemBlackView");var ItemRecommend=function(t){function e(){var e=t.call(this)||this;return e.btnToFollow.$setVisible(!0),e.btnToFollow.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e.ZP62(),TG40.playClickEffect()},e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.btnToFollow.label=O3.tr(5841)},e.prototype.ZP62=function(){App.CM.gtM(O6.B84).nFollowNum>=parseInt(N18.FA38("friendNum"))?P18.sDP(O3.tr(2629)):App.CM.apF(O6.B84,L14.A16,this.data)},e}(ItemSocial);__reflect(ItemRecommend.prototype,"ItemRecommend");var ItemSocialFan=function(t){function e(){var e=t.call(this)||this;return e.gpFan.$setVisible(!0),e.lbBtnState.text=O3.tr(2628),e.btnFanFollow.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e.ZP62(),TG40.playClickEffect()},e),e.btnFanGet.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e.ZJ37(),TG40.playClickEffect()},e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.ZT49(),this.btnFanFollow.label=O3.tr(5841),this.btnFanGet.label=O3.tr(5842)},e.prototype.ZT49=function(){this.btnFanFollow.y=9,this.btnFanGet.y=58,1==this.data.bStarState?(this.btnFanFollow.$setVisible(!1),this.btnFanGet.y=34,this.lbBtnState.$setY(47)):(this.btnFanFollow.$setVisible(!0),this.btnFanGet.y=58,this.lbBtnState.$setY(70)),1==this.data.bGetGiftState?(this.btnFanGet.$setVisible(!1),this.lbBtnState.$setVisible(!0)):0==this.data.bGetGiftState?(this.btnFanGet.$setVisible(!0),this.lbBtnState.$setVisible(!1)):(this.btnFanGet.$setVisible(!1),this.lbBtnState.$setVisible(!1),this.btnFanFollow.y=34)},e.prototype.ZP62=function(){App.CM.gtM(O6.B84).nFollowNum>=parseInt(N18.FA38("friendNum"))?P18.sDP(O3.tr(2629)):App.CM.apF(O6.B84,L14.A16,this.data)},e.prototype.ZJ37=function(){if(App.CM.gtM(O6.B84).nGetNum>=parseInt(N18.FA38("collectGiftNum")))P18.sDP(O3.tr(2626));else{var t={type:1,targeId:this.data.nId};App.CM.apF(O6.B84,L14.A29,t)}},e}(ItemSocial);__reflect(ItemSocialFan.prototype,"ItemSocialFan");var ItemSocialFollow=function(t){function e(){var e=t.call(this)||this;return e.isCancelFollow=!1,e.gpFollow.$setVisible(!0),e.btnDelete.$setVisible(!1),e.btnInspire.$setVisible(!0),e.lbBtnState.text=O3.tr(2617),e.btnInspire.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e.ZM21(),TG40.playClickEffect()},e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.ZP63(),this.btnInspire.label=O3.tr(5844),this.btnDelete.label=O3.tr(5843)},e.prototype.ZP63=function(){1==this.data.bSendGiftState?(this.lbBtnState.$setVisible(!0),this.btnInspire.$setVisible(!1)):(this.lbBtnState.$setVisible(!1),this.btnInspire.$setVisible(!0))},e.prototype.ZM21=function(){if(App.CM.gtM(O6.B84).nGiveNum>=parseInt(N18.FA38("giveGiftNum")))P18.sDP(O3.tr(2614));else{var t={type:1,targeId:this.data.nId};App.CM.apF(O6.B84,L14.A27,t)}},e}(ItemSocial);__reflect(ItemSocialFollow.prototype,"ItemSocialFollow");var ItemSocialTab=function(i){function t(t){var e=i.call(this)||this;return e.skinName=SocialTabSkin,e.index=t,e.imgRedPoint.$setVisible(!1),e}return __extends(t,i),t.prototype.childrenCreated=function(){i.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){switch(this.index){case 0:this.lbName.textFlow=M18.HTP.parse(O3.tr(5009));break;case 1:this.lbName.textFlow=M18.HTP.parse(O3.tr(5010));break;case 2:this.lbName.textFlow=M18.HTP.parse(O3.tr(5011));break;case 3:this.lbName.textFlow=M18.HTP.parse(O3.tr(5012))}},t.prototype.setState=function(t){this.currentState=t},t.prototype.ZT50=function(t){t?this.imgRedPoint.$setVisible(!1):this.imgRedPoint.$setVisible(!0)},t}(eui.Component);__reflect(ItemSocialTab.prototype,"ItemSocialTab");var SocialBlackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.gpBlack.$setVisible(!0),i.ZY7(),i.createList(ItemBlackView),i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),App.CM.gtM(O6.B84).isBlack=!0,this.ZM7()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG30&&this.ZE99(t)},t.prototype.ZE99=function(t){this.allData=t.blackList,this.curPageNum=t.nCurrentPage,this.pageNum=t.nAllPage,0<this.allData.length?this.lLabel.$setVisible(!1):this.lLabel.$setVisible(!0),this.setLabelNum(t.nBlackNum),this.updateList()},t.prototype.ZY7=function(){this.lLabel=new eui.Label,this.lLabel.text=O3.tr(2624),this.lLabel.size=20,this.lLabel.textColor=parseInt("0xe5c7ac"),this.lLabel.$setX(185),this.lLabel.$setY(252),this.addChild(this.lLabel)},t.prototype.setLabelNum=function(t){var e=O3.tr(2600,O3.tr(2606),t,N18.FA38("blackListMaxLimit"));this.lbBlack.textFlow=M18.HTP.parser(e)},t}(SocialContentView);__reflect(SocialBlackView.prototype,"SocialBlackView");var SocialFanView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.nGetNum=0,i.gpFan.$setVisible(!0),i.ZY7(),i.createList(ItemSocialFan),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btnGet.label=O3.tr(3999)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),App.CM.gtM(O6.B84).isBlack=!1,this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE45,this),App.CM.apF(O6.B84,L14.A12)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TG30&&(e!=P4.M5&&e!=P4.T38||1<this.pageNum&&1<this.curPageNum&&this.allData.length%5==0&&(this.curPageNum=this.curPageNum-1),e==P4.F1&&this.ZY8(t),e==P4.C85&&this.fanListData(t),this.ZE99(t))},t.prototype.ZY8=function(t){this.curPageNum=t.nCurrentPage,this.pageNum=t.nAllPage,this.allData=t.fanList},t.prototype.fanListData=function(t){this.allData=t.fanList},t.prototype.ZE99=function(t){this.nGetNum=t.nGetNum,this.setLabelNum(t.nFollowNum,t.nFanNum),0<this.allData.length?this.lLabel.$setVisible(!1):this.lLabel.$setVisible(!0),this.updateList()},t.prototype.ZY7=function(){this.lLabel=new eui.Label,this.lLabel.text=O3.tr(2625),this.lLabel.size=20,this.lLabel.textColor=parseInt("0xe5c7ac"),this.lLabel.$setX(185),this.lLabel.$setY(252),this.addChild(this.lLabel)},t.prototype.setLabelNum=function(t,e){var i=O3.tr(2600,O3.tr(2604),this.nGetNum,N18.FA38("collectGiftNum"));this.lbGetNum.textFlow=M18.HTP.parser(i);var s=O3.tr(2600,O3.tr(2602),t,N18.FA38("friendNum"));this.lbfollowFan.textFlow=M18.HTP.parser(s);var o=App.CM.gtM(O6.B82),r=parseInt(N18.FA38("fansNum"))+o.avatarInfo.l,n=O3.tr(2600,O3.tr(2605),e,r);this.lbFanNum.textFlow=M18.HTP.parser(n)},t.prototype.ZE45=function(){var t=App.CM.gtM(O6.B84);if(this.nGetNum>=parseInt(N18.FA38("collectGiftNum")))P18.sDP(O3.tr(2626));else if(t.canGiveGift()){App.CM.apF(O6.B84,L14.A29,{type:2})}else P18.sDP(O3.tr(2636))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZE45,this)},t}(SocialContentView);__reflect(SocialFanView.prototype,"SocialFanView");var SocialFollowView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.gpFollow.$setVisible(!0),i.ZY7(),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btnInspire.label=O3.tr(3998)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.isCancel=!1,this.btnFollow.label=O3.tr(2603),App.CM.gtM(O6.B84).isBlack=!1,this.btnInspire.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF83,this),this.btnFollow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT51,this),App.CM.apF(O6.B84,L14.A3)},t.prototype.ZY7=function(){this.lLabel=new eui.Label,this.lLabel.text=O3.tr(2618),this.lLabel.size=20,this.lLabel.textColor=parseInt("0xe5c7ac"),this.lLabel.$setX(200),this.lLabel.$setY(260),this.addChild(this.lLabel),this.bButton=new com.Button,this.bButton.bgStr="v1_btn_yellow_1_png",this.bButton.colour="0xe5c7ac",this.bButton.label=O3.tr(2619),this.bButton.$setX(225),this.bButton.$setY(294),this.addChild(this.bButton),this.bButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZJ38,this)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TG30&&(e!=P4.C85&&e!=P4.M5&&e!=P4.T38||1<this.pageNum&&1<this.curPageNum&&this.allData.length%5==0&&(this.curPageNum=this.curPageNum-1),this.ZE99(t))},t.prototype.ZE99=function(t){this.allData=t.myFollowList,this.setLabelNum(t.nGiveNum,t.nFollowNum),0<this.allData.length?(this.showNullView(!1),this.isCancel?(this.sortDataList(2),this.createList(DeleteItem)):(this.sortDataList(1),this.createList(ItemSocialFollow))):this.showNullView(!0),this.updateList()},t.prototype.showNullView=function(t){t?(this.lLabel.$setVisible(!0),this.bButton.$setVisible(!0)):(this.lLabel.$setVisible(!1),this.bButton.$setVisible(!1))},t.prototype.sortDataList=function(t){1==t?this.allData=this.allData.sort(function(t,e){var i=e.bOnlineState-t.bOnlineState;return 0!==i?i:e.lastLoginTime-t.lastLoginTime}):2==t&&(this.allData=this.allData.sort(function(t,e){var i=t.bOnlineState-e.bOnlineState;if(0!==i)return i;var s=t.nLv-e.nLv;return 0!==s?s:e.lastLoginTime-t.lastLoginTime}))},t.prototype.setLabelNum=function(t,e){var i=O3.tr(2600,O3.tr(2601),t,N18.FA38("giveGiftNum"));this.lbInspire.textFlow=M18.HTP.parser(i);var s=O3.tr(2600,O3.tr(2602),e,N18.FA38("friendNum"));this.lbFollow.textFlow=M18.HTP.parser(s)},t.prototype.ZJ38=function(){App.VM.gOV(O7.G51).ZQ23(O7.C50)},t.prototype.ZF83=function(){var t=App.CM.gtM(O6.B84);if(0<t.myFollowList.length)if(t.canSendGift())if(t.nGiveNum>=parseInt(N18.FA38("giveGiftNum")))P18.sDP(O3.tr(2614));else{App.CM.apF(O6.B84,L14.A27,{type:2})}else P18.sDP(O3.tr(2615));else P18.sDP(O3.tr(2615))},t.prototype.ZT51=function(){this.isCancel=!this.isCancel,this.isCancel?(this.btnFollow.label=O3.tr(2616),this.sortDataList(2),this.createList(DeleteItem)):(this.sortDataList(1),this.createList(ItemSocialFollow),this.btnFollow.label=O3.tr(2603)),this.updateList()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnInspire.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF83,this),this.btnFollow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT51,this)},t}(SocialContentView);__reflect(SocialFollowView.prototype,"SocialFollowView");var SocialRecommendView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.gpRecommend.$setVisible(!0),i.createList(ItemRecommend),i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),App.CM.gtM(O6.B84).isBlack=!1,App.CM.apF(O6.B84,L14.A1)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TG30&&(e!=P4.G64&&e!=P4.M5||1<this.pageNum&&1<this.curPageNum&&this.allData.length%5==0&&(this.curPageNum=this.curPageNum-1),this.ZE99(t))},t.prototype.ZE99=function(t){this.allData=t.recommendList,this.setLabelNum(t.nFollowNum),this.updateList()},t.prototype.setLabelNum=function(t){var e=O3.tr(2600,O3.tr(2602),t,N18.FA38("friendNum"));this.lbFollowRec.textFlow=M18.HTP.parser(e)},t}(SocialContentView);__reflect(SocialRecommendView.prototype,"SocialRecommendView");var SocialView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.sGN("release_social"),i.skinName=SocialSkin,i}return __extends(t,n),t.prototype.initData=function(){n.prototype.initData.call(this)},t.prototype.initUI=function(){n.prototype.initUI.call(this),this.dlg.title=O3.tr(3995),this.marriageLabel0.textFlow=M18.HTP.parse(O3.tr(7301))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this,t);var i=O4.getLv(),s=I7.FL66();this.marriageLabel.textFlow=M18.HTP.parse(O3.tr(3996,s)),s<=i&&(this.marriageLabel.text=O3.tr(2643));var o=L8.FL66();this.mentorshipLabel.textFlow=M18.HTP.parse(O3.tr(3996,o)),o<=i&&(this.mentorshipLabel.text=O3.tr(2643)),this.friendImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFriend,this),this.marriageImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMarriage,this),this.mentorshipImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMentorship,this),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this);var r=App.CM.gtM(O6.B84);this.ZE99(r),this.ZC94(),this.ZF77()},t.prototype.close=function(){this.friendImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFriend,this),this.marriageImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMarriage,this),this.mentorshipImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMentorship,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e),t instanceof TG30&&this.ZE99(t),t instanceof TF45&&this.ZC94(),t instanceof THH9&&this.ZC94(),t instanceof TG12&&this.ZC94(),t instanceof TG23&&this.ZF77()},t.prototype.ZE99=function(t){this.imgNew1.visible=0<t.redPoint},t.prototype.ZC94=function(){if("publish"===platform.name){var t=this.marriageImg.parent;return t.visible=!1,t.includeInLayout=!1,void(this.mentorshipImg.parent.y=t.y)}var e=App.CM.gtM(O6.B42);this.imgNew2.visible=0<e.FL35()},t.prototype.ZF77=function(){this.imgNew3.visible=0<TG73.FL35()},t.prototype.oCC=function(){App.CM.apF(O6.B84,L14.A36)},t.prototype.onFriend=function(){App.CM.apF(O6.B84,L14.A32),TG40.playClickEffect()},t.prototype.onMarriage=function(){TF83.FJ99()?App.CM.apF(O6.B42,I9.A24):App.CM.apF(O6.B42,I9.A21),TG40.playClickEffect()},t.prototype.onMentorship=function(){var t=L8.FL66();if(t>App.CM.gtM(O6.B82).avatarInfo.l){var e=K18.init.commonDesc1.value;P18.sDP(M18.format(e,[t]))}else App.CM.apF(O6.B92,M1.A25);TG40.playClickEffect()},t}(BaseEuiView);__reflect(SocialView.prototype,"SocialView");var TD48=function(){function O(){}return O.FK35=function(t){for(var e in O.init=t.secret_init,O.secret=t.secret_secret,O.shop=t.secret_shop,O.secretLength=0,O.secret)O.secretLength++},O.gIV=function(t){var e=void 0;return O.init?e=O.init[t].value:e},O.FK16=function(t){var e=[],i=O.shop;for(var s in i)if(t>=i[s].unlocklv){var o=i[s],r=o.index,n=o.goods.split(":")[0],a=o.prices,h=n,p=N12.gID(n).desc,l=N12.FK5(n),c=N12.FL5(n),u=N12.FJ86(n),d=Number(o.goods.split(":")[1]),v=Number(a.split(":")[0]),f=Number(a.split(":")[1]),g=N12.FJ86(v),m=o.batchnum,y=o.limittype,A=o.limitnums,b=o.limittype?this.FE43(t,o.limitnums):0,T={index:r,limitInfo:A,batchnum:m,id:Number(s),itemid:h,bg:c,icon:u,itemname:l,itemnum:d,costIcon:g,costNum:f,costId:v,goods:n,prices:a,limitType:y,limitNums:b,buyNums:0,desc:p};e.push(T)}return e},O.FI94=function(t){var e=t+1,i=[],s=O.shop;function o(t,e){if(t)for(var i=0,s=t.split("|");i<s.length;i++){if(s[i].indexOf(e+","))return!0}return!1}for(var r in s)if(e==s[r].unlocklv||o(s[r].limitnums,e)){var n=s[r],a=n.index,h=n.goods.split(":")[0],p=n.prices,l=h,c=N12.gID(h).desc,u=N12.FK5(h),d=N12.FL5(h),v=N12.FJ86(h),f=Number(n.goods.split(":")[1]),g=Number(p.split(":")[0]),m=Number(p.split(":")[1]),y=N12.FJ86(g),A=n.batchnum,b=n.limittype,T=n.limitnums,C=n.limittype?this.FE43(t+1,n.limitnums):0,w={index:a,limitInfo:T,batchnum:A,id:Number(r),itemid:l,bg:d,icon:v,itemname:u,itemnum:f,costIcon:y,costNum:m,costId:g,goods:h,prices:p,limitType:b,limitNums:C,buyNums:0,desc:c};i.push(w)}return i},O.FI95=function(t){var e=[],i=O.shop;for(var s in i)if(t>=i[s].unlocklv){var o=i[s],r=o.limittype;if("0"==r)continue;var n=this.FE43(t,o.limitnums),a=this.FE43(t+1,o.limitnums);if(n!=a){var h={goods:o.goods,limitType:r,limitNums:n,NLNums:a};e.push(h)}}return e},O.FE43=function(t,e){var i=e.split("|"),s=0;for(var o in i){var r=i[o].split(",");if(!(t>=Number(r[0])))return s;s=Number(r[1])}return s},O.FG51=function(t){var e=0,i=this.gIV("shopUnlock").split("|");for(var s in i){if(e++,t<i[s].split(",")[1].split("-")[1])return e}return e},O}();__reflect(TD48.prototype,"TD48");var G6=function(){function t(){}return t.A11=10001,t.A12=10002,t.A1=10003,t.A2=10004,t.A9=10005,t.A10=10006,t.A4=10007,t.A5=10008,t.A15=10009,t.A16=10010,t.A13=10012,t.A8=20001,t.A6=20002,t.A7=20003,t.A3=20004,t.A18=20005,t.A17=20006,t.A14=20007,t}();__reflect(G6.prototype,"G6");var TB35=function(i){function t(){var t=i.call(this)||this,e=new TE7(t);return t.proxy=new TE8(t),e.aLV(O7.HH17),e.aLV(O7.HH18),e.aLV(O7.C96),e.aLV(O7.C97),e.aLV(O7.C98),e.aLV(O7.C99),App.VM.register(O7.HH18,"SouthCAwardRankView",t,K17.UI_Main_TOP),App.VM.register(O7.C96,"SouthCAwardMainView",t,K17.UI_Main_TOP),App.VM.register(O7.D79,"SouthCAwardBuyView",t,K17.UI_Main_TOP),t.rgF(G6.A8,function(){App.VM.open(O7.HH18)},t),t.rgF(G6.A6,function(){App.VM.close(O7.HH18)},t),t.rgF(G6.A7,function(){App.VM.open(O7.C96)},t),t.rgF(G6.A3,function(){App.VM.close(O7.C96)},t),t.rgF(G6.A17,function(t){App.VM.open(O7.D79,t)},t),t.rgF(G6.A14,function(){App.VM.close(O7.D79)},t),t.rgF(G6.A11,t.loadReq,t),t.rgF(G6.A12,t.loadRes,t),t.rgF(G6.A1,t.GU61,t),t.rgF(G6.A2,t.GU62,t),t.rgF(G6.A9,t.sweepReq,t),t.rgF(G6.A10,t.sweepRes,t),t.rgF(G6.A4,t.GV55,t),t.rgF(G6.A5,t.GV54,t),t.rgF(G6.A15,t.buyReq,t),t.rgF(G6.A16,t.buyRes,t),t.rgF(G6.A13,t.pushRes,t),t}return __extends(t,i),t.prototype.loadReq=function(){this.proxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body,!0),e.notify(P4.W95)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GU61=function(t){var e=this.gtM();if(0<e.rcd){P7.fightCoolingCD(e.rcd);var i=App.VM.gOV(O7.HH17);i&&i.ZU92()}else t==e.voData.cp?this.proxy.GU61():P18.sDP(O3.tr(5669))},t.prototype.GU62=function(t){if(200==t.head.state){var s=this.gtM();if(!t.body.fr)return P7.fightCoolingCD(t.body.cd_),void(s.rcd=t.body.cd_);s.setData(t.body,!0),s.notify(P4.R17);var o={fr:t.body.fr,ob:t.body.ob};App.CM.apF(O6.B99,N1.A11,o.fr,{needResult:!0,type:P15.A34,rewards:o.ob,help:!1},function(t,e){App.VM.open(O7.HH95,O7.HH17,"byFight");var i=App.VM.gOV(O7.HH17);o.fr.v?(i.autoChallenge.selected=s.isAutoType,s.isAutoType&&i.chooseChange()):i.ZU92()})}else P18.sDP(K18.getTips(t.head.state))},t.prototype.sweepReq=function(){this.proxy.sweepReq()},t.prototype.sweepRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.W15)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GV55=function(t){this.proxy.GV55(t)},t.prototype.GV54=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.S75)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.buyReq=function(t,e){this.proxy.buyReq(t,e)},t.prototype.buyRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.X56)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.pushRes=function(t){if(200==t.head.state){var e=this.gtM();e.setData(t.body),e.notify(P4.X56)}else P18.sDP(K18.getTips(t.head.state))},t}(TE11);__reflect(TB35.prototype,"TB35");var TE7=function(i){function t(){var t=null!==i&&i.apply(this,arguments)||this;return t.rcd=0,t}return __extends(t,i),t.prototype.setData=function(t,e){void 0===e&&(e=!1),null!=this.voData?this.voData.initActData(t):this.voData=new SouthChinaData(t),t.ob&&!e&&P5.sIs(t.ob)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t.prototype.getRed=function(){return this.voData.cp<this.voData.ff?1:this.FL42()?1:0},t.prototype.FL42=function(){for(var t in this.winList)if(this.winList[t].type==J13.A3)return 1;return 0},Object.defineProperty(t.prototype,"winList",{get:function(){var t=[],e=TD48.secret;for(var i in e){var s=Number(e[i].index),o=0;o=this.voData.ff>=s?0<=this.voData.alGet.indexOf(s)?J13.A2:J13.A3:J13.A1,t.push({type:o,cp:this.voData.ff,index:e[i].index,rew:e[i].firstrewarditem})}return t},enumerable:!0,configurable:!0}),__decorate([Common.timeRefresh()],t.prototype,"rcd",void 0),t}(TG79);__reflect(TE7.prototype,"TE7");var TE8=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y15,e.push,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W94,body:{}};s.rSMO(P4.W95,function(t){s.apF(G6.A12,t),e("加载南华秘境信息完成")},s),s.sSM(i)})},t.prototype.GU61=function(){var t={type:P4.R16,body:{}};this.rSMO(P4.R17,this.GU62,this),this.sSM(t)},t.prototype.GU62=function(t){this.apF(G6.A2,t)},t.prototype.sweepReq=function(){var t={type:P4.W14,body:{}};this.rSMO(P4.W15,this.sweepRes,this),this.sSM(t)},t.prototype.sweepRes=function(t){this.apF(G6.A10,t)},t.prototype.GV55=function(t){var e={type:P4.S74,body:{grade:t}};this.rSMO(P4.S75,this.GV54,this),this.sSM(e)},t.prototype.GV54=function(t){this.apF(G6.A5,t)},t.prototype.buyReq=function(t,e){var i={type:P4.X55,body:{gid:t,num:e}};this.rSMO(P4.X56,this.buyRes,this),this.sSM(i)},t.prototype.buyRes=function(t){this.apF(G6.A16,t)},t.prototype.push=function(t){this.apF(G6.A13,t)},t}(TG80);__reflect(TE8.prototype,"TE8");var TE97=function(){function t(){}return t.FL13=function(t){var e=TD48.gIV("shopUnlock").split("|"),i=[];for(var s in e){var o=e[s].split(",")[0],r=e[s].split(",")[1];i.push({num:Number(o),min:Number(r.split("-")[0]),max:Number(r.split("-")[1])})}for(var s in i){if((r=i[s]).min<=t&&r.max>=t)return r.num}return 1},t.FG52=function(t){var e=TD48.gIV("shopUnlock").split("|"),i=[];for(var s in e){var o=e[s].split(",")[0],r=e[s].split(",")[1];i.push({num:Number(o),min:Number(r.split("-")[0]),max:Number(r.split("-")[1])})}for(var s in i){if((r=i[s]).min>t&&t)return r.min}return 1},t.FHH68=function(t){var e=TD48.gIV("shopUnlock").split("|"),i=[];for(var s in e){var o=e[s].split(",")[0],r=e[s].split(",")[1];i.push({num:Number(o),min:Number(r.split("-")[0]),max:Number(r.split("-")[1])})}for(var s in i){if((r=i[s]).min<=t&&r.max>=t)return r.num}return 1},t.FK13=function(t){switch(t){case-1:return 2507;case 1:return 8117;case 2:return 8118;case 3:return 8119;case 0:return 2507}},t.isOpen=function(){var t=Number(TD48.gIV("serverDate")),e=Number(TD48.gIV("unlockLv")),i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.B43).serOpenDay+1;return i.avatarInfo.l>=e&&t<=s},t}();__reflect(TE97.prototype,"TE97");var SCAwardPushItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=SCAwardPushItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this),this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.onAddToStage=function(){this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starReceive,this)},t.prototype.onRemoveStage=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.starReceive,this)},t.prototype.starReceive=function(){App.CM.apF(O6.B10,G6.A4,this.index)},t.prototype.dataChanged=function(){var t=this.data.rew.split(";"),e=[];this.index=this.data.index;var i=Math.floor((this.index-1)/5)+1,s=this.index%5;for(var o in 0==s&&(s=5),this.titleLb.textFlow=M18.HTP.parser(O3.tr(8066,i,s)),this.getBtn.label=O3.tr(8065),t){var r={itemData:{data:N12.gID(t[o].split(":")[0]),ct:t[o].split(":")[1]},isBottom:!1};e.push(r)}this.dataSource.replaceAll(e);var n=this.data.cp,a=Math.floor((n-1)/5)+1,h=n%5;0==h&&(h=5),this.data.cp<this.index?this.colLb.textFlow=M18.HTP.parser(O3.tr(8113,a,h)):this.colLb.textFlow=M18.HTP.parser(O3.tr(8067,a,h)),this.data.type==J13.A3?(this.getImg.visible=!1,this.getBtn.visible=!0,this.colLb.visible=!0,this.getBtn.enabled=!0):this.data.type==J13.A2?(this.getImg.visible=!0,this.getBtn.visible=!1,this.colLb.visible=!1):(this.getImg.visible=!1,this.getBtn.visible=!0,this.colLb.visible=!0,this.getBtn.enabled=!1),P16.sGF(this.getBtn,!this.getBtn.enabled)},t}(eui.ItemRenderer);__reflect(SCAwardPushItem.prototype,"SCAwardPushItem");var SCAwardRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=CardFlopPersonalSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.dataChanged=function(){var t={itemData:{data:N12.gID(Number(this.data.goods)),ct:1},isBottom:!0};this.item1.data=t,this.item2.data=t,this.titleLb1.text=O3.tr(TE97.FK13(this.data.limitType),0,this.data.limitNums),this.titleLb2.text=O3.tr(TE97.FK13(this.data.limitType),0,this.data.maxNum)},t}(eui.ItemRenderer);__reflect(SCAwardRankItem.prototype,"SCAwardRankItem");var SCAwardShopHItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=SCAwardShopHItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starReceive,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.starReceive,this)},t.prototype.starReceive=function(){this.data.loop&&(0<this.data.limitNums&&this.data.buyNums==this.data.limitNums?P18.sDP(O3.tr(5015)):App.CM.apF(O6.B10,G6.A17,this.data),TG40.playClickEffect())},t.prototype.dataChanged=function(){var t=this.data.prices,e=N12.gID(Number(t.split(":")[0]));this.mgItem.setData(e),this.mgLb.text="x"+t.split(":")[1];var i={itemData:{data:N12.gID(Number(this.data.goods)),ct:this.data.itemnum},isBottom:!0,handler:function(){}};this.item.data=i,this.data.limitType?(this.title.text=O3.tr(this.FK13(this.data.limitType),this.data.buyNums,this.data.limitNums),this.data.buyNums>=this.data.limitNums&&this.data.buyNums&&(this.title.text=O3.tr(2512))):this.title.text=O3.tr(2507),this.title.textColor=7788311},t.prototype.FK13=function(t){switch(t){case-1:return 2507;case 1:return 2508;case 2:return 3509;case 3:return 3510;case 0:return 2507}},t}(eui.ItemRenderer);__reflect(SCAwardShopHItem.prototype,"SCAwardShopHItem");var SCAwardShopVItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=SCAwardShopVItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.dataChanged=function(){var t=N12.gID(Number(this.data.goods)),e={itemData:{data:t,ct:this.data.itemnum},isBottom:!1};!1===this.data.loop?(this.item1.data=e,this.nameLb1.visible=!0,this.nameLb2.visible=!1,O5.FB13(this.nameLb1,t.name,t.quality,2,!1),this.item2.visible=!1,this.titleLb2.visible=!1,this.titleLb1.text=O3.tr(TE97.FK13(this.data.limitType),this.data.limitNums),this.xinzengImage.visible=!0,this.jiantou.visible=!1):(this.item1.data=e,this.item2.visible=!0,this.item2.data=e,this.titleLb1.text=O3.tr(TE97.FK13(this.data.limitType),this.data.limitNums),this.titleLb2.visible=!0,this.titleLb2.text=O3.tr(TE97.FK13(this.data.limitType),this.data.maxNum),this.nameLb2.visible=!0,O5.FB13(this.nameLb1,t.name,t.quality,2,!1),O5.FB13(this.nameLb2,t.name,t.quality,2,!1),this.xinzengImage.visible=!1,this.jiantou.visible=!0)},t}(eui.ItemRenderer);__reflect(SCAwardShopVItem.prototype,"SCAwardShopVItem");var SCIconNItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=SCIconNItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starOpen,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.starOpen,this)},t.prototype.starOpen=function(){this.data.cp<5*this.index-4&&P18.sDP(O3.tr(6986))},t.prototype.dataChanged=function(){this.index=this.data.index,this.kuangImg.source=N12.getBox(0),this.tierLb.text=O3.tr(6936,this.index),this.iconImg.source=TD48.secret[5*this.index-4].icon;var t=!1,e=!1;this.data.cp>5*this.index?t=!0:this.data.cp<=5*this.index&&this.data.cp>=5*this.index-4&&(e=!0),this.clearance.visible=t,e?(App.THH32.rEf(this.theOne,"com"),App.THH33.aUE(this.theOne,"com",-40,-37)):App.THH32.rEf(this.theOne,"com")},t}(eui.ItemRenderer);__reflect(SCIconNItem.prototype,"SCIconNItem");var SCModelItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},e.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.starOpen,this)},e.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.starOpen,this)},e.prototype.starOpen=function(){this.slayImage.visible||App.CM.apF(O6.B10,G6.A1,5*(this.layerIndex-1)+this.index)},e.prototype.dataChanged=function(){this.index=this.data.index;var t=this.data.first;this.updateBoss(t);var e=Math.floor((t.index-1)/5)+1,i=t.index%5;0==i&&(i=5),this.nameLb.text=O3.tr(8105,e,i),this.slayImage.visible=this.data.loop,this.layerIndex=this.data.layerIndex,t.index==this.data.cp?(App.THH32.rEf(this,"pretend"),App.THH33.aUE(this,"pretend",10,-30)):App.THH32.rEf(this,"pretend")},e.prototype.updateBoss=function(t){if(t&&this.firstId!=t.monster){this.firstId=t.monster,this.boss&&(this.ckRole.removeChildren(),this.boss.destory(),this.boss=null),this.boss=new FightGameObject;var e=N17.FB56(t.monster),i={id:N17.FF93(e.pos8).image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d};this.boss.setData(i,this.ckRole)}},e}(eui.ItemRenderer);__reflect(SCModelItem.prototype,"SCModelItem");var SouthCAwardBuyView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.maxNum=99,i.skinName="ShopBuySkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.buyBtn.label=O3.tr(5017),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5018)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5019))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0];this._item=i,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof THH14&&this.GX5()},t.prototype.doDeTen=function(){var t=Number(this.copies.text);this.copies.text=t-10<1?"1":String(t-10);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doDeOne=function(){var t=Number(this.copies.text);this.copies.text=t-1<1?"1":String(t-1);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doInOne=function(){var t=Number(this._item.costId),e=Number(this.copies.text),i=N12.giC(t),s=i;if(t==N12.itemId.bindGold){if(s=N12.giC(N12.itemId.gold)+i,(e+1)*this._item.costNum>s)return}else if((e+1)*this._item.costNum>s)return;var o=this._item.batchnum;0<this._item.limitNums&&(o=Math.min(o,this._item.limitNums),o-=null!=this._item.buyNums?this._item.buyNums:this.getBuytime(this._item.shopid));var r=Math.floor(s/this._item.costNum),n=r>this.maxNum?this.maxNum:r;o=n<o?n:o,this.copies.text=o<e+1?String(o):String(e+1);var a=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+a},t.prototype.doInTen=function(){var t=this._item.costId,e=Number(this.copies.text),i=N12.giC(Number(t)),s=i;if(t==N12.itemId.bindGold){if(s=N12.giC(N12.itemId.gold)+i,(e+10)*this._item.costNum>s)return}else if((e+10)*this._item.costNum>s)return;var o=this._item.batchnum;0!=this._item.limitNums&&(o=this._item.limitNums,o-=null!=this._item.buyNums?this._item.buyNums:this.getBuytime(this._item.shopid));var r=Math.floor(s/this._item.limitNums),n=r>this.maxNum?this.maxNum:r;o=n<o?n:o,this.copies.text=o<e+10?String(o):String(e+10);var a=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+a},t.prototype.GX5=function(){var t=this._item,e=t.bg;this.iconBg.source=e;var i=t.icon;this.icon.source=i;var s=t.itemname;this.nameLb.text=s;var o=t.itemnum;this.num.text=o;var r=t.buyNums,n=t.limitType;this.buyBtn.touchEnabled=!0,this.buyBtn.filters=[],0==n||null==n?this.limitLb.text=O3.tr(2507):r<t.limitNums?t.limitNums?this.limitLb.text=O3.tr(this.FK13(t.limitType),t.buyNums,t.limitNums):this.limitLb.text=O3.tr(2507):(this.limitLb.textFlow=M18.HTP.parser(O3.tr(2509)),this.buyBtn.touchEnabled=!1,this.buyBtn.filters=[P16.GrayMatrixFilter]);var a=t.desc;this.desc.textFlow=M18.FG71(a);var h=t.costIcon;this.costIcon.source=h;var p=t.costNum;this.copies.text="1";var l=Number(this.copies.text);this.totalCost.text="x"+String(p*l)},t.prototype.FK13=function(t){switch(t){case-1:return 2507;case 1:return 2508;case 2:return 3509;case 3:return 3510;case 0:return 2507}},t.prototype.getBuytime=function(t){var e=App.CM.gtM(O6.C14),i=NaN,s=this._item.id;switch(t){case P12.A9:i=e.getBuyTime(P12.A9,s);break;case P12.A19:i=e.getBuyTime(P12.A19,s);break;case P12.A26:i=e.getBuyTime(P12.A26,s);break;case P12.A2:i=e.getBuyTime(P12.A2,s);break;case P12.A17:i=e.getBuyTime(P12.A17,s);break;case P12.A20:i=e.getBuyTime(P12.A20,s);break;case P12.A32:i=e.getBuyTime(P12.A32,s);break;case P12.A18:i=e.getBuyTime(P12.A18,s);break;case P12.A31:i=e.getBuyTime(P12.A31,s);break;case P12.A5:i=e.getBuyTime(P12.A5,s);break;case P12.A22:i=e.getBuyTime(P12.A22,s);break;case P12.A13:i=e.getBuyTime(P12.A13,s);break;case P12.A29:i=e.getBuyTime(P12.A29,s);break;case P12.A23:i=e.getBuyTime(P12.A23,s);break;case P12.A30:i=e.getBuyTime(P12.A30,s);break;case P12.A24:i=e.getBuyTime(P12.A24,s);break;case P12.A15:i=e.getBuyTime(P12.A15,s);break;case P12.A14:i=e.getBuyTime(P12.A14,s);break;case P12.A21:i=e.getBuyTime(P12.A21,s);break;case P12.A8:i=e.getBuyTime(P12.A8,s);break;case P12.A7:i=e.getBuyTime(P12.A7,s);break;case P12.A10:i=e.getBuyTime(P12.A10,s);break;case P12.A27:i=e.getBuyTime(P12.A27,s);break;case P12.A16:i=e.getBuyTime(P12.A16,s);break;case P12.A6:i=e.getBuyTime(P12.A6,s);case P12.A28:i=e.getBuyTime(P12.A28,s);break;case P12.A11:i=e.getBuyTime(P12.A11,s);break;case P12.A4:i=e.getBuyTime(P12.A4,s);break;case P12.A12:i=e.getBuyTime(P12.A12,s)}return i},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this)},t.prototype.showItem=function(t){if(this._item.type&&1!=this._item.type){var e=M10.ava[this._item.itemid];App.CM.apF(O6.B98,M19.A17,e)}else{var i=N12.gID(this._item.itemid),s=N12.giC(this._item.itemid);App.CM.apF(O6.C11,O14.A15,i,s)}},t.prototype.closeSelf=function(){App.CM.apF(O6.B10,G6.A14)},t.prototype.doBuy=function(){if(0!=this._item.lock){if(this._item.reqConst==O11.A47||this._item.reqConst==O11.A5)if(App.CM.gtM(O6.B98).isCanBuy())return void P18.sDP(O3.tr(2527));var t=this._item.id,e=Number(this.copies.text),i=Number(this._item.costId),s=N12.giC(i);if(e*this._item.costNum>s)return this.closeSelf(),void P18.sDP(O3.tr(8123));App.CM.apF(O6.B10,G6.A15,t,e),this.closeSelf()}else P18.sDP(O3.tr(2506))},t}(BaseEuiView);__reflect(SouthCAwardBuyView.prototype,"SouthCAwardBuyView");var SouthCAwardMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.C96,O7.C97,"SouthCAwardPushView",this.content),App.VM.rgS(O7.C96,O7.C98,"SouthCAwardShopView",this.content),App.VM.rgS(O7.C96,O7.C99,"SouthCAwardShowView",this.content);var t=[O3.tr(8068),O3.tr(1584),O3.tr(8071)],e=[O7.C98,O7.C97,O7.C99];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!1,this.title=O3.tr(1584)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.C98;this.ZQ23(i)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){switch(t){case O7.C97:this.title=O3.tr(1584),this.btnList.ZM66(t);break;case O7.C98:this.title=O3.tr(8068),this.btnList.ZM66(t);break;case O7.C99:this.title=O3.tr(8071),this.btnList.ZM66(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B10);this.btnList.ZHH58(O7.C97,t.FL42())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t}(BasePanelView);__reflect(SouthCAwardMainView.prototype,"SouthCAwardMainView");var SouthCAwardPushView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=SouthCAwardPushSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t={render:SCAwardPushItem,gap:5,width:this.main.width,height:this.main.height,arrowScale:1};this.ranklistView=new CommonListBase(t),this.main.addChild(this.ranklistView),this.ranklistView.verticalCenter=0,this.ranklistView.horizontalCenter=0},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.ranklistView.open(),this.updateUI()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TE7)switch(s){case P4.R17:case P4.S75:this.updateUI()}},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B10),e=[];for(var i in t.winList)t.winList[i].type==J13.A3&&e.push(t.winList[i]);for(var i in t.winList)t.winList[i].type==J13.A1&&e.push(t.winList[i]);for(var i in t.winList)t.winList[i].type==J13.A2&&e.push(t.winList[i]);this.ranklistView.rfL(e)},t.prototype.close=function(){o.prototype.close.call(this),this.ranklistView.close()},t}(BaseEuiView);__reflect(SouthCAwardPushView.prototype,"SouthCAwardPushView");var SouthCAwardRankView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="BronzeRankSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(8075)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5193)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5194)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5195)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(8076))},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this._itemCollection},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.bgMak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._rankRefreshSecond=TG57.FA25(),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3*this._rankRefreshSecond,0,this.autoRefresh,this),this.ZU17()},t.prototype.ZU17=function(){var t={type:RankType.SouthCAward,currPage:1};App.CM.apF(O6.C19,O18.A5,t)},t.prototype.autoRefresh=function(){this.ZU17()},t.prototype.uBM=function(t){if(t instanceof THH11){if(t.nType!=RankType.SouthCAward)return;this.GX5(t)}},t.prototype.GX5=function(t){if(t){if(t.rankList&&0<t.rankList.length){for(var e=new Array,i=1,s=0;s<t.rankList.length;s++){var o=t.rankList[s],r={};r.rank=o.nRank,r.rolename=o.sName,r.score=o.z;var n=o.ff,a=Math.floor((n-1)/5)+1;0==(p=n%5)&&(p=5),r.ck=O3.tr(8105,a,p),r.bg=i%2==0?"":"v1_img_kelashen_paihang_png",e.push(r),i++}this._itemCollection.replaceAll(e)}if(t.myRankList){var h=0<(o=t.myRankList).nRank?String(o.nRank):O3.tr(5197);if(this.myrank.textFlow=M18.HTP.parse(O3.tr(5198,h)),0<o.nRank){n=o.ff,a=Math.floor((n-1)/5)+1;0==(p=n%5)&&(p=5),this.myck.text=O3.tr(8069,a,p)}else if(o.ff){var p;n=o.ff,a=Math.floor((n-1)/5)+1;0==(p=n%5)&&(p=5),this.myck.text=O3.tr(8069,a,p),this.myck.textFlow=M18.HTP.parse(O3.tr(8069,a,p))}else this.myck.textFlow=M18.HTP.parse(O3.tr(8069,0,0))}this.endScroller()}else this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._itemCollection.removeAll(),this._rankRefreshSecond=null},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-690;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+690;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.closeSelf=function(){App.VM.close(O7.HH18)},t}(BaseEuiView);__reflect(SouthCAwardRankView.prototype,"SouthCAwardRankView");var SouthCAwardShopView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName=SouthCAwardShopSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this);var t=App.CM.gtM(O6.B10),e=TE97.FL13(t.voData.ff);this.title1.textFlow=M18.HTP.parser(O3.tr(8070,e));var i={render:SCAwardShopHItem,width:this.shopGroup.width,height:this.shopGroup.height,arrowScale:1,tileLayout:!0,verticalGap:10,horizontalGap:15};this.ranklistView=new CommonListBase(i),this.shopGroup.addChild(this.ranklistView),this.ranklistView.verticalCenter=0,this.ranklistView.horizontalCenter=0;var s=Number(TD48.gIV("shopMoney")),o=N12.gID(s);this.showicon0.setData(o),this.ownnum0.text=N12.giC(s)+""},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this),this.ranklistView.open(),this.updateUI()},t.prototype.onClickSweep=function(){this.aCF(O6.B5,G6.A9)},t.prototype.onClickRank=function(){this.aCF(O6.B5,G6.A8)},t.prototype.ZF30=function(){this.aCF(O6.B5,G6.A7)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TE7)switch(s){case P4.X56:this.updateUI();default:this.updateUI()}},t.prototype.updateUI=function(){for(var t=App.CM.gtM(O6.B10),e=TE97.FL13(t.voData.ff),i=TD48.FK16(e),s=0;s<i.length;s++)i[s].loop=!0,i[s].buyNums=t.voData.alBuy&&t.voData.alBuy[i[s].index]?t.voData.alBuy[i[s].index]:0;this.ranklistView.rfL(i);var o=Number(TD48.gIV("shopMoney"));this.ownnum0.text=N12.giC(o)+""},t.prototype.close=function(){r.prototype.close.call(this),this.ranklistView.close()},t}(BaseEuiView);__reflect(SouthCAwardShopView.prototype,"SouthCAwardShopView");var SouthCAwardShowView=function(a){function t(t,e){var i=a.call(this,t,e)||this;return i.skinName=SouthCAwardShowSkin,i}return __extends(t,a),t.prototype.initUI=function(){a.prototype.initUI.call(this);var t=App.CM.gtM(O6.B10),e=t.voData.ff?t.voData.ff:1,i=TE97.FG52(e),s=Math.floor((i-1)/5)+1,o=i%5;0==o&&(o=5),this.title0.textFlow=M18.HTP.parser(O3.tr(8072,s,o));var r=TE97.FHH68(t.voData.ff),n=(TD48.FK16(r),TD48.FI94(r),{render:SCAwardShopVItem,width:this.showTwo.width,height:this.showTwo.height,arrowScale:1,tileLayout:!0,verticalGap:10,horizontalGap:0});this.HlistView=new CommonListBase(n),this.showTwo.addChild(this.HlistView),this.HlistView.verticalCenter=0,this.HlistView.horizontalCenter=0,this.title.text=O3.tr(8073)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.open.call(this),this.HlistView.open(),this.updateUI()},t.prototype.onClickSweep=function(){this.aCF(O6.B5,G6.A9)},t.prototype.onClickRank=function(){this.aCF(O6.B5,G6.A8)},t.prototype.ZF30=function(){this.aCF(O6.B5,G6.A7)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.prototype.uBM.call(this,t,e);e[0];t instanceof TE7&&this.updateUI()},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B10),e=t.voData.ff?t.voData.ff:1,i=TE97.FG52(e),s=Math.floor((i-1)/5)+1,o=i%5;0==o&&(o=5),this.title0.textFlow=M18.HTP.parser(O3.tr(8072,s,o));var r=TE97.FHH68(t.voData.ff),n=TD48.FK16(r),a=TD48.FI94(r),h=[];for(var p in a)n.every(function(t){return t.index!=a[p].index})&&(a[p].loop=!1,h.push(a[p]));var l=[];for(var p in n){var c=n[p].limitNums,u=n[p].limitInfo?TD48.FE43(r+1,n[p].limitInfo):0;u&&c<u&&(n[p].maxNum=u,l.push(n[p]),h.push(n[p]))}this.HlistView.rfL(h),a.length?(this.title.visible=!1,this.title0.visible=!0):(this.title.visible=!0,this.title0.visible=!1)},t.prototype.close=function(){a.prototype.close.call(this),this.HlistView.close()},t}(BaseEuiView);__reflect(SouthCAwardShowView.prototype,"SouthCAwardShowView");var SouthChinaView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName=SouthChinaSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);App.CM.gtM(O6.B10);this.itemArr=[];for(var t=0;t<5;t++){var e=this["gpIconN"+t];this.itemArr.push(e)}this.iconArr=[];for(t=0;t<5;t++){var i=new SCIconNItem;this.iconArr.push(i),this.mainLayer.addChild(i)}this.autoChallenge.label=O3.tr(4272),this.oneKeySweep.label=O3.tr(8060),this.challenge.label=O3.tr(8061)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this),this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnAwark.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAwake,this),this.oneKeySweep.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSweep,this),this.challenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF30,this),this.autoChallenge.addEventListener(egret.Event.CHANGE,this.chooseChange,this),this.updateUI()},t.prototype.onClickSweep=function(){this.aCF(O6.B10,G6.A9)},t.prototype.onClickRank=function(){this.aCF(O6.B10,G6.A8)},t.prototype.onClickAwake=function(){this.aCF(O6.B10,G6.A7)},t.prototype.ZF30=function(){var t=App.CM.gtM(O6.B10).voData.cp;t>=TD48.secretLength?P18.sDP(O3.tr(8089)):this.aCF(O6.B10,G6.A1,t)},t.prototype.chooseChange=function(){var t=App.CM.gtM(O6.B10);if(t.voData.cp>=TD48.secretLength)return this.autoChallenge.selected=!1,void this.ZU92();t.isAutoType=this.autoChallenge.selected,this.autoChallenge.selected?(this._countDownSecond=10,this.autoChallenge.label=O3.tr(4271,this._countDownSecond),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this._timerHandler=App.K16.doTimer(1e3,10,this.GY14,this,this.ZF30,this)):this.ZU92()},t.prototype.GY14=function(){this._countDownSecond--,this.autoChallenge.label=O3.tr(4271,this._countDownSecond)},t.prototype.ZU92=function(){App.CM.gtM(O6.B10);this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this.autoChallenge.selected=!1,this.autoChallenge.label=O3.tr(4272)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TE7)switch(s){case P4.R17:case P4.W15:case P4.X56:default:this.updateUI()}},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B10),e=t.voData.cp,i=1;e&&(i=TD48.secret[e+1]?TD48.secret[e+1].id:TD48.secret[e].id);for(var s=0;s<this.itemArr.length;s++){var o=TD48.secret[5*(i-1)+1+s];this.itemArr[s].data={index:s,first:o,layerIndex:i,loop:5*(i-1)+1+s<=e,cp:e+1}}this.nameLb.text=O3.tr(6936,i);var r=5*Math.floor((i-1)/5)+1;for(s=r;s<r+5;s++){var n=this.iconArr[s-r];s<TD48.secretLength?(n.data={index:s,cp:e+1},n.visible=!0):n.visible=!1}t.voData.cp<t.voData.ff?(this.oneKeySweep.enabled=!0,this.oneKeySweep.imgNew.visible=!0):(this.oneKeySweep.enabled=!1,this.oneKeySweep.imgNew.visible=!1),P16.sGF(this.oneKeySweep,!this.oneKeySweep.enabled),this.btnAwark.imgNew.visible=!!t.FL42()},t.prototype.close=function(){o.prototype.close.call(this),this.ZU92(),this.btnRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRank,this),this.btnAwark.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAwake,this),this.oneKeySweep.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSweep,this),this.challenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF30,this),this.autoChallenge.removeEventListener(egret.Event.CHANGE,this.chooseChange,this)},t}(BaseEuiView);__reflect(SouthChinaView.prototype,"SouthChinaView");var SouthChinaData=function(){function t(t){this.initActData(t)}return t.prototype.initActData=function(t){t&&(this.cp=null!=t.cp?t.cp:this.cp,this.ff=null!=t.ff?t.ff:this.ff,this.alGet=null!=t.alGet?t.alGet:this.alGet,this.alBuy=null!=t.alBuy?t.alBuy:this.alBuy)},t}();__reflect(SouthChinaData.prototype,"SouthChinaData");var TE98=function(){function o(){}return o.FK35=function(t){o.init=t.spectral_init,o.figure=t.spectral_figure,o.position=t.spectral_position,o.spectralclass=t.spectral_spectralclass,o.spectrallv=t.spectral_spectrallv,o.spectralshape=t.spectral_spectralshape,o.spectralskill=t.spectral_spectralskill,o.masterattr=t.spectral_masterattr},o.FC65=function(t){var e=void 0;for(var i in o.spectralshape){var s=o.spectralshape[i];s.model==t&&(e=P7.copyTab(s))}return e},o}();__reflect(TE98.prototype,"TE98");var J7=function(){function t(){}return t.A5=10001,t.A6=10002,t.A12=10003,t.A13=10004,t.A9=10005,t.A10=10006,t.A7=10007,t.A8=10008,t.A1=10009,t.A2=10010,t.A11=10011,t.A14=10012,t.A15=10013,t.A3=10014,t.A4=10015,t}();__reflect(J7.prototype,"J7");var TC29=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.F57,"HuanLingMainView",t,K17.UI_Main_TOP),App.VM.register(O7.B61,"HuanLingScoreAttrView",t,K17.UI_Popup),App.VM.register(O7.D85,"HuanLingZhenTuView",t,K17.UI_Popup),App.VM.register(O7.I59,"LingYunView",t,K17.UI_Popup),App.VM.register(O7.F58,"JuLingMasterView",t,K17.UI_Popup);var e=new TF51(t);return e.aLV(O7.F57),e.aLV(O7.I36),e.aLV(O7.I73),e.aLV(O7.D85),e.aLV(O7.I59),e.aLV(O7.G45),e.aLV(O7.I39),t.huanLingProxy=new TF52(t),t.rgF(J7.A5,t.GP73,t),t.rgF(J7.A6,t.GP74,t),t.rgF(J7.A12,t.GP75,t),t.rgF(J7.A13,t.GP76,t),t.rgF(J7.A9,t.GL92,t),t.rgF(J7.A10,t.GL93,t),t.rgF(J7.A7,t.GK17,t),t.rgF(J7.A8,t.GK18,t),t.rgF(J7.A1,t.GN89,t),t.rgF(J7.A2,t.GN90,t),t.rgF(J7.A11,t.GN91,t),t.rgF(J7.A14,t.GW69,t),t.rgF(J7.A15,t.GW70,t),t.rgF(J7.A3,t.GV23,t),t.rgF(J7.A4,t.GV24,t),t}return __extends(t,i),t.prototype.GP73=function(){return this.huanLingProxy.GP73()},t.prototype.GP74=function(t){if(200==t.head.state){var e=this.gtM();e.ZM24(t.body),e.notify(P4.N35)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP75=function(t,e){this.huanLingProxy.GP75(t,e)},t.prototype.GP76=function(t,e){if(200!=t.head.state){var i=this.gtM();return App.CM.apF(O6.B87,L10.A4,t),void(e&&i.notify("HUANLING_STOP_AUTO"))}var s=this.gtM(),o=s.lv;s.lv=t.body.lv,s.exp=t.body.exp,s.notify(P4.V29),s.lv<=o&&e&&s.notify("HUANLING_UP_AUTO")},t.prototype.GL92=function(t){this.huanLingProxy.GL92(t)},t.prototype.GL93=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body.sp;e.sps[i.sid]=i,e.notify(P4.S81)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GK17=function(t){this.huanLingProxy.GK17(t)},t.prototype.GK18=function(t){if(200==t.head.state){var e=this.gtM();e.sk=t.body.sk,e.notify(P4.R23)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN89=function(t,e,i){this.huanLingProxy.GN89(t,e,i)},t.prototype.GN90=function(t,e){if(200!=t.head.state){var i=this.gtM();return App.CM.apF(O6.B87,L10.A4,t),void(e&&i.notify("HUANLING_CLASS_STOP_AUTO"))}var s=this.gtM(),o=t.body.sp,r=s.sps[o.sid].lv;s.sps[o.sid]=o,s.ZE48(o.sid),s.notify(P4.L61);var n=o.lv+1,a=TE98.spectralclass[n];a&&o.exp<a.exp&&o.lv<=r&&e&&s.notify("HUANLING_CLASS_AUTO")},t.prototype.GN91=function(t){if(200==t.head.state){var e=this.gtM();e.ZM24(t.body),e.notify(P4.U23)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW69=function(t){this.huanLingProxy.GW69(t)},t.prototype.GW70=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body.pos,s=t.body.lv;e.fi[i]=s,e.notify(P4.W97)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV23=function(t,e){this.huanLingProxy.GV23(t,e)},t.prototype.GV24=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body.sp;e.sps[i.sid]=i,e.ZE48(i.sid),e.notify(P4.L63)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TC29.prototype,"TC29");var TF51=function(i){function t(t){var e=i.call(this,t)||this;return e.useGoldTip1=!1,e.useGoldTip2=!1,e}return __extends(t,i),t.prototype.ZM24=function(t){this.lv=t.lv,this.exp=t.exp,this.sk=t.sk,this.fi=t.fi,this.sps=t.sps},t.prototype.ZP67=function(){var t=[];for(var e in TE98.spectralshape){var i=P7.copyTab(TE98.spectralshape[e]),s={};s.id=e,s.quality=i.quality,s.order=i.order,s.bg=N12.getBox(i.quality),s.icon=i.icon,s.own=this.sps[e]?1:0,s.select=this.ZT54&&this.ZT54.id==e?1:0,s.active=this.canHlActive(e),s.red=this.canHlRed(e),s.hname=i.name,s.hlv=this.sps[e]?this.sps[e].lv:-1,s.exp=this.sps[e]?this.sps[e].exp:-1,s.textcolor=O5.FA77(i.quality),s.huanhua=this.sk==i.model?1:0,1==s.select&&(this.ZT54=s),t.push(s)}return t=t.sort(this.huanLingSort),this.ZT54||(this.ZT54=t[0],this.ZT54.select=1),t},t.prototype.ZE48=function(t){this.ZT54&&this.sps&&this.sps[t]&&(this.ZT54.red=this.canHlRed(t),this.ZT54.hlv=this.sps[t].lv,this.ZT54.exp=this.sps[t].exp)},t.prototype.huanLingSort=function(t,e){return t.active>e.active?-1:t.active<e.active?1:t.active==e.active&&1==t.active?t.quality>e.quality?-1:t.quality<e.quality?1:t.order<e.order?-1:1:t.huanhua>e.huanhua?-1:t.huanhua<e.huanhua?1:t.own>e.own?-1:t.own<e.own?1:t.own==e.own&&1==t.own?t.quality>e.quality?-1:t.quality<e.quality?1:t.order<e.order?-1:1:t.quality<e.quality?-1:t.quality>e.quality?1:t.order<e.order?-1:1},t.prototype.canHlRed=function(t){return this.canHlActive(t)||this.canHlUpJie(t)||this.canHlBreak(t)||this.canLingYunUp(t)?1:0},t.prototype.canHlActive=function(t){if(this.sps&&this.sps[t])return 0;var e=TE98.spectralshape[t];return 0<N12.giC(e.activateitem)?1:0},t.prototype.canHlUpJie=function(t){if(!this.sps||!this.sps[t])return 0;var e=TF88.FD41(),i=this.sps[t];if(i.lv>=e)return 0;if(i.lv>=this.lv)return 0;var s=i.lv+1,o=TE98.spectralclass[s],r=o.reqnum,n=TE98.init.clossitem.value;return r<=N12.giC(n)&&i.exp<o.exp?1:0},t.prototype.canHlBreak=function(t){if(!this.sps||!this.sps[t])return 0;var e=TF88.FD41(),i=this.sps[t];if(i.lv>=e)return 0;if(i.lv>=this.lv)return 0;var s=i.lv+1,o=TE98.spectralclass[s];if(i.exp<o.exp)return 0;var r=TE98.spectralshape[t],n=N12.giC(r.activateitem);return o["beaknu"+r.quality]<=n?1:0},t.prototype.canLingYunUp=function(t){for(var e=0,i=1;i<=3;i++)if(1==(e=this.lingYunRed(t,i)))return e;return e},t.prototype.ZD37=function(){var t=0;if(!this.sps)return t;var e=TE98.init.starExp.value;for(var i in this.sps){var s=this.sps[i],o=TE98.spectralshape[i],r=P7.FL92(o.initattribute);t+=O4.getScore(r);for(var n="breakattr"+o.quality,a=1;a<=s.lv;a++){var h=TE98.spectralclass[a],p=P7.FL92(h.attr);t+=O4.getScore(p)*(h.exp/e);var l=P7.FL92(h[n]);t+=O4.getScore(l)}var c=s.lv+1,u=TE98.spectralclass[c];if(u){var d=P7.FL92(u.attr);t+=O4.getScore(d)*(s.exp/e)}}return t},t.prototype.canHlUpLevel=function(){var t=TF88.FB98();if(this.lv>=t)return!1;var e=TE98.init.lvItem.value,i=N12.giC(e),s=this.lv+1;return TE98.spectrallv[s].reqnum<=i},t.prototype.zhenTuRed=function(){for(var t=[25,24,22,20,18],e=1;e<=25;e++){var i=void 0;this.fi&&this.fi[e]&&(i=this.fi[e]);var s=i||0,o=TF88.FG53(e),r=TF88.FD42();if(o&&s<r){var n=-1<t.indexOf(e),a=TE98.init.zhenitem1.value,h=TE98.init.zhenitem2.value,p=s+1,l=TE98.figure[p],c=l.reqnum<=N12.giC(a),u=!0;if(n)u=l.reqnum2<=N12.giC(h);if(c&&u)return!0}}return!1},t.prototype.lingYunRed=function(t,e){var i=0,s=this.sps[t];if(!s)return i;var o=TE98.init.conditions.value.split(":")[e-1];if(!(s.lv>=o))return i;var r=-1,n=void 0;switch(e){case 1:r=s.skLv1,n=TE98.init.Skillitem1.value;break;case 2:r=s.skLv2,n=TE98.init.Skillitem2.value;break;case 3:r=s.skLv3,n=TE98.init.Skillitem3.value}if(TF88.FC66()<=r)return i;var a=r+1,h=TE98.spectralskill[a],p=N12.giC(n);return h.cost<=p&&(i=1),i},t.prototype.canJuLingRed=function(){var t=!1;for(var e in TE98.spectralshape){if(1==this.canHlRed(e))return t=!0}return t},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TF51.prototype,"TF51");var TF52=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.U23,e.GN91,e),e}return __extends(t,i),t.prototype.GP73=function(){var s=this;return new Promise(function(e,t){var i={type:P4.N34,body:{}};s.rSMO(P4.N35,function(t){s.apF(J7.A6,t),e("加载幻灵数据完成")},s),s.sSM(i)})},t.prototype.GP75=function(t,e){var i={type:P4.V28,body:{type:t}};this.rSMO(P4.V29,this.GP76,this,e),this.sSM(i)},t.prototype.GP76=function(t,e){this.apF(J7.A13,t,e)},t.prototype.GL92=function(t){var e={type:P4.S80,body:{sid:t}};this.rSMO(P4.S81,this.GL93,this),this.sSM(e)},t.prototype.GL93=function(t){this.apF(J7.A10,t)},t.prototype.GK17=function(t){var e={type:P4.R22,body:{sid:t}};this.rSMO(P4.R23,this.GK18,this),this.sSM(e)},t.prototype.GK18=function(t){this.apF(J7.A8,t)},t.prototype.GN89=function(t,e,i){var s={type:P4.L60,body:{type:t,sid:e}};this.rSMO(P4.L61,this.GN90,this,i),this.sSM(s)},t.prototype.GN90=function(t,e){this.apF(J7.A2,t,e)},t.prototype.GN91=function(t){this.apF(J7.A11,t)},t.prototype.GW69=function(t){var e={type:P4.W96,body:{pos:t}};this.rSMO(P4.W97,this.GW70,this),this.sSM(e)},t.prototype.GW70=function(t){this.apF(J7.A15,t)},t.prototype.GV23=function(t,e){var i={type:P4.L62,body:{sid:t,type:e}};this.rSMO(P4.L63,this.GV24,this),this.sSM(i)},t.prototype.GV24=function(t){this.apF(J7.A4,t)},t}(TG80);__reflect(TF52.prototype,"TF52");var TF88=function(){function a(){}return a.FL14=function(t,e){var i={};for(var s in t){var o=t[s]*e;i[s]=o}return i},a.FB98=function(){var t=0;for(var e in TE98.spectrallv){var i=TE98.spectrallv[e].lv;t<i&&(t=i)}return t},a.FD41=function(){var t=0;for(var e in TE98.spectralclass){var i=TE98.spectralclass[e].class;t<i&&(t=i)}return t},a.FD42=function(){var t=0;for(var e in TE98.figure){var i=TE98.figure[e].lv;t<i&&(t=i)}return t},a.FC66=function(){var t=0;for(var e in TE98.spectralskill){var i=TE98.spectralskill[e].level;t<i&&(t=i)}return t},a.FG53=function(t){var e=!1,i=TE98.position[t];if(i.unlock<=0)return e=!0;var s=App.CM.gtM(O6.B59),o=i.unlock,r=i.contact.split(",");if(!s.fi)return e=!1;for(var n=s.fi[t],a=(n||0)+1,h=0,p=0;p<r.length;p++){var l=r[p];if(s.fi[l]&&s.fi[l]>=a&&o<=(h+=1))return e=!0}return e},a.FA33=function(){return[avatar.AttributeKey.HP+"",avatar.AttributeKey.POZHAO+"",avatar.AttributeKey.IGNDEF+"",avatar.AttributeKey.SPEED+"",avatar.AttributeKey.ZHAOJIA+"",avatar.AttributeKey.IGNBKE+""]},a.FA20=function(t){var e=[],i=0,s=void 0;for(var o in TE98.spectralskill){var r=TE98.spectralskill[o];r.level>i&&(i=r.level,s=r)}if(s){var n=s["attr"+t],a=P7.FL92(n);for(var h in a)-1==e.indexOf(h)&&e.push(h)}return e=e.sort(function(t,e){return t<e?-1:1})},a.FG54=function(t){var e=!1,i=App.CM.gtM(O6.B59);if(!i.fi)return e;var s,o,r=a.lineRelationShip[t][0],n=a.lineRelationShip[t][1];return s=!!i.fi[r],o=!!i.fi[n],e=s&&o},a.FF47=function(t){var e=TE98.init.conditions.value.split(":")[t-1];return App.CM.gtM(O6.B59).ZT54.hlv>=e},a.lineRelationShip={1:[1,2],2:[2,3],3:[3,4],4:[4,5],5:[5,6],6:[6,7],7:[7,8],8:[8,1],9:[1,9],10:[2,10],11:[3,11],12:[4,12],13:[5,13],14:[6,14],15:[7,15],16:[8,16],17:[9,10],18:[10,11],19:[11,12],20:[12,13],21:[13,14],22:[14,15],23:[15,16],24:[16,9],25:[9,17],26:[10,18],27:[11,19],28:[20,12],29:[21,13],30:[22,14],31:[23,15],32:[24,16],33:[17,18],34:[18,19],35:[19,20],36:[20,21],37:[21,22],38:[22,23],39:[23,24],40:[24,17],41:[18,25],42:[20,25],43:[22,25],44:[24,25]},a}();__reflect(TF88.prototype,"TF88");var HuanLingItem=function(i){function t(){var t=i.call(this)||this;t.skinName="HuanLingItemSkin";var e=t;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.open,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.close,e),t}return __extends(t,i),t.prototype.open=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.open,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT54,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT54,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.close,this)},t.prototype.ZT54=function(){var t=App.CM.gtM(O6.B59);if(t.ZT54){if(t.ZT54.id==this.data.id)return;t.ZT54.select=0,this.data.select=1,t.ZT54=this.data,t.notify("HUANLING_LIST_REFRESH")}else this.data.select=1,t.ZT54=this.data,t.notify("HUANLING_LIST_REFRESH")},t.prototype.dataChanged=function(){i.prototype.dataChanged.call(this);var t=this,e=t.data;t.imgBg&&(t.imgBg.source=e.bg),t.imgIcon&&(t.imgIcon.source=e.icon),t.imgIcon&&P16.sGF(t.imgIcon,0==e.own),t.imgSel&&(t.imgSel.visible=1==e.select),t.imgRed&&(t.imgRed.visible=1==e.red),t.lbName&&O5.FB13(t.lbName,e.hname,e.quality),t.lbLv&&(e.own?(t.lbLv.visible=!1,t.lbLv.text="Lv."+e.hlv,t.lbLv.textColor=e.textcolor):t.lbLv.visible=!1),t.huanhuaImg&&t.huanhualb&&(t.huanhualb.text=O3.tr(8384),t.huanhuaImg.visible=t.huanhualb.visible=1==e.huanhua)},t}(eui.ItemRenderer);__reflect(HuanLingItem.prototype,"HuanLingItem");var LingYunItem=function(e){function t(){var t=e.call(this)||this;return t.iconsrc="",t.skinName="LingYunItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onClick=function(){var t=App.CM.gtM(O6.B59);if(t.selectLingYun){if(t.selectLingYun==this.numidx)return;if(!TF88.FF47(this.numidx))return void P18.sDP(O3.tr(5737));t.selectLingYun=this.numidx,t.notify("LINGYUN_SELECT")}else t.selectLingYun=this.numidx,t.notify("LINGYUN_SELECT")},t.prototype.updateItem=function(t,e,i){var s=App.CM.gtM(O6.B59);this.select.visible=this.numidx==s.selectLingYun;var o=TE98.init.conditions.value.split(":")[i];o<=t?(this.lb.textColor=16777215,this.lb.text="Lv."+e,P16.sGF(this.icon,!1)):(this.lb.textColor=14164514,this.lb.text=O3.tr(5822,o),P16.sGF(this.icon,!0))},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);__reflect(LingYunItem.prototype,"LingYunItem");var ZhenTuYuan=function(e){function t(){var t=e.call(this)||this;return t.bgsrc="com_huanling1_png",t.iconsrc="",t.skinName="ZhenTuYuanSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.onClick=function(){var t=App.CM.gtM(O6.B59);if(t.selectZhenTuPos){if(t.selectZhenTuPos==this.position)return;t.selectZhenTuPos=this.position,t.notify("ZHENTU_POSITIONT_SELECT")}else t.selectZhenTuPos=this.position,t.notify("ZHENTU_POSITIONT_SELECT")},t.prototype.addTexiao=function(t,e,i,s){this.select.visible?this.txgp.visible=!1:(this.txgp.visible=!0,App.THH33.aUE(this.txgp,"act_yq",t,e,void 0,void 0,void 0,void 0,i,s))},t.prototype.removeTexiao=function(){App.THH33.rEf(this.txgp,"act_yq")},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.addUpEffect=function(){App.THH33.aUE(this.effect,"iconSkill",-70,-75,1)},t}(eui.Component);__reflect(ZhenTuYuan.prototype,"ZhenTuYuan");var HuanLingMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_spectral"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.F57,O7.I36,"HuanLingView",this.content),App.VM.rgS(O7.F57,O7.I73,"JuLingView",this.content);var t=[O3.tr(8327),O3.tr(8328)],e=[O7.I36,O7.I73];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t);this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.ZF88(),this.ZJ44();var i=t[0]||O7.I36;this.ZQ23(i)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t);if(t instanceof THH9)switch(e){case P4.V43:this.ZF88(),this.ZJ44()}t instanceof TF51&&(this.ZF88(),this.ZJ44())},t.prototype.ZF88=function(){var t=App.CM.gtM(O6.B59),e=t.canHlUpLevel()?1:0;1!=e&&(e=t.zhenTuRed()?1:0),this.btnList.ZHH58(O7.I36,e)},t.prototype.ZJ44=function(){var t=App.CM.gtM(O6.B59),e=0;for(var i in TE98.spectralshape){if(1==(e=t.canHlRed(i)))return void this.btnList.ZHH58(O7.I73,e);for(var s=1;s<=3;s++)if(1==(e=t.lingYunRed(i,s)))return void this.btnList.ZHH58(O7.I73,e)}this.btnList.ZHH58(O7.I73,e)},t.prototype.close=function(){s.prototype.close.call(this);this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.openHelpView=function(){var t,e;switch(this.btnList.getCurView()){case O7.I36:t=O3.tr(8380),e=O3.tr(8381);break;case O7.I73:t=O3.tr(8382),e=O3.tr(8383);break;default:return}var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t.prototype.ZQ23=function(t){var e,i,s=App.CM.gtM(O6.B82).avatarInfo;switch(t){case O7.I36:if(e=TE98.init.openLv.value,i=TE98.init.openDay.value,s.l<e||s.od<i){var o=O3.tr(5054,i,e);return P18.sDP(o),-1}this.title=O3.tr(8327),this.btnList.ZM66(t);break;case O7.I73:if(e=TE98.init.openLv.value,i=TE98.init.openDay.value,s.l<e||s.od<i){o=O3.tr(5054,i,e);return P18.sDP(o),-1}this.title=O3.tr(8328),this.btnList.ZM66(t)}},t}(BasePanelView);__reflect(HuanLingMainView.prototype,"HuanLingMainView");var HuanLingScoreAttrView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="HuanLingScoreAttrSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);this._title.text=O3.tr(8347),this.lb1.text=O3.tr(1414),this.lb2.text=O3.tr(8346)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.apply(this,t);this.ZX1(),this.ZK34(),this.ZM25(),this.ZM26(),this.ZP68()},t.prototype.ZK34=function(){var t=App.CM.gtM(O6.B59).ZT54,e=TE98.spectralshape[t.id];App.THH33.aUE(this.hgp,e.model2)},t.prototype.ZX1=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.ZM25=function(){var t=App.CM.gtM(O6.B59).ZD37();this.score.text=""+t},t.prototype.ZM26=function(){var t=this,e={},i=App.CM.gtM(O6.B59);if(i.sps)for(var s in i.sps){var o=TE98.spectralshape[s],r=P7.FL92(o.initattribute);e=P7.FJ8(r,e)}var n=P7.FG68(e),a=n[0];a?(t.attr1.visible=t.attr1.includeInLayout=!0,t.attr1.textFlow=O3.tr2(7045,K18.FD72(a),e[a]?e[a]:0)):t.attr1.visible=t.attr1.includeInLayout=!1;var h=n[1];h?(t.attr2.visible=t.attr2.includeInLayout=!0,t.attr2.textFlow=O3.tr2(7045,K18.FD72(h),e[h]?e[h]:0)):t.attr2.visible=t.attr2.includeInLayout=!1;var p=n[2];p?(t.attr3.visible=t.attr3.includeInLayout=!0,t.attr3.textFlow=O3.tr2(7045,K18.FD72(p),e[p]?e[p]:0)):t.attr3.visible=t.attr3.includeInLayout=!1},t.prototype.ZP68=function(){var t=this,e={},i=TE98.init.starExp.value,s=App.CM.gtM(O6.B59);if(s.sps)for(var o in s.sps){for(var r=s.sps[o],n="breakattr"+TE98.spectralshape[o].quality,a=1;a<=r.lv;a++){var h=TE98.spectralclass[a],p=P7.FL92(h.attr),l=h.exp/i;p=TF88.FL14(p,l),e=P7.FJ8(p,e);var c=P7.FL92(h[n]);e=P7.FJ8(c,e)}var u=r.lv+1,d=TE98.spectralclass[u];if(d){var v=P7.FL92(d.attr),f=r.exp/i;v=TF88.FL14(v,f),e=P7.FJ8(v,e)}}var g=P7.FG68(e),m=g[0];m?(t.attr4.visible=t.attr4.includeInLayout=!0,t.attr4.textFlow=O3.tr2(7045,K18.FD72(m),e[m]?e[m]:0)):t.attr4.visible=t.attr4.includeInLayout=!1;var y=g[1];y?(t.attr5.visible=t.attr5.includeInLayout=!0,t.attr5.textFlow=O3.tr2(7045,K18.FD72(y),e[y]?e[y]:0)):t.attr5.visible=t.attr5.includeInLayout=!1;var A=g[2];A?(t.attr6.visible=t.attr6.includeInLayout=!0,t.attr6.textFlow=O3.tr2(7045,K18.FD72(A),e[A]?e[A]:0)):t.attr6.visible=t.attr6.includeInLayout=!1},t.prototype.ZO74=function(){this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t);this.ZO74();var i=App.CM.gtM(O6.B59).ZT54,s=TE98.spectralshape[i.id];App.THH33.rEf(this.hgp,s.model2)},t.prototype.closeSelf=function(){App.VM.close(O7.B61)},t}(BaseEuiView);__reflect(HuanLingScoreAttrView.prototype,"HuanLingScoreAttrView");var HuanLingView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.isAutoUpIng=!1,i.skinName="HuanLingSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);this.lb1.text=O3.tr(8330),this.lb2.text=O3.tr(5563),this.autoBuy.label=O3.tr(7959),this.upLevel.label=O3.tr(8290),this.autoUp.label=O3.tr(7654),this.stopAuto.label=O3.tr(7167),this.maxlb.text=O3.tr(8311),this.maxlb.visible=!1;var t=TE98.init.lvItem.value,e=N12.gID(t);this.costIcon.setData(e)},t.prototype.initData=function(){o.prototype.initData.call(this);this.lastLv=-1,this.lastExp=-1,this.isAutoUpIng=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t);this.ZX1(),this.updateScore(),this.updateName(),this.updateLv(),this.ZM27(),this.ZP69(),this.ZN38()},t.prototype.ZX1=function(){this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),this.ztBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openZhenTu,this)},t.prototype.updateName=function(){var t=App.CM.gtM(O6.B59),e=TE98.FC65(t.sk);this.hname.text=e.name},t.prototype.updateLv=function(){var t=this,e=App.CM.gtM(O6.B59),i=TF88.FB98();if(e.lv>=i)return t.lblv.text=O3.tr(8149,e.lv+"\n"),t.costGp.visible=!1,t.upLevel.visible=!1,t.autoUp.visible=!1,t.stopAuto.visible=!1,t.attr4.visible=!1,t.attr5.visible=!1,t.attr6.visible=!1,t.maxlb.visible=!0,void t.ZU92();t.costGp.visible=!0,t.upLevel.visible=!0,t.autoUp.visible=!this.isAutoUpIng,t.attr4.visible=!0,t.attr5.visible=!0,t.attr6.visible=!0,t.maxlb.visible=!1,e.lv<=t.lastLv||(t.lastLv=e.lv,t.lblv.text=O3.tr(8149,e.lv+"\n"),t.ZT55(),t.updateCost(),t.ZU92())},t.prototype.ZM27=function(){var t=this,e=App.CM.gtM(O6.B59);t.lastExp<0?t.lastExp=e.exp:t.lastExp=t.processBar.value;var i=e.exp-t.lastExp,s=e.lv+1,o=TE98.spectrallv[s];if(t.processBar.minimum=0,t.processBar.maximum=o?o.exp:e.exp,0<i){var r=new eui.Label;r.size=20,r.alpha=0,r.top=50,r.right=25,r.textColor=7716890,r.text="+"+i,this.lvGp.addChild(r);var n=i/this.processBar.maximum*1e3;n<300&&(n=300),egret.Tween.get(this.processBar).to({value:e.exp},n).call(function(){egret.Tween.get(r).to({top:30,alpha:1},300).call(function(){r.alpha=0,r.top=50,App.TF56.ZJ66(r)})})}else t.processBar.value=e.exp;t.ZY11();var a=TF88.FB98();e.lv>=a?(t.processBar.minimum=0,t.processBar.maximum=t.processBar.value=100,t.processBar.labelFunction=function(t,e){return O3.tr(8406)}):t.processBar.labelFunction=null},t.prototype.updateScore=function(){for(var t=App.CM.gtM(O6.B59),e=TE98.init.starExp.value,i=0,s=1;s<=t.lv;s++){var o=TE98.spectrallv[s],r=P7.FL92(o.attr);i+=O4.getScore(r)*(o.exp/e);var n=P7.FL92(o.breakattr);i+=O4.getScore(n)}var a=t.lv+1,h=TE98.spectrallv[a];if(h){var p=P7.FL92(h.attr);i+=O4.getScore(p)*(t.exp/e)}this.score.text=""+Math.floor(i)},t.prototype.ZY11=function(){for(var t=TE98.init.starExp.value,e=App.CM.gtM(O6.B59),i={},s=1;s<=e.lv;s++){var o=TE98.spectrallv[s],r=o.exp/t,n=P7.FL92(o.attr);n=TF88.FL14(n,r);var a=P7.FL92(o.breakattr);a=P7.FJ8(n,a),i=P7.FJ8(a,i)}var h=e.lv+1,p=TE98.spectrallv[h];if(p){var l=e.exp/t,c=P7.FL92(p.attr);c=TF88.FL14(c,l),i=P7.FJ8(c,i)}var u=P7.FG68(i);u[0]?this.attr1.textFlow=O3.tr2(8332,K18.FD72(u[0]),i[u[0]]?i[u[0]]:0):this.attr1.visible=!1,u[1]?this.attr2.textFlow=O3.tr2(8332,K18.FD72(u[1]),i[u[1]]?i[u[1]]:0):this.attr2.visible=!1,u[2]?this.attr3.textFlow=O3.tr2(8332,K18.FD72(u[2]),i[u[2]]?i[u[2]]:0):this.attr3.visible=!1},t.prototype.ZT55=function(){for(var t=TE98.init.starExp.value,e=App.CM.gtM(O6.B59),i={},s=1;s<=e.lv+1;s++){var o=TE98.spectrallv[s],r=o.exp/t,n=P7.FL92(o.attr);n=TF88.FL14(n,r);var a=P7.FL92(o.breakattr);a=P7.FJ8(n,a),i=P7.FJ8(a,i)}var h=P7.FG68(i);h[0]?this.attr4.textFlow=O3.tr2(8333,K18.FD72(h[0]),i[h[0]]?i[h[0]]:0):this.attr4.visible=!1,h[1]?this.attr5.textFlow=O3.tr2(8333,K18.FD72(h[1]),i[h[1]]?i[h[1]]:0):this.attr5.visible=!1,h[2]?this.attr6.textFlow=O3.tr2(8333,K18.FD72(h[2]),i[h[2]]?i[h[2]]:0):this.attr6.visible=!1},t.prototype.updateCost=function(){var t=TE98.init.lvItem.value,e=N12.giC(t),i=App.CM.gtM(O6.B59).lv+1,s=TE98.spectrallv[i],o=s?s.reqnum:0;this.cost.textFlow=o<=e?O3.tr2(6534,e,o):O3.tr2(8331,e,o)},t.prototype.ZP69=function(){var t=App.CM.gtM(O6.B59),e=t.canHlUpLevel()?1:0,i=this.upLevel.filters;i&&0<i.length?P7.FD53(this.upLevel,0):P7.FD53(this.upLevel,e),P7.FD53(this.autoUp,e);var s=t.zhenTuRed();P7.FD53(this.ztBtn,s?1:0)},t.prototype.ZN38=function(){var t=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],e=P7.copyTab(t),i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.roleObj=new FightGameObject,this.roleObj.action=Action.Stand,this.roleObj.setBaseData(i),e.bt=BehaviourType.Attack_d,e.sr=1,this.roleObj.setData(e,this.hgp),this.roleObj.name=null},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.autoUp,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,P7.FD53(this.upLevel,0),this.isAutoUpIng=!0,this.doUpLevel()},t.prototype.doUpLevel=function(){var t=TF88.FB98(),e=App.CM.gtM(O6.B59);if(e.lv>=t)return this.ZU92(),void P18.sDP(O3.tr(910));var i=TE98.init.lvItem.value,s=N12.giC(i),o=e.lv+1,r=TE98.spectrallv[o].reqnum;if(this.autoBuy.selected)if(r<=s)this.apF(J7.A12,1,this.isAutoUpIng);else{var n=App.CM.gtM(O6.B82),a=N15.FA50(i)*(r-s),h=N15.FB92(i)*(r-s);0<a&&n.avatarInfo.bg>=a?this.apF(J7.A12,2,this.isAutoUpIng):e.useGoldTip1?0<h&&n.avatarInfo.g>=h?this.apF(J7.A12,3,this.isAutoUpIng):(P7.FA78(),this.ZU92()):this.canExpend()}else r<=s?this.apF(J7.A12,1,this.isAutoUpIng):(App.VM.open(O7.G87,i,r-s),this.ZU92())},t.prototype.canExpend=function(){App.CM.gtM(O6.B59).useGoldTip1?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,this.ZU92,void 0)},t.prototype.ZT56=function(){var t=App.CM.gtM(O6.B59);t.useGoldTip1||(t.useGoldTip1=!0),this.isAutoUpIng&&(this.stopAuto.visible=!0,this.autoUp.visible=!1,this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1),this.doUpLevel()},t.prototype.ZU92=function(){var t=TF88.FB98(),e=App.CM.gtM(O6.B59);this.isAutoUpIng=!1,this.stopAuto.visible=!1,this.autoUp.visible=e.lv<t,this.upLevel.filters=[],this.upLevel.touchEnabled=!0,this.ZP69()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TF51)switch(s){case P4.V29:this.updateScore(),this.updateLv(),this.ZM27();break;case"HUANLING_UP_AUTO":App.K16.doTimer(200,1,this.doUpLevel,this);break;case"HUANLING_STOP_AUTO":this.ZU92()}if(t instanceof THH9)switch(s){case P4.V43:this.updateCost(),this.ZP69()}},t.prototype.ZO74=function(){this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),this.ztBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openZhenTu,this)},t.prototype.openZhenTu=function(){App.VM.open(O7.D85)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t);this.ZO74(),this.hgp.removeChildren(),this.roleObj.destory(),this.roleObj=null,this.lastLv=-1,this.lastExp=-1,this.isAutoUpIng=!1},t}(BaseEuiView);__reflect(HuanLingView.prototype,"HuanLingView");var HuanLingZhenTuView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName="HuanLingZhenTuSkin",i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this);var t=this;t.specialPosition=[25,24,22,20,18],t.title.text=O3.tr(8348),t.lb1.text=O3.tr(8349),t.finalbg.visible=!1,t.maxbtn.visible=!1,t.maxbtn.label=O3.tr(8406),P16.sGF(t.maxbtn,!0);for(var e=1;e<=44;e++){var i=t[o="line"+e];i&&i instanceof eui.Image&&(i.visible=!1)}for(e=1;e<=25;e++){var s=t[o="zt"+e];s&&s instanceof ZhenTuYuan&&(-1<t.specialPosition.indexOf(e)?(s.select.width=75,s.select.height=75):(s.select.width=52,s.select.height=52),s.position=e,s.lvlb.text="0",s.removeTexiao())}t.attrKeyArray=TF88.FA33();for(e=0;e<6;e++){var o;if(t[o="attr"+(e+1)]&&t[o]instanceof eui.Label)if(t.attrKeyArray[e]){var r=t.attrKeyArray[e];t[o].textFlow=O3.tr2(6850,K18.FD72(r),0)}else t[o].visible=!1}t.rate1.visible=!1,t.rate2.visible=!1,t.rate3.visible=!1,t.rate4.visible=!1,t.rate5.visible=!1,t.rate6.visible=!1,t.arrow1.visible=!1,t.arrow2.visible=!1,t.arrow3.visible=!1,t.arrow4.visible=!1,t.arrow5.visible=!1,t.arrow6.visible=!1,t.upStar.label=O3.tr(8404)},t.prototype.initData=function(){n.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.apply(this,t);this.ZX1(),this.updateScore(),this.updateZhenTu(),this.ZP70(),this.ZM28(),this.updateUpTips(),this.ZY12()},t.prototype.ZX1=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.upStar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this)},t.prototype.updateScore=function(){var t=0,e=App.CM.gtM(O6.B59);if(e.fi){for(var i in e.fi)for(var s=e.fi[i],o=1;o<=s;o++){var r=TE98.figure[o]["attr"+i],n=P7.FL92(r);t+=O4.getScore(n)}this.score.text=""+t}else this.score.text=""+t},t.prototype.ZP70=function(){var t=App.CM.gtM(O6.B59);if(t.fi){var e={};for(var i in t.fi)for(var s=t.fi[i],o=1;o<=s;o++){var r=TE98.figure[o]["attr"+i],n=P7.FL92(r);e=P7.FJ8(n,e)}for(o=0;o<6;o++){var a="attr"+(o+1);if(this[a]&&this[a]instanceof eui.Label)if(this.attrKeyArray[o]){var h=this.attrKeyArray[o];this[a].textFlow=O3.tr2(6850,K18.FD72(h),e[h]?e[h]:0)}else this[a].visible=!1}}},t.prototype.ZM28=function(){var t=this,e=App.CM.gtM(O6.B59),i=e.selectZhenTuPos,s=void 0;e.fi&&e.fi[i]&&(s=e.fi[i]);var o=s||0;if(TF88.FD42()<=o)for(var r=0;r<6;r++){t[l="rate"+(p=r+1)]&&t[l]instanceof eui.Label&&(t[l].visible=!1,t["arrow"+p].visible=!1)}else{var n=o+1,a=TE98.figure[n]["attr"+i],h=P7.FL92(a);for(r=0;r<6;r++){var p,l;if(t[l="rate"+(p=r+1)]&&t[l]instanceof eui.Label){if(t.attrKeyArray[r]){var c=parseInt(t.attrKeyArray[r]);t[l].text=h[c]?h[c]:0,t[l].visible=!!h[c]}else t[l].visible=!1;t["arrow"+p].visible=t[l].visible}}}},t.prototype.updateZhenTu=function(){var t=App.CM.gtM(O6.B59);t.selectZhenTuPos||(t.selectZhenTuPos=1);for(var e=TF88.FD42(),i=1;i<=25;i++){var s=this["zt"+i];if(s&&s instanceof ZhenTuYuan){var o=void 0;t.fi&&t.fi[i]&&(o=t.fi[i]);var r=o||0;s.lvlb.text=""+r;var n=o||TF88.FG53(i);if(P16.sGF(s.icon,!n),s.position==t.selectZhenTuPos)s.select.visible=!0,s.removeTexiao();else if(s.select.visible=!1,TF88.FG53(i)&&r<e){var a=-1<this.specialPosition.indexOf(i),h=TE98.init.zhenitem1.value,p=TE98.init.zhenitem2.value,l=r+1,c=TE98.figure[l],u=c.reqnum<=N12.giC(h),d=!0;if(a)d=c.reqnum2<=N12.giC(p);u&&d?a?s.addTexiao(-18,-18,.8,.8):s.addTexiao(-8,-8,.6,.6):s.removeTexiao()}else s.removeTexiao()}}for(i=1;i<=44;i++){var v=this["line"+i];v&&v instanceof eui.Image&&(v.visible=TF88.FG54(i))}this.finalbg.visible=!(!t.fi||!t.fi[25])},t.prototype.updateUpTips=function(){var t=App.CM.gtM(O6.B59),e=t.selectZhenTuPos,i=TE98.position[e];if(TF88.FG53(e))this.lb2.visible=!1;else{var s=void 0;t.fi&&t.fi[e]&&(s=t.fi[e]);var o=s||0;if(TF88.FD42()<=o)return void(this.lb2.visible=!1);this.lb2.visible=!0;var r=o+1;this.lb2.text=O3.tr(8350,i.unlock,r)}},t.prototype.ZY12=function(){var t=this,e=App.CM.gtM(O6.B59),i=e.selectZhenTuPos,s=void 0;e.fi&&e.fi[i]&&(s=e.fi[i]);var o=s||0,r=TF88.FD42();if(this.maxbtn.visible=r<=o,this.maxbtn.visible)return t.costLb1.visible=!1,t.ownlb1.visible=!1,t.it1.visible=!1,t.lbown1.visible=!1,t.it2.visible=!1,t.lbown2.visible=!1,void(t.upStar.visible=!1);t.upStar.visible=!0;var n=o+1,a=TE98.figure[n],h=-1<t.specialPosition.indexOf(i),p=TE98.init.zhenitem1.value,l=TE98.init.zhenitem2.value,c=N12.gID(p),u={itemData:{data:c,ct:0},isBottom:!1};t.it1.visible=!0,t.it1.ZM72(u);var d=a.reqnum,v=N12.giC(p);t.costLb1.text=O3.tr(8286,c.name,d);var f=d<=v;t.ownlb1.textFlow=f?O3.tr2(6690,v):O3.tr2(6689,v);var g=!0;if(h){t.costLb1.visible=!1,t.ownlb1.visible=!1,t.it1.parent.bottom=125,t.lbown1.visible=!0,t.lbown1.textFlow=f?O3.tr2(8362,"",v,d):O3.tr2(8363,"",v,d),t.it2.visible=!0,t.lbown2.visible=!0;var m={itemData:{data:N12.gID(l),ct:0},isBottom:!1};t.it2.ZM72(m);var y=a.reqnum2,A=N12.giC(l);g=y<=A,t.lbown2.textFlow=g?O3.tr2(8362,"",A,y):O3.tr2(8363,"",A,y)}else{t.costLb1.visible=!0,t.ownlb1.visible=!0,t.it1.parent.bottom=110,t.lbown1.visible=!1,t.it2.visible=!1,t.lbown2.visible=!1}var b=TF88.FG53(i);P7.FD53(t.upStar,b&&f&&g?1:0)},t.prototype.zhenTuSelect=function(){for(var t=App.CM.gtM(O6.B59),e=1;e<=25;e++){var i=this["zt"+e];i&&i instanceof ZhenTuYuan&&(i.position==t.selectZhenTuPos?(i.select.visible=!0,i.removeTexiao()):i.select.visible=!1)}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.prototype.uBM.call(this,t,e);var s=this,o=e[0];if(t instanceof TF51)switch(o){case"ZHENTU_POSITIONT_SELECT":s.updateZhenTu(),s.ZM28(),s.updateUpTips(),s.ZY12();break;case P4.W97:s.updateScore(),s.updateZhenTu(),s.ZP70(),s.ZM28(),s.updateUpTips(),s.ZY12(),s.upEffect();break;case P4.V43:s.updateZhenTu(),s.ZY12()}},t.prototype.upEffect=function(){var t=this["zt"+App.CM.gtM(O6.B59).selectZhenTuPos];t&&t instanceof ZhenTuYuan&&t.addUpEffect()},t.prototype.ZO74=function(){this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.upStar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this)},t.prototype.doUpLevel=function(){var t=App.CM.gtM(O6.B59),e=t.selectZhenTuPos,i=void 0;t.fi&&t.fi[e]&&(i=t.fi[e]);var s=i||0;if(TF88.FD42()<=s)P18.sDP(O3.tr(910));else if(TF88.FG53(e)){var o=-1<this.specialPosition.indexOf(e),r=TE98.init.zhenitem1.value,n=TE98.init.zhenitem2.value,a=s+1,h=TE98.figure[a],p=h.reqnum<=N12.giC(r),l=!0;if(o)l=h.reqnum2<=N12.giC(n);p&&l?this.apF(J7.A14,e):P18.sDP(O3.tr(8147))}else P18.sDP(O3.tr(8365))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.close.call(this,t);this.ZO74();for(var i=1;i<=25;i++){var s=this["zt"+i];s&&s instanceof ZhenTuYuan&&s.removeTexiao()}this.specialPosition=void 0,this.attrKeyArray=void 0,App.CM.gtM(O6.B59).selectZhenTuPos=void 0},t.prototype.closeSelf=function(){App.VM.close(O7.D85)},t}(BaseEuiView);__reflect(HuanLingZhenTuView.prototype,"HuanLingZhenTuView");var JuLingMasterView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="JuLingMasterSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);this.lbStatus.textFlow=O3.tr2(8473,O3.tr(8474),0),this.curLv.textFlow=O3.tr2(8476,O3.tr(8475),0),this.lbAddPower.text=O3.tr(1109,0),this.crugp.visible=!1,this.nextgp.visible=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);this.ZX1(),this.updateAttr()},t.prototype.updateAttr=function(){var t,e,i=this,s=App.CM.gtM(O6.B59),o=0;if(s.sps)for(var r in s.sps){o+=s.sps[r].lv}i.lbStatus.textFlow=O3.tr2(8473,O3.tr(8474),o);var n=[];for(var a in TE98.masterattr){var h=TE98.masterattr[a];n.push(h)}r=0;for(var p=(n=n.sort(function(t,e){return t.target<e.target?-1:1})).length;r<p;r++){if(!(o>=(h=n[r]).target)){e=h;break}t=h}i.crugp.visible=!!t;var l=0;if(t){i.curLv.textFlow=O3.tr2(8476,O3.tr(8475),t.lv),i.line1.visible=!0;var c=new eui.Label;c.textFlow=O3.tr2(8449,t.target),i.crugp.addChild(c);var u=P7.FL92(t.attraward);P7.FG68(u).forEach(function(t){var e=new eui.Label;e.textColor=9163455,e.size=20,u[t]<1?e.text=K18.FD72(t)+"+"+100*u[t]+"%":e.text=K18.FD72(t)+"+"+u[t],i.crugp.addChild(e)}),l=O4.getScore(u)}else i.line1.visible=!1;if(egret.callLater(function(){i.crugp.validateNow(),i.line1.validateNow()},this),i.nextgp.visible=!!e,e){i.line2.visible=!0;var d=new eui.Label;d.textFlow=O3.tr2(8450,e.target),i.nextgp.addChild(d);var v=P7.FL92(e.attraward);P7.FG68(v).forEach(function(t){var e=new eui.Label;e.textColor=16707295,e.size=20,v[t]<1?e.text=K18.FD72(t)+"+"+100*v[t]+"%":e.text=K18.FD72(t)+"+"+v[t],i.nextgp.addChild(e)});var f=O4.getScore(v);i.lbAddPower.text=O3.tr(1109,f-l)}else i.line2.visible=!1;egret.callLater(function(){i.nextgp.validateNow(),i.line2.validateNow()},this)},t.prototype.ZX1=function(){this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.ZO74=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.uBM=function(t){s.prototype.uBM.call(this,t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this);this.ZO74(),this.crugp.removeChildren(),this.nextgp.removeChildren()},t.prototype.closeSelf=function(){App.VM.close(O7.F58)},t}(BaseEuiView);__reflect(JuLingMasterView.prototype,"JuLingMasterView");var JuLingView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.isAutoUpIng=!1,i.activeSource=void 0,i.skinName="JuLingSkin",i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this);var t=this;t.btnHh.label=O3.tr(7666),t.lb1.text=O3.tr(8334),t.lb2.text=O3.tr(5563),t.autoBuy.label=O3.tr(7959),t.upLevel.label=O3.tr(6146),t.autoUp.label=O3.tr(5898),t.stopAuto.label=O3.tr(7167),t.maxlb.text=O3.tr(2408),t.maxlb.visible=!1;var e=TE98.init.clossitem.value,i=N12.gID(e);t.costIcon.setData(i),t.bkbtn.label=O3.tr(8338),t.lb3.text=O3.tr(8337),t.lbGetwayTip.textFlow=O3.tr2(8339),t.acbtn.label=O3.tr(8140);var s={render:HuanLingItem,gap:1,width:t.listGp.width,height:t.listGp.height,isFlat:!0};t.listView=new CommonListBase(s),t.listGp.addChild(t.listView),t.listView.verticalCenter=0,t.listView.horizontalCenter=0,t.listView.setLeftRightArrow(-20),t.listView.setLeftBtnLeft(-40),t.listView.setRightBtnRight(-40)},t.prototype.initData=function(){r.prototype.initData.call(this);this.ZY13()},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this,t);var i=this;i.ZX1(),i.ZF89(),i.ZK34(),i.updateScore(),i.updateName(),i.updateHhBtn(),i.updateAcLbgp(),i.updateLv(),i.ZM25(),i.ZJ45(),i.updateUpAcGp(),i.ZM27(),i.ZT58(),i.ZP69()},t.prototype.ZX1=function(){var t=this;t.listView.open(),t.cardTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpPage,this),t.acbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT60,this),t.btnHh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP71,this),t.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),t.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),t.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),t.btnChk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT59,this),t.bkbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBreak,this),t.leftbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openLingYun,this),t.rightbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM29,this)},t.prototype.ZK34=function(){var t=App.CM.gtM(O6.B59).ZT54,e=TE98.spectralshape[t.id];this.lastShape=e.model2,App.THH33.aUE(this.hgp,this.lastShape)},t.prototype.ZY13=function(){this.lastExp=-1,this.lastLv=-1,this.isAutoUpIng=!1,this.activeSource=void 0,this.lastShape&&(App.THH33.rEf(this.hgp,this.lastShape),this.lastShape=void 0)},t.prototype.ZF89=function(){var t=App.CM.gtM(O6.B59).ZP67();this.listView.rfL(t,!0)},t.prototype.updateScore=function(){var t=0,e=App.CM.gtM(O6.B59).ZT54,i=TE98.spectralshape[e.id],s=P7.FL92(i.initattribute);if(t+=O4.getScore(s),e.own){for(var o="breakattr"+i.quality,r=TE98.init.starExp.value,n=1;n<=e.hlv;n++){var a=TE98.spectralclass[n],h=P7.FL92(a.attr);t+=O4.getScore(h)*(a.exp/r);var p=P7.FL92(a[o]);t+=O4.getScore(p)}var l=e.hlv+1,c=TE98.spectralclass[l];if(c){var u=P7.FL92(c.attr);t+=O4.getScore(u)*(e.exp/r)}this.score.text=""+Math.floor(t)}else this.score.text=""+Math.floor(t)},t.prototype.updateName=function(){var t=App.CM.gtM(O6.B59).ZT54,e=TE98.spectralshape[t.id];this.hname.text=e.name},t.prototype.updateHhBtn=function(){var t=App.CM.gtM(O6.B59),e=t.ZT54,i=TE98.FC65(t.sk);this.btnHh.visible=1==e.own&&e.id!=i.id,this.huanhuaImg.visible=1==e.own&&e.id==i.id},t.prototype.updateAcLbgp=function(){var t=App.CM.gtM(O6.B59).ZT54;this.aclbgp.visible=1==t.own,this.noacimg.visible=0==t.own},t.prototype.updateLv=function(){var t=this,e=App.CM.gtM(O6.B59).ZT54;if(0!=e.own){var i=TF88.FD41();if(e.hlv>=i)return t.lbjie.text=O3.tr(7126,e.hlv+"\n"),t.costGp.visible=!1,t.btnGp.visible=!1,t.attr4.visible=!1,t.attr5.visible=!1,t.attr6.visible=!1,t.maxlb.visible=!0,void t.ZU92();t.costGp.visible=!0,t.btnGp.visible=!0,t.attr4.visible=!0,t.attr5.visible=!0,t.attr6.visible=!0,t.maxlb.visible=!1,e.hlv<=t.lastLv||(t.lastLv=e.hlv,t.lbjie.text=O3.tr(7126,e.hlv+"\n"),t.ZT55(),t.ZT57(),t.ZU92())}},t.prototype.ZT57=function(){var t=App.CM.gtM(O6.B59).ZT54;if(0!=t.own){var e=TE98.init.clossitem.value,i=N12.giC(e),s=t.hlv+1,o=TE98.spectralclass[s],r=o?o.reqnum:0;this.cost.textFlow=r<=i?O3.tr2(6534,i,r):O3.tr2(8331,i,r)}},t.prototype.ZM25=function(){var t=App.CM.gtM(O6.B59).ZD37();this.totalScore.text=O3.tr(8335)+t},t.prototype.ZJ45=function(){var t=App.CM.gtM(O6.B59),e=0;t.sps&&(e=Object.keys(t.sps).length),this.lbac.text=O3.tr(8336)+e},t.prototype.updateUpAcGp=function(){var t=App.CM.gtM(O6.B59).ZT54;this.upGp.visible=1==t.own,this.acGp.visible=!this.upGp.visible},t.prototype.ZM27=function(){var t=this,e=App.CM.gtM(O6.B59).ZT54;if(0!=e.own){t.lastExp<0?t.lastExp=e.exp:t.lastExp=t.processBar.value;var i=e.exp-t.lastExp,s=e.hlv+1,o=TE98.spectralclass[s];if(t.processBar.minimum=0,t.processBar.maximum=o?o.exp:e.exp,0<i){var r=new eui.Label;r.size=20,r.alpha=0,r.top=50,r.right=25,r.textColor=7716890,r.text="+"+i,t.upGp.addChild(r);var n=i/this.processBar.maximum*1e3;n<300&&(n=300),egret.Tween.get(this.processBar).to({value:e.exp},n).call(function(){egret.Tween.get(r).to({top:30,alpha:1},300).call(function(){r.alpha=0,r.top=50,App.TF56.ZJ66(r),t.updateBrkGp()})})}else t.processBar.value=e.exp,t.updateBrkGp();t.ZY11();var a=TF88.FD41();e.hlv>=a?(t.processBar.minimum=0,t.processBar.maximum=t.processBar.value=100,t.processBar.labelFunction=function(t,e){return O3.tr(2408)}):t.processBar.labelFunction=null}},t.prototype.updateBrkGp=function(){var t=this,e=App.CM.gtM(O6.B59),i=e.ZT54;if(0!=i.own){var s=TF88.FD41(),o=TE98.spectralshape[i.id],r=i.hlv+1,n="beaknu"+o.quality,a=TE98.spectralclass[r],h=a&&0<a[n];if(t.brkGp.visible=h&&i.hlv<s&&t.processBar.value==t.processBar.maximum,t.brkGp.visible){t.costGp.visible=!1,t.btnGp.visible=!1,t.ZU92();var p=N12.gID(o.activateitem),l={itemData:{data:p,ct:0},isBottom:!1};t.bkitem.ZM72(l),t.bkiname.text=p.name;var c=N12.giC(o.activateitem);c>=a[n]?t.bkiown.textFlow=O3.tr2(6135,c,a[n]):t.bkiown.textFlow=O3.tr2(6136,c,a[n]);var u=e.canHlBreak(i.id);P7.FD53(this.bkbtn,u)}else t.costGp.visible=i.hlv<s,t.btnGp.visible=i.hlv<s}},t.prototype.ZY11=function(){var t=App.CM.gtM(O6.B59).ZT54;if(0!=t.own){for(var e="breakattr"+TE98.spectralshape[t.id].quality,i=TE98.init.starExp.value,s={},o=1;o<=t.hlv;o++){var r=TE98.spectralclass[o],n=r.exp/i,a=P7.FL92(r.attr);a=TF88.FL14(a,n);var h=P7.FL92(r[e]);h=P7.FJ8(a,h),s=P7.FJ8(h,s)}var p=t.hlv+1,l=TE98.spectralclass[p];if(l){var c=t.exp/i,u=P7.FL92(l.attr);u=TF88.FL14(u,c),s=P7.FJ8(u,s)}var d=P7.FG68(s);d[0]?this.attr1.textFlow=O3.tr2(8332,K18.FD72(d[0]),s[d[0]]?s[d[0]]:0):this.attr1.visible=!1,d[1]?this.attr2.textFlow=O3.tr2(8332,K18.FD72(d[1]),s[d[1]]?s[d[1]]:0):this.attr2.visible=!1,d[2]?this.attr3.textFlow=O3.tr2(8332,K18.FD72(d[2]),s[d[2]]?s[d[2]]:0):this.attr3.visible=!1}},t.prototype.ZT55=function(){var t=App.CM.gtM(O6.B59).ZT54;if(0!=t.own){for(var e="breakattr"+TE98.spectralshape[t.id].quality,i=TE98.init.starExp.value,s={},o=1;o<=t.hlv+1;o++){var r=TE98.spectralclass[o],n=r.exp/i,a=P7.FL92(r.attr);a=TF88.FL14(a,n);var h=P7.FL92(r[e]);h=P7.FJ8(a,h),s=P7.FJ8(h,s)}var p=P7.FG68(s);p[0]?this.attr4.textFlow=O3.tr2(8333,K18.FD72(p[0]),s[p[0]]?s[p[0]]:0):this.attr4.visible=!1,p[1]?this.attr5.textFlow=O3.tr2(8333,K18.FD72(p[1]),s[p[1]]?s[p[1]]:0):this.attr5.visible=!1,p[2]?this.attr6.textFlow=O3.tr2(8333,K18.FD72(p[2]),s[p[2]]?s[p[2]]:0):this.attr6.visible=!1}},t.prototype.ZT58=function(){var t=this;if(t.acGp.visible){var e=App.CM.gtM(O6.B59).ZT54,i=TE98.spectralshape[e.id],s=N12.gID(i.activateitem),o={itemData:{data:s,ct:0},isBottom:!1};t.it.ZM72(o),t.lbitn.text=s.name;var r=N12.giC(i.activateitem);t.acbtn.visible=0<r?(t.lbown.textFlow=O3.tr2(6135,r,1),t.cardTip.visible=!1,!(t.activeSource=void 0)):(t.lbown.textFlow=O3.tr2(6136,r,1),t.cardTip.visible=!!s.link,t.cardTip.visible?(t.cardTip.text=s.link.split(":")[0],t.activeSource=s.link.split(":")[1],M18.FHH83(this.cardTip)):(t.cardTip.text="",t.activeSource=void 0,M18.FF64(t.cardTip)),!1),t.lbGetwayTip.visible=t.cardTip.visible}},t.prototype.ZP69=function(){var t=App.CM.gtM(O6.B59),e=t.ZT54,i=t.canHlActive(e.id);P7.FD53(this.acbtn,i);var s=t.canHlUpJie(e.id),o=this.upLevel.filters;o&&0<o.length?P7.FD53(this.upLevel,0):P7.FD53(this.upLevel,s),P7.FD53(this.autoUp,s);var r=t.canHlBreak(e.id);P7.FD53(this.bkbtn,r),P7.FD53(this.leftbtn,0);for(var n=1;n<=3;n++){var a=t.lingYunRed(e.id,n);if(1==a){P7.FD53(this.leftbtn,a);break}}},t.prototype.openLingYun=function(){0!=App.CM.gtM(O6.B59).ZT54.own?App.VM.open(O7.I59):P18.sDP("当前幻灵未激活")},t.prototype.ZM29=function(){App.VM.open(O7.F58)},t.prototype.doBreak=function(){var t=TF88.FD41(),e=App.CM.gtM(O6.B59),i=e.ZT54;if(0!=i.own)if(i.hlv>=t)P18.sDP(O3.tr(910));else if(i.hlv>=e.lv)P18.sDP(O3.tr(8356));else{var s=TE98.spectralshape[i.id],o=N12.giC(s.activateitem),r=i.hlv+1;TE98.spectralclass[r]["beaknu"+s.quality]<=o?this.apF(J7.A1,1,i.id,this.isAutoUpIng):P18.sDP(O3.tr(8147))}},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,P7.FD53(this.upLevel,0),this.isAutoUpIng=!0,this.doUpLevel()},t.prototype.doUpLevel=function(){var t=TF88.FD41(),e=App.CM.gtM(O6.B59),i=e.ZT54;if(0!=i.own){if(i.hlv>=t)return this.ZU92(),void P18.sDP(O3.tr(910));if(i.hlv>=e.lv)return this.ZU92(),void P18.sDP(O3.tr(8356));var s=TE98.init.clossitem.value,o=N12.giC(s),r=i.hlv+1,n=TE98.spectralclass[r].reqnum;if(this.autoBuy.selected)if(n<=o)this.apF(J7.A1,1,i.id,this.isAutoUpIng);else{var a=App.CM.gtM(O6.B82),h=N15.FA50(s)*(n-o),p=N15.FB92(s)*(n-o);0<h&&a.avatarInfo.bg>=h?this.apF(J7.A1,2,i.id,this.isAutoUpIng):e.useGoldTip2?0<p&&a.avatarInfo.g>=p?this.apF(J7.A1,3,i.id,this.isAutoUpIng):(P7.FA78(),this.ZU92()):this.ZT56()}else n<=o?this.apF(J7.A1,1,i.id,this.isAutoUpIng):(App.VM.open(O7.G87,s,n-o),this.ZU92())}},t.prototype.ZT56=function(){var t=App.CM.gtM(O6.B59);t.useGoldTip2||(t.useGoldTip2=!0),this.isAutoUpIng&&(this.stopAuto.visible=!0,this.autoUp.visible=!1,this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1),this.doUpLevel()},t.prototype.ZU92=function(){var t=TF88.FD41(),e=App.CM.gtM(O6.B59).ZT54;this.isAutoUpIng=!1,this.stopAuto.visible=!1,this.autoUp.visible=e.hlv<t,this.upLevel.filters=[],this.upLevel.touchEnabled=!0,this.ZP69()},t.prototype.ZT59=function(){App.VM.open(O7.B61)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=this,o=e[0];if(t instanceof TF51)switch(o){case"HUANLING_LIST_REFRESH":s.ZY13(),s.listView.ZU12(),s.updateScore(),s.ZK34(),s.updateName(),s.updateAcLbgp(),s.updateLv(),s.updateHhBtn(),s.updateUpAcGp(),s.ZM27(),s.ZT58(),s.ZP69();break;case P4.S81:s.ZF89(),s.ZY14(),s.updateScore(),s.updateHhBtn(),s.updateAcLbgp(),s.updateLv(),s.ZM25(),s.ZJ45(),s.updateUpAcGp(),s.ZM27(),s.ZT58();break;case P4.R23:s.ZF89(),s.updateHhBtn();break;case P4.L61:s.listView.ZU12(),s.updateScore(),s.updateLv(),s.ZM25(),s.ZM27();break;case"HUANLING_CLASS_AUTO":App.K16.doTimer(200,1,s.doUpLevel,s);break;case"HUANLING_CLASS_STOP_AUTO":s.ZU92();break;case P4.L63:s.listView.ZU12(),s.ZP69()}if(t instanceof THH9)switch(o){case P4.V43:s.ZF89(),s.ZT58(),s.ZT57(),s.updateBrkGp(),s.ZP69()}},t.prototype.ZY14=function(){for(var t=this.listView.getListData(),e=t.length,i=0;i<e;i++)if(1==t[i].select){this.listView.ZQ18(i);break}},t.prototype.jumpPage=function(){this.activeSource&&TG84.FM16(this.activeSource)},t.prototype.ZO74=function(){var t=this;t.listView.close(),t.cardTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpPage,this),t.acbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT60,this),t.btnHh.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP71,this),t.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),t.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),t.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZU92,this),t.btnChk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT59,this),t.bkbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBreak,this),t.leftbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openLingYun,this),t.rightbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM29,this)},t.prototype.ZT60=function(){var t=App.CM.gtM(O6.B59);this.apF(J7.A9,t.ZT54.id)},t.prototype.ZP71=function(){var t=App.CM.gtM(O6.B59);this.apF(J7.A7,t.ZT54.id)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this,t);var i=App.CM.gtM(O6.B59),s=i.ZT54,o=TE98.spectralshape[s.id];App.THH33.rEf(this.hgp,o.model2),this.ZY13(),i.ZT54=null,this.ZO74()},t}(BaseEuiView);__reflect(JuLingView.prototype,"JuLingView");var LingYunView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="LingYunSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t=this;t.title.text="灵蕴",t.lb1.text=O3.tr(6453),t.lb2.text=O3.tr(7679),t.upLevel.label=O3.tr(8290),t.cl1.numidx=1,t.cl2.numidx=2,t.cl3.numidx=3,t.maxbtn.label=O3.tr(8406),t.maxbtn.visible=!1,P16.sGF(t.maxbtn,!0)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);this.ZX1(),this.initAttr(),this.ZY15(),this.updateAttr(),this.udpateCost(),this.updateRed()},t.prototype.initAttr=function(){var t=this,e=App.CM.gtM(O6.B59);e.selectLingYun||(e.selectLingYun=1),t.attrNameKey=TF88.FA20(e.selectLingYun);for(var i=0;i<3;i++){if(t[o="attr"+(i+1)]&&t[o]instanceof eui.Label)if(t.attrNameKey[i]){t[o].visible=!0,t[o].includeInLayout=!0;var s=t.attrNameKey[i];t[o].textFlow=O3.tr2(1489,K18.FD72(s),0)}else t[o].visible=!1,t[o].includeInLayout=!1}for(i=3;i<6;i++){var o;if(t[o="attr"+(i+1)]&&t[o]instanceof eui.Label)if(t.attrNameKey[i-3]){t[o].visible=!0,t[o].includeInLayout=!0;s=t.attrNameKey[i-3];t[o].textFlow=O3.tr2(1489,K18.FD72(s),0)}else t[o].visible=!1,t[o].includeInLayout=!1}},t.prototype.ZY15=function(){var t=App.CM.gtM(O6.B59),e=t.ZT54,i=t.sps[e.id];t.selectLingYun||(t.selectLingYun=1),this.cl1.updateItem(e.hlv,i.skLv1,0),this.cl2.updateItem(e.hlv,i.skLv2,1),this.cl3.updateItem(e.hlv,i.skLv3,2)},t.prototype.updateAttr=function(){var t=this,e=App.CM.gtM(O6.B59),i=e.ZT54,s=e.sps[i.id],o=-1,r=void 0;switch(e.selectLingYun){case 1:o=s.skLv1,r="attr1";break;case 2:o=s.skLv2,r="attr2";break;case 3:o=s.skLv3,r="attr3"}for(var n={},a=1;a<=o;a++){var h=TE98.spectralskill[a],p=P7.FL92(h[r]);n=P7.FJ8(p,n)}for(a=0;a<3;a++){if(t[v="attr"+(a+1)]&&t[v]instanceof eui.Label)if(t.attrNameKey[a]){t[v].visible=!0,t[v].includeInLayout=!0;var l=t.attrNameKey[a];t[v].textFlow=O3.tr2(1489,K18.FD72(l),n[l]?n[l]:0)}else t[v].visible=!1,t[v].includeInLayout=!1}if(TF88.FC66()<=o)return t.nxgp1.visible=!1,void(t.nxgp2.visible=!1);t.nxgp1.visible=!0,t.nxgp2.visible=!0;var c=o+1,u=TE98.spectralskill[c],d=P7.FL92(u[r]);d=P7.FJ8(n,d);for(a=3;a<6;a++){var v;if(t[v="attr"+(a+1)]&&t[v]instanceof eui.Label)if(t.attrNameKey[a-3]){t[v].visible=!0,t[v].includeInLayout=!0;var f=t.attrNameKey[a-3];t[v].textFlow=O3.tr2(1489,K18.FD72(f),d[f]?d[f]:0)}else t[v].visible=!1,t[v].includeInLayout=!1}},t.prototype.udpateCost=function(){var t=this,e=App.CM.gtM(O6.B59),i=e.ZT54,s=e.sps[i.id],o=-1,r=void 0;switch(e.selectLingYun){case 1:o=s.skLv1,r=TE98.init.Skillitem1.value;break;case 2:o=s.skLv2,r=TE98.init.Skillitem2.value;break;case 3:o=s.skLv3,r=TE98.init.Skillitem3.value}if(TF88.FC66()<=o)return t.maxbtn.visible=!0,void(t.activeGroup.visible=!1);t.maxbtn.visible=!1,t.activeGroup.visible=!0;var n=o+1,a=TE98.spectralskill[n],h=N12.gID(r),p={itemData:{data:h,ct:0},isBottom:!1};t.it1.ZM72(p);var l=N12.giC(r),c=a.cost;t.costLb.text=O3.tr(8286,h.name,c),c<=l?(t.ownlb.textFlow=O3.tr2(6690,l),P7.FD53(t.upLevel,1)):(t.ownlb.textFlow=O3.tr2(6689,l),P7.FD53(t.upLevel,0))},t.prototype.updateRed=function(){var t=App.CM.gtM(O6.B59),e=t.ZT54;this.cl1.imgNew.visible=0<t.lingYunRed(e.id,1),this.cl2.imgNew.visible=0<t.lingYunRed(e.id,2),this.cl3.imgNew.visible=0<t.lingYunRed(e.id,3)},t.prototype.ZX1=function(){this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this)},t.prototype.ZO74=function(){this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this)},t.prototype.doUpLevel=function(){var t=App.CM.gtM(O6.B59),e=t.ZT54,i=t.sps[e.id],s=-1,o=void 0;switch(t.selectLingYun){case 1:s=i.skLv1,o=TE98.init.Skillitem1.value;break;case 2:s=i.skLv2,o=TE98.init.Skillitem2.value;break;case 3:s=i.skLv3,o=TE98.init.Skillitem3.value}if(TF88.FC66()<=s)P18.sDP(O3.tr(8311));else{var r=s+1,n=TE98.spectralskill[r],a=N12.giC(o);n.cost<=a?this.apF(J7.A3,e.id,t.selectLingYun):P18.sDP(O3.tr(8147))}},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t);var i=this;if(t instanceof TF51)switch(e){case"LINGYUN_SELECT":i.initAttr(),i.ZY15(),i.updateAttr(),i.udpateCost();break;case P4.L63:i.ZY15(),i.updateAttr(),i.udpateCost(),i.updateRed()}if(t instanceof THH9)switch(e){case P4.V43:i.udpateCost(),i.updateRed()}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this);this.ZO74(),this.attrNameKey=null,App.CM.gtM(O6.B59).selectLingYun=void 0},t.prototype.closeSelf=function(){App.VM.close(O7.I59)},t}(BaseEuiView);__reflect(LingYunView.prototype,"LingYunView");var Spectral=function(){};__reflect(Spectral.prototype,"Spectral");var O2=function(){function s(){}return s.FK35=function(t){s.init=t.skin_init,s.suit=t.suit_suit,s.allskin=s.FK17(t)},s.FK17=function(t){var e={};if(t.avatar_fashion){var i=t.avatar_fashion;for(var s in i){var o=i[s],r={};r.id=o.man,r.name=o.name,r.itemid=o.item,r.attr=o.attribute,e[r.id]=r;var n={};n.id=o.woman,n.name=o.name,n.itemid=o.item,n.attr=o.attribute,e[n.id]=n}}if(t.horse_skin){var a=t.horse_skin;for(var s in a)e[s]=a[s]}if(t.wing_skin){var h=t.wing_skin;for(var s in h)e[s]=h[s]}if(t.faqi_skin){var p=t.faqi_skin;for(var s in p)e[s]=p[s]}if(t.weapon_skin){var l=t.weapon_skin;for(var s in l)e[s]=l[s]}if(t.animal_skin){var c=t.animal_skin;for(var s in c)e[s]=c[s]}return e},s.FI96=function(){var t=new Array;if(!s.suit)return t;for(var e in s.suit){var i=s.suit[e];t.push(i)}return t=t.sort(P7.FM7)},s}();__reflect(O2.prototype,"O2");var TE99=function(e){function t(){var t=e.call(this)||this;return App.VM.register(O7.I17,"SuitHomeView",t,K17.UI_Main_TOP),new THH16(t).aLV(O7.I17),t.suitProxy=new THH17(t),t}return __extends(t,e),t}(TE11);__reflect(TE99.prototype,"TE99");var THH16=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(TG79);__reflect(THH16.prototype,"THH16");var THH17=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(TG80);__reflect(THH17.prototype,"THH17");var THH28=function(){function d(){}return d.FF48=function(t){void 0===t&&(t=void 0);var e=new Array,i=O2.FI96();if(!i||0==i.length)return e;for(var s=0;s<i.length;s++){var o=i[s],r={};r.id=o.id,r.part1=o.part1,r.part2=o.part2,r.part3=o.part3,r.part4=o.part4,r.attr1=o.attr1,r.attr2=o.attr2,r.attr3=o.attr3,r.bg="v1_img_wukuangdi_js_png",r.selected=t?t.id==r.id?1:0:0==s?1:0,r.nameicon=o.name,r.name=o.name1,r.icon=o.icon,r.red=0,r.active=d.FHH69(o.id),e.push(r)}return e},d.getPart=function(t){var e=void 0;if(!t)return e;var i=t.split("|");return e=i.length<=1?Number(i[0]):1==App.CM.gtM(O6.B82).avatarInfo.ge?Number(i[0]):Number(i[1])},d.FHH69=function(t){var e=new Array,i=O2.suit[t];if(!i)return e;var s=d.getPart(i.part1),o=d.getPart(i.part2),r=d.getPart(i.part3),n=d.getPart(i.part4),a=App.CM.gtM(O6.B82);a.haveSkin(s)&&e.push(s),a.haveSkin(o)&&e.push(o),a.haveSkin(r)&&e.push(r),a.haveSkin(n)&&e.push(n);var h=App.CM.gtM(O6.C2);h.haveSkin(s)&&e.push(s),h.haveSkin(o)&&e.push(o),h.haveSkin(r)&&e.push(r),h.haveSkin(n)&&e.push(n);var p=App.CM.gtM(O6.C18);p.haveSkin(s)&&e.push(s),p.haveSkin(o)&&e.push(o),p.haveSkin(r)&&e.push(r),p.haveSkin(n)&&e.push(n);var l=App.CM.gtM(O6.C17);l.haveSkin(s)&&e.push(s),l.haveSkin(o)&&e.push(o),l.haveSkin(r)&&e.push(r),l.haveSkin(n)&&e.push(n);var c=App.CM.gtM(O6.B83);c.haveSkin(s)&&e.push(s),c.haveSkin(o)&&e.push(o),c.haveSkin(r)&&e.push(r),c.haveSkin(n)&&e.push(n);var u=App.CM.gtM(O6.B91);return u.haveSkin(s,1)&&e.push(s),u.haveSkin(o,1)&&e.push(o),u.haveSkin(r,1)&&e.push(r),u.haveSkin(n,1)&&e.push(n),e},d.haveSkin=function(t){var e=App.CM.gtM(O6.B82),i=App.CM.gtM(O6.C2),s=App.CM.gtM(O6.C18),o=App.CM.gtM(O6.B91),r=App.CM.gtM(O6.B83),n=App.CM.gtM(O6.C17);return App.CM.gtM(O6.C3).has(t)||e.haveSkin(t)||i.haveSkin(t)||s.haveSkin(t)||o.haveSkin2(t,1)||r.haveSkin(t)||n.haveSkin(t)},d.FE44=function(t){var e="",i=Math.ceil(t.width/t.size);i*=2;for(var s=0;s<i;s++)e+="_";return e},d}();__reflect(THH28.prototype,"THH28");var SuitIconRender=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.bg&&(this.bg.source=this.data.bg),this.texiao&&(this.texiao.visible=1==this.data.selected),P7.FD57(this.data.name,this.lbName),this.icon&&(this.icon.source=this.data.icon),this.red&&(this.red.visible=1==this.data.red)},e}(eui.ItemRenderer);__reflect(SuitIconRender.prototype,"SuitIconRender");var SuitHomeView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.sGN("release_suit"),i.skinName="SuitHomeSkin",i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.list.horizontalCenter=NaN,this.list.left=NaN,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4569)),this.act2Title.text=O3.tr(4571),this.act3Title.text=O3.tr(4572),this.act4Title.text=O3.tr(4573)},t.prototype.initData=function(){n.prototype.initData.call(this),this._collection=new eui.ArrayCollection,this.list.dataProvider=this._collection,this.list.itemRenderer=SuitIconRender},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.open.call(this,t),this.leftScroller.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ40,this),this.rightScroller.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM90,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.part1IconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part2IconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part3IconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part4IconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part1name.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.part2name.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.part3name.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.part4name.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this);var i=THH28.FF48();this._collection.replaceAll(i),this._curSelect=this._collection.getItemAt(0),this.GX5()},t.prototype.uBM=function(t,e){n.prototype.uBM.call(this,t,e);var i=!1;if(t instanceof TG12&&e===P4.G19&&(i=!0),t instanceof TG70&&e===P4.Q15&&(i=!0),t instanceof THH21&&e===P4.R57&&(i=!0),t instanceof TG96&&e===P4.R64&&(i=!0),t instanceof TG34&&e===P4.O19&&(i=!0),t instanceof TG8&&e===P4.T33&&(i=!0),i){var s=THH28.FF48(this._curSelect);this._collection.replaceAll(s);for(var o=0;o<this._collection.length;o++){var r=this._collection.getItemAt(o);if(1==r.selected){this._curSelect=r;break}}this.GX5()}},t.prototype.GX5=function(){6<this._collection.length?(this.leftScroller.visible=!0,this.rightScroller.visible=!0,this.list.horizontalCenter=NaN,this.list.left=0):(this.leftScroller.visible=!1,this.rightScroller.visible=!1,this.list.horizontalCenter=0,this.list.left=NaN),this.ZM25(),this.ZD38(),this.ZD39(),this.ZD40(),this.ZD41(),this.ZT61()},t.prototype.ZM25=function(){var t=0;if(0!=this._curSelect.active.length){var e=THH28.getPart(this._curSelect.part1);if(-1!=this._curSelect.active.indexOf(e)){var i=O2.allskin[e],s=P7.FL92(i.attr);t+=O4.getScore(s)}var o=THH28.getPart(this._curSelect.part2);if(-1!=this._curSelect.active.indexOf(o)){var r=O2.allskin[o],n=P7.FL92(r.attr);t+=O4.getScore(n)}var a=THH28.getPart(this._curSelect.part3);if(-1!=this._curSelect.active.indexOf(a)){var h=O2.allskin[a],p=P7.FL92(h.attr);t+=O4.getScore(p)}var l=THH28.getPart(this._curSelect.part4);if(-1!=this._curSelect.active.indexOf(l)){var c=O2.allskin[l],u=P7.FL92(c.attr);t+=O4.getScore(u)}if(2<=this._curSelect.active.length){var d=P7.FL92(this._curSelect.attr1);t+=O4.getScore(d)}if(3<=this._curSelect.active.length){var v=P7.FL92(this._curSelect.attr2);t+=O4.getScore(v)}if(4<=this._curSelect.active.length){var f=P7.FL92(this._curSelect.attr3);t+=O4.getScore(f)}this.score.text=String(t)}else this.score.text=String(t)},t.prototype.ZD38=function(){this.tname.textFlow=M18.HTP.parse(O3.tr(4570,this._curSelect.name));var t=App.CM.gtM(O6.B82),e=P7.copyTab(t.avatarInfo.us[J11.A7]),i=THH28.getPart(this._curSelect.part1);e=this.dealPart(e,i);var s=THH28.getPart(this._curSelect.part2);e=this.dealPart(e,s);var o=THH28.getPart(this._curSelect.part3);e=this.dealPart(e,o);var r=THH28.getPart(this._curSelect.part4);e=this.dealPart(e,r),this.suitObj&&(this.suitGp.removeChildren(),this.suitObj.destory(),this.suitObj=null),this.suitObj=new FightGameObject;var n={x:0,y:0,dir:Dir.br,objType:P13.A6};e.t=null,this.suitObj.setBaseData(n),e.bt=BehaviourType.Stand_d,this.suitObj.setData(e,this.suitGp),this.suitObj.name=null},t.prototype.dealPart=function(t,e){var i=O2.init[e];return"body"==i.type?t.id=i.id:"weapon"==i.type?t.we=i.id:"wing"==i.type?t.wi=i.id:"magicthing"==i.type?t.f=i.id:"horses"==i.type&&(t.h=i.id),t},t.prototype.ZD39=function(){var t=P7.FL92(this._curSelect.attr1),e=O4.getScore(t);if(this.act2score.text=O3.tr(2700)+String(e),e<=0)this.act2lb1.text="",this.act2lb2.text="";else{var i=1;for(var s in t){var o=parseInt(s);1==i?this.act2lb1.text=O4.FD72(o)+"："+t[s]:this.act2lb2.text=O4.FD72(o)+"："+t[s],i++}}this.act2Title.textColor=2<=this._curSelect.active.length?7716890:15058860,this.act2score.textColor=2<=this._curSelect.active.length?15035394:15058860,this.act2lb1.textColor=2<=this._curSelect.active.length?7716890:15058860,this.act2lb2.textColor=2<=this._curSelect.active.length?7716890:15058860},t.prototype.ZD40=function(){var t=P7.FL92(this._curSelect.attr2),e=O4.getScore(t);if(this.act3score.text=O3.tr(2700)+String(e),e<=0)this.act3lb1.text="",this.act3lb2.text="";else{var i=1;for(var s in t){var o=parseInt(s);1==i?this.act3lb1.text=O4.FD72(o)+"："+t[s]:this.act3lb2.text=O4.FD72(o)+"："+t[s],i++}}this.act3Title.textColor=3<=this._curSelect.active.length?7716890:15058860,this.act3score.textColor=3<=this._curSelect.active.length?15035394:15058860,this.act3lb1.textColor=3<=this._curSelect.active.length?7716890:15058860,this.act3lb2.textColor=3<=this._curSelect.active.length?7716890:15058860},t.prototype.ZD41=function(){var t=P7.FL92(this._curSelect.attr3),e=O4.getScore(t);if(this.act4score.text=O3.tr(2700)+String(e),e<=0)this.act4lb1.text="",this.act4lb2.text="";else{var i=1;for(var s in t){var o=parseInt(s);1==i?this.act4lb1.text=O4.FD72(o)+"："+t[s]:this.act4lb2.text=O4.FD72(o)+"："+t[s],i++}}this.act4Title.textColor=4<=this._curSelect.active.length?7716890:15058860,this.act4score.textColor=4<=this._curSelect.active.length?15035394:15058860,this.act4lb1.textColor=4<=this._curSelect.active.length?7716890:15058860,this.act4lb2.textColor=4<=this._curSelect.active.length?7716890:15058860},t.prototype.ZT61=function(){var t=THH28.getPart(this._curSelect.part1),e=O2.allskin[t];this.part1name.text=e.name,this.part1line.text=THH28.FE44(this.part1name),this.part1bg.source=N12.FL5(e.itemid),this.part1icon.source=N12.FJ86(e.itemid);var i=P7.FL92(e.attr),s=O4.getScore(i);this.part1score.text=O3.tr(2700)+s,this.part1score.textColor=-1!=this._curSelect.active.indexOf(t)?15035394:7039851,this.part1ActImg.filters=-1!=this._curSelect.active.indexOf(t)?[]:[P16.GrayMatrixFilter],this.part1ActDesc.text=-1!=this._curSelect.active.indexOf(t)?O3.tr(2701):O3.tr(2702),this.part1ActDesc.textColor=-1!=this._curSelect.active.indexOf(t)?2987793:7039851;var o=THH28.getPart(this._curSelect.part2),r=O2.allskin[o];this.part2name.text=r.name,this.part2line.text=THH28.FE44(this.part2name),this.part2bg.source=N12.FL5(r.itemid),this.part2icon.source=N12.FJ86(r.itemid);var n=P7.FL92(r.attr),a=O4.getScore(n);this.part2score.text=O3.tr(2700)+a,this.part2score.textColor=-1!=this._curSelect.active.indexOf(o)?15035394:7039851,this.part2ActImg.filters=-1!=this._curSelect.active.indexOf(o)?[]:[P16.GrayMatrixFilter],this.part2ActDesc.text=-1!=this._curSelect.active.indexOf(o)?O3.tr(2701):O3.tr(2702),this.part2ActDesc.textColor=-1!=this._curSelect.active.indexOf(o)?2987793:7039851;var h=THH28.getPart(this._curSelect.part3),p=O2.allskin[h];this.part3name.text=p.name,this.part3line.text=THH28.FE44(this.part3name),this.part3bg.source=N12.FL5(p.itemid),this.part3icon.source=N12.FJ86(p.itemid);var l=P7.FL92(p.attr),c=O4.getScore(l);this.part3score.text=O3.tr(2700)+c,this.part3score.textColor=-1!=this._curSelect.active.indexOf(h)?15035394:7039851,this.part3ActImg.filters=-1!=this._curSelect.active.indexOf(h)?[]:[P16.GrayMatrixFilter],this.part3ActDesc.text=-1!=this._curSelect.active.indexOf(h)?O3.tr(2701):O3.tr(2702),this.part3ActDesc.textColor=-1!=this._curSelect.active.indexOf(h)?2987793:7039851;var u=THH28.getPart(this._curSelect.part4),d=O2.allskin[u];this.part4name.text=d.name,this.part4line.text=THH28.FE44(this.part4name),this.part4bg.source=N12.FL5(d.itemid),this.part4icon.source=N12.FJ86(d.itemid);var v=P7.FL92(d.attr),f=O4.getScore(v);this.part4score.text=O3.tr(2700)+f,this.part4score.textColor=-1!=this._curSelect.active.indexOf(u)?15035394:7039851,this.part4ActImg.filters=-1!=this._curSelect.active.indexOf(u)?[]:[P16.GrayMatrixFilter],this.part4ActDesc.text=-1!=this._curSelect.active.indexOf(u)?O3.tr(2701):O3.tr(2702),this.part4ActDesc.textColor=-1!=this._curSelect.active.indexOf(u)?2987793:7039851},t.prototype.showItem=function(t){var e=void 0;switch(t.currentTarget){case this.part1IconGroup:var i=THH28.getPart(this._curSelect.part1),s=O2.allskin[i];e=N12.gID(s.itemid);break;case this.part2IconGroup:var o=THH28.getPart(this._curSelect.part2),r=O2.allskin[o];e=N12.gID(r.itemid);break;case this.part3IconGroup:var n=THH28.getPart(this._curSelect.part3),a=O2.allskin[n];e=N12.gID(a.itemid);break;case this.part4IconGroup:var h=THH28.getPart(this._curSelect.part4),p=O2.allskin[h];e=N12.gID(p.itemid)}App.CM.apF(O6.C11,O14.A15,e),TG40.playClickEffect()},t.prototype.jumpToSkin=function(t){var e=void 0,i=void 0;switch(t.currentTarget){case this.part1name:var s=THH28.getPart(this._curSelect.part1);i=s,e=O2.init[s].type;break;case this.part2name:var o=THH28.getPart(this._curSelect.part2);i=o,e=O2.init[o].type;break;case this.part3name:var r=THH28.getPart(this._curSelect.part3);i=r,e=O2.init[r].type;break;case this.part4name:var n=THH28.getPart(this._curSelect.part4);i=n,e=O2.init[n].type}var a=App.CM.gtM(O6.B82).avatarInfo,h=0;switch(e){case"horses":if(h=M13.init.unlockLevel.value,a.l<h){var p=K18.init.commonDesc1.value;P18.sDP(M18.format(p,[h]))}App.CM.apF(O6.C2,N7.A12,i);break;case"wing":if(h=N13.init.unlockLevel.value,a.l<h){p=K18.init.commonDesc1.value;P18.sDP(M18.format(p,[h]))}App.CM.apF(O6.C18,O10.A16,i);break;case"magicthing":if(h=N16.init.unlockLevel.value,a.l<h){p=K18.init.commonDesc1.value;P18.sDP(M18.format(p,[h]))}App.CM.apF(O6.C17,O15.A13,i);break;case"weapon":if(h=L2.init.unlockLevel.value,a.l<h){p=K18.init.commonDesc1.value;P18.sDP(M18.format(p,[h]))}App.CM.apF(O6.B83,L18.A12,i);break;case"body":h=K18.init.fashionLv.value,a.l<h&&P18.sDP(O3.tr(2703,h)),App.VM.open(O7.E15,i)}},t.prototype.ZQ40=function(){var t=this.scroller.viewport.scrollH-25;this.scroller.viewport.scrollH=t<0?0:t},t.prototype.ZM90=function(){var t=this.scroller.viewport.scrollH+25;t+this.scroller.width>this.scroller.viewport.contentWidth?this.scroller.viewport.scrollH=this.scroller.viewport.contentWidth-this.scroller.width:this.scroller.viewport.scrollH=t},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.close.call(this),this.leftScroller.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ40,this),this.rightScroller.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM90,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.part1IconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part2IconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part3IconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part4IconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.part1name.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.part2name.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.part3name.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.part4name.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpToSkin,this),this.suitGp.removeChildren(),this.suitObj.destory(),this.suitObj=null,this._curSelect=null},t.prototype.onItemTap=function(t){this._curSelect.id!=t.item.id&&(this._curSelect.selected=0,t.item.selected=1,this._curSelect=t.item,this._collection.refresh(),this.GX5(),TG40.playClickEffect())},t.prototype.closeSelf=function(){App.VM.close(O7.I17)},t}(BaseEuiView);__reflect(SuitHomeView.prototype,"SuitHomeView");var SurvivalConfig=function(){function a(){}return a.FK35=function(t){a.init=t.crosssurvival_init,a.box=t.crosssurvival_box,a.buff=t.crosssurvival_buff,a.monster=t.crosssurvival_monster,a.ranking=t.crosssurvival_ranking,a.room=t.crosssurvival_room,a.doubleTime=a.ZV6()},a.getRoomInfo=function(t){return a.room[t=""+t]},a.getRoomBoxPos=function(t){var e=[],i=a.room[t=""+t];return i&&i.boxpos&&i.boxpos.split(";").forEach(function(t){e.push(t.split(",")[0])}),e},a.getRoomMonsterPos=function(t){var e=[],i=a.room[t=""+t];return i&&i.monsterpos&&i.monsterpos.split(";").forEach(function(t){e.push(t.split(",")[0])}),e},a.getRoomMonsterId=function(t,i){var s=null,e=a.room[t];return e&&e.monsterpos&&e.monsterpos.split(";").forEach(function(t){var e=t.split(",");if(i==e[0])return s=e[1]}),s},a.getRankingRweard=function(t){var e=null;for(var i in a.ranking){var s=a.ranking[i],o=(s.rank+"").split(","),r=parseInt(o[0]),n=parseInt(o[1]);if(r<=t&&t<=n)e=(s.reward+"").split(";")}return e},a.FJ53=function(){return a.init.openTime.value.split(",")[0]},a.ZV6=function(){var t=a.init.openTime.value,e=M18.FL28(t,",");return{pt:P6.FM3(e[0]),vt:P6.FM3(e[1])}},a.getOpenDay=function(){var e=[];return a.init.openDay.value.split(",").forEach(function(t){e.push(parseInt(t))}),e},a}();__reflect(SurvivalConfig.prototype,"SurvivalConfig");var SurvivalConst=function(){function t(){}return t.CROSS_SURVIVAL_LOADSTATE_REQ=10001,t.CROSS_SURVIVAL_LOADSTATE_RES=10002,t.CROSS_SURVIVAL_STATE_PUSH=10003,t.CROSS_SURVIVAL_LOADDATA_REQ=10004,t.CROSS_SURVIVAL_LOADDATA_RES=10005,t.SURVIVAL_MAP_OPEN=10006,t.CROSS_SURVIVAL_QUIT_REQ=10007,t.CROSS_SURVIVAL_QUIT_RES=10008,t.CROSS_SURVIVAL_LOADRANK_REQ=10009,t.CROSS_SURVIVAL_LOADRANK_RES=10010,t.CROSS_SURVIVAL_LOADMONSTER_REQ=10011,t.CROSS_SURVIVAL_LOADMONSTER_RES=10012,t.CROSS_SURVIVAL_LOADARMY_REQ=10013,t.CROSS_SURVIVAL_LOADARMY_RES=10014,t.CROSS_SURVIVAL_CHALLENGE_REQ=10015,t.CROSS_SURVIVAL_CHALLENGE_RES=10016,t.CROSS_SURVIVAL_MOVE_REQ=10017,t.CROSS_SURVIVAL_MOVE_RES=10018,t.CROSS_SURVIVAL_TRANSFER_REQ=10019,t.CROSS_SURVIVAL_TRANSFER_RES=10020,t.CROSS_SURVIVAL_LOADBOX_REQ=10021,t.CROSS_SURVIVAL_LOADBOX_RES=10022,t.CROSS_SURVIVAL_GETBOX_REQ=10023,t.CROSS_SURVIVAL_GETBOX_RES=10024,t.CROSS_SURVIVAL_DATA_PUSH=10025,t.CROSS_SURVIVAL_AOTO_EXIT=10026,t.CROSS_SURVIVAL_OPEN_ACTIVITY=10027,t}();__reflect(SurvivalConst.prototype,"SurvivalConst");var SurvivalController=function(s){function t(){var t=s.call(this)||this,e=t;App.VM.register(O7.SurvivalMap,"SurvivalMapView",e,K17.Fight),App.VM.register(O7.SurvivalUI,"SurvivalUIView",e,K17.Fight),App.VM.register(O7.SurvivalZhuFu,"SurvivalZhuFuView",e,K17.UI_Popup),App.VM.register(O7.SurvivalRank,"SurvivalRankView",e,K17.UI_Popup),App.VM.register(O7.SurvivalTeamState,"SurvivalTeamStateView",e,K17.UI_Popup),App.VM.register(O7.SurvivalMonster,"SurvivalMonsterView",e,K17.UI_Popup),App.VM.register(O7.SurvivalLoadBox,"SurvivalLoadBoxView",e,K17.UI_Popup),App.VM.register(O7.SurvivalChange,"SurvivalChangeView",e,K17.UI_Popup);var i=new SurvivalModel(e);return i.aLV(O7.SurvivalMap),i.aLV(O7.SurvivalUI),i.aLV(O7.SurvivalZhuFu),i.aLV(O7.SurvivalRank),i.aLV(O7.SurvivalLoadBox),i.aLV(O7.SurvivalMonster),i.aLV(O7.SurvivalTeamState),i.aLV(O7.D89),e.survivalProxy=new SurvivalProxy(e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADSTATE_REQ,e.survivalStateLoadReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADSTATE_RES,e.survivalStateLoadRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_STATE_PUSH,e.survivalPushRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_DATA_PUSH,e.roomCdPush,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADDATA_REQ,e.survivalLoadDataReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADDATA_RES,e.survivalLoadDataRes,e),e.rgF(SurvivalConst.SURVIVAL_MAP_OPEN,e.openSurvivalChallenge,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_QUIT_REQ,e.survivalMapExitReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_QUIT_RES,e.survivalMapExitRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADRANK_REQ,e.survivalRankReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADRANK_RES,e.survivalRankRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADMONSTER_REQ,e.survivalMonsterInfoReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADMONSTER_RES,e.survivalMonsterInfoRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADARMY_REQ,e.survivalArmyReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADARMY_RES,e.survivalArmyRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_CHALLENGE_REQ,e.survivalChallengeReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_CHALLENGE_RES,e.survivalChallengeRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,e.survivalMoveReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_MOVE_RES,e.survivalMoveRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_TRANSFER_REQ,e.survivalTransferReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_TRANSFER_RES,e.survivalTransferRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADBOX_REQ,e.survivalLoadBoxReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_LOADBOX_RES,e.survivalLoadBoxRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_GETBOX_REQ,e.survivalGetBoxReq,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_GETBOX_RES,e.survivalGetBoxRes,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_AOTO_EXIT,e.closeSurvivalChallenge,e),e.rgF(SurvivalConst.CROSS_SURVIVAL_OPEN_ACTIVITY,e.openActivityPreview,e),t}return __extends(t,s),t.prototype.survivalStateLoadReq=function(){return this.survivalProxy.survivalStateLoadReq()},t.prototype.survivalStateLoadRes=function(t){if(200==t.head.state){var e=this.gtM();e.isInit=!0,e.st=t.body.st,e.to=t.body.to,e.ir=t.body.ir,1==e.ir?App.K16.doTimer(1e3,1,this.survivalLoadDataReq,this):this.openActivityPreview(),e.notify(P4.CROSS_SURVIVAL_LOADSTATE_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalPushRes=function(t){if(200==t.head.state){var e=this.gtM();if(e.isShow=!1,null!=t.body.st&&null!=t.body.st&&(e.st=t.body.st),null!=t.body.to&&null!=t.body.to&&(e.to=t.body.to),null!=t.body.ir&&null!=t.body.ir&&(e.ir=t.body.ir),0<e.st)this.openActivityPreview();else App.CM.gtM(O6.B99).fightSceneType==I4.survival&&this.closeSurvivalChallenge();e.notify(P4.CROSS_SURVIVAL_STATE_PUSH)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.roomCdPush=function(t){if(200==t.head.state){var e=this.gtM();e.updateLoadData(t.body),null==t.body.ir&&null==t.body.ir||(e.ir=t.body.ir);var i=App.VM.gOV(O7.I61);i&&i.ZI71(!0),e.notify(P4.CROSS_SURVIVAL_DATA_PUSH)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.openActivityPreview=function(){var t=this.gtM();if(!(t.st<=0)&&(!(0<t.ir)&&!t.isShow&&t.isInit&&App.CM.gtM(O6.B99).fightSceneType!=I4.survival))var e=egret.setTimeout(function(){var t={handler:function(){return SurvivalUtil.FC89()},str:O3.tr(8982),ctrlConst:O6.SurvivalChallenge};App.VM.open(O7.A82,t),egret.clearTimeout(e)},this,1e3)},t.prototype.survivalLoadDataReq=function(){this.survivalProxy.survivalLoadDataReq()},t.prototype.survivalLoadDataRes=function(t){if(200==t.head.state){var e=this.gtM();e.initLoadData(t.body),App.CM.gtM(O6.B99).fightSceneType=I4.survival;var i=App.SceneManager.getCurrScene();App.VM.ZT95(),M2.A4==i?this.openSurvivalChallenge():App.SceneManager.runScene(M2.A4),e.notify(P4.CROSS_SURVIVAL_LOADDATA_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.openSurvivalChallenge=function(){this.gtM().isShow=!0,App.VM.setAutoClose(O7.I76,!0),App.VM.close(O7.I76),App.VM.setAutoClose(O7.G82,!0),App.VM.close(O7.G82),App.VM.setAutoClose(O7.SurvivalMap,!1),App.VM.open(O7.SurvivalMap),App.VM.setAutoClose(O7.SurvivalUI,!1),App.VM.open(O7.SurvivalUI);var t=App.CM.gtM(O6.B99);t.isFighting&&(App.VM.setAutoClose(O7.I61,!1),App.VM.open(O7.I61)),t.isSpFighting&&t.notify(FightD.FC_Close_UI)},t.prototype.survivalMapExitReq=function(){this.survivalProxy.survivalMapExitReq()},t.prototype.survivalMapExitRes=function(t){200==t.head.state?(this.gtM().ir=t.body.ir,this.closeSurvivalChallenge()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalRankReq=function(t,e){this.survivalProxy.survivalRankReq(t,e)},t.prototype.survivalRankRes=function(t){if(200==t.head.state){var e=this.gtM();e.initRankData(t.body),App.VM.gOV(O7.SurvivalRank)||App.VM.open(O7.SurvivalRank),e.notify(P4.CROSS_SURVIVAL_LOADRANK_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalMonsterInfoReq=function(t){this.survivalProxy.survivalMonsterInfoReq(t)},t.prototype.survivalMonsterInfoRes=function(t,e){if(200==t.head.state){var i=this.gtM();i.sc=t.body.sc,i.hpp=t.body.hpp,i.tg=null,App.VM.open(O7.SurvivalMonster,e.pos),i.notify(P4.CROSS_SURVIVAL_LOADMONSTER_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalArmyReq=function(){this.survivalProxy.survivalArmyReq()},t.prototype.survivalArmyRes=function(t){if(200==t.head.state){var e=this.gtM();e.ul=t.body.ul,e.bm=t.body.bm,e.notify(P4.CROSS_SURVIVAL_LOADARMY_RES),App.VM.open(O7.SurvivalTeamState)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalChallengeReq=function(t){this.survivalProxy.survivalChallengeReq(t)},t.prototype.survivalChallengeRes=function(t){if(200==t.head.state){var e=this.gtM();t.body.rm&&(e.rm=t.body.rm),null==t.body.rb&&null==t.body.rb||(e.rb=t.body.rb),null==t.body.r&&null==t.body.r||(e.r=t.body.r),null==t.body.ir&&null==t.body.ir||(e.ir=t.body.ir),null==t.body.pm&&null==t.body.pm||(e.pm=t.body.pm),App.CM.apF(O6.B99,N1.A11,t.body.fr,{rewards:t.body.ob,needResult:!1,type:P15.SurvivalChallenge},this.battleCallBack,this),e.notify(P4.CROSS_SURVIVAL_CHALLENGE_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.battleCallBack=function(){var t=this.gtM();if(-1==t.r)return this.apF(SurvivalConst.CROSS_SURVIVAL_AOTO_EXIT),void P18.sDP(O3.tr(9030));t.pm&&this.apF(SurvivalConst.CROSS_SURVIVAL_LOADARMY_REQ)},t.prototype.survivalMoveReq=function(t,e){t=t.replace("ceil",""),e=e.replace("ceil",""),this.survivalProxy.survivalMoveReq(t,e)},t.prototype.survivalMoveRes=function(t){if(843!=t.head.state){var e=this.gtM();if(200!=t.head.state)return App.CM.apF(O6.B87,L10.A4,t),void(e.lastClickCeil=null);e.fw=t.body.fw,e.tg=t.body.tg,e.notify(P4.CROSS_SURVIVAL_MOVE_RES)}},t.prototype.survivalTransferReq=function(){this.survivalProxy.survivalTransferReq()},t.prototype.survivalTransferRes=function(t){if(200==t.head.state){var e=this.gtM();e.updateLoadData(t.body),e.notify(P4.CROSS_SURVIVAL_TRANSFER_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalLoadBoxReq=function(t){this.survivalProxy.survivalLoadBoxReq(t)},t.prototype.survivalLoadBoxRes=function(t){if(200==t.head.state){var e=this.gtM();e.boxcd=t.body.cd,e.moving=!0,App.VM.open(O7.SurvivalLoadBox),e.notify(P4.CROSS_SURVIVAL_LOADBOX_RES)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.survivalGetBoxReq=function(t){this.survivalProxy.survivalGetBoxReq(t)},t.prototype.survivalGetBoxRes=function(t){if(200==t.head.state){var e=this.gtM();t.body.rm&&(e.rm=t.body.rm),t.body.pm&&(e.pm=t.body.pm),t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.CROSS_SURVIVAL_GETBOX_RES),e.pm&&this.apF(SurvivalConst.CROSS_SURVIVAL_LOADARMY_REQ)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.closeSurvivalChallenge=function(){App.VM.setAutoClose(O7.SurvivalMap,!0),App.VM.close(O7.SurvivalMap),App.VM.setAutoClose(O7.SurvivalUI,!0),App.VM.close(O7.SurvivalUI),App.VM.setAutoClose(O7.I76,!1),App.CM.gtM(O6.B99).fightSceneType=I4.A8;var t=App.VM.gOV(O7.I61);t&&t.ZI71(!0),App.SceneManager.runScene(M2.A5),K17.Fight.visible=!0},t}(TE11);__reflect(SurvivalController.prototype,"SurvivalController");var SurvivalModel=function(i){function t(t){var e=i.call(this,t)||this;return e.isInit=!1,e.isShow=!1,e.moving=!1,e}return __extends(t,i),t.prototype.initLoadData=function(t){this.cd=t.cd,this.sv=t.sv,this.r=t.r,this.rcd=t.rcd,this.rb=t.rb,this.dcl=t.dcl,this.mp=t.mp},t.prototype.initRankData=function(t){this.rl=t.rl,this.mr=t.mr,this.cp=t.cp,this.ap=t.ap},t.prototype.updateLoadData=function(t){this.r=t.r,this.rcd=t.rcd,this.dcl=t.dcl,this.mp=t.mp,this.sv=t.sv},t.prototype.getDropItemFromDropCellVo=function(e){var i;return!this.dcl||this.dcl.length<=0||this.dcl.forEach(function(t){if(t.pos==e)return i=t.dl}),i},t.prototype.deleteCellVo=function(i){var s=this;!s.dcl||s.dcl.length<=0||s.dcl.forEach(function(t,e){t.pos!=i||s.dcl.splice(e,1)})},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(SurvivalModel.prototype,"SurvivalModel");var SurvivalProxy=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.CROSS_SURVIVAL_STATE_PUSH,e.survivalStatePush,e),e.rSM(P4.CROSS_SURVIVAL_DATA_PUSH,e.roomCdPush,e),e}return __extends(t,i),t.prototype.survivalStateLoadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.CROSS_SURVIVAL_LOADSTATE_REQ,body:{}};s.rSMO(P4.CROSS_SURVIVAL_LOADSTATE_RES,function(t){s.apF(SurvivalConst.CROSS_SURVIVAL_LOADSTATE_RES,t),e("加载生存大挑战状态数据完成")},s),s.sSM(i)})},t.prototype.survivalStatePush=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_STATE_PUSH,t)},t.prototype.roomCdPush=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_DATA_PUSH,t)},t.prototype.survivalLoadDataReq=function(){var t={type:P4.CROSS_SURVIVAL_LOADDATA_REQ,body:{}};this.rSMO(P4.CROSS_SURVIVAL_LOADDATA_RES,this.survivalLoadDataRes,this),this.sSM(t)},t.prototype.survivalLoadDataRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADDATA_RES,t)},t.prototype.survivalMapExitReq=function(){var t={type:P4.CROSS_SURVIVAL_QUIT_REQ,body:{}};this.rSMO(P4.CROSS_SURVIVAL_QUIT_RES,this.survivalMapExitRes,this),this.sSM(t)},t.prototype.survivalMapExitRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_QUIT_RES,t)},t.prototype.survivalRankReq=function(t,e){var i={type:P4.CROSS_SURVIVAL_LOADRANK_REQ,body:{page:t,size:e}};this.rSMO(P4.CROSS_SURVIVAL_LOADRANK_RES,this.survivalRankRes,this),this.sSM(i)},t.prototype.survivalRankRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADRANK_RES,t)},t.prototype.survivalMonsterInfoReq=function(t){var e={type:P4.CROSS_SURVIVAL_LOADMONSTER_REQ,body:{pos:t}},i={};i.pos=t,this.rSMO(P4.CROSS_SURVIVAL_LOADMONSTER_RES,this.survivalMonsterInfoRes,this,i),this.sSM(e)},t.prototype.survivalMonsterInfoRes=function(t,e){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADMONSTER_RES,t,e)},t.prototype.survivalArmyReq=function(){var t={type:P4.CROSS_SURVIVAL_LOADARMY_REQ,body:{}};this.rSMO(P4.CROSS_SURVIVAL_LOADARMY_RES,this.survivalArmyRes,this),this.sSM(t)},t.prototype.survivalArmyRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADARMY_RES,t)},t.prototype.survivalChallengeReq=function(t){var e={type:P4.CROSS_SURVIVAL_CHALLENGE_REQ,body:{pos:t}};this.rSMO(P4.CROSS_SURVIVAL_CHALLENGE_RES,this.survivalChallengeRes,this),this.sSM(e)},t.prototype.survivalChallengeRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_CHALLENGE_RES,t)},t.prototype.survivalMoveReq=function(t,e){var i={type:P4.CROSS_SURVIVAL_MOVE_REQ,body:{start:t,end:e}};this.rSMO(P4.CROSS_SURVIVAL_MOVE_RES,this.survivalMoveRes,this),this.sSM(i)},t.prototype.survivalMoveRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_MOVE_RES,t)},t.prototype.survivalTransferReq=function(){var t={type:P4.CROSS_SURVIVAL_TRANSFER_REQ,body:{}};this.rSMO(P4.CROSS_SURVIVAL_TRANSFER_RES,this.survivalTransferRes,this),this.sSM(t)},t.prototype.survivalTransferRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_TRANSFER_RES,t)},t.prototype.survivalLoadBoxReq=function(t){var e={type:P4.CROSS_SURVIVAL_LOADBOX_REQ,body:{pos:t}};this.rSMO(P4.CROSS_SURVIVAL_LOADBOX_RES,this.survivalLoadBoxRes,this),this.sSM(e)},t.prototype.survivalLoadBoxRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADBOX_RES,t)},t.prototype.survivalGetBoxReq=function(t){var e={type:P4.CROSS_SURVIVAL_GETBOX_REQ,body:{pos:t}};this.rSMO(P4.CROSS_SURVIVAL_GETBOX_RES,this.survivalGetBoxRes,this),this.sSM(e)},t.prototype.survivalGetBoxRes=function(t){this.apF(SurvivalConst.CROSS_SURVIVAL_GETBOX_RES,t)},t}(TG80);__reflect(SurvivalProxy.prototype,"SurvivalProxy");var SurvivalUtil=function(){function a(){}return a.FC89=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=SurvivalConfig.init.unlockLv.value,i=SurvivalConfig.init.serverDate.value;if(t.l<e||t.od<i){var s=O3.tr(5054,i,e);return P18.sDP(s),!1}var o=App.CM.gtM(O6.SurvivalChallenge);if(o.st<=0)return P18.sDP(O3.tr(3205)),!1;if(2<=o.ir)return App.CM.apF(O6.B87,L10.A4,{head:{state:841}}),!1;var r=App.CM.gtM(O6.B99);if(r.fightSceneType==I4.survival)return P18.sDP(O3.tr(9005)),!1;if(r.isSpFighting)return P18.sDP(O3.tr(5301)),!1;if(r.isFighting){var n=App.VM.gOV(O7.I61);n&&n.ZI71(!0)}return a.firstTipAlert(),!0},a.firstTipAlert=function(){var t={handler:function(){App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_LOADDATA_REQ)},content:O3.tr(8939)};App.VM.open(O7.C54,t)},a.getLiveTimeStr=function(t){var e=Math.floor(t/6e4),i=Math.floor(t/1e3)-60*e;return(e<10?"0"+e:""+e)+":"+(i<10?"0"+i:""+i)},a}();__reflect(SurvivalUtil.prototype,"SurvivalUtil");var SurvivalCeilAward=function(e){function t(){var t=e.call(this)||this;return t.skinName="SurvivalCeilAwardSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this)},t.prototype.onClick=function(){var t=this,e=App.CM.gtM(O6.SurvivalChallenge);e.moving||e.lastClickCeil!=t.pos&&(e.lastClickCeil=t.pos,e.fw&&0<e.fw.length?(e.notify("STOP_MOVE"),e.fw=null,e.tg=null,App.K16.doTimer(500,1,function(){App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,e.cachemp,t.pos)},t)):App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,e.cachemp,t.pos))},t.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this),this.pos=null},t}(eui.Component);__reflect(SurvivalCeilAward.prototype,"SurvivalCeilAward");var SurvivalCeilIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="SurvivalCeilIconSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this)},t.prototype.onClick=function(){},t.prototype.tweenSelectIcon=function(){this.sicon.visible&&(egret.Tween.removeTweens(this.sicon),egret.Tween.get(this.sicon,{loop:!0}).to({top:-40},500).to({top:-30},500))},t.prototype.moveToTargetPoint=function(o,t){var r=this;if(o!=r.pos&&t){var n=App.CM.gtM(O6.SurvivalChallenge);n.moving=!0;var e=SurvivalConfig.init.speed.value;e*=1e3,egret.Tween.get(this).to({x:t.x+9,y:t.y+4},e).call(function(){r.pos=o,n.cachemp=o;var t="ceil"+n.tg;if(n.fw&&n.fw.length<=0&&(n.lastClickCeil=null),n.fw&&n.fw.length<=0&&t!=o){var e=SurvivalConfig.getRoomBoxPos(n.r),i=SurvivalConfig.getRoomMonsterPos(n.r),s=SurvivalConfig.getRoomInfo(n.r);-1<e.indexOf(n.tg)?App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_LOADBOX_REQ,n.tg):-1<i.indexOf(n.tg)?App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_LOADMONSTER_REQ,n.tg):s.leavepos==n.tg&&App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_TRANSFER_REQ,n.tg)}n.moving=!1})}},t.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this),egret.Tween.removeTweens(this.sicon),this.pos=null},t}(eui.Component);__reflect(SurvivalCeilIcon.prototype,"SurvivalCeilIcon");var SurvivalDrop1=function(e){function t(){var t=e.call(this)||this;return t.skinName="SurvivalDrop1Skin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);this.title.textFlow=O3.tr2(8928)},t}(eui.Component);__reflect(SurvivalDrop1.prototype,"SurvivalDrop1");var SurvivalDrop2=function(e){function t(){var t=e.call(this)||this;return t.skinName="SurvivalDrop2Skin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.title.textFlow=O3.tr2(8930)},t}(eui.Component);__reflect(SurvivalDrop2.prototype,"SurvivalDrop2");var SurvivalFightAddRender=function(i){function t(){var t=i.call(this)||this;t.skinName="SurvivalFightAddRenderSkin";var e=t;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.open,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.close,e),t}return __extends(t,i),t.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this)},t.prototype.open=function(){},t.prototype.close=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.open,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.close,this)},t.prototype.dataChanged=function(){i.prototype.dataChanged.call(this);var t=this.data;this.it1desc&&(this.it1desc.textFlow=O3.tr2(8933,t.desc)),this.bg&&(this.bg.source=N12.getBox(t.quality)),this.icon&&(this.icon.source=t.icon)},t}(eui.ItemRenderer);__reflect(SurvivalFightAddRender.prototype,"SurvivalFightAddRender");var SurvivalRankRender=function(a){function t(){var t=a.call(this)||this;t.skinName="SurvivalRankRenderSkin";var e=t;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.open,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.close,e),t}return __extends(t,a),t.prototype.open=function(){},t.prototype.close=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.open,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.close,this)},t.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var t=this,e=t.data;if(t.indexlb&&(t.indexlb.textFlow=O3.tr2(8923,e.r)),t.namelb&&(e.sn?t.namelb.textFlow=O3.tr2(8923,e.n+"."+e.sn):t.namelb.textFlow=O3.tr2(8923,e.n)),t.livelb){var i=e.t,s=SurvivalUtil.getLiveTimeStr(i);t.livelb.textFlow=O3.tr2(8924,s)}if(t.rgp){t.rgp.viewport=t.itemList,t.itemList.itemRenderer=ItemIcon,t.rgp.scrollPolicyV=eui.ScrollPolicy.OFF;var o=[],r=SurvivalConfig.getRankingRweard(e.r);r&&0<r.length&&r.forEach(function(t){var e=t.split(":"),i={data:N12.gID(e[0]),ct:e[1]};o.push({itemData:i,isBottom:!1,scale:.65})});var n=new eui.ArrayCollection(o);t.itemList.dataProvider=n}if(t.titleImg)switch(e.r){case 1:t.titleImg.source="v1_img_first_png";break;case 2:t.titleImg.source="v1_img_scend_png";break;case 3:t.titleImg.source="v1_img_third_png";break;default:t.titleImg.source=""}},t}(eui.ItemRenderer);__reflect(SurvivalRankRender.prototype,"SurvivalRankRender");var SurvivalStateIcon=function(s){function t(t){var e=s.call(this)||this,i=e;return i.skinName="SurvivalStateIconSkin",i.info=t,e}return __extends(t,s),t.prototype.childrenCreated=function(){s.prototype.childrenCreated.call(this);var t=this;if(t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onClose,t),1==t.info.id&&(t.icon.scaleX=.75,t.icon.scaleY=.75),t.info.ii){var e=N12.gID(t.info.ii);t.info.ic=e.icon,t.info.q=e.quality}t.bg.source=N12.getBox(t.info.q),t.icon.source=t.info.ic;var i=App.CM.gtM(O6.SurvivalChallenge);i.pm&&null!=i.pm[t.info.id]&&null!=i.pm[t.info.id]?t.doTexiao():t.pbar.value=Math.floor(100*t.info.hpp),t.hname.text=t.info.n,t.hname.textColor=Number(O5.FA77(t.info.q))},t.prototype.doTexiao=function(){var t=this;App.CM.gtM(O6.SurvivalChallenge).pm[t.info.id]<=0?(P16.sGF(t,!0),App.K16.doTimer(1e3,1,function(){P16.sGF(t,!1),App.THH33.aUE(t.texiao,"fuhuo",-110,-200,1,t.doHuiXue.bind(t))},t)):t.doHuiXue()},t.prototype.doHuiXue=function(){var t=App.CM.gtM(O6.SurvivalChallenge).pm[this.info.id];this.info.hpp<=t?this.pbar.value=Math.floor(100*this.info.hpp):(this.pbar.value=Math.floor(100*t),egret.Tween.get(this.pbar).to({value:Math.floor(100*this.info.hpp)},800))},t.prototype.onClose=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this),this.info=null,egret.Tween.removeTweens(this.pbar),App.THH33.rEf(this.texiao,"fuhuo")},t}(eui.Component);__reflect(SurvivalStateIcon.prototype,"SurvivalStateIcon");var SurvivalChangeView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName="SurvivalChangeSkin",i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this)},t.prototype.initData=function(){n.prototype.initData.call(this)},t.prototype.open=function(t,e,i,s){n.prototype.open.call(this);var o=this;o.lastpos=t,o.gp.x=o.lastpos.x-110,o.gp.y=o.lastpos.y-113,o.nowpos=e;var r=App.CM.gtM(O6.B82);o.icon.source=r.avatarInfo.i,o.iconTween(),o.xishouTween(),o.kuosanTween(),o.guangyunTween(),egret.Tween.get(o).wait(400).call(o.starMove.bind(o))},t.prototype.iconTween=function(){var t=this;t.icon.scaleX=t.icon.scaleY=.62,egret.Tween.get(t.icon).to({scaleX:.8,scaleY:.8},100).to({scaleX:.25,scaleY:.25},300).call(function(){t.icon.alpha=0})},t.prototype.xishouTween=function(){var t=this;t.xishou.scaleX=t.xishou.scaleY=1.5,t.xishou.blendMode=egret.BlendMode.ADD,egret.Tween.get(t.xishou).to({scaleX:0,scaleY:0},400).call(function(){t.xishou.alpha=0})},t.prototype.kuosanTween=function(){this.kuosan.alpha=0,this.kuosan.scaleX=this.kuosan.scaleY=.85,this.kuosan.blendMode=egret.BlendMode.ADD,egret.Tween.get(this.kuosan).to({alpha:0,scaleX:.85,scaleY:.85},390).to({alpha:.5,scaleX:.85,scaleY:.85},10).to({alpha:0,scaleX:1.15,scaleY:1.15},250)},t.prototype.guangyunTween=function(){this.guangyun.alpha=0,this.guangyun.blendMode=egret.BlendMode.ADD,egret.Tween.get(this.guangyun).to({alpha:0},390).to({alpha:1},10).to({alpha:0},250)},t.prototype.starMove=function(){egret.Tween.get(this.star2,{loop:!0}).to({alpha:0},100).to({alpha:1},100),egret.Tween.get(this.gp).wait(200).to({x:this.nowpos.x-110,y:this.nowpos.y-113},1e3).wait(200).call(this.thirdPart.bind(this))},t.prototype.thirdPart=function(){var t=this;t.star1.alpha=0,t.star2.alpha=0,egret.Tween.removeTweens(t.star1),egret.Tween.removeTweens(t.star2),t.icon.alpha=1,t.icon.scaleX=t.icon.scaleY=.25,egret.Tween.get(t.icon).to({scaleX:.75,scaleY:.75},200).to({scaleX:.62,scaleY:.62},100),t.kuosan.alpha=0,t.kuosan.scaleX=t.kuosan.scaleY=.85,egret.Tween.get(t.kuosan).to({alpha:0,scaleX:.85,scaleY:.85},290).to({alpha:.5,scaleX:.85,scaleY:.85},10).to({alpha:0,scaleX:1.15,scaleY:1.15},250),t.guangyun.alpha=0,egret.Tween.get(t.guangyun).to({alpha:0},290).to({alpha:1},10).to({alpha:0},250).call(function(){App.CM.gtM(O6.SurvivalChallenge).cachemp=null;var t=App.VM.gOV(O7.SurvivalMap);t&&t instanceof SurvivalMapView&&t.ZW13()}).wait(300).call(function(){App.VM.close(O7.SurvivalChange)})},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.prototype.close.call(this);var i=this;i.lastpos=null,i.nowpos=null,egret.Tween.removeTweens(i),egret.Tween.removeTweens(i.gp),egret.Tween.removeTweens(i.icon),egret.Tween.removeTweens(i.xishou),egret.Tween.removeTweens(i.kuosan),egret.Tween.removeTweens(i.guangyun),egret.Tween.removeTweens(i.star1),egret.Tween.removeTweens(i.star2)},t}(BaseEuiView);__reflect(SurvivalChangeView.prototype,"SurvivalChangeView");var SurvivalLoadBoxView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="SurvivalLoadBoxSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);this.pBarField.slideDuration=0,this.lbStr1.textFlow=O3.tr2(8989)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this);this.GX5()},t.prototype.GX5=function(){var t=this;t.leftCd=0;var e=App.CM.gtM(O6.SurvivalChallenge),i=e.boxcd;t.pBarField.minimum=0,t.pBarField.maximum=i-1,t.pBarField.value=t.leftCd,t.timeHandler&&(App.K16.rBH(t.timeHandler),t.timeHandler=null),t.timeHandler=App.K16.doTimer(1e3,i,function(){t.leftCd++,t.pBarField.value=t.leftCd},t,function(){t.boxp=e.tg,e.boxcd=0,e.tg=null,App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_GETBOX_REQ,t.boxp),t.closeSelf(),e.moving=!1},t)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e[0];if(t instanceof SurvivalModel)switch(s){case P4.CROSS_SURVIVAL_STATE_PUSH:case P4.CROSS_SURVIVAL_DATA_PUSH:this.closeSelf()}},t.prototype.close=function(){App.K16.rBH(this.timeHandler),this.timeHandler=null,this.leftCd=null,this.boxp=null},t.prototype.closeSelf=function(){App.VM.close(O7.SurvivalLoadBox)},t}(BaseEuiView);__reflect(SurvivalLoadBoxView.prototype,"SurvivalLoadBoxView");var SurvivalMapView=function(c){function t(t,e){var i=c.call(this,t,e)||this;return i.cds=0,i.cdm=0,i.liveM=0,i.liveS=0,i.leftM=0,i.leftS=0,i.sGN("release_survival"),i.skinName="SurvivalMapSkin",i}return __extends(t,c),t.prototype.initUI=function(){c.prototype.initUI.call(this);this.cdminute.text="00",this.cdsecond.text="00",this.livetime.textFlow=O3.tr2(8911,"00:00"),this.lefttime.textFlow=O3.tr2(8936,"00:00")},t.prototype.initData=function(){c.prototype.initData.call(this);for(var t=1;t<=8;t++)for(var e=1;e<=8;e++){var i="ceil"+t+"_"+e,s=this[i];s&&(s.name=i,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doCeilClick,this))}},t.prototype.open=function(){c.prototype.open.call(this);var t=this;App.CM.apF(O6.B63,K7.A7),App.CM.apF(O6.C10,O16.A5),App.CM.apF(O6.C10,O16.A16),App.CM.apF(O6.B64,J18.A31),App.CM.apF(O6.C20,K2.A9),t.doorGp.addEventListener(egret.TouchEvent.TOUCH_TAP,t.doChuanSong,t),t.ZK39(),t.updateMap(),t.recordTimes(),t.updateCdTime(),t.updateLiveTime(),t.updateLeftTime(),App.K16.doFrame(5,1,t.ZW13,t),App.K16.doFrame(5,1,t.updateMonsters,t),App.K16.doFrame(5,1,t.updateAwards,t),App.K16.doFrame(30,1,t.updateDoor,t)},t.prototype.ZK39=function(){var t=App.CM.gtM(O6.B99);if(t.isFighting&&!t.isSpFighting){var e=App.VM.gOV(O7.I61);e&&e.ZI71(!0)}},t.prototype.updateCdTime=function(){var t=this;t.cdHandler&&(App.K16.rBH(t.cdHandler),t.cdHandler=null),t.cdminute.text=t.cdm<10?"0"+t.cdm:""+t.cdm,t.cdsecond.text=t.cds<10?"0"+t.cds:""+t.cds,t.cdHandler=App.K16.doTimer(1e3,0,function(){t.cdm<=0&&t.cds<=0?t.cdHandler&&App.K16.rBH(t.cdHandler):(0<t.cds?t.cds--:(t.cdm--,t.cds=59),t.cdminute.text=t.cdm<10?"0"+t.cdm:""+t.cdm,t.cdsecond.text=t.cds<10?"0"+t.cds:""+t.cds,App.CM.gtM(O6.SurvivalChallenge).rcd=60*t.cdm+t.cds)},t)},t.prototype.updateLiveTime=function(){var e=this;e.liveHandler&&(App.K16.rBH(e.liveHandler),e.liveHandler=null);var t=(e.liveM<10?"0"+e.liveM:""+e.liveM)+":"+(e.liveS<10?"0"+e.liveS:""+e.liveS);e.livetime.textFlow=O3.tr2(8911,t),e.liveHandler=App.K16.doTimer(1e3,0,function(){e.liveS<59?e.liveS++:(e.liveM++,e.liveS=0);var t=(e.liveM<10?"0"+e.liveM:""+e.liveM)+":"+(e.liveS<10?"0"+e.liveS:""+e.liveS);e.livetime.textFlow=O3.tr2(8911,t),App.CM.gtM(O6.SurvivalChallenge).sv=6e4*e.liveM+1e3*e.liveS},e)},t.prototype.updateLeftTime=function(){var e=this;e.leftHandler&&(App.K16.rBH(e.leftHandler),e.leftHandler=null);var t=(e.leftM<10?"0"+e.leftM:""+e.leftM)+":"+(e.leftS<10?"0"+e.leftS:""+e.leftS);e.lefttime.textFlow=O3.tr2(8936,t),e.leftHandler=App.K16.doTimer(1e3,0,function(){if(e.leftM<=0&&e.leftS<=0)e.leftHandler&&App.K16.rBH(e.leftHandler);else{0<e.leftS?e.leftS--:(e.leftM--,e.leftS=59);var t=(e.leftM<10?"0"+e.leftM:""+e.leftM)+":"+(e.leftS<10?"0"+e.leftS:""+e.leftS);e.lefttime.textFlow=O3.tr2(8936,t),App.CM.gtM(O6.SurvivalChallenge).cd=60*e.leftM+e.leftS}},e)},t.prototype.updateMap=function(){var t=App.CM.gtM(O6.SurvivalChallenge).r;this.room=SurvivalConfig.getRoomInfo(t);var e=this.room.map.split(","),i=[];e.forEach(function(t){var e="ceil"+t;i.push(e)});for(var s=1;s<=8;s++)for(var o=1;o<=8;o++){var r="ceil"+s+"_"+o,n=this[r];n&&(n.visible=-1==i.indexOf(r))}},t.prototype.recordTimes=function(){var t=App.CM.gtM(O6.SurvivalChallenge);this.cds=t.rcd%60,this.cdm=Math.floor(t.rcd/60);var e=t.sv;this.liveM=Math.floor(e/6e4),this.liveS=Math.floor(e/1e3)-60*this.liveM;var i=t.cd;this.leftM=Math.floor(i/60),this.leftS=i-60*this.leftM},t.prototype.ZW13=function(){var t=App.CM.gtM(O6.SurvivalChallenge);t.cachemp||(t.cachemp="ceil"+t.mp);var e=t.cachemp;if(this[e]){var i=App.CM.gtM(O6.B82),s=this[e],o=this.avatarCeil;o||(o=new SurvivalCeilIcon,this.avatarCeil=o,this.mpGp.addChild(o)),o.visible=!0,o.x=s.x+9,o.y=s.y+4,o.icon.source=i.avatarInfo.i,o.pos=e,o.sicon.visible=!0,o.tweenSelectIcon()}},t.prototype.updateMonsters=function(){var t=this,e=App.CM.gtM(O6.SurvivalChallenge);if(t.monstersCeil){for(var i in t.monstersCeil)App.TF56.ZJ66(t.monstersCeil[i]);t.monstersCeil=null}t.monstersCeil={};for(var s=t.room.monsterpos.split(";"),o=s.length,r=0;r<o;r++){var n=s[r].split(","),a=n[0],h=n[1],p="ceil"+a;if(t[p]){var l=e.getDropItemFromDropCellVo(a);if(l){var c=t[p],u=new SurvivalCeilAward;u.x=c.x+1,u.y=c.y;var d=SurvivalConfig.monster[h];if(u.bg.source=N12.getBox(d.quality),u.icon.source=d.icon,l&&l[0]){u.it1Gp.visible=u.it1Gp.includeInLayout=!0;var v=1==(f=l[0]).t?N12.gID(f.id):SurvivalConfig.buff[""+f.id];u.it1bg.source=N12.getBox(v.quality),u.it1.source=v.icon}else u.it1Gp.visible=u.it1Gp.includeInLayout=!1;if(l&&l[1]){u.it2Gp.visible=u.it2Gp.includeInLayout=!0;var f,g=1==(f=l[1]).t?N12.gID(f.id):SurvivalConfig.buff[""+f.id];u.it2bg.source=N12.getBox(g.quality),u.it2.source=g.icon}else u.it2Gp.visible=u.it2Gp.includeInLayout=!1;u.pos=p,t.monstersCeil[p]=u,t.mpGp.addChild(u)}}}},t.prototype.updateAwards=function(){var t=this,e=App.CM.gtM(O6.SurvivalChallenge);if(t.awardsCeil){for(var i in t.awardsCeil)App.TF56.ZJ66(t.awardsCeil[i]);t.awardsCeil=null}t.awardsCeil={};for(var s=t.room.boxpos.split(";"),o=s.length,r=0;r<o;r++){var n=s[r].split(","),a=n[0],h=n[1],p="ceil"+a;if(t[p]){var l=e.getDropItemFromDropCellVo(a);if(l){var c=t[p],u=new SurvivalCeilAward;u.x=c.x+1,u.y=c.y;var d=SurvivalConfig.box[h];if(u.bg.source="",u.icon.source=d.icon,l&&l[0]){u.it1Gp.visible=u.it1Gp.includeInLayout=!0;var v=1==(f=l[0]).t?N12.gID(f.id):SurvivalConfig.buff[""+f.id];u.it1bg.source=N12.getBox(v.quality),u.it1.source=v.icon}else u.it1Gp.visible=u.it1Gp.includeInLayout=!1;if(l&&l[1]){u.it2Gp.visible=u.it2Gp.includeInLayout=!0;var f,g=1==(f=l[1]).t?N12.gID(f.id):SurvivalConfig.buff[""+f.id];u.it2bg.source=N12.getBox(g.quality),u.it2.source=g.icon}else u.it2Gp.visible=u.it2Gp.includeInLayout=!1;u.pos=p,t.awardsCeil[p]=u,t.mpGp.addChild(u)}}}},t.prototype.doCeilClick=function(t){var e=t.currentTarget.name;if(this[e]){var i=App.CM.gtM(O6.SurvivalChallenge);i.moving||i.lastClickCeil!=e&&(i.lastClickCeil=e,i.fw&&0<i.fw.length?(this.moveHandler&&App.K16.rBH(this.moveHandler),i.fw=null,i.tg=null,App.K16.doTimer(500,1,function(){App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,i.cachemp,e)},this)):App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,i.cachemp,e))}},t.prototype.doChuanSong=function(t){var e=App.CM.gtM(O6.SurvivalChallenge),i=this.room.leavepos;e.moving||(e.fw&&0<e.fw.length?(this.moveHandler&&App.K16.rBH(this.moveHandler),e.fw=null,e.tg=null,App.K16.doTimer(500,1,function(){App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,e.cachemp,i)},this)):App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_MOVE_REQ,e.cachemp,i))},t.prototype.avatarBeginMove=function(){var t=App.CM.gtM(O6.SurvivalChallenge);if(t.fw&&!(t.fw.length<=0)){var e=t.fw.splice(0,1)[0];this.avatarMoving(e);var i=SurvivalConfig.init.speed.value;i=1e3*i*1.5,this.moveHandler=App.K16.doTimer(i,1,this.avatarBeginMove,this)}},t.prototype.avatarMoving=function(t){var e=this[t="ceil"+t];if(e){var i=new egret.Point(e.x,e.y);this.avatarCeil.moveToTargetPoint(t,i)}},t.prototype.updateDoor=function(){var t=this;t.doorGp.removeChildren();var e=App.CM.gtM(O6.SurvivalChallenge);if(!(e.dcl&&0<e.dcl.length||t.monstersCeil&&0<Object.keys(t.monstersCeil).length||t.awardsCeil&&0<Object.keys(t.awardsCeil).length)){var i=t.room.leavepos,s=t[i="ceil"+i];s&&(t.mpGp.setChildIndex(t.doorGp,t.mpGp.numChildren-1),t.doorGp.x=s.x,t.doorGp.y=s.y,App.THH33.aUE(t.doorGp,"chuansongmen",-62,-62),e.notify("DOOR_APPEAR"))}},t.prototype.close=function(){c.prototype.close.call(this);for(var t=this,e=App.CM.gtM(O6.SurvivalChallenge),i=1;i<=8;i++)for(var s=1;s<=8;s++){var o=t[r="ceil"+i+"_"+s];o&&o.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doCeilClick,t)}if(t.doorGp.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doChuanSong,t),t.room=null,t.avatarCeil&&(App.TF56.ZJ66(t.avatarCeil),t.avatarCeil=null),t.monstersCeil){for(var r in t.monstersCeil)App.TF56.ZJ66(t.monstersCeil[r]);t.monstersCeil=null}if(t.awardsCeil){for(var r in t.awardsCeil)App.TF56.ZJ66(t.awardsCeil[r]);t.awardsCeil=null}t.cdHandler&&App.K16.rBH(t.cdHandler),t.liveHandler&&App.K16.rBH(t.liveHandler),t.leftHandler&&App.K16.rBH(t.leftHandler),t.moveHandler&&App.K16.rBH(t.moveHandler),e.cachemp=null,e.lastClickCeil=null,e.moving=null,App.THH33.rEf(t.doorGp,"chuansongmen")},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.prototype.uBM.apply(this,[t].concat(e));var s=this,o=e[0];if(t instanceof SurvivalModel)switch(o){case P4.CROSS_SURVIVAL_MOVE_RES:if(t.fw&&t.fw.length<=0){var r=SurvivalConfig.getRoomBoxPos(t.r),n=SurvivalConfig.getRoomMonsterPos(t.r);-1<r.indexOf(t.tg)?App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_LOADBOX_REQ,t.tg):-1<n.indexOf(t.tg)?App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_LOADMONSTER_REQ,t.tg):s.room.leavepos==t.tg&&App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_TRANSFER_REQ,t.tg)}else s.avatarBeginMove();break;case P4.CROSS_SURVIVAL_GETBOX_RES:var a="ceil"+t.rm;s.awardsCeil[a]&&(App.TF56.ZJ66(s.awardsCeil[a]),s.awardsCeil[a]=null,delete s.awardsCeil[a],t.deleteCellVo(t.rm),s.updateDoor()),t.rm=null,t.lastClickCeil=null;break;case P4.CROSS_SURVIVAL_CHALLENGE_RES:a="ceil"+t.rm;s.monstersCeil[a]&&(App.TF56.ZJ66(s.monstersCeil[a]),s.monstersCeil[a]=null,delete s.monstersCeil[a],t.deleteCellVo(t.rm),s.updateDoor()),t.rm=null,t.lastClickCeil=null;break;case P4.CROSS_SURVIVAL_DATA_PUSH:case P4.CROSS_SURVIVAL_TRANSFER_RES:if(-1!=t.r){s.avatarCeil&&(s.avatarCeil.visible=!1);var h=s.getCeilPosition(t.cachemp);t.moving=!0,t.cachemp=null,t.cachemp="ceil"+t.mp,s.moveHandler&&App.K16.rBH(s.moveHandler),t.fw=null,t.tg=null,s.hideAllCeilNow(),s.recordTimes(),s.updateCdTime(),s.updateLiveTime();var p=App.SceneManager.getCurrScene();if(M2.A4==p){var l=s.getCeilPosition(t.cachemp);App.VM.open(O7.SurvivalChange,h,l)}s.roomPush()}else s.apF(SurvivalConst.CROSS_SURVIVAL_AOTO_EXIT);t.lastClickCeil=null;break;case"STOP_MOVE":s.moveHandler&&App.K16.rBH(s.moveHandler),t.fw=null,t.tg=null}},t.prototype.roomPush=function(){var t=this,e=App.CM.gtM(O6.SurvivalChallenge);App.K16.doFrame(5,1,function(){t.updateMap(),t.ZW13(),e.moving=!1},t),App.K16.doFrame(10,1,t.updateMonsters,t),App.K16.doFrame(10,1,t.updateAwards,t),t.doorGp.removeChildren()},t.prototype.hideAllCeilNow=function(){for(var t=1;t<=8;t++)for(var e=1;e<=8;e++){var i=this[s="ceil"+t+"_"+e];i&&(i.visible=!1)}if(this.monstersCeil){for(var s in this.monstersCeil)App.TF56.ZJ66(this.monstersCeil[s]);this.monstersCeil=null}if(this.awardsCeil){for(var s in this.awardsCeil)App.TF56.ZJ66(this.awardsCeil[s]);this.awardsCeil=null}},t.prototype.getCeilPosition=function(t){var e=new egret.Point,i=this[t];return i&&(e.x=i.x,e.y=i.y),e},t}(BaseEuiView);__reflect(SurvivalMapView.prototype,"SurvivalMapView");var SurvivalMonsterView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="SurvivalMonsterSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);this.title.textFlow=O3.tr2(8926),this.mscore.text="0",this.processBar.value=0,this.processBar.labelFunction=function(t,e){return Math.floor(t/e*100)+"%"},this.fightbtn.label=O3.tr(8845)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(t){o.prototype.open.call(this);var e=this;App.CM.gtM(O6.SurvivalChallenge).lastClickCeil=null,e.pos=t,e.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeSelf,e),e.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeSelf,e),e.fightbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.doChallenge,e),e.updateMonster(),e.updateDrop1(),e.updateDrop2()},t.prototype.doChallenge=function(){this.apF(SurvivalConst.CROSS_SURVIVAL_CHALLENGE_REQ,this.pos)},t.prototype.updateMonster=function(){var t=this,e=App.CM.gtM(O6.SurvivalChallenge);t.mscore.text=Math.floor(e.sc/1e4)+"",t.processBar.value=Math.floor(100*e.hpp),t.objBoss&&(t.objBoss.destory(),t.objBoss=null),t.mgp.removeChildren();var i=SurvivalConfig.getRoomMonsterId(e.r+"",t.pos),s=SurvivalConfig.monster[i];if(s&&s.monster){var o=N17.FB56(s.monster);if(o&&o.pos8){var r=N17.FF93(o.pos8);if(r&&r.image){t.objBoss=new FightGameObject;var n={id:r.image,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};t.objBoss.setData(n,t.mgp),t.objBoss.action=Action.Stand}}}},t.prototype.updateDrop1=function(){var r=this;r.cgp.removeChildren();var t=App.CM.gtM(O6.SurvivalChallenge).getDropItemFromDropCellVo(r.pos);!t||t.length<=0||t.forEach(function(t){if(2==t.t){var e=new SurvivalDrop1,i=SurvivalConfig.buff[""+t.id];e.it1bg.source=N12.getBox(i.quality),e.it1icon.source=i.icon,e.it1title.textFlow=O3.tr2(8929,i.name);var s=100*i.ratio,o=i.text.replace("$0",s+"%");-1<o.indexOf("$0")&&(o=o.replace("$0",s+"%")),e.it1desc.textFlow=O3.tr2(8929,o),r.cgp.addChild(e)}})},t.prototype.updateDrop2=function(){var t=App.CM.gtM(O6.SurvivalChallenge).getDropItemFromDropCellVo(this.pos);if(t&&!(t.length<=0)){var s=new SurvivalDrop2;t.forEach(function(t){if(1==t.t){var e={itemData:{data:N12.gID(t.id),ct:t.n},isBottom:!1},i=new ItemIcon;i.ZM72(e),s.awgp.addChild(i)}}),this.cgp.addChild(s)}},t.prototype.close=function(){o.prototype.close.call(this);var t=this;t.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.fightbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doChallenge,t),t.cgp.removeChildren(),t.objBoss&&(t.objBoss.destory(),t.objBoss=null),t.mgp.removeChildren()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e[0];if(t instanceof SurvivalModel)switch(s){case P4.CROSS_SURVIVAL_STATE_PUSH:t.st<=0&&this.closeSelf();break;case P4.CROSS_SURVIVAL_DATA_PUSH:this.closeSelf()}},t.prototype.closeSelf=function(){App.VM.close(O7.SurvivalMonster)},t}(BaseEuiView);__reflect(SurvivalMonsterView.prototype,"SurvivalMonsterView");var SurvivalRankView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.curpage=1,i.pagesize=15,i.skinName="SurvivalRankSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t=this;t.title.textFlow=O3.tr2(8916),t.ranklb.textFlow=O3.tr2(8917),t.namelb.textFlow=O3.tr2(8918),t.timelb.textFlow=O3.tr2(8919),t.rewlb.textFlow=O3.tr2(8920),t.myrank.textFlow=O3.tr2(8921),t.livetime.textFlow=O3.tr2(8911,"00:00");var e={render:SurvivalRankRender,gap:1,width:t.listGp.width,height:t.listGp.height,isFlat:!1};t.listView=new CommonListBase(e),t.listGp.addChild(t.listView),t.listView.verticalCenter=0,t.listView.horizontalCenter=0},t.prototype.initData=function(){o.prototype.initData.call(this);this.listData=[]},t.prototype.open=function(){o.prototype.open.call(this);var t=this;t.listView.open(),t.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.listView.scContent.addEventListener(eui.UIEvent.CHANGE_END,t.loadRankData,t),t.listView.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,t.loadRankData,t),t.updateMyRank()},t.prototype.updateRankView=function(t){var e=this,i=App.CM.gtM(O6.SurvivalChallenge),s=i.rl;if(s||(s=[]),s.length<=15&&i.ap<=1)for(var o=s.length+1;o<=15;o++){var r=new SurvivalRankEntryVo;r.r=o,r.n=O3.tr(8859),r.sn="",r.t=0,s.push(r)}s.forEach(function(t){e.listData.push(t)}),e.listView.rfL(e.listData,t)},t.prototype.loadRankData=function(){var t=App.CM.gtM(O6.SurvivalChallenge);this.curpage>=t.ap||this.listView.downArrow.visible||(this.curpage++,this.apF(SurvivalConst.CROSS_SURVIVAL_LOADRANK_REQ,this.curpage,this.pagesize))},t.prototype.updateMyRank=function(){var t=App.CM.gtM(O6.SurvivalChallenge);if(t.mr){this.myrank.textFlow=O3.tr2(8922,t.mr.r);var e=SurvivalUtil.getLiveTimeStr(t.mr.t);this.livetime.textFlow=O3.tr2(8911,e)}else this.myrank.textFlow=O3.tr2(8921),this.livetime.textFlow=O3.tr2(8911,"00:00")},t.prototype.close=function(){o.prototype.close.call(this);var t=this;t.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.listView.scContent.removeEventListener(eui.UIEvent.CHANGE_END,t.loadRankData,t),t.listView.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.loadRankData,t),t.listView.close(),t.listView=null,t.listData=null},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e[0];if(t instanceof SurvivalModel)switch(s){case P4.CROSS_SURVIVAL_LOADRANK_RES:this.updateRankView(!1);break;case P4.CROSS_SURVIVAL_DATA_PUSH:this.closeSelf()}},t.prototype.closeSelf=function(){App.VM.close(O7.SurvivalRank)},t}(BaseEuiView);__reflect(SurvivalRankView.prototype,"SurvivalRankView");var SurvivalTeamStateView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="SurvivalTeamStateSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t=this;t.title.textFlow=O3.tr2(8931),t.subtitle.textFlow=O3.tr2(8932),t.tip.textFlow=O3.tr2(9e3),t.tip.visible=!1;var e={render:SurvivalFightAddRender,gap:10,width:t.addgp.width-20,height:t.addgp.height,isFlat:!1};t.listView=new CommonListBase(e),t.addgp.addChild(t.listView),t.listView.verticalCenter=0,t.listView.horizontalCenter=0},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){o.prototype.open.call(this);var t=this;t.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.listView.open(),t.updateUnit(),t.updateAdd()},t.prototype.updateUnit=function(){this.firstGp.removeChildren(),this.secondGp.removeChildren();var t=App.CM.gtM(O6.SurvivalChallenge);if(t.ul&&!(t.ul.length<=0)){var e={};t.ul.forEach(function(t){e[t.id]=t});for(var i=1;i<=5;i++){if(o=e[i]){var s=new SurvivalStateIcon(o);this.firstGp.addChild(s)}}for(i=6;i<=11;i++){var o;if(o=e[i]){s=new SurvivalStateIcon(o);this.secondGp.addChild(s)}}}},t.prototype.updateAdd=function(){var t=App.CM.gtM(O6.SurvivalChallenge),e=[],i={};if(t.bm){for(var s in t.bm){var o=t.bm[s];if(a=SurvivalConfig.buff[s]){var r=i[a.attri];r?r+=Math.floor(a.ratio*o*100):r=Math.floor(a.ratio*o*100),i[a.attri]=r}}var n=[];for(var s in t.bm){var a;o=t.bm[s];if((a=SurvivalConfig.buff[s])&&!(-1<n.indexOf(a.attri))){n.push(a.attri);var h={},p=a.text,l=i[a.attri]+"%";p=p.replace("$0",l),h.desc=p,h.quality=a.quality,h.icon=a.icon,e.push(h)}}}this.listView.rfL(e,!0),this.tip.visible=e.length<=0},t.prototype.close=function(){o.prototype.close.call(this);this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),App.CM.gtM(O6.SurvivalChallenge).pm=null},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e[0];if(t instanceof SurvivalModel)switch(s){case P4.CROSS_SURVIVAL_DATA_PUSH:this.closeSelf()}},t.prototype.closeSelf=function(){App.VM.close(O7.SurvivalTeamState)},t}(BaseEuiView);__reflect(SurvivalTeamStateView.prototype,"SurvivalTeamStateView");var SurvivalUIView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="SurvivalUISkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t=this.zfBtn.imgBg;t.scale9Grid=new egret.Rectangle(32,32,2,2),t.scaleX=1.2,t.scaleY=1.2;var e=this.zfBtn.labelDisplay;e.width=60,e.textFlow=O3.tr2(8913,0,0);var i=this.stBtn.imgBg;i.scale9Grid=new egret.Rectangle(32,32,2,2),i.scaleX=1.2,i.scaleY=1.2;var s=this.stBtn.labelDisplay;s.width=48,s.textFlow=O3.tr2(8915),this.doordesc.textFlow=O3.tr2(8912),this.doorgp.visible=!1},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){o.prototype.open.call(this);var t=this;t.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.exitSurvival,t),t.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.doRankReq,t),t.zfBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.doZhuFuOpen,t),t.stBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.doStateOpen,t),t.updateZhuFu(),App.DelayOptManager.ZE59(t,t.chatUIModify),App.VM.close(O7.A82)},t.prototype.updateZhuFu=function(){var t=(SurvivalConfig.init.revival.value+"").split(",").length,e=App.CM.gtM(O6.SurvivalChallenge),i=this.zfBtn.labelDisplay;e.rb<=0?i.textFlow=O3.tr2(8913,e.rb,t):i.textFlow=O3.tr2(8914,e.rb,t)},t.prototype.updateDoorTip=function(){this.doorgp.visible=!0},t.prototype.chatUIModify=function(){var t=App.VM.gOV(O7.I85);if(t){var e=P7.FJ17();this.doorgp.bottom=e?t.chartGroup.height==ChatView.minHeig?240:490:t.chartGroup.height==ChatView.minHeig?360:490,t.gpTopBtn.visible=!1}},t.prototype.exitSurvival=function(){App.VM.open(O7.HH38,M18.HTP.parser(O3.tr(8949)),this,function(){App.CM.apF(O6.SurvivalChallenge,SurvivalConst.CROSS_SURVIVAL_QUIT_REQ)},void 0)},t.prototype.doRankReq=function(){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADRANK_REQ,1,15)},t.prototype.doZhuFuOpen=function(){App.VM.open(O7.SurvivalZhuFu)},t.prototype.doStateOpen=function(){this.apF(SurvivalConst.CROSS_SURVIVAL_LOADARMY_REQ)},t.prototype.ZR53=function(t){var e=this;e.doorgp.visible&&egret.Tween.get(e.doorgp).to({bottom:t},300).call(function(){egret.Tween.removeTweens(e.doorgp)})},t.prototype.close=function(){o.prototype.close.call(this);var t=this;t.exitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.exitSurvival,t),t.rankBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doRankReq,t),t.zfBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doZhuFuOpen,t),t.stBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.doStateOpen,t)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e[0];if(t instanceof SurvivalModel)switch(s){case"DOOR_APPEAR":this.updateDoorTip();break;case P4.CROSS_SURVIVAL_DATA_PUSH:case P4.CROSS_SURVIVAL_TRANSFER_RES:this.doorgp.visible=!1;break;case P4.CROSS_SURVIVAL_CHALLENGE_RES:this.updateZhuFu()}},t}(BaseEuiView);__reflect(SurvivalUIView.prototype,"SurvivalUIView");var SurvivalZhuFuView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.skinName="SurvivalZhuFuSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);this.title.textFlow=O3.tr2(8937),this.desc.textFlow=O3.tr2(8940)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){o.prototype.open.call(this);this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.close=function(){o.prototype.close.call(this);this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.prototype.uBM.apply(this,[t].concat(e));var s=e[0];if(t instanceof SurvivalModel)switch(s){case P4.CROSS_SURVIVAL_DATA_PUSH:this.closeSelf()}},t.prototype.closeSelf=function(){App.VM.close(O7.SurvivalZhuFu)},t}(BaseEuiView);__reflect(SurvivalZhuFuView.prototype,"SurvivalZhuFuView");var DropCellVo=function(){};__reflect(DropCellVo.prototype,"DropCellVo");var DropItem=function(){};__reflect(DropItem.prototype,"DropItem");var SurvivalRankEntryVo=function(){};__reflect(SurvivalRankEntryVo.prototype,"SurvivalRankEntryVo");var SurvivalUnitVo=function(){};__reflect(SurvivalUnitVo.prototype,"SurvivalUnitVo");var L5=function(){function l(){}return l.FK35=function(t){l.init=t.tactic_init,l.base=t.tactic_base,l.skill=t.tactic_skill,l.cellData=t.tactic_celldata,l.invent=t.tactic_invent,l.refine=t.tactic_refine,l.statelv=t.tactic_statelv,l.getData(),l.skillGroup=this.FI15(),l.baseGroup=this.FI97(),l.decompose=this.FD43()},l.gIV=function(t){return l.init[t].value},l.getBox=function(t){var e="";switch(t){case 1:e="v1_img_kuang_jinengbai_png";break;case 2:e="v1_img_kuang_jinenglv_png";break;case 3:e="v1_img_kuang_jinenglan_png";break;case 4:e="v1_img_kuang_jinengzi_png";break;case 5:e="v1_img_kuang_jinengcheng_png";break;case 6:e="v1_img_kuang_jinenghong_png";break;case 7:e="v1_img_kuang_hong2_png";break;default:e="v1_img_kuang_jinengbai_png"}return e},l.getStr=function(t){var e="";switch(t){case 1:e=O3.tr(2718);break;case 2:e=O3.tr(2719);break;case 3:e=O3.tr(2720);break;case 4:e=O3.tr(2721);break;case 5:e=O3.tr(2714);break;case 6:e=O3.tr(2713);break;default:e=O3.tr(2718)}return e},l.getData=function(){if(l.lowData=[],l.midData=[],l.highData=[],l.base)for(var t in l.base)switch(l.base[t].collectionid){case 1:l.lowData.push(l.base[t]);break;case 2:l.midData.push(l.base[t]);break;case 3:l.highData.push(l.base[t])}},l.FI15=function(){var t={};for(var e in l.skill){var i=l.skill[e],s=[],o=i.symbolid+"";t[o]?t[o].push(i):(s.push(i),t[o]=s)}return t},l.FI97=function(){var t=[];if(!l.base)return t;for(var e in l.base){var i=l.base[e],s=[],o=i.group;t[o]?t[o].push(i):(s.push(i),t[o]=s)}return t},l.FD43=function(){var t=[];if(!l.init)return t;var e=l.init.decompose.value.split("|");for(var i in e){var s=e[i].split(","),o=(String,String,String,String,parseInt(s[0])),r=s[1].split(";"),n=r[0].split(":"),a=r[1].split(":");t[o]={id:n[0],count:n[1],trpid:a[0],trpcount:a[1]}}return t},l.FF49=function(t,e){var i,s=l.skillGroup[t];for(var o in s){var r=s[o];if(!(r.reqcelllv<=e))break;i=r}return i},l.FD44=function(t){return l.refine[t]},l.FE45=function(t){return l.statelv[t]},l.FB99=function(t){l.FD44(t);var e,i={},s=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)},o=l.FD44(t);if(o){var r=THH1.FI55(o.attr);for(var n in r)s(i,n,r[n])}var a=l.FD44(t+1);if(a){e={};var h=THH1.FI55(a.attr);for(var n in e={},h)s(e,n,h[n])}if(!o)for(var n in e)i[n]={value:0,name:e[n].name};return{curData:i,nextData:e}},l.FC67=function(t){l.FE45(t);var e,i={},s=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)},o=l.FE45(t);if(o){var r=THH1.FI55(o.addattr);for(var n in r)s(i,n,r[n])}var a=l.FE45(t+1);if(a){e={};var h=THH1.FI55(a.addattr);for(var n in e={},h)s(e,n,h[n])}if(!o)for(var n in e)i[n]={value:0,name:e[n].name};return{curData:i,nextData:e}},l.FI98=function(t){var e=O4.getLv(),i=parseInt(l.gIV("refineLv"));if(e<i){var s=K18.init.commonDesc1.value;return t&&P18.sDP(M18.format(s,[i])),!1}var o=App.CM.gtM(O6.B43),r=parseInt(l.gIV("refineDays"));if(o.serOpenDay+1<r)return t&&P18.sDP(O3.tr(5055,r)),!1;var n=App.CM.gtM(O6.B90),a=parseInt(l.gIV("refineTacticLv")),h=0;for(h=0;h<n.cellsData.length;h++){var p=n.cellsData[h];if(p.isUnlock&&p.tid&&p.level>=a)break}return h!=n.cellsData.length||(t&&P18.sDP(O3.tr(6200,a)),!1)},l.FK18=function(t){var e=O4.getLv(),i=parseInt(l.gIV("stateLv"));if(e<i){var s=K18.init.commonDesc1.value;return t&&P18.sDP(M18.format(s,[i])),!1}var o=App.CM.gtM(O6.B43),r=parseInt(l.gIV("stateDays"));if(o.serOpenDay+1<r)return t&&P18.sDP(O3.tr(5055,r)),!1;var n=App.CM.gtM(O6.B90),a=parseInt(l.gIV("stateTacticLv")),h=0;for(h=0;h<n.cellsData.length;h++){var p=n.cellsData[h];if(p.isUnlock&&p.tid&&p.level>=a)break}return h!=n.cellsData.length||(t&&P18.sDP(O3.tr(6200,a)),!1)},l.FG33=function(t){return 15<t?"v1_img_star_red_png":10<t?"v1_img_starzi_png":5<t?"v1_img_star1_blue_png":0<t?"v1_img_star1_png":"v1_img_star2_png"},l}();__reflect(L5.prototype,"L5");var L19=function(){function t(){}return t.A29=0,t.A28=1,t.A30=2,t.A31=3,t.A32=4,t.A24=10001,t.A25=10002,t.A20=10003,t.A21=10004,t.A1=10005,t.A2=10006,t.A3=10007,t.A4=10008,t.A5=10009,t.A6=10010,t.A10=10011,t.A11=10012,t.A26=10013,t.A27=10014,t.A7=10015,t.A14=11001,t.A12=11002,t.A15=11003,t.A13=11004,t.A9=11005,t.A8=11006,t.A16=11007,t.A17=11008,t.A18=11009,t.A19=11010,t.A22=11011,t.A23=11012,t}();__reflect(L19.prototype,"L19");var TD49=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.G52,"TacticMainView",t,K17.UI_Main_TOP),t.rgF(L19.A14,t.GK19,t),t.rgF(L19.A12,t.GI15,t),App.VM.register(O7.G83,"TacticBookView",t,K17.UI_Main_TOP),t.rgF(L19.A15,t.GK20,t),t.rgF(L19.A13,t.GI16,t),App.VM.register(O7.E13,"TacticDatailsView",t,K17.UI_Tips),t.rgF(L19.A9,t.GE67,t),t.rgF(L19.A8,t.GD74,t),App.VM.register(O7.B68,"TacticRefineMainView",t,K17.UI_Main_TOP),t.rgF(L19.A16,t.GK21,t),t.rgF(L19.A17,t.GK22,t);var e=new TG32(t);return e.aLV(O7.G52),e.aLV(O7.HH51),e.aLV(O7.E11),e.aLV(O7.E12),e.aLV(O7.F99),e.aLV(O7.G45),e.aLV(O7.G58),e.aLV(O7.I39),e.aLV(O7.F27),e.aLV(O7.G31),e.aLV(O7.B68),t.tacticProxy=new TG33(t),t.rgF(L19.A24,t.loadReq,t),t.rgF(L19.A25,t.loadRes,t),t.rgF(L19.A20,t.equipReq,t),t.rgF(L19.A21,t.equipRes,t),t.rgF(L19.A1,t.GR60,t),t.rgF(L19.A2,t.GR61,t),t.rgF(L19.A3,t.GP77,t),t.rgF(L19.A4,t.GP78,t),t.rgF(L19.A5,t.GR62,t),t.rgF(L19.A6,t.GR63,t),t.rgF(L19.A10,t.GV25,t),t.rgF(L19.A11,t.GV22,t),t.rgF(L19.A26,t.lockReq,t),t.rgF(L19.A27,t.lockRes,t),t.rgF(L19.A7,t.GY69,t),t.rgF(L19.A18,t.GY70,t),t.rgF(L19.A19,t.GY71,t),t.rgF(L19.A22,t.realeReq,t),t.rgF(L19.A23,t.realeRes,t),t}return __extends(t,i),t.prototype.GK19=function(){App.VM.open(O7.G52)},t.prototype.GI15=function(){App.VM.close(O7.G52)},t.prototype.GK20=function(){App.VM.open(O7.G83)},t.prototype.GI16=function(){App.VM.close(O7.G83)},t.prototype.GE67=function(t){App.VM.open(O7.E13,t)},t.prototype.GD74=function(){App.VM.close(O7.E13)},t.prototype.GK21=function(){L5.FK18(!0)&&App.VM.open(O7.B68)},t.prototype.GK22=function(){App.VM.close(O7.B68)},t.prototype.loadReq=function(){App.CM.gtM(O6.B97).account;return this.tacticProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);e.initData(t.body),e.isShowImgNew()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.equipReq=function(t,e){this.tacticProxy.equipReq(t,e)},t.prototype.equipRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);e.ZY16(t.body.t0,t.body.t1),t.body.cell&&e.ZP72(t.body.cell),e.isShowImgNew(),e.notify(P4.V98)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR60=function(t,e){this.tacticProxy.GR60(t,e)},t.prototype.GR61=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);t.body.cell&&e.ZP72(t.body.cell),e.isShowImgNew(),e.notify(P4.I56)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP77=function(){this.tacticProxy.GP77()},t.prototype.GP78=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);t.body.tactic&&e.bagData.bag.push(t.body.tactic),t.body.ob&&P5.sIs(t.body.ob),e.sortBagData(),e.isShowImgNew(),e.notify(P4.I58)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR62=function(t){this.tacticProxy.GR62(t)},t.prototype.GR63=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);t.body.tactic&&e.bagData.bag.push(t.body.tactic),t.body.ob&&P5.sIs(t.body.ob),e.sortBagData(),e.hightCount=t.body.invent,e.isShowImgNew(),e.notify(P4.K30)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV25=function(t){this.tacticProxy.GV25(t)},t.prototype.GV22=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);e.removeBag(t.body.uids),t.body.ob&&P5.sIs(t.body.ob),e.isShowImgNew(),e.notify(P4.Q46)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.lockReq=function(t,e){this.tacticProxy.lockReq(t,e)},t.prototype.lockRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);if(e.ZY16(null,t.body.tactic),e.isShowImgNew(),App.VM.isOpen(O7.F99))App.VM.gOV(O7.F99).updateBag(t.body.tactic);if(App.VM.isOpen(O7.HH51))App.VM.gOV(O7.HH51).updateBag(t.body.tactic);if(App.VM.isOpen(O7.E12))App.VM.gOV(O7.E12).updateBag(t.body.tactic);e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY69=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);e.cellsData=t.body.cells,e.isShowImgNew(),e.notify(P4.I56)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY70=function(t,e){this.tacticProxy.GY70(t,e)},t.prototype.GY71=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);t.body.cell&&e.ZP72(t.body.cell),e.notify(P4.U95)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.realeReq=function(t,e){this.tacticProxy.realeReq(t,e)},t.prototype.realeRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.B90);t.body.cell&&e.ZP72(t.body.cell),e.notify(P4.O58)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TD49.prototype,"TD49");var TacticMainView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_tactic"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.G52,O7.F99,"TacticChiefView",this.content),App.VM.rgS(O7.G52,O7.E11,"TacticUpgradeView",this.content),App.VM.rgS(O7.G52,O7.HH51,"TacticDigView",this.content),App.VM.rgS(O7.G52,O7.E12,"TacticResolveView",this.content);var t=[O3.tr(2704),O3.tr(2705),O3.tr(2706),O3.tr(2707)],e=[O7.F99,O7.E11,O7.HH51,O7.E12];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=t[0]||O7.F99;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.openHelpView=function(){var t,e;switch(this.title){case O3.tr(2708):case O3.tr(2709):t=O3.tr(2715),e=L5.init.descHelp1.value;break;case O3.tr(2710):t=O3.tr(2715),e=L5.init.descHelp2.value}var i={title:t,content:e};this.aCF(O6.C18,O10.A24,i)},t.prototype.ZQ23=function(t){this.helpBtn.visible=!0;App.CM.gtM(O6.B82);switch(t){case O7.F99:this.title=O3.tr(2708),this.btnList.ZM66(t);break;case O7.E11:this.title=O3.tr(2709),this.btnList.ZM66(t);break;case O7.HH51:this.title=O3.tr(2710),this.btnList.ZM66(t);break;case O7.E12:this.helpBtn.visible=!1,this.title=O3.tr(2711),this.btnList.ZM66(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B90);this.btnList.ZHH58(O7.F99,t.chiefHong),this.btnList.ZHH58(O7.E11,t.addHong),this.btnList.ZHH58(O7.HH51,t.digHong),this.btnList.ZHH58(O7.E12,t.resHong)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t}(BasePanelView);__reflect(TacticMainView.prototype,"TacticMainView");var TG32=function(i){function t(t){var e=i.call(this,t)||this;return e.idx=0,e.chiefHong=0,e.addHong=0,e.digHong=0,e.resHong=0,e.sets=[L17.A13,L17.A14,L17.A15,L17.A16,L17.A17,L17.A18],e.chiefNum=[],e.isCostGoldAlert=!0,e}return __extends(t,i),t.prototype.initData=function(t){this.cellsData=t.cells,this.bagData=t.bag,this.hightCount=t.invent,this.sortBagData()},t.prototype.haveHong=function(){return this.chiefHong||this.addHong||this.digHong||this.resHong||this.ZP73()||this.ZT62()},t.prototype.sortBagData=function(){this.bagData.bag.sort(function(t,e){return e.quality-t.quality}),this.bagData.bag.sort(function(t,e){return e.tid-t.tid})},t.prototype.isShowImgNew=function(){var t=App.CM.gtM(O6.B82);if(!(t.avatarInfo&&parseInt(L5.init.openLv.value)<=t.avatarInfo.l))return!1;this.digHong=0;for(var e=L5.init.highInvent.value.split(":"),i=N12.giC(parseInt(e[0])),s=L5.init.normalInvent.value.split(";"),o=0,r=0;r<s.length;r++){var n=s[r].split(":");N12.giC(parseInt(n[0]))>=parseInt(n[1])&&(o+=1)}this.digHong=i>=parseInt(e[1])||o==s.length?1:0,this.resHong=0;var a=[],h=App.CM.gtM(O6.B82);for(r=0;r<this.sets.length;r++)-1!=h.setting.indexOf(this.sets[r])&&a.push(r+1);for(var p=[],l=0;l<this.cellsData.length;l++)this.cellsData[l].uid&&p.push(this.cellsData[l].uid);var c=this.bagData.bag;for(r=0;r<c.length;r++)if(-1!=a.indexOf(c[r].quality)&&-1==p.indexOf(c[r].uid)&&!c[r].isLock){this.resHong=1;break}for(l=this.addHong=0;l<this.cellsData.length;l++){var u=L5.cellData[this.cellsData[l].level+""],d=this.cellsData[l].tid?u.reqitem:null;if(d){n=d.split(":");if(N12.giC(parseInt(n[0]))>=parseInt(n[1])){this.addHong=1;break}}}this.chiefHong=0,this.chiefNum=[];var v=[],f=[];for(l=0;l<this.cellsData.length;l++)this.cellsData[l].uid&&(this.chiefNum.push(L5.base[this.cellsData[l].tid+""].group),v.push(this.cellsData[l].tid)),this.cellsData[l].isUnlock&&f.push(this.cellsData[l].idx);for(r=0;r<c.length;r++){if(-1==this.chiefNum.indexOf(c[r].group)&&v.length!==f.length)return void(this.chiefHong=1);for(l=0;l<v.length;l++){var g=L5.base[v[l]+""];if(g.group==c[r].group&&c[r].quality>g.quality)return void(this.chiefHong=1)}}},t.prototype.ZY16=function(t,e){if(t)for(var i=0;i<this.bagData.bag.length;i++)if(this.bagData.bag[i].uid==t.uid){this.bagData.bag[i]=t;break}for(i=0;i<this.bagData.bag.length;i++)if(this.bagData.bag[i].uid==e.uid){this.bagData.bag[i]=e;break}this.sortBagData()},t.prototype.ZP72=function(t){for(var e=0;e<this.cellsData.length;e++)this.cellsData[e].idx==t.idx&&(this.cellsData[e]=t)},t.prototype.removeBag=function(t){for(var e=this.bagData.bag.length-1;0<=e;e--)-1!=t.indexOf(this.bagData.bag[e].uid)&&this.bagData.bag.splice(e,1)},t.prototype.ZP73=function(){if(L5.FI98(!1))for(var t in this.cellsData){var e=this.cellsData[t],i=L5.FD44(e.rlv+1);if(e.isUnlock&&i&&e.tid&&!(e.level<i.needlv)){var s=M18.FL28(i.cost,":");if(N12.giC(s[0])>=parseInt(s[1]))return 1}}return 0},t.prototype.ZT62=function(){if(L5.FK18(!1))for(var t in this.cellsData){var e=this.cellsData[t],i=L5.FE45(e.star+1);if(e.isUnlock&&i&&e.tid)if(N12.giC(L5.gIV("itemID"))>=parseInt(i.num))return 1}return 0},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TG32.prototype,"TG32");var TG33=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.K31,e.GY69,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W70,body:{}};s.rSMO(P4.W71,function(t){s.apF(L19.A25,t),e("加载阵法加载完成")},s),s.sSM(i)})},t.prototype.equipReq=function(t,e){var i={type:P4.V97,body:{pos:t,uid:e}};this.rSMO(P4.V98,this.equipRes,this),this.sSM(i)},t.prototype.equipRes=function(t){this.apF(L19.A21,t)},t.prototype.GR60=function(t,e){var i={type:P4.I55,body:{idx:t,type:e}};this.rSMO(P4.I56,this.GR61,this),this.sSM(i)},t.prototype.GR61=function(t){this.apF(L19.A2,t)},t.prototype.GP77=function(){var t={type:P4.I57,body:{}};this.rSMO(P4.I58,this.GP78,this),this.sSM(t)},t.prototype.GP78=function(t){this.apF(L19.A4,t)},t.prototype.GR62=function(t){var e={type:P4.K29,body:{type:t}};this.rSMO(P4.K30,this.GR63,this),this.sSM(e)},t.prototype.GR63=function(t){this.apF(L19.A6,t)},t.prototype.GV25=function(t){var e={type:P4.Q45,body:{uids:t}};this.rSMO(P4.Q46,this.GV22,this),this.sSM(e)},t.prototype.GV22=function(t){this.apF(L19.A11,t)},t.prototype.lockReq=function(t,e){var i={type:P4.W72,body:{uid:t,lock:e}};this.rSMO(P4.W73,this.lockRes,this),this.sSM(i)},t.prototype.lockRes=function(t){this.apF(L19.A27,t)},t.prototype.GY69=function(t){this.apF(L19.A7,t)},t.prototype.GY70=function(t,e){var i={type:P4.U94,body:{pos:t,type:e}};this.rSMO(P4.U95,this.GY71,this),this.sSM(i)},t.prototype.GY71=function(t){this.apF(L19.A19,t)},t.prototype.realeReq=function(t,e){var i={type:P4.O57,body:{pos:t,type:e}};this.rSMO(P4.O58,this.realeRes,this),this.sSM(i)},t.prototype.realeRes=function(t){this.apF(L19.A23,t)},t}(TG80);__reflect(TG33.prototype,"TG33");var TacticBookItem=function(e){function t(){var t=e.call(this)||this;return t.modelData={},t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.grpClick.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GE67,this)},t.prototype.close=function(){this.grpClick.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GE67,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.GE67=function(){App.CM.apF(O6.B90,L19.A9,this.modelData)},t.prototype.dataChanged=function(){this.imgBlack.source=this.data.iconbg,this.imgHead.source=this.data.icon,this.imgBg.source=L5.getBox(this.data.quality),O5.FB13(this.lbName,this.data.name,this.data.quality,1),this.lbQualityName.text=O3.tr(2717,L5.getStr(this.data.quality)),this.modelData.d=this.data,this.modelData.type=L19.A30},t}(eui.ItemRenderer);__reflect(TacticBookItem.prototype,"TacticBookItem");var TacticDataItem=function(e){function t(){var t=e.call(this)||this;return t.modelData={},t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgTaper.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTaper,this),this.imgHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD42,this)},t.prototype.close=function(){this.imgTaper.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTaper,this),this.imgHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD42,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.changeTaper=function(){var t=this.data.isLock?0:1;App.CM.apF(O6.B90,L19.A26,this.data.uid,t)},t.prototype.ZD42=function(){App.CM.apF(O6.B90,L19.A9,this.modelData)},t.prototype.dataChanged=function(){var t=P7.copyTab(L5.base[this.data.tid+""]);this.imgTaper.source=this.data.isLock?"v1_img_weijiesuo_png":"v1_img_jiesuo_png",this.imgBlack.source=t.iconbg,this.imgHead.source=t.icon,this.imgBg.source=L5.getBox(t.quality),O5.FB13(this.lbName,t.name,t.quality,2),this.modelData.d=t,this.modelData.d.uid=this.data.uid,this.modelData.type=L19.A28,this.imgNew.visible=this.data.show,this.modelStar=this.data.star},t}(eui.ItemRenderer);__reflect(TacticDataItem.prototype,"TacticDataItem");var TacticBookView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TacticBookSkin,i.dlg.ZU10().visible=!0,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.tacticBookData.dataProvider=this.myCollection=new eui.ArrayCollection,this.tacticBookData.itemRenderer=TacticBookItem,this.dlg.title=O3.tr(5002),this.tabChange.dataProvider=new eui.ArrayCollection([{name:O3.tr(5724)},{name:O3.tr(5725)},{name:O3.tr(5726)}])},t.prototype.open=function(){this.dlg.ZM69(this.oCC,this),this.tabChange.addEventListener(eui.UIEvent.CHANGE,this.ZR78,this),this.updateUI()},t.prototype.close=function(){this.tabChange.removeEventListener(eui.UIEvent.CHANGE,this.ZR78,this),this.myCollection.removeAll()},t.prototype.ZR78=function(){this.src.viewport.scrollV=0;App.CM.gtM(O6.B90);switch(this.tabChange.selectedIndex){case 0:this.myCollection.replaceAll(L5.highData.concat());break;case 1:this.myCollection.replaceAll(L5.midData.concat());break;case 2:this.myCollection.replaceAll(L5.lowData.concat())}},t.prototype.updateUI=function(){this.tabChange.selectedIndex=0,this.ZR78()},t.prototype.oCC=function(){this.aCF(O6.B90,L19.A13)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH21)switch(e){case P4.V55:}},t}(BaseEuiView);__reflect(TacticBookView.prototype,"TacticBookView");var TacticChiefView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TacticChiefSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.tacticItemData.dataProvider=this.myCollection=new eui.ArrayCollection,this.tacticItemData.itemRenderer=TacticDataItem,this.coms=[this.com0,this.com1,this.com2,this.com3],this.lbHight.textFlow=M18.HTP.parse(O3.tr(4574))},t.prototype.open=function(){this.btnBook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.btnTruing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT63,this);for(var t=0;t<this.coms.length;t++)this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);this.updateUI()},t.prototype.close=function(){this.btnBook.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.btnTruing.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT63,this);for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.myCollection.removeAll()},t.prototype.choose=function(t){var e=parseInt(t.currentTarget.name);this.chooseChief(e)},t.prototype.updateUI=function(){this.scr.viewport.scrollV=0;for(var t=App.CM.gtM(O6.B90),e=0;e<this.coms.length;e++)this.coms[e].imgSelected.visible=e==t.idx;this.ZP72(t);var i=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],s={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(s),i.bt=BehaviourType.Stand_d,this.objBoss.setData(i,this.gpBoss),this.objBoss.name=null,this.objBoss.titleId=null},t.prototype.ZP72=function(t){for(var e=t.cellsData,i=0;i<e.length;i++)if(e[i].isUnlock)if(e[i].tid){var s=L5.base[e[i].tid+""];this.coms[i].grpNum.visible=!0,this.coms[i].lbLevel.text=e[i].level,this.coms[i].grpName.visible=!0,this.coms[i].imgBlack.source=s.iconbg,this.coms[i].imgHead.source=s.icon,this.coms[i].imgNew.visible=this.ZY17(e[i].tid),this.coms[i].imgBg.source=L5.getBox(s.quality),this.coms[i].data={},this.coms[i].data.id=e[i].tid,O5.FB13(this.coms[i].lbName,s.name,s.quality,1)}else this.coms[i].imgHead.source="",this.coms[i].imgBg.source=null,this.coms[i].imgNew.visible=this.ZM30(),this.coms[i].grpName.visible=!1;else{this.coms[i].lbName.textColor=_cc.red,this.coms[i].imgBg.source=null;s=L5.init["unlocked"+(i+1)].value.split("|");this.coms[i].lbName.text=O3.tr(2716,s[0],s[1])}P7.FD53(this.btnTruing,t.ZP73()||t.ZT62()),this.getBagHong(t.idx),this.getPower()},t.prototype.ZM30=function(){for(var t=!1,e=App.CM.gtM(O6.B90),i=e.bagData.bag,s=e.chiefNum,o=0;o<i.length;o++)if(-1==s.indexOf(i[o].group)){t=!0;break}return t},t.prototype.ZY17=function(t){for(var e=!1,i=App.CM.gtM(O6.B90).bagData.bag,s=L5.base[t+""],o=0;o<i.length;o++)if(i[o].group==s.group&&s.quality<i[o].quality){e=!0;break}return e},t.prototype.updateBag=function(t){for(var e=this.myCollection.source,i=0;i<e.length;i++)if(e[i].uid==t.uid){var s=e[i].show;e[i]=t,e[i].show=s;break}this.myCollection.replaceAll(e)},t.prototype.chooseChief=function(t){if("v1_img_lock_png"==this.coms[t].imgHead.source)return!1;var e=App.CM.gtM(O6.B90);if(e.idx=t,this.coms[t].imgSelected.visible){var i={},s=e.cellsData;if(this.coms[t].data){i.d=P7.copyTab(L5.base[this.coms[t].data.id]);for(var o=0;o<s.length;o++)if(s[o].tid==this.coms[t].data.id){i.d.uid=s[o].uid;break}i.type=L19.A29,i.clv=e.cellsData[t].level,this.apF(L19.A9,i)}}else{for(o=0;o<this.coms.length;o++)this.coms[o].imgSelected.visible=o==t;this.getBagHong(t)}},t.prototype.getBagHong=function(t){for(var e=App.CM.gtM(O6.B90),i=e.cellsData,s=[],o=0;o<i.length;o++)s.push(i[o].uid);var r=this.coms[t].data,n=P7.copyTab(e.bagData.bag);for(o=n.length-1;0<=o;o--)0<=s.indexOf(n[o].uid)&&n.splice(o,1);if(r){var a=L5.base[r.id+""];for(o=0;o<n.length;o++)a.group==n[o].group&&a.quality<n[o].quality?n[o].show=!0:n[o].show=!1}else{var h=e.chiefNum;for(o=0;o<n.length;o++)n[o].show=-1==h.indexOf(n[o].group)}this.myCollection.replaceAll(n),this.lbHight.visible=!n.length},t.prototype.getPower=function(){var t=App.CM.gtM(O6.B90).cellsData;this.scoreLb.text="";for(var e=0,i=0,s=0;s<this.coms.length;s++)if(this.coms[s].data){for(var o=0;o<t.length;o++)if(t[o].tid==this.coms[s].data.id){e=t[o].ratio;break}var r=L5.base[this.coms[s].data.id+""];i+=M10.gAG(r.attr)+Math.floor(M10.gAG(r.attr)*e)}this.scoreLb.text=i+""},t.prototype.ZM31=function(){this.apF(L19.A15)},t.prototype.ZT63=function(){this.apF(L19.A16)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG32)switch(e){case P4.V98:this.ZP72(t)}else{var i=App.CM.gtM(O6.B90);this.ZP72(i)}},t}(BaseEuiView);__reflect(TacticChiefView.prototype,"TacticChiefView");var TacticDatailsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TacticDatailsSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btnShow.label=O3.tr(5003),this.btnGo.label=O3.tr(5004),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5005)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5006)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(5007)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(5008))},t.prototype.open=function(t){this.myData=t,this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goWork,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startShow,this),this.updateUI()},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.rect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goWork,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startShow,this)},t.prototype.goWork=function(){var t=App.CM.gtM(O6.B90);this.apF(L19.A20,t.idx+1,this.myData.d.uid),this.closeSelf()},t.prototype.startShow=function(){var t=L5.getStr(this.myData.d.quality)+this.myData.d.name,e=N18.FF97(this.myData.d.quality),i=M18.format("$0,$1",[t,e.colour]),s=P7.FF60(),o={nid:F8.A17,channelId:s,param:i,infoId:this.myData.d.uid};App.CM.apF(O6.C13,O12.A13,o),this.closeSelf()},t.prototype.closeSelf=function(){this.apF(L19.A8)},t.prototype.updateUI=function(){this.lbAttrAdd.visible=!0,this.currentState=this.myData.type+"";var t=App.CM.gtM(O6.B90),e=App.CM.gtM(O6.B82);this.imgBlack.source=this.myData.d.iconbg,this.imgHead.source=this.myData.d.icon,this.imgBd.source=L5.getBox(this.myData.d.quality),O5.FB13(this.lbName,this.myData.d.name,this.myData.d.quality,1),this.lbQualityName.text=L5.getStr(this.myData.d.quality),this.lbAttr.text=K18.dealAttr(this.myData.d.attr),this.blPower.text=M10.gAG(this.myData.d.attr)+"",this.myData.creator?this.lbWiter.text=this.myData.creator:this.lbWiter.text=e.avatarInfo.n;var i=0;switch(this.myData.type){case L19.A29:this.lbAttr.y=60;for(var s=void 0,o=0;o<t.cellsData.length;o++)if(t.cellsData[o].tid&&this.myData.d.id==t.cellsData[o].tid){s=t.cellsData[o];break}i=s.ratio,this.lbAttrAdd.text=O3.tr(2722,Math.floor(100*s.ratio)),this.blPower.text=Math.floor(parseInt(this.blPower.text)*(s.ratio+1))+"",this.lbAttr.text=this.dealAttr(this.myData.d.attr,s.ratio);break;case L19.A31:if(this.myData.clv){this.lbAttr.y=60,this.lbAttrAdd.visible=!0;var r=L5.cellData[this.myData.clv+""].ratio;i=r,this.lbAttrAdd.text=O3.tr(2722,Math.floor(100*r)),this.blPower.text=Math.floor(parseInt(this.blPower.text)*(r+1))+"",this.lbAttr.text=this.dealAttr(this.myData.d.attr,r)}else this.lbAttrAdd.visible=!1,this.lbAttr.y=30}this.getSillStr(t.cellsData),this.ZY18(t,i)},t.prototype.dealAttr=function(t,e){for(var i=K18.attribute,s=t.split(";"),o="",r=0;r<s.length;r++)o+=i[s[r].split(":")[0]].name+":"+(s[r].split(":")[1]+" +"+Math.floor(parseInt(s[r].split(":")[1])*e))+"\n";return o=o.substring(0,o.length-1)},t.prototype.getSillStr=function(t){if(-1==this.myData.d.symbolid)this.grpSkill.includeInLayout=this.grpSkill.visible=!1;else{this.grpSkill.includeInLayout=this.grpSkill.visible=!0;for(var e=void 0,i=0;i<t.length;i++)if(t[i].tid&&this.myData.d.id==t[i].tid&&this.myData.type==L19.A29){e=t[i];break}var s=1;this.myData.clv?s=this.myData.clv:e&&(s=e.level);var o=L5.FF49(this.myData.d.symbolid,s);this.lbSkillName.text=O3.tr(2712,o.name),this.lbSkillStr.text=o.desc}},t.prototype.ZY18=function(t,e){for(var i,s=0;s<t.cellsData.length;s++)if(t.cellsData[s].tid&&this.myData.d.id==t.cellsData[s].tid){i=t.cellsData[s];break}if(i){var o=L5.FD44(i.rlv),r=L5.FE45(i.star),n=0,a=0,h=parseInt(this.blPower.text);if(o){this.gpAttr1.includeInLayout=this.gpAttr1.visible=!0;var p={},l=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)},c=THH1.FI55(o.attr);for(var u in c)l(p,u,c[u]);this.addAttrLb(p,this.gpRefine1),this.lbTitle1.textFlow=M18.HTP.parser(O3.tr(6198,i.rlv)),n=M10.gAG(o.attr)}else this.gpAttr1.includeInLayout=this.gpAttr1.visible=!1;if(r){this.gpAttr0.includeInLayout=this.gpAttr0.visible=!0;p={},l=function(t,e,i){if(!t[e]){var s=O4.FD72(parseInt(e));t[e]={value:0,name:s}}t[e].value+=parseInt(i)},c=THH1.FI55(r.addattr);for(var u in c)l(p,u,c[u]);this.lbAttr0.text=this.dealAttr(r.addattr,e),this.lbAttrAdd0.text=O3.tr(2722,Math.floor(100*e)),this.lbTitle0.textFlow=M18.HTP.parser(O3.tr(7634)),a=M10.gAG(r.addattr)+M10.gAG(r.addattr)*e}else this.gpAttr0.includeInLayout=this.gpAttr0.visible=!1;var d=Math.ceil(n+a+h);this.blPower.text=d.toString()}else this.gpAttr0.includeInLayout=this.gpAttr0.visible=!1,this.gpAttr1.includeInLayout=this.gpAttr1.visible=!1},t.prototype.addAttrLb=function(t,e){for(var i in t){var s=t[i],o=new eui.Label;o.size=20,o.textFlow=M18.FG71(O3.tr(3627,s.name,s.value)),e.addChild(o)}},t.prototype.addjjAttrLb=function(t,e){for(var i in t){var s=t[i],o=new eui.Label;o.size=20,o.textFlow=M18.FG71(O3.tr(3627,s.name,s.value)),e.addChild(o)}},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e)},t}(BaseEuiView);__reflect(TacticDatailsView.prototype,"TacticDatailsView");var TacticDigView=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i.skinName=TacticDigSkin,i}return __extends(t,n),t.prototype.initUI=function(){n.prototype.initUI.call(this),this.tacticItemData.dataProvider=this.myCollection=new eui.ArrayCollection,this.tacticItemData.itemRenderer=TacticDigItem,this.lbHint.textFlow=(new egret.HtmlTextParser).parser(L5.init.desc1.value),this.comItem=L5.init.normalInvent.value.split(";");for(var t=0;t<this.comItem.length;t++){var e=this.comItem[t].split(":"),i=N12.gID(e[0]),s=this.grpOrd.getChildAt(t);s.name=e[0],s.lbName.text=i.name,s.imgBg.source=N12.FL5(i.id),s.imgIcon.source=N12.FJ86(i.id),O5.FB13(s.lbName,i.name,i.quality,2),this["lbSource"+t].text=i.name,this["lbSource"+t].data={},this["lbSource"+t].data.id=i.id+""}this.highInvent=L5.init.highInvent.value.split(":");var o=N12.gID(this.highInvent[0]);this.expert.lbName.text=o.name,this.expert.imgBg.source=N12.FL5(o.id),this.expert.imgIcon.source=o.icon,O5.FB13(this.expert.lbName,this.expert.lbName.text,o.quality,2);var r=L5.init.source.value.split("|");for(t=0;t<r.length;t++)this["lbSource"+t].data.str=r[t];this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4580)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4581)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4582)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4583)),this.lbSource0.textFlow=M18.HTP.parse(O3.tr(4584)),this.lbSource1.textFlow=M18.HTP.parse(O3.tr(4585)),this.cbAutoBuy.label=O3.tr(5727)},t.prototype.open=function(){for(var t=0;t<this.grpOrd.numChildren;t++)this["ord"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this);this.lbSource0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD43,this),this.lbSource1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD43,this),this.expert.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnPutong.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startDig,this),this.btnExpert.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startDig,this),this.cbAutoBuy.addEventListener(egret.Event.CHANGE,this.chooseChange,this),this.updateUI()},t.prototype.close=function(){for(var t=0;t<this.grpOrd.numChildren;t++)this["ord"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this);this.lbSource0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD43,this),this.lbSource1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD43,this),this.expert.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnPutong.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startDig,this),this.btnExpert.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startDig,this),this.cbAutoBuy.removeEventListener(egret.Event.CHANGE,this.chooseChange,this),this.myCollection.removeAll(),this.comItem=null,this.highInvent=null,this.haveHightItem=null},t.prototype.chooseChange=function(){this.aCF(O6.B82,L13.A24,L17.A35),TG40.playClickEffect()},t.prototype.startDig=function(t){switch(parseInt(t.target.name)){case 1:if(this.btnPutong.imgNew.visible)this.apF(L19.A3);else for(var e=0;e<this.comItem.length;e++){var i=this.comItem[e].split(":"),s=N12.giC(parseInt(i[0]));if(s<parseInt(i[1])){App.VM.open(O7.G87,parseInt(i[0]),parseInt(i[1])-s);break}}break;case 2:var o=1;if(this.btnExpert.imgNew.visible)this.apF(L19.A5,o);else if(this.cbAutoBuy.selected){var r=App.CM.gtM(O6.B82),n=(r.avatarInfo.bg,r.avatarInfo.g),a=N15.FA50(this.highInvent[0]),h=N15.FB92(this.highInvent[0]);if(-1!=a)o=2;else{if(!(h<=n)){var p=parseInt(this.highInvent[1])-this.haveHightItem;return App.VM.open(O7.G87,this.highInvent[0],p),!1}o=3}this.apF(L19.A5,o)}else App.VM.open(O7.G87,this.highInvent[0])}},t.prototype.ZD43=function(t){var e=t.currentTarget.data.id;App.VM.open(O7.G87,e)},t.prototype.updateUI=function(){this.scr.viewport.scrollV=0;for(var t=App.CM.gtM(O6.B90),e=0,i=0;i<this.comItem.length;i++){var s=this.comItem[i].split(":"),o=N12.giC(parseInt(s[0])),r=P7.copyTab(N12.gID(s[0]));r.c=o;var n=this.grpOrd.getChildAt(i);n.data=r,n.lbCt.text=o+"/"+s[1],o>=parseInt(s[1])&&(e+=1)}this.btnPutong.imgNew.visible=e==this.comItem.length;var a=N12.giC(parseInt(this.highInvent[0]));this.haveHightItem=a;var h=P7.copyTab(N12.gID(this.highInvent[0]));h.c=a,this.expert.data={},this.expert.data=h,this.expert.lbCt.text=a+"/"+this.highInvent[1],this.btnExpert.imgNew.visible=a>=parseInt(this.highInvent[1]),this.lbAddUP.text=O3.tr(2727,t.hightCount),this.autoBuy();var p=this.getBagData();this.myCollection.replaceAll(p)},t.prototype.autoBuy=function(){var t=App.CM.gtM(O6.B82);this.cbAutoBuy.selected=-1!=t.setting.indexOf(L17.A35)},t.prototype.GT53=function(t){var e=t.currentTarget.data,i=N12.giC(e.id);App.CM.apF(O6.C11,O14.A15,e,i)},t.prototype.getBagData=function(){for(var t=App.CM.gtM(O6.B90),e=t.cellsData,i=[],s=0;s<e.length;s++)i.push(e[s].uid);var o=P7.copyTab(t.bagData.bag);for(s=o.length-1;0<=s;s--)0<=i.indexOf(o[s].uid)&&o.splice(s,1);return o},t.prototype.updateBag=function(t){for(var e=this.getBagData(),i=0;i<e.length;i++)if(e[i].uid==t.uid){e[i]=t;break}this.myCollection.replaceAll(e)},t.prototype.uBM=function(t,e){if(n.prototype.uBM.call(this,t,e),t instanceof TG32)switch(e){case P4.I58:case P4.K30:this.updateUI()}if(t instanceof TG12)switch(e){case P4.S94:this.autoBuy()}if(t instanceof THH9)switch(e){case P4.V43:this.updateUI()}},t}(BaseEuiView);__reflect(TacticDigView.prototype,"TacticDigView");var TacticDigItem=function(e){function t(){var t=e.call(this)||this;return t.modelData={},t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgTaper.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTaper,this),this.imgHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GE67,this)},t.prototype.close=function(){this.imgTaper.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTaper,this),this.imgHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GE67,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.changeTaper=function(){var t=this.data.isLock?0:1;App.CM.apF(O6.B90,L19.A26,this.data.uid,t)},t.prototype.GE67=function(){App.CM.apF(O6.B90,L19.A9,this.modelData)},t.prototype.dataChanged=function(){var t=P7.copyTab(L5.base[this.data.tid+""]);this.imgTaper.source=this.data.isLock?"v1_img_weijiesuo_png":"v1_img_jiesuo_png",this.imgBlack.source=t.iconbg,this.imgHead.source=t.icon,this.imgBg.source=L5.getBox(t.quality),O5.FB13(this.lbName,t.name,t.quality,2),this.modelData.d=t,this.modelData.d.uid=this.data.uid,this.modelData.type=L19.A32},t}(eui.ItemRenderer);__reflect(TacticDigItem.prototype,"TacticDigItem");var TacticRealeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TacticRealeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3],this.lbCurTitle.text=O3.tr(6431),this.lbNextTitle.text=O3.tr(6432),this.lbStr1.textFlow=O3.tr2(6433),this.btnRefine.label=O3.tr(7632);var t=L5.gIV("itemID"),e=N12.gID(t);this.imgGood.setData(e),this.imgGood.setImgSize({w:40,h:40})},t.prototype.open=function(){this.btnBook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.btnRefine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY19,this);for(var t=0;t<this.coms.length;t++)this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);var e=App.CM.gtM(O6.B90);this.updateUI(e),this.ZF90(e)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG32)switch(e){case P4.O58:this.ZF90(t),this.showTXByIdx(t)}else{var i=App.CM.gtM(O6.B90);this.ZF90(i)}},t.prototype.ZF90=function(t){for(var e,i=0;i<this.coms.length;i++)this.coms[i].imgSelected.visible=i==t.idx,i==t.idx&&(e=i);var s=t.cellsData[e];if(this.updateAttr(s),this.ZP72(t),s.tid){var o=L5.FE45(s.star+1);if(o){this.gpCost.visible=!0,this.btnRefine.enabled=!0,P16.sGF(this.btnRefine,!1);var r=o.num,n=L5.gIV("itemID"),a=N12.giC(n);this.lbCostGood.text=a+"/"+r,a>=parseInt(r)?this.lbCostGood.textColor=_cc.dgreen:this.lbCostGood.textColor=_cc.red}else this.gpCost.visible=!1,this.btnRefine.enabled=!1,P16.sGF(this.btnRefine,!0),P7.FD53(this.btnRefine,0),this.lbTip.text=O3.tr(7633),this.lbTip.verticalCenter=58,this.btnRefine.label=O3.tr(7632)}},t.prototype.close=function(){this.btnBook.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.btnRefine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY19,this);for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);this.clearTX(),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null},t.prototype.choose=function(t){var e=parseInt(t.currentTarget.name);this.chooseChief(e)},t.prototype.updateUI=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),e.bt=BehaviourType.Stand_d,this.objBoss.setData(e,this.gpBoss),this.objBoss.name=null,this.objBoss.titleId=null},t.prototype.ZP72=function(t){for(var e=t.cellsData,i=0;i<e.length;i++)if(e[i].isUnlock)if(e[i].tid){var s=L5.base[e[i].tid+""];this.coms[i].grpNum.visible=!0,this.coms[i].lbLevel.text=e[i].level,this.coms[i].grpName.visible=!0,this.coms[i].imgBlack.source=s.iconbg,this.coms[i].imgHead.source=s.icon,this.coms[i].imgNew.visible=0<this.ZP74(e[i]),this.coms[i].imgBg.source=L5.getBox(s.quality),this.coms[i].data={},this.coms[i].data.id=e[i].tid,this.coms[i].gS.visible=!0,this.setStar(this.coms[i].gStars,e[i].star),O5.FB13(this.coms[i].lbName,s.name+"+"+e[i].rlv,s.quality,1)}else this.coms[i].imgHead.source="",this.coms[i].imgBg.source=null,this.coms[i].grpName.visible=!1,this.coms[i].gS.visible=!1;else{this.coms[i].lbName.textColor=_cc.red,this.coms[i].imgBg.source=null;s=L5.init["unlocked"+(i+1)].value.split("|");this.coms[i].lbName.text=O3.tr(2716,s[0],s[1])}this.getPower()},t.prototype.setStar=function(t,e,i){void 0===i&&(i=!1);for(var s=L5.FG33(e-5),o=L5.FG33(e),r=5*Math.ceil(e/5)-5,n=0;n<5;n+=1){var a=t.getChildAt(n);a.includeInLayout=a.visible=i||(!(e<5)||n<e),a.source=r+n<e?o:s}},t.prototype.ZP74=function(t){var e=L5.FE45(t.star+1);return t.isUnlock&&e&&t.tid&&N12.giC(L5.gIV("itemID"))>=parseInt(e.num)?1:0},t.prototype.chooseChief=function(t){if("v1_img_lock_png"==this.coms[t].imgHead.source)return!1;var e=App.CM.gtM(O6.B90);if(e.idx=t,this.coms[t].imgSelected.visible){var i={},s=e.cellsData;if(this.coms[t].data){i.d=P7.copyTab(L5.base[this.coms[t].data.id]);for(var o=0;o<s.length;o++)if(s[o].tid==this.coms[t].data.id){i.d.uid=s[o].uid;break}i.type=L19.A29,i.clv=e.cellsData[t].level,this.apF(L19.A9,i)}}else this.ZF90(e)},t.prototype.updateAttr=function(t){t.tid?(this.gpDress.visible=!0,this.lbTip.visible=!1,this.gStar.visible=!0):(this.lbTip.visible=!0,this.gpDress.visible=!1,this.gStar.visible=!1,this.lbTip.verticalCenter=0,this.lbTip.text=O3.tr(2729));var e=L5.FC67(t.star),i=t.ratio;this.lbratio1.text=O3.tr(2722,Math.floor(100*i)),this.lbratio2.text=O3.tr(2722,Math.floor(100*i));var s=1;for(var o in e.curData){var r=e.curData[o],n=" + "+M18.FL93(r.value*i,1);this["lbCurAttr"+s].textFlow=M18.HTP.parse(O3.tr(6207,r.name,r.value+n)),this["lbCurAttr"+s].visible=!0,s++}for(;s<=4;s++)this["lbCurAttr"+s].visible=!1;if(this.setStar(this.gStars,t.star,!0),e.nextData){for(var o in s=1,e.nextData){r=e.nextData[o],n=" + "+M18.FL93(r.value*i,1);this["lbNextAttr"+s].textFlow=M18.HTP.parse(O3.tr(6207,r.name,r.value+n)),this["lbNextAttr"+s].visible=!0,s++}for(;s<=4;s++)this["lbNextAttr"+s].visible=!1;this.lbMaxLv.visible=!1,this.gpNextAttr.visible=!0}else this.gpNextAttr.visible=!1,this.lbMaxLv.visible=!0,this.lbMaxLv.textFlow=M18.FG71(O3.tr(910))},t.prototype.showTXByIdx=function(t){for(var e,i=0;i<this.coms.length;i++)this.coms[i].imgSelected.visible=i==t.idx,i==t.idx&&(e=i);this.coms[e].gpEffect.visible=!0,App.THH33.aUE(this.coms[e].gpEffect,"iconSkill",-54,-61,1)},t.prototype.clearTX=function(){for(var t=0;t<this.coms.length;t++)this.coms[t].gpEffect.visible=!1,App.THH33.rEf(this.coms[t].gpEffect,"iconSkill")},t.prototype.getPower=function(){var t=App.CM.gtM(O6.B90).cellsData;this.scoreLb.text="";for(var e=0,i=0;i<t.length;i++){var s=t[i].ratio,o=L5.FE45(t[i].star);o&&(e+=M10.gAG(o.addattr)+M10.gAG(o.addattr)*s)}this.scoreLb.text=Math.ceil(e)+""},t.prototype.ZM31=function(){this.apF(L19.A15)},t.prototype.ZY19=function(){App.CM.gtM(O6.B82);var t=App.CM.gtM(O6.B90),e=t.cellsData[t.idx],i=L5.FE45(e.star+1),s=L5.gIV("itemID"),o=i.num,r=0,n=N12.giC(s);if(o<=n&&(r=1),r||App.VM.open(O7.G87,s,o-n),r){L5.gIV("refineUp");this.apF(L19.A22,e.idx,r)}},t}(BaseEuiView);__reflect(TacticRealeView.prototype,"TacticRealeView");var TacticRefineMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.B68,O7.F27,"TacticRefineView",this.content),App.VM.rgS(O7.B68,O7.G31,"TacticRealeView",this.content);var t=[O3.tr(7631),O3.tr(5615)],e=[O7.G31,O7.F27];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!1},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.G31;this.ZQ23(i)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){switch(t){case O7.F27:L5.FI98(!0)&&(this.btnList.ZM66(t),this.title=O3.tr(5616));break;case O7.G31:this.title=O3.tr(7706),this.btnList.ZM66(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.B90);this.btnList.ZHH58(O7.F27,t.ZP73()),this.btnList.ZHH58(O7.G31,t.ZT62())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t}(BasePanelView);__reflect(TacticRefineMainView.prototype,"TacticRefineMainView");var TacticRefineView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TacticRefineSkin,i}return __extends(t,s),t.prototype.initUI=function(){this.proBar.slideDuration=0,s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3],this.lbCurTitle.text=O3.tr(6431),this.lbNextTitle.text=O3.tr(6432),this.cbAutoSmelt.label=O3.tr(6434),this.lbStr1.textFlow=O3.tr2(6433)},t.prototype.open=function(){this.btnBook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.btnRefine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY19,this);for(var t=0;t<this.coms.length;t++)this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);var e=App.CM.gtM(O6.B90);this.updateUI(e),this.ZF90(e),this.btnRefine.label=O3.tr(1462)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG32)switch(e){case P4.U95:this.littleAddExp(t),this.ZF90(t,!0)}else{var i=App.CM.gtM(O6.B90);this.ZF90(i)}},t.prototype.ZF90=function(t,e){var i;void 0===e&&(e=!1);for(var s=0;s<this.coms.length;s++)this.coms[s].imgSelected.visible=s==t.idx,s==t.idx&&(i=s);var o=t.cellsData[i];if(this.updateAttr(o),this.ZP72(t),o.tid){var r=L5.FD44(o.rlv+1);if(r){this.proBar.labelFunction=null,this.gpCost.visible=!0,this.btnRefine.enabled=!0,P16.sGF(this.btnRefine,!1);var n=M18.FL28(r.cost,":"),a=N12.gID(n[0]),h=N12.giC(n[0]);if(this.imgGood.setData(a),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.text=h+"/"+n[1],h>=parseInt(n[1])?this.lbCostGood.textColor=_cc.dgreen:this.lbCostGood.textColor=_cc.red,e)if(0==o.rexp)this.proBar.maximum=r.upper,this.proBar.value=o.rexp,this.ZHH70(),this.btnRefine.label=O3.tr(1462),this.removeTween();else{L5.gIV("refineUp");this.littleAddExp(t)}else this.proBar.maximum=r.upper,this.proBar.value=o.rexp,P7.FD53(this.btnRefine,this.ZP74(o));r.needlv>o.level?(this.ZHH70(),this.btnRefine.visible=!1,this.gpCost.visible=!1,this.cbAutoSmelt.visible=!1,this.lbTip.text=O3.tr(6196,r.needlv),this.lbTip.verticalCenter=58,this.lbTip.visible=!0):(this.btnRefine.visible=!0,this.gpCost.visible=!0,this.cbAutoSmelt.visible=!0,this.lbTip.visible=!1)}else this.proBar.labelFunction=function(t,e){return O3.tr(1463)},this.gpCost.visible=!1,this.btnRefine.enabled=!1,P16.sGF(this.btnRefine,!0),P7.FD53(this.btnRefine,0),this.ZHH70(),this.proBar.maximum=this.proBar.value=100,this.lbTip.text=O3.tr(6187),this.lbTip.verticalCenter=58,this.btnRefine.label=O3.tr(1462)}},t.prototype.close=function(){this.btnBook.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.btnRefine.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY19,this);for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.ZHH70(),this.removeTween()},t.prototype.choose=function(t){var e=parseInt(t.currentTarget.name);this.chooseChief(e)},t.prototype.updateUI=function(t){var e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),e.bt=BehaviourType.Stand_d,this.objBoss.setData(e,this.gpBoss),this.objBoss.name=null,this.objBoss.titleId=null},t.prototype.ZP72=function(t){for(var e=t.cellsData,i=0;i<e.length;i++)if(e[i].isUnlock)if(e[i].tid){var s=L5.base[e[i].tid+""];this.coms[i].grpNum.visible=!0,this.coms[i].lbLevel.text=e[i].level,this.coms[i].grpName.visible=!0,this.coms[i].imgBlack.source=s.iconbg,this.coms[i].imgHead.source=s.icon,this.coms[i].imgNew.visible=0<this.ZP74(e[i]),this.coms[i].imgBg.source=L5.getBox(s.quality),this.coms[i].data={},this.coms[i].data.id=e[i].tid,this.coms[i].gS.visible=!0,this.setStar(this.coms[i].gStars,e[i].star),O5.FB13(this.coms[i].lbName,s.name+"+"+e[i].rlv,s.quality,1)}else this.coms[i].imgHead.source="",this.coms[i].imgBg.source=null,this.coms[i].grpName.visible=!1;else{this.coms[i].lbName.textColor=_cc.red,this.coms[i].imgBg.source=null;s=L5.init["unlocked"+(i+1)].value.split("|");this.coms[i].lbName.text=O3.tr(2716,s[0],s[1])}this.getPower()},t.prototype.setStar=function(t,e,i){void 0===i&&(i=!1);for(var s=L5.FG33(e-5),o=L5.FG33(e),r=5*Math.ceil(e/5)-5,n=0;n<5;n+=1){var a=t.getChildAt(n);a.includeInLayout=a.visible=i||(!(e<5)||n<e),a.source=r+n<e?o:s}},t.prototype.ZP74=function(t){var e=L5.FD44(t.rlv+1);if(!t.isUnlock||!e||!t.tid||t.level<e.needlv)return 0;var i=M18.FL28(e.cost,":");return N12.giC(i[0])>=parseInt(i[1])?1:0},t.prototype.chooseChief=function(t){if("v1_img_lock_png"==this.coms[t].imgHead.source)return!1;var e=App.CM.gtM(O6.B90);if(e.idx=t,this.coms[t].imgSelected.visible){var i={},s=e.cellsData;if(this.coms[t].data){i.d=P7.copyTab(L5.base[this.coms[t].data.id]);for(var o=0;o<s.length;o++)if(s[o].tid==this.coms[t].data.id){i.d.uid=s[o].uid;break}i.type=L19.A29,i.clv=e.cellsData[t].level,this.apF(L19.A9,i)}}else this.ZF90(e)},t.prototype.updateAttr=function(t){t.tid?(this.gpDress.visible=!0,this.lbTip.visible=!1):(this.lbTip.visible=!0,this.gpDress.visible=!1,this.lbTip.verticalCenter=0,this.lbTip.text=O3.tr(2729));var e=L5.FB99(t.rlv),i=1;for(var s in e.curData){var o=e.curData[s];this["lbCurAttr"+i].textFlow=M18.HTP.parse(O3.tr(6207,o.name,o.value)),this["lbCurAttr"+i].visible=!0,i++}for(;i<=4;i++)this["lbCurAttr"+i].visible=!1;if(e.nextData){for(var s in i=1,e.nextData){o=e.nextData[s];this["lbNextAttr"+i].textFlow=M18.HTP.parse(O3.tr(6207,o.name,o.value)),this["lbNextAttr"+i].visible=!0,i++}for(;i<=4;i++)this["lbNextAttr"+i].visible=!1;this.lbMaxLv.visible=!1,this.gpNextAttr.visible=!0}else this.gpNextAttr.visible=!1,this.lbMaxLv.visible=!0,this.lbMaxLv.textFlow=M18.FG71(O3.tr(910))},t.prototype.getPower=function(){var t=App.CM.gtM(O6.B90).cellsData;this.scoreLb.text="";for(var e=0,i=0;i<t.length;i++){var s=L5.FD44(t[i].rlv);s&&(e+=M10.gAG(s.attr))}this.scoreLb.text=e+""},t.prototype.ZM31=function(){this.apF(L19.A15)},t.prototype.littleAddExp=function(t){var e=this.proBar.value,i=0,s=1,o=t.cellsData[t.idx];0==o.rexp?i=this.proBar.maximum-e:(i=o.rexp-e)<=0&&(i=this.proBar.maximum-e+o.rexp),e+i>this.proBar.maximum&&(s+=1),this.updataExp(e,i,s,o)},t.prototype.updataExp=function(t,e,i,a){var h=this,p=function(i,s,o){var t,e=0,r=a.rlv;(t=((e=s+o>=h.proBar.maximum?(o-=h.proBar.maximum-s,h.proBar.maximum):o+s)-h.proBar.value)/h.proBar.maximum*1e3)<200&&(t=200);var n=L5.gIV("refineUp");egret.Tween.get(h.proBar).to({value:e},t).call(function(){if(h.lbAddExp.text="+"+n,egret.Tween.get(h.lbAddExp).to({visible:!0}).to({y:113},200).call(function(){h.lbAddExp.y=97,h.lbAddExp.visible=!1}),h.proBar.value==h.proBar.maximum){s=0;var t=L5.FD44(r+1);if(t)h.proBar.maximum=t.upper,(h.proBar.value=0)<i-1&&p(--i,s,o);else{h.proBar.maximum=h.proBar.value=100,h.ZHH70();var e=App.CM.gtM(O6.B90);h.ZF90(e)}}})};p(i,t,e)},t.prototype.startUpgrade=function(t){this.isUsingGold=t;var e=App.CM.gtM(O6.B82),i=App.CM.gtM(O6.B90),s=i.cellsData[i.idx],o=L5.FD44(s.rlv+1),r=M18.FL28(o.cost,":"),n=r[0],a=parseInt(r[1]),h=0,p=N12.giC(n);if(a<=p&&(h=1),!h)if(this.cbAutoSmelt.selected){var l=N15.FB92(n),c=N15.FA50(n),u=e.avatarInfo.g;c*a<=e.avatarInfo.bg?h=2:t&&!h?l*a<=u?h=3:(P7.FA78(),this.ZHH70(),this.btnRefine.label=O3.tr(1462)):this.ZX12()}else this.ZHH70(),this.btnRefine.label=O3.tr(1462),App.VM.open(O7.G87,n,a-p);if(h){var d=L5.gIV("refineUp");s.rexp==this.proBar.maximum-parseInt(d)&&this.isAuto&&this.ZHH70(),this.apF(L19.A18,s.idx,h)}},t.prototype.ZX12=function(){var t=this;this.ZHH70();var e=App.CM.gtM(O6.B90);if(e.isCostGoldAlert){this.btnRefine.label=O3.tr(1462);var i=function(){t.timeHandler=App.K16.doTimer(230,0,function(){t.btnRefine.label=O3.tr(1461),t.startUpgrade(!0)},t),e.isCostGoldAlert=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i)}else{i=function(){t.startUpgrade(!0)};this.timeHandler=App.K16.doTimer(230,0,i,this)}},t.prototype.ZY19=function(){var t=this;if(this.timeHandler)this.ZHH70(),this.btnRefine.label=O3.tr(1462);else{this.ZHH70(),this.isAuto=!0,this.btnRefine.label=O3.tr(1461);this.timeHandler=App.K16.doTimer(230,0,function(){t.startUpgrade(!1)},this)}},t.prototype.ZHH70=function(){this.isAuto=!1,this.timeHandler&&(App.K16.rBH(this.timeHandler),this.timeHandler=null)},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.proBar),egret.Tween.removeTweens(this.lbAddExp)},t}(BaseEuiView);__reflect(TacticRefineView.prototype,"TacticRefineView");var TacticResolveView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.nums=[L17.A13,L17.A14,L17.A15,L17.A16,L17.A17,L17.A18],i.dataNum=[],i.skinName=TacticResolveSkin,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.cbs=[this.cb1,this.cb2,this.cb3,this.cb4,this.cb5,this.cb6],this.tacticItemData.dataProvider=this.myCollection=new eui.ArrayCollection,this.tacticItemData.itemRenderer=TacticResolevItem,this.cb1.labelDisplay.textFlow=M18.HTP.parse(O3.tr(5512)),this.cb2.labelDisplay.textFlow=M18.HTP.parse(O3.tr(5513)),this.cb3.labelDisplay.textFlow=M18.HTP.parse(O3.tr(5514)),this.cb4.labelDisplay.textFlow=M18.HTP.parse(O3.tr(5515)),this.cb5.labelDisplay.textFlow=M18.HTP.parse(O3.tr(5516)),this.cb6.labelDisplay.textFlow=M18.HTP.parse(O3.tr(5517)),this.lbText1.textFlow=M18.HTP.parser(L5.init.desc2.value),this.lbText2.textFlow=M18.HTP.parser(L5.init.desc3.value),this.btnResolve.label=O3.tr(4586);var t=L5.decompose[L5.decompose.length-1].id,e=L5.decompose[L5.decompose.length-1].trpid,i=N12.gID(t);this.imgOneMelt0.setData(i);var s=N12.gID(e);this.imgOneMelt1.setData(s)},t.prototype.open=function(){for(var t=0;t<this.cbs.length;t++)this.cbs[t].addEventListener(egret.Event.CHANGE,this.chooseChange,this);this.btnResolve.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startResolve,this),this.updateUI()},t.prototype.close=function(){for(var t=0;t<this.cbs.length;t++)this.cbs[t].removeEventListener(egret.Event.CHANGE,this.chooseChange,this);this.btnResolve.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startResolve,this),this.myCollection.removeAll(),egret.Tween.removeTweens(this)},t.prototype.updateUI=function(){this.updateResove();for(var t=App.CM.gtM(O6.B82),e=0;e<this.nums.length;e++)-1!=t.setting.indexOf(this.nums[e])&&(this.cbs[e].selected=!0)},t.prototype.startResolve=function(){for(var t="",e=this.myCollection.source,i=0;i<e.length;i++)0==e[i].isLock&&(t+=e[i].uid+",");this.btnResolve.imgNew.visible&&(t=t.substring(0,t.length-1),this.apF(L19.A10,t))},t.prototype.updateResove=function(){this.dataNum=[];for(var t=App.CM.gtM(O6.B82),e=0;e<this.nums.length;e++)-1!=t.setting.indexOf(this.nums[e])&&this.dataNum.push(e+1);this.canResove()},t.prototype.canResove=function(){for(var t=this,e=(App.CM.gtM(O6.B82),App.CM.gtM(O6.B90)),i=[],s=0;s<e.cellsData.length;s++)e.cellsData[s].uid&&i.push(e.cellsData[s].uid);for(var o=e.bagData.bag,r=[],n=0;n<o.length;n++)-1!=this.dataNum.indexOf(o[n].quality)&&-1==i.indexOf(o[n].uid)&&r.push(o[n]);this.scr.viewport.scrollV=0,this.myCollection.replaceAll(r),this.updateGetNum(),egret.Tween.get(this).wait(200).call(function(){t.grpClick(!0)})},t.prototype.updateGetNum=function(){for(var t=App.CM.gtM(O6.B90),e=0,i=0,s=this.myCollection.source,o=0;o<s.length;o++)0==s[o].isLock&&(e+=parseInt(L5.decompose[s[o].quality].count),i+=parseInt(L5.decompose[s[o].quality].trpcount));this.lbOneMeltNum0.text=e+"",this.lbOneMeltNum1.text=i+"",this.btnResolve.imgNew.visible=!!t.resHong},t.prototype.grpClick=function(t){this.grp.touchChildren=t},t.prototype.chooseChange=function(t){if(this.grp.touchChildren){this.grpClick(!1);var e=parseInt(t.target.name);this.aCF(O6.B82,L13.A24,this.nums[e-1]),TG40.playClickEffect()}},t.prototype.updateBag=function(t){for(var e=this.myCollection.source,i=0;i<e.length;i++)if(e[i].uid==t.uid){e[i]=t;break}this.myCollection.replaceAll(e),this.updateGetNum()},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TG32)switch(e){case P4.Q46:this.canResove()}if(t instanceof TG12)switch(e){case P4.S94:App.CM.gtM(O6.B90).isShowImgNew(),this.updateResove()}},t}(BaseEuiView);__reflect(TacticResolveView.prototype,"TacticResolveView");var TacticResolevItem=function(e){function t(){var t=e.call(this)||this;return t.modelData={},t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.imgTaper.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTaper,this),this.imgHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD42,this)},t.prototype.close=function(){this.imgTaper.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeTaper,this),this.imgHead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD42,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.changeTaper=function(){var t=this.data.isLock?0:1;App.CM.apF(O6.B90,L19.A26,this.data.uid,t)},t.prototype.ZD42=function(){App.CM.apF(O6.B90,L19.A9,this.modelData)},t.prototype.dataChanged=function(){var t=P7.copyTab(L5.base[this.data.tid+""]);this.imgTaper.source=this.data.isLock?"v1_img_weijiesuo_png":"v1_img_jiesuo_png",this.imgNew.visible=!this.data.isLock,this.imgBlack.source=t.iconbg,this.imgHead.source=t.icon,this.imgBg.source=L5.getBox(t.quality),O5.FB13(this.lbName,t.name,t.quality,2),this.modelData.d=t,this.modelData.d.uid=this.data.uid,this.modelData.type=L19.A32},t}(eui.ItemRenderer);__reflect(TacticResolevItem.prototype,"TacticResolevItem");var tactic,TacticUpgradeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=TacticUpgradeSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.coms=[this.com0,this.com1,this.com2,this.com3],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4575)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4576)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4577)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4578)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4579)),this.cbAutoBuy.label=O3.tr(5727),this.btnUpgrade.label=O3.tr(5728)},t.prototype.open=function(){this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.btnBook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.grpClick.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.cbAutoBuy.addEventListener(egret.Event.CHANGE,this.chooseChange,this);for(var t=0;t<this.coms.length;t++)this.coms[t].lbLevel.text=null,this.coms[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this);this.updateUI()},t.prototype.close=function(){this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZR46,this),this.btnBook.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM31,this),this.grpClick.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.cbAutoBuy.removeEventListener(egret.Event.CHANGE,this.chooseChange,this);for(var t=0;t<this.coms.length;t++)this.coms[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.choose,this),App.THH33.rEf(this.coms[t],"iconSkill");this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.cellsData=null},t.prototype.resetStrAttr=function(){this.scrAttr.viewport.scrollV=0},t.prototype.choose=function(t){this.resetStrAttr();var e=parseInt(t.currentTarget.name);this.chooseChief(e)},t.prototype.chooseChange=function(){this.aCF(O6.B82,L13.A24,L17.A36),TG40.playClickEffect()},t.prototype.GT53=function(){var t=N12.giC(this.itemId),e=N12.gID(this.itemId+"");this.aCF(O6.C11,O14.A15,e,t)},t.prototype.updateUI=function(){for(var t=App.CM.gtM(O6.B90),e=0;e<this.coms.length;e++)this.coms[e].imgSelected.visible=e==t.idx;this.ZP72(t),this.updateNowUI(t.idx),this.autoBuy();var i=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],s={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(s),i.bt=BehaviourType.Stand_d,this.objBoss.setData(i,this.gpBoss),this.objBoss.name=null,this.objBoss.titleId=null,this.resetStrAttr()},t.prototype.ZP72=function(t){for(var e=t.cellsData,i=0;i<e.length;i++)if(e[i].isUnlock)if(e[i].tid){var s=L5.base[e[i].tid+""];this.coms[i].grpNum.visible=!0,this.coms[i].lbLevel.text&&this.coms[i].lbLevel.text!=e[i].level&&App.THH33.aUE(this.coms[i],"iconSkill",-this.coms[i].width/2,-this.coms[i].height/2+5,1),this.coms[i].lbLevel.text=e[i].level,this.coms[i].grpName.visible=!0,this.coms[i].imgBlack.source=s.iconbg,this.coms[i].imgHead.source=s.icon,this.coms[i].imgBg.source=L5.getBox(s.quality),this.coms[i].data={},this.coms[i].data.id=e[i].tid,O5.FB13(this.coms[i].lbName,s.name,s.quality,1);var o=L5.cellData[e[i].level+""].reqitem;if(o){var r=o.split(":"),n=N12.giC(parseInt(r[0]));this.coms[i].imgNew.visible=n>=parseInt(r[1])}else this.coms[i].imgNew.visible=!1}else this.coms[i].imgHead.source="",this.coms[i].grpName.visible=!1,this.coms[i].imgBg.source=null;else{this.coms[i].lbName.textColor=_cc.red,this.coms[i].imgBg.source=null;s=L5.init["unlocked"+(i+1)].value.split("|");this.coms[i].lbName.text=O3.tr(2716,s[0],s[1])}this.getPower()},t.prototype.getPower=function(){var t=App.CM.gtM(O6.B90).cellsData;this.scoreLb.text="";for(var e=0,i=0,s=0;s<this.coms.length;s++)if(this.coms[s].data){for(var o=0;o<t.length;o++)if(t[o].tid==this.coms[s].data.id){e=t[o].ratio;break}var r=L5.base[this.coms[s].data.id+""];i+=M10.gAG(r.attr)+Math.floor(M10.gAG(r.attr)*e)}this.scoreLb.text=i+""},t.prototype.chooseChief=function(t){if("v1_img_lock_png"==this.coms[t].imgHead.source)return!1;var e=App.CM.gtM(O6.B90);if(e.idx=t,this.coms[t].imgSelected.visible){var i={},s=e.cellsData;if(this.coms[t].data){i.d=P7.copyTab(L5.base[this.coms[t].data.id]);for(var o=0;o<s.length;o++)if(s[o].tid==this.coms[t].data.id){i.d.uid=s[o].uid;break}i.type=L19.A29,this.apF(L19.A9,i)}}else{for(o=0;o<this.coms.length;o++)this.coms[o].imgSelected.visible=o==t;this.updateNowUI(t)}},t.prototype.updateNowUI=function(t){var e=App.CM.gtM(O6.B90),i=this.cellsData=e.cellsData[t],s=L5.base[i.tid+""],o=L5.cellData[i.level+""],r=s?o.reqitem:null;if(!r)return this.grpAdd.visible=!1,this.lbHight.visible=!0,void(this.lbHight.text=s?O3.tr(2728):O3.tr(2729));var n=L5.cellData[i.level+1+""],a=r.split(":");this.itemId=parseInt(a[0]);var h=N12.giC(a[0]),p=N12.gID(a[0]);this.expendCount=parseInt(a[1]);var l=Number(O5.FA77(p.quality,1)),c=O3.tr(2730,l,p.name,a[1]);p.name,a[1],this.lbExpend.textFlow=M18.HTP.parser(c),this.imgHead.source=N12.FJ86(p.id),this.imgQuality.source=N12.getBox(p.quality),this.btnUpgrade.imgNew.visible=this.coms[t].imgNew.visible,this.lbOwn.text=h+"",this.lbOwn.textColor=parseInt(a[1])<=h?_cc.dgreen:_cc.red,this.grpAdd.visible=!0,this.lbHight.visible=!1;var u=o.ratio,d=n.ratio;if(this.lbNowAttr.text=O3.tr(2722,Math.floor(100*u)),this.lbNextAttr.text=O3.tr(2722,Math.floor(100*d)),this.getBossAttr(this.lbNowBassAttr,u,s.attr),this.getBossAttr(this.lbNextBassAttr,d,s.attr),-1==s.symbolid)this.grpNowSkill.includeInLayout=this.grpNowSkill.visible=this.grpNextSkill.includeInLayout=this.grpNextSkill.visible=!1;else{this.grpNowSkill.includeInLayout=this.grpNowSkill.visible=this.grpNextSkill.includeInLayout=this.grpNextSkill.visible=!0;var v=L5.FF49(s.symbolid,i.level),f=L5.skill[v.nextid+""];this.lbNowSkillName.text=v.name;var g=O3.tr(2723,v.desc);this.lbNowSkillStr.textFlow=M18.HTP.parser(g),this.lbNextSkillName.text=f.name;var m=O3.tr(2731,f.desc,f.reqcelllv);this.lbNextSkillStr.textFlow=M18.HTP.parser(m)}},t.prototype.getBossAttr=function(t,e,i){for(var s="",o=i.split(";"),r=0;r<o.length;r++){var n=o[r].split(":");r+1<o.length?s+=O3.tr(2724,K18.attribute[n[0]].name,n[1],Math.floor(parseInt(n[1])*e)+"\n"):s+=O3.tr(2724,K18.attribute[n[0]].name,n[1],Math.floor(parseInt(n[1])*e))}t.textFlow=M18.HTP.parser(s)},t.prototype.ZR46=function(){this.startUpgrade(!1)},t.prototype.startUpgrade=function(t){var e=App.CM.gtM(O6.B82),i=0,s=N12.giC(this.itemId);if(this.expendCount<=s&&(i=1),!i)if(this.cbAutoBuy.selected){var o=e.avatarInfo.bg;if(N15.FA50(this.itemId)*this.expendCount<=o)i=2;else if(t){var r=N15.FB92(this.itemId),n=e.avatarInfo.g;r*this.expendCount<=n?i=3:P7.FA78()}else this.ZX12()}else{var a=this.expendCount-parseInt(this.lbOwn.text);App.VM.open(O7.G87,this.itemId,a)}i&&this.apF(L19.A1,this.cellsData.idx,i)},t.prototype.autoBuy=function(){var t=App.CM.gtM(O6.B82);this.cbAutoBuy.selected=-1!=t.setting.indexOf(L17.A36)},t.prototype.ZX12=function(){var t=this,e=App.CM.gtM(O6.B90);if(e.isCostGoldAlert){App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){t.startUpgrade(!0),e.isCostGoldAlert=!1})}else this.startUpgrade(!0)},t.prototype.ZM31=function(){this.apF(L19.A15)},t.prototype.updateBaseUI=function(){var t=App.CM.gtM(O6.B90);this.ZP72(t),this.updateNowUI(t.idx)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG32)switch(e){case P4.I56:this.updateBaseUI()}if(t instanceof THH9)switch(e){case P4.V43:this.updateBaseUI()}if(t instanceof TG12)switch(e){case P4.S94:this.autoBuy()}},t}(BaseEuiView);__reflect(TacticUpgradeView.prototype,"TacticUpgradeView"),function(t){var e=function(){};t.TacticVo=e,__reflect(e.prototype,"tactic.TacticVo");var i=function(){};t.TacticCellVo=i,__reflect(i.prototype,"tactic.TacticCellVo")}(tactic||(tactic={}));var N19=function(){function t(){}return t.FK35=function(t){this.init=t.team_init,this.award=t.team_award,this.awardData=this.getAwardData(),this.doubleTime=this.ZV6()},t.getAwardData=function(){var t=[];if(!this.award)return t;for(var e in this.award)t.push(this.award[e]);return t},t.FG55=function(t){for(var e=0,i=0;i<this.awardData.length;i++)if(this.awardData[i].level==t){e=i;break}return e},t.FE69=function(){return this.init.level.value||0},t.ZV6=function(){var t=[];if(!this.init)return t;var e=this.init.doubleTime.value,i=M18.FL28(e,";",",");for(var s in i){var o={pt:P6.FM3(i[s][0]),vt:P6.FM3(i[s][1])};t.push(o)}return t},t}();__reflect(N19.prototype,"N19");var O13=function(){function t(){}return t.A40=10001,t.A20=10002,t.A28=10003,t.A29=10004,t.A11=10005,t.A12=10006,t.A21=10007,t.A22=10008,t.A30=10009,t.A31=10010,t.A7=10011,t.A8=10012,t.A32=10013,t.A33=10014,t.A15=10015,t.A16=10016,t.A24=10017,t.A25=10018,t.A34=10019,t.A35=10020,t.A26=10021,t.A13=10022,t.A14=10023,t.A17=10024,t.A18=10025,t.A9=10026,t.A19=10027,t.A10=10028,t.A23=10029,t.A27=10030,t.A36=10031,t.A37=10032,t.A6=11001,t.A4=11002,t.A2=11003,t.A1=11004,t.A5=11005,t.A3=11006,t.A38=11007,t.A39=11008,t}();__reflect(O13.prototype,"O13");var TF1=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I89,"TeamView",t,K17.UI_Main_TOP),t.rgF(O13.A38,t.GX88,t),t.rgF(O13.A39,t.GX89,t);var e=new THH18(t);return e.aLV(O7.HH99),e.aLV(O7.I89),e.aLV(O7.I63),e.aLV(O7.C51),e.aLV(O7.HH23),e.aLV(O7.HH30),e.aLV(O7.I39),e.aLV(O7.I85),e.aLV(O7.HH47),e.aLV(O7.HH23),t.teamProxy=new THH19(t),t.rgF(O13.A40,t.push,t),t.rgF(O13.A20,t.GY66,t),t.rgF(O13.A28,t.loadReq,t),t.rgF(O13.A29,t.loadRes,t),t.rgF(O13.A14,t.GP79,t),t.rgF(O13.A11,t.GW12,t),t.rgF(O13.A12,t.GW13,t),t.rgF(O13.A21,t.GY72,t),t.rgF(O13.A22,t.GY73,t),t.rgF(O13.A30,t.joinReq,t),t.rgF(O13.A31,t.joinRes,t),t.rgF(O13.A7,t.GV26,t),t.rgF(O13.A8,t.GV27,t),t.rgF(O13.A32,t.quitReq,t),t.rgF(O13.A33,t.quitRes,t),t.rgF(O13.A15,t.GX90,t),t.rgF(O13.A16,t.GX91,t),t.rgF(O13.A24,t.fightReq,t),t.rgF(O13.A25,t.fightRes,t),t.rgF(O13.A34,t.viewReq,t),t.rgF(O13.A35,t.viewRes,t),t.rgF(O13.A36,t.GX92,t),t.rgF(O13.A37,t.GX77,t),t.rgF(O13.A26,t.roomPush,t),t.rgF(O13.A13,t.GW71,t),t.rgF(O13.A17,t.GR64,t),t.rgF(O13.A18,t.GN92,t),t.rgF(O13.A9,t.GM92,t),t.rgF(O13.A19,t.GT68,t),t.rgF(O13.A10,t.GW72,t),t.rgF(O13.A23,t.GT70,t),t.rgF(O13.A27,t.GV28,t),t}return __extends(t,i),t.prototype.GX88=function(){App.VM.open(O7.I89)},t.prototype.GX89=function(){App.VM.close(O7.I89)},t.prototype.push=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);t.body.team&&(e.teamData=this.getTeam(t.body.team)),e.notify(P4.Y26),this.GW72(),e.isMyLeader()||(this.GW73(),e.notify(P4.Y6))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY66=function(i){var s=this;if(200==i.head.state)if(i.body.cd_)P7.fightCoolingCD(i.body.cd_);else{var o=App.CM.gtM(O6.C23);o.teamData=null,o.isFight=!0,App.VM.isOpen(O7.I39)&&o.notify(P4.W66);var t=P7.isGetView(O7.I89);App.CM.apF(O6.B99,N1.A11,i.body.fr,{rewards:i.body.ob,needResult:!0,type:P15.A24,isAuto:t},function(t,e){o.openKeyList=i.body.uns,o.earningsNum=i.body.gn,o.isFight=!1,o.isShowImgNew(),s.ZT94(O6.A60,D17.A2),s.ZT94(O6.C23,O13.A38),o.notify(P4.W66)},this)}else App.CM.apF(O6.B87,L10.A4,i)},t.prototype.loadReq=function(){return this.teamProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);t.body.team&&(e.teamData=this.getTeam(t.body.team)),e.earningsNum=t.body.gn,e.openKeyList=t.body.uns,e.roomList=t.body.rvs,e.isDouble=t.body.dou,e.isShowImgNew()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP79=function(t){App.VM.gOV(O7.I89).updateIndex(t)},t.prototype.getTeam=function(t){return t.members.sort(function(t,e){return t.isNpc-e.isNpc}),t},t.prototype.GW12=function(t){this.teamProxy.GW12(t)},t.prototype.GW13=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.teamData||(e.initRoomList(t.body.rvs),e.notify(P4.U92))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY72=function(t,e,i){P7.FF59()&&!TG53.FJ54()&&(App.CM.gtM(O6.C23).ZP34()?this.teamProxy.GY72(t,e,i):P18.sDP(O3.tr(8263)))},t.prototype.GY73=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.teamData=this.getTeam(t.body.team),e.notify(P4.W68),this.GW72(),this.GW73(),this.ZT94(O6.B64,J18.A37,!1)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.joinReq=function(t){P7.FF59()&&!TG53.FJ54()&&(App.CM.gtM(O6.C23).ZP34()?this.teamProxy.joinReq(t):P18.sDP(O3.tr(8263)))},t.prototype.joinRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.teamData=this.getTeam(t.body.team),e.hisId=N19.FG55(e.teamData.id),e.notify(P4.X91),App.VM.isOpen(O7.I89)||this.GX88(),e.isMyLeader()||(this.GW72(),this.GW73()),this.ZT94(O6.B64,J18.A37,!1)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV26=function(t,e,i){P7.FF59()&&!TG53.FJ54()&&(App.CM.gtM(O6.C23).ZP34()?this.teamProxy.GV26(t,e,i):P18.sDP(O3.tr(8263)))},t.prototype.GV27=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.teamData=this.getTeam(t.body.team),e.notify(P4.T74),this.GW72(),this.GW73(),this.ZT94(O6.B64,J18.A37,!1)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.quitReq=function(){this.teamProxy.quitReq()},t.prototype.quitRes=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.teamData=null,e.notify(P4.X93),this.GW72(),this.GW73()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX90=function(t){this.teamProxy.GX90(t),this.GW72(),this.GW73()},t.prototype.GX91=function(t){if(200==t.head.state){var e=this.gtM();e.teamData=this.getTeam(t.body.team),e.notify(P4.V95),this.GW72(),this.GW73()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.fightReq=function(t){if(P7.FF59()){var e=this.gtM(),i=e.isMyLeader();e.teamData=null,this.GN92(),this.GM92(),i&&this.teamProxy.fightReq(t),e.notify(P4.W66)}},t.prototype.fightRes=function(t){200==t.head.state?App.VM.isOpen(O7.HH23)&&App.CM.apF(O6.C5,N3.A47):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.viewReq=function(t){this.teamProxy.viewReq(t),this.gtM().notify(P4.W66)},t.prototype.viewRes=function(t){200==t.head.state||App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX92=function(t,e){this.teamProxy.GX92(t,e)},t.prototype.GX77=function(t){if(200==t.head.state){var e=this.gtM();e.teamData=this.getTeam(t.body.team),e.notify(P4.Y6),this.GW72(),this.GW73()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.roomPush=function(t){if(200==t.head.state){var e=[],i=App.CM.gtM(O6.C23);null==i.hisId&&(i.hisId=0);for(var s=N19.awardData[i.hisId],o=0;o<i.roomList.length;o++)e.push(i.roomList[o].tid);if(t.body.rv&&t.body.rv.id==s.level&&!i.teamData)if(t.body.rv)-1==(r=e.indexOf(t.body.rv.tid))?i.roomList.push(t.body.rv):i.roomList[r]=t.body.rv;if(t.body.rtid){var r=e.indexOf(t.body.rtid);i.roomList.splice(r,1)}i.notify(P4.X29)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW71=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.teamData=null,P18.sDP(O3.tr(2810,t.body.name)),e.notify(P4.U93),this.GW72(),this.GW73()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR64=function(t){if(200==t.head.state){var e=App.CM.gtM(O6.C23);e.isDouble=t.body.dou,e.notify(P4.V96)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GO49=function(){var t=App.CM.gtM(O6.C23);if(t.teamData){var e=t.teamData.teamId;this.fightReq(e)}this.GN92(),this.GM92()},t.prototype.GN92=function(){var t=this.gtM();this.challHander&&(App.K16.rBH(this.challHander),this.challHander=null),t.challTime=parseInt(N19.init.autoBegin.value),t.notify("renewchall")},t.prototype.GM92=function(){var t=this.gtM();this.fightHander&&(App.K16.rBH(this.fightHander),this.fightHander=null),t.autoFightTime=parseInt(N19.init.fullBegin.value)+1,t.notify("renewTime")},t.prototype.GT68=function(){var t=this.gtM();this.challHander||(this.challHander=App.K16.doTimer(1e3,t.challTime,function(){t.challTime--,t.notify("challTime")},this,this.GO49,this))},t.prototype.GT69=function(){var t=this.gtM();this.fightHander||(this.fightHander=App.K16.doTimer(1e3,t.autoFightTime,function(){t.autoFightTime--,t.notify("fightTime")},this,this.GO49,this))},t.prototype.GT70=function(t){if(200==t.head.state){var e=this.gtM();e.earningsNum=t.body.gn,e.notify(P4.W69)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV28=function(){var t=this.gtM();t.teamData=null,this.GN92(),this.GM92(),t.notify(P4.X30)},t.prototype.GW72=function(){var t=App.CM.gtM(O6.C23);t.isMyLeader()?3==t.teamData.members.length&&t.autoFightBox?this.GT69():this.GM92():t.teamData&&t.teamData.ff?this.GT69():this.GM92()},t.prototype.GW73=function(){var t=App.CM.gtM(O6.C23);if(t.isMyLeader())t.teamData&&t.challBox?this.GT68():this.GN92();else if(t.teamData)if(-1!=t.teamData.cd){var e=App.VM.gOV(O7.I89);t.challTime=parseInt(N19.init.autoBegin.value)-t.teamData.cd,e&&e.ZP76(),this.GT68()}else this.GN92();else this.GM92()},t}(TE11);__reflect(TF1.prototype,"TF1");var TeamMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.HH99,O7.I89,"TeamView",this.content),App.VM.rgS(O7.HH99,O7.HH59,"CrossBossView",this.content),App.VM.rgS(O7.HH99,O7.HH65,"CrossDuelView",this.content),App.VM.rgS(O7.HH99,O7.HH67,"CrossFishView",this.content),App.VM.rgS(O7.HH99,O7.G95,"CrossFieldView",this.content);var t=[O3.tr(2800),O3.tr(705),O3.tr(3371),O3.tr(4521),O3.tr(5207)],e=[O7.I89,O7.HH59,O7.HH65,O7.HH67,O7.G95];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnList.scaleX=this.btnList.scaleY=.8,this.btnGroup.bottom=30,this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.ZG74();var i=t[0]||O7.I89;this.ZQ23(i)},t.prototype.ZQ23=function(t){App.CM.gtM(O6.B82);var e=App.CM.gtM(O6.B43),i=O4.getLv(),s=e.serOpenDay+1;switch(t){case O7.I89:this.title=O3.tr(2800),this.btnList.ZM66(t),this.helpBtn.visible=!1;break;case O7.HH59:this.title=O3.tr(705),this.btnList.ZM66(t),this.helpBtn.visible=!0;break;case O7.HH65:if(-1==App.CM.gtM(O6.B24).state)P18.sDP(O3.tr(6324));else{var o=TD91.FE59("unlockLv");if(s<(n=TD91.FE59("serverDate"))||i<o)P18.sDP(O3.tr(3370,n,o));else{this.helpBtn.visible=!0,this.title=O3.tr(3371),this.btnList.ZM66(t);var r=App.CM.gtM(O6.B24);1<r.state&&r.isSign&&App.CM.apF(O6.B24,G15.A16)}}break;case O7.HH67:this.helpBtn.visible=!0,this.title=O3.tr(4521),this.btnList.ZM66(t);break;case O7.G95:if(-1==App.CM.gtM(O6.A99).state)P18.sDP(O3.tr(6324));else{var n;o=F6.FE59("unlockLv");s<(n=F6.FE59("unlockDate"))||i<o?P18.sDP(O3.tr(3370,n,o)):(this.helpBtn.visible=!0,this.title=O3.tr(5207),this.btnList.ZM66(t))}}},t.prototype.openHelpView=function(){var t,e;switch(this.title){case O3.tr(705):t=G9.gIV("tipsTitle"),e=G9.gIV("tipsTex");break;case O3.tr(3371):t=TD91.gIV("tipsTitle"),e=TD91.gIV("tipsTex");break;case O3.tr(4521):t=TD91.gIV("tipsTitle"),e=O3.tr(4588);break;case O3.tr(5207):t=O3.tr(6e3),e=O3.tr(6001)}var i={title:t,content:e};this.aCF(O6.C18,O10.A24,i)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.C23),e=App.CM.gtM(O6.B16),i=App.CM.gtM(O6.B24),s=App.CM.gtM(O6.B28),o=App.CM.gtM(O6.A99);this.btnList.ZHH58(O7.I89,t.isHong),this.btnList.ZM67(O7.I89,t.isDouble),this.btnList.ZHH58(O7.HH59,e.state),this.btnList.ZHH58(O7.HH65,i.FL35()),this.btnList.ZHH58(O7.HH67,s.FL35()),this.btnList.ZHH58(O7.G95,o.FL35())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t}(BasePanelView);__reflect(TeamMainView.prototype,"TeamMainView");var THH18=function(i){function t(t){var e=i.call(this,t)||this;return e.hisId=null,e.autoJoinBox=!0,e.autoFightBox=!0,e.challBox=!0,e.autoFightTime=parseInt(N19.init.fullBegin.value)+1,e.challTime=parseInt(N19.init.autoBegin.value),e.isFight=!1,e}return __extends(t,i),t.prototype.isShowImgNew=function(){this.isHong=0;var t=App.CM.gtM(O6.B82);t.avatarInfo&&t.avatarInfo.l<parseInt(N19.init.level.value)||(this.isHong=parseInt(N19.init.awardTime.value)>this.earningsNum?1:0)},t.prototype.isMyLeader=function(){var t=!1;return this.teamData?t=App.CM.gtM(O6.B82).avatarInfo.id==this.teamData.leader:t},t.prototype.initRoomList=function(t){this.roomList=[];for(var e=0;e<t.length;e++){null==this.hisId&&(this.hisId=0),N19.awardData[this.hisId].level==t[e].id&&this.roomList.push(t[e])}},t.prototype.ZP34=function(){return 0<parseInt(N19.init.awardTime.value)-this.earningsNum},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(THH18.prototype,"THH18");var THH19=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y26,e.pushRes,e),e.rSM(P4.W66,e.fightPushRes,e),e.rSM(P4.X29,e.roomPushRes,e),e.rSM(P4.U93,e.kickoutPush,e),e.rSM(P4.V96,e.GR64,e),e.rSM(P4.W69,e.GT70,e),e.rSM(P4.X30,e.GV28,e),e}return __extends(t,i),t.prototype.pushRes=function(t){this.apF(O13.A40,t)},t.prototype.fightPushRes=function(t){this.apF(O13.A20,t)},t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X88,body:{}};s.rSMO(P4.X89,function(t){s.apF(O13.A29,t),e("加载组队加载完成")},s),s.sSM(i)})},t.prototype.GW12=function(t){var e={type:P4.U91,body:{roomId:t}};this.rSMO(P4.U92,this.GW13,this),this.sSM(e)},t.prototype.GW13=function(t){this.apF(O13.A12,t)},t.prototype.GY72=function(t,e,i){var s={type:P4.W67,body:{id:t,isFull:e,isTime:i}};this.rSMO(P4.W68,this.GY73,this),this.sSM(s)},t.prototype.GY73=function(t){this.apF(O13.A22,t)},t.prototype.joinReq=function(t){var e={type:P4.X90,body:{teamId:t}};this.rSMO(P4.X91,this.joinRes,this),this.sSM(e)},t.prototype.joinRes=function(t){this.apF(O13.A31,t)},t.prototype.GV26=function(t,e,i){var s={type:P4.T73,body:{id:t,isFull:e,isTime:i}};this.rSMO(P4.T74,this.GV27,this),this.sSM(s)},t.prototype.GV27=function(t){this.apF(O13.A8,t)},t.prototype.quitReq=function(){var t={type:P4.X92,body:{}};this.rSMO(P4.X93,this.quitRes,this),this.sSM(t)},t.prototype.quitRes=function(t){this.apF(O13.A33,t)},t.prototype.GX90=function(t){var e={type:P4.V94,body:{targetId:t}};this.rSMO(P4.V95,this.GX91,this),this.sSM(e)},t.prototype.GX91=function(t){this.apF(O13.A16,t)},t.prototype.fightReq=function(t){var e={type:P4.X27,body:{teamId:t}};this.rSMO(P4.X28,this.fightRes,this),this.sSM(e)},t.prototype.fightRes=function(t){this.apF(O13.A25,t)},t.prototype.viewReq=function(t){var e={type:P4.X94,body:{state:t}};this.rSMO(P4.X95,this.viewRes,this),this.sSM(e)},t.prototype.viewRes=function(t){this.apF(O13.A35,t)},t.prototype.GX92=function(t,e){var i={type:P4.Y5,body:{id:t,state:e}};this.rSMO(P4.Y6,this.GX77,this),this.sSM(i)},t.prototype.GX77=function(t){this.apF(O13.A37,t)},t.prototype.roomPushRes=function(t){this.apF(O13.A26,t)},t.prototype.kickoutPush=function(t){this.apF(O13.A13,t)},t.prototype.GR64=function(t){this.apF(O13.A17,t)},t.prototype.GT70=function(t){this.apF(O13.A23,t)},t.prototype.GV28=function(t){this.apF(O13.A27,t)},t}(TG80);__reflect(THH19.prototype,"THH19");var TeamBossDataItem=function(h){function t(){var t=h.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,h),t.prototype.open=function(){this.grpBossArm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY20,this),this.grpAward0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.grpAward1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this)},t.prototype.close=function(){for(var t in this.grpBossArm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY20,this),this.grpAward0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.grpAward1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),this.grpBossArm.removeChildren(),this.objs)this.objs[t].destory();this.objs=[]},t.prototype.childrenCreated=function(){h.prototype.createChildren.call(this),this.objs=[]},t.prototype.ZN40=function(t){var e=t.currentTarget.data,i=P7.copyTab(N12.gID(e.id)),s={};switch(i.effecttype){case 1:var o=i.param;s=N12.gID(o),App.CM.apF(O6.B98,M19.A17,s);break;default:App.CM.apF(O6.C11,O14.A15,i)}},t.prototype.showBoss=function(){this.grpBossArm.removeChildren();var t={id:N17.FF93(this.data.shownpc).image,x:80,y:160,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},e=new FightGameObject;e.setData(t,this.grpBossArm),this.objs.push(e)},t.prototype.ZY20=function(){this.data.selected||App.CM.apF(O6.C23,O13.A14,this.itemIndex)},t.prototype.dataChanged=function(){h.prototype.dataChanged.call(this);var t=App.CM.gtM(O6.C23),e=App.CM.gtM(O6.B82);this.showBoss();var i=e.avatarInfo.l;this.lbName.text=O3.tr(2802,this.data.level);for(var s=this.data.first.split(";"),o=0;o<s.length;o++)for(var r=s[o].split(":"),n=0;n<r.length;n++)this["imgHead"+o].source=N12.FJ86(r[0]),this["imgQuality"+o].source=N12.FL5(r[0]),this["lbNum"+o].text=M18.FF65(r[1]),this["grpAward"+o].data={},this["grpAward"+o].data.id=r[0],this["grpAward"+o].data.c=this["lbNum"+o].text;if(this.imgSel.visible=this.data.selected,this.data.selected?this.grpIndex.scaleX=this.grpIndex.scaleY=1:this.grpIndex.scaleX=this.grpIndex.scaleY=.9,i>=this.data.level){if(this.lbGrade.textColor=_cc.brown,t.openKeyList.length==this.itemIndex?this.lbGrade.text=O3.tr(2805):t.openKeyList.length<this.itemIndex&&(this.lbGrade.textColor=_cc.red,this.lbGrade.text=O3.tr(2818)),-1!=t.openKeyList.indexOf(this.data.level)){this.lbGrade.text=O3.tr(2803);var a=this.data.fixed.split(";");for(o=0;o<a.length;o++)for(r=a[o].split(":"),n=0;n<r.length;n++)this["imgHead"+o].source=N12.FJ86(r[0]),this["imgQuality"+o].source=N12.FL5(r[0]),this["lbNum"+o].text=M18.FF65(r[1]),this["grpAward"+o].data={},this["grpAward"+o].data.id=r[0],this["grpAward"+o].data.c=this["lbNum"+o].text}}else this.lbGrade.textColor=_cc.red,this.lbGrade.text=O3.tr(2804,this.data.level)},t}(eui.ItemRenderer);__reflect(TeamBossDataItem.prototype,"TeamBossDataItem");var TeamFormDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.quitTeam,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinTeam,this)},t.prototype.close=function(){this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.quitTeam,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinTeam,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.btnJoin.label=O3.tr(4311)},t.prototype.quitTeam=function(){if(this.data.aid){var t=App.CM.gtM(O6.B82).avatarInfo.id,e=this.data.aid==t;App.CM.gtM(O6.C23);e?App.CM.apF(O6.C23,O13.A32):App.CM.apF(O6.C23,O13.A15,this.data.aid)}},t.prototype.joinTeam=function(){if(3!=this.data.tn){App.CM.gtM(O6.C23);App.CM.apF(O6.C23,O13.A30,this.data.tid)}else P18.sDP(O3.tr(2811))},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C23),e=App.CM.gtM(O6.B82).avatarInfo.id;if(this.imgHead.source=this.data.icon,this.data.sc){this.currentState="base",this.lbName.textFlow=M18.HTP.parse(O3.tr(4309,this.data.name));var i=O3.tr(2806,M18.FF65(this.data.sc));this.lbPower.textFlow=M18.HTP.parser(i),this.lbClass.textFlow=M18.HTP.parse(O3.tr(4310,this.data.lv)),t.teamData?this.imgLeader.visible=this.data.aid==t.teamData.leader:this.imgLeader.visible=!1,t.teamData&&t.teamData.leader!=e?this.btnClose.visible=this.data.aid==e:t.teamData&&t.teamData.leader==e&&(this.btnClose.visible=!0)}else{this.currentState="join",this.lbName.textFlow=M18.HTP.parse(O3.tr(4309,this.data.n));i=O3.tr(2807,this.data.tn,3);this.lbJoinNum.textFlow=M18.HTP.parser(i)}},t}(eui.ItemRenderer);__reflect(TeamFormDataItem.prototype,"TeamFormDataItem");var team,TeamView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.timerArray=[],i.skinName=TeamViewSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.title=O3.tr(2800),this.cbAutoFight.label=O3.tr(2814),this.cbChall.label=O3.tr(2809,N19.init.autoBegin.value),this.cbAutoFight.selected=!1,this.cbChall.selected=!1,this.teamBossData.dataProvider=this.teamBossDataCollection=new eui.ArrayCollection,this.teamBossData.itemRenderer=TeamBossDataItem,this.teamItemData.dataProvider=this.teamItemDataCollection=new eui.ArrayCollection,this.teamItemData.itemRenderer=ItemIcon,this.teamFormData.dataProvider=this.teamFormDataCollection=new eui.ArrayCollection,this.teamFormData.itemRenderer=TeamFormDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4303)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4304)),this.btnQuickJoin.label=O3.tr(4306),this.btnstartFight.label=O3.tr(4307),this.btnCreatRoom.label=O3.tr(4308)},t.prototype.FL27=function(t){this.teamBossDataCollection.itemUpdated(t)},t.prototype.ZT64=function(){for(var t=App.CM.gtM(O6.C23),e=this.teamBossDataCollection.source,i=0;i<e.length;i++)if(e[i].selected){t.hisId=i;break}},t.prototype.ZT65=function(t){for(var e=this.teamBossDataCollection.source,i=0;i<e.length;i++)e[i].selected=t==i;for(var s in e)App.DelayOptManager.ZE59(this,this.FL27,e[s])},t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.scrRoll.addEventListener(egret.TouchEvent.CHANGE,this.changeDong,this),this.btnCreatRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.creatRoom,this),this.btnQuickJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY22,this),this.cbChall.addEventListener(egret.Event.CHANGE,this.settingChall,this),this.cbAutoFight.addEventListener(egret.Event.CHANGE,this.settingFight,this),this.cbAutoJoin.addEventListener(egret.Event.CHANGE,this.settingJoin,this),this.btnstartFight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startFight,this),this.grpAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canClick,this);for(var t=[],e=N19.init.doubleTime.value.split(";"),i=0;i<e.length;i++)for(var s=e[i].split(","),o=0;o<s.length;o++)t.push(s[o]);var r=100*N19.init.threeRate.value;t.push(r);var n=O3.tr(2801,t[0],t[1],t[2],t[3],t[4]);this.lbTwoAward.textFlow=M18.HTP.parser(n);var a=P7.copyTab(N19.awardData);this.teamBossDataCollection.replaceAll(a),App.DelayOptManager.ZE59(this,this.addView),this.lv=O4.getLv()},t.prototype.closeSelf=function(){this.apF(O13.A39)},t.prototype.close=function(){s.prototype.close.call(this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.scrRoll.removeEventListener(egret.TouchEvent.CHANGE,this.changeDong,this),this.btnCreatRoom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.creatRoom,this),this.cbChall.removeEventListener(egret.Event.CHANGE,this.settingChall,this),this.cbAutoFight.removeEventListener(egret.Event.CHANGE,this.settingFight,this),this.cbAutoJoin.removeEventListener(egret.Event.CHANGE,this.settingJoin,this),this.btnQuickJoin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY22,this),this.btnstartFight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startFight,this),this.grpAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canClick,this),this.apF(O13.A34,0),this.ZF91(),this.teamFormDataCollection.removeAll(),this.teamBossDataCollection.removeAll(),this.teamItemDataCollection.removeAll(),this.grpAuto.touchChildren=!0,egret.Tween.removeTweens(this),this.lv=null},t.prototype.addView=function(){this.updateUI(),this.apF(O13.A34,1)},t.prototype.startFight=function(){var t=App.CM.gtM(O6.C23).teamData.teamId;this.apF(O13.A24,t),this.apF(O13.A4)},t.prototype.settingJoin=function(){App.CM.gtM(O6.C23).autoJoinBox=this.cbAutoJoin.selected,this.settingBack(),TG40.playClickEffect()},t.prototype.settingFight=function(){var t=App.CM.gtM(O6.C23);t.autoFightBox=this.cbAutoFight.selected,this.apF(O13.A36,1,t.autoFightBox?1:0),t.autoFightBox?this.apF(O13.A10):this.apF(O13.A9),TG40.playClickEffect(),this.interval()},t.prototype.interval=function(){var t=this;this.grpAuto.touchChildren=!1,egret.Tween.get(this).wait(500).call(function(){t.grpAuto.touchChildren=!0})},t.prototype.settingChall=function(){var t=App.CM.gtM(O6.C23);t.challBox=this.cbChall.selected,this.apF(O13.A36,2,t.challBox?1:0),t.challBox?this.apF(O13.A19):this.apF(O13.A18),TG40.playClickEffect(),this.interval()},t.prototype.settingBack=function(){App.CM.gtM(O6.B82);var t=parseInt(N19.init.autoAdd.value);this.cbAutoJoin.label=O3.tr(2808,t),this.iscbAutoJoin()},t.prototype.iscbAutoJoin=function(){this.cbAutoJoin.visible&&this.cbAutoJoin.selected?this.autoJoin():(this.closeHandler(this.autoJoinHander),this.autoJoinHander=null)},t.prototype.ZP75=function(t){if(t){var e=App.CM.gtM(O6.C23);this.cbAutoFight.label=O3.tr(2813,e.autoFightTime)}else this.cbAutoFight.label=O3.tr(2814)},t.prototype.ZF91=function(){this.closeHandler(this.autoJoinHander),this.autoJoinHander=null},t.prototype.ZY21=function(){var t=App.CM.gtM(O6.C23),e=null!=O4.getLv()?O4.getLv():this.lv,i=N19.awardData[t.hisId];if(i.level<=e)return!0;this.ZF91(),this.cbAutoJoin.selected=t.autoJoinBox=!1;var s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[i.level])),!1},t.prototype.ZM32=function(){var t=App.CM.gtM(O6.C23);return!!(t.openKeyList&&t.openKeyList.length>=t.hisId)||(P18.sDP(O3.tr(2812)),!1)},t.prototype.creatRoom=function(){if(this.ZT64(),!this.ZY21())return!1;if(!this.ZM32())return!1;var t=App.CM.gtM(O6.C23);if(t.isFight)this.ZF91(),this.cbAutoJoin.selected=t.autoJoinBox=!1,P18.sDP(O3.tr(2815));else{var e=N19.awardData[t.hisId];this.apF(O13.A21,e.level,t.autoFightBox?1:0,t.challBox?1:0)}},t.prototype.ZY22=function(){if(this.ZT64(),!this.ZY21())return!1;if(!this.ZM32())return!1;var t=App.CM.gtM(O6.C23);if(t.isFight)return this.ZF91(),this.cbAutoJoin.selected=t.autoJoinBox=!1,P18.sDP(O3.tr(2815)),!1;var e=N19.awardData[t.hisId];return this.apF(O13.A7,e.level,t.autoFightBox?1:0,t.challBox?1:0),!0},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C23);if(t.teamData){var e=N19.awardData[t.hisId];this.lbNow.text=O3.tr(2802,e.level),this.updateIndex(t.hisId),t.teamData&&0!=t.teamData.teamId?this.creatUI(t):(this.ZP77(!0),this.ZT66(!1))}else t.hisId=null,this.ZP77(!0),this.ZT66(!1),this.updateLoadUI(t);this.cbChall.selected=t.challBox,this.cbAutoFight.selected=t.autoFightBox,this.cbAutoJoin.selected=t.autoJoinBox,this.settingBack(),this.ZT67(t)},t.prototype.autoJoin=function(){var i=this,s=App.CM.gtM(O6.C23),o=this;if(!this.autoJoinHander){var r=parseInt(N19.init.autoAdd.value);this.cbAutoJoin.label=O3.tr(2808,r),this.autoJoinHander=App.K16.doTimer(1e3,r,function(){o.cbAutoJoin.label=O3.tr(2808,--r)},o.cbAutoJoin,function(){var t=parseInt(N19.init.awardTime.value),e=!1;s.earningsNum!=t&&(e=o.ZY22()),e||(i.cbAutoJoin.selected=s.autoJoinBox=!1),i.cbAutoJoin.label=O3.tr(2808,r),o.closeHandler(o.autoJoinHander),o.autoJoinHander=null})}},t.prototype.ZP76=function(){var t=App.CM.gtM(O6.C23);this.cbChall.label=O3.tr(2809,t.challTime)},t.prototype.closeHandler=function(t){t&&(App.K16.rBH(t),t=null);App.CM.gtM(O6.C23);this.cbAutoJoin.label=O3.tr(2808,N19.init.autoAdd.value)},t.prototype.updateIndex=function(t){var e=App.CM.gtM(O6.C23),i=App.CM.gtM(O6.B82),s=N19.awardData[t];e.teamData&&0!=e.teamData.teamId||(this.lbNow.text=O3.tr(2802,s.level)),!e.teamData&&s.level<=i.avatarInfo.l&&(e.hisId=t);var o=[],r=s.showaward.split(",");for(var n in r){var a=r[n],h=P7.copyTab(N12.gID(a+""));if(h){var p={itemData:{data:h},isBottom:!1};o.push(p)}}this.teamItemDataCollection.replaceAll(o),this.ZN52(t)},t.prototype.ZN52=function(t){var e=this;this.scrRoll.validateNow();var i=this.scrRoll.viewport,s=App.CM.gtM(O6.C23),o=(null!=O4.getLv()?O4.getLv():this.lv)>=N19.awardData[t].level;s.teamData?o||s.teamData||this.teamFormDataCollection.removeAll():this.apF(O13.A11,N19.awardData[t].level);var r=0;0<t&&t+1<this.teamBossDataCollection.source.length?r=t-1:t+1==this.teamBossDataCollection.source.length&&(r=t-2),r?egret.Tween.get(i).to({scrollH:185.8*r},100).call(function(){e.ZT65(t),e.changeDong(),egret.Tween.removeTweens(i)}):(this.ZT65(t),this.changeDong())},t.prototype.showNextData=function(t){var e=this.scrRoll.viewport;switch(t.target.name){case"-":0!=e.scrollH&&(e.scrollH=e.scrollH-this.scrRoll.width,e.scrollH<0&&(e.scrollH=0),this.btnRight.visible=!0),this.btnLeft.visible=0!=e.scrollH;break;case"+":Math.abs(e.scrollH)<e.contentWidth&&(e.scrollH=e.scrollH+this.scrRoll.width,e.scrollH>e.contentWidth-this.scrRoll.width&&(e.scrollH=e.contentWidth-this.scrRoll.width),this.btnLeft.visible=!0),this.btnRight.visible=Math.abs(e.scrollH+this.scrRoll.width)<e.contentWidth}},t.prototype.ZP77=function(t){this.btnCreatRoom.visible=this.cbAutoJoin.visible=this.btnQuickJoin.visible=t},t.prototype.canClick=function(){App.CM.gtM(O6.C23).isMyLeader()||P18.sDP(O3.tr(2819))},t.prototype.ZT66=function(t){this.btnstartFight.visible=this.grpAuto.visible=t},t.prototype.changeDong=function(){var t=this.scrRoll.viewport;this.btnLeft.visible=164<=t.scrollH,this.btnRight.visible=t.scrollH+t.width+164<=t.contentWidth},t.prototype.ZT67=function(t){var e=parseInt(N19.init.awardTime.value);this.lbEarningsNum.textFlow=M18.HTP.parse(O3.tr(4305,e-t.earningsNum,e))},t.prototype.updateLoadUI=function(t){App.CM.gtM(O6.C23);var e=null!=O4.getLv()?O4.getLv():this.lv,i=0;if(t.openKeyList.length)for(var s=0;s<N19.awardData.length;s++){if(N19.awardData[s].level>t.openKeyList[t.openKeyList.length-1]){i=N19.awardData[s].level>e?s-1:s;break}i||(i=N19.awardData.length-1)}this.updateIndex(i),this.ZT67(t)},t.prototype.ZT68=function(t){var e=[];t.roomList&&(e=t.roomList.concat()),this.teamFormDataCollection.replaceAll(e)},t.prototype.creatUI=function(t){var e=[];if(t.teamData&&(e=t.teamData.members.concat()),this.teamFormDataCollection.replaceAll(e),this.ZP77(!t.teamData),this.ZT66(!!t.teamData),this.iscbAutoJoin(),t.teamData){var i=t.isMyLeader();(this.grpAuto.touchChildren=i)||(this.ZP77(!1),this.grpAuto.visible=!0,this.btnstartFight.visible=!1),this.boxState(t)}},t.prototype.boxState=function(t){this.cbAutoFight.selected=!!t.teamData.ff,this.cbChall.selected=-1!=t.teamData.cd},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH18)switch(e){case P4.W69:this.ZT67(t);break;case P4.Y6:this.boxState(t);break;case P4.X30:this.updateLoadUI(t),this.ZT68(t),this.ZP77(!0),this.ZT66(!1);break;case P4.U92:this.ZT68(t);break;case P4.X29:case P4.X93:t.teamData||this.ZT68(t);break;case P4.W68:case P4.T74:case P4.V95:case P4.Y26:case P4.X91:case P4.U93:this.creatUI(t)}switch(e){case"renewTime":this.ZP75(!1);break;case"renewchall":case"challTime":this.ZP76();break;case"fightTime":this.ZP75(!0)}},t}(BaseEuiView);__reflect(TeamView.prototype,"TeamView"),function(t){var e=function(){};t.TeamVo=e,__reflect(e.prototype,"team.TeamVo");var i=function(){};t.TeamMemberVo=i,__reflect(i.prototype,"team.TeamMemberVo");var s=function(){};t.TeamRoomVo=s,__reflect(s.prototype,"team.TeamRoomVo")}(team||(team={})),function(t){var e=function(){function n(){}return n.FK35=function(t){var e=t.crossbattle_init,i=t.crossbattle_cheer,s=t.crossbattle_betsreward,o=t.crossbattle_shop;for(var r in n.topRewards=[{r:1,rw:e.top1Reward.value},{r:2,rw:e.top2Reward.value},{r:3,rw:e.top3Reward.value},{r:4,rw:e.top4Reward.value},{r:8,rw:e.top8Reward.value},{r:16,rw:e.top16Reward.value}],n.topRewardsSpe=[{r:1,rw:e.top1RewardSpe.value},{r:2,rw:e.top2RewardSpe.value},{r:3,rw:e.top3RewardSpe.value},{r:4,rw:e.top4RewardSpe.value},{r:8,rw:e.top8RewardSpe.value},{r:16,rw:e.top16RewardSpe.value}],n.betsReward=s,n.inspires=i,n.cheerDiscount=parseFloat(e.cheerDiscount.value),n.recePoint=e.recePoint.value,n.quaBuyCost=P7.str2kv1(e.quaBuyCost.value),n.adoreReward=P7.str2kv(e.adoreReward.value),n.group1=e.group1.value,n.group2=e.group2.value,n.openLv=parseFloat(e.openLv.value),o)1==o[r].type?this.listShop1[r]=new CrossTeamShopVo(o[r]):this.listShop2[r]=new CrossTeamShopVo(o[r])},n.FL67=function(t,e){var i=0==t?n.topRewards:n.topRewardsSpe;if(0<e)for(var s=0;s<i.length;s++)if(e<=i[s].r)return P7.str2kv(i[s].rw);return[]},n.FI99=function(t){return 1==t?this.group1:this.group2},n.isOpen=function(){return O4.getLv()>=n.openLv},n.cheerDiscount=1,n.listShop1={},n.listShop2={},n}();t.Config=e,__reflect(e.prototype,"UltimateBattle.Config")}(UltimateBattle||(UltimateBattle={})),function(t){var e=function(){function t(){}return t.OPEN=1001,t.OPEN_LINEUP=1002,t.OPEN_SIGN=1003,t.CHALLENGE=1004,t.LEVEL_UPDATE=1005,t.LOAD_STATE=2001,t.LOAD_STATE_RES=2002,t.SELECT=3e3,t.SELECT_TYPE_HERO=3001,t.SELECT_TYPE_PARTNER=3002,t.SELECT_TYPE_FAIRY=3003,t.SELECTED="SELECTED",t.UPDATE_LINEUP=4001,t}();t.Const=e,__reflect(e.prototype,"UltimateBattle.Const")}(UltimateBattle||(UltimateBattle={})),function(l){var t=function(s){function t(){var t=s.call(this)||this;App.VM.register(O7.F55,"UltimateBattleView",t,K17.UI_Main_TOP),App.VM.register(O7.D82,"UltimateBattleRewardView",t,K17.UI_Main_TOP),App.VM.register(O7.D83,"UltimateBattleLineupView",t,K17.UI_Main_TOP),App.VM.register(O7.F54,"UltimateBattleSignView",t,K17.UI_Main_TOP),App.VM.register(O7.B18,"UltimateBattleSelectHeroView",t,K17.UI_Main_TOP),App.VM.register(O7.D84,"UltimateBattleReportView",t,K17.UI_Main_TOP),App.VM.register(O7.F56,"UltimateBattleShopView",t,K17.UI_Main_TOP),App.VM.register(O7.D5,"UltimateBattleShopBuyView",t,K17.UI_Main_TOP),App.VM.register(O7.D7,"UltimateBattleWorshipView",t,K17.UI_Main_TOP),t.rgF(l.Const.OPEN,t.open,t),t.rgF(l.Const.OPEN_LINEUP,t.GX93,t),t.rgF(l.Const.OPEN_SIGN,t.openSign,t),t.rgF(l.Const.SELECT,t.GX94,t),t.rgF(l.Const.UPDATE_LINEUP,t.GV29,t),t.rgF(l.Const.CHALLENGE,t.challenge,t),t.rgF(l.Const.LEVEL_UPDATE,t.GW74,t);var e=new l.Model(t);e.aLV(O7.F55),e.aLV(O7.F54),e.aLV(O7.A32),e.aLV(O7.A1),e.aLV(O7.B18),e.aLV(O7.D82),e.aLV(O7.D83),e.aLV(O7.I85),e.aLV(O7.D84),e.aLV(O7.A35),e.aLV(O7.F56),e.aLV(O7.D5),e.aLV(O7.D7),e.aLV(O7.I63),e.aLV(O7.I64);var i=t.proxy=new l.Proxy(t);return t.rgF(l.Const.LOAD_STATE,i.loadState,i),t.rgF(l.Const.LOAD_STATE_RES,t.GU20,t),t.rgF(P4.R20,i.load,i),t.rgF(P4.G1,i.loadGroup,i),t.rgF(P4.P53,i.joinGroup,i),t.rgF(P4.P58,i.inspire,i),t.rgF(P4.N32,i.flower,i),t.rgF(P4.E62,i.loadFight,i),t.rgF(P4.HH65,i.info,i),t.rgF(P4.HH67,i.look,i),t.rgF(P4.G3,i.quit,i),t.rgF(P4.A31,i.ZJ46,i),t.rgF(P4.C63,i.loadWorship,i),t.rgF(P4.L57,i.worship,i),t.rgF(P4.HH69,i.loadShop,i),t.rgF(P4.J51,i.shopBuy,i),t}return __extends(t,s),t.prototype.open=function(){if(l.Config.isOpen()){var t=this.gtM();(2==t.st&&t.g||3==t.st||4==t.st||5==t.st||6==t.st||7==t.st)&&!t.isInitFight?(t.loadFightOpen=!0,this.apF(P4.E62,t.viewState.g||t.g||1)):P7.isGetView(O7.F55)&&App.VM.open(O7.F55)}else P18.sDP(O3.tr(8373,l.Config.openLv))},t.prototype.GX93=function(){App.VM.open(O7.D83)},t.prototype.openSign=function(){App.VM.open(O7.F54)},t.prototype.GX94=function(t,e){var i=[],s=[],o=this.gtM(),r=3,n="h$0";e==l.Const.SELECT_TYPE_HERO||(e==l.Const.SELECT_TYPE_PARTNER?(r=2,n="p$0"):e==l.Const.SELECT_TYPE_FAIRY&&(n="m$0"));for(var a=1;a<=r;a++){var h=o.sq[t][M18.FM18(n,a)];i.push(h||0)}for(var p=1;p<=3;p++)if(p!=t)for(a=1;a<=r;a++){(h=o.sq[p][M18.FM18(n,a)])&&s.push(h)}App.VM.open(O7.B18,e,i,s)},t.prototype.challenge=function(){var t=this.gtM();t.g&&(t.a.cn<=0?Log.trace("次数不足"):this.proxy.challenge())},t.prototype.GW74=function(){if(l.Config.isOpen()){var t=App.CM.gtM(O6.C13);t&&t.notifyView(this.gtM())}},t.prototype.GV29=function(t,e,i){var s=this.gtM(),o=3,r="h$0";e==l.Const.SELECT_TYPE_HERO||(e==l.Const.SELECT_TYPE_PARTNER?(o=2,r="p$0"):e==l.Const.SELECT_TYPE_FAIRY&&(r="m$0"));for(var n=P7.copyTab(s.sq[t]||{}),a=1,h=0,p=void 0;a<=o;a++,h++)p=M18.FM18(r,a),i[h]?n[p]=i[h]:delete n[p];this.proxy.saveLineup(t,JSON.stringify(n))},t.prototype.GU20=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body.st;1<i?(2==i&&e.clearWorship(),e.isInit||(this.proxy.register(),this.apF(P4.R20),this.apF(P4.C63))):(0<=i&&this.apF(P4.C63),App.VM.close(O7.D84),App.VM.close(O7.F54),App.VM.close(O7.B18),App.VM.close(O7.F55),App.VM.close(O7.F56),e.reset(),this.proxy.unregister()),e.update(t.body,!0)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.loadRes=function(t){200==t.head.state?this.gtM().init(t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV30=function(t){if(200==t.head.state){var e=this.gtM();if(e.update(t.body,!0,t.head.protoType),e.loadFightOpen&&P7.isGetView(O7.F55)&&l.Config.isOpen()){App.VM.open(O7.F55);var i=void 0,s=e.viewState;if(i=App.VM.gOV(O7.A1)){var o=i;s.view==O7.A1&&(o.ckOnlyMe.selected=s.onlyself,s.onlyself&&o.onChangeOnly(),o.listBattle.itemList.scrollV=s.scrollY,App.VM.open(O7.D84,s.did,s.g))}else(i=App.VM.gOV(O7.A35))&&s.view==O7.A35&&App.VM.open(O7.D84,s.did,s.g);e.viewState={},e.loadFightOpen=!1}}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV31=function(t){200==t.head.state?(P18.sDP(O3.tr(8360)),this.gtM().update(t.body,!0,t.head.protoType)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV32=function(t){200==t.head.state?this.gtM().update(t.body,!0,t.head.protoType):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.squadRes=function(t){if(200==t.head.state){var e,i=this.gtM(),s=t.body,o=s.pos,r=s.squ;i.update({squ:(e={},e[o]=r,e)},!0,t.head.protoType)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GU62=function(t){if(200==t.head.state){var e=this.gtM();e.update(t.body,!1),e.fightIndex=0;var i=App.VM.gOV(O7.D84);i&&i.viewSave(),this.GY74()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY74=function(){var t=this,e=this.gtM(),i=e.fightIndex;if(e.rst&&e.rst[i]){var s=e.rst[i];App.CM.apF(O6.B99,N1.A11,s,{needResult:!1,type:P15.A26},function(){e.fightIndex+=1,App.K16.doFrame(2,1,t.GY74,t)},this)}else delete e.rst,e.fightIndex=0,e.notify(!0),this.open()},t.prototype.GG41=function(t){if(200==t.head.state){var e=this.gtM();e.a.cn=t.body.cn,e.update(t.body,!0,t.head.protoType)}else 215==t.head.state?P7.FA78():App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX54=function(t){200==t.head.state?this.gtM().update(t.body,!0,t.head.protoType):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY45=function(t){if(200==t.head.state){var e=this.gtM(),i=t.body,s=i.d,o=i.fr,r=i.ty,n=(i.left,i.rig,i.fg);e.m[n].fr=o,e.m[n].fty=r,App.CM.apF(O6.A43,P4.HH65,s,n),e.update({},!0,t.head.protoType)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.infoRes=function(t){if(200!=t.head.state)return App.VM.close(O7.D84),void App.CM.apF(O6.B87,L10.A4,t);this.gtM().update(t.body,!0,t.head.protoType,t.body)},t.prototype.lookRes=function(t){var e=this;if(200==t.head.state){var i=this.gtM(),s=t.body.fr,o=App.VM.gOV(O7.D84);o&&o.viewSave(),App.CM.apF(O6.B99,N1.A11,s,{needResult:!1,type:P15.A6},function(){e.open()},this),i.update(t.body,!0,t.head.protoType)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GY66=function(t){200==t.head.state?this.gtM().update(t.body,!0,t.head.protoType,t.body):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.pPush=function(t){if(200==t.head.state){var e=this.gtM();e.ft=2,e.update(t.body,!0,t.head.protoType,t.body)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW86=function(t){200==t.head.state?(this.gtM().update(t.body,!0,t.head.protoType),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX52=function(t){200==t.head.state?(this.gtM().update(t.body,!0,t.head.protoType),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW75=function(t){if(200==t.head.state){var e=this.gtM();e.g?e.update(t.body,!1):e.clearWorship(),e.notify(t.head.protoType)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP80=function(t){if(200==t.head.state){var e=this.gtM();e.clearWorship(),e.notify(t.head.protoType)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR65=function(t){200==t.head.state?this.gtM().update(t.body,!0,t.head.protoType):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX95=function(t){200==t.head.state?this.gtM().notify(t.head.protoType):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW20=function(t){200==t.head.state?this.gtM().updateShop(t.body,!0,t.head.protoType):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW97=function(t){200==t.head.state?(this.gtM().updateShop(t.body,!0,t.head.protoType),P5.sIs(t.body.ob)):App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);l.Controller=t,__reflect(t.prototype,"UltimateBattle.Controller")}(UltimateBattle||(UltimateBattle={})),function(e){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.isInit=!1,e.isInitFight=!1,e.loadFightOpen=!1,e.dailyOpen=!0,e.reset(),e}return __extends(t,i),t.prototype.clearWorship=function(){this.iw=0,this.wt=0,delete this.fu},t.prototype.reset=function(){this.isInit=!1,delete this.role,delete this.g,delete this.rst,delete this.dmg,delete this.g,delete this.a,delete this.ft,delete this.stage,this.gn={1:0,2:0},this.p={},this.m={},this.sq={},this.viewState={},this.stage=1,this.shop=this.shop?this.shop.reset():new e.ShopVo},t.prototype.init=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.isInit=!0,this.aid=O4.getAid(),this.update.apply(this,[t,e].concat(i))},t.prototype.update=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];for(var o in this.a=P7.getValue(t.a,this.a),this.sq=P7.getValue(t.sq,this.sq),t.squ)this.sq[o]=t.squ[o];this.ins=P7.getValue(t.ins,this.ins),this.g=P7.getValue(t.g,this.g),this.st=P7.getValue(t.st,this.st),this.cd=P7.getValue(t.cd,this.cd),this.gn=P7.getValue(t.gn,this.gn),this.out=P7.getValue(t.out,this.out),this.rst=P7.getValue(t.rst,this.rst),this.dmg=P7.getValue(t.dmg,this.dmg),this.ft=P7.getValue(t.ft,this.ft),this.fu=P7.getValue(t.fu,this.fu),this.iw=P7.getValue(t.iw,this.iw),this.wt=P7.getValue(t.wt,this.wt),t.m&&(this.m[t.m.gid]=t.m,14<t.m.dl.length?this.m[t.m.gid].dl[15].win?this.stage=5:this.stage=4:12<t.m.dl.length?this.stage=3:8<t.m.dl.length?this.stage=2:0<t.m.dl.length?this.stage=1:this.stage=0);var r=0;if(t.p&&(this.p[t.p.gid]=t.p,r=t.p.gid),t.la&&this.p[t.gid]){for(var o in this.p[t.gid].o)if(this.p[t.gid].o[o].aid==t.la.aid){this.p[t.gid].o[o]=t.la;break}r=t.gid}if(t.ra){for(var o in this.p[t.gid].o)if(this.p[t.gid].o[o].aid==t.ra.aid){this.p[t.gid].o[o]=t.ra;break}r=t.gid}r&&this.sortMember(r),t.dv&&this.p[t.gid]&&this.p[t.gid].mv.push(t.dv),e&&this.notify.apply(this,i)},t.prototype.updateShop=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.shop.update(t),e&&this.notify.apply(this,i)},t.prototype.sortMember=function(t){for(var e in this.p[t].o.sort(function(t,e){return t.g==e.g?t.w==e.w?0==t.au?1:t.au-e.au:e.w-t.w:e.g-t.g}).forEach(function(t,e){return t.r=e+1}),this.p[t].o)if(this.p[t].o[e].aid==this.aid){this.role=this.p[t].o[e];break}},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.notifyView.apply(this,[this].concat(t))},t.prototype.canWorship=function(){return!!e.Config.isOpen()&&(null!=this.fu&&0==this.iw)},t.prototype.viewSave=function(t){this.viewState=t||{}},__decorate([Common.timeRefresh()],t.prototype,"cd",void 0),t}(TG79);e.Model=t,__reflect(t.prototype,"UltimateBattle.Model")}(UltimateBattle||(UltimateBattle={})),function(o){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.N31,t.GU20,t),e.rSM(P4.L58,t.GX52,t),e.rSM(P4.C64,t.GW86,t),e.rSM(P4.HH71,t.GW75,t),e.rSM(P4.A73,t.GP80,t),e}return __extends(t,i),t.prototype.register=function(){var t=this._controller;this.rSM(P4.R21,t.loadRes,t),this.rSM(P4.P54,t.GV31,t),this.rSM(P4.G2,t.GV32,t),this.rSM(P4.P56,t.squadRes,t),this.rSM(P4.HH62,t.GU62,t),this.rSM(P4.A32,t.GG41,t),this.rSM(P4.P59,t.GX54,t),this.rSM(P4.N33,t.GY45,t),this.rSM(P4.HH66,t.infoRes,t),this.rSM(P4.HH68,t.lookRes,t),this.rSM(P4.E63,t.GV30,t),this.rSM(P4.B80,t.GY66,t),this.rSM(P4.J53,t.pPush,t),this.rSM(P4.J50,t.GX95,t),this.rSM(P4.HH70,t.GW20,t),this.rSM(P4.J52,t.GW97,t)},t.prototype.unregister=function(){var t=this._controller;this.ZM57(P4.R21,t.loadRes,t),this.ZM57(P4.P54,t.GV31,t),this.ZM57(P4.G2,t.GV32,t),this.ZM57(P4.P56,t.squadRes,t),this.ZM57(P4.HH62,t.GU62,t),this.ZM57(P4.A32,t.GG41,t),this.ZM57(P4.P59,t.GX54,t),this.ZM57(P4.N33,t.GY45,t),this.ZM57(P4.HH66,t.infoRes,t),this.ZM57(P4.HH68,t.lookRes,t),this.ZM57(P4.E63,t.GV30,t),this.ZM57(P4.B80,t.GY66,t),this.ZM57(P4.J53,t.pPush,t),this.ZM57(P4.J50,t.GX95,t),this.ZM57(P4.HH70,t.GW20,t),this.ZM57(P4.J52,t.GW97,t)},t.prototype.loadState=function(){var s=this;return new Promise(function(e,t){var i={};i.type=P4.F98,i.body={},s.rSMO(P4.F99,function(t){s.apF(o.Const.LOAD_STATE_RES,t),e("加载巅峰对决状态")},s),s.sSM(i)})},t.prototype.load=function(){this.sSM({type:P4.R20,body:{}})},t.prototype.joinGroup=function(t){this.sSM({type:P4.P53,body:{gid:t}})},t.prototype.loadGroup=function(){this.sSM({type:P4.G1,body:{}})},t.prototype.saveLineup=function(t,e){this.sSM({type:P4.P55,body:{pos:t,sq:e}})},t.prototype.challenge=function(){this.sSM({type:P4.HH61,body:{}})},t.prototype.ZJ46=function(){this.sSM({type:P4.A31,body:{}})},t.prototype.inspire=function(t){this.sSM({type:P4.P58,body:{id:t}})},t.prototype.flower=function(t,e,i){this.sSM({type:P4.N32,body:{id:e,did:t,type:i}})},t.prototype.quit=function(){this.sSM({type:P4.G3,body:{}})},t.prototype.look=function(t){this.sSM({type:P4.HH67,body:{fid:t}})},t.prototype.info=function(t,e){this.sSM({type:P4.HH65,body:{gid:e,did:t}})},t.prototype.loadFight=function(t){this.sSM({type:P4.E62,body:{gid:t}})},t.prototype.worship=function(){this.sSM({type:P4.L57,body:{}})},t.prototype.loadWorship=function(){this.sSM({type:P4.C63,body:{}})},t.prototype.loadShop=function(){this.sSM({type:P4.HH69,body:{}})},t.prototype.shopBuy=function(t,e){this.sSM({type:P4.J51,body:{id:t,num:e}})},t}(TG80);o.Proxy=t,__reflect(t.prototype,"UltimateBattle.Proxy")}(UltimateBattle||(UltimateBattle={})),function(i){var t=function(){function t(){}return t.FK19=function(t){return 1==t?O3.tr(8203):2==t?O3.tr(8204):3==t?O3.tr(8205):4==t?O3.tr(8206):t<=8?O3.tr(8207,8):t<=16?O3.tr(8207,16):""},t.FL96=function(){var t=App.CM.gtM(O6.A43),e=0;if(t&&t.isInit&&t.fightIndex<=3&&t.rst)for(var i=0;i<t.fightIndex;i++)e+=t.dmg[i];return e},t.getListShop1=function(){var t=[];for(var e in i.Config.listShop1)t.push(i.Config.listShop1[e]);return t.sort(this.sortShop),t},t.getListShop2=function(){var t=[];for(var e in i.Config.listShop2)t.push(i.Config.listShop2[e]);return t.sort(this.sortShop),t},t.sortShop=function(t,e){return t.overType-e.overType},t.getShopTime=function(){return App.CM.gtM(O6.A43).shop.cd},t}();i.Utils=t,__reflect(t.prototype,"UltimateBattle.Utils")}(UltimateBattle||(UltimateBattle={}));var UltimateBattleHeroIconItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="UltimateBattleIconHeroSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgIcon.source=this.data.icon,this.imgIcon.validateNow(),this.imgBg.source=this.data.bg,this.lbName.textFlow=M18.FG71(this.data.name),this.gpState.visible=1==this.data.state,this.lbState.text=O3.tr(4832)},t}(eui.ItemRenderer);__reflect(UltimateBattleHeroIconItemView.prototype,"UltimateBattleHeroIconItemView");var UltimateBattleLineupInspireItemView=function(o){function t(){var t=o.call(this)||this;return t.skinName="UltimateBattleInspireItemSkin",t}return __extends(t,o),t.prototype.childrenCreated=function(){o.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn.label=O3.tr(8228),this.dgAtrs.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgAtrs.itemRenderer=CrossTeamInspireAttrItemView},t.prototype.dataChanged=function(){var i=this;if(o.prototype.dataChanged.call(this),this.labName.text=this.data.name+"Lv."+this.data.lv,this.dataSource.source&&this.dataSource.source.length){if(this.dataSource.source[0].lv!=this.data.lv){for(var t=0,e=this.dataSource.source;t<e.length;t++){e[t].lv=this.data.lv}this.dataSource.refresh(),this.dgAtrs.validateNow()}}else this.dataSource.source=this.data.attrs.map(function(t){var e=K18.attribute[t.k];return{lv:i.data.lv,attr:{k:t.k,v:t.v,show:e.show}}});var s="<font color=#feeedf>$1</font>";1<=this.data.discount?this.labTag.width=0:this.labTag.width=NaN,P16.FL31(this.gConsume,this.data.coin,Math.ceil(this.data.price*this.data.discount),{lackTextTemplate:s,textTemplate:s,tag:"<font color=#e5c7ac>"+this.data.price+"</font>"})},t.prototype.remove=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dataSource.removeAll()},t.prototype.onClick=function(){App.CM.apF(O6.A43,P4.P58,this.data.id)},t}(eui.ItemRenderer);__reflect(UltimateBattleLineupInspireItemView.prototype,"UltimateBattleLineupInspireItemView");var UltimateBattleLineupItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="UltimateBattleLineupItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dgHero.dataProvider=this.heroList=new eui.ArrayCollection,this.dgHero.itemRenderer=UltimateBattleHeroIconItemView,this.dgPartner.dataProvider=this.partnerList=new eui.ArrayCollection,this.dgPartner.itemRenderer=UltimateBattleHeroIconItemView,this.dgFairy.dataProvider=this.fairyList=new eui.ArrayCollection,this.dgFairy.itemRenderer=UltimateBattleHeroIconItemView,this.btn1.name=UltimateBattle.Const.SELECT_TYPE_HERO,this.btn2.name=UltimateBattle.Const.SELECT_TYPE_PARTNER,this.btn3.name=UltimateBattle.Const.SELECT_TYPE_FAIRY},t.prototype.remove=function(){this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.fairyList.removeAll(),this.partnerList.removeAll(),this.heroList.removeAll()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.updateHero(),this.ZY23(),this.updateFairy(),this.labTitle.textFlow=M18.FG71(this.data.title)},t.prototype.updateFairy=function(){for(var t=[],e=N12.getBox(1),i=1;i<=3;i++){var s=TE91.FF17(this.data.lineup["m"+i]);if(s){var o=s.id,r=s.icon,n=s.quality;s.name;t.push({id:o,name:"",icon:r,bg:N12.getBox(n),state:0})}else t.push({id:0,name:"",icon:"",bg:e,state:0})}this.fairyList.source=t},t.prototype.ZY23=function(){for(var t=[],e=N12.getBox(1),i=1;i<=2;i++){var s=M11.getWomen(this.data.lineup["p"+i]);if(s){var o=s.id,r=s.icon,n=s.quality;s.name,s.power;t.push({id:o,name:"",icon:r,bg:N12.getBox(n),state:0})}else t.push({id:0,name:"",icon:"",bg:e,state:0})}this.partnerList.source=t},t.prototype.updateHero=function(){for(var t=App.CM.gtM(O6.C12),e=[],i=N12.getBox(1),s=1;s<=3;s++){var o=t.heroList[this.data.lineup["h"+s]];if(o){var r=o.id,n=o.icon,a=o.quality;o.name,o.power;e.push({id:r,name:"",icon:n,bg:N12.getBox(a),state:0})}else e.push({id:0,name:"",icon:"",bg:i,state:0})}this.heroList.source=e},t.prototype.onClick=function(t){var e=parseInt(t.currentTarget.name);App.CM.apF(O6.A43,UltimateBattle.Const.SELECT,this.data.index,e),App.VM.gOV(O7.B18).once(UltimateBattle.Const.SELECTED,this.GV29,this)},t.prototype.GV29=function(t){var e=t.data,i=e.type,s=e.cur;App.CM.apF(O6.A43,UltimateBattle.Const.UPDATE_LINEUP,this.data.index,i,s)},t}(eui.ItemRenderer);__reflect(UltimateBattleLineupItemView.prototype,"UltimateBattleLineupItemView");var UltimateBattlePreliminaryItemView=function(e){function t(){var t=e.call(this)||this;return t.imgScale=.7,t.skinName="UltimateBattlePreliminaryItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data.index==Number.MAX_VALUE;this.icon1.visible=this.icon2.visible=this.lab1.visible=this.lab2.visible=this.btn.visible=this.imgVs.visible=!t,this.labState.visible=this.labWin1.visible=this.labWin2.visible=!1,t?(this.labState.visible=!0,this.imgBg.source="v1_bg_kelashen02bc_png",this.labState.visible=!0,this.labState.textFlow=M18.FG71(this.data.name)):(this.imgBg.source="v1_bg_kelashen02b_png",this.lab1.text=this.data.name,this.icon1.icon.source=this.data.icon,this.lab2.text=this.data.enemyName,this.icon2.icon.source=this.data.enemyIcon,this.data.win?(this.labWin1.visible=!0,this.labWin1.textFlow=O3.tr2(7986,this.data.wins)):(this.labWin2.visible=!0,this.labWin2.textFlow=O3.tr2(7986,this.data.enemyWins))),this.ZU73()},t.prototype.ZP78=function(){egret.Tween.removeTweens(this.group),egret.Tween.removeTweens(this.imgVs),egret.Tween.removeTweens(this),this.group.x=0,this.imgVs.scaleX=this.imgVs.scaleY=this.imgScale,this.height=90},t.prototype.ZU73=function(){this.ZP78();var t=P6.getTime()-this.data.clock,e=t<0?Math.abs(t):0,i=Math.max(0,t/860);if(i<1&&0<=i){this.imgVs.scaleX=this.imgVs.scaleY=.64,this.group.x=this.group.width,this.height=0,this.labWin1.visible=this.labWin2.visible=!1;var s=this.imgScale;egret.Tween.get(this).wait(e).to({height:90},300).setPosition(860*i),egret.Tween.get(this.group).wait(e).wait(300).to({x:0},400).setPosition(860*i),egret.Tween.get(this.imgVs).wait(e).wait(300).wait(400).to({scaleY:1.2*s,scaleX:1.2*s},80).to({scaleY:1*s,scaleX:1*s},80).call(this.updateLabWin,this).setPosition(860*i)}},t.prototype.updateLabWin=function(){this.data.index!=Number.MAX_VALUE&&((this.data.win?this.labWin1:this.labWin2).visible=!0)},t.prototype.remove=function(){this.ZP78(),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){if(App.CM.gtM(O6.B99).isSpFighting)return P18.sDP(O3.tr(5301)),!1;App.CM.apF(O6.A42,P4.C59,this.data.fightId)},t}(eui.ItemRenderer);__reflect(UltimateBattlePreliminaryItemView.prototype,"UltimateBattlePreliminaryItemView");var UltimateBattleRewardItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="UltimateBattleRewardItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rw.dataProvider=this.dataSource=new eui.ArrayCollection,this.rw.itemRenderer=ItemIcon,this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.labRank.textFlow=M18.FG71(this.data.rank),this.labSpecial.textFlow=M18.FG71(this.data.v),this.dataSource.source=this.data.rw.map(function(t){var e=t.k,i=t.v;return{itemData:{data:N12.gID(e),ct:i},isBottom:!1}})},t.prototype.remove=function(){this.dataSource.removeAll()},t}(eui.ItemRenderer);__reflect(UltimateBattleRewardItemView.prototype,"UltimateBattleRewardItemView");var UltimateBattleShopHonorItemView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.buyReq=function(t){t.controllerConst=O6.A43,t.reqConst=P4.J51,App.VM.open(O7.D5,t)},e.prototype.dataChanged=function(){var t=N12.gID(this.data.goodsData.k),e=App.CM.gtM(O6.A43).shop.rn,i={itemData:{data:t,ct:this.data.goodsData.v},isBottom:!0};this.itemIcon.data=i,t=N12.gID(this.data.priceData.k),this.imgItem.setData(t),this.lbNum.textFlow=M18.HTP.parser(O3.tr(7185,this.data.priceData.v)),this.lbBuy.visible=!0,e&&e<=this.data.times?-1==this.data.limitnum?(P16.sGF(this.btnBuy,!1),this.btnBuy.enabled=!0,this.lbBuy.visible=!1):(this.data.overNum<=0?this.lbBuy.textFlow=M18.HTP.parser(O3.tr(7266)):this.lbBuy.textFlow=M18.HTP.parser(O3.tr(7263,this.data.overNum,this.data.limitnum)),P16.sGF(this.btnBuy,this.data.overNum<=0),this.btnBuy.enabled=0<this.data.overNum):(P16.sGF(this.btnBuy,!0),this.btnBuy.enabled=!1,this.lbBuy.textFlow=M18.HTP.parser(O3.tr(7265,this.data.times)))},e}(CrossTeamShopHonorItemView);__reflect(UltimateBattleShopHonorItemView.prototype,"UltimateBattleShopHonorItemView");var UltimateBattleShopItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName=CrossTeamShopItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickBuy,this)},t.prototype.onRemoveStage=function(){this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickBuy,this),this.itemIcon.close(),this.itemIcon=null,this.grpIcon.removeChildren()},t.prototype.onclickBuy=function(){var t={};t.id=this.data.index;var e=this.data.goodsData.k,i=this.data.goodsData.v;t.itemname=N12.FK5(e),t.bg=N12.FL5(e),t.icon=N12.FJ86(e),t.itemid=e,t.itemnum=i;var s=N12.gID(e);t.desc=s.desc,t.costId=this.data.priceData.k,t.costIcon=N12.FJ86(this.data.priceData.k),t.costNum=this.data.priceData.v,t.cost="x"+this.data.priceData.v,t.limitnum=this.data.limitnum,t.batchnum=this.data.batchnum,t.times=M18.HTP.parser(O3.tr(7265,this.data.times)),t.soldout=1,t.lock=this.btnBuy.enabled?0:1,t.txt=O3.tr(2510),t.controllerConst=O6.B35,t.reqConst=HH17.A60,t.buyTime=this.data.overNum,App.CM.apF(O6.B35,HH17.A33,t)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.btnBuy.label=O3.tr(7262),this.lbStr1.textFlow=M18.HTP.parser(O3.tr(7264)),this.itemIcon=new ItemIcon,this.grpIcon.addChild(this.itemIcon)},t.prototype.dataChanged=function(){var t=N12.gID(this.data.goodsData.k),e=App.CM.gtM(O6.B35).myRanking,i={itemData:{data:t,ct:this.data.goodsData.v},isBottom:!0};this.itemIcon.data=i,t=N12.gID(this.data.priceData.k),this.imgItem.setData(t),this.lbNum.textFlow=M18.HTP.parser(O3.tr(7185,this.data.priceData.v)),this.lbBuy.visible=!0,e&&e<=this.data.times?-1==this.data.limitnum?(P16.sGF(this.btnBuy,!1),this.btnBuy.enabled=!0,this.lbBuy.visible=!1):(this.data.overNum<=0?this.lbBuy.textFlow=M18.HTP.parser(O3.tr(7266)):this.lbBuy.textFlow=M18.HTP.parser(O3.tr(7263,this.data.overNum,this.data.limitnum)),P16.sGF(this.btnBuy,this.data.overNum<=0),this.btnBuy.enabled=0<this.data.overNum):(P16.sGF(this.btnBuy,!0),this.btnBuy.enabled=!1,this.lbBuy.textFlow=M18.HTP.parser(O3.tr(7265,this.data.times)))},t}(eui.ItemRenderer);__reflect(UltimateBattleShopItemView.prototype,"UltimateBattleShopItemView");var UltimateBattleShopPlainItemView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.buyReq=function(t){t.controllerConst=O6.A43,t.reqConst=P4.J51,App.VM.open(O7.D5,t)},e}(CrossTeamShopPlainItemView);__reflect(UltimateBattleShopPlainItemView.prototype,"UltimateBattleShopPlainItemView");var UltimateBattleBetsRewardView=function(e){function t(){var t=e.call(this)||this;return t.skinName=CrossTeamBetsRewardItemSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.onAddToStage=function(){this.btnSelfRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startYa,this)},t.prototype.onRemoveStage=function(){this.btnSelfRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startYa,this)},t.prototype.startYa=function(){var t,e=this.data.callback,i=N12.gID(this.data.cost[0]);if((t=75e3==i.id?P10.A2:P10.A1)==P10.A1){var s=parseInt(this.data.cost[1]);if(N12.giC(N12.itemId.bindGold)<s)return void P18.sDP(O3.tr(5354))}var o={handler:e,cost:parseInt(this.lbCost.text),costTp:t,content:O3.tr(3403,this.lbCost.text+i.name,this.data.name)};App.VM.open(O7.C54,o)},t.prototype.initUI=function(){this.lbWin.text=this.lbLose.text=O3.tr(3383),this.lbYa.text=O3.tr(3506)},t.prototype.dataChanged=function(){var t=0<this.data.fr;this.btnSelfRai.enabled=!t,P16.sGF(this.btnSelfRai,t),this.grpYa.visible=!!t&&this.data.id==this.data.fty,this.imgCost.source=N12.FJ86(this.data.cost[0]),this.lbCost.text=this.data.cost[1],this.btnSelfRai.label=this.data.name;for(var e=0;e<this.data.win.length;e++){var i=N12.gID(this.data.win[e][0]);this["imgWin"+e].setData(i),this["lbWin"+e].text=this.data.win[e][1]}for(e=0;e<this.data.lose.length;e++){i=N12.gID(this.data.lose[e][0]);this["imgLose"+e].setData(i),this["lbLose"+e].text=this.data.lose[e][1]}},t}(eui.ItemRenderer);__reflect(UltimateBattleBetsRewardView.prototype,"UltimateBattleBetsRewardView");var UltimateBattleLineupView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="UltimateBattleLineupSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.title=O3.tr(8194),this.labTr8224.textFlow=O3.tr2(8224),this.labTr8225.textFlow=O3.tr2(8225),this.labTr8226.textFlow=O3.tr2(8226),this.labTr8227.textFlow=O3.tr2(8227,App.TG81.toFixed(10*UltimateBattle.Config.cheerDiscount,1)),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.dgLineup.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgLineup.itemRenderer=UltimateBattleLineupItemView,this.listInspire=new CommonListBase({render:UltimateBattleLineupInspireItemView,gap:5,width:this.gInspire.width,height:this.gInspire.height,arrowScale:1}),this.gInspire.addChild(this.listInspire),this.dlg.ZHH61(this.gView)},t.prototype.open=function(){s.prototype.open.call(this),this.listInspire.open(),this.GX5(this.model)},t.prototype.close=function(){this.listInspire.close(),s.prototype.close.call(this)},t.prototype.uBM=function(t){t instanceof UltimateBattle.Model&&this.GX5(t)},t.prototype.GX5=function(t){var e=[],i={};for(var s in UltimateBattle.Config.inspires)i[s]=0;for(var s in P7.ObjectSet(i,t.ins),i)e.push({k:parseInt(s),v:i[s]});e.sort(function(t,e){return t.k-e.k});var r=t.st<3?UltimateBattle.Config.cheerDiscount:1,n=this.listInspire.listData&&this.listInspire.listData.length?this.listInspire.listData:[];e.forEach(function(t,e){if(n[e])n[e].lv=t.v;else{var i=UltimateBattle.Config.inspires[t.k],s=P7.str2kv1(i.cost),o=P7.str2kv(i.attr);n[e]={name:i.name,lv:t.v,discount:r,coin:s.k,price:s.v,id:t.k,attrs:o}}}),this.listInspire.rfL(n,!1);for(var o=[,8219,8220,8221],a=[],h=1;h<=3;h++){var p=t.sq[h];a.push({lineup:p||{},index:h,title:O3.tr(o[h])})}this.dataSource.source=a,this.labTr8227.visible=t.st<=2},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(UltimateBattleLineupView.prototype,"UltimateBattleLineupView");var UltimateBattleReportItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="UltimateBattleReportItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.labLook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.labLook.textFlow=O3.tr2(8259),M18.FHH83(this.labLook)},t.prototype.remove=function(){this.labLook.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.labN.textFlow=O3.tr2(8257,this.data.count),this.labName.textFlow=O3.tr2(8258,this.data.name)},t.prototype.onClick=function(){App.CM.apF(O6.A43,P4.HH67,this.data.did)},t}(eui.ItemRenderer);__reflect(UltimateBattleReportItemView.prototype,"UltimateBattleReportItemView");var UltimateBattleReportView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.type=0,i.select=1,i.skinName="UltimateBattlePreliminaryReportSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.title=O3.tr(8259),this.dlg.ZM69(this.oCC,this),this.dlg.ZHH61(this.gView),this.labTr8256.textFlow=this.labTr8256_2.textFlow=O3.tr2(8256),this.labTr8097.textFlow=O3.tr2(8097),this.labTr8364.textFlow=O3.tr2(8364),this.dgList.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgList.itemRenderer=UltimateBattleReportItemView,this.dgFlower.dataProvider=this.eaFlower=new eui.ArrayCollection,this.dgFlower.itemRenderer=UltimateBattleBetsRewardView,this.cb0.addEventListener(egret.Event.CHANGE,this.onChange,this),this.rb0.addEventListener(egret.Event.CHANGE,this.onChange,this),this.cb0.selected=!0},t.prototype.open=function(t,e,i){void 0===i&&(i=0),this.type=i,this.did=t,this.gid=e,App.CM.apF(O6.A43,P4.HH65,t,e)},t.prototype.close=function(){this.removeAvatar(),this.dataSource.removeAll(),this.eaFlower.removeAll(),this.cb0.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.rb0.removeEventListener(egret.Event.CHANGE,this.onChange,this)},t.prototype.uBM=function(t,e,i){t instanceof UltimateBattle.Model&&e==P4.HH66&&this.GX5(i)},t.prototype.GX5=function(i){var r=this;this.labName.text=i.lef.n,this.labEnemyName.text=i.rig.n,this.labPower.text=i.lef.sc+"",this.labEnemyPower.text=i.rig.sc+"",this.labScore.text=i.lefWin+":"+i.rigWin,this.labGroup.text=this.labEnemyGroup.text="",this.removeAvatar(),this.a1=new FightGameObject;var t=P7.ObjectSet({x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},i.lef.u);delete t.n,this.a1.setData(t,this.gA),this.a1.action=Action.Stand,this.a2=new FightGameObject,delete(t=P7.ObjectSet({x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Stand_d},i.rig.u)).n,this.a2.setData(t,this.gEA),this.a2.action=Action.Stand;var e=[],s=[];for(var o in UltimateBattle.Config.inspires){var n=UltimateBattle.Config.inspires[o];e.push(O3.tr(8223,n.name,i.lef.ins[o]||0)),s.push(O3.tr(8223,n.name,i.rig.ins[o]||0))}if(this.labInspireLv.text=e.join("   "),this.labEnemyInspireLv.text=s.join("   "),this.dgList.visible=this.gFlower.visible=this.gScore.visible=!1,0==this.type)this.dgList.visible=this.gScore.visible=!0,this.dataSource.source=i.rep.map(function(t,e){return{count:e+1,did:t.fid,name:t.w==i.lef.aid?i.lef.n:i.rig.n}});else if(1==this.type){this.cb0.touchEnabled=this.rb0.touchEnabled=this.gFlower.visible=!0,this.cb0.label=i.lef.n+"\n"+i.lef.sv,this.rb0.label=i.rig.n+"\n"+i.rig.sv,this.ZG67(i),this.aid=i.lef.aid,this.bid=i.rig.aid;var a=[],h=App.CM.gtM(O6.A43),p=0,l=0;h.m[this.gid]&&(p=h.m[this.gid].fr,l=h.m[this.gid].fty);var c=p==this.aid||p==this.bid;p&&(this.cb0.touchEnabled=this.rb0.touchEnabled=!1,c&&((p==this.aid?this.cb0:this.rb0).selected=!0));var u=[,7315,7316,7317],d=function(t){var e=UltimateBattle.Config.betsReward[t],i=P7.str2kv1(e.cost),s=P7.str2kv(e.win).map(function(t){return[t.k,t.v]}),o=P7.str2kv(e.lose).map(function(t){return[t.k,t.v]});a.push({id:e.id,cost:[i.k,i.v],win:s,lose:o,name:O3.tr(u[e.id]),callback:function(){return r.callback(e.id)},fr:p,fty:c?l:0})};for(var v in UltimateBattle.Config.betsReward)d(v);this.eaFlower.source=a}},t.prototype.callback=function(t){var e=this.cb0.selected?this.aid:this.bid;App.CM.apF(O6.A43,P4.N32,this.did,e,t)},t.prototype.ZG67=function(t){var e=t.lefPop+t.rigPop,i=.5,s=.5;0<e&&(i=t.rigPop/e,s=t.lefPop/e);var o=Math.round(100*s);this.labAttention.text=O3.tr(8098,o),this.labAttention2.text=O3.tr(8098,100-o);var r=this.labAttention.width+10,n=this.labAttention2.width+10;this.imgAttention.width=Math.max(r,556-Math.max(556*i,n)),this.labAttention2.x=this.imgAttention.width+5,this.labAttention.x=this.imgAttention.width-r+5},t.prototype.onChange=function(t){var e=t.currentTarget;e==this.cb0?this.select=1:e==this.rb0&&(this.select=2)},t.prototype.removeAvatar=function(){this.a1&&(this.a1.destory(),this.gA.removeChildren(),delete this.a1),this.a2&&(this.a2.destory(),this.gEA.removeChildren(),delete this.a2)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.viewSave=function(){if(0==this.type){var t=void 0,e=void 0;if(t=App.VM.gOV(O7.A1)){var i=t;e=O7.A1,this.model.viewSave({view:e,g:this.gid,did:this.did,onlyself:i.ckOnlyMe.selected,scrollY:t.listBattle.itemList.scrollV})}else(t=App.VM.gOV(O7.A35))&&(e=O7.A35,this.model.viewSave({view:e,g:this.gid,did:this.did}))}},t}(BaseEuiView);__reflect(UltimateBattleReportView.prototype,"UltimateBattleReportView");var UltimateBattleRewardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.state=0,i.skinName="UltimateBattleRewardSkin",i.subMap=[{title:UltimateBattle.Config.FI99(1),type:0},{title:UltimateBattle.Config.FI99(2),type:1}],i}return __extends(t,s),t.prototype.initUI=function(){this.list=new CommonListBase({render:UltimateBattleRewardItemView,gap:0,width:this.gpList.width,height:this.gpList.height,arrowScale:1}),this.gpList.addChild(this.list),this.btnList=new ButtonList(this.subMap.map(function(t){return t.title}),this.subMap.map(function(t){return t.type}),this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.dlg.title=O3.tr(8202),this.dlg.ZQ14(this.oCC,this),this.dlg.ZM69(this.oCC,this),this.labTr8200.textFlow=O3.tr2(8200),this.labTr8201.textFlow=O3.tr2(8201),this.labTr8210.textFlow=O3.tr2(8210),this.labTr8211.textFlow=O3.tr2(8211),this.labTr8212.textFlow=O3.tr2(8212)},t.prototype.open=function(t){s.prototype.open.call(this),this.list.open(),t=t||0,this.ZQ23(t),this.btnList.selectedIndex=t,this.GX5()},t.prototype.close=function(){this.list.close(),s.prototype.close.call(this)},t.prototype.ZQ23=function(t){this.btnList.setCurView(t),this.state=t,this.GX5()},t.prototype.GX5=function(){var e=this;this.list.rfL([1,2,3,4,8,16].map(function(t){return{rw:UltimateBattle.Config.FL67(e.state,t),rank:UltimateBattle.Utils.FK19(t),v:0==e.state&&1==t?O3.tr(8208):O3.tr(8209)}}))},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(UltimateBattleRewardView.prototype,"UltimateBattleRewardView");var UltimateBattleSelectHeroView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="UltimateBattleSelectHeroSkin",i}return __extends(t,s),t.prototype.initUI=function(){this.dgSelected.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgSelected.itemRenderer=UltimateBattleHeroIconItemView,this.list=new CommonListBase({render:UltimateBattleHeroIconItemView,horizontalGap:10,tileLayout:!0,width:this.gList.width,height:this.gList.height,arrowScale:1}),this.gList.addChild(this.list),this.dlg.title=O3.tr(8194),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.dlg.setOKHandler(this.onClickOk,this),this.dgSelected.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZW53,this),this.list.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClicklock,this),this.dlg.strBtnOK=O3.tr(8232)},t.prototype.open=function(t,e,i){void 0===t&&(t=UltimateBattle.Const.SELECT_TYPE_HERO),this.type=t,this.cur=e,this.selected=i||[],s.prototype.open.call(this),this.list.open(),this.GX5()},t.prototype.close=function(){this.dgSelected.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZW53,this),this.list.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClicklock,this),this.dataSource.removeAll(),this.list.close(),s.prototype.close.call(this)},t.prototype.isSelect=function(t){return 0<=this.cur.indexOf(t)||0<=this.selected.indexOf(t)},t.prototype.updateList=function(){var t=[];if(this.type==UltimateBattle.Const.SELECT_TYPE_HERO){var e=App.CM.gtM(O6.C12);for(var i in e.heroList){if(0<(g=e.heroList[i]).lv){var s=g.id,o=g.icon,r=g.quality,n=g.name,a=g.power;t.push({id:s,name:n,icon:o,bg:N12.getBox(r),state:this.isSelect(g.id)?1:0,w:a+r})}}}else if(this.type==UltimateBattle.Const.SELECT_TYPE_PARTNER)for(var h=0,p=(e=App.CM.gtM(O6.C3)).ps;h<p.length;h++){if(0<(g=p[h]).lv){var l=M11.getWomen(g.id),c=(s=l.id,o=l.icon,r=l.quality,l.name),u=THH23.FF56(s,g.lv,g.exp),d=O4.getScore(u),v=e.getWomenBFB(),f=Math.ceil(d*(1+v));t.push({id:s,name:c,icon:o,bg:N12.getBox(r),state:this.isSelect(g.id)?1:0,w:f+r})}}else if(this.type==UltimateBattle.Const.SELECT_TYPE_FAIRY){e=App.CM.gtM(O6.B58);for(var i in e.ims){var g=e.ims[i],m=TE91.FF17(g.id);o=m.icon,s=m.id,r=m.quality;t.push({id:s,name:"",icon:o,bg:N12.getBox(r),state:this.isSelect(g.id)?1:0,w:r})}}t.sort(function(t,e){return e.w-t.w}),this.list.rfL(t)},t.prototype.updateCur=function(){var r=new Array(this.cur.length);if(this.type==UltimateBattle.Const.SELECT_TYPE_HERO){var n=App.CM.gtM(O6.C12);this.cur.forEach(function(t,e){if(0<t){var i=n.heroList[t],s=i.icon,o=i.quality;i.name;r[e]={id:t,name:"",icon:s,bg:N12.getBox(o),state:0}}})}else if(this.type==UltimateBattle.Const.SELECT_TYPE_PARTNER)for(var t=0,e=(p=App.CM.gtM(O6.C3)).ps;t<e.length;t++){var i=e[t];if(0<=(c=this.cur.indexOf(i.id))){var s=M11.getWomen(i.id),o=s.id,a=s.icon,h=s.quality;s.name;r[c]={id:o,name:"",icon:a,bg:N12.getBox(h),state:0}}}else if(this.type==UltimateBattle.Const.SELECT_TYPE_FAIRY){var p=App.CM.gtM(O6.B58);for(var l in p.ims){var c;i=p.ims[l];if(0<=(c=this.cur.indexOf(i.id))){var u=TE91.FF17(i.id);a=u.icon,o=u.id,h=u.quality;r[c]={id:o,name:"",icon:a,bg:N12.getBox(h),state:0}}}}for(var d=N12.getBox(1),v=0;v<r.length;v++)r[v]||(r[v]={state:0,icon:"v1_img_jia_png",bg:d,id:0,name:""});this.dataSource.source=r},t.prototype.GX5=function(){this.updateList(),this.updateCur();var t=8229;this.type==UltimateBattle.Const.SELECT_TYPE_FAIRY?t=8231:this.type==UltimateBattle.Const.SELECT_TYPE_PARTNER&&(t=8230),this.title.textFlow=O3.tr2(t)},t.prototype.ZW53=function(t){var e=t.item;e&&(0==e.id||(this.cur[t.itemIndex]=0,this.GX5(),Log.trace("卸下来",t.itemIndex,e.id)))},t.prototype.onClicklock=function(t){var e=t.item;if(e)if(0==e.state){var i=this.cur.indexOf(0);0<=i?(this.cur[i]=e.id,this.GX5()):P18.sDP(O3.tr(8355))}else P18.sDP(O3.tr(8358))},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClickOk=function(){this.dispatchEventWith(UltimateBattle.Const.SELECTED,!1,{type:this.type,cur:this.cur})},t}(BaseEuiView);__reflect(UltimateBattleSelectHeroView.prototype,"UltimateBattleSelectHeroView");var UltimateBattleShopBuyView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.maxNum=99,i.skinName="ShopBuySkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.buyBtn.label=O3.tr(5017),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(5018)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(5019))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this);var i=t[0];this._item=i,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.GX5()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TE76&&this.GX5()},t.prototype.doDeTen=function(){var t=Number(this.copies.text);this.copies.text=t-10<1?"1":String(t-10);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doDeOne=function(){var t=Number(this.copies.text);this.copies.text=t-1<1?"1":String(t-1);var e=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+e},t.prototype.doInOne=function(){var t=Number(this._item.costId),e=Number(this.copies.text),i=N12.giC(t),s=i;if(t==N12.itemId.bindGold){if(s=N12.giC(N12.itemId.gold)+i,(e+1)*this._item.costNum>s)return}else if((e+1)*this._item.costNum>s)return;var o=this._item.batchnum;-1!=this._item.limitnum&&(o=Math.min(o,this._item.limitnum),o-=this._item.limitnum-this._item.buyTime);var r=Math.floor(s/this._item.costNum),n=r>this.maxNum?this.maxNum:r;o=n<o?n:o,this.copies.text=o<e+1?String(o):String(e+1);var a=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+a},t.prototype.doInTen=function(){var t=this._item.costId,e=Number(this.copies.text),i=N12.giC(Number(t)),s=i;if(t==N12.itemId.bindGold){if(s=N12.giC(N12.itemId.gold)+i,(e+10)*this._item.costNum>s)return}else if((e+10)*this._item.costNum>s)return;var o=this._item.batchnum;-1!=this._item.limitnum&&(o=Math.min(o,this._item.limitnum),o-=this._item.limitnum-this._item.buyTime);var r=Math.floor(s/this._item.costNum),n=r>this.maxNum?this.maxNum:r;o=n<o?n:o,this.copies.text=o<e+10?String(o):String(e+10);var a=Number(this.copies.text)*this._item.costNum;this.totalCost.text="x"+a},t.prototype.GX5=function(){var t=this._item,e=t.bg;this.iconBg.source=e;var i=t.icon;this.icon.source=i;var s=t.itemname;this.nameLb.text=s;var o=t.itemnum;this.num.text=o;var r=t.buyTime,n=t.limitnum;this.buyBtn.touchEnabled=!0,this.buyBtn.filters=[],-1==n||null==n?this.limitLb.text=O3.tr(2507):0<r?this.limitLb.text=O3.tr(2508,r,t.limitnum):(this.limitLb.textFlow=M18.HTP.parser(O3.tr(2509)),this.buyBtn.touchEnabled=!1,this.buyBtn.filters=[P16.GrayMatrixFilter]);var a=t.desc;this.desc.textFlow=M18.FG71(a);var h=t.costIcon;this.costIcon.source=h;var p=t.costNum;this.copies.text="1";var l=Number(this.copies.text);this.totalCost.text="x"+String(p*l)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.deTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOneBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBuy,this),this.iconGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this)},t.prototype.showItem=function(t){if(this._item.type&&1!=this._item.type){var e=M10.ava[this._item.itemid];App.CM.apF(O6.B98,M19.A17,e)}else{var i=N12.gID(this._item.itemid),s=N12.giC(this._item.itemid);App.CM.apF(O6.C11,O14.A15,i,s)}},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.doBuy=function(){var t=this;App.CM.gtM(O6.B98);if(P7.FF59()){var e=this._item.id,i=Number(this.copies.text),s=Number(this._item.costId),o=N12.giC(s);if(75001==s&&i*this._item.costNum>o){App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){App.CM.apF(t._item.controllerConst,t._item.reqConst,t._item.id,Number(t.copies.text)),t.closeSelf()})}else App.CM.apF(this._item.controllerConst,this._item.reqConst,e,i),this.closeSelf()}},t}(BaseEuiView);__reflect(UltimateBattleShopBuyView.prototype,"UltimateBattleShopBuyView");var UltimateBattleShopView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=CrossTeamShopSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.dlg.ZM69(this.closeSelf,this),this.dlg.ZQ14(this.closeSelf,this);var t={render:UltimateBattleShopPlainItemView,horizontalGap:6,verticalGap:6,tileLayout:!0,width:this.grpList1.width,height:this.grpList1.height,arrowScale:1};this.listView1=new CommonListBase(t),this.grpList1.addChild(this.listView1),this.listView1.verticalCenter=0,this.listView1.horizontalCenter=0;var e={render:UltimateBattleShopHonorItemView,horizontalGap:6,verticalGap:6,tileLayout:!0,width:this.grpList2.width,height:this.grpList2.height,arrowScale:1};this.listView2=new CommonListBase(e),this.grpList2.addChild(this.listView2),this.listView2.verticalCenter=0,this.listView2.horizontalCenter=0,this.tabChange.dataProvider=new eui.ArrayCollection([{name:O3.tr(7267)},{name:O3.tr(7268)}]);var i=N12.gID(N12.itemId.dfc);this.imgItem.setData(i),this.dlg.title=O3.tr(8344),this.lbOverTime.text=this.lbNum.text=""},t.prototype.update1=function(){var t=UltimateBattle.Utils.getListShop1();this.listView1.rfL(t)},t.prototype.update2=function(){var t=UltimateBattle.Utils.getListShop2();this.listView2.rfL(t)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.open=function(){this.listView1.open(),this.listView2.open(),this.apF(P4.HH69),this.tabChange.addEventListener(eui.UIEvent.CHANGE,this.ZR78,this),this.viewStack.selectedIndex=this.tabChange.selectedIndex=0},t.prototype.close=function(){s.prototype.close.call(this),this.listView1.close(),this.listView2.close(),this.tabChange.removeEventListener(eui.UIEvent.CHANGE,this.ZR78,this),this.ZO5()},t.prototype.ZO5=function(){this.timeHander&&(App.K16.rBH(this.timeHander),this.timeHander=null)},t.prototype.setTimeStr=function(){var t=O3.tr(7425,P6.FJ11(1e3*UltimateBattle.Utils.getShopTime(),5));this.lbOverTime.textFlow=M18.HTP.parser(t)},t.prototype.ZR77=function(){var t=this;this.timeHander||(this.setTimeStr(),this.timeHander=App.K16.doTimer(1e3,0,function(){t.setTimeStr(),UltimateBattle.Utils.getShopTime()<0&&t.ZO5()},this))},t.prototype.updateUI=function(t){this.lbNum.textFlow=M18.HTP.parser(O3.tr(7185,t.shop.co))},t.prototype.ZR78=function(){this.viewStack.selectedIndex=this.tabChange.selectedIndex},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof UltimateBattle.Model)switch(this.updateUI(t),e+""){case P4.HH70:this.ZR77(),this.update1(),this.update2();break;case P4.J52:this.tabChange.selectedIndex?this.update2():this.update1()}},t}(BaseEuiView);__reflect(UltimateBattleShopView.prototype,"UltimateBattleShopView");var UltimateBattleSignView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="UltimateBattleSignSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSign,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSign,this),this.dlg.title=O3.tr(8194),this.dlg.ZQ14(this.oCC,this),this.dlg.ZM69(this.oCC,this),this.btn1.label=this.btn2.label=O3.tr(8198),this.labTr8200.textFlow=O3.tr2(8200),this.labTr8217.textFlow=O3.tr2(8217)},t.prototype.open=function(){s.prototype.open.call(this),this.GX5(this.model),App.CM.apF(O6.A43,P4.G1)},t.prototype.close=function(){this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSign,this),this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSign,this),s.prototype.close.call(this)},t.prototype.uBM=function(t){t instanceof UltimateBattle.Model&&this.GX5(t)},t.prototype.GX5=function(t){var e=t.gn[1],i=t.gn[2];this.labCount1.textFlow=O3.tr2(8216,e),this.labCount2.textFlow=O3.tr2(8216,i)},t.prototype.onClickSign=function(t){var e=this,i=t.currentTarget==this.btn1?1:2;App.VM.open(O7.HH38,O3.tr2(8359,UltimateBattle.Config.FI99(i)),this,function(){App.CM.apF(O6.A43,P4.P53,i),e.oCC()})},t.prototype.oCC=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(UltimateBattleSignView.prototype,"UltimateBattleSignView");var UltimateBattleStateLastView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.stages={1:[0,7],2:[8,11],3:[12,13],4:[14,15],5:[0,-1]},i.skinName="UltimateBattleStateLastSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.labSwap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSwap,this);for(var t=0;t<=15;t++){this["btnGo"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}this.labTr8238.textFlow=O3.tr2(8238),this.labTime.text=UltimateBattle.Config.recePoint,M18.FHH83(this.labSwap)},t.prototype.open=function(){var t=this.model;this.g=t.g||1,this.GX5(t)},t.prototype.close=function(){this.labSwap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSwap,this);for(var t=0;t<=15;t++){this["btnGo"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}},t.prototype.uBM=function(t,e){t instanceof UltimateBattle.Model&&(e==P4.J50?this.apF(P4.E62,this.g):this.GX5(t))},t.prototype.GX5=function(t){var i=this,e=t.m[this.g];this.stage_=t.stage,this.labSwap.textFlow=O3.tr2(8361,UltimateBattle.Config.FI99(1==this.g?2:1));for(var s=0;s<=15;s++){(p=this["btnGo"+s]).icon="v1_btn_ya_txhw_png",p.touchEnabled=!1,P16.sGF(p,!p.touchEnabled)}var o=this.stages;for(s=1;s<=5;s++){var r=o[s],n=r[0],a=r[1];if(s<=this.stage_)for(var h=n;h<=a;h++){var p;(p=this["btnGo"+h]).icon=s<this.stage_?"v1_btn_hf_txhw_png":"v1_btn_ya_txhw_png",p.touchEnabled=!0,P16.sGF(p,!p.touchEnabled)}}switch(P7.isEmpty(e)||e.dl.forEach(function(t,e){return i.updateBattle(t,i["grp"+e],e)}),this.updateLine(t),this.lbGrade.text="("+UltimateBattle.Config.FI99(this.g)+")",this.stage_){case 1:this.labStage.textFlow=O3.tr2(8239,16,8);break;case 2:this.labStage.textFlow=O3.tr2(8239,8,4);break;case 3:this.labStage.textFlow=O3.tr2(8239,4,2);break;case 4:default:this.labStage.textFlow=O3.tr2(8340)}},t.prototype.updateLine=function(t){for(var e=this.gLine.numChildren,i=0;i<e;i++)this.gLine.getChildAt(i).source="v1_line_h_txhw_png";if(5<=t.st){var s=[];if(4<=this.stage_){i=t.m[this.g].dl.length-1;s.push(t.m[this.g].dl[i].lef.aid),s.push(t.m[this.g].dl[i].rig.aid)}else{var o=this.stages[this.stage_];for(i=o[0];i<=o[1];i++)s.push(t.m[this.g].dl[i].lef.aid),s.push(t.m[this.g].dl[i].rig.aid)}for(var r=1;r<=this.stage_;r++){var n=this.stages[r],a=n[0];for(i=1;a<=n[1];a++,i++){var h=t.m[this.g].dl[a];if((0<=s.indexOf(h.lef.aid)||0<=s.indexOf(h.rig.aid))&&h.win){var p=P16.FF67(this.gLine,r+"_"+i+"_"+(h.lef.aid==h.win?1:0));p&&p.forEach(function(t){return t.source="v1_line_j_txhw_png"})}}}var l=O4.getAid();if(1<=this.stage_)for(i=0;i<8;i++){h=t.m[this.g].dl[i];var c=this["grp"+i],u=c.getChildByName("left"),d=c.getChildByName("right");u.imgBg.source=d.imgBg.source="v1_img_ctjjd_txhw2_png",l==h.lef.aid?u.imgBg.source="v1_img_ctjjdbr_txhw2_png":l==h.rig.aid&&(d.imgBg.source="v1_img_ctjjdbr_txhw2_png"),s.indexOf(h.lef.aid)<0&&(u.imgBg.source="v1_img_ctbsd_txhw2_png"),s.indexOf(h.rig.aid)<0&&(d.imgBg.source="v1_img_ctbsd_txhw2_png")}}},t.prototype.updateBattle=function(t,e,i){var s=t.lef.aid,o=t.rig.aid,r=this.model.m[this.g].fr;if(i<8){var n=e.getChildByName("left"),a=e.getChildByName("right"),h=t.lef.ilv;n.lbName.text=t.lef.n+"."+t.lef.sv,n.lbS.textFlow=O3.tr2(8317,h),h=t.rig.ilv,a.lbName.text=t.rig.n+"."+t.rig.sv,a.lbS.textFlow=O3.tr2(8317,h),n.grpYa.visible=a.grpYa.visible=!1,n.lbYa.text=a.lbYa.text=O3.tr(3506),r&&(s==r&&(n.grpYa.visible=!0),o==r&&(a.grpYa.visible=!0))}this["btnGo"+i].name=t.did},t.prototype.onClickSwap=function(){this.g=1==this.g?2:1,this.apF(P4.E62,this.g||1)},t.prototype.onClick=function(t){var e=t.currentTarget,i=e.name;if(i)switch(e.icon){case"v1_btn_hf_txhw_png":App.VM.open(O7.D84,i,this.g);break;case"v1_btn_ya_txhw_png":App.VM.open(O7.D84,i,this.g,1)}else Log.trace("异常数据")},t}(BaseEuiView);__reflect(UltimateBattleStateLastView.prototype,"UltimateBattleStateLastView");var UltimateBattleStatePreliminaryBattleItemView=function(e){function t(){var t=e.call(this)||this;return t.imgScale=.7,t.skinName="UltimateBattlePreliminaryBattleItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data.index==Number.MAX_VALUE;this.icon1.visible=this.icon2.visible=this.labsv1.visible=this.labsv2.visible=this.lab1.visible=this.lab2.visible=this.btn.visible=this.imgVs.visible=!t,this.labState.visible=this.imgWin1.visible=this.imgWin2.visible=!1,t?(this.labState.visible=!0,this.imgBg.source="v1_bg_kelashen02bc_png",this.labState.visible=!0,this.labState.textFlow=M18.FG71(this.data.name)):(this.imgBg.source="v1_bg_kelashen02b_png",this.lab1.text=this.data.name,this.icon1.icon.source=this.data.icon,this.labsv1.text=this.data.lsv,this.lab2.text=this.data.enemyName,this.icon2.icon.source=this.data.enemyIcon,this.labsv2.text=this.data.esv,this.data.win?this.imgWin1.visible=!0:this.imgWin2.visible=!0),this.ZU73()},t.prototype.ZP78=function(){egret.Tween.removeTweens(this.group),egret.Tween.removeTweens(this.imgVs),egret.Tween.removeTweens(this),this.group.x=0,this.imgVs.scaleX=this.imgVs.scaleY=this.imgScale,this.height=90},t.prototype.ZU73=function(){this.ZP78();var t=P6.getTime()-this.data.clock,e=t<0?Math.abs(t):0,i=Math.max(0,t/860);if(i<1&&0<=i){this.imgVs.scaleX=this.imgVs.scaleY=.64,this.group.x=this.group.width,this.height=0,this.imgWin1.visible=this.imgWin2.visible=!1;var s=this.imgScale;egret.Tween.get(this).wait(e).to({height:90},300).setPosition(860*i),egret.Tween.get(this.group).wait(e).wait(300).to({x:0},400).setPosition(860*i),egret.Tween.get(this.imgVs).wait(e).wait(300).wait(400).to({scaleY:1.2*s,scaleX:1.2*s},80).to({scaleY:1*s,scaleX:1*s},80).call(this.updateLabWin,this).setPosition(860*i)}},t.prototype.updateLabWin=function(){this.data.index!=Number.MAX_VALUE&&((this.data.win?this.imgWin1:this.imgWin2).visible=!0)},t.prototype.remove=function(){this.ZP78(),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){App.VM.open(O7.D84,this.data.fightId,this.data.gid)},t}(eui.ItemRenderer);__reflect(UltimateBattleStatePreliminaryBattleItemView.prototype,"UltimateBattleStatePreliminaryBattleItemView");var UltimateBattleStatePreliminaryRecordItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="UltimateBattlePreliminaryRecordItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.labRank.visible=this.imgRank.visible=!1,this.labName.text=this.data.name,this.labPower.text=this.data.power+"",this.labState.textFlow=O3.tr2(8251,this.data.wins,this.data.fights),this.labFeats.text=this.data.feat+"",this.data.rank<=3?(this.imgRank.visible=!0,this.imgRank.source=[,"v1_img_first_png","v1_img_scend_png","v1_img_third_png"][this.data.rank]):(this.labRank.visible=!0,this.labRank.text=this.data.rank+"")},t}(eui.ItemRenderer);__reflect(UltimateBattleStatePreliminaryRecordItemView.prototype,"UltimateBattleStatePreliminaryRecordItemView");var UltimateBattleStatePreliminaryView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.gid=1,i.lastMove=0,i.battleListData=[],i.battleItemHeight=95,i.skinName="UltimateBattlePreliminarySkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.ckOnlyMe.addEventListener(egret.Event.CHANGE,this.onChangeOnly,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW22,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW22,this),this.listBattle=new CommonListBase({render:UltimateBattleStatePreliminaryBattleItemView,width:this.gListBattle.width,height:this.gListBattle.height,arrowScale:1,gap:5}),this.gListBattle.addChild(this.listBattle),this.listBattle.scContent.addEventListener(egret.Event.CHANGE,this.onChange,this),this.listRecord=new CommonListBase({render:UltimateBattleStatePreliminaryRecordItemView,width:this.gListRecord.width,height:this.gListRecord.height,arrowScale:1,gap:5}),this.gListRecord.addChild(this.listRecord),this.labTr8242.textFlow=O3.tr2(8242),this.labTr8243.textFlow=O3.tr2(8243),this.labTr8244.textFlow=O3.tr2(8244),this.labTr8245.textFlow=O3.tr2(8245),this.labTr8246.textFlow=O3.tr2(8246),this.ckOnlyMe.label=O3.tr(8252)},t.prototype.open=function(t){this.listBattle.open(),this.listRecord.open();var e=this.model;this.gid=e.g||1,this.updateSwitch(),this.GX5(e),this.updateMember(e),this.ZM34(e)},t.prototype.close=function(){this.listBattle.close(),this.listRecord.close(),App.CM.apF(O6.A43,P4.G3),this.ckOnlyMe.removeEventListener(egret.Event.CHANGE,this.onChangeOnly,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW22,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZW22,this),this.listBattle.scContent.removeEventListener(egret.Event.CHANGE,this.onChange,this)},t.prototype.ZM33=function(){return P6.getTime(!0)-this.lastMove<3},t.prototype.ZM34=function(t,e){var i=this;void 0===e&&(e=!1);var s=t.p[this.gid],o=this.battleListData;if(s){var r=O4.getAid(),n=o.map(function(t){return t.fightId});s.mv.forEach(function(t){(P7.isEmpty(t)||0<=n.indexOf(t.did)||i.ckOnlyMe.selected)&&t.lef.aid!=r&&t.rig.aid!=r||o.push({index:t.n,lsv:t.lef.sv,esv:t.rig.sv,name:t.lef.n,icon:t.lef.ic,enemyName:t.rig.n,enemyIcon:t.rig.ic,fightId:t.did,win:t.win==t.lef.aid,clock:e?P6.getTime():0,gid:i.gid})});for(var a=0;a<o.length;a++)for(var h=o.length-1;a<h;h--)o[a].index==o[h].index&&o.splice(h,1);o.sort(function(t,e){return e.index-t.index}),this.listBattle.rfL(o),this.listBattle.itemList.scrollV>3.2*this.battleItemHeight&&n.length<o.length&&this.ZM33()&&(this.listBattle.scContent.stopAnimation(),this.listBattle.itemList.scrollV+=this.battleItemHeight*(o.length-n.length))}else this.listBattle.rfL(o);this.imgTips.visible=this.labTips.visible=!1,P7.isEmpty(t.p)&&(this.imgTips.visible=this.labTips.visible=!0,this.labTips.textFlow=O3.tr2(7984))},t.prototype.onChangeOnly=function(){var t=this.model;this.listBattle.scContent.stopAnimation(),this.listBattle.moveToTop(),this.battleListData=[],this.ZM34(t,!1)},t.prototype.ZW22=function(t){t.currentTarget==this.btnLeft?this.turnpage(-1):this.turnpage(1)},t.prototype.uBM=function(t,e,i){if(t instanceof UltimateBattle.Model)if(this.GX5(t),e==P4.B80){var s=i,o=s.gid;s.dv,s.la,s.ra;o==this.gid&&(this.ZM34(t,!0),this.updateMember(t))}else e==P4.E63&&(this.battleListData=[],this.ZM34(t),this.updateMember(t))},t.prototype.updateMember=function(t){var e=t.p[this.gid].o.map(function(t){return{name:t.n+"."+t.sa,power:t.s,fights:t.t,wins:t.w,feat:t.g,rank:t.r}});e.sort(function(t,e){return t.rank-e.rank}),this.listRecord.rfL(e)},t.prototype.GX5=function(t){var e=t.role;P7.isEmpty(e)?(this.labRank.textFlow=O3.tr2(8247,O3.tr(8250)),this.labFeats.textFlow=O3.tr2(8248,O3.tr(8250)),this.labScore.textFlow=O3.tr2(8249,O3.tr(8250))):(this.labRank.textFlow=O3.tr2(8247,e.r),this.labFeats.textFlow=O3.tr2(8248,O3.tr(8251,e.w,e.t)),this.labScore.textFlow=O3.tr2(8249,e.g)),this.labTitle.textFlow=O3.tr2(8253,UltimateBattle.Config.FI99(this.gid))},t.prototype.onChange=function(){this.lastMove=P6.getTime(!0)},t.prototype.turnpage=function(t,e){void 0===e&&(e=!1),e&&(this.gid=t);var i=t+this.gid;this.gid=i,this.listBattle.moveToTop(),this.listRecord.moveToTop(),this.GX5(this.model),this.updateSwitch(),this.apF(P4.E62,this.gid||1)},t.prototype.updateSwitch=function(){this.btnLeft.visible=this.btnRight.visible=!1,this.btnLeft.visible=1<this.gid,this.btnRight.visible=this.gid<2},t}(BaseEuiView);__reflect(UltimateBattleStatePreliminaryView.prototype,"UltimateBattleStatePreliminaryView");var UltimateBattleStateSignView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="UltimateBattleStateSignSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.labTitle.textFlow=O3.tr2(8196),this.labRule.textFlow=O3.tr2(8197),this.btn.label=O3.tr(8198),this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnUp,this),this.btnDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnDown,this),this.scroller.addEventListener(egret.Event.CHANGE,this.ZJ47,this)},t.prototype.open=function(){this.timer=this.timer||App.K16.doTimer(1e3,0,this.GX42,this),this.GX5(this.model),this.GX42()},t.prototype.close=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnUp,this),this.btnDown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnDown,this),this.scroller.removeEventListener(egret.Event.CHANGE,this.ZJ47,this),App.K16.rBH(this.timer),delete this.timer},t.prototype.uBM=function(t){t instanceof UltimateBattle.Model&&this.GX5(t)},t.prototype.GX5=function(t){2==t.st?t.g?this.ZM35("s2",t):this.ZM35("s1",t):3==t.st?this.ZM35("s3",t):6==t.st&&(t.out||!t.g?this.ZM35("s3",t):this.ZM35("s4",t)),this.ZJ47()},t.prototype.ZM35=function(t,e){this.currentState=t,this.validateNow(),e.st<=2?(this.labTitle.textFlow=O3.tr2(8196),this.labRule.textFlow=O3.tr2(8197)):2<e.st&&(this.labTitle.textFlow=O3.tr2(8353),this.labRule.textFlow=O3.tr2(8354)),"s2"==t?(this.labDamage.textFlow=M18.FG71(O3.tr(8218,MonarchTest.Utils.FI83(e.a.dmg),O3.tr(1==e.g?8213:8214),e.a.r?e.a.r:O3.tr(8250))),this.labCount.textFlow=O3.tr2(8222,e.a.cn)):"s3"==t&&(1!=e.out&&e.g?this.labDamage.textFlow=M18.FG71(O3.tr(8218,MonarchTest.Utils.FI83(e.a.dmg),O3.tr(1==e.g?8213:8214),e.a.r?e.a.r:O3.tr(8250))):this.labDamage.textFlow=O3.tr2(8234))},t.prototype.GX42=function(){var t=this.model;2==t.st?this.labTime.textFlow=O3.tr2(8199,P6.FJ11(1e3*t.cd,5)):3==t.st?this.labTime.textFlow=O3.tr2(8233,P6.FJ11(1e3*t.cd,5)):6==t.st&&(this.labTime.textFlow=O3.tr2(8374,P6.FJ11(1e3*t.cd,5)))},t.prototype.onClick=function(){var t=this.model;2==t.st&&(t.g?t.a.cn?App.CM.apF(O6.A43,UltimateBattle.Const.CHALLENGE):App.VM.open(O7.HH38,M18.FG71(O3.tr(8357,UltimateBattle.Config.quaBuyCost.v,N12.FK5(UltimateBattle.Config.quaBuyCost.k))),this,function(){return App.CM.apF(O6.A43,P4.A31)}):App.CM.apF(O6.A43,UltimateBattle.Const.OPEN_SIGN))},t.prototype.ZJ47=function(){this.btnUp.visible=0<this.gTips.scrollV;var t=this.labRule.height-this.scroller.height;this.btnDown.visible=0<t&&this.gTips.scrollV<t},t.prototype.onTurnUp=function(){this.turnpage(-1)},t.prototype.onTurnDown=function(){this.turnpage(1)},t.prototype.turnpage=function(t){var e=this.gTips.scrollV+this.scroller.height*t,i=this.labRule.height-this.scroller.height;this.gTips.scrollV=Math.max(Math.min(i,e),0),this.ZJ47()},t}(BaseEuiView);__reflect(UltimateBattleStateSignView.prototype,"UltimateBattleStateSignView");var UltimateBattleView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="UltimateBattleSkin",App.VM.rgS(O7.F55,O7.A32,"UltimateBattleStateSignView",i.group),App.VM.rgS(O7.F55,O7.A1,"UltimateBattleStatePreliminaryView",i.group),App.VM.rgS(O7.F55,O7.A35,"UltimateBattleStateLastView",i.group),i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A43)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.title=O3.tr(8194),this.dlg.ZQ14(this.oCC,this),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ16(this.onClickHelp,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dlg.ZHH61(this.group),this.btn1.label=O3.tr(8202),this.btn2.label=O3.tr(8215),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t);var i=this.model;this.updateState(i),this.timer=this.timer||App.K16.doTimer(1e3,0,this.GX42,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),App.K16.rBH(this.timer),delete this.timer,s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){t instanceof UltimateBattle.Model&&this.updateState(t)},t.prototype.GX42=function(){var t=this.model;!t.isInit||4!=t.st&&5!=t.st||(this.labTips.textFlow=O3.tr2(8254,P6.FJ11(1e3*t.cd,5)))},t.prototype.updateState=function(t){if(this.labTips.visible=this.btn2.visible=!1,t.isInit){var e=void 0;if(2==t.st||3==t.st||6==t.st?e=1:4==t.st?e=2:5!=t.st&&7!=t.st||(e=3),4==t.st&&2==t.ft&&(this.labTips.visible=!0,this.GX42()),t.g&&!t.out&&(3==t.st||2==t.st||5==t.st&&t.stage<5)?this.btn2.visible=!0:(App.VM.close(O7.B18),App.VM.close(O7.D83)),this.state!=e&&e){if(this.state&&(App.VM.close(O7.A32),App.VM.close(O7.A1),App.VM.close(O7.A35),delete this.state),1==e)App.VM.open(O7.A32);else if(2==e){if(P7.isEmpty(t.p))return void App.CM.apF(O6.A43,P4.E62,t.g||1);App.VM.open(O7.A1)}else if(3==e){if(P7.isEmpty(t.m))return void App.CM.apF(O6.A43,P4.E62,t.g||1);App.VM.open(O7.A35),t.dailyOpen=!1}this.state=e}}},t.prototype.onClick=function(t){var e=t.currentTarget;e==this.btn1?App.VM.open(O7.D82):e==this.btn2&&App.CM.apF(O6.A43,UltimateBattle.Const.OPEN_LINEUP)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClickHelp=function(){var t=O3.tr(8341),e=O3.tr(8342);switch(this.model.st){case 3:case 4:case 6:t=O3.tr(8353),e=O3.tr(8354);break;case 5:case 7:case 8:t=O3.tr(8377),e=O3.tr(8378)}var i={title:t,content:e};App.CM.apF(O6.C18,O10.A24,i)},t.prototype.onClickShop=function(){App.VM.open(O7.F56)},t}(BaseEuiView);__reflect(UltimateBattleView.prototype,"UltimateBattleView");var UltimateBattle,UltimateBattleWorshipView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="CrossLeagueWorshipSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return this.controller.gtM()},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.labTr7480.textFlow=O3.tr2(8236),this.dlg.title=O3.tr(8237),this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.dlg.setOKHandler(this.onClickOk,this,!1),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon,this.GX5(this.model)},t.prototype.open=function(){s.prototype.open.call(this),this.GX5(this.model)},t.prototype.uBM=function(t){t instanceof UltimateBattle.Model&&this.GX5(t)},t.prototype.close=function(){this.dataSource.removeAll(),this.removeAvatar(),s.prototype.close.call(this)},t.prototype.onClickOk=function(){this.model.iw?console.log("已经膜拜过了"):this.aCF(O6.A43,P4.L57)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.GY15=function(t){this.removeAvatar();var e={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objModel=new FightGameObject,this.objModel.action=Action.Stand,this.objModel.setBaseData(e),t.bt=BehaviourType.Stand_d,this.objModel.setData(t,this.objGroup)},t.prototype.removeAvatar=function(){this.objGroup.removeChildren(),this.objModel&&(this.objModel.destory(),this.objModel=null)},t.prototype.updateState=function(t){var e=t.canWorship;if(this.dlg.strBtnOK=!t.m||e?O3.tr(7481):O3.tr(7494),this.dlg.setOKEnable(e),this.imgNone.visible=t.m,t.m){var i=t.m.n,s=t.time;this.labName.text=i,this.labTime.textFlow=O3.tr2(8235,P6.FJ11(s,12));var o=P7.copyTab(t.m);delete o.n,this.GY15(o)}else this.labName.text="",this.labTime.text="",this.removeAvatar()},t.prototype.updateReward=function(){this.dataSource.source=UltimateBattle.Config.adoreReward.map(function(t){return{itemData:{data:N12.gID(t.k),ct:t.v},isBottom:!1,scale:1}})},t.prototype.GX5=function(t){var e=t.canWorship(),i=t.fu,s=t.wt;this.updateState({canWorship:e,m:i,time:s}),this.updateReward()},t}(BaseEuiView);__reflect(UltimateBattleWorshipView.prototype,"UltimateBattleWorshipView"),function(i){var t=function(){function t(){this.reset()}return t.prototype.update=function(t){for(var e in this.rn=P7.getValue(t.rn,this.rn),this.bn=P7.getValue(t.bn,this.bn),this.co=P7.getValue(t.co,this.co),this.cd=P7.getValue(t.cd,this.cd),i.Config.listShop1)i.Config.listShop1[e].updateData(this.bn[e]||0);for(var e in i.Config.listShop2)i.Config.listShop2[e].updateData(this.bn[e]||0)},t.prototype.reset=function(){return this.rn=0,this.bn={},this.co=0,this.cd=0,this},__decorate([Common.timeRefresh()],t.prototype,"cd",void 0),t}();i.ShopVo=t,__reflect(t.prototype,"UltimateBattle.ShopVo")}(UltimateBattle||(UltimateBattle={}));var THH20=function(){function i(){}return i.FK35=function(t){var e=t.avatar_vipshop;i.vipshop=e},i}();__reflect(THH20.prototype,"THH20");var P8=function(){function t(){}return t.A8=10001,t.A9=10002,t.A4=10003,t.A1=10004,t.A2=10005,t.A10=10006,t.A11=10007,t.A13=11001,t.A12=11002,t.A7=11003,t.A5=11004,t.A6=11005,t.A3=11006,t.A15=11007,t.A14=11008,t}();__reflect(P8.prototype,"P8");var VipController=function(e){function t(){var t=e.call(this)||this;return t.vipProxy=new THH29(t),App.VM.register(O7.I40,"VipInfoView",t,K17.UI_Main_TOP),t.rgF(P8.A13,t.GP81,t),t.rgF(P8.A12,t.GN93,t),App.VM.register(O7.F72,"VipRechargeView",t,K17.UI_Main_TOP),t.rgF(P8.A7,t.GI17,t),t.rgF(P8.A5,t.GG42,t),App.VM.register(O7.I56,"VipGiftView",t,K17.UI_Main_TOP),App.VM.register(O7.HH15,"VipGiftBuyTipsView",t,K17.UI_Popup),App.VM.register(O7.HH5,"QRCode",t,K17.UI_Tips_Top),t.rgF(P8.A15,t.GX96,t),t.rgF(P8.A14,t.GW76,t),t.rgF(P8.A8,t.GP82,t),t.rgF(P8.A9,t.GP83,t),t.rgF(P8.A4,t.GT71,t),t.rgF(P8.A1,t.GR66,t),t.rgF(P8.A2,t.GR67,t),t.rgF(P8.A10,t.GP84,t),t.rgF(P8.A11,t.GP85,t),t}return __extends(t,e),t.prototype.GP81=function(t){App.VM.open(O7.I40,t);var e=App.CM.gtM(O6.B82);e.isHide=!0,e.notify()},t.prototype.GN93=function(){App.VM.close(O7.I40)},t.prototype.GI17=function(){var t=App.CM.gtM(O6.A4);t&&t.openState&&0==t.actData.ZJ93()?0<t.actData.ZHH64()?App.VM.open(O7.A41):App.VM.open(O7.F72):App.VM.open(O7.F72)},t.prototype.GG42=function(){App.VM.close(O7.F72)},t.prototype.GX96=function(){App.VM.open(O7.HH5)},t.prototype.GW76=function(){App.VM.close(O7.HH5)},t.prototype.GP82=function(t){if(P7.FF59()){App.CM.gtM(O6.B82);this.vipProxy.GP82(t)}},t.prototype.GP83=function(t,e){if(t&&t.head&&200==t.head.state){App.VM.isOpen(O7.B78)&&App.VM.close(O7.B78);var i=App.CM.gtM(O6.B82),s=t.body;i.avatarInfo.vg.push(s.v),i.notify(P4.N47),P5.sIs(s.o)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT71=function(t){if(t&&t.head&&200==t.head.state){var e=App.CM.gtM(O6.B82),i={fr:t.body.fr};e.ZK27(i),e.notify(P4.P68),P18.sDP(O3.tr(6216))}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR66=function(t){"fth5"!==platform.name&&"japan"!==platform.name&&"english"!==platform.name&&"wakool"!==platform.name&&"freetop"!==platform.name&&"ft7477"!==platform.name&&"youle"!==platform.name&&"my1737"!==platform.name&&"huanyu"!==platform.name&&"militop"!==platform.name&&"btgame"!==platform.name&&"sdw"!==platform.name&&"gaga"!==platform.name||platform.collect("InitiateCheckout"),this.vipProxy.GR66(t)},t.prototype.GR67=function(t,e){if(t&&t.head&&200==t.head.state){var i,s=t.body.gold,o=t.body.give,r=App.CM.gtM(O6.B97),n=App.CM.gtM(O6.B82),a=K18.FE65(e),h=r.account,p=n.avatarInfo.id,l=a.price,c=r.channel,u=r.lastServer.id,d=r.lastServer.ne;if("fth5"===platform.name||"japan"===platform.name||"english"===platform.name)i={uid:window.sdkuser.uid,uname:window.sdkuser.uname,gameId:platform.gameId,productId:e+"",acc:h+"",aid:p+"",roleName:n.avatarInfo.n,money:100*l+"",channel:c+"",serid:u+"",gold:s+"",give:o+""};else if("wakool"===platform.name||"freetop"===platform.name)i={uid:window.sdkuser.uid,uname:window.sdkuser.uname,gameId:platform.gameId,productId:e+"",acc:h+"",aid:p+"",roleName:n.avatarInfo.n,money:a.change+"",channel:c+"",serid:u+"",gold:s+"",give:o+"",extendMoney:l+""};else if("shareit"===platform.name){var v=0;if("IN"==window.shareInfo.country_code)v=a.change;else{if("ID"!=window.shareInfo.country_code)return void P18.sDP(O3.tr(6820),!0);v=a.change2}i={gameId:platform.gameId,productId:e+"",acc:h+"",aid:p+"",roleName:n.avatarInfo.n,money:l+"",extendMoney:v+"",channel:c+"",serid:u+"",gold:s+"",give:o+"",countryCode:window.shareInfo.country_code,currencyCode:window.shareInfo.country_code+"R"}}else if("ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"huanyu"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name){var f=App.CM.gtM(O6.B89).myLegion.legion;i={gameId:platform.gameId,productId:e+"",acc:h+"",aid:p+"",roleName:n.avatarInfo.n,money:100*l+"",channel:c+"",serid:u+"",serName:d+"",gold:s+"",give:o+"",vipLevel:n.avatarInfo.v,roleLevel:n.avatarInfo.l,guildName:f?f.name:""}}else i={gameId:platform.gameId,productId:e+"",productName:O3.tr(6218,s),productDesc:O3.tr(6218,s),acc:h+"",aid:p+"",roleName:n.avatarInfo.n,roleLevel:n.avatarInfo.l,money:l+"",channel:c+"",serid:u+"",serName:d+"",gold:s+"",give:o+"",vipLevel:n.avatarInfo.v,has_gold: n.avatarInfo.g};this.GP84(i)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP84=function(t){this.vipProxy.GP84(t)},t.prototype.GP85=function(t,e){if(0!==t.s)return console.error("创建订单出错!"),void P18.sDP(O3.tr(6217),!0);var i=K18.FE65(e.productId),s=i.name?i.name:O3.tr(6218,e.gold);if("fth5"===platform.name||"insgame"===platform.name||"japan"===platform.name||"english"===platform.name){var o=t.r.chargeConfig,r=t.r.signature;platform.pay(o,r)}else if("shareit"===platform.name){var n={merchantId:t.r.merchantId,orderId:t.r.orderId,amount:e.extendMoney,currency:e.currencyCode,subject:e.productId,token:t.r.token,countryCode:e.countryCode,env:"Prod",body:O3.tr(6218,e.gold)};platform.pay(n)}else if("wxgame"===platform.name){n={game_no:a=t.r,product_id:e.productId,order_money:100*Number(e.money),order_name:s,role_id:e.aid,role_name:e.roleName,role_level:e.roleLevel,server_id:e.serid,server_name:e.serName,vip_level:e.vipLevel,ext:""+a,has_gold: e.has_gold};platform.pay(n)}else if("nativeAndroid"===platform.name){var a=t.r;n={role_level:e.roleLevel,productId:e.productId,order_desc:s,product_name:s,role_id:e.aid,game_no:a,pay_money:100*Number(e.money),order_name:s,role_name:e.roleName,server_name:e.serName,server_id:e.serid,ext:""+a};platform.pay(n)}else if("nativeVivo"===platform.name){var h=t.r;n={serverId:e.serid,serverName:e.serName,roleId:e.aid,roleName:e.roleName,roleLevel:e.roleLevel,productId:e.productId,productName:s,productDesc:s,payMoney:100*Number(e.money),ext:h.orderId,accessKey:h.accessKey,tradeNo:h.tradeNo};platform.pay(n)}else if("awy"===platform.name){var p=App.CM.gtM(O6.B97);n={game_no:a=t.r,order_money:100*Number(e.money),order_name:s,role_name:e.roleName,server_id:e.serid,ext:p.account};platform.pay(n)}else if("wakool"===platform.name||"freetop"===platform.name){var l={product_id:(o=t.r.chargeConfig).product_id,product_desc:O3.tr(6218,e.gold),server_id:o.server_id,server_name:o.server_name,role_id:o.role_id,role_name:o.role_name,game_no:o.order_id,order_money:o.amount,extra:o.extra};platform.pay(l,e.extendMoney)}else if("qq"===platform.name||"wanba"===platform.name){n={game_no:a=t.r,product_id:e.productId,order_money:100*Number(e.money),order_name:e.productId,role_name:e.roleName,role_id:e.aid,server_name:e.serName,server_id:e.serid,ext:""+a};platform.pay(n)}else if("ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"huanyu"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name){o=t.r.chargeConfig;var c={server_id:Number(e.serid),server_name:e.serName,role_id:Number(e.aid),role_name:e.roleName,role_level:e.roleLevel,vip_level:e.vipLevel,guild_name:e.guildName,game_no:o.order_id,order_money:Number(e.money),product_id:o.product_id,product_name:s,product_desc:O3.tr(6218,e.gold),extra:o.extra,paychannel:"",type:1};platform.pay(c)}else{n={game_no:a=t.r,product_id:e.productId,order_money:100*Number(e.money),order_name:s,role_name:e.roleName,role_id:e.aid,server_name:e.serName,role_level:e.roleLevel,server_id:e.serid,ext:""+a};platform.pay(n)}},t}(TE11);__reflect(VipController.prototype,"VipController");var THH29=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.P68,e.GT71,e),e}return __extends(t,i),t.prototype.GP82=function(t){var e={type:P4.N46,body:{vip:t}},i={};i.vipLv=t,this.rSMO(P4.N47,this.GP83,this,i),this.sSM(e)},t.prototype.GP83=function(t,e){this.apF(P8.A9,t,e)},t.prototype.GT71=function(t){this.apF(P8.A4,t)},t.prototype.GR66=function(t){var e={type:P4.J64,body:{pid:t}},i={};i.pid=t,this.rSMO(P4.J65,this.GR67,this,i),this.sSM(e)},t.prototype.GR67=function(t,e){this.apF(P8.A2,t,e.pid)},t.prototype.GP84=function(t){this.rSMO(platform.createOrderUrl,this.GP85,this,t),this.sendHttpMsg(platform.createOrderUrl,t)},t.prototype.GP85=function(t,e){this.apF(P8.A11,t,e)},t}(TG80);__reflect(THH29.prototype,"THH29");var THH34=function(){function u(){}return u.FK45=function(t){return K18.FK45(t)},u.FK20=function(t){var e=App.CM.gtM(O6.B82),i=!1;if(!e.avatarInfo.vg||e.avatarInfo.vg.length<=0)return i;for(var s=e.avatarInfo.vg,o=0;o<s.length;o++)if(t==s[o]){i=!0;break}return i},u.FL15=function(t){switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:return{img:"v1_img_viplibao_png",x:40,y:5}}return{img:"",x:0,y:0}},u.FL16=function(t){switch(t){case 1:return"v1_fonts_viplibao_png";case 2:return"v1_fonts_viplibao2_png";case 3:return"v1_fonts_viplibao3_png";case 4:return"v1_fonts_viplibao4_png";case 5:return"v1_fonts_viplibao5_png";case 6:return"v1_fonts_viplibao6_png";case 7:return"v1_fonts_viplibao7_png";case 8:return"v1_fonts_viplibao8_png";case 9:return"v1_fonts_viplibao9_png";case 10:return"v1_fonts_viplibao10_png";case 11:return"v1_fonts_viplibao11_png";case 12:return"v1_fonts_viplibao12_png"}return""},u.FG56=function(){var t=App.CM.gtM(O6.B82),e=t.avatarInfo.fr,i=App.CM.gtM(O6.B66),s=new Array;if(!K18.recharge)return s;var o=K18.FF86(platform.channel);for(var r in o){var n=o[r];if(1==n.show&&!(t.avatarInfo.v<n.vipunlock)){var a={};a.pid=n.pid,a.price=n.price,a.icon=n.icon?n.icon:"v1_img_kuang_bai_png",a.des1=O3.tr(5631,n.gold),a.money=O3.tr(5632,n.price),a.sort=n.sort;var h=n.type;if(1==h){var p=n.pid;0<n.vipunlock?(a.des2=O3.tr(5633,n.give),a.typeIcon="v1_img_haungse_png",a.typeDes=O3.tr(5634)):-1==e.indexOf(p)?(a.des2=O3.tr(5635,n.give),a.typeIcon="v1_img_hongse_png",a.typeDes=O3.tr(5636)):(a.des2=O3.tr(5637),a.typeIcon="v1_img_luse_png",a.typeDes=O3.tr(5638))}else if(2==h||3==h){if(2==h){var l=Math.ceil(i.monthCd/86400);a.des1=0<l?O3.tr(5639,l):O3.tr(5640,a.des1)}a.typeIcon="v1_img_luse_png",a.typeDes=O3.tr(5638);var c=J16.gIV("monthlyLoginBonus");a.des2=O3.tr(5641,M18.FL28(c,":")[1])}else{if(4==h)continue;if(6==h){if(i.extremeCardData.isBuy)continue;a.typeIcon="v1_img_luse_png";c=J16.gIV("extremeLoginBonus");a.typeDes=O3.tr(5638),a.des1=O3.tr(7399,a.des1),a.des2=O3.tr(5641,M18.FL28(c,":")[1])}}s.push(a)}}return s=s.sort(u.orderBySort)},u.orderBySort=function(t,e){return t.sort<e.sort?-1:t.sort>e.sort?1:0},u.FK40=function(){var t=App.CM.gtM(O6.B82),e=O4.getLv(),i=K18.init.animalTipsLv.value,s=parseInt(M18.FL28(i,",")[0]),o=parseInt(M18.FL28(i,",")[1]),r=O4.getVipLv(),n=e-t.orLevel;s<=e&&e<o&&1!=K18.vip[r].openanimal&&n%parseInt(K18.init.animalLvInterval.value)==0&&(t.isHide=!1,t.notify())},u.FF50=function(t){var e=M18.FL28(t,";","|"),i=[];for(var s in e){var o=e[s],r={};o instanceof String?r.id=o:(r.id=o[0],r.we=o[1],r.h=o[2],r.wi=o[3]),i.push(r)}return i},u.FB49=function(t){return K18.recharge[t]},u.FJ1=function(){for(var t=K18.FL39(),e=1,i=1;i<=t;i++)if(1==K18.vip[i].openanimal){e=i;break}return e},u}();__reflect(THH34.prototype,"THH34");var RechargeRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="RechargeRenderSkin",t.btnBuy.size="32",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL76,this)},t.prototype.close=function(){this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZL76,this)},t.prototype.ZL76=function(){App.CM.apF(O6.C29,P8.A1,this.data.pid)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.des1Lb.textFlow=M18.HTP.parser(this.data.des1),this.des2Lb.textFlow=M18.HTP.parser(this.data.des2),this.typeDes.textFlow=M18.HTP.parser(this.data.typeDes)},t}(eui.ItemRenderer);__reflect(RechargeRender.prototype,"RechargeRender");var VipEquipItem=function(e){function t(){var t=e.call(this)||this;return t.iconBg="",t.icon="",t.label="",t.txtColor="",t.txtSize="",t}return __extends(t,e),t}(eui.Component);__reflect(VipEquipItem.prototype,"VipEquipItem");var VipGiftItemView=function(h){function t(){var t=h.call(this)||this;return t.skinName="VipGiftItemSkin",t}return __extends(t,h),t.prototype.childrenCreated=function(){h.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),this.dgReward.dataProvider=this.dataSource=new eui.ArrayCollection,this.dgReward.itemRenderer=ItemIcon,this.btnBuy.label=O3.tr(7791)},t.prototype.remove=function(){this.dataSource.removeAll(),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this)},t.prototype.dataChanged=function(){h.prototype.dataChanged.call(this),P16.FL31(this.gOringin,N12.itemId.gold,this.data.orign,{lackTextTemplate:O3.tr(7787),textTemplate:O3.tr(7787)}),P16.FL31(this.gDiscount,N12.itemId.gold,this.data.discount,{lackTextTemplate:O3.tr(7788),textTemplate:O3.tr(7788)}),this.labViplv.text=this.data.vipLv+"",this.btnBuy.visible=this.imgHave.visible=!1,this.data.state==J13.A2?this.imgHave.visible=!0:this.data.state&&(this.btnBuy.visible=!0);var t=this.data.goods[0],e=N12.gID(t.k),i=TF59.FC9(e.quality);this.itemicon.data={itemData:{data:e,ct:t.v,texiao:i},isBottom:!1};for(var s=[],o=1;o<this.data.goods.length;o++){var r=this.data.goods[o],n=N12.gID(r.k),a=TF59.FC9(n.quality);s.push({itemData:{data:n,ct:r.v},texiao:a,isBottom:!1})}this.dataSource.replaceAll(s)},t.prototype.onClickBuy=function(){var t=App.CM.gtM(O6.B82);t.avatarInfo.v>=this.data.vipLv?t.useGoldBuyVipGiftTips?App.CM.apF(O6.B82,L13.A77,this.data.index):App.VM.open(O7.HH15,this.data.index):P18.sDP(O3.tr(7799))},t}(eui.ItemRenderer);__reflect(VipGiftItemView.prototype,"VipGiftItemView");var JumpRechargeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="TipDialogSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4996))},t.prototype.open=function(t){s.prototype.open.call(this),this.msgData=t,this.btnCancel.visible=this.btnCancel.includeInLayout=!1,this.msg.textFlow=M18.HTP.parser(t.content),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doConfirm,this),t.open?(this.btnConfirm.visible=this.btnConfirm.includeInLayout=!0,this.btnConfirm.label=this.btnConfirm.label=O3.tr(4997),this.btnConfirm.left=148):this.btnConfirm.visible=this.btnConfirm.includeInLayout=!1},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doConfirm,this)},t.prototype.doConfirm=function(){var t=this.msgData.name;platform.setClipboardData(t,function(){P18.sDP(O3.tr(5650))}),this.closeSelf()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(JumpRechargeView.prototype,"JumpRechargeView");var VipGiftBuyTipsView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="ShootRangeTipSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B82)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.lbTitle.text=O3.tr(7104),this.ckDot.label=O3.tr(7793),this.btnConfirm.label=O3.tr(7794),this.btnCancel.label=O3.tr(7795),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.ckDot.addEventListener(egret.TouchEvent.CHANGE,this.save,this),this.ckDot.selected=this.model.useGoldBuyVipGiftTips},t.prototype.open=function(t){s.prototype.open.call(this),this.index=t;var e=THH20.vipshop[t];this.labItem.textFlow=O3.tr2(7792,e.price2)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCC,this),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ58,this),this.ckDot.removeEventListener(egret.TouchEvent.CHANGE,this.save,this),s.prototype.close.apply(this,t)},t.prototype.save=function(){this.model.useGoldBuyVipGiftTips=this.ckDot.selected},t.prototype.oCC=function(){App.VM.GY64(this),this.dispatchEventWith("CANCEL",!1)},t.prototype.ZQ58=function(){App.VM.GY64(this),App.CM.apF(O6.B82,L13.A77,this.index),this.dispatchEventWith("CONFIRM",!1)},t}(BaseEuiView);__reflect(VipGiftBuyTipsView.prototype,"VipGiftBuyTipsView");var VipGiftView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="VipGiftSkin",i.sGN("release_vipgift"),i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.B82)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.ZM69(this.oCC,this),this.dlg.ZQ14(this.oCC,this),this.dlg.ZHH61(this.gView),this.dlg.ZU11().bold=!0,this.dlg.title=O3.tr(7786),this.cbRed.label=O3.tr(7789),this.cbRed.addEventListener(egret.Event.CHANGE,this.onSwitchRed,this),this.list=new CommonListBase({render:VipGiftItemView,gap:5,width:this.gList.width,height:this.gList.height,arrowScale:1}),this.gList.addChild(this.list)},t.prototype.open=function(){s.prototype.open.call(this),this.list.open(),this.cbRed.selected=!this.model.showGiftRed,this.GX5(this.model)},t.prototype.close=function(){this.cbRed.removeEventListener(egret.Event.CHANGE,this.onSwitchRed,this),this.list.close(),s.prototype.close.call(this)},t.prototype.uBM=function(t){t instanceof TG12&&this.GX5(t)},t.prototype.GX5=function(t){var e=[];for(var i in THH20.vipshop){var s=THH20.vipshop[i],o=t.ZN37(parseInt(i),s.viplv),r=parseInt(i);o==J13.A2&&(r+=255),e.push({state:o,goods:P7.str2kv(s.goods),vipLv:s.viplv,orign:s.price1,discount:s.price2,index:parseInt(i),w:r})}e.sort(function(t,e){return t.w-e.w}),this.list.rfL(e)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onSwitchRed=function(){App.CM.apF(O6.B82,L13.A65,!this.cbRed.selected)},t}(BaseEuiView);__reflect(VipGiftView.prototype,"VipGiftView");var VipInfoView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_vip"),i.skinName="VipInfoSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4444)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4438)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4439)),this.recBtn.label=O3.tr(4442),this.getRewarBtn.label=O3.tr(4443),this.btnGift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGift,this)},t.prototype.initData=function(){s.prototype.initData.call(this),this.labelArray=new Array;for(var t=0;t<8;t++)this.labelArray[t]=new eui.Label;this.giftItemCollection=new eui.ArrayCollection,this.giftGroup.itemRenderer=ItemIcon,this.giftGroup.dataProvider=this.giftItemCollection},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.parent&&this.parent.setChildIndex(this,this.parent.numChildren),this.sendVip=t[0],this.recBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN27,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.getRewarBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getVipReward,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMak.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.B82);this.ZE70(i),"fth5"===platform.name&&platform.collect("ContentView")},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t),t instanceof TG12&&e===P4.N47){var i=O4.FE68();this.ZC80(i)}if(t instanceof TG12&&e===P4.P68){i=O4.FE68();this.ZE70(t)}t instanceof TG12&&(this.btnGift.imgNew.visible=t.ZV18())},t.prototype.ZE70=function(t){var e=t.avatarInfo;this.vipMin.text=String(e.v);var i=THH34.FK45(e.v),s=e.v+1;if(THH34.FK45(s)){this.vipProBar.minimum=0,this.vipProBar.maximum=i.exp,this.vipProBar.value=e.vp,this.proLb.textFlow=M18.HTP.parse(O3.tr(4440,this.vipProBar.value,this.vipProBar.maximum));var o=void 0;o="fth5"===platform.name||"japan"===platform.name||P7.FM14()||"wakool"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name?O3.tr(2900,100*(this.vipProBar.maximum-this.vipProBar.value),s):O3.tr(2900,this.vipProBar.maximum-this.vipProBar.value,s),this.desLb.textFlow=M18.HTP.parse(o)}else this.vipProBar.minimum=0,this.vipProBar.maximum=e.vp,this.vipProBar.value=e.vp,this.proLb.textFlow=M18.HTP.parse(O3.tr(4440,this.vipProBar.value,"----")),this.desLb.textFlow=M18.HTP.parse(O3.tr(2901));var r=this.sendVip||O4.FE68();this.ZC80(r)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.recBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN27,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.getRewarBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getVipReward,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMak.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnGift.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGift,this),this.hero1&&(this.imgHero1.removeChildren(),this.hero1.destory(),this.hero1=null),this.hero2&&(this.imgHero2.removeChildren(),this.hero2.destory(),this.hero2=null),this.hero3&&(this.imgHero3.removeChildren(),this.hero3.destory(),this.hero3=null),this.giftItemCollection.removeAll(),this.sendVip=null},t.prototype.doLeft=function(){var t=this.curVip-1;this.ZC80(t)},t.prototype.ZC80=function(t){var e=App.CM.gtM(O6.B82),i=e.avatarInfo.v+5;i>=K18.FL39()&&(i=K18.FL39());var s=K18.FL40();if(!(t<s||i<t)){t<=s?this.leftBtn.visible=!1:(this.leftBtn.visible=!0,this.showLeftRp(t)),i<=t?this.rightBtn.visible=!1:(this.rightBtn.visible=!0,this.showRightRp(t));var o=e.avatarInfo.v,r=t,n=THH34.FK45(r);this.curVip=r,this.vipTitleLb.textFlow=M18.HTP.parse(O3.tr(4441,r));var a=n.describe;if(this.libaoziImg.source=n.arttext,1==n.ismodel){this.gpHero.visible=!0,this.libaotuImg.visible=!1;var h=THH34.FF50(n.show);if(1==h.length){this.imgHero2.visible=!1,this.imgHero3.visible=!1,this.imgHero1.visible=!0,this.hero1&&(this.imgHero1.removeChildren(),this.hero1.destory(),this.hero1=null),this.hero1=new FightGameObject;var p={x:0,y:0,dir:Dir.br,objType:P13.A6};this.hero1.setBaseData(p),h[0].bt=BehaviourType.Attack_d,h[0].sr=1,this.hero1.setData(h[0],this.imgHero1),this.hero1.action=Action.Stand}else if(2==h.length){this.imgHero1.visible=!1,this.imgHero2.visible=!0,this.imgHero3.visible=!0,this.hero2&&(this.imgHero2.removeChildren(),this.hero2.destory(),this.hero2=null),this.hero3&&(this.imgHero3.removeChildren(),this.hero3.destory(),this.hero3=null),this.hero2=new FightGameObject,this.hero3=new FightGameObject;p={x:0,y:0,dir:Dir.br,objType:P13.A6};this.hero2.setBaseData(p),h[0].bt=BehaviourType.Attack_d,this.hero2.setData(h[0],this.imgHero2),this.hero3.setBaseData(p),h[1].bt=BehaviourType.Attack_d,this.hero3.setData(h[1],this.imgHero3)}}else this.gpHero.visible=!1,this.libaotuImg.visible=!0,this.libaotuImg.source=n.show;if(a&&0<a.split("|").length){var l=a.split("|");this.vipDesGroup.removeChildren();for(var c=0;c<l.length;c++)if(l[c]){var u=this.labelArray[c];u.size=22,u.textColor=15058860,u.textFlow=M18.FG71(l[c]),u.textAlign=egret.HorizontalAlign.LEFT,this.vipDesGroup.addChild(u)}}var d=n.vipgift,v=new Array,f=!0;if(P7.FM14()&&(f=!1),d&&0<d.split(";").length){for(l=d.split(";"),c=0;c<l.length;c++){var g=l[c].split(":")[0],m=l[c].split(":")[1],y=N12.gID(g),A={};A.data=y,A.ct=Number(m);var b={};b.itemData=A,b.isBottom=f,v.push(b)}this.giftItemCollection.replaceAll(v)}if(o<r)return this.getRewarBtn.imgNew.visible=!1,this.getRewarBtn.visible=!0,this.getRewarBtn.touchEnabled=!1,this.getRewarBtn.bgStr="v1_btn_green_1_hui_png",this.getRewarBtn.colour=_ccBtn.canary,void(this.gainRewardImg.visible=!1);var T=THH34.FK20(r);this.gainRewardImg.visible=T?(this.getRewarBtn.visible=!1,!(this.getRewarBtn.imgNew.visible=!1)):(this.getRewarBtn.imgNew.visible=!0,this.getRewarBtn.visible=!0,this.getRewarBtn.touchEnabled=!0,!(this.getRewarBtn.bgStr="v1_btn_green_1_png"))}},t.prototype.showLeftRp=function(t){for(var e=App.CM.gtM(O6.B82),i=!1,s=0;s<t;s++){if(K18.FK45(s)&&!(s>e.avatarInfo.v)){var o=e.avatarInfo.vg;if(!o||0==o.length||-1==o.indexOf(s)){i=!0;break}}}this.leftBtn.imgNew.visible=i},t.prototype.showRightRp=function(t){for(var e=App.CM.gtM(O6.B82),i=K18.FL39(),s=!1,o=t+1;o<=i;o++){if(K18.FK45(o)&&!(o>e.avatarInfo.v)){var r=e.avatarInfo.vg;if(!r||0==r.length||-1==r.indexOf(o)){s=!0;break}}}this.rightBtn.imgNew.visible=s},t.prototype.doRight=function(){var t=this.curVip+1;this.ZC80(t)},t.prototype.closeSelf=function(){this.apF(P8.A12)},t.prototype.getVipReward=function(){var t=this.curVip;this.apF(P8.A8,t)},t.prototype.ZN27=function(){this.apF(P8.A7)},t.prototype.onClickGift=function(){App.VM.open(O7.I56)},t}(BaseEuiView);__reflect(VipInfoView.prototype,"VipInfoView");var WarOfAttrition,VipRechargeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="VipRechargeSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4998)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4999)),this.privilegeBtn.label=O3.tr(5821),this.descBtn.label=O3.tr(8985)},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemCollection=new eui.ArrayCollection,this.itemList.dataProvider=this._itemCollection,this.itemList.itemRenderer=RechargeRender},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.parent&&this.parent.setChildIndex(this,this.parent.numChildren),this.privilegeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openVipInfo,this),this.descBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.descBtnEvent,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this);var i=App.CM.gtM(O6.B82);this.ZE70(i)},t.prototype.uBM=function(t){s.prototype.uBM.call(this,t),t instanceof TG12&&this.ZE70(t)},t.prototype.ZE70=function(t){var e=t.avatarInfo;this.curVip.text=String(e.v);var i=THH34.FK45(e.v),s=e.v+1;THH34.FK45(s)?(this.vipProBar.minimum=0,this.vipProBar.maximum=i.exp,this.vipProBar.value=e.vp,this.proLb.text=this.vipProBar.value+"/"+this.vipProBar.maximum,"fth5"===platform.name||"japan"===platform.name||P7.FM14()||"wakool"===platform.name||"freetop"===platform.name||"ft7477"===platform.name||"youle"===platform.name||"my1737"===platform.name||"militop"===platform.name||"btgame"===platform.name||"sdw"===platform.name||"gaga"===platform.name?this.vipLb.textFlow=M18.HTP.parse(O3.tr(5e3,String(100*(this.vipProBar.maximum-this.vipProBar.value)),s)):this.vipLb.textFlow=M18.HTP.parse(O3.tr(5e3,String(this.vipProBar.maximum-this.vipProBar.value),s))):(this.vipProBar.minimum=0,this.vipProBar.maximum=e.vp,this.vipProBar.value=e.vp,this.proLb.text=this.vipProBar.value+"/----",this.vipLb.textFlow=M18.HTP.parse(O3.tr(5001)));var o=THH34.FG56();this._itemCollection.replaceAll(o),this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-538;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+538;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.privilegeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openVipInfo,this),this.descBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.descBtnEvent,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this._itemCollection.removeAll()},t.prototype.closeSelf=function(){this.apF(P8.A5)},t.prototype.openVipInfo=function(){this.apF(P8.A13)},t.prototype.descBtnEvent=function(){var t={title:O3.tr(8986),content:O3.tr(8987)};App.CM.apF(O6.C18,O10.A24,t)},t}(BaseEuiView);__reflect(VipRechargeView.prototype,"VipRechargeView"),function(t){var e=function(){function i(){}return i.FK35=function(t){var e=t.legionduel_init;i.serverDate=parseInt(e.serverDate.value),i.legionLv=parseInt(e.legionLv.value),i.battleInterval=parseInt(e.battleInterval.value)},i.isOpen=function(){var t=App.CM.gtM(O6.B89);if(t&&t.myLegion&&t.myLegion.legion){var e=App.CM.gtM(O6.B43);return t.myLegion.legion.lv>=i.legionLv&&e.serOpenDay+1>=i.serverDate}return!1},i.serverDate=0,i.legionLv=0,i.battleInterval=255,i}();t.Config=e,__reflect(e.prototype,"WarOfAttrition.Config")}(WarOfAttrition||(WarOfAttrition={})),function(t){var e=function(){function t(){}return t.OPEN=10001,t.UPDATE_LEGION_LEVEL=10002,t.LOAD_STATE=20001,t.LOAD_STATE_RES=20002,t}();t.Const=e,__reflect(e.prototype,"WarOfAttrition.Const")}(WarOfAttrition||(WarOfAttrition={})),function(o){var t=function(s){function t(){var t=s.call(this)||this;App.VM.register(O7.D78,"WarOfAttritionView",t,K17.UI_Main_TOP),App.VM.register(O7.A54,"WarOfAttritionEnrollView",t,K17.UI_Main_TOP),App.VM.register(O7.A33,"WarOfAttritionMembersView",t,K17.UI_Main_TOP);var e=new o.Model(t);e.aLV(O7.I39),e.aLV(O7.I64),e.aLV(O7.I63),e.aLV(O7.G80),e.aLV(O7.D78),e.aLV(O7.A54),e.aLV(O7.A33);var i=t.proxy=new o.Proxy(t);return t.rgF(o.Const.LOAD_STATE,i.loadState,i),t.rgF(o.Const.LOAD_STATE_RES,t.GU20,t),t.rgF(P4.L48,i.load,i),t.rgF(P4.C59,i.look,i),t.rgF(P4.L50,i.enroll,i),t.rgF(P4.D33,i.member,i),t.rgF(o.Const.OPEN,t.open,t),t.rgF(o.Const.UPDATE_LEGION_LEVEL,t.GV33,t),t}return __extends(t,s),t.prototype.GV33=function(){!this.gtM().init&&o.Config.isOpen()&&this.apF(P4.L48)},t.prototype.gtM=function(){return s.prototype.gtM.call(this)},t.prototype.open=function(){if(TG22.FL2(!0))if(o.Config.isOpen()){var t=this.gtM();0==t.st||1==t.st?P7.isGetView(O7.A54)&&App.VM.open(O7.A54):3==t.st||2==t.st?P7.isEmpty(t.mem)?P18.sDP(O3.tr(8004)):P7.isGetView(O7.D78)&&App.VM.open(O7.D78):t.st<0&&P18.sDP(O3.tr(3205))}else P18.sDP(O3.tr(8009,o.Config.serverDate,o.Config.legionLv))},t.prototype.GU20=function(t){this.GY21(t)},t.prototype.GY21=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=this.gtM();0<t.body.st?(this.proxy.register(),e.init||this.apF(P4.L48)):(e.sg=0,App.VM.close(O7.A54),App.VM.close(O7.D78),e.reset({men:{},rec:{},mt:0,rn:0,cd:0},!1),this.proxy.unregister()),e.update(t.body)}},t.prototype.loadRes=function(t){if(200!=t.head.state)Log.trace("无法加载车轮战数据:",t);else{var e=this.gtM();t.body.ld?(e.update(t.body,!1),e.load(t.body.ld)):e.update(t.body)}},t.prototype.GY75=function(t){200!=t.head.state?App.CM.apF(O6.B87,L10.A4,t):this.gtM().update(t.body)},t.prototype.lookRes=function(t){var s=this;if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var o,e=App.VM.gOV(O7.D78);e&&(o=e.getCurState());var i=t.body,r=i.at,n=i.fr,a=0==r?n.pis[0]:void 0;App.CM.apF(O6.B99,N1.A11,t.body.fr,{needResult:!1,type:P15.A5,sideAid:a},function(t,e){if(P7.isGetView(O7.A54)&&O7.D78){s.open();var i=App.VM.gOV(O7.D78);i&&i.setCurState(o)}}),this.gtM().update(t.body)}},t.prototype.GN94=function(t){200!=t.head.state?App.CM.apF(O6.B87,L10.A4,t):(App.VM.close(O7.A54),this.gtM().update(t.body))},t.prototype.GY66=function(t){200!=t.head.state?App.CM.apF(O6.B87,L10.A4,t):this.gtM().update(t.body,!0,t.head.protoType,t.body.fr)},t.prototype.GX97=function(t){if(200!=t.head.state)App.CM.apF(O6.B87,L10.A4,t);else{var e=t.body.mem;this.gtM().update(t.body,!0,t.head.protoType,e)}},t}(TE11);o.Controller=t,__reflect(t.prototype,"WarOfAttrition.Controller")}(WarOfAttrition||(WarOfAttrition={})),function(e){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.init=!1,e.st=-1,e.sg=0,e.rec={},e.mem={},e.round=0,e.mt=0,e.isOver=!1,e.rn=0,e}return __extends(t,i),t.prototype.load=function(t){this.init=!0,this.update(t)},t.prototype.reset=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.init=!1,this.update.apply(this,[t,e].concat(i))},t.prototype.update=function(t,e){void 0===e&&(e=!0);for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(this.st=P7.getValue(t.st,this.st),this.sg=P7.getValue(t.sg,this.sg),this.cd=P7.getValue(t.cd,this.cd),this.r=P7.getValue(t.r,this.r),this.lid=P7.getValue(t.lid,this.lid),this.mem=P7.getValue(t.mem,this.mem),this.rec=P7.getValue(t.rec,this.rec),this.mt=P7.getValue(t.mt,this.mt),this.rn=P7.getValue(t.rn,this.rn),t.m){var o=t.m.aid;this.mem[o]?P7.ObjectSet(this.mem[o],t.m):this.mem[o]=t.m}if(t.m2){o=t.m2.aid;this.mem[o]?P7.ObjectSet(this.mem[o],t.m2):this.mem[o]=t.m2}if(t.r){var r=t.r.t;this.rec[r]?P7.ObjectSet(this.rec[r],t.r):this.rec[r]=t.r,this.rec[r].fr||(this.rec[r].fr=[])}if(t.f){r=t.f.t;var n=t.f.c;this.rec[r]&&this.rec[r].fr?this.rec[r].fr[n-1]=t.f:Log.trace("异常的车轮战战斗数据")}this.round=Reincarnate.Utils.mapkeyMax(this.rec),this.isOver=!1,this.mt&&this.rec[this.mt]&&(1==this.rec[this.mt].bye||this.rec[this.mt].mc==this.rec[this.mt].fr.length)&&(this.isOver=!0),e&&this.notify.apply(this,i)},t.prototype.FL35=function(){return!!e.Config.isOpen()&&(1==this.st&&0==this.sg?1:0)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},__decorate([Common.timeRefresh()],t.prototype,"cd",void 0),t}(TG79);e.Model=t,__reflect(t.prototype,"WarOfAttrition.Model")}(WarOfAttrition||(WarOfAttrition={})),function(o){var t=function(i){function t(t){var e=i.call(this,t)||this;return e.regd=!1,e.rSM(P4.HH54,t.GY21,t),e}return __extends(t,i),t.prototype.register=function(){if(!this.regd){var t=this._controller;this.rSM(P4.L49,t.loadRes,t),this.rSM(P4.L51,t.GY75,t),this.rSM(P4.C60,t.lookRes,t),this.rSM(P4.J45,t.GN94,t),this.rSM(P4.HH55,t.GY66,t),this.rSM(P4.D34,t.GX97,t),this.regd=!0}},t.prototype.unregister=function(){var t=this._controller;this.ZM57(P4.L49,t.loadRes,t),this.ZM57(P4.L51,t.GY75,t),this.ZM57(P4.C60,t.lookRes,t),this.ZM57(P4.J45,t.GN94,t),this.ZM57(P4.HH55,t.GY66,t),this.ZM57(P4.D34,t.GX97,t),this.regd=!1},t.prototype.loadState=function(){var s=this;return new Promise(function(e,t){var i={};i.type=P4.J43,i.body={},s.rSMO(P4.J44,function(t){s.apF(o.Const.LOAD_STATE_RES,t),e("加载车轮战状态")},s),s.sSM(i)})},t.prototype.load=function(){var t={type:P4.L48,body:{}};this.sSM(t)},t.prototype.enroll=function(){var t={type:P4.L50,body:{}};this.sSM(t)},t.prototype.look=function(t){var e={type:P4.C59,body:{id:t}};this.sSM(e)},t.prototype.member=function(){var t={type:P4.D33,body:{}};this.sSM(t)},t}(TG80);o.Proxy=t,__reflect(t.prototype,"WarOfAttrition.Proxy")}(WarOfAttrition||(WarOfAttrition={}));var WarOfAttritionBattleView=function(e){function t(){var t=e.call(this)||this;return t.imgScale=.7,t.skinName="WarOfAttritionItemBattleSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data.index==Number.MAX_VALUE;this.icon1.visible=this.icon2.visible=this.lab1.visible=this.lab2.visible=this.btn.visible=this.imgVs.visible=!t,this.labState.visible=this.labWin1.visible=this.labWin2.visible=!1,t?(this.labState.visible=!0,this.imgBg.source="v1_bg_kelashen02bc_png",this.labState.visible=!0,this.labState.textFlow=M18.FG71(this.data.name)):(this.imgBg.source="v1_bg_kelashen02b_png",this.lab1.text=this.data.name,this.icon1.icon.source=this.data.icon,this.lab2.text=this.data.enemyName,this.icon2.icon.source=this.data.enemyIcon,this.data.win?(this.labWin1.visible=!0,this.labWin1.textFlow=O3.tr2(7986,this.data.wins)):(this.labWin2.visible=!0,this.labWin2.textFlow=O3.tr2(7986,this.data.enemyWins))),this.ZU73()},t.prototype.ZP78=function(){egret.Tween.removeTweens(this.group),egret.Tween.removeTweens(this.imgVs),egret.Tween.removeTweens(this),this.group.x=0,this.imgVs.scaleX=this.imgVs.scaleY=this.imgScale,this.height=90},t.prototype.ZU73=function(){this.ZP78();var t=P6.getTime()-this.data.clock,e=t<0?Math.abs(t):0,i=Math.max(0,t/860);if(i<1&&0<=i){this.imgVs.scaleX=this.imgVs.scaleY=.64,this.group.x=this.group.width,this.height=0,this.labWin1.visible=this.labWin2.visible=!1;var s=this.imgScale;egret.Tween.get(this).wait(e).to({height:90},300).setPosition(860*i),egret.Tween.get(this.group).wait(e).wait(300).to({x:0},400).setPosition(860*i),egret.Tween.get(this.imgVs).wait(e).wait(300).wait(400).to({scaleY:1.2*s,scaleX:1.2*s},80).to({scaleY:1*s,scaleX:1*s},80).call(this.updateLabWin,this).setPosition(860*i)}},t.prototype.updateLabWin=function(){this.data.index!=Number.MAX_VALUE&&((this.data.win?this.labWin1:this.labWin2).visible=!0)},t.prototype.remove=function(){this.ZP78(),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){if(App.CM.gtM(O6.B99).isSpFighting)return P18.sDP(O3.tr(5301)),!1;App.CM.apF(O6.A42,P4.C59,this.data.fightId)},t}(eui.ItemRenderer);__reflect(WarOfAttritionBattleView.prototype,"WarOfAttritionBattleView");var WarOfAttritionEnrollView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WarOfAttritionEnrollSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A42)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.title=O3.tr(7980),this.dlg.ZHH61(this.gView),this.dlg.ZM69(this.oCC,this),this.btnShop.bgStr=N15.FK12(P12.A1),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnUp,this),this.btnDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnDown,this),this.scroller.addEventListener(egret.Event.CHANGE,this.ZJ47,this),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.labTips.textFlow=O3.tr2(7975),this.labTr7978.textFlow=O3.tr2(7978)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t),this.GX5(this.model),this.ZJ47()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnShop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnUp,this),this.btnDown.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTurnDown,this),this.scroller.removeEventListener(egret.Event.CHANGE,this.ZJ47,this),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t){t instanceof WarOfAttrition.Model&&this.GX5(t)},t.prototype.GX5=function(t){this.labTr7978.visible=!1,this.btn.verticalCenter=385,this.btn.scaleX=this.btn.scaleY=1;var e=!0;0==t.st?(this.btn.label=O3.tr(7976),e=!1):1==t.st?1==t.sg?(this.labTr7978.visible=!0,this.btn.label=O3.tr(8262),this.btn.verticalCenter=395,this.btn.scaleX=this.btn.scaleY=.8):this.btn.label=O3.tr(7977):2==t.st?1==t.sg?(this.labTr7978.visible=!0,this.btn.label=O3.tr(8262),this.btn.verticalCenter=395,this.btn.scaleX=this.btn.scaleY=.8):(this.btn.label=O3.tr(7979),e=!1):3==t.st&&(1==t.sg?this.oCC():(this.btn.label=O3.tr(7979),e=!1)),this.btn.imgNew.visible=0<t.FL35(),this.btn.touchEnabled=e,this.btn.bgStr=e?"v1_btn_yellow_1_png":"v1_btn_greenh_1a_png"},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClick=function(){var t=this.model;0==t.sg?1==t.st&&App.CM.apF(O6.A42,P4.L50):1==t.st||2==t.st?App.VM.open(O7.A33):3==t.st&&(App.CM.apF(O6.A42,WarOfAttrition.Const.OPEN),this.oCC())},t.prototype.ZJ47=function(){this.btnUp.visible=0<this.gTips.scrollV;var t=this.labTips.height-this.scroller.height;this.btnDown.visible=0<t&&this.gTips.scrollV<t},t.prototype.onTurnUp=function(){this.turnpage(-1)},t.prototype.onTurnDown=function(){this.turnpage(1)},t.prototype.onClickShop=function(){App.VM.open(O7.HH98,O7.HH29,P12.A1)},t.prototype.turnpage=function(t){var e=this.gTips.scrollV+this.scroller.height*t,i=this.labTips.height-this.scroller.height;this.gTips.scrollV=Math.max(Math.min(i,e),0),this.ZJ47()},t}(BaseEuiView);__reflect(WarOfAttritionEnrollView.prototype,"WarOfAttritionEnrollView");var WarOfAttritionMembersItemView=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarOfAttritionMemberItemSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.labState.textFlow=O3.tr2(7978)},t.prototype.dataChanged=function(){var t;App.CM.gtM(O6.B89);switch(this.data.job){case 1:t=O3.tr(1522);break;case 2:t=O3.tr(1523);break;case 3:t=O3.tr(1524);break;default:t=""}App.CM.gtM(O6.B82);if(this.lbName.textFlow=M18.HTP.parse(O3.tr(1521,t,this.data.name)),this.lbPower.textFlow=M18.HTP.parse(O3.tr(1516,this.data.power)),this.lbDevote.textFlow=M18.HTP.parse(O3.tr(1525,this.data.devote)),this.imgIcon.source=this.data.icon,0<this.data.state){this.data.state<3600&&(this.data.state=3600);var e=P6.FJ11(1e3*this.data.state,4);this.lbOnLineState.textFlow=M18.HTP.parse(O3.tr(1514,e))}else this.lbOnLineState.textFlow=M18.HTP.parse(O3.tr(1515));this.labState.visible=this.data.signState},t.prototype.doOperation=function(){App.CM.apF(O6.B89,L11.B4,this.data.aId,this.operate)},t}(eui.ItemRenderer);__reflect(WarOfAttritionMembersItemView.prototype,"WarOfAttritionMembersItemView");var WarOfAttritionMembersView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName="WarOfAttritionMemberSkin",i}return __extends(t,r),t.prototype.initData=function(){},t.prototype.initUI=function(){r.prototype.initUI.call(this);var t={render:WarOfAttritionMembersItemView,width:this.gpList.width,height:this.gpList.height};this.myListView=new LegionListBase(t),this.gpList.addChild(this.myListView),this.dlg.ZM69(this.closeSelf.bind(this),this),this.dlg.title=O3.tr(4195)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this),this.myListView.open(),App.CM.apF(O6.B89,L11.A35),App.CM.apF(O6.A42,P4.D33),this.isOpen=!0},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r.prototype.uBM.call(this,t,e),t instanceof TG20)this.ZE88(t);else if(t instanceof WarOfAttrition.Model){var s=e[0],o=e[1];s==P4.D34&&(this.idList=o,this.GX5())}},t.prototype.GX5=function(){var i=this;this.idList&&this.memList&&(this.myListView.rfL(this.memList.map(function(t){var e=P7.copyTab(t);return e.signState=0<=i.idList.indexOf(t.aId),e}),this.isOpen),this.isOpen=!1)},t.prototype.ZE88=function(t){this.memList=t.memberMsg.memberList,this.GX5()},t.prototype.close=function(){r.prototype.close.call(this),this.myListView.destroy(),this.isOpen=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WarOfAttritionMembersView.prototype,"WarOfAttritionMembersView");var WarOfAttritionRecordView=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarOfAttritionItemRecordSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.labName.text=this.data.name,this.labPower.text=MonarchTest.Utils.FI83(this.data.power),this.labState.textFlow=O3.tr2(this.data.state?7993:7994),this.labFeats.textFlow=O3.tr2(this.data.wins||!this.data.state?7986:7992,this.data.wins)},t}(eui.ItemRenderer);__reflect(WarOfAttritionRecordView.prototype,"WarOfAttritionRecordView");var WarOfAttritionView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.round=1,i.maxRound=1,i.legionName="",i.lastMove=0,i.battleItemHeight=95,i.battleListData=[],i.skinName="WarOfAttritionSkin",i}return __extends(t,s),Object.defineProperty(t.prototype,"model",{get:function(){return App.CM.gtM(O6.A42)},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){this.dlg.ZQ14(this.oCC,this),this.dlg.ZM69(this.oCC,this),this.dlg.title=O3.tr(7980),this.btnShop.bgStr=N15.FK12(P12.A1),this.btnShop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.labTr7988.textFlow=O3.tr2(7988),this.labTr7989.textFlow=O3.tr2(7989),this.labTr7990.textFlow=O3.tr2(7990),this.labTr7991.textFlow=O3.tr2(7991),this.ckOnlyMe.label=O3.tr(7985),this.listBattle=new CommonListBase({render:WarOfAttritionBattleView,width:this.gListBattle.width,height:this.gListBattle.height,arrowScale:1,gap:5}),this.gListBattle.addChild(this.listBattle),this.listBattle.scContent.addEventListener(egret.Event.CHANGE,this.onChange,this),this.listRecord=new CommonListBase({render:WarOfAttritionRecordView,width:this.gListBattle.width,height:this.gListBattle.height,arrowScale:1,gap:5}),this.gListRecord.addChild(this.listRecord),this.ckOnlyMe.addEventListener(egret.TouchEvent.CHANGE,this.ZT70,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this);var t=App.CM.gtM(O6.B89);this.legionName=t?t.myLegion.legion.name:""},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.apply(this,t),this.listBattle.open(),this.listRecord.open();var i=this.model;this.maxRound=i.round,this.round=Math.max(1,this.maxRound),this.GX5(i),this.ZM34(i,!1),this.updateMenber(i),App.K16.doTimer(1e3,0,this.GX42,this)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.listBattle.close(),this.listRecord.close(),App.K16.remove(this.GX42,this),this.btnShop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickShop,this),this.ckOnlyMe.removeEventListener(egret.TouchEvent.CHANGE,this.ZT70,this),this.listBattle.scContent.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),s.prototype.close.apply(this,t)},t.prototype.uBM=function(t,e){t instanceof WarOfAttrition.Model&&(this.maxRound=t.round,e==P4.HH55&&(this.ZM33()||this.round==this.maxRound?this.ZM34(t,!0):this.turnPage(this.maxRound,!0)),this.GX5(t),this.updateMenber(t))},t.prototype.GX5=function(t){this.ZT69(t),this.ZY24(t)},t.prototype.updateBattle=function(t){this.labName.textFlow=O3.tr2(7982,this.legionName),this.labEnemyName.textFlow=O3.tr2(7983,"????"),this.imgTips.visible=this.labTips.visible=!1;var e=t.rec[this.round];P7.isEmpty(t.rec)?(this.imgTips.visible=this.labTips.visible=!0,this.labTips.textFlow=O3.tr2(7984),this.GX42()):e?(t.isOver||this.round<this.maxRound?this.labTitle.textFlow=O3.tr2(8006,this.round):this.round>=this.maxRound&&(1!=e.bye&&e.fr.length<e.mc?this.labTitle.textFlow=O3.tr2(7987,this.round):this.GX42()),1==e.bye?(this.imgTips.visible=this.labTips.visible=!0,this.labTips.textFlow=O3.tr2(8008)):(this.labEnemyName.textFlow=O3.tr2(7983,e.n),this.ckOnlyMe.selected&&this.battleListData.length<=0&&(this.imgTips.visible=this.labTips.visible=!0,this.labTips.textFlow=O3.tr2(8005)))):(this.imgTips.visible=this.labTips.visible=!0,this.labTips.textFlow=O3.tr2(8005))},t.prototype.ZM34=function(t,e){var i=this;void 0===e&&(e=!1);var s=t.rec[this.round],o=this.battleListData;if(s&&!s.bye){var r=O4.getAid(),n=o.map(function(t){return t.fightId});if(s.fr.forEach(function(t){(P7.isEmpty(t)||0<=n.indexOf(t.fid)||i.ckOnlyMe.selected)&&t.aid!=r||o.push({index:t.c,name:t.n,wins:t.w,icon:t.ic,enemyName:t.en,enemyWins:t.ew,enemyIcon:t.eic,fightId:t.fid,win:1==t.iw,clock:e?P6.getTime():0})}),s.mc==s.fr.length&&!this.ckOnlyMe.selected){var a=s.fr[s.mc-1],h=!1;a&&(h=1==a.iw),o.push({index:Number.MAX_VALUE,name:O3.tr(h?8023:8024,s.n,t.rn),clock:e?P6.getTime()+1e3*WarOfAttrition.Config.battleInterval:0})}for(var p=0;p<o.length;p++)for(var l=o.length-1;p<l;l--)o[p].index==o[l].index&&o.splice(l,1);o.sort(function(t,e){return e.index-t.index}),this.listBattle.rfL(o),this.listBattle.itemList.scrollV>3.2*this.battleItemHeight&&n.length<o.length&&this.ZM33()&&(this.listBattle.scContent.stopAnimation(),this.listBattle.itemList.scrollV+=this.battleItemHeight*(o.length-n.length))}else this.listBattle.rfL(o);this.updateBattle(t)},t.prototype.ZT69=function(t){var e=t.rec[this.round];if(this.imgState.visible=this.imgEnemyState.visible=!1,e&&(e.bye||e.fr&&e.fr.length==e.mc)){this.imgState.visible=this.imgEnemyState.visible=!0;var i=!!e.bye||1==e.fr[e.mc-1].iw,s=["v1_fonts_sheng_png","v1_fonts_bai_png"];this.imgState.source=i?s[0]:s[1],this.imgEnemyState.source=i?s[1]:s[0]}},t.prototype.ZM33=function(){return P6.getTime(!0)-this.lastMove<3},t.prototype.GX42=function(){var t=this.model;if(!t.isOver){var e=t.rec[this.round],i=1e3*Math.max(1,t.cd);P7.isEmpty(t.rec)?this.labTitle.textFlow=O3.tr2(8002,P6.FJ11(i,5),1):this.round>=this.maxRound&&(1==e.bye?this.labTitle.textFlow=O3.tr2(8027,this.round,P6.FJ11(i,5)):e.fr.length>=e.mc&&(this.labTitle.textFlow=O3.tr2(8002,P6.FJ11(i,5),this.round+1)))}},t.prototype.updateMenber=function(t){var e=[];for(var i in t.mem){var s=t.mem[i],o=(s.al?s.or:65535)+(s.al?0:-s.win- -1/s.s);e.push({name:s.n,power:s.s,state:s.al,wins:s.win,w:o})}e.sort(function(t,e){return t.w-e.w}),this.listRecord.rfL(e)},t.prototype.onChange=function(){this.lastMove=P6.getTime(!0)},t.prototype.oCC=function(){App.VM.GY64(this)},t.prototype.onClickLeft=function(){this.turnPage(-1)},t.prototype.onClickRight=function(){this.turnPage(1)},t.prototype.ZT70=function(){var t=this.model;this.listBattle.scContent.stopAnimation(),this.listBattle.moveToTop(),this.battleListData=[],this.ZM34(t,!1)},t.prototype.onClickShop=function(){App.VM.open(O7.HH98,O7.HH29,P12.A1)},t.prototype.turnPage=function(t,e){void 0===e&&(e=!1);var i=this.round+t;if(e&&(i=t),0<i&&i<=this.maxRound){this.lastMove=0,this.round=i;var s=this.model;this.battleListData=[],this.GX5(s),this.ZM34(s,!1),this.listBattle.scContent.stopAnimation(),this.listBattle.moveToTop()}},t.prototype.ZY24=function(t){this.btnLeft.visible=1<this.round,this.btnRight.visible=this.round<this.maxRound},t.prototype.getCurState=function(){return{r:this.round,sv:this.listBattle.itemList.scrollV,onlyMe:this.ckOnlyMe.selected}},t.prototype.setCurState=function(t){var e=this;t&&(this.ckOnlyMe.selected=t.onlyMe,this.turnPage(t.r,!0),App.K16.doFrame(1,1,function(){return e.listBattle.moveTo(null,t.sv)},null))},t}(BaseEuiView);__reflect(WarOfAttritionView.prototype,"WarOfAttritionView");var L2=function(){function r(){}return r.FK35=function(t){r.init=t.weapon_init,r.base=t.weapon_base,r.skin=t.weapon_skin,r.skill=t.weapon_skill,r.reward=t.weapon_reward,r.skillGroup=this.FI15(),r.expDanData=this.FHH33(),r.skinEmploy=this.FHH90()},r.FI47=function(){var t;t=r.reward;var e=[];for(var i in t)e.push(t[i]);return e},r.getData=function(t){for(var e=[],i=t.split(";"),s=0;s<i.length;s++)e[s]={},e[s][i[s].split(":")[0]]=i[s].split(":")[1];return e},r.FHH90=function(){var t=[];if(!this.skin)return t;for(var e in r.skin)-1!=r.skin[e].itemid&&t.push(r.skin[e]);return t},r.FI15=function(){var t={};for(var e in r.skill){var i=r.skill[e],s=[],o=i.skillid+"";t[o]?t[o].push(i):(s.push(i),t[o]=s)}return t},r.FHH33=function(){var t={};if(!this.init)return t;for(var e=this.init.expItem.value.split(";"),i=0;i<e.length;i++){var s=[],o=e[i].split(":"),r=o[0];t[r]||(s.push(o[1]),t[r]=s)}return t},r}();__reflect(L2.prototype,"L2");var L18=function(){function t(){}return t.A24=10001,t.A25=10002,t.A29=10003,t.A14=10004,t.A15=10005,t.A9=10006,t.A10=10007,t.A26=10008,t.A11=10009,t.A17=10010,t.A27=10011,t.A20=10012,t.A4=10013,t.A21=10014,t.A22=10015,t.A18=10016,t.A2=10017,t.A28=10018,t.A5=10019,t.A23=10020,t.A19=11003,t.A16=11004,t.A12=11005,t.A6=11006,t.A3=11007,t.A1=11008,t.A13=11009,t.A7=11010,t.A8=11011,t}();__reflect(L18.prototype,"L18");var TD50=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.HH35,"WeaponDan",t,K17.UI_Main_TOP),t.rgF(L18.A19,t.GL94,t),t.rgF(L18.A16,t.GK23,t),App.VM.register(O7.F78,"WeaponDerma",t,K17.UI_Main_TOP),t.rgF(L18.A12,t.GI18,t),t.rgF(L18.A6,t.GG43,t),App.VM.register(O7.F79,"WeaponSkill",t,K17.UI_Main_TOP),t.rgF(L18.A13,t.GI19,t),t.rgF(L18.A7,t.GG44,t),App.VM.register(O7.D95,"WeaponEverAdd",t,K17.UI_Main_TOP),t.rgF(L18.A3,t.GE94,t),t.rgF(L18.A1,t.GE4,t),t.rgF(L18.A8,t.GG45,t);var e=new TG34(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.I65),e.aLV(O7.HH35),e.aLV(O7.F78),e.aLV(O7.D95),e.aLV(O7.F79),e.aLV(O7.I1),e.aLV(O7.G58),e.aLV(O7.G45),e.aLV(O7.F86),e.aLV(O7.I17),e.aLV(O7.I39),e.aLV(O7.I70),t.weaponProxy=new TG35(t),t.rgF(L18.A24,t.loadReq,t),t.rgF(L18.A25,t.loadRes,t),t.rgF(L18.A23,t.GQ35,t),t.rgF(L18.A14,t.GN95,t),t.rgF(L18.A15,t.GN96,t),t.rgF(L18.A21,t.GT72,t),t.rgF(L18.A22,t.GT73,t),t.rgF(L18.A18,t.GP86,t),t.rgF(L18.A2,t.GP87,t),t.rgF(L18.A20,t.GR68,t),t.rgF(L18.A4,t.GR69,t),t.rgF(L18.A17,t.GP88,t),t.rgF(L18.A27,t.GP89,t),t.rgF(L18.A28,t.GV34,t),t.rgF(L18.A5,t.GV35,t),t.rgF(L18.A26,t.GT74,t),t.rgF(L18.A11,t.GT75,t),t.rgF(L18.A9,t.GL95,t),t.rgF(L18.A10,t.GL96,t),t.rgF(L18.A29,t.GX98,t),t}return __extends(t,i),t.prototype.GL94=function(){App.VM.open(O7.HH35)},t.prototype.GK23=function(){App.VM.close(O7.HH35)},t.prototype.GE94=function(t){App.VM.open(O7.D95,t)},t.prototype.GE4=function(){App.VM.close(O7.D95)},t.prototype.GI18=function(t){App.VM.open(O7.F78,t)},t.prototype.GG43=function(){App.VM.close(O7.F78)},t.prototype.GI19=function(t){App.VM.open(O7.F79,t)},t.prototype.GG44=function(){App.VM.close(O7.F79)},t.prototype.loadReq=function(){App.CM.gtM(O6.B97).account;return this.weaponProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.notify(P4.W39)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX98=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.isShowImgNew(),e.notify(P4.Y12)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GN95=function(t){this.weaponProxy.upgredeRes(t)},t.prototype.GN96=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.w=t.body.w,t.body.co&&(e.initWeaponData.co=t.body.co),e.isShowImgNew(),e.notify(P4.T48)}else{238==t.head.state?App.VM.gOV(O7.I65).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GP86=function(t){this.weaponProxy.unlockReq(t)},t.prototype.GP87=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.w=t.body.w,e.isShowImgNew(),App.CM.apF(O6.B83,L18.A8),e.notify(P4.O19)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT72=function(){this.weaponProxy.rmaxReq()},t.prototype.GT73=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.w=t.body.w,t.body.co&&(e.initWeaponData.co=t.body.co),e.isShowImgNew(),e.notify(P4.V69),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR68=function(t){this.weaponProxy.awardReq(t)},t.prototype.GR69=function(t){if(200==t.head.state){t.body.ob&&P5.sIs(t.body.ob);var e=this.gtM();e.initWeaponData.ho=t.body.h,e.isShowImgNew(),e.notify(P4.Q9)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP88=function(t){this.weaponProxy.changeReq(t)},t.prototype.GP89=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.w=t.body.w,e.notify(P4.W41)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV34=function(t){this.weaponProxy.danReq(t)},t.prototype.GV35=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.en=t.body.en,e.isShowImgNew(),e.notify(P4.Q11)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT74=function(){this.weaponProxy.wearReq()},t.prototype.GT75=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.w=t.body.w,App.CM.gtM(O6.B98).ZL13(t.body.es),e.isShowImgNew(),e.notify(P4.R88)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GL95=function(t){this.weaponProxy.GX33(t)},t.prototype.GL96=function(t){if(200==t.head.state){var e=this.gtM();e.initWeaponData.w=t.body.w,e.isShowImgNew(),e.notify(P4.T50)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ35=function(t){App.VM.gOV(O7.F78).ZQ91(t)},t.prototype.GG45=function(){var t=this.gtM(),e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],i=t.initWeaponData.w.k,s={objData:{id:e.id,we:i,wi:e.wi,h:e.h,x:0,y:0,dir:Dir.br,objType:P13.A6}};App.VM.open(O7.G69,s)},t}(TE11);__reflect(TD50.prototype,"TD50");var TG34=function(i){function t(t){var e=i.call(this,t)||this;return e.initWeaponData={},e.isUseNow=!1,e.isOpenUseYbView=!0,e}return __extends(t,i),t.prototype.initData=function(t){this.initWeaponData=t},t.prototype.ZD48=function(t){t&&(null!=this.pointData?this.pointData.initActData(t):this.pointData=new RevealVo(t))},t.prototype.updateRed=function(){this.isShowImgNew()},t.prototype.FL35=function(){var t=0,e=this.initWeaponData.w.lv;if(L3.advancedLv>e||!this.pointData)return t;var i=L3.FI89(this.pointData.lv);if(i.advancelv<0&&this.pointData.s==L3.starNum)return t;if(this.pointData&&L3.openLv<=O4.getLv())if(this.pointData.s!=L3.starNum){var s=N12.giC(parseInt(L2.init.advancedItem.value))+N12.giC(parseInt(L2.init.timeItem.value)),o=i.starcost.split(":"),r=N12.giC(parseInt(o[0]));t=s>=i.pillcost&&r>=parseInt(o[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var n=i.breakcost.split(":");t=N12.giC(parseInt(n[0]))>=parseInt(n[1])&&i.advancelv<=e?1:0}return t},t.prototype.isShowImgNew=function(){this.isHong=0;var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l;if(this.initWeaponData&&this.initWeaponData.w&&parseInt(L2.init.unlockLevel.value)<=e){var i=this.initWeaponData.w.lv;if((null==this.preLv||i>this.preLv)&&(TF13.FE57(E5.A9),this.preLv=i),this.redNum=this.FL35(),this.redNum)this.isHong=1;else{if(-1!=L2.base[i+""].exp){var s,o=L2.base[i+""].cash<=t.avatarInfo.co;s=L2.base[i+""].elixir;var r=N12.giC(parseInt(L2.init.advancedItem.value))+N12.giC(parseInt(L2.init.timeItem.value))>=s;if(o&&r)return void(this.isHong=1);var n=N12.giC(parseInt(L2.init.elixirItem.value)),a=K18.init.attrUseMax.value;if(n&&this.initWeaponData.en<a)return void(this.isHong=1);if(N12.giC(parseInt(L2.init.shootUpItem.value)))return void(this.isHong=1);if(L2.expDanData[i+""])if(N12.giC(L2.expDanData[i+""]))return void(this.isHong=1)}for(var h=L2.skinEmploy,p=0;p<h.length;p++)if(0<N12.giC(h[p].itemid)&&-1==this.initWeaponData.w.ss.indexOf(h[p].id))return void(this.isHong=1);if(App.CM.gtM(O6.B98).canWeaponEquip.length)this.isHong=1;else{var l=this.initWeaponData.w.sk.concat().sort(function(t,e){return t.si-e.si}),c=L2.skillGroup;for(p=0;p<l.length;p++){if(N12.giC(parseInt(L2.init.skillItem.value))>=c[l[p].si+""][l[p].sl-1+""].cost&&-1!=c[l[p].si+""][l[p].sl-1+""].cost)return void(this.isHong=1)}var u=this.initWeaponData.ho.length,d=this.initWeaponData.co.length;u==d||0===d||(this.isHong=1)}}}},t.prototype.ZC47=function(){var t=0,e=0;return this.initWeaponData.ho&&(t=this.initWeaponData.ho.length),this.initWeaponData.co&&(e=this.initWeaponData.co.length),t!=e&&0!==e?1:0},t.prototype.haveSkin=function(t){var e=!1;return this.initWeaponData&&this.initWeaponData.w&&this.initWeaponData.w.ss?e=-1!=this.initWeaponData.w.ss.indexOf(t):e},t.prototype.FJ45=function(){var t=parseInt(L2.init.unlockLevel.value);if(O4.getLv()<t)return 0;var e=this.getSkinPower(),i=this.getDanPower(),s=this.FHH78(),o=this.ZV1(),r=this.FJ47();return Math.round(e+i+s+r+o)},t.prototype.getSkinPower=function(){for(var t=[],e=0,i=this.initWeaponData,s=0;s<i.w.ss.length;s++)-1!=L2.skin[i.w.ss[s]+""].itemid&&(t.push(i.w.ss[s]),e+=M10.gAG(L2.skin[i.w.ss[s]+""].attr));return e},t.prototype.getDanPower=function(){var t=L2.init.elixirAttr.value,e=N13.getData(t),i=0,s=this.initWeaponData;for(var o in e)for(var r in e[o]){i+=parseInt(e[o][r])*K18.attribute[r].power*s.en}return i},t.prototype.FHH78=function(){for(var t=this.initWeaponData.w.sk,e=0,i=0;i<t.length;i++)e+=M10.gAG(L2.skillGroup[t[i].si+""][t[i].sl-1+""].attr);return e},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).weaponEquip.sort(function(t,e){return t.i-e.i}),e=0,i=0;i<t.length;i++){var s=M10.FD92(t[i].i+"",t[i].t);e+=M10.gAG(s.attr)+M10.gAG(s.addattr)*s.addlevel}return e},t.prototype.FJ47=function(){var t=this.initWeaponData,e=t.w.lv,i=t.w.exp,s=0;this.count=0,this.getCount(e);for(var o=0;o<this.count;o++){var r=L2.base[e-o+""].baseattr,n=L2.base[e-o+""].addattr,a=e-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){s+=parseInt(p[l][c])*i/L2.init.advancedExp.value*K18.attribute[c].power}else for(var l in p)for(var c in p[l])s+=parseInt(p[l][c])*L2.base[a+""].exp/L2.init.advancedExp.value*K18.attribute[c].power;for(var l in h)for(var c in h[l])s+=parseInt(h[l][c])*K18.attribute[c].power}return s+=s*P7.FA54(E5.A9)},t.prototype.getCount=function(t){L2.base[t+""]&&(this.count+=1,this.getCount(t-1))},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TG34.prototype,"TG34");var TG35=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y12,e.push,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.W38,body:{}};s.rSMO(P4.W39,function(t){s.apF(L18.A25,t),e("加载神兵加载完成")},s),s.sSM(i)})},t.prototype.upgredeRes=function(t){var e={type:P4.T47,body:{t:t}};this.rSMO(P4.T48,this.GX86,this),this.sSM(e)},t.prototype.GX86=function(t){this.apF(L18.A15,t)},t.prototype.rmaxReq=function(){var t={type:P4.V68,body:{}};this.rSMO(P4.V69,this.rmaxRes,this),this.sSM(t)},t.prototype.rmaxRes=function(t){this.apF(L18.A22,t)},t.prototype.unlockReq=function(t){var e={type:P4.O18,body:{skinId:t}};this.rSMO(P4.O19,this.GY69,this),this.sSM(e)},t.prototype.GY69=function(t){this.apF(L18.A2,t)},t.prototype.awardReq=function(t){var e={type:P4.Q8,body:{tid:t}};this.rSMO(P4.Q9,this.awardRes,this),this.sSM(e)},t.prototype.awardRes=function(t){this.apF(L18.A4,t)},t.prototype.changeReq=function(t){var e={type:P4.W40,body:{skinId:t}};this.rSMO(P4.W41,this.changeRes,this),this.sSM(e)},t.prototype.changeRes=function(t){this.apF(L18.A27,t)},t.prototype.danReq=function(t){var e={type:P4.Q10,body:{num:t}};this.rSMO(P4.Q11,this.danRes,this),this.sSM(e)},t.prototype.danRes=function(t){this.apF(L18.A5,t)},t.prototype.wearReq=function(){var t={type:P4.R87,body:{}};this.rSMO(P4.R88,this.wearRes,this),this.sSM(t)},t.prototype.wearRes=function(t){this.apF(L18.A11,t)},t.prototype.GX33=function(t){var e={type:P4.T49,body:{sid:t}};this.rSMO(P4.T50,this.GX34,this),this.sSM(e)},t.prototype.GX34=function(t){this.apF(L18.A10,t)},t.prototype.push=function(t){this.apF(L18.A29,t)},t}(TG80);__reflect(TG35.prototype,"TG35");var WeaponView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.haveNum=0,i.timerArray=[],i.skinPower=0,i.danPower=0,i.raiPower=0,i.skillPower=0,i.equipPower=0,i.isNewSkin=!1,i.canAdd=!0,i.isAutoSelfRai=!1,i.skinName=WingViewSkin,i.sGN("release_weapon"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skillData.dataProvider=this.skillCollection=new eui.ArrayCollection,this.skillData.itemRenderer=WeaponSkillDataItem,this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=AttrEquipDataItem,this.btnChange.label=O3.tr(4722),this.btnEquip.label=O3.tr(4723),this.btnRaising.label=O3.tr(4724),this.btnSelfRai.label=O3.tr(4725),this.btnStop.label=O3.tr(4710),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4711)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4712)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4713)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4714)),this.cbAutoSmelt.label=O3.tr(4715)},t.prototype.open=function(){var t=App.CM.gtM(O6.B82);this.avatarModel=t.avatarInfo.us[J11.A7],this.getData(),this.updateMain(),this.ZN26(),this.initPBarPro(),this.useExpDan(),this.ZN25(),this.btnSkin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this)},t.prototype.close=function(){this.btnSkin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.closeHandler(),this.stopAuto(),this.isNewSkin=!1,this.skillCollection.removeAll(),this.equipCollection.removeAll(),this.model=null,this.num=null,this.initId=null,this.haveNum=null,this.skinPower=null,this.danPower=null,this.raiPower=null,this.skillPower=null,this.equipPower=null,this.count=null,this.avatarModel=null,this.nowModel=null,this.hisLe=null,this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,egret.Tween.removeTweens(this.pBarPro.imgShort),egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.GI10=function(){TG76.FI91(E5.A9),App.CM.apF(O6.B95,M4.A4,this.arr)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.raising=function(){this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.autoUpgrade(!1)},t.prototype.openDanHint=function(){this.btnAddOne.imgNew.visible&&this.addOne()},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.aKeyPull=function(){this.aCF(O6.B83,L18.A26)},t.prototype.canChange=function(){var t=App.CM.gtM(O6.B82).avatarInfo.c;this.aCF(O6.B83,L18.A17,L2.base[this.num+""]["skinid"+t])},t.prototype.addOne=function(){this.aCF(O6.C18,O10.A5)},t.prototype.useExpDan=function(){this.btnExpDan.visible&&this.apF(O10.A5,O10.A36,!0)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.B83);this.btnReveal.imgNew.visible=!!t.redNum},t.prototype.getData=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.B83).initWeaponData;t&&!this.isAutoSelfRai&&(this.num=t.w.lv,this.ZK15())},t.prototype.dressUpdate=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.B83).initWeaponData;t&&(this.num=t.w.lv,this.ZK15())},t.prototype.openSkinView=function(){this.sureStop(),this.aCF(O6.B83,L18.A12)},t.prototype.openDanView=function(){this.sureStop(),this.aCF(O6.B83,L18.A19)},t.prototype.ZV5=function(){this.sureStop(),App.CM.apF(O6.C12,O8.A93,O8.B4.WEAPON)},t.prototype.openAddView=function(){this.aCF(O6.B83,L18.A3,{power:this.scoreLb.text,index:1})},t.prototype.showPhase=function(t){var e,i=App.CM.gtM(O6.B83).initWeaponData;switch(t.target.name){case"-":0<this.num&&(this.num-=1,this.btnRight.enabled=!0,P16.sGF(this.btnRight,!1)),this.btnRight.imgEnd.visible=this.num>=i.w.lv,e=1==this.num,P16.sGF(this.btnLeft,e),this.btnLeft.enabled=!e;break;case"+":e=this.num<=i.w.lv&&L2.base[this.num+1+""],this.num!=i.w.lv&&L2.base[this.num+1+""]||(this.btnRight.enabled=!1,P16.sGF(this.btnRight,!0)),e&&(this.num+=1,P16.sGF(this.btnLeft,!1),this.btnLeft.enabled=!0),this.btnRight.imgEnd.visible=this.num>=i.w.lv}this.realTime()},t.prototype.updateChange=function(t){if(!(this.num>t.w.lv)){var e=App.CM.gtM(O6.B82).avatarInfo.c,i=L2.base[this.num+""]["skinid"+e]-t.w.k;i<0||0<i?(this.btnChange.visible=!this.btnEquip.visible,this.grpHave.visible=this.grpAddPower.visible=!1):0==i&&(this.btnChange.visible=this.grpAddPower.visible=!1,this.btnEquip.visible||(this.grpHave.visible=!0))}},t.prototype.realTime=function(){var t=App.CM.gtM(O6.B82).avatarInfo.c;this.lbName.text=L2.skin[L2.base[this.num+""]["skinid"+t]+""].name,this.nowModel||(this.nowModel=new TF39);var e=App.CM.gtM(O6.B83).initWeaponData;this.nowModel.id=this.avatarModel.id,this.nowModel.h=this.avatarModel.h,this.nowModel.wi=this.avatarModel.wi,this.nowModel.we=L2.base[this.num+""]["skinid"+t],this.nowModel.bt=BehaviourType.Stand_d;var i={x:0,y:0,dir:Dir.br,objType:P13.A6};if(this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),this.objBoss.setData(this.nowModel,this.gpBoss),this.lbClass.text=O3.tr(1332,L2.base[this.num+""].level),this.updateChange(e),this.num==e.w.lv+1){this.btnChange.visible=this.grpHave.visible=!1,this.btnEquip.visible||(this.grpAddPower.visible=!0);var s=L2.base[this.num+""].baseattr,o=L2.base[this.num-1+""].addattr;this.lbPower.text=Math.floor(M10.gAG(s)+M10.gAG(o)*L2.base[this.num-1+""].exp/L2.init.advancedExp.value)+""}},t.prototype.updatePower=function(){this.getSkinPower(),this.getDanPower(),this.FJ47(),this.FHH78(),this.ZV1(),this.scoreLb.text=this.getPower()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.ZN25(),t instanceof TG34)switch(e){case P4.T48:this.canAdd=!0,this.littleAddExp(t),this.ZN26();break;case P4.V69:this.addExp(),this.ZN26();break;case P4.W41:case P4.O19:this.ZN26(),this.updateChange(t.initWeaponData);break;case P4.Y12:this.getData(),this.initPBarPro();break;case P4.T50:case P4.Q11:case P4.Q9:this.getData();break;case P4.R88:this.dressUpdate()}t instanceof THH9&&this.getData(),t instanceof TF73&&this.ZN26()},t.prototype.ZN26=function(){this.btnExpDan.visible=!1;var t=TG7.FA82(J12.A4,parseInt(L2.init.shootUpItem.value));this.btnAddOne.$setVisible(t);var e=App.CM.gtM(O6.B83).initWeaponData.w.lv;L2.expDanData[e+""]&&-1!==L2.base[e+""].exp&&(N12.giC(L2.expDanData[e+""])&&(this.btnExpDan.visible=this.btnExpDan.imgNew.visible=!0,this.btnAddOne.$setVisible(!1)))},t.prototype.littleAddExp=function(t){this.enabledBtn(!1);var e=this.pBarPro.value,i=0,s=1;e+(i=t.initWeaponData.w.exp>=e?t.initWeaponData.w.exp-e:this.pBarPro.maximum-e+t.initWeaponData.w.exp)>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){this.btnRaising.enabled=this.btnAddOne.enabled=this.btnSelfRai.enabled=t},t.prototype.addExp=function(){var t=App.CM.gtM(O6.B83),e=t.initWeaponData.w.lv,i=t.initWeaponData.w.le,s=L2.base[e+""].level,o=this.pBarPro.value,r=0,n=1;o+(r=t.isUseNow?this.hisLe<i?i-this.hisLe:this.pBarPro.maximum-o+i:s<=6&&0==t.initWeaponData.w.exp?this.pBarPro.maximum-o:parseInt(L2.init.shootUpExp.value))>this.pBarPro.maximum&&(n+=1),this.updataExp(o,r,n)},t.prototype.ZK15=function(){var t;t=1==this.num,P16.sGF(this.btnLeft,t),P16.sGF(this.btnRight,!1);var e=App.CM.gtM(O6.B83),i=e.initWeaponData;this.updatePower(),this.btnLeft.enabled=!t,this.btnRight.enabled=!0,i.co&&i.co.length&&(this.btnAward.imgNew.visible=i.co.length!=i.ho.length),-1!=L2.base[this.num+""].exp&&(this.pBarPro.maximum=L2.base[this.num+""].exp,this.pBarPro.value=i.w.exp),this.summit();var s=N12.giC(parseInt(L2.init.elixirItem.value)),o=!1;K18.init.attrUseMax.value>e.initWeaponData.en&&(o=!!s),this.btnDan.imgNew.visible=o;var r=[],n=i.w.sk.length;r=i.w.sk.concat().sort(function(t,e){return t.si-e.si});var a,h=1;if(n)for(l=r.length;l<4;l++){a=i.w.sk[n-1].si+h,h+=1;c=this.ZV2(l+1);r.push({si:a,sl:0,count:c})}else{for(var p in L2.skillGroup){a=parseInt(p);break}for(var l=1;l<=4;l++){var c=this.ZV2(l);r.push({si:a,sl:0,count:c}),a+=1}}this.skillCollection.replaceAll(r),this.btnEquip.visible=!1,this.btnSkin.imgNew.visible=!1;var u=L2.skinEmploy;for(l=0;l<u.length;l++)if(0<N12.giC(u[l].itemid)&&-1==i.w.ss.indexOf(u[l].id)){this.btnSkin.imgNew.visible=!0;break}for(var d=[{},{},{},{}],v=App.CM.gtM(O6.B98),f=v.weaponEquip.sort(function(t,e){return t.i-e.i}),g=1;g<=d.length;g++){for(var m=0;m<f.length;m++){if(g==M10.FD92(f[m].i+"",f[m].t).pos){d[g-1]={i:f[m].i,ok:!0,isNew:!1,t:f[m].t};break}}if("{}"==JSON.stringify(d[g-1]))for(var p in M10.weapon)if(M10.weapon[p].pos==g){d[g-1]={i:M10.weapon[p].id,ok:!1,isNew:!1,t:M10.weapon[p].equiptype};break}}var y=v.canWeaponEquip;for(m=1;m<=d.length;m++)0<=y.indexOf(m.toString())&&(d[m-1].isNew=this.btnEquip.visible=this.btnEquip.imgNew.visible=!0,this.grpHave.visible=this.btnChange.visible=!1);this.realTime(),this.equipCollection.replaceAll(d)},t.prototype.getPower=function(){var t=this.skinPower+this.danPower+this.raiPower+this.skillPower+this.equipPower;return Math.round(t)+""},t.prototype.initPBarPro=function(){this.pBarPro.slideDuration=0;var t=App.CM.gtM(O6.B83).initWeaponData.w.le;this.hisLe=t,this.lbShort.visible=!!t,this.pBarPro.imgShort.width=t?this.pBarPro.width*(t/this.pBarPro.maximum):0,this.pBarPro.imgShort.x=this.pBarPro.width*(this.pBarPro.value/this.pBarPro.maximum)-this.pBarPro.imgShort.width},t.prototype.ZV2=function(t){var e;for(var i in L2.base){if((L2.base[i].skillid?L2.base[i].skillid.split(","):"").length==t){e=L2.base[i].level;break}}return e},t.prototype.updateMain=function(){N13.type;this.skillName.text=O3.tr(1342);var t=N12.gID(L2.init.advancedItem.value);this.imgDan.setData(t);var e=N12.gID(L2.init.advancedCash.value);this.imgGlod.setData(e)},t.prototype.canExpend=function(){var t=this,e=App.CM.gtM(O6.B83);if(e.isOpenUseYbView)if(this.btnRaising.filters){var i=function(){t.autoUpgrade(!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else{i=function(){t.ZQ92(!1,!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else this.autoUpgrade(!0)},t.prototype.ZQ92=function(t,e){if(!this.canAdd)return!1;if(this.isNewSkin)return this.stopAuto(),!1;var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.B83),o=s.initWeaponData,r=N12.giC(parseInt(L2.init.timeItem.value)),n=N12.giC(parseInt(L2.init.advancedItem.value))+r,a=1,h=L2.base[o.w.lv].elixir-n;if(0<h&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,L2.init.advancedItem.value,h),t&&(this.closeHandler(),this.stopAuto()),!1;if(L2.base[o.w.lv].cash>i.avatarInfo.co)return App.VM.open(O7.F12),t&&(this.closeHandler(),this.stopAuto()),!1;if(this.cbAutoSmelt.selected&&L2.base[o.w.lv].cash<=i.avatarInfo.co&&0<h){var p=parseInt(L2.init.advancedItem.value),l=N15.FA50(p),c=N15.FB92(p),u=L2.base[o.w.lv+""].elixir;if(i.avatarInfo.bg>=l)a=2;else{if(!e&&s.isOpenUseYbView)return this.canExpend(),this.closeHandler(),!1;if(!(i.avatarInfo.g>=c*(n?u-n:u)))return P7.FA78(),this.stopAuto(),!1;a=3}}return this.aCF(O6.B83,L18.A14,a),t&&(this.canAdd=!1),s.isUseNow=0<r,!0},t.prototype.autoUpgrade=function(t){var e=this;this.isAutoSelfRai=!0,this.btnStop.visible=!0,this.btnSelfRai.visible=!1,this.isNewSkin=!1,this.canAdd=!0,this.btnRaising.imgNew.visible=!1,this.btnRaising.filters||P16.sGF(this.btnRaising,!0),this.enabledBtn(!1);var i,s=this;if(t||(i=this.ZQ92(!0,!1)),t||i){var o=App.K16.doTimer(300,0,function(){s.ZQ92(!0,t)},s,function(){e.stopAuto()});this.timerArray.push(o)}},t.prototype.stopAuto=function(){this.btnSelfRai.visible=!0,this.btnStop.visible=!1,this.canAdd=!0,this.isAutoSelfRai=!1,this.isNewSkin=!1,this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible,P16.sGF(this.btnRaising,!1),this.closeHandler(),this.enabledBtn(!0)},t.prototype.clearSkin=function(){this.aCF(O6.B83,L18.A8)},t.prototype.summit=function(){var t=App.CM.gtM(O6.B83).initWeaponData;if(-1==L2.base[t.w.lv+""].exp)return this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.grpExpend.visible=this.lbShort.visible=!1,this.pBarPro.maximum=this.pBarPro.value=100,this.pBarPro.imgShort.width=0,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnSelfRai,!0),this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=this.btnRaising.enabled=this.btnSelfRai.enabled=!1,!1;this.pBarPro.labelFunction=null,this.lbPay.text=L2.base[this.num+""].cash+"",this.haveNum=N12.giC(parseInt(L2.init.advancedItem.value))+N12.giC(parseInt(L2.init.timeItem.value));var e;e=L2.base[this.num+""].elixir,this.haveNum>=e?this.lbAmount.textColor=2987793:this.lbAmount.textColor=15669836;var i=App.CM.gtM(O6.B82);return L2.base[this.num+""].cash<=i.avatarInfo.co?this.lbPay.textColor=2987793:this.lbPay.textColor=15669836,this.lbAmount.text=this.haveNum+"/"+e,this.haveNum>=e&&L2.base[this.num+""].cash<=i.avatarInfo.co?(this.btnRaising.filters||(this.btnRaising.imgNew.visible=!0),this.btnSelfRai.imgNew.visible=!0):this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=!1,this.btnAddOne.imgNew.visible=0<N12.giC(parseInt(L2.init.shootUpItem.value)),!0},t.prototype.updataExp=function(t,e,i){var h=this,p=App.CM.gtM(O6.B83),l=p.initWeaponData.w.le;if(!this.summit())return this.getData(),this.clearSkin(),void this.enabledBtn(!1);var c=this,u=function(t,e,i){var s,o=0,r=c.num;s=200,(s=((o=e+i>=c.pBarPro.maximum?(i-=c.pBarPro.maximum-e,c.pBarPro.maximum):i+e)-c.pBarPro.value)/c.pBarPro.maximum*1e3)<200&&(s=200);var n=c.pBarPro.width*(l/c.pBarPro.maximum),a=c.pBarPro.width*((o-l)/c.pBarPro.maximum);p.isUseNow?(c.hisLe>l&&(n=c.pBarPro.width-c.pBarPro.imgShort.x),c.hisLe=l,egret.Tween.get(c.pBarPro.imgShort).to({width:n},s)):(c.hisLe>l&&(a=c.pBarPro.width-c.pBarPro.imgShort.width),egret.Tween.get(c.pBarPro.imgShort).to({x:a},s),c.hisLe=l),o==c.pBarPro.maximum&&(h.isNewSkin=!0),egret.Tween.get(c.pBarPro).to({value:o},s).wait(20).call(function(){(egret.Tween.removeTweens(c.pBarPro),c.lbAddExp.text="+"+L2.init.advancedExp.value,c.lbShort.visible=!!l,c.pBarPro.value==c.pBarPro.maximum)&&(e=0,r+=1,c.pBarPro.maximum=L2.base[r+""].exp,egret.Tween.removeTweens(c.pBarPro.imgShort),c.pBarPro.value=c.pBarPro.slideDuration=c.pBarPro.imgShort.width=c.pBarPro.imgShort.x=0,0<t-1&&u(--t,e,i),App.CM.gtM(O6.B98).ZW35(),c.clearSkin(),c.stopAuto(),c.getData());egret.Tween.get(c.lbAddExp).to({visible:!0}).to({y:c.lbAddExp.y-15},150).call(function(){egret.Tween.removeTweens(c.lbAddExp),c.lbAddExp.y=60,c.lbAddExp.visible=!1,c.updatePower()}),c.enabledBtn(!0)})};u(i,t,e)},t.prototype.sureStop=function(){this.btnStop.visible&&this.stopAuto()},t.prototype.getSkinPower=function(){var t=[];this.skinPower=0;for(var e=App.CM.gtM(O6.B83).initWeaponData,i=0;i<e.w.ss.length;i++)-1!=L2.skin[e.w.ss[i]+""].itemid&&(t.push(e.w.ss[i]),this.skinPower+=M10.gAG(L2.skin[e.w.ss[i]+""].attr))},t.prototype.getDanPower=function(){var t=L2.init.elixirAttr.value,e=N13.getData(t);this.danPower=0;var i=App.CM.gtM(O6.B83).initWeaponData;for(var s in e)for(var o in e[s]){var r=parseInt(e[s][o])*K18.attribute[o].power*i.en;this.danPower+=r}},t.prototype.FHH78=function(){for(var t=App.CM.gtM(O6.B83).initWeaponData.w.sk,e=this.skillPower=0;e<t.length;e++)this.skillPower+=M10.gAG(L2.skillGroup[t[e].si+""][t[e].sl-1+""].attr)},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).weaponEquip.sort(function(t,e){return t.i-e.i}),e=this.equipPower=0;e<t.length;e++){var i=M10.FD92(t[e].i+"",t[e].t),s=M10.gAG(i.attr)+M10.gAG(i.addattr)*i.addlevel;this.equipPower+=s}},t.prototype.FJ47=function(){var t=App.CM.gtM(O6.B83).initWeaponData,e=t.w.lv,i=t.w.exp;this.raiPower=0,this.count=0,this.arr={101:0,102:0,103:0},this.getCount(e);for(var s=0;s<this.count;s++){var o=L2.base[e-s+""].baseattr,r=L2.base[e-s+""].addattr,n=e-s,a=N13.getData(o),h=N13.getData(r);if(0==s)for(var p in h)for(var l in h[p]){var c=parseInt(h[p][l])*i/L2.init.advancedExp.value*K18.attribute[l].power;this.raiPower+=c;var u=parseInt(h[p][l])*i/L2.init.advancedExp.value;0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=u)}else for(var p in h)for(var l in h[p]){this.raiPower+=parseInt(h[p][l])*L2.base[n+""].exp/L2.init.advancedExp.value*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(h[p][l])*L2.base[n+""].exp/L2.init.advancedExp.value)}for(var p in a)for(var l in a[p]){var d;this.raiPower+=parseInt(a[p][l])*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(a[p][l]))}}var v=P7.FA54(E5.A9);this.raiPower+=this.raiPower*v},t.prototype.getCount=function(t){L2.base[t+""]&&(this.count+=1,this.getCount(t-1))},t}(BaseEuiView);__reflect(WeaponView.prototype,"WeaponView");var WeaponSkillDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZV3=function(){App.CM.apF(O6.B83,L18.A13,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){App.CM.gtM(O6.B83);this.imgHead.source=L2.init["skillIcon"+(this.itemIndex+1)].value;var t=L2.skillGroup[this.data.si+""][this.data.sl-1],e=L2.skillGroup[this.data.si+""].length,i=N12.giC(parseInt(L2.init.skillItem.value))+"";this.data.sl?(this.grpCount.visible=!0,this.lbNum.text=this.data.sl+"",this.lbNum.textColor=16777215,this.grpNot.visible=!1,this.imgNew.visible=t.cost<=i&&e>t.level):(this.grpNot.visible=!0,this.grpCount.visible=!1,this.lbCount.text=O3.tr(1320,this.data.count))},t}(eui.ItemRenderer);__reflect(WeaponSkillDataItem.prototype,"WeaponSkillDataItem");var WeaponSkinDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this),App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZV4=function(){App.CM.apF(O6.B83,L18.A23,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.B83).initWeaponData.w;if(0<=t.ss.indexOf(this.data.id))this.imgGet.visible=!0,this.imgNew.visible=!1,this.lbName.textColor=11481344;else{this.imgGet.visible=!1,this.lbName.textColor=11301691;var e=N12.giC(this.data.itemid);this.imgNew.visible=0<e}this.grpHave.visible=t.k==this.data.id,this.imgOn.visible=this.data.isShow,this.lbName.text=this.data.name,this.data.isShow?P7.FM14()?App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",157,43):App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",53.5,157):App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t}(eui.ItemRenderer);__reflect(WeaponSkinDataItem.prototype,"WeaponSkinDataItem");var WeaponDan=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingDanSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4716)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4717)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4718)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4719)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4720)),this.btnUse.label=O3.tr(4721)},t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.updateUI()},t.prototype.close=function(){this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.num=null},t.prototype.closeSelf=function(){App.CM.apF(O6.B83,L18.A16)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B83).initWeaponData,e=N12.gID(L2.init.elixirItem.value);this.num=N12.giC(parseInt(L2.init.elixirItem.value)),this.lbOwn.text=O3.tr(1321,this.num);N12.base[L2.init.elixirItem.value].batchusenum;var i=K18.init.attrUseMax.value;if(t.en>=i)this.lbCount.text="0";else{var s=i-t.en;this.lbCount.text=String(this.num>s?s:this.num)}this.dlg.title=e.name,this.imgQuality.source=N12.getBox(e.quality),O5.FB13(this.lbName,e.name,e.quality),this.imgHead.source=N12.FJ86(e.id),this.lbNum.text=t.en+"";var o=L2.init.elixirAttr.value,r=N13.getData(o);for(var n in r)for(var a in r[n]){var h=parseInt(r[n][a])*t.en;this["lbAttr"+n].text=K18.attribute[a].name+"：",this["lbCount"+n].text=h}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG34)switch(e){case P4.Q11:this.updateUI()}},t.prototype.changeUse=function(t){var e=parseInt(this.lbCount.text),i=L2.init.elixirItem.value,s=(N12.base[i].batchUse,App.CM.gtM(O6.B83)),o=K18.init.attrUseMax.value,r=s.initWeaponData.en,n=o-r,a=n<=this.num?n:this.num;if(!(o<=r))switch(t.target.name){case"-":0<e-1&&(this.lbCount.text=(e-1).toString());break;case"+":e+1<=a&&(this.lbCount.text=(e+1).toString());break;case"--":var h=parseInt(this.btnBigMinus.label);this.lbCount.text=0<e+h?(e+h).toString():(0<a?1:0)+"";break;case"++":var p=parseInt(this.btnBigAdd.label);this.lbCount.text=e+p<=a?(e+p).toString():a+""}},t.prototype.startUse=function(){var t=App.CM.gtM(O6.B83);K18.init.attrUseMax.value<=t.initWeaponData.en?P18.sDP(O3.tr(1343)):0!=parseInt(this.lbCount.text)?this.apF(L18.A28,parseInt(this.lbCount.text)):P18.sDP(O3.tr(1318))},t.prototype.ZQ49=function(){var t=N12.gID(L2.init.elixirItem.value);this.aCF(O6.C11,O14.A15,t,this.num)},t}(BaseEuiView);__reflect(WeaponDan.prototype,"WeaponDan");var WeaponDerma=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.index=null,i.pageSize=6,i.itemWidth=95,i.skinName=WingDermaSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skinData.dataProvider=this.skinCollection=new eui.ArrayCollection,this.skinData.itemRenderer=WeaponSkinDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4986)),this.btnChange.label=O3.tr(4987),this.btnActivate.label=O3.tr(4988),P7.FM14()&&(this.itemWidth=186.75,this.pageSize=3)},t.prototype.open=function(t){t&&(this.argId=t);var e=App.CM.gtM(O6.B82);this.avatarModel=e.avatarInfo.us[J11.A7],this.scrRoll.addEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.updateUI(),t&&this.ZW55()},t.prototype.close=function(){s.prototype.close.call(this),this.scrRoll.removeEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.skinCollection.removeAll(),this.init=null,this.base=null,this.index=null,this.num=null,this.skins=null,this.regularData=null,this.argId=null,this.avatarModel=null,this.nowModel=null},t.prototype.ZW55=function(){for(var t=L2.skinEmploy,e=0,i=0;i<t.length;i++)t[i].id==this.argId&&(e=i);this.scrRoll.validateNow();var s=Math.ceil((e+1)/6)-1;this.scrRoll.viewport.scrollH=this.scrRoll.width*s-10;var o=Math.floor(t.length/6);this.scrRoll.viewport.scrollH<0&&(this.scrRoll.viewport.scrollH=0),this.btnLeft.visible=!!s,o<=s&&(this.btnRight.visible=!1),this.isShowHong()},t.prototype.isShowHong=function(){var t=App.CM.gtM(O6.B83).initWeaponData.w;this.btnLeft.imgNew.visible=this.btnRight.imgNew.visible=!1;for(var e=this.getStartIndex,i=this.skinCollection.source,s=e,o=e+1+6,r=0;r<s;r++){if(N12.giC(i[r].itemid)&&t.ss.indexOf(i[r].id)<0){this.btnLeft.imgNew.visible=!0;break}}for(var n=this.skinCollection.source.length-1;o<n;n--){if(N12.giC(i[n].itemid)){this.btnRight.imgNew.visible=!0;break}}},t.prototype.goShopPing=function(){var t={sLink:parseInt(this.lbSource.name)};TG84.goToDlg(t)},t.prototype.closeSelf=function(){this.apF(L18.A6)},t.prototype.activate=function(){this.apF(L18.A18,this.classData[this.index+""].id)},t.prototype.canChange=function(){this.apF(L18.A17,this.classData[this.index+""].id)},t.prototype.ZQ91=function(t){for(var e=0;e<this.skinCollection.length;e++)this.skinCollection.getItemAt(e).isShow=!1;this.index=t,this.skinCollection.getItemAt(t).isShow=!0,this.skinCollection.replaceAll(this.classData),this.ZN22(t)},t.prototype.updateUI=function(){this.lbTitle.text=O3.tr(1307),this.lbAllText.text=O3.tr(1339),this.lbOnText.text=O3.tr(1340);var t=App.CM.gtM(O6.B83).initWeaponData.w;if(this.classData=this.adjust(L2.skinEmploy.concat()),this.regularData=L2.skinEmploy,this.init=L2.init,this.base=L2.base,this.skins=L2.skin,this.skinCollection.replaceAll(this.classData),this.classData.length<=6&&(this.btnRight.visible=!1),this.index=0,this.argId){for(var e=0;e<this.classData.length;e++)if(this.classData[e].id==this.argId){this.index=e;break}}else for(e=0;e<this.classData.lenght;e++)if(this.classData[e].id==t.k){this.index=e;break}this.ZQ91(this.index)},t.prototype.adjust=function(t){for(var e=[],i=App.CM.gtM(O6.B83).initWeaponData.w,s=t.length-1;0<=s;s--){if(t[s].state=0,t[s].id==i.k||0<=i.ss.indexOf(t[s].id))t[s].id==i.k?t[s].state=2:t[s].state=1,e.push(t[s]),t.splice(s,1);else 1<=N12.giC(t[s].itemid)&&(t[s].state=3,e.unshift(t[s]),t.splice(s,1))}return e.sort(function(t,e){return e.state-t.state}),e=e.concat(t)},t.prototype.ZN22=function(t){this.index=t;var e=App.CM.gtM(O6.B83).initWeaponData.w;this.nowModel||(this.nowModel=new TF39),this.nowModel.id=this.avatarModel.id,this.nowModel.h=this.avatarModel.h,this.nowModel.wi=this.avatarModel.wi,this.nowModel.bt=BehaviourType.Stand_d,this.nowModel.we&&this.nowModel.we!==this.classData[t+""].id&&this.objBoss.ZN95(J14.C_Weapon),this.nowModel.we=this.classData[t+""].id;var i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),this.objBoss.setData(this.nowModel,this.gpBoss),this.lbName.text=this.classData[t+""].name,this.lbSource.text=this.classData[t+""].gainway,this.lbSource.name=this.classData[t+""].showid,0<this.classData[t+""].showid?M18.FHH83(this.lbSource):M18.FF64(this.lbSource),this.imgQuality.source=N12.getBox(this.classData[t+""].quality),this.imgQuality.source=N12.getBox(N12.gID(this.classData[t+""].itemid+"").quality),this.imgHead.source=N12.FJ86(this.classData[t+""].itemid),this.imgHead.name=this.classData[t+""].itemid+"";var s=N12.giC(this.classData[t+""].itemid);0==(this.num=s)?(this.lbNum.text="(0/1)",this.lbNum.textColor=14164514,this.btnActivate.visible=this.btnChange.visible=this.grpHave.visible=!1,this.grpNoLive.visible=this.grpShow.visible=this.grpDetail.visible=!0):(this.lbNum.textColor=7716890,this.lbNum.text="("+s+"/1)",this.grpNoLive.visible=this.btnActivate.visible=this.grpDetail.visible=!0,this.grpShow.visible=this.grpHave.visible=this.btnChange.visible=!1),0<=e.ss.indexOf(this.classData[t+""].id)&&(this.grpHave.visible=this.grpDetail.visible=this.grpNoLive.visible=!1,this.btnChange.visible=!0),e.k==this.classData[t+""].id&&(this.btnChange.visible=this.grpNoLive.visible=this.grpDetail.visible=!1,this.grpHave.visible=!0),this.scoreLb.text=M10.gAG(this.classData[t+""].attr)+"";var o=N13.getData(this.classData[t+""].attr);for(var r in o)for(var n in o[r])this["lbAttr"+r].text=K18.attribute[n].name+":"+o[r][n];this.grpHave.visible||this.btnChange.visible?this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=7716890:this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=16458017;var a=0,h=0;for(var r in e.ss)-1!=this.skins[e.ss[r]+""].itemid&&(h+=1,a+=M10.gAG(this.skins[e.ss[r]+""].attr));this.lbAllPower.text=a+"",this.lbHave.text=h+""},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG34)switch(e){case P4.W41:case P4.O19:this.updateUI()}if(t instanceof THH14)switch(e){case P4.U59:this.ZQ91(this.index)}},t.prototype.doLeft=function(){var t=this.getStartIndex,e=Math.max(0,t-this.pageSize);this.scrRoll.viewport.scrollH=e*this.itemWidth,this.isShowHong(),this.ZQ72()},Object.defineProperty(t.prototype,"getStartIndex",{get:function(){return Math.floor(this.scrRoll.viewport.scrollH/this.itemWidth)},enumerable:!0,configurable:!0}),t.prototype.doRight=function(){var t=this.getStartIndex,e=this.skinCollection.length-this.pageSize,i=Math.min(e,t+this.pageSize);this.scrRoll.viewport.scrollH=e===i?this.scrRoll.viewport.contentWidth-this.scrRoll.width:i*this.itemWidth,this.isShowHong(),this.ZQ72()},t.prototype.ZQ72=function(){var t=this.scrRoll.viewport;this.btnLeft.visible=0!=t.scrollH,this.btnRight.visible=Math.abs(t.scrollH+this.scrRoll.width)<t.contentWidth},t.prototype.showNextData=function(t){this.scrRoll.viewport;switch(t.target.name){case"-":this.doLeft();break;case"+":this.doRight()}},t.prototype.openAddView=function(){this.apF(L18.A3,{power:0,index:0,skinId:this.classData[this.index+""].id})},t.prototype.ZQ49=function(){var t=N12.gID(this.imgHead.name);this.aCF(O6.C11,O14.A15,t,this.num),TG40.playClickEffect()},t}(BaseEuiView);__reflect(WeaponDerma.prototype,"WeaponDerma");var WeaponEverAdd=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinPower=0,i.getIndex=1,i.array=[],i.strs=[O3.tr(5742),O3.tr(5743),O3.tr(5744)],i.skinName=WingEverAddSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.attrAddData.dataProvider=this.attrAddCollection=new eui.ArrayCollection},t.prototype.open=function(t){this.num=t.index,this.power=t.power,this.skinId=t.skinId,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attrAddCollection.removeAll(),this.num=null,this.model=null,this.skinPower=null,this.array=null,this.power=null,this.fitDreData=null,this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.skinId=null,this.nowModel=null},t.prototype.closeSelf=function(){this.apF(L18.A1)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B98),e=App.CM.gtM(O6.B83),i=(e.initWeaponData,this.skinId?this.skinId:e.initWeaponData.w.k);this.nowModel||(this.nowModel=new TF39);var s=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7];this.nowModel.id=s.id,this.nowModel.h=s.h,this.nowModel.wi=s.wi,this.nowModel.we=i,this.nowModel.bt=BehaviourType.Stand_d;var o={id:i,x:0,y:6,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(o),this.objBoss.setData(this.nowModel,this.gpBoss),this.fitDreData=t.weaponEquip.sort(function(t,e){return t.i-e.i}),this.lbTitle.text=O3.tr(1341),this.skinPower=0;var r=this.getSkinPower(),n=this.getDanPower(),a=this.FJ47(),h=this.ZV1();this.array=[],this.num?(this.scoreLb.text=this.power+"",this.array.push({name:O3.tr(1326)+O3.tr(2412),n0:a.n0,n1:a.n1,n2:a.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1327)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:r.n0,n1:r.n1,n2:r.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1328)+O3.tr(2412),n0:n.n0,n1:n.n1,n2:n.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})):(this.scoreLb.text=Math.round(this.skinPower)+"",this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:r.n0,n1:r.n1,n2:r.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})),this.attrAddCollection.replaceAll(this.array)},t.prototype.getSkinPower=function(){for(var t=[],e={n0:0,n1:0,n2:0},i=App.CM.gtM(O6.B83).initWeaponData,s=0;s<i.w.ss.length;s++)-1!=L2.skin[i.w.ss[s]+""].itemid&&(t.push(i.w.ss[s]),this.skinPower+=M10.gAG(L2.skin[i.w.ss[s]+""].attr));for(s=0;s<t.length;s++){var o=N13.getData(L2.skin[t[s]+""].attr);for(var r in o)for(var n in o[r]){var a=this.strs.indexOf(K18.attribute[n].name);0<=a&&(e["n"+a]+=parseInt(o[r][n]))}}return e},t.prototype.getDanPower=function(){var t={n0:0,n1:0,n2:0},e=L2.init.elixirAttr.value,i=N13.getData(e),s=App.CM.gtM(O6.B83).initWeaponData;for(var o in i)for(var r in i[o]){var n=parseInt(i[o][r])*s.en,a=this.strs.indexOf(K18.attribute[r].name);0<=a&&(t["n"+a]=n)}return t},t.prototype.ZV1=function(){for(var t={n0:0,n1:0,n2:0},e=this.fitDreData,i=0;i<e.length;i++){var s=M10.FD92(e[i].i,e[i].t),o=N13.getData(s.attr),r=N13.getData(s.addattr);for(var n in o)for(var a in o[n]){0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a]))}for(var n in r)for(var a in r[n]){var h;0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a])*s.addlevel)}}return t},t.prototype.getCount=function(t){L2.base[t-1+""]&&(this.getIndex+=1,this.getCount(t-1))},t.prototype.FJ47=function(){var t={n0:0,n1:0,n2:0},e=App.CM.gtM(O6.B83).initWeaponData,i=e.w.lv,s=e.w.exp;this.getIndex=1,this.getCount(i);for(var o=0;o<this.getIndex;o++){var r=L2.base[i-o+""].baseattr,n=L2.base[i-o+""].addattr,a=i-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){var u=parseInt(p[l][c])*s/L2.init.advancedExp.value;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=u)}else for(var d in p)for(var c in p[d]){0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(p[d][c])*L2.base[a+""].exp/L2.init.advancedExp.value)}for(var v in h)for(var c in h[v]){var f;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(h[v][c]))}}var g=P7.FA54(E5.A9);for(var c in t)t[c]+=Math.floor(t[c]*g);return t},t}(BaseEuiView);__reflect(WeaponEverAdd.prototype,"WeaponEverAdd");var weapon,WeaponSkill=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingSkillSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.grps=[this.grp0,this.grp1,this.grp2,this.grp3],this.grpEffects=[this.grpEffect0,this.grpEffect1,this.grpEffect2],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4989)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4990)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4991)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4974)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4993)),this.lbReach.textFlow=M18.HTP.parse(O3.tr(4994)),this.btnUpgrade.label=O3.tr(4995)},t.prototype.open=function(t){this.index=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var e=0;e<this.grps.length;e++){this.grps[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this),this.grps[e].getChildByName("imgOpt").visible=e==this.index}this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var t=0;t<this.grps.length;t++)this.grps[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this);this.index=null,this.skillData=null},t.prototype.closeSelf=function(){this.apF(L18.A7)},t.prototype.GT53=function(){var t=N12.gID(L2.init.skillItem.value);this.aCF(O6.C11,O14.A15,t,this.lbOwn.text)},t.prototype.upgrade=function(){if(this.lbOwn.textColor!=_cc.red){var t=this.skillData[this.index].si;L2.skillGroup[t+""][0].wid;this.apF(L18.A9,t)}else{var e=parseInt(L2.init.skillItem.value);App.VM.open(O7.G87,e,1,P12.A26)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG34)switch(e){case P4.O19:this.updateUI();break;case P4.T50:this.updateUI(!0)}else t instanceof THH9&&this.updateUI()},t.prototype.updateUI=function(t){void 0===t&&(t=!1);var e=App.CM.gtM(O6.B83);this.skillData=[];var i=e.initWeaponData;this.lbTitle.text=O3.tr(1342);var s=i.w.sk.length;this.skillData=i.w.sk.concat().sort(function(t,e){return t.si-e.si});var o;if(s)for(n=this.skillData.length;n<4;n++){o=this.skillData[this.skillData.length-1].si+1;a=this.ZV2(n+1);this.skillData.push({si:o,sl:0,count:a})}else{for(var r in L2.skillGroup){o=parseInt(r);break}for(var n=1;n<=4;n++){var a=this.ZV2(n);this.skillData.push({si:o,sl:0,count:a}),o+=1}}for(n=0;n<this.grps.length;n++){var h=this.grps[n].getChildByName("imgHead"),p=this.grps[n].getChildByName("grpCount"),l=this.grps[n].getChildByName("grpNotOpen");h.source=L2.init["skillIcon"+(n+1)].value;L2.skillGroup[this.skillData[n].si+""][this.skillData[n].sl-1],N12.giC(parseInt(L2.init.skillItem.value)),L2.skillGroup[this.skillData[n].si+""].length;if(this.skillData[n].sl){var c=p.getChildAt(p.numChildren-1);p.visible=!0;var u=parseInt(c.text),d=this.grps[n].getChildByName("effect");this.skillData[n].sl>u&&t&&App.THH33.aUE(d,"iconSkill",-d.width/2+5,-d.height/2+5,1),c.text=""+this.skillData[n].sl,l.visible=!1}else{l.visible=!0,p.visible=!1,l.getChildAt(l.numChildren-1).text=O3.tr(1320,this.skillData[n].count)}}this.updateInfo(this.skillData[this.index])},t.prototype.updateInfo=function(t){var e=L2.init["skillName"+(this.index+1)].value;if(this.lbName.text=e,this.lbNowAttr1.text=this.lbNowNum1.text=this.lbNextAttr1.text=this.lbNextNum1.text="",t.sl){var i=L2.skillGroup[t.si+""][t.sl-1];this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!0,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!1,this.lbClass.text=O3.tr(1331,t.sl);var s=O3.tr(1300,N12.base[L2.init.skillItem.value].name,i.cost);this.lbExpend.textFlow=(new egret.HtmlTextParser).parser(s),this.lbOwn.text=N12.giC(parseInt(L2.init.skillItem.value))+"",this.lbOwn.textColor=parseInt(this.lbOwn.text)>=i.cost?_cc.green:_cc.red,this.btnUpgrade.imgNew.visible=parseInt(this.lbOwn.text)>=i.cost,this.imgHead.source=N12.FJ86(L2.init.skillItem.value),this.imgQuality.source=N12.getBox(N12.base[L2.init.skillItem.value].quality);var o=N13.getData(i.attr);for(var r in o)for(var n in o[r])this["lbNowAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNowNum"+r].text=o[r][n]}else{this.lbClass.text="",this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!1,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!0;(i=L2.skillGroup[t.si+""][t.sl]).name;var a=WingLangs.typeMaps[N13.type].name;this.lbCondition.text=O3.tr(1316,a,t.count)}var h=L2.skillGroup[t.si+""][t.sl+""];if(h&&t.sl!=L2.skillGroup[t.si+""].length){this.grpData.visible=!0,this.lbReach.visible=!1;o=N13.getData(h.attr);for(var r in o)for(var n in o[r])this["lbNextAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNextNum"+r].text=o[r][n]}else this.grpUpgrade.visible=this.grpData.visible=!1,this.lbReach.visible=!0},t.prototype.ZV2=function(t){var e;App.CM.gtM(O6.B82).avatarInfo.c;for(var i in L2.base){if((L2.base[i].skillid?L2.base[i].skillid.split(","):"").length==t){e=L2.base[i].level;break}}return e},t.prototype.skillNew=function(t){var e=parseInt(t.target.name);this.index=e;for(var i=0;i<this.grps.length;i++){this.grps[i].getChildByName("imgOpt").visible=i==e}this.updateInfo(this.skillData[this.index]),TG40.playClickEffect()},t}(BaseEuiView);__reflect(WeaponSkill.prototype,"WeaponSkill"),function(t){var e=function(){};t.WeaponVo=e,__reflect(e.prototype,"weapon.WeaponVo");var i=function(){};t.WeaponSkillVo=i,__reflect(i.prototype,"weapon.WeaponSkillVo")}(weapon||(weapon={}));var TC85=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.F64,"WelfareBaseView",t,K17.UI_Main_TOP);var e=new TF89(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.HH30),e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.F64),e.aLV(O7.F95),e.aLV(O7.C52),e.aLV(O7.C53),e.aLV(O7.D24),e.aLV(O7.B28),e.aLV(O7.E8),e.aLV(O7.A63),e.aLV(O7.B34),e.aLV(O7.HH48),e.aLV(O7.I28),e.aLV(O7.A50),e.aLV(O7.I85),e.aLV(O7.G75),t.proxy=new TF90(t),t.rgF(J19.A35,t.GG46,t),t.rgF(J19.A38,t.GR70,t),t.rgF(J19.A39,t.GR71,t),t.rgF(J19.A18,t.GD6,t),t.rgF(J19.A19,t.GD7,t),t.rgF(J19.A8,t.GB40,t),t.rgF(J19.A9,t.GB41,t),t.rgF(J19.A20,t.GE5,t),t.rgF(J19.A21,t.GE6,t),t.rgF(J19.A2,t.GA70,t),t.rgF(J19.A3,t.GA71,t),t.rgF(J19.A25,t.GC16,t),t.rgF(J19.A26,t.GC17,t),t.rgF(J19.A29,t.GG47,t),t.rgF(J19.A17,t.GC15,t),t.rgF(J19.A22,t.GG48,t),t.rgF(J19.A13,t.GI20,t),t.rgF(J19.A14,t.GI21,t),t.rgF(J19.A23,t.GE95,t),t.rgF(J19.A10,t.GG49,t),t.rgF(J19.A11,t.GG50,t),t.rgF(J19.A1,t.GB42,t),t.rgF(J19.A15,t.GC18,t),t.rgF(J19.A16,t.GC19,t),t.rgF(J19.A36,t.GC20,t),t.rgF(J19.A37,t.GC21,t),t.rgF(J19.A12,t.GK24,t),t.rgF(J19.A5,t.GD8,t),t.rgF(J19.A6,t.GI22,t),App.VM.register(O7.A63,"WelfareNoticeDetailView",t,K17.UI_Main_TOP),t.rgF(J19.A7,t.GG51,t),t.rgF(J19.A4,t.GE96,t),t.rgF(J19.A30,t.GP90,t),t.rgF(J19.A31,t.GP91,t),t.rgF(J19.A27,t.GT76,t),t.rgF(J19.A28,t.GT77,t),t}return __extends(t,i),t.prototype.GT76=function(t){this.proxy.GT76(t)},t.prototype.GT77=function(t){if(200==t.head.state){var e=this.gtM();e.lvts=t.body.lvts,P5.sIs(t.body.rd),e.notify(P4.I29)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG46=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GR70=function(){return this.proxy.ZHH32()},t.prototype.GR71=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GD6=function(){this.proxy.ZHH33()},t.prototype.GD7=function(t){if(200==t.head.state){var e=this.gtM();P5.sIs(t.body.reward);e.signTake.push({v:1,k:"type_heap"}),e.day=t.body.signDay,e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GB40=function(){this.proxy.ZE50()},t.prototype.GB41=function(t){if(200==t.head.state){var e=this.gtM();P5.sIs(t.body.reward);e.signTake.push({v:1,k:"type_normal"}),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GE5=function(){this.proxy.ZJ51()},t.prototype.GE6=function(t){if(200==t.head.state){var e=this.gtM();P5.sIs(t.body.reward);e.signTake.push({v:1,k:"type_vip4"}),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GA70=function(){this.proxy.ZC81()},t.prototype.GA71=function(t){if(200==t.head.state){var e=this.gtM();P5.sIs(t.body.reward);e.signTake.push({v:1,k:"type_recharge"}),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GC15=function(t){if(200==t.head.state){var e=this.gtM();e.isRecharge=t.body.isRecharge,e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GC16=function(){this.proxy.GC16()},t.prototype.GC17=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.redDot=e.redDot,i.notify(P4.F4)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG47=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZY30(e),i.notify(P4.D89)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GC18=function(t){var e={lv:t};this.proxy.ZB99(e)},t.prototype.GC19=function(t){if(200==t.head.state){var e=this.gtM();e.ZJ54(t.body),P5.sIs(t.body.reward),e.notify(P4.C91)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GB42=function(t){if(200==t.head.state){var e=this.gtM();e.ZJ54(t.body.lvGiftVo),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG48=function(t){if(200==t.head.state){var e=this.gtM();e.ZE54(t.body.monthVo),P5.sIs(t.body.reward),App.CM.apF(O6.B98,M19.A62),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GI20=function(){this.proxy.ZC2()},t.prototype.GI21=function(t){if(200==t.head.state){var e=this.gtM();e.monthTake=t.body.isTake,P5.sIs(t.body.reward),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GE95=function(t){if(200==t.head.state){var e=this.gtM();e.ZT73(t.body.sanguoVo),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG49=function(t){var e={type:t};this.proxy.ZE52(e)},t.prototype.GG50=function(t){if(200==t.head.state){var e=this.gtM();e.sanguoTake=t.body.takeStatus,P5.sIs(t.body.reward),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GC20=function(t){var e={key:t};this.proxy.ZC4(e)},t.prototype.GC21=function(t){if(200==t.head.state){P18.sDP(O3.tr(2917));var e=this.gtM();e.isTake=!0,P5.sIs(t.body.ob),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GK24=function(t){if(200==t.head.state){var e=this.gtM();e.ZHH37(t.body.extremeVo),e.notify(P4.C10)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GD8=function(){this.proxy.ZD46()},t.prototype.GI22=function(t){if(200==t.head.state){var e=this.gtM();e.ZHH37(t.body.extremeVo),P5.sIs(t.body.reward),e.notify(P4.B44)}else P18.sDP(K18.getTips(t.head.state))},t.prototype.GG51=function(t){App.VM.open(O7.A63,t),this.gtM().notify()},t.prototype.GE96=function(){App.VM.close(O7.A63)},t.prototype.GP90=function(t){var e={nid:t};this.proxy.GP90(e)},t.prototype.GP91=function(t){if(200==t.head.state){var e=this.gtM();e.ZF94(t.body),e.notify()}else P18.sDP(K18.getTips(t.head.state))},t}(TE11);__reflect(TC85.prototype,"TC85");var TF89=function(i){function t(t){var e=i.call(this,t)||this;return e.day=1,e.signTake=[],e.lvTakeStus=[],e.isRecharge=0,e.notices=[],e.redDot=0,e.sanguoTake=[],e.vipLevel=0,e.lvts=[],e}return __extends(t,i),t.prototype.initData=function(t){null!=t&&(this.tl=t.tl,this.openDay=t.openDay,this.lvts=t.lvts,this.ZY29(t.signVo),this.ZJ54(t.lvGiftVo),this.ZE54(t.monthVo),this.ZT73(t.sanguoVo),this.ZHH37(t.extremeVo),this.ZY30(t),this.monthPid=P7.getValue(t.mpid,this.monthPid),this.extremePid=P7.getValue(t.epid,this.extremePid))},t.prototype.ZY29=function(t){this.day=t.signDay,this.signTake=t.signTake,this.circleDay=t.circleDay,this.isRecharge=t.isRecharge},t.prototype.hasGetReward=function(t){if(this.signTake&&0<this.signTake.length)for(var e=0;e<this.signTake.length;e++)if(this.signTake[e].k==t)return this.signTake[e].v},t.prototype.getSignUpRed=function(){var t=App.CM.gtM(O6.B82),e=0;return this.hasGetReward("type_heap")||(e=1),this.hasGetReward("type_normal")||(e=1),this.hasGetReward("type_vip4")||t.avatarInfo.v>=J16.FG57()&&(e=1),this.hasGetReward("type_recharge")||this.isRecharge&&(e=1),e},t.prototype.ZM37=function(){var t=App.CM.gtM(O6.B51);return 0<this.getSignUpRed()?1:0<this.ZP80()?1:0<this.ZM39()?1:0<this.ZJ55()?1:0<t.ZN85()?1:this.getSanGuoRed()},t.prototype.ZY30=function(t){if(t.notices){this.notices=t.notices;for(var e=!1,i=0;i<this.notices.length;i++)if(0==this.notices[i].isRead){e=!0;break}this.redDot=e?1:0}},t.prototype.ZF94=function(t){for(var e=0;e<this.notices.length;e++)if(this.notices[e].id==t.nid){this.notices[e].isRead=t.isRead;break}},t.prototype.hasNoticeBtn=function(){for(var t=0,e=this.notices;t<e.length;t++){var i=e[t];if(1===i.quick&&0===i.isRead)return!0}return!1},t.prototype.ZJ54=function(t){this.lvTakeStus=t.lvTakeStus},t.prototype.ZHH35=function(){if(!this.lvTakeStus||this.lvTakeStus.length!=J16.FA21())return!1;for(var t=0;t<this.lvTakeStus.length;t++)if(2!=this.lvTakeStus[t].v)return!1;return!0},t.prototype.ZM38=function(t){if(this.lvTakeStus&&0<this.lvTakeStus.length)for(var e=0;e<this.lvTakeStus.length;e++)if(this.lvTakeStus[e].k==t)return this.lvTakeStus[e].v;return 0},t.prototype.ZP80=function(){var t=0;if(this.lvTakeStus&&0<this.lvTakeStus.length)for(var e=0;e<this.lvTakeStus.length;e++)1==this.lvTakeStus[e].v&&O4.getLv()>=this.lvTakeStus[e].k&&(t+=1);return t},t.prototype.ZHH36=function(){var t=0;if(this.lvts&&0<this.lvts.length)for(var e=0;e<this.lvts.length;e++)1==this.lvts[e].v&&this.lvts[e].k<=this.vipLevel&&(t+=1);return t},t.prototype.ZE54=function(t){this.monthTake=t.isTake,this.monthCd=t.cd,this.lastLoadMonthCard=P6.getTime()},t.prototype.ZM39=function(){var t=0;return 0==this.monthTake&&0<this.monthCd&&(t+=1),t},t.prototype.ZT73=function(t){this.curExp=t.exp,this.worldLevel=null!=t.worldLevel?t.worldLevel:this.worldLevel,this.rankThree=null!=t.rankThree?t.rankThree:this.rankThree,this.sanguoTake=t.sanguoTake},t.prototype.ZM40=function(t){if(this.sanguoTake&&0<this.sanguoTake.length)for(var e=0;e<this.sanguoTake.length;e++)if(this.sanguoTake[e].k==t)return this.sanguoTake[e].v;return 0},t.prototype.getSanGuoRed=function(){var t=0;if(this.sanguoTake&&0<this.sanguoTake.length)for(var e=0;e<this.sanguoTake.length;e++)1==this.sanguoTake[e].v&&(t+=1);return t},t.prototype.ZHH37=function(t){this.extremeCardData||(this.extremeCardData=new ExtremeCardVo),this.extremeCardData.updateData(t)},t.prototype.ZHH38=function(){return this.extremeCardData},t.prototype.ZJ55=function(){return this.extremeCardData&&0<this.extremeCardData.isBuy&&0==this.extremeCardData.isTake?1:0},t.prototype.ZT74=function(){var t=P6.getTime(),e=1e3*this.monthCd-(t-this.lastLoadMonthCard);return Math.ceil(e/1e3)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.notifyView.apply(this,[this].concat(t))},t}(TG79);__reflect(TF89.prototype,"TF89");var ItemExtremeCard=function(e){function t(){var t=e.call(this)||this;return t.skinName="ItemExtremeCardSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.lbPrePrice.$setText(O3.tr(2912,J16.gIV("extremeValue")));var t=App.CM.gtM(O6.B66),e=K18.FE65(t.extremePid);this.lbCurPrice.text=O3.tr(2918,e.price),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD44,this);var i=M18.FL28(J16.gIV("extremeLoginBonus"),":")[1];this.lbEveGold.text=i,this.lbBuyGold.text=e.gold},t.prototype.ZD69=function(t){var e=t.ZHH38();0==e.isBuy?(this.btnGet.enabled=!0,P16.sGF(this.btnGet,!1),this.btnGet.label=O3.tr(3294),this.btnGet.imgNew.visible=!1):0==e.isTake?(this.btnGet.enabled=!0,P16.sGF(this.btnGet,!1),this.btnGet.label=O3.tr(321),this.btnGet.imgNew.visible=!0):(this.btnGet.enabled=!1,P16.sGF(this.btnGet,!0),this.btnGet.label=O3.tr(903),this.btnGet.imgNew.visible=!1)},t.prototype.ZD44=function(){var t=App.CM.gtM(O6.B66),e=t.ZHH38();0==e.isBuy?App.CM.apF(O6.C29,P8.A1,t.extremePid):0==e.isTake&&App.CM.apF(O6.B66,J19.A5)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZD44,this)},t}(eui.Component);__reflect(ItemExtremeCard.prototype,"ItemExtremeCard");var ItemGiftPack=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemGiftPackSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.close=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.viewport=this.listReward,this.scReward.scrollPolicyH=eui.ScrollPolicy.OFF,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.onClickGet=function(){this.idx+1==this.id?App.CM.apF(O6.C29,P8.A7):App.CM.apF(O6.B66,J19.A27,this.id)},t.prototype.dataChanged=function(){this.imgVip.source="com_viptequen"+this.data.id+"_png",P7.FD53(this.getBtn,0),this.getBtn.bgStr="v1_btn_yellow_1_png",this.getBtn.enabled=!0,P16.sGF(this.getBtn,!1),this.id=parseInt(this.data.id),this.idx=parseInt(this.data.idx),this.getBtn.visible=this.data.type,this.imgGet.visible=!this.data.type,this.getBtn.label=O3.tr(7049),this.idx>=this.id?P7.FD53(this.getBtn,1):this.idx+1==this.id?(this.getBtn.label=O3.tr(7050),this.getBtn.bgStr="v1_btn_green_1_png"):(this.getBtn.enabled=!1,P16.sGF(this.getBtn,!0)),this.ZJ81()},t.prototype.ZJ81=function(){for(var t=M18.FL28(this.data.reward,";",":"),e=[],i=0;i<t.length;i++){var s={itemData:{data:N12.gID(t[i][0]),ct:t[i][1]},isBottom:!1};e.push(s)}this.dataSource.replaceAll(e)},t}(eui.ItemRenderer);__reflect(ItemGiftPack.prototype,"ItemGiftPack");var ItemMonthCard=function(e){function t(){var t=e.call(this)||this;return t.skinName="ItemMonthCardSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP79,this),this.btnBuy1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this);var t=App.CM.gtM(O6.B66),e=K18.FE65(t.monthPid);this.lbPrePrice1.$setText(O3.tr(2912,J16.FB39())),this.lbCurPrice1.text=O3.tr(2918,e.price);var i=M18.FL28(J16.gIV("monthlyLoginBonus"),":")[1];this.lbEveGold.text=i,this.lbBuyGold.text=e.gold,this.lbTotalGold.text=Number(e.gold)+30*Number(i)+""},t.prototype.ZD69=function(t){this.leftCD=t.ZT74();var e=O3.tr(2913,P6.FJ11(1e3*this.leftCD,5));this.lbTime1.textFlow=M18.HTP.parse(e),this._timerHandler||(this._timerHandler=App.K16.doTimer(1e3,0,this.GY14,this)),0<this.leftCD?(this.lbTime1.$setVisible(!0),0==t.monthTake?(this.btnGet.enabled=!0,P16.sGF(this.btnGet,!1),this.btnGet.label=O3.tr(321),this.btnGet.imgNew.visible=!0):(this.btnGet.enabled=!1,P16.sGF(this.btnGet,!0),this.btnGet.label=O3.tr(903),this.btnGet.imgNew.visible=!1),this.btnBuy1.label=O3.tr(3407),this.btnBuy1.visible=this.btnBuy1.includeInLayout=!0,this.btnGet.visible=this.btnGet.includeInLayout=!0):(this.lbTime1.$setVisible(!1),this.btnBuy1.visible=this.btnBuy1.includeInLayout=!0,this.btnGet.visible=this.btnGet.includeInLayout=!1,this.btnBuy1.label=O3.tr(3294))},t.prototype.GY14=function(){this.leftCD--;var t=O3.tr(2913,P6.FJ11(1e3*this.leftCD,5));this.lbTime1.textFlow=M18.HTP.parse(t),this.leftCD<=0&&(this.cTH(),this.lbTime1.text="")},t.prototype.cTH=function(){null!=this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null)},t.prototype.ZP79=function(){App.CM.apF(O6.B66,J19.A13)},t.prototype.onClickBuy=function(){var t=App.CM.gtM(O6.B66);App.CM.apF(O6.C29,P8.A1,t.monthPid)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP79,this),this.btnBuy1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this)},t}(eui.Component);__reflect(ItemMonthCard.prototype,"ItemMonthCard");var ItemWelfareAwardView=function(i){function t(t){var e=i.call(this)||this;return e.index=t,e.skinName=IconWelfareReward,e}return __extends(t,i),t.prototype.setData=function(t){this.lbGrad.$setText(O3.tr(2916,t.grade));t.reward.split(":");null==this.iconReward&&(this.iconReward=new ItemIcon,this.gpIcon.addChild(this.iconReward));var e=App.CM.gtM(O6.B66),i=App.CM.gtM(O6.B82).avatarInfo.l;3<e.worldLevel-i?this.ZF92(e.worldLevel,i):this.ZD45(t.reward),this.ZQ36(),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.ZD45=function(t){for(var e=M18.FL28(t,";",":"),i=0;i<e.length;i++){var s={itemData:{data:N12.gID(e[i][0]),ct:e[i][1]},isBottom:!1};this.iconReward.data=s}},t.prototype.ZF92=function(t,e){var i={itemData:{data:N12.gID("75004"),ct:K18.FHH93(e)*J16.FK22(t-e)},isBottom:!1};this.iconReward.data=i},t.prototype.ZQ36=function(){var t=App.CM.gtM(O6.B66).ZM40(this.index);this.getBtn.imgNew.visible=2==t?(this.getBtn.enabled=!1,P16.sGF(this.getBtn,!0),this.getBtn.label=O3.tr(5751),!1):1==t?(this.getBtn.enabled=!0,P16.sGF(this.getBtn,!1),this.getBtn.label=O3.tr(5752),!0):(this.getBtn.label=O3.tr(5753),this.getBtn.enabled=!1,P16.sGF(this.getBtn,!0),!1)},t.prototype.onClickGet=function(){App.CM.apF(O6.B66,J19.A10,this.index)},t}(eui.Component);__reflect(ItemWelfareAwardView.prototype,"ItemWelfareAwardView");var ItemWelfareRankRoleView=function(i){function t(t){var e=i.call(this)||this;return e.index=t,e.skinName=WelfareRoleView,e.initUI(),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.close,e),e}return __extends(t,i),t.prototype.initUI=function(){this.setRankImg()},t.prototype.close=function(){this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.grpBossArm.removeChildren()},t.prototype.setData=function(t){this.lbPlayerName.textFlow=M18.HTP.parse(O3.tr(3840,t.name)),this.lbPlayerLv.textFlow=M18.HTP.parse(O3.tr(3841,t.level.toString())),this.showBoss(t.u)},t.prototype.showBoss=function(t){if(this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.grpBossArm.removeChildren(),null!=t){this.objBoss=new FightGameObject,this.objBoss.action=Action.Stand;var e={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss.setBaseData(e),t.bt=BehaviourType.Attack_d,t.sr=1,this.objBoss.setData(t,this.grpBossArm)}},t.prototype.setRankImg=function(){switch(this.index){case 0:this.imgStar.source="v1_img_first_png";break;case 1:this.imgStar.source="v1_img_scend_png";break;case 2:this.imgStar.source="v1_img_third_png"}},t}(eui.Component);__reflect(ItemWelfareRankRoleView.prototype,"ItemWelfareRankRoleView");var ItemWelfareRender=function(e){function t(){var t=e.call(this)||this;return t.skinName=ItemWelfareSignSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.close=function(){this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.dataSource.removeAll()},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.listReward.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listReward.dataProvider=this.dataSource,this.scReward.viewport=this.listReward,this.scReward.scrollPolicyH=eui.ScrollPolicy.OFF,this.scReward.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.dataChanged=function(){if(1==this.data.type)switch(this.data.id){case 0:this.lbGrade.$setText(O3.tr(2904));break;case 1:this.lbGrade.$setText(O3.tr(2906,J16.FG57()));break;case 2:this.lbGrade.$setText(O3.tr(2907))}else 2==this.data.type&&(this.lbGrade.textFlow=M18.HTP.parse(O3.tr(2909,this.data.id)));this.imgTitle.width=this.lbGrade.width+55,this.ZQ36(),this.ZJ81()},t.prototype.ZQ36=function(){this.getBtn.$setVisible(!0),this.imgGet.$setVisible(!1);var t,e=App.CM.gtM(O6.B66),i=App.CM.gtM(O6.B82);if(1==this.data.type)switch(this.data.id){case 0:t=e.hasGetReward("type_normal")||0;break;case 1:(t=e.hasGetReward("type_vip4"))||(t=i.avatarInfo.v<J16.FG57()?3:0);break;case 2:(t=e.hasGetReward("type_recharge"))||(t=e.isRecharge?0:3)}else if(2==this.data.type)if(i.avatarInfo.l<this.data.id){this.lbLevel.$setVisible(!0);var s=O3.tr(2910,i.avatarInfo.l,this.data.id);this.lbLevel.textFlow=M18.HTP.parser(s)}else{this.lbLevel.$setVisible(!1),2==e.ZM38(this.data.id)?(this.getBtn.$setVisible(!1),this.imgGet.$setVisible(!0)):t=0}1==t?(this.getBtn.enabled=!1,P16.sGF(this.getBtn,!0),this.getBtn.label=O3.tr(3836),this.getBtn.imgNew.visible=!1):0==t?(this.getBtn.enabled=!0,P16.sGF(this.getBtn,!1),this.getBtn.label=O3.tr(3837),this.getBtn.imgNew.visible=!0,this.getBtn.imgNew.scaleX=1.3,this.getBtn.imgNew.scaleY=1.3):this.getBtn.imgNew.visible=(3==t?(this.getBtn.enabled=!0,P16.sGF(this.getBtn,!1),this.getBtn.label=O3.tr(3837)):(this.getBtn.label=O3.tr(3837),this.getBtn.enabled=!1,P16.sGF(this.getBtn,!0)),!1)},t.prototype.ZJ81=function(){for(var t=M18.FL28(this.data.reward,";",":"),e=[],i=0;i<t.length;i++){var s={itemData:{data:N12.gID(t[i][0]),ct:t[i][1]},isBottom:!1};e.push(s)}this.dataSource.replaceAll(e)},t.prototype.onClickGet=function(){if(1==this.data.type)switch(this.data.id){case 0:App.CM.apF(O6.B66,J19.A8);break;case 1:App.CM.gtM(O6.B82).avatarInfo.v<J16.FG57()?this.ZL1(O3.tr(2905),P8.A13):App.CM.apF(O6.B66,J19.A20);break;case 2:1==App.CM.gtM(O6.B66).isRecharge?App.CM.apF(O6.B66,J19.A2):this.ZL1(O3.tr(2908),P8.A7)}else 2==this.data.type&&App.CM.apF(O6.B66,J19.A15,this.data.id);this.ZQ36()},t.prototype.ZL1=function(t,e){App.VM.open(O7.I12);var i=App.VM.gOV(O7.I12);i.lbContent.text=t,i.stringTip="",i.controllerConst=O6.C29,i.reqConst=e},t}(eui.ItemRenderer);__reflect(ItemWelfareRender.prototype,"ItemWelfareRender");var VipPrivilegeGiftPackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="VipPrivilegeGiftPackSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.getBtn.label=O3.tr(7064);var t=App.CM.gtM(O6.B66);0==t.vipLevel?this.imgVipBg.source="com_viptequenhui_png":this.imgVipBg.source="com_viptequen_png",this.imgVip.source="com_viptequen"+t.vipLevel+"_png";var e={render:ItemGiftPack,gap:5,width:this.listGroup.width,height:this.listGroup.height,arrowScale:1};this.listView=new CommonListBase(e),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.listView.open(),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF89&&e==P4.I29&&this.ZD69(t)},t.prototype.ZD69=function(t){this.geRewardList(t)},t.prototype.geRewardList=function(t){var e=[],i=M18.FL28(J16.init.qqvipReward.value,"|");for(var s in i){var o=M18.FL28(i[s],","),r={type:1==t.lvts[s].v,reward:o[1],id:o[0],idx:t.vipLevel};e.push(r)}this.sortDataList(e),this.listView.rfL(e)},t.prototype.sortDataList=function(t){for(var e=t.length,i=0;i<e;i++)if(!t[i].type){var s=t[i];t.splice(Number(i),1),t.push(s),i--,e--}},t.prototype.onClick=function(){App.CM.apF(O6.C29,P8.A7)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.listView.close(),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(BaseEuiView);__reflect(VipPrivilegeGiftPackView.prototype,"VipPrivilegeGiftPackView");var WelfareActiveCordView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WelfareActiveCordSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btnGet.label=O3.tr(3842),this.inputChat.prompt=O3.tr(5754)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.inputChat.text="",this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.inputChat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.FL26,this);var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.FL26=function(){P7.FL26()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF89&&this.ZD69(t)},t.prototype.ZD69=function(t){this.notice.textFlow=M18.FG71(J16.init.cdKeyTips.value),t.isTake&&(this.inputChat.text="")},t.prototype.onClickGet=function(){var t=this.inputChat.text;0!=t.length?App.CM.apF(O6.B66,J19.A36,t):P18.sDP(O3.tr(5686))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.inputChat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.FL26,this)},t}(BaseEuiView);__reflect(WelfareActiveCordView.prototype,"WelfareActiveCordView");var WelfareBaseView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.itemNum=6,i.skinName="WelfareHallBaseSkin",App.VM.rgS(O7.F64,O7.F95,"WelfareSignView",i.content),App.VM.rgS(O7.F64,O7.C52,"WelfareLevelGiftView",i.content),App.VM.rgS(O7.F64,O7.C53,"WelfareMonthCardView",i.content),App.VM.rgS(O7.F64,O7.D24,"WelfareThreeKdView",i.content),App.VM.rgS(O7.F64,O7.B28,"WelfareActiveCordView",i.content),App.VM.rgS(O7.F64,O7.E8,"WelfareNoticeView",i.content),App.VM.rgS(O7.F64,O7.C3,"ComeBackBangDingView",i.content),App.VM.rgS(O7.F64,O7.I28,"SuperVipView",i.content),App.VM.rgS(O7.F64,O7.A50,"VipPrivilegeGiftPackView",i.content),i.topScroller.viewport=i.topList,i.topScroller.scrollPolicyV=eui.ScrollPolicy.OFF,i.list=J16.FF51(),i.iconList=J16.FF52(),i.nameList=J16.FF53(),i._topCollection=new eui.ArrayCollection,i.topList.dataProvider=i._topCollection,i.topList.itemRenderer=WelfareIconView,i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.title.textFlow=M18.HTP.parse(O3.tr(3835))},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),this.curSelect=t[0]||O7.F95,this.ZU39(),App.VM.open(this.curSelect),this.ZJ48(0),this.lbDes.text="",this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.leftGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ40,this),this.rightGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM90,this);var i=App.CM.gtM(O6.B66);this.uBM(i);var s=App.CM.gtM(O6.B51);this.ZT71(s)},t.prototype.ZU39=function(){var t=App.CM.gtM(O6.B66);this.views=[],this.types=[],this.icons=[],this.sLink=[],this.data=[];var e=O4.getLv(),i=App.CM.gtM(O6.B43).serOpenDay+1;e>=J16.init.unlockSignInLv.value&&(this.views.push(O7.F95),this.types.push(this.nameList[0]),this.icons.push(this.iconList[0]),this.sLink.push(parseInt(this.list[0]))),e>=J16.init.levelGiftUnlockLv.value&&!t.ZHH35()&&(this.views.push(O7.C52),this.types.push(this.nameList[1]),this.icons.push(this.iconList[1]),this.sLink.push(parseInt(this.list[1]))),P7.FG67()||e>=J16.init.unlockMonthlyLv.value&&(this.views.push(O7.C53),this.types.push(this.nameList[2]),this.icons.push(this.iconList[2]),this.sLink.push(parseInt(this.list[2]))),this.views.push(O7.D24),this.types.push(this.nameList[3]),this.icons.push(this.iconList[3]),this.sLink.push(parseInt(this.list[3]));var s=P7.FL24();P7.FG67()||"japan"===platform.name&&"P0000126"==platform.gameId||"P0000202"==platform.gameId||"P0000203"==platform.gameId||!s&&e>=J16.init.unlockCdKeyLv.value&&(this.views.push(O7.B28),this.types.push(this.nameList[4]),this.icons.push(this.iconList[4]),this.sLink.push(parseInt(this.list[4]))),e>=J16.init.unlockNoticeLv.value&&(this.views.push(O7.E8),this.types.push(this.nameList[5]),this.icons.push(this.iconList[5]),this.sLink.push(parseInt(this.list[5]))),i>=TE62.FE59("recallDay")&&e>=TE62.FE59("recallLv")&&(this.views.push(O7.C3),this.types.push(this.nameList[6]),this.icons.push(this.iconList[6]),this.sLink.push(parseInt(this.list[6])));var o=App.CM.gtM(O6.B52),r=!o.actData||0!=o.actData.svState||1==o.actData.confs.isShow;P7.FG67()||e>=J16.gIV("svipLv")&&o.actData&&o.openState&&r&&"crazy"!==platform.name&&(this.views.push(O7.I28),this.types.push(this.nameList[7]),this.icons.push(this.iconList[7]),this.sLink.push(parseInt(this.list[7]))),"wanba"===platform.name&&-1==window.OPEN_DATA.pf.indexOf("weixin")&&"QQLive"!=window.OPEN_DATA.qua.app&&(this.views.push(O7.A50),this.types.push(O3.tr(7051)),this.icons.push("v1_btn_chaojivip_png"),this.sLink.push(1509)),0<this.data.length&&(this.data.splice(0,this.data.length),this.data=[]);for(var n=0;n<this.types.length;n++){var a={type:this.types[n],icon:this.icons[n],sLink:this.sLink[n],red:0,texiao:0};this.data.push(a)}var h=this.views.indexOf(this.curSelect);this.ZM94(h)},t.prototype.ZM94=function(t){for(var e=0;e<this.types.length;e++)this.data[e].texiao=e==t?1:0;this._topCollection.replaceAll(this.data)},t.prototype.uBM=function(t,e){o.prototype.uBM.call(this,t,e),this.updateArrow(),t instanceof TF89&&(e==P4.C91&&t.ZHH35()?(this.curSelect=O7.F95,App.VM.open(this.curSelect),this.ZU39()):this.ZY25(t)),t instanceof TF36&&this.ZT71(t),this.updateFoot()},t.prototype.ZT71=function(t){var e=this.views.indexOf(O7.C3),i=this._topCollection.getItemAt(e);i&&(i.red=t.ZN85(),this._topCollection.itemUpdated(i))},t.prototype.updateFoot=function(){switch(this.curSelect){case O7.C52:this.lbDes.text=O3.tr(2911);break;case O7.F95:case O7.C53:case O7.D24:case O7.B28:case O7.E8:case O7.C3:case O7.A50:this.lbDes.text=""}},t.prototype.updateArrow=function(){this.views.length>this.itemNum?(this.leftGroup.visible=!0,this.rightGroup.visible=!0):(this.leftGroup.visible=!1,this.rightGroup.visible=!1)},t.prototype.ZY25=function(t){var e=this.views.indexOf(O7.F95),i=this._topCollection.getItemAt(e);i&&(i.red=t.getSignUpRed(),this._topCollection.itemUpdated(i));var s=this.views.indexOf(O7.C52),o=this._topCollection.getItemAt(s);o&&(o.red=t.ZP80(),this._topCollection.itemUpdated(o));var r=this.views.indexOf(O7.A50),n=this._topCollection.getItemAt(r);n&&(n.red=t.ZHH36(),this._topCollection.itemUpdated(n));var a=this.views.indexOf(O7.C53),h=this._topCollection.getItemAt(a);h&&(h.red=t.ZM39()+t.ZJ55(),this._topCollection.itemUpdated(h));var p=this.views.indexOf(O7.D24),l=this._topCollection.getItemAt(p);if(l){var c=O4.getLv();App.CM.gtM(O6.B66).openDay+1>J16.init.unlockWelfareDate.value&&c>=J16.init.unlockWelfareLv.value?l.red=t.getSanGuoRed():l.red=0,this._topCollection.itemUpdated(l)}var u=this.views.indexOf(O7.E8),d=this._topCollection.getItemAt(u);d&&(d.red=t.redDot,this._topCollection.itemUpdated(d));var v=App.CM.gtM(O6.B51);this.ZT71(v);var f=this.views.indexOf(O7.I28),g=this._topCollection.getItemAt(f),m=App.CM.gtM(O6.B52);g&&(g.red=m.FL35(),this._topCollection.itemUpdated(g))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.leftGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ40,this),this.rightGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM90,this),this._topCollection.removeAll(),this.views=null,this.data=null,this.types=null,this.icons=null,this.sLink=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.ZQ40=function(){var t=this.topList.contentWidth/this.data.length,e=Math.ceil((this.topList.scrollH-t*this.itemNum)/t);e<this.itemNum&&(e=0),this.topList.scrollH=e*t,this.ZJ48(e)},t.prototype.ZM90=function(){var t=this.topList.contentWidth/this.data.length;if(!(this.data.length<=this.itemNum)){var e=Math.ceil((this.topList.scrollH+t*this.itemNum)/t);e>=this.data.length-this.itemNum&&(e=this.data.length-this.itemNum),this.topList.scrollH=e*t,this.ZJ48(e)}},t.prototype.ZJ48=function(t){if(0==t){this.redLeft.$setVisible(!1);for(var e=this.itemNum;e<this.data.length;e++)0<this.data[e].red?this.redRight.$setVisible(!0):this.redRight.$setVisible(!1)}if(t+this.itemNum>=this.data.length){this.redRight.$setVisible(!1);for(e=0;e<t;e++)0<this.data[e].red?this.redLeft.$setVisible(!0):this.redLeft.$setVisible(!1)}if(0<t){for(e=0;e<t-1;e++)0<this.data[e].red?this.redLeft.$setVisible(!0):this.redLeft.$setVisible(!1);for(e=t+1;e<this.data.length;e++)0<this.data[e].red?this.redRight.$setVisible(!0):this.redRight.$setVisible(!1)}},t}(BaseEuiView);__reflect(WelfareBaseView.prototype,"WelfareBaseView");var WelfareIconView=function(e){function t(){var t=e.call(this)||this;return t.skinName="IconWelfareSkin",t.texiao.$setVisible(!1),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.icon.source=this.data.icon,P7.FD57(this.data.type,this.lbName),this.red.$setVisible(0<this.data.red),this.texiao.$setVisible(this.data.texiao)},t.prototype.oCI=function(){TG40.playClickEffect(),null!=this.data.sLink&&TG84.goToDlg(this.data)},t}(eui.ItemRenderer);__reflect(WelfareIconView.prototype,"WelfareIconView");var WelfareLevelGiftView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WelfareHallSign",i.sGN("release_fuli_level"),i.imgBg.source="v1_bg_qiandaofl2_jpg",i.gGroup.visible=!1,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemWelfareRender,gap:5,width:this.listGroup.width,height:this.listGroup.height,arrowScale:1};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.listView.open();var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF89&&e==P4.C91&&this.ZD69(t)},t.prototype.ZD69=function(t){this.geRewardList(t)},t.prototype.geRewardList=function(t){var e=J16.FC1(),i=[];for(var s in e){var o={type:2,reward:e[s].reward,id:e[s].level,state:2==t.ZM38(parseInt(s))?-1:t.ZM38(parseInt(s))};i.push(o)}this.sortDataList(i),this.listView.rfL(i)},t.prototype.sortDataList=function(t){t=t.sort(function(t,e){var i=e.state-t.state;return 0!==i?i:t.id-e.id})},t.prototype.onClickGet=function(){App.CM.apF(O6.B66,J19.A18)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.listView.close()},t}(BaseEuiView);__reflect(WelfareLevelGiftView.prototype,"WelfareLevelGiftView");var WelfareLineNoticeView=function(e){function t(){var t=e.call(this)||this;return t.skinName=WelfareLineNoticeSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.oCI,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.initUI()},t.prototype.initUI=function(){this.status.visible=!1,this.status.textFlow=M18.HTP.parse(O3.tr(3844))},t.prototype.dataChanged=function(){this.title.textFlow=M18.HTP.parse(O3.tr(3843,this.data.title)),this.content.textFlow=M18.HTP.parse(O3.tr(3845,this.data.simple)+O3.tr(3846)),this.status.x=this.title.width+15,this.status.visible=this.data.status},t.prototype.oCI=function(){TG40.playClickEffect(),null!=this.data.title&&(App.CM.apF(O6.B66,J19.A30,this.data.nid),App.CM.apF(O6.B66,J19.A7,this.data))},t}(eui.ItemRenderer);__reflect(WelfareLineNoticeView.prototype,"WelfareLineNoticeView");var WelfareMonthCardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WelfareMonthCardSkin",i.sGN("release_fuli_yueka"),i}return __extends(t,s),t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.initUI=function(){s.prototype.initUI.call(this),this.extremeCard||(this.extremeCard=new ItemExtremeCard,this.gpContent.addChild(this.extremeCard)),this.monthCard||(this.monthCard=new ItemMonthCard,this.gpContent.addChild(this.monthCard))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t);var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF89&&this.ZD69(t)},t.prototype.ZD69=function(t){this.extremeCard.ZD69(t),this.monthCard.ZD69(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t)},t}(BaseEuiView);__reflect(WelfareMonthCardView.prototype,"WelfareMonthCardView");var WelfareNoticeDetailView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WelfareNoticeDetailSkin,i}return __extends(t,s),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.title.textFlow=M18.HTP.parse(O3.tr(3847,t[0].title)),this.content.textFlow=t[0].content,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.downImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownImg,this),this.contentScroller.addEventListener(eui.UIEvent.CHANGE_END,this.ZJ49,this)},t.prototype.doDownImg=function(){var t=this.contentScroller.viewport.scrollV+this.contentScroller.height;t<=this.gpContent.contentHeight-this.contentScroller.height?this.contentScroller.viewport.scrollV+=t:this.contentScroller.viewport.scrollV=this.gpContent.contentHeight-this.contentScroller.height,this.ZJ49()},t.prototype.ZJ49=function(){this.gpContent.contentHeight>this.contentScroller.height&&(this.downImg.visible=!0),this.contentScroller.viewport.scrollV+this.contentScroller.height>=this.gpContent.contentHeight&&(this.downImg.visible=!1)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF89&&this.ZJ49()},t.prototype.onClick=function(){App.CM.apF(O6.B66,J19.A4)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.title=null,this.content=null,this.contentScroller=null,this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.bgMask=null,this.closeBtn=null,this.btnBack=null,this.gpContent=null},t}(BaseEuiView);__reflect(WelfareNoticeDetailView.prototype,"WelfareNoticeDetailView");var WelfareNoticeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WelfareNoticeSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.initData=function(){s.prototype.initData.call(this),this._collection=new eui.ArrayCollection,this.contentScroller.scrollPolicyV=eui.ScrollPolicy.AUTO,this.noticeList.dataProvider=this._collection,this.noticeList.itemRenderer=WelfareLineNoticeView,this.upImg.visible=!1,this.downImg.visible=!1},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this._welfareModel=App.CM.gtM(O6.B66),this.GX5(),this.upImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpImg,this),this.downImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownImg,this),this.contentScroller.addEventListener(eui.UIEvent.CHANGE_END,this.ZJ49,this),this.noticeList.contentWidth>this.contentScroller.height&&(this.downImg.visible=!0)},t.prototype.doUpImg=function(){var t=this.contentScroller.viewport.scrollV-this.contentScroller.height;this.contentScroller.viewport.scrollV=t<0?0:t,this.ZJ49()},t.prototype.doDownImg=function(){var t=this.contentScroller.viewport.scrollV+this.contentScroller.height;t<=this.noticeList.contentHeight-this.contentScroller.height?this.contentScroller.viewport.scrollV+=t:this.contentScroller.viewport.scrollV=this.noticeList.contentHeight-this.contentScroller.height,this.ZJ49()},t.prototype.ZJ49=function(){this.noticeList.contentHeight>this.contentScroller.height&&(this.downImg.visible=!0),this.contentScroller.viewport.scrollV+this.contentScroller.height>=this.noticeList.contentHeight&&(this.downImg.visible=!1),this.contentScroller.viewport.scrollV<=0?this.upImg.visible=!1:this.upImg.visible=!0},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF89&&this.GX5()},t.prototype.GX5=function(){if(this._welfareModel.notices){var t=this._welfareModel.notices;t.sort(this.sortNumber);var e=!0;this.data=[];for(var i=void 0,s="",o=0;o<t.length;o++){i=M18.FG71(t[o].context),s="";for(var r=0;r<i.length;r++)s+=i[r].text.trim();var n={nid:t[o].id,title:t[o].title,content:i,simple:this.ZY26(s,68),status:0==t[o].isRead};0==t[o].isRead&&(e=!1),this.data.push(n)}this._collection.replaceAll(this.data),e&&(this._welfareModel.redDot=0)}this.ZJ49()},t.prototype.sortNumber=function(t,e){return t.showOrder-e.showOrder},t.prototype.ZY26=function(t,e){return t?t.replace(/\r\n|\n/g," ").substring(0,e)+"……":""},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.upImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpImg,this),this.downImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownImg,this),this.contentScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.ZJ49,this),this._welfareModel=null,this.noticeList=null,this._collection=null,this.data=null},t}(BaseEuiView);__reflect(WelfareNoticeView.prototype,"WelfareNoticeView");var WelfareSignView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WelfareHallSign",i.sGN("release_fuli_sign"),i.iconReward=new ItemIcon,i.gpIcon.addChild(i.iconReward),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this);var t={render:ItemWelfareRender,gap:5,width:this.listGroup.width,height:this.listGroup.height,arrowScale:1};this.listView=new CommonListBase(t),this.listGroup.addChild(this.listView),this.listView.verticalCenter=0,this.listView.horizontalCenter=0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.ZJ81=function(t){for(var e=M18.FL28(t,";",":"),i=0;i<e.length;i++){var s={itemData:{data:N12.gID(e[i][0]),ct:e[i][1]},isBottom:!1};this.iconReward.data=s}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.listView.open(),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.getBtn.size="29";var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF89&&this.ZD69(t)},t.prototype.ZD69=function(t){var e;t.hasGetReward("type_heap")?(e=t.day-1,this.getBtn.enabled=!1,P16.sGF(this.getBtn,!0),this.getBtn.label=O3.tr(3836),this.getBtn.imgNew.visible=0==t.hasGetReward("type_heap")):(e=t.day,this.getBtn.enabled=!0,P16.sGF(this.getBtn,!1),this.getBtn.label=O3.tr(3837),this.getBtn.imgNew.visible=!0,this.getBtn.imgNew.scaleX=1.4,this.getBtn.imgNew.scaleY=1.4);var i=J16.FK21(t.day);this.ZJ81(i.reward),this.lbTip.text=O3.tr(2902,e,J16.FD45()),this.lbgift.text=O3.tr(2903,t.day),this.geRewardList(t)},t.prototype.geRewardList=function(t){var e=[],i=J16.FD46(t.circleDay);if(i){var s=3;P7.FG67()&&(s=1);for(var o=0;o<s;o++){var r={type:1,reward:i[o],id:o};e.push(r)}this.listView.rfL(e),this.listView.noScoller()}},t.prototype.onClickGet=function(){App.CM.apF(O6.B66,J19.A18)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this,t),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this),this.listView.close()},t}(BaseEuiView);__reflect(WelfareSignView.prototype,"WelfareSignView");var WelfareThreeKdView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.viewNum=3,i.skinName="WelfareThreeKdSkin",i.grps=[i.group1,i.group2,i.group3],i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbTip.textFlow=M18.HTP.parse(O3.tr(3838)),this.lbJump.textFlow=M18.HTP.parse(O3.tr(3839)),this.lbBottom.textFlow=O3.tr2(7490)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZT72(),this.initRoleView(),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),this.lbJump.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this);var i=App.CM.gtM(O6.B66);this.ZD69(i)},t.prototype.ZT72=function(){this.rewardArray=[];for(var t=1;t<4;t++){var e=new ItemWelfareAwardView(t);this.rewardArray.push(e)}this.reward1.addChild(this.rewardArray[0]),this.reward2.addChild(this.rewardArray[1]),this.reward3.addChild(this.rewardArray[2])},t.prototype.initRoleView=function(){this.roleArray=[];for(var t=0;t<this.viewNum;t++)if(!this.roleArray[t]){var e=new ItemWelfareRankRoleView(t);this.roleArray.push(e),this.grps[t].addChild(this.roleArray[t])}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TF89&&this.ZD69(t)},t.prototype.ZD69=function(t){var e=O3.tr(2914,t.worldLevel);this.lbLevel.textFlow=M18.HTP.parser(e);var i=O3.tr(2915,t.curExp);this.lbExp.textFlow=M18.HTP.parser(i),this.ZJ50();var s=t.rankThree;s&&0<s.length&&this.ZN31(s),this.lbBottom.textFlow=O3.tr2(7490,t.worldLevel-3)},t.prototype.ZJ50=function(){for(var t=J16.FG58(),e=0;e<3;e++){var i={grade:t[e],reward:J16.init.welfareSyceeBonus.value};this.rewardArray[e].setData(i)}},t.prototype.ZN31=function(t){if(t.length<this.viewNum)for(var e=t.length;e<this.viewNum;e++)this.roleArray[e]&&this.grps[e].removeChild(this.roleArray[e]);for(e=0;e<t.length;e++)t[e]&&this.roleArray[e].setData(t[e])},t.prototype.onClickHelp=function(){var t={title:J16.init.tipsTitle.value,content:J16.init.tipsTex.value};App.VM.open(O7.I8,t)},t.prototype.onClickJump=function(){TG84.goToDlg({sLink:1401})},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i in s.prototype.close.call(this,t),this.grps)this.grps[i].removeChildren();this.reward1.removeChildren(),this.reward2.removeChildren(),this.reward3.removeChildren(),this.roleArray=null,this.rewardArray=null,this.btnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),this.lbJump.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJump,this)},t}(BaseEuiView);__reflect(WelfareThreeKdView.prototype,"WelfareThreeKdView");var ExtremeCardVo=function(){function t(){}return t.prototype.updateData=function(t){this.isBuy=null!=t.isBuy?t.isBuy:this.isBuy,this.isTake=null!=t.isTake?t.isTake:this.isTake},t}();__reflect(ExtremeCardVo.prototype,"ExtremeCardVo");var J16=function(){function s(){}return s.FK35=function(t){s.init=t.welfare_init,s.sanguoreward=t.welfare_sanguoreward,s.signreward=t.welfare_signreward,s.heapreward=t.welfare_heapreward,s.levelgift=t.welfare_levelgift},s.FD45=function(){return s.init.signInResetDate.value},s.FG57=function(){if(K18.vip)for(var t in K18.vip){var e=K18.vip[t];if(1==e.vipsigninlimit)return e.level}return 0},s.FK21=function(t){if(t)return s.heapreward[t]},s.FD46=function(t){if(t){var e=[];return e.push(s.signreward[t].normalreward,s.signreward[t].vipreward,s.signreward[t].rechargereward),e}},s.FC1=function(){return s.levelgift},s.FA21=function(){var t=0;for(var e in s.levelgift)t+=1;return t},s.FC2=function(){return s.init.weeklyValue.value},s.FB39=function(){return s.init.monthlyValue.value},s.FF51=function(){return s.init.entranceSort.value.split(",")},s.FF52=function(){return s.init.entranceIcon.value.split(",")},s.FF53=function(){return s.init.entranceName.value.split(",")},s.FG58=function(){return s.init.welfareReqDailyExp.value.split(",")},s.FK22=function(t){var e=[];for(var i in s.sanguoreward)e.push(s.sanguoreward[i]);for(i=0;i<e.length-1;i++)if(t>=e[i].type&&t<e[i+1].type)return e[i].ratio;return e[e.length-1].ratio},s.gIV=function(t){return s.init[t].value},s.FG59=function(t,e){var i=M18.FL28(t,"|"),s="";for(var o in i){var r=M18.FL28(i[o],",");if(r[0]==e){var n=M18.FL28(r[1],";");for(var a in n){var h=M18.FL28(n[a],":");s+=N12.gID(h[0]).name+"×"+h[1]+"  "}}}return s},s.FL97=function(t){var e=M18.FL28(s.init.qqdayGift.value,"|");for(var i in e){if(M18.FL28(e[i],",")[0]==t)return!0}return!1},s}();__reflect(J16.prototype,"J16");var J19=function(){function t(){}return t.A35=10001,t.A38=10002,t.A39=10003,t.A18=10004,t.A19=10005,t.A8=10006,t.A9=10007,t.A20=10008,t.A21=10009,t.A2=10010,t.A3=10011,t.A22=10012,t.A13=10013,t.A14=10014,t.A23=10018,t.A10=10019,t.A11=10020,t.A1=10021,t.A15=10022,t.A16=10023,t.A24=10024,t.A25=10025,t.A26=10026,t.A29=10027,t.A17=10028,t.A36=10029,t.A37=10030,t.A12=10031,t.A5=10032,t.A6=10033,t.A7=10034,t.A4=10035,t.A30=10036,t.A31=10037,t.A33=10038,t.A34=10039,t.A27=10040,t.A28=10041,t.A32=10040,t}();__reflect(J19.prototype,"J19");var TF90=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.T56,e.getResetPush,e),e.rSM(P4.C92,e.ZE49,e),e.rSM(P4.A62,e.ZM36,e),e.rSM(P4.D87,e.ZF93,e),e.rSM(P4.D88,e.ZY27,e),e.rSM(P4.D89,e.GG47,e),e.rSM(P4.D84,e.ZHH34,e),e.rSM(P4.C7,e.ZE51,e),e.rSM(P4.D86,e.ZJ52,e),e.rSM(P4.A86,e.ZC82,e),e.rSM(P4.C91,e.ZC1,e),e.rSM(P4.C89,e.ZC3,e),e.rSM(P4.C9,e.ZE53,e),e.rSM(P4.U69,e.ZC5,e),e.rSM(P4.C10,e.GK24,e),e.rSM(P4.B44,e.ZJ53,e),e.rSM(P4.M15,e.svipStateRes,e),e.rSM(P4.K7,e.ZY28,e),e}return __extends(t,i),t.prototype.ZY27=function(t){this.apF(J19.A23,t)},t.prototype.ZF93=function(t){this.apF(J19.A22,t)},t.prototype.ZM36=function(t){this.apF(J19.A1,t)},t.prototype.ZE49=function(t){this.apF(J19.A17,t)},t.prototype.getResetPush=function(t){this.apF(J19.A35,t)},t.prototype.ZHH32=function(){var s=this;return new Promise(function(e,t){var i={type:P4.V73,body:{}};s.rSMO(P4.V74,function(t){s.apF(J19.A39,t),e("加载活动大厅加载完成")},s),s.sSM(i)})},t.prototype.ZHH33=function(){var t={type:P4.D83,body:{}};this.sSM(t)},t.prototype.ZHH34=function(t){this.apF(J19.A19,t)},t.prototype.ZE50=function(){var t={type:P4.C6,body:{}};this.sSM(t)},t.prototype.ZE51=function(t){this.apF(J19.A9,t)},t.prototype.ZJ51=function(){var t={type:P4.D85,body:{}};this.sSM(t)},t.prototype.ZJ52=function(t){this.apF(J19.A21,t)},t.prototype.ZC81=function(){var t={type:P4.A85,body:{}};this.sSM(t)},t.prototype.ZC82=function(t){this.apF(J19.A3,t)},t.prototype.GC16=function(){var t={type:P4.F3,body:{}};this.rSMO(P4.F4,this.GC17,this),this.sSM(t)},t.prototype.GC17=function(t){this.apF(J19.A26,t)},t.prototype.GG47=function(t){this.apF(J19.A29,t)},t.prototype.ZB99=function(t){var e={type:P4.C90,body:t};this.sSM(e)},t.prototype.ZC1=function(t){this.apF(J19.A16,t)},t.prototype.ZC2=function(){var t={type:P4.C88,body:{}};this.sSM(t)},t.prototype.ZC3=function(t){this.apF(J19.A14,t)},t.prototype.ZE52=function(t){var e={type:P4.C8,body:t};this.sSM(e)},t.prototype.ZE53=function(t){this.apF(J19.A11,t)},t.prototype.ZC4=function(t){var e={type:P4.U68,body:t};this.sSM(e)},t.prototype.ZC5=function(t){this.apF(J19.A37,t)},t.prototype.GK24=function(t){this.apF(J19.A12,t)},t.prototype.ZD46=function(){var t={type:P4.B43,body:{}};this.sSM(t)},t.prototype.ZJ53=function(t){this.apF(J19.A6,t)},t.prototype.GP90=function(t){var e={type:P4.F3,body:t};this.rSMO(P4.F4,this.GP91,this),this.sSM(e)},t.prototype.GP91=function(t){this.apF(J19.A31,t)},t.prototype.svipStateReq=function(){var t={type:P4.M14,body:{}};this.sSM(t)},t.prototype.svipStateRes=function(t){this.apF(J19.A34,t)},t.prototype.ZY28=function(t){this.apF(J19.A32,t)},t.prototype.GT76=function(t){var e={type:P4.I28,body:{lv:t}};this.rSMO(P4.I29,this.GT77,this),this.sSM(e)},t.prototype.GT77=function(t){this.apF(J19.A28,t)},t}(TG80);__reflect(TF90.prototype,"TF90");var N13=function(){function r(){}return r.FK35=function(t){r.init=t.wing_init,r.base=t.wing_base,r.skin=t.wing_skin,r.skill=t.wing_skill,r.reward=t.wing_reward,r.skillGroup=this.FI15(),r.expDanData=this.FHH33(),WingLangs.typeMaps[O10.A37]={name:O3.tr(7732)},WingLangs.typeMaps[O10.A38]={name:O3.tr(7733)},WingLangs.typeMaps[O10.A36]={name:O3.tr(7734)},WingLangs.typeMaps[O10.A39]={name:O3.tr(7735)},WingLangs.typeEquipMaps[0]={name:O3.tr(7736),imgText:"v1_fonts_qianghuadashi_png",lv:"lvstrength",need:"needcoin"},WingLangs.typeEquipMaps[1]={name:O3.tr(7737),imgText:"v1_fonts_jingliandashi_png",lv:"lvrefine",need:"needrefine"},WingLangs.typeEquipMaps[2]={name:O3.tr(7738),imgText:"v1_fonts_dualdashi_png",lv:"lvforging",need:"needforging"},WingLangs.typeEquipMaps[3]={name:O3.tr(7739),imgText:"v1_fonts_baoshidashi_png",lv:"lvgem",need:"needgem"}},r.FI47=function(){var t;t=r.reward;var e=[];for(var i in t)e.push(t[i]);return e},r.getData=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++)e[s]={},e[s][i[s].split(":")[0]]=i[s].split(":")[1];return e},r.FHH90=function(t){var e=[];if(t)for(var i in r.skin)-1==r.skin[i].itemid&&e.push(r.skin[i]);else for(var i in r.skin)-1!=r.skin[i].itemid&&e.push(r.skin[i]);return e},r.FI15=function(){var t={};for(var e in r.skill){var i=r.skill[e],s=[],o=i.skillid+"";t[o]?t[o].push(i):(s.push(i),t[o]=s)}return t},r.FHH33=function(){var t={};if(!this.init)return t;for(var e=this.init.expItem.value.split(";"),i=0;i<e.length;i++){var s=[],o=e[i].split(":"),r=o[0];t[r]||(s.push(o[1]),t[r]=s)}return t},r}();__reflect(N13.prototype,"N13");var O10=function(){function t(){}return t.A37=1,t.A38=2,t.A36=3,t.A39=4,t.A30=10001,t.A31=10002,t.A35=10003,t.A20=10004,t.A21=10005,t.A13=10006,t.A14=10007,t.A32=10008,t.A15=10009,t.A26=10010,t.A33=10011,t.A29=10012,t.A6=10013,t.A7=10014,t.A8=10015,t.A27=10016,t.A3=10017,t.A34=10018,t.A9=10019,t.A22=10020,t.A28=11003,t.A23=11004,t.A16=11005,t.A10=11006,t.A4=11007,t.A1=11008,t.A17=11009,t.A11=11010,t.A12=11011,t.A24=11012,t.A18=11013,t.A25=11014,t.A19=11015,t.A5=11016,t.A2=11017,t}();__reflect(O10.prototype,"O10");var WingLangs,TF2=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I1,"WingMainView",t,K17.UI_Main_TOP),t.rgF(O10.A25,t.GN97,t),t.rgF(O10.A19,t.GL97,t),App.VM.register(O7.I44,"WingDan",t,K17.UI_Main_TOP),t.rgF(O10.A28,t.GP92,t),t.rgF(O10.A23,t.GN98,t),App.VM.register(O7.HH36,"WingDerma",t,K17.UI_Main_TOP),t.rgF(O10.A16,t.GL98,t),t.rgF(O10.A10,t.GK25,t),App.VM.register(O7.F81,"WingEverAdd",t,K17.UI_Tips),t.rgF(O10.A4,t.GI24,t),t.rgF(O10.A1,t.GG53,t),App.VM.register(O7.HH37,"WingSkill",t,K17.UI_Main_TOP),t.rgF(O10.A17,t.GL99,t),t.rgF(O10.A11,t.GK26,t),t.rgF(O10.A12,t.GK27,t),App.VM.register(O7.I8,"WingHelp",t,K17.UI_Tips),t.rgF(O10.A24,t.GN99,t),t.rgF(O10.A18,t.GM1,t),App.VM.register(O7.F80,"WingDanHint",t,K17.UI_Tips),t.rgF(O10.A5,t.GI23,t),t.rgF(O10.A2,t.GG52,t);var e=new THH21(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.I88),e.aLV(O7.I44),e.aLV(O7.HH36),e.aLV(O7.F81),e.aLV(O7.HH37),e.aLV(O7.I1),e.aLV(O7.G58),e.aLV(O7.G45),e.aLV(O7.F86),e.aLV(O7.I17),e.aLV(O7.I39),e.aLV(O7.I70),t.wingProxy=new THH22(t),t.rgF(O10.A30,t.loadReq,t),t.rgF(O10.A31,t.loadRes,t),t.rgF(O10.A22,t.GQ35,t),t.rgF(O10.A20,t.GR72,t),t.rgF(O10.A21,t.GR73,t),t.rgF(O10.A7,t.GW77,t),t.rgF(O10.A8,t.GW78,t),t.rgF(O10.A27,t.GT78,t),t.rgF(O10.A3,t.GT79,t),t.rgF(O10.A29,t.GV36,t),t.rgF(O10.A6,t.GV37,t),t.rgF(O10.A26,t.GT80,t),t.rgF(O10.A33,t.GT81,t),t.rgF(O10.A34,t.GX99,t),t.rgF(O10.A9,t.GY1,t),t.rgF(O10.A32,t.GW79,t),t.rgF(O10.A15,t.GW80,t),t.rgF(O10.A13,t.GP93,t),t.rgF(O10.A14,t.GP94,t),t.rgF(O10.A35,t.wingPush,t),t}return __extends(t,i),t.prototype.GN97=function(t,e){void 0===e&&(e=!0),App.VM.open(O7.I1,t,e)},t.prototype.GL97=function(){App.VM.close(O7.I1)},t.prototype.GI23=function(t,e){App.VM.open(O7.F80,t,e)},t.prototype.GG52=function(){App.VM.close(O7.F80)},t.prototype.GP92=function(){App.VM.open(O7.I44)},t.prototype.GN98=function(){App.VM.close(O7.I44)},t.prototype.GL98=function(t){App.VM.open(O7.HH36,t)},t.prototype.GK25=function(){App.VM.close(O7.HH36)},t.prototype.GI24=function(t){App.VM.open(O7.F81,t)},t.prototype.GG53=function(){App.VM.close(O7.F81)},t.prototype.GL99=function(t){App.VM.open(O7.HH37,t)},t.prototype.GK26=function(){App.VM.close(O7.HH37)},t.prototype.GK27=function(){var t=this.gtM(),e=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7],i=t.initWingData.ws[0].k,s={objData:{id:e.id,h:e.h,wi:i,we:e.we,x:0,y:0,dir:Dir.br,objType:P13.A6}};App.VM.open(O7.G69,s)},t.prototype.GN99=function(t){App.VM.open(O7.I8,t)},t.prototype.GM1=function(){App.VM.close(O7.I8)},t.prototype.loadReq=function(){App.CM.gtM(O6.B97).account;return this.wingProxy.loadReq()},t.prototype.loadRes=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.notify(P4.X66)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.wingPush=function(t){if(200==t.head.state){var e=this.gtM();t.body&&e.initData(t.body),e.isShowImgNew(),e.notify(P4.Y23)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR72=function(t){this.wingProxy.upgredeRes(t)},t.prototype.GR73=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.ws[0]=t.body.w,t.body.co&&(e.initWingData.co=t.body.co),e.isShowImgNew(),e.notify(P4.V55)}else{238==t.head.state?App.VM.gOV(O7.I88).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GT78=function(t){this.wingProxy.unlockReq(t)},t.prototype.GT79=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.ws[0]=t.body.w,e.isShowImgNew(),this.GK27(),e.notify(P4.R57)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW77=function(){this.wingProxy.rmaxReq()},t.prototype.GW78=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.ws[0]=t.body.w,t.body.co&&(e.initWingData.co=t.body.co),e.isShowImgNew(),e.notify(P4.T13),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV36=function(t){this.wingProxy.awardReq(t)},t.prototype.GV37=function(t){if(200==t.head.state){t.body.ob&&P5.sIs(t.body.ob);var e=this.gtM();e.initWingData.ho=t.body.h,e.isShowImgNew(),e.notify(P4.T11)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT80=function(t){this.wingProxy.changeReq(t)},t.prototype.GT81=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.ws[0]=t.body.w,e.notify(P4.X68)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GX99=function(t){this.wingProxy.danReq(t)},t.prototype.GY1=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.en=t.body.en,e.isShowImgNew(),e.notify(P4.T15)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GW79=function(){this.wingProxy.wearReq()},t.prototype.GW80=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.ws[0]=t.body.w,App.CM.gtM(O6.B98).ZL13(t.body.es),e.isShowImgNew(),e.notify(P4.U41)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP93=function(t){this.wingProxy.GX33(t)},t.prototype.GP94=function(t){if(200==t.head.state){var e=this.gtM();e.initWingData.ws[0]=t.body.w,e.isShowImgNew(),e.notify(P4.V57)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ35=function(t){App.VM.gOV(O7.HH36).ZQ91(t)},t}(TE11);__reflect(TF2.prototype,"TF2"),function(t){t.typeMaps=[],t.typeEquipMaps=[]}(WingLangs||(WingLangs={}));var THH21=function(i){function t(t){var e=i.call(this,t)||this;return e.initWingData={},e.isHong=0,e.isUseNow=!1,e.isOpenUseYbView=!0,e}return __extends(t,i),t.prototype.ZD48=function(t){t&&(null!=this.pointData?this.pointData.initActData(t):this.pointData=new RevealVo(t))},t.prototype.updateRed=function(){this.isShowImgNew()},t.prototype.FL35=function(){var t=0,e=this.initWingData.ws[0].t;if(L3.advancedLv>e||!this.pointData)return t;var i=L3.FI89(this.pointData.lv);if(i.advancelv<0&&this.pointData.s==L3.starNum)return t;if(this.pointData&&L3.openLv<=O4.getLv())if(this.pointData.s!=L3.starNum){var s=N12.giC(parseInt(N13.init.advancedItem.value))+N12.giC(parseInt(N13.init.timeItem.value)),o=i.starcost.split(":"),r=N12.giC(parseInt(o[0]));t=s>=i.pillcost&&r>=parseInt(o[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var n=i.breakcost.split(":");t=N12.giC(parseInt(n[0]))>=parseInt(n[1])&&i.advancelv<=e?1:0}return t},t.prototype.initData=function(t){this.initWingData=t},t.prototype.isShowImgNew=function(){this.isHong=0;var t=App.CM.gtM(O6.B82),e=t.avatarInfo.l;if(this.initWingData&&this.initWingData.ws&&this.initWingData.ws[0]&&parseInt(N13.init.unlockLevel.value)<=e){var i=this.initWingData.ws[0].t;if((null==this.preLv||i>this.preLv)&&(TF13.FE57(E5.A12),this.preLv=i),this.redNum=this.FL35(),this.redNum)this.isHong=1;else{if(-1!=N13.base[i+""].exp){var s,o=N13.base[i+""].cash<=t.avatarInfo.co;s=N13.base[i+""].elixir;var r=N12.giC(parseInt(N13.init.advancedItem.value))+N12.giC(parseInt(N13.init.timeItem.value))>=s;if(o&&r)return void(this.isHong=1);var n=N12.giC(parseInt(N13.init.elixirItem.value)),a=K18.init.attrUseMax.value;if(n&&this.initWingData.en<a)return void(this.isHong=1);if(N12.giC(parseInt(N13.init.shootUpItem.value)))return void(this.isHong=1);if(N13.expDanData[i+""])if(N12.giC(N13.expDanData[i+""]))return void(this.isHong=1)}for(var h=N13.FHH90(!1),p=0;p<h.length;p++)if(0<N12.giC(h[p].itemid)&&-1==this.initWingData.ws[0].ss.indexOf(h[p].id))return void(this.isHong=1);if(App.CM.gtM(O6.B98).canWingEquip.length)this.isHong=1;else{var l=this.initWingData.ws[0].sk.concat().sort(function(t,e){return t.si-e.si}),c=N13.skillGroup;for(p=0;p<l.length;p++){if(N12.giC(parseInt(N13.init.skillItem.value))>=c[l[p].si+""][l[p].sl-1+""].cost&&-1!=c[l[p].si+""][l[p].sl-1+""].cost)return void(this.isHong=1)}var u=this.initWingData.ho.length,d=this.initWingData.co.length;u==d||0===d||(this.isHong=1)}}}},t.prototype.updateNew=function(){this.isShowImgNew();var t=App.CM.gtM(O6.C2);t.isShowImgNew();var e=App.CM.gtM(O6.C17);e.isShowImgNew();var i=App.CM.gtM(O6.B83);return i.isShowImgNew(),this.isHong||t.isHong||e.isHong||i.isHong},t.prototype.ZC47=function(){var t=0,e=0;return this.initWingData.ho&&(t=this.initWingData.ho.length),this.initWingData.co&&(e=this.initWingData.co.length),t!=e&&0!==e?1:0},t.prototype.haveSkin=function(t){var e=!1;return this.initWingData&&this.initWingData.ws&&this.initWingData.ws[0]&&this.initWingData.ws[0].ss?e=-1!=this.initWingData.ws[0].ss.indexOf(t):e},t.prototype.FJ45=function(){var t=parseInt(N13.init.unlockLevel.value);if(O4.getLv()<t)return 0;var e=this.getSkinPower(),i=this.getDanPower(),s=this.FHH78(),o=this.ZV1(),r=this.FJ47();return Math.round(e+i+s+r+o)},t.prototype.getSkinPower=function(){for(var t=[],e=0,i=this.initWingData,s=0;s<i.ws[0].ss.length;s++)-1!=N13.skin[i.ws[0].ss[s]+""].itemid&&(t.push(i.ws[0].ss[s]),e+=M10.gAG(N13.skin[i.ws[0].ss[s]+""].attr));return e},t.prototype.getDanPower=function(){var t=0,e=this.initWingData,i=N13.init.elixirAttr.value,s=N13.getData(i);for(var o in s)for(var r in s[o]){t+=parseInt(s[o][r])*K18.attribute[r].power*e.en}return t},t.prototype.FHH78=function(){for(var t=0,e=this.initWingData.ws[0].sk,i=0;i<e.length;i++)t+=M10.gAG(N13.skillGroup[e[i].si+""][e[i].sl-1+""].attr);return t},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).wingEquip.sort(function(t,e){return t.i-e.i}),e=0,i=0;i<t.length;i++){var s=M10.FD92(t[i].i+"",t[i].t);e+=M10.gAG(s.attr)+M10.gAG(s.addattr)*s.addlevel}return e},t.prototype.FJ47=function(){var t=this.initWingData,e=t.ws[0].t,i=t.ws[0].exp,s=0;this.count=0,this.getCount(e);for(var o=0;o<this.count;o++){var r=N13.base[e-o+""].baseattr,n=N13.base[e-o+""].addattr,a=e-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){s+=parseInt(p[l][c])*i/N13.init.advancedExp.value*K18.attribute[c].power}else for(var l in p)for(var c in p[l])s+=parseInt(p[l][c])*N13.base[a+""].exp/N13.init.advancedExp.value*K18.attribute[c].power;for(var l in h)for(var c in h[l])s+=parseInt(h[l][c])*K18.attribute[c].power}return s+=s*P7.FA54(E5.A12)},t.prototype.getCount=function(t){N13.base[t+""]&&(this.count+=1,this.getCount(t-1))},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(THH21.prototype,"THH21");var THH22=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y23,e.push,e),e}return __extends(t,i),t.prototype.loadReq=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X65,body:{}};s.rSMO(P4.X66,function(t){s.apF(O10.A31,t),e("加载御翎加载完成")},s),s.sSM(i)})},t.prototype.upgredeRes=function(t){var e={type:P4.V54,body:{t:t}};this.rSMO(P4.V55,this.GX86,this),this.sSM(e)},t.prototype.GX86=function(t){this.apF(O10.A21,t)},t.prototype.rmaxReq=function(){var t={type:P4.T12,body:{}};this.rSMO(P4.T13,this.rmaxRes,this),this.sSM(t)},t.prototype.rmaxRes=function(t){this.apF(O10.A8,t)},t.prototype.unlockReq=function(t){var e={type:P4.R56,body:{skinId:t}};this.rSMO(P4.R57,this.GY69,this),this.sSM(e)},t.prototype.GY69=function(t){this.apF(O10.A3,t)},t.prototype.awardReq=function(t){var e={type:P4.T10,body:{tid:t}};this.rSMO(P4.T11,this.awardRes,this),this.sSM(e)},t.prototype.awardRes=function(t){this.apF(O10.A6,t)},t.prototype.changeReq=function(t){var e={type:P4.X67,body:{skinId:t}};this.rSMO(P4.X68,this.changeRes,this),this.sSM(e)},t.prototype.changeRes=function(t){this.apF(O10.A33,t)},t.prototype.danReq=function(t){var e={type:P4.T14,body:{num:t}};this.rSMO(P4.T15,this.danRes,this),this.sSM(e)},t.prototype.danRes=function(t){this.apF(O10.A9,t)},t.prototype.wearReq=function(){var t={type:P4.U40,body:{}};this.rSMO(P4.U41,this.wearRes,this),this.sSM(t)},t.prototype.wearRes=function(t){this.apF(O10.A15,t)},t.prototype.GX33=function(t){var e={type:P4.V56,body:{sid:t}};this.rSMO(P4.V57,this.GX34,this),this.sSM(e)},t.prototype.GX34=function(t){this.apF(O10.A14,t)},t.prototype.push=function(t){this.apF(O10.A35,t)},t}(TG80);__reflect(THH22.prototype,"THH22");var THH30=function(){function t(){}return t.FK23=function(t){var e="0";switch(t){case O10.A37:e=M13.init.shootUpItem.value;break;case O10.A38:e=N16.init.shootUpItem.value;break;case O10.A36:e=L2.init.shootUpItem.value;break;case O10.A39:e=N13.init.shootUpItem.value;break;case J12.A2:e=M11.init.fmUpItem.value;break;case J12.A1:e=M11.init.gnUpItem.value;break;case J12.A3:e=N14.init.prestigeUpPill.value;break;case J12.A8:e=N14.init.soulUpPill.value;break;case L12.A74:e=K19.init.animalUpItem.value;break;case L12.A73:e=K19.init.psychicUpItem.value;break;case L12.A75:e=K19.init.spiritUpItem.value;break;case L12.A76:e=K19.init.soulUpItem.value}return Number(e)},t.FL17=function(t){var e=0;switch(t){case O10.A37:e=E5.A11;break;case O10.A38:e=E5.A13;break;case O10.A36:e=E5.A9;break;case O10.A39:e=E5.A12;break;case J12.A2:e=E5.A5;break;case J12.A1:e=E5.A3;break;case J12.A3:e=E5.A6;break;case J12.A8:e=E5.A7;break;case L12.A74:e=E5.A10;break;case L12.A73:e=E5.A1;break;case L12.A75:e=E5.A2;break;case L12.A76:e=E5.A4}return e},t.FL98=function(t){"number"!=typeof t&&(t=parseInt(t));var e,i=0;switch(t){case M19.A96:i=O4.getLv();break;case M19.A91:i=(e=App.CM.gtM(O6.C2)).initHorseData.h?e.initHorseData.h.lv:i;break;case M19.A94:i=(e=App.CM.gtM(O6.C17)).initFaqiData.faqi?e.initFaqiData.faqi.lv:i;break;case M19.A88:i=(e=App.CM.gtM(O6.B83)).initWeaponData.w?e.initWeaponData.w.lv:i;break;case M19.A93:i=(e=App.CM.gtM(O6.C18)).initWingData.ws[0]?e.initWingData.ws[0].t:i;break;case M19.A83:i=(e=App.CM.gtM(O6.C3)).fm?e.fm.t:i;break;case M19.A85:i=(e=App.CM.gtM(O6.C3)).gn?e.gn.t:i;break;case M19.A84:i=(e=App.CM.gtM(O6.C12)).prestigeLv?e.prestigeLv:i,i=(e=App.CM.gtM(O6.C12)).prestigeLv?e.prestigeLv:i;break;case M19.A95:i=(e=App.CM.gtM(O6.C12)).soulLv?e.soulLv:i;break;case M19.A89:i=(e=App.CM.gtM(O6.B91)).ao?e.ao.lv:i;break;case M19.A86:i=(e=App.CM.gtM(O6.B91)).apo?e.apo.lv:i;break;case M19.A90:i=(e=App.CM.gtM(O6.B91)).aspo?e.aspo.lv:i;break;case M19.A92:i=(e=App.CM.gtM(O6.B91)).aso?e.aso.lv:i;break;case M19.A87:i=(e=App.CM.gtM(O6.B80)).lv?e.lv:i}return i},t}();__reflect(THH30.prototype,"THH30");var WingView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.haveNum=0,i.timerArray=[],i.skinPower=0,i.danPower=0,i.raiPower=0,i.skillPower=0,i.equipPower=0,i.isNewSkin=!1,i.canAdd=!0,i.isAutoSelfRai=!1,i.skinName=WingViewSkin,i.sGN("release_wing"),i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skillData.dataProvider=this.skillCollection=new eui.ArrayCollection,this.skillData.itemRenderer=WingSkillDataItem,this.equipData.dataProvider=this.equipCollection=new eui.ArrayCollection,this.equipData.itemRenderer=AttrEquipDataItem,this.btnChange.label=O3.tr(4738),this.btnEquip.label=O3.tr(4739),this.btnRaising.label=O3.tr(4740),this.btnSelfRai.label=O3.tr(4741),this.btnStop.label=O3.tr(4726),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4727)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4728)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4729)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4730)),this.cbAutoSmelt.label=O3.tr(4731)},t.prototype.open=function(){var t=App.CM.gtM(O6.B82);this.avatarModel=t.avatarInfo.us[J11.A7],this.getData(),this.updateMain(),this.ZN26(),this.initPBarPro(),this.useExpDan(),this.ZN25(),this.btnSkin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this)},t.prototype.close=function(){this.btnSkin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSkinView,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDanView,this),this.btnExpDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useExpDan,this),this.btnAward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV5,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPhase,this),this.btnRaising.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.raising,this),this.btnSelfRai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.autoRaising,this),this.btnAddOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addOne,this),this.btnStop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAuto,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.aKeyPull,this),this.cbAutoSmelt.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this.closeHandler(),this.stopAuto(),this.skillCollection.removeAll(),this.equipCollection.removeAll(),this.num=null,this.initId=null,this.haveNum=null,this.skinPower=null,this.danPower=null,this.raiPower=null,this.skillPower=null,this.equipPower=null,this.count=null,this.avatarModel=null,this.nowModel=null,this.hisLe=null,this.nowModel=null,this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.arr=null,egret.Tween.removeTweens(this.pBarPro.imgShort),egret.Tween.removeTweens(this.pBarPro),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.GI10=function(){TG76.FI91(E5.A12),App.CM.apF(O6.B95,M4.A4,this.arr)},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.raising=function(){this.ZQ92(!1,!1)},t.prototype.autoRaising=function(){this.autoUpgrade(!1)},t.prototype.openDanHint=function(){this.btnAddOne.imgNew.visible&&this.addOne()},t.prototype.closeHandler=function(){for(var t=0;t<this.timerArray.length;t++)App.K16.rBH(this.timerArray[t]),this.timerArray[t]=null;this.timerArray=[]},t.prototype.aKeyPull=function(){this.apF(O10.A32)},t.prototype.canChange=function(){this.apF(O10.A26,N13.base[this.num+""].skinid)},t.prototype.addOne=function(){this.apF(O10.A5)},t.prototype.useExpDan=function(){this.btnExpDan.visible&&this.apF(O10.A5,O10.A39,!0)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C18);this.btnReveal.imgNew.visible=!!t.redNum},t.prototype.getData=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.C18).initWingData;t&&!this.isAutoSelfRai&&(this.num=t.ws[0].t,this.ZK15())},t.prototype.dressUpdate=function(){App.CM.gtM(O6.B98);var t=App.CM.gtM(O6.C18).initWingData;t&&(this.num=t.ws[0].t,this.ZK15())},t.prototype.sureStop=function(){this.btnStop.visible&&this.stopAuto()},t.prototype.openSkinView=function(){this.sureStop(),this.apF(O10.A16)},t.prototype.openDanView=function(){this.sureStop(),this.apF(O10.A28)},t.prototype.ZV5=function(){this.sureStop(),App.CM.apF(O6.C12,O8.A93,O8.B4.WING)},t.prototype.openAddView=function(){this.apF(O10.A4,{power:this.scoreLb.text,index:1})},t.prototype.showPhase=function(t){var e,i=App.CM.gtM(O6.C18).initWingData;switch(t.target.name){case"-":0<this.num&&(this.num-=1,this.btnRight.enabled=!0,P16.sGF(this.btnRight,!1)),this.btnRight.imgEnd.visible=this.num>=i.ws[0].t,e=1==this.num,P16.sGF(this.btnLeft,e),this.btnLeft.enabled=!e;break;case"+":e=this.num<=i.ws[0].t&&N13.base[this.num+1+""],this.num!=i.ws[0].t&&N13.base[this.num+1+""]||(this.btnRight.enabled=!1,P16.sGF(this.btnRight,!0)),e&&(this.num+=1,P16.sGF(this.btnLeft,!1),this.btnLeft.enabled=!0),this.btnRight.imgEnd.visible=this.num>=i.ws[0].t}this.realTime()},t.prototype.updateChange=function(t){if(!(this.num>t.ws[0].t)){var e=N13.base[this.num+""].skinid-t.ws[0].k;e<0||0<e?(this.btnChange.visible=!this.btnEquip.visible,this.grpHave.visible=this.grpAddPower.visible=!1):0==e&&(this.btnChange.visible=this.grpAddPower.visible=!1,this.btnEquip.visible||(this.grpHave.visible=!0))}},t.prototype.realTime=function(){var t=App.CM.gtM(O6.C18).initWingData;this.lbName.text=N13.skin[N13.base[this.num+""].skinid+""].name,this.nowModel||(this.nowModel=new TF39),this.nowModel.id=this.avatarModel.id,this.nowModel.h=this.avatarModel.h,this.nowModel.we=this.avatarModel.we,this.nowModel.wi=N13.base[this.num+""].skinid,this.nowModel.bt=BehaviourType.Stand_d;var e={x:0,y:0,dir:Dir.br,objType:P13.A6};if(this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(e),this.objBoss.setData(this.nowModel,this.gpBoss),this.lbClass.text=O3.tr(1332,N13.base[this.num+""].level),this.updateChange(t),this.num==t.ws[0].t+1){this.btnChange.visible=this.grpHave.visible=!1,this.btnEquip.visible||(this.grpAddPower.visible=!0);var i=N13.base[this.num+""].baseattr,s=N13.base[this.num-1+""].addattr;this.lbPower.text=Math.floor(M10.gAG(i)+M10.gAG(s)*N13.base[this.num-1+""].exp/N13.init.advancedExp.value)+""}},t.prototype.updatePower=function(){this.getSkinPower(),this.getDanPower(),this.FJ47(),this.FHH78(),this.ZV1(),this.scoreLb.text=this.getPower()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),this.ZN25(),t instanceof THH21)switch(e){case P4.V55:this.canAdd=!0,this.littleAddExp(t),this.ZN26();break;case P4.T13:this.addExp(),this.ZN26();break;case P4.X68:case P4.R57:this.ZN26(),this.updateChange(t.initWingData);break;case P4.Y23:this.getData(),this.initPBarPro();break;case P4.V57:case P4.T15:case P4.T11:this.getData();break;case P4.U41:this.dressUpdate()}t instanceof THH9&&this.getData(),t instanceof TF73&&this.ZN26()},t.prototype.ZN26=function(){this.btnExpDan.visible=!1;var t=TG7.FA82(J12.A7,parseInt(N13.init.shootUpItem.value));this.btnAddOne.$setVisible(t);var e=App.CM.gtM(O6.C18).initWingData.ws[0].t;N13.expDanData[e+""]&&-1!==N13.base[e+""].exp&&(N12.giC(N13.expDanData[e+""])&&(this.btnExpDan.visible=this.btnExpDan.imgNew.visible=!0,this.btnAddOne.$setVisible(!1)))},t.prototype.littleAddExp=function(t){this.enabledBtn(!1);var e=this.pBarPro.value,i=0,s=1;e+(i=t.initWingData.ws[0].exp>=e?t.initWingData.ws[0].exp-e:this.pBarPro.maximum-e+t.initWingData.ws[0].exp)>this.pBarPro.maximum&&(s+=1),this.updataExp(e,i,s)},t.prototype.enabledBtn=function(t){this.btnRaising.enabled=this.btnAddOne.enabled=this.btnSelfRai.enabled=t},t.prototype.addExp=function(){var t=App.CM.gtM(O6.C18),e=t.initWingData.ws[0].t,i=t.initWingData.ws[0].le,s=N13.base[e+""].level,o=this.pBarPro.value,r=0,n=1;o+(r=t.isUseNow?this.hisLe<i?i-this.hisLe:this.pBarPro.maximum-o+i:s<=6&&0==t.initWingData.ws[0].exp?this.pBarPro.maximum-o:parseInt(N13.init.shootUpExp.value))>this.pBarPro.maximum&&(n+=1),this.updataExp(o,r,n)},t.prototype.ZK15=function(){var t;t=1==this.num,P16.sGF(this.btnLeft,t),P16.sGF(this.btnRight,!1);var e=App.CM.gtM(O6.C18),i=e.initWingData;this.updatePower(),this.btnLeft.enabled=!t,this.btnRight.enabled=!0,i.co&&i.co.length&&(this.btnAward.imgNew.visible=i.co.length!=i.ho.length),-1!=N13.base[this.num+""].exp&&(this.pBarPro.maximum=N13.base[this.num+""].exp,this.pBarPro.value=i.ws[0].exp),this.summit();var s=N12.giC(parseInt(N13.init.elixirItem.value)),o=!1;K18.init.attrUseMax.value>e.initWingData.en&&(o=!!s),this.btnDan.imgNew.visible=o;var r=[],n=i.ws[0].sk.length;r=i.ws[0].sk.concat().sort(function(t,e){return t.si-e.si});var a,h=1;if(n)for(l=r.length;l<4;l++){a=i.ws[0].sk[n-1].si+h,h+=1;c=this.ZV2(l+1);r.push({si:a,sl:0,count:c})}else{for(var p in N13.skillGroup){a=parseInt(p);break}for(var l=1;l<=4;l++){var c=this.ZV2(l);r.push({si:a,sl:0,count:c}),a+=1}}this.skillCollection.replaceAll(r),this.btnEquip.visible=!1,this.btnSkin.imgNew.visible=!1;var u=N13.FHH90(!1);for(l=0;l<u.length;l++)if(0<N12.giC(u[l].itemid)&&-1==i.ws[0].ss.indexOf(u[l].id)){this.btnSkin.imgNew.visible=!0;break}for(var d=[{},{},{},{}],v=App.CM.gtM(O6.B98),f=v.wingEquip.sort(function(t,e){return t.i-e.i}),g=1;g<=d.length;g++){for(var m=0;m<f.length;m++){if(g==M10.FD92(f[m].i+"",f[m].t).pos){d[g-1]={i:f[m].i,ok:!0,isNew:!1,t:f[m].t};break}}if("{}"==JSON.stringify(d[g-1]))for(var p in M10.wing)if(M10.wing[p].pos==g){d[g-1]={i:M10.wing[p].id,ok:!1,isNew:!1,t:M10.wing[p].equiptype};break}}var y=v.canWingEquip;for(m=1;m<=d.length;m++)0<=y.indexOf(m.toString())&&(d[m-1].isNew=this.btnEquip.visible=this.btnEquip.imgNew.visible=!0,this.grpHave.visible=this.btnChange.visible=!1);this.realTime(),this.equipCollection.replaceAll(d)},t.prototype.getPower=function(){var t=this.skinPower+this.danPower+this.raiPower+this.skillPower+this.equipPower;return Math.round(t)+""},t.prototype.initPBarPro=function(){this.pBarPro.slideDuration=0;var t=App.CM.gtM(O6.C18).initWingData.ws[0].le;this.hisLe=t,this.lbShort.visible=!!t,this.pBarPro.imgShort.width=t?this.pBarPro.width*(t/this.pBarPro.maximum):0,this.pBarPro.imgShort.x=this.pBarPro.width*(this.pBarPro.value/this.pBarPro.maximum)-this.pBarPro.imgShort.width},t.prototype.ZV2=function(t){var e;for(var i in N13.base){if((N13.base[i].skillid?N13.base[i].skillid.split(","):"").length==t){e=N13.base[i].level;break}}return e},t.prototype.updateMain=function(){N13.type;this.skillName.text=O3.tr(1312);var t=N12.gID(N13.init.advancedItem.value);this.imgDan.setData(t);var e=N12.gID(N13.init.advancedCash.value);this.imgGlod.setData(e)},t.prototype.canExpend=function(){var t=this,e=App.CM.gtM(O6.C18);if(e.isOpenUseYbView)if(this.btnRaising.filters){var i=function(){t.autoUpgrade(!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else{i=function(){t.ZQ92(!1,!0),e.isOpenUseYbView=!1};App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,i,void 0,this.stopAuto,void 0)}else this.autoUpgrade(!0)},t.prototype.ZQ92=function(t,e){if(!this.canAdd)return!1;if(this.isNewSkin)return this.stopAuto(),!1;var i=App.CM.gtM(O6.B82),s=App.CM.gtM(O6.C18),o=s.initWingData,r=N12.giC(parseInt(N13.init.timeItem.value)),n=N12.giC(parseInt(N13.init.advancedItem.value))+r,a=1,h=N13.base[o.ws[0].t].elixir-n;if(0<h&&!this.cbAutoSmelt.selected)return App.VM.open(O7.G87,N13.init.advancedItem.value,h),t&&this.stopAuto(),!1;if(N13.base[o.ws[0].t].cash>i.avatarInfo.co)return App.VM.open(O7.F12),t&&this.stopAuto(),!1;if(this.cbAutoSmelt.selected&&N13.base[o.ws[0].t].cash<=i.avatarInfo.co&&0<h){var p=parseInt(N13.init.advancedItem.value),l=N15.FA50(p),c=N15.FB92(p),u=N13.base[o.ws[0].t+""].elixir;if(i.avatarInfo.bg>=l)a=2;else{if(!e&&s.isOpenUseYbView)return this.canExpend(),this.closeHandler(),!1;if(!(i.avatarInfo.g>=c*(n?u-n:u)))return P7.FA78(),this.stopAuto(),!1;a=3}}return this.apF(O10.A20,a),t&&(this.canAdd=!1),s.isUseNow=0<r,!0},t.prototype.autoUpgrade=function(t){var e=this;this.isAutoSelfRai=!0,this.btnStop.visible=!0,this.btnSelfRai.visible=!1,this.isNewSkin=!1,this.canAdd=!0,this.btnRaising.imgNew.visible=!1,this.btnRaising.filters||P16.sGF(this.btnRaising,!0),this.enabledBtn(!1);var i,s=this;if(t||(i=this.ZQ92(!0,!1)),t||i){var o=App.K16.doTimer(300,0,function(){s.ZQ92(!0,t)},s,function(){e.stopAuto()});this.timerArray.push(o)}},t.prototype.stopAuto=function(){this.btnSelfRai.visible=!0,this.btnStop.visible=!1,this.canAdd=!0,this.isAutoSelfRai=!1,this.isNewSkin=!1,this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible,P16.sGF(this.btnRaising,!1),this.closeHandler(),this.enabledBtn(!0)},t.prototype.clearSkin=function(){this.apF(O10.A12)},t.prototype.summit=function(){var t=App.CM.gtM(O6.C18).initWingData;if(-1==N13.base[t.ws[0].t+""].exp)return this.pBarPro.labelFunction=function(t,e){return O3.tr(1463)},this.grpExpend.visible=this.lbShort.visible=!1,this.pBarPro.imgShort.width=0,this.pBarPro.maximum=this.pBarPro.value=100,P16.sGF(this.btnRaising,!0),P16.sGF(this.btnSelfRai,!0),this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=this.btnRaising.enabled=this.btnSelfRai.enabled=!1,!1;this.pBarPro.labelFunction=null,this.lbPay.text=N13.base[this.num+""].cash+"",this.haveNum=N12.giC(parseInt(N13.init.advancedItem.value))+N12.giC(parseInt(N13.init.timeItem.value));var e;e=N13.base[this.num+""].elixir,this.haveNum>=e?this.lbAmount.textColor=2987793:this.lbAmount.textColor=15669836;var i=App.CM.gtM(O6.B82);return N13.base[this.num+""].cash<=i.avatarInfo.co?this.lbPay.textColor=2987793:this.lbPay.textColor=15669836,this.lbAmount.text=this.haveNum+"/"+e,this.haveNum>=e&&N13.base[this.num+""].cash<=i.avatarInfo.co?(this.btnRaising.filters||(this.btnRaising.imgNew.visible=!0),this.btnSelfRai.imgNew.visible=!0):this.btnRaising.imgNew.visible=this.btnSelfRai.imgNew.visible=!1,this.btnAddOne.imgNew.visible=0<N12.giC(parseInt(N13.init.shootUpItem.value)),!0},t.prototype.updataExp=function(t,e,i){var h=this,p=App.CM.gtM(O6.C18),l=p.initWingData.ws[0].le;if(!this.summit())return this.getData(),this.clearSkin(),void this.enabledBtn(!1);var c=this,u=function(t,e,i){var s,o=0,r=c.num;s=200,(s=((o=e+i>=c.pBarPro.maximum?(i-=c.pBarPro.maximum-e,c.pBarPro.maximum):i+e)-c.pBarPro.value)/c.pBarPro.maximum*1e3)<200&&(s=200);var n=c.pBarPro.width*(l/c.pBarPro.maximum),a=c.pBarPro.width*((o-l)/c.pBarPro.maximum);p.isUseNow?(c.hisLe>l&&(n=c.pBarPro.width-c.pBarPro.imgShort.x),c.hisLe=l,egret.Tween.get(c.pBarPro.imgShort).to({width:n},s)):(c.hisLe>l&&(a=c.pBarPro.width-c.pBarPro.imgShort.width),egret.Tween.get(c.pBarPro.imgShort).to({x:a},s),c.hisLe=l),o==c.pBarPro.maximum&&(h.isNewSkin=!0),egret.Tween.get(c.pBarPro).to({value:o},s).wait(20).call(function(){(egret.Tween.removeTweens(c.pBarPro),c.lbAddExp.text="+"+N13.init.advancedExp.value,c.lbShort.visible=!!l,c.pBarPro.value==c.pBarPro.maximum)&&(e=0,r+=1,c.pBarPro.maximum=N13.base[r+""].exp,egret.Tween.removeTweens(c.pBarPro.imgShort),c.pBarPro.value=c.pBarPro.slideDuration=c.pBarPro.imgShort.width=c.pBarPro.imgShort.x=0,0<t-1&&u(--t,e,i),App.CM.gtM(O6.B98).ZW35(),c.clearSkin(),c.stopAuto(),c.getData());egret.Tween.get(c.lbAddExp).to({visible:!0}).to({y:c.lbAddExp.y-15},150).call(function(){egret.Tween.removeTweens(c.lbAddExp),c.lbAddExp.y=60,c.lbAddExp.visible=!1,c.updatePower()}),c.enabledBtn(!0)})};u(i,t,e)},t.prototype.getSkinPower=function(){var t=[];this.skinPower=0;for(var e=App.CM.gtM(O6.C18).initWingData,i=0;i<e.ws[0].ss.length;i++)-1!=N13.skin[e.ws[0].ss[i]+""].itemid&&(t.push(e.ws[0].ss[i]),this.skinPower+=M10.gAG(N13.skin[e.ws[0].ss[i]+""].attr))},t.prototype.getDanPower=function(){this.danPower=0;var t=App.CM.gtM(O6.C18).initWingData,e=N13.init.elixirAttr.value,i=N13.getData(e);for(var s in i)for(var o in i[s]){var r=parseInt(i[s][o])*K18.attribute[o].power*t.en;this.danPower+=r}},t.prototype.FHH78=function(){this.skillPower=0;for(var t=App.CM.gtM(O6.C18).initWingData.ws[0].sk,e=0;e<t.length;e++)this.skillPower+=M10.gAG(N13.skillGroup[t[e].si+""][t[e].sl-1+""].attr)},t.prototype.ZV1=function(){for(var t=App.CM.gtM(O6.B98).wingEquip.sort(function(t,e){return t.i-e.i}),e=this.equipPower=0;e<t.length;e++){var i=M10.FD92(t[e].i+"",t[e].t),s=M10.gAG(i.attr)+M10.gAG(i.addattr)*i.addlevel;this.equipPower+=s}},t.prototype.FJ47=function(){var t=App.CM.gtM(O6.C18).initWingData,e=t.ws[0].t,i=t.ws[0].exp;this.raiPower=0,this.count=0,this.arr={101:0,102:0,103:0},this.getCount(e);for(var s=0;s<this.count;s++){var o=N13.base[e-s+""].baseattr,r=N13.base[e-s+""].addattr,n=e-s,a=N13.getData(o),h=N13.getData(r);if(0==s)for(var p in h)for(var l in h[p]){var c=parseInt(h[p][l])*i/N13.init.advancedExp.value*K18.attribute[l].power;this.raiPower+=c;var u=parseInt(h[p][l])*i/N13.init.advancedExp.value;0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=u)}else for(var p in h)for(var l in h[p]){this.raiPower+=parseInt(h[p][l])*N13.base[n+""].exp/N13.init.advancedExp.value*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(h[p][l])*N13.base[n+""].exp/N13.init.advancedExp.value)}for(var p in a)for(var l in a[p]){var d;this.raiPower+=parseInt(a[p][l])*K18.attribute[l].power,0<=(d=L3.strs.indexOf(K18.attribute[l].name))&&(this.arr["10"+(d+1)]+=parseInt(a[p][l]))}}var v=P7.FA54(E5.A12);for(var l in this.arr)this.arr[l]+=Math.floor(this.arr[l]*v);this.raiPower+=this.raiPower*v},t.prototype.getCount=function(t){N13.base[t+""]&&(this.count+=1,this.getCount(t-1))},t}(BaseEuiView);__reflect(WingView.prototype,"WingView");var AttrEquipDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN40,this),App.THH32.rEf(this,"lg_qhyh_01")},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZN40=function(){if(TG40.playClickEffect(),this.data.ok){var t=M10.FD92(this.data.i.toString(),this.data.t);App.CM.apF(O6.B98,M19.A17,t)}else P18.sDP(O3.tr(5549))},t.prototype.dataChanged=function(){var t=this.data.i.toString();this.packAvaeqipData=M10.FD92(t,this.data.t),this.lbName.visible=!1,this.imgHead.source=this.packAvaeqipData.icon,this.data.ok?(this.grpNot.visible=!1,P16.sGF(this.imgHead,!1),this.imgQuality.source=N12.getBox(this.packAvaeqipData.quality),this.lbMove.visible=!0,this.packAvaeqipData.addlevel?this.lbMove.text=O3.tr(1149,this.packAvaeqipData.level,this.packAvaeqipData.addlevel):this.lbMove.text=O3.tr(1148,this.packAvaeqipData.level)):(this.grpNot.visible=!0,this.lbCount.visible=!1,this.lbMove.visible=!1,P16.sGF(this.imgHead,!0)),this.data.t==M19.A89?O4.getLv()>=K19.init.animalLv.value&&(this.imgNew.visible&&!this.data.isNew&&App.THH32.aUE(this,"lg_qhyh_01",55,40,1),this.imgNew.visible=this.data.isNew):(this.imgNew.visible&&!this.data.isNew&&App.THH32.aUE(this,"lg_qhyh_01",55,40,1),this.imgNew.visible=this.data.isNew)},t}(eui.ItemRenderer);__reflect(AttrEquipDataItem.prototype,"AttrEquipDataItem");var EverAddListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=EverAddListSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.lbText0.textFlow=M18.HTP.parse(O3.tr(4790)),this.lbText1.textFlow=M18.HTP.parse(O3.tr(4791)),this.lbText2.textFlow=M18.HTP.parse(O3.tr(4792))},t.prototype.dataChanged=function(){},t}(eui.ItemRenderer);__reflect(EverAddListItem.prototype,"EverAddListItem");var WingSkillDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV3,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZV3=function(){App.CM.apF(O6.C18,O10.A17,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){App.CM.gtM(O6.C18);this.imgHead.source=N13.init["skillIcon"+(this.itemIndex+1)].value;var t=N13.skillGroup[this.data.si+""][this.data.sl-1],e=N13.skillGroup[this.data.si+""].length,i=N12.giC(parseInt(N13.init.skillItem.value))+"";this.data.sl?(this.grpCount.visible=!0,this.lbNum.text=this.data.sl+"",this.lbNum.textColor=16777215,this.grpNot.visible=!1,this.imgNew.visible=t.cost<=i&&e>t.level):(this.grpNot.visible=!0,this.grpCount.visible=!1,this.lbCount.text=O3.tr(1320,this.data.count))},t}(eui.ItemRenderer);__reflect(WingSkillDataItem.prototype,"WingSkillDataItem");var WingSkinDataItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this),App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZV4,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.ZV4=function(){App.CM.apF(O6.C18,O10.A22,this.itemIndex),TG40.playClickEffect()},t.prototype.dataChanged=function(){var t=App.CM.gtM(O6.C18).initWingData.ws[0];if(0<=t.ss.indexOf(this.data.id))this.imgGet.visible=!0,this.imgNew.visible=!1,this.lbName.textColor=11481344;else{this.imgGet.visible=!1,this.lbName.textColor=11301691;var e=N12.giC(this.data.itemid);this.imgNew.visible=0<e}this.grpHave.visible=t.k==this.data.id,this.imgOn.visible=this.data.isShow,this.lbName.text=this.data.name,this.data.isShow?P7.FM14()?App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",157,43):App.THH32.aUE(this,"wdsg_pf_paizi_tx_001",53.5,157):App.THH32.rEf(this,"wdsg_pf_paizi_tx_001")},t}(eui.ItemRenderer);__reflect(WingSkinDataItem.prototype,"WingSkinDataItem");var WingDan=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingDanSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4732)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4733)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4734)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4735)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4736)),this.btnUse.label=O3.tr(4737)},t.prototype.open=function(){this.dlg.ZM69(this.closeSelf,this),this.btnBigMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.updateUI()},t.prototype.close=function(){this.btnBigMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnMinus.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnBigAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeUse,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startUse,this),this.num=null},t.prototype.closeSelf=function(){App.CM.apF(O6.C18,O10.A23)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.C18).initWingData,e=N12.gID(N13.init.elixirItem.value);this.num=N12.giC(parseInt(N13.init.elixirItem.value)),this.lbOwn.text=O3.tr(1321,this.num);N12.base[N13.init.elixirItem.value].batchusenum;var i=K18.init.attrUseMax.value;if(t.en>=i)this.lbCount.text="0";else{var s=i-t.en;this.lbCount.text=String(this.num>s?s:this.num)}this.dlg.title=e.name,this.imgQuality.source=N12.getBox(e.quality),O5.FB13(this.lbName,e.name,e.quality),this.imgHead.source=N12.FJ86(e.id),this.lbNum.text=t.en+"";var o=N13.init.elixirAttr.value,r=N13.getData(o);for(var n in r)for(var a in r[n]){var h=parseInt(r[n][a])*t.en;this["lbAttr"+n].text=K18.attribute[a].name+"：",this["lbCount"+n].text=h}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH21)switch(e){case P4.T15:this.updateUI()}},t.prototype.changeUse=function(t){var e=parseInt(this.lbCount.text),i=N13.init.elixirItem.value,s=(N12.base[i].batchUse,App.CM.gtM(O6.C18)),o=K18.init.attrUseMax.value,r=s.initWingData.en,n=o-r,a=n<=this.num?n:this.num;if(!(o<=r))switch(t.target.name){case"-":0<e-1&&(this.lbCount.text=(e-1).toString());break;case"+":e+1<=a&&(this.lbCount.text=(e+1).toString());break;case"--":var h=parseInt(this.btnBigMinus.label);this.lbCount.text=0<e+h?(e+h).toString():(0<a?1:0)+"";break;case"++":var p=parseInt(this.btnBigAdd.label);this.lbCount.text=e+p<=a?(e+p).toString():a+""}},t.prototype.startUse=function(){var t=App.CM.gtM(O6.C18);K18.init.attrUseMax.value<=t.initWingData.en?P18.sDP(O3.tr(1319)):0!=parseInt(this.lbCount.text)?this.apF(O10.A34,parseInt(this.lbCount.text)):P18.sDP(O3.tr(1318))},t.prototype.ZQ49=function(){var t=N12.gID(N13.init.elixirItem.value);this.aCF(O6.C11,O14.A15,t,this.num)},t}(BaseEuiView);__reflect(WingDan.prototype,"WingDan");var WingDanHint=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.danNum=0,i.skinName="ZhiShengSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(4686))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnSure.label=O3.tr(1313),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureUseDan,this),this.type=t[0]||N13.type;var i=THH30.FL17(this.type),s=P7.FB44(i),o=O3.tr(3364,s.name,s.lv);if(this.tipsLb.textFlow=M18.HTP.parse(o),null==this.timerHandler){var r=new Date;r.setHours(23,59,59,999);var n=r.getTime()/1e3-P6.getTime(!0);if(0<n){this.leftCD=n;var a=O3.tr(3253,P6.FJ11(1e3*this.leftCD,5));this.limitLb.textFlow=M18.HTP.parse(a),this.timerHandler=App.K16.doTimer(1e3,this.leftCD,this.GY14,this)}else this.limitLb.text=""}var h=THH30.FK23(this.type),p={data:N12.gID(h)},l={itemData:p,isBottom:!1},c=new ItemIcon;c.iconData=l,this.itemGrp.removeChildren(),this.itemGrp.addChild(c),O5.FB13(this.itemLb,p.data.name,p.data.quality),this.ZHH39(),t[1]?(this.boo=!0,this.lbContent.text=O3.tr(1314),this.tipsLb.visible=!1,this.itemGrp.visible=!1,this.itemLb.visible=!1,this.limitLb.visible=!1):(this.boo=!1,this.tipsLb.visible=!0,this.itemGrp.visible=!0,this.itemLb.visible=!0,this.limitLb.visible=!0,0<this.danNum?this.btnSure.label=O3.tr(1313):this.btnSure.label=O3.tr(3368))},t.prototype.ZHH39=function(){switch(this.danNum=0,this.type){case O10.A37:this.lbContent.text=M13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(M13.init.shootUpItem.value));break;case O10.A38:this.lbContent.text=N16.init.shootUpTips.value,this.danNum=N12.giC(parseInt(N16.init.shootUpItem.value));break;case O10.A36:this.lbContent.text=L2.init.shootUpTips.value,this.danNum=N12.giC(parseInt(L2.init.shootUpItem.value));break;case O10.A39:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(N13.init.shootUpItem.value));break;case J12.A2:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(M11.init.fmUpItem.value));break;case J12.A1:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(M11.init.gnUpItem.value));break;case J12.A3:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(N14.init.prestigeUpPill.value));break;case J12.A8:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(N14.init.soulUpPill.value));break;case L12.A74:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(K19.init.animalUpItem.value));break;case L12.A73:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(K19.init.psychicUpItem.value));break;case L12.A75:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(K19.init.spiritUpItem.value));break;case L12.A76:this.lbContent.text=N13.init.shootUpTips.value,this.danNum=N12.giC(parseInt(K19.init.soulUpItem.value))}},t.prototype.GY14=function(){this.leftCD--;var t=O3.tr(3253,P6.FJ11(1e3*this.leftCD,5));this.limitLb.textFlow=M18.HTP.parse(t),this.leftCD<=0&&(this.cTH(),this.limitLb.text="")},t.prototype.cTH=function(){null!=this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null)},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnSure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sureUseDan,this),this.type=null,this.boo=null,this.cTH()},t.prototype.sureUseDan=function(){var t=App.CM.gtM(O6.B67);if(0!=this.danNum||this.boo)this.useDan();else{if(!t.openState)return void this.closeSelf();this.aCF(O6.B67,K8.A4)}this.closeSelf()},t.prototype.useDan=function(){var t,e=App.CM.gtM(O6.B91);switch(this.type){case O10.A37:this.aCF(O6.C2,N7.A22),App.CM.gtM(O6.C2).isUseNow=this.boo;break;case O10.A38:App.CM.gtM(O6.C17).isUseNow=this.boo,this.aCF(O6.C17,O15.A23);break;case O10.A36:this.aCF(O6.B83,L18.A21),App.CM.gtM(O6.B83).isUseNow=this.boo;break;case O10.A39:this.aCF(O6.C18,O10.A7),App.CM.gtM(O6.C18).isUseNow=this.boo;break;case J12.A2:if(t=M11.FF54(),App.CM.gtM(O6.C3).fm.t>=t.level)return void P18.sDP(O3.tr(5687));this.aCF(O6.C3,N2.A29);break;case J12.A1:if(t=M11.FHH73(),App.CM.gtM(O6.C3).gn.t>=t.level)return void P18.sDP(O3.tr(5687));this.aCF(O6.C3,N2.A23);break;case J12.A3:App.CM.gtM(O6.C12).pIsUsingTempPill=!0,this.aCF(O6.C12,O8.A5);break;case J12.A8:App.CM.gtM(O6.C12).sIsUsingTempPill=!0,this.aCF(O6.C12,O8.A28);break;case L12.A74:e.isUseNow1=this.boo,this.aCF(O6.B91,L12.A51);break;case L12.A73:e.isUseNow2=this.boo,this.aCF(O6.B91,L12.A5);break;case L12.A75:e.isUseNow3=this.boo,this.aCF(O6.B91,L12.A15);break;case L12.A76:e.isUseNow4=this.boo,this.aCF(O6.B91,L12.A33)}},t.prototype.closeSelf=function(){this.apF(O10.A2)},t}(BaseEuiView);__reflect(WingDanHint.prototype,"WingDanHint");var WingDerma=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.index=null,i.pageSize=6,i.itemWidth=95,i.skinName=WingDermaSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.skinData.dataProvider=this.skinCollection=new eui.ArrayCollection,this.skinData.itemRenderer=WingSkinDataItem,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4970)),this.btnActivate.label=O3.tr(6407),this.btnChange.label=O3.tr(4987),P7.FM14()&&(this.itemWidth=186.75,this.pageSize=3)},t.prototype.open=function(t){t&&(this.argId=t);var e=App.CM.gtM(O6.B82);this.avatarModel=e.avatarInfo.us[J11.A7],this.scrRoll.addEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.updateUI(),t&&this.ZW55()},t.prototype.close=function(){this.scrRoll.removeEventListener(eui.UIEvent.CHANGE_END,this.ZQ72,this),this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attriCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openAddView,this),this.grpDetail.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZQ49,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNextData,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.canChange,this),this.btnActivate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.activate,this),this.grpShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goShopPing,this),this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null,this.skinCollection.removeAll(),this.classData=null,this.init=null,this.base=null,this.index=null,this.num=null,this.skins=null,this.regularData=null,this.argId=null,this.avatarModel=null,this.nowModel=null},t.prototype.ZW55=function(){for(var t=N13.FHH90(!1),e=0,i=0;i<t.length;i++)t[i].id==this.argId&&(e=i);this.scrRoll.validateNow();var s=Math.ceil((e+1)/6)-1;this.scrRoll.viewport.scrollH=this.scrRoll.width*s-10;var o=Math.floor(t.length/6);this.scrRoll.viewport.scrollH<0&&(this.scrRoll.viewport.scrollH=0),this.btnLeft.visible=!!s,o<=s&&(this.btnRight.visible=!1),this.isShowHong()},t.prototype.goShopPing=function(){var t={sLink:parseInt(this.lbSource.name)};TG84.goToDlg(t)},t.prototype.closeSelf=function(){this.apF(O10.A10)},t.prototype.activate=function(){this.apF(O10.A27,this.classData[this.index+""].id)},t.prototype.canChange=function(){this.apF(O10.A26,this.classData[this.index+""].id)},t.prototype.ZQ91=function(t){for(var e=0;e<this.skinCollection.length;e++)this.skinCollection.getItemAt(e).isShow=!1;this.index=t,this.skinCollection.getItemAt(t).isShow=!0,this.skinCollection.replaceAll(this.classData),this.ZN22(t)},t.prototype.updateUI=function(){this.lbTitle.text=O3.tr(1308),this.lbAllText.text=O3.tr(1309),this.lbOnText.text=O3.tr(1310);var t=App.CM.gtM(O6.C18).initWingData.ws[0];if(this.classData=this.adjust(N13.FHH90(!1).concat()),this.regularData=N13.FHH90(!1),this.skins=N13.skin,this.skinCollection.replaceAll(this.classData),this.classData.length<=6&&(this.btnRight.visible=!1),this.index=0,this.argId){for(var e=0;e<this.classData.length;e++)if(this.classData[e].id==this.argId){this.index=e;break}}else for(e=0;e<this.classData.length;e++)if(this.classData[e].id==t.k){this.index=e;break}this.ZQ91(this.index)},t.prototype.adjust=function(t){for(var e=[],i=App.CM.gtM(O6.C18).initWingData.ws[0],s=t.length-1;0<=s;s--){if(t[s].state=0,t[s].id==i.k||0<=i.ss.indexOf(t[s].id))t[s].id==i.k?t[s].state=2:t[s].state=1,e.push(t[s]),t.splice(s,1);else 1<=N12.giC(t[s].itemid)&&(t[s].state=3,e.unshift(t[s]),t.splice(s,1))}return e.sort(function(t,e){return e.state-t.state}),e=e.concat(t)},t.prototype.ZN22=function(t){this.index=t;var e=App.CM.gtM(O6.C18).initWingData.ws[0];this.lbName.text=this.classData[t+""].name,this.lbSource.text=this.classData[t+""].gainway,this.lbSource.name=this.classData[t+""].showid,0<this.classData[t+""].showid?M18.FHH83(this.lbSource):M18.FF64(this.lbSource),this.imgQuality.source=N12.getBox(N12.gID(this.classData[t+""].itemid+"").quality),this.imgHead.source=N12.FJ86(this.classData[t+""].itemid),this.imgHead.name=this.classData[t+""].itemid+"",this.nowModel||(this.nowModel=new TF39),this.nowModel.id=this.avatarModel.id,this.nowModel.h=this.avatarModel.h,this.nowModel.we=this.avatarModel.we,this.nowModel.wi=this.classData[t+""].id,this.nowModel.bt=BehaviourType.Stand_d;var i={x:0,y:0,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(i),this.objBoss.setData(this.nowModel,this.gpBoss);var s=N12.giC(this.classData[t+""].itemid);0==(this.num=s)?(this.lbNum.text="(0/1)",this.lbNum.textColor=14164514,this.btnActivate.visible=this.btnChange.visible=this.grpHave.visible=!1,this.grpNoLive.visible=this.grpShow.visible=this.grpDetail.visible=!0):(this.lbNum.textColor=7716890,this.lbNum.text="("+s+"/1)",this.grpNoLive.visible=this.btnActivate.visible=this.grpDetail.visible=!0,this.grpShow.visible=this.grpHave.visible=this.btnChange.visible=!1),0<=e.ss.indexOf(this.classData[t+""].id)&&(this.grpHave.visible=this.grpDetail.visible=this.grpNoLive.visible=!1,this.btnChange.visible=!0),e.k==this.classData[t+""].id&&(this.btnChange.visible=this.grpNoLive.visible=this.grpDetail.visible=!1,this.grpHave.visible=!0),this.scoreLb.text=M10.gAG(this.classData[t+""].attr)+"";var o=N13.getData(this.classData[t+""].attr);for(var r in o)for(var n in o[r])this["lbAttr"+r].text=K18.attribute[n].name+":"+o[r][n];this.grpHave.visible||this.btnChange.visible?this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=7716890:this.lbAttr0.textColor=this.lbAttr1.textColor=this.lbAttr2.textColor=16458017;var a=0,h=0;for(var r in e.ss)-1!=this.skins[e.ss[r]+""].itemid&&(h+=1,a+=M10.gAG(this.skins[e.ss[r]+""].attr));this.lbAllPower.text=a+"",this.lbHave.text=h+""},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH21)switch(e){case P4.X68:case P4.R57:this.updateUI()}if(t instanceof THH14)switch(e){case P4.U59:this.ZQ91(this.index)}},t.prototype.isShowHong=function(){var t=App.CM.gtM(O6.C18).initWingData.ws[0];this.btnLeft.imgNew.visible=this.btnRight.imgNew.visible=!1;for(var e=this.getStartIndex,i=this.skinCollection.source,s=e,o=e+1+6,r=0;r<s;r++){if(N12.giC(i[r].itemid)&&t.ss.indexOf(i[r].id)<0){this.btnLeft.imgNew.visible=!0;break}}for(var n=this.skinCollection.source.length-1;o<n;n--){if(N12.giC(i[n].itemid)){this.btnRight.imgNew.visible=!0;break}}},t.prototype.doLeft=function(){var t=this.getStartIndex,e=Math.max(0,t-this.pageSize);this.scrRoll.viewport.scrollH=e*this.itemWidth,this.isShowHong(),this.ZQ72()},Object.defineProperty(t.prototype,"getStartIndex",{get:function(){return Math.floor(this.scrRoll.viewport.scrollH/this.itemWidth)},enumerable:!0,configurable:!0}),t.prototype.doRight=function(){var t=this.getStartIndex,e=this.skinCollection.length-this.pageSize,i=Math.min(e,t+this.pageSize);this.scrRoll.viewport.scrollH=e===i?this.scrRoll.viewport.contentWidth-this.scrRoll.width:i*this.itemWidth,this.isShowHong(),this.ZQ72()},t.prototype.ZQ72=function(){if(this.skinCollection.length>this.pageSize){var t=this.scrRoll.viewport;this.btnLeft.visible=0!=t.scrollH,this.btnRight.visible=Math.abs(t.scrollH+this.scrRoll.width)<t.contentWidth}else this.btnLeft.visible=this.btnRight.visible=!1},t.prototype.showNextData=function(t){switch(t.target.name){case"-":this.doLeft();break;case"+":this.doRight()}this.isShowHong()},t.prototype.openAddView=function(){this.apF(O10.A4,{power:0,index:0,skinId:this.classData[this.index+""].id})},t.prototype.ZQ49=function(){var t=N12.gID(this.imgHead.name);this.aCF(O6.C11,O14.A15,t,this.num),TG40.playClickEffect()},t}(BaseEuiView);__reflect(WingDerma.prototype,"WingDerma");var WingEverAdd=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinPower=0,i.getIndex=1,i.array=[],i.strs=[O3.tr(5742),O3.tr(5743),O3.tr(5744)],i.skinName=WingEverAddSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.attrAddData.dataProvider=this.attrAddCollection=new eui.ArrayCollection},t.prototype.open=function(t){this.num=t.index,this.power=t.power,this.skinId=t.skinId,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.attrAddCollection.removeAll(),this.num=null,this.model=null,this.skinPower=null,this.power=null,this.fitDreData=null,this.array=null,this.skinId=null,this.nowModel=null,this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null},t.prototype.closeSelf=function(){this.apF(O10.A1)},t.prototype.updateUI=function(){var t=App.CM.gtM(O6.B98),e=App.CM.gtM(O6.C18),i=(e.initWingData,this.skinId?this.skinId:e.initWingData.ws[0].k);this.nowModel||(this.nowModel=new TF39);var s=App.CM.gtM(O6.B82).avatarInfo.us[J11.A7];this.nowModel.id=s.id,this.nowModel.wi=i,this.nowModel.bt=BehaviourType.Stand_d;var o={id:i,x:10,y:20,dir:Dir.br,objType:P13.A6};this.objBoss&&(this.gpBoss.removeChildren(),this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setBaseData(o),this.objBoss.setData(this.nowModel,this.gpBoss);for(var r=this.gpBoss.getChildAt(0),n=0;n<r.numChildren;n++){var a=r.getChildAt(n);a.fight_st&&"wi"!=a.fight_st&&(a.visible=!1)}this.fitDreData=t.wingEquip.sort(function(t,e){return t.i-e.i}),this.lbTitle.text=O3.tr(1311),this.skinPower=0;var h=this.getSkinPower(),p=this.getDanPower(),l=this.FJ47(),c=this.ZV1();this.array=[],this.num?(this.scoreLb.text=this.power+"",this.array.push({name:O3.tr(1326)+O3.tr(2412),n0:l.n0,n1:l.n1,n2:l.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1327)+O3.tr(2412),n0:c.n0,n1:c.n1,n2:c.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")}),this.array.push({name:O3.tr(1328)+O3.tr(2412),n0:p.n0,n1:p.n1,n2:p.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})):(this.scoreLb.text=Math.round(this.skinPower)+"",this.array.push({name:O3.tr(1325)+O3.tr(2412),n0:h.n0,n1:h.n1,n2:h.n2,name1:O4.FD72(101,"："),name2:O4.FD72(102,"："),name3:O4.FD72(103,"：")})),this.attrAddCollection.replaceAll(this.array)},t.prototype.getSkinPower=function(){for(var t=[],e={n0:0,n1:0,n2:0},i=App.CM.gtM(O6.C18).initWingData,s=0;s<i.ws[0].ss.length;s++)-1!=N13.skin[i.ws[0].ss[s]+""].itemid&&(t.push(i.ws[0].ss[s]),this.skinPower+=M10.gAG(N13.skin[i.ws[0].ss[s]+""].attr));for(s=0;s<t.length;s++){var o=N13.getData(N13.skin[t[s]+""].attr);for(var r in o)for(var n in o[r]){var a=this.strs.indexOf(K18.attribute[n].name);0<=a&&(e["n"+a]+=parseInt(o[r][n]))}}return e},t.prototype.getDanPower=function(){var t={n0:0,n1:0,n2:0},e=N13.init.elixirAttr.value,i=N13.getData(e),s=App.CM.gtM(O6.C18).initWingData;for(var o in i)for(var r in i[o]){var n=parseInt(i[o][r])*s.en,a=this.strs.indexOf(K18.attribute[r].name);0<=a&&(t["n"+a]=n)}return t},t.prototype.ZV1=function(){for(var t={n0:0,n1:0,n2:0},e=this.fitDreData,i=0;i<e.length;i++){var s=M10.FD92(e[i].i,e[i].t),o=N13.getData(s.attr),r=N13.getData(s.addattr);for(var n in o)for(var a in o[n]){0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a]))}for(var n in r)for(var a in r[n]){var h;0<=(h=this.strs.indexOf(K18.attribute[a].name))&&(t["n"+h]+=parseInt(o[n][a])*s.addlevel)}}return t},t.prototype.getCount=function(t){N13.base[t-1+""]&&(this.getIndex+=1,this.getCount(t-1))},t.prototype.FJ47=function(){var t={n0:0,n1:0,n2:0},e=App.CM.gtM(O6.C18).initWingData,i=e.ws[0].t,s=e.ws[0].exp;this.getIndex=1,this.getCount(i);for(var o=0;o<this.getIndex;o++){var r=N13.base[i-o+""].baseattr,n=N13.base[i-o+""].addattr,a=i-o,h=N13.getData(r),p=N13.getData(n);if(0==o)for(var l in p)for(var c in p[l]){var u=parseInt(p[l][c])*s/N13.init.advancedExp.value;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=u)}else for(var d in p)for(var c in p[d]){0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(p[d][c])*N13.base[a+""].exp/N13.init.advancedExp.value)}for(var v in h)for(var c in h[v]){var f;0<=(f=this.strs.indexOf(K18.attribute[c].name))&&(t["n"+f]+=parseInt(h[v][c]))}}var g=P7.FA54(E5.A12);for(var c in t)t[c]+=Math.floor(t[c]*g);return t},t}(BaseEuiView);__reflect(WingEverAdd.prototype,"WingEverAdd");var WingHelp=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingHelpSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.open=function(t){this.lbTitle.text=t.title,this.lbExplain.textFlow=M18.HTP.parser(t.content),this.lbExplain.validateNow(),this.scr.scrollPolicyH="off",this.scr.scrollPolicyV="off",this.upArrow.visible=this.downArrow.visible=!1,630<this.lbExplain.height?(this.scr.height=630,this.scr.scrollPolicyV="on",this.downArrow.visible=!0):this.scr.height=this.lbExplain.height+8,this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.scr.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this)},t.prototype.close=function(){this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.scr.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this)},t.prototype.endScroller=function(){this.scr.validateNow();var t=this.scr.viewport;this.upArrow.visible=!(t.scrollV<=0),this.scr.height+t.scrollV>=t.contentHeight?this.downArrow.visible&&(this.downArrow.visible=!1):this.downArrow.visible=!0},t.prototype.closeSelf=function(){this.apF(O10.A18)},t}(BaseEuiView);__reflect(WingHelp.prototype,"WingHelp");var WingMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.I1,O7.I77,"HorseView",this.content),App.VM.rgS(O7.I1,O7.I87,"FaqiView",this.content),App.VM.rgS(O7.I1,O7.I65,"WeaponView",this.content),App.VM.rgS(O7.I1,O7.I88,"WingView",this.content);var t=[O3.tr(1301),O3.tr(1302),O3.tr(1303),O3.tr(1304)],e=[O7.I77,O7.I87,O7.I65,O7.I88];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=t[0]||O7.I77;this.ZQ23(i),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this),this.ZHH59(),2==t.length&&(this.bgMask.visible=t[1])},t.prototype.ZQ23=function(t){var e=App.CM.gtM(O6.B82);switch(t){case O7.I77:var i=parseInt(M13.init.unlockLevel.value);if(e.avatarInfo.l<i){var s=K18.init.commonDesc1.value;P18.sDP(M18.format(s,[i]))}else this.title=O3.tr(1305),N13.type=O10.A37,this.btnList.ZM66(t);break;case O7.I87:i=parseInt(N16.init.unlockLevel.value);if(e.avatarInfo.l<i){s=K18.init.commonDesc1.value;P18.sDP(M18.format(s,[i]))}else this.title=O3.tr(1306),N13.type=O10.A38,this.btnList.ZM66(t);break;case O7.I65:i=parseInt(L2.init.unlockLevel.value);if(e.avatarInfo.l<i){s=K18.init.commonDesc1.value;P18.sDP(M18.format(s,[i]))}else this.title=O3.tr(1307),N13.type=O10.A36,this.btnList.ZM66(t);break;case O7.I88:i=parseInt(N13.init.unlockLevel.value);if(e.avatarInfo.l<i){s=K18.init.commonDesc1.value;P18.sDP(M18.format(s,[i]))}else this.title=O3.tr(1308),N13.type=O10.A39,this.btnList.ZM66(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openHelpView,this)},t.prototype.openHelpView=function(){var t,e;switch(this.title){case O3.tr(1305):t=M13.init.tipsTitle.value,e=M13.init.tipsTex.value;break;case O3.tr(1306):t=N16.init.tipsTitle.value,e=N16.init.tipsTex.value;break;case O3.tr(1307):t=L2.init.tipsTitle.value,e=L2.init.tipsTex.value;break;case O3.tr(1308):t=N13.init.tipsTitle.value,e=N13.init.tipsTex.value}var i={title:t,content:e};this.aCF(O6.C18,O10.A24,i)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.C2),e=App.CM.gtM(O6.C17),i=App.CM.gtM(O6.B83),s=App.CM.gtM(O6.C18);this.btnList.ZHH58(O7.I77,t.isHong),this.btnList.ZHH58(O7.I87,e.isHong),this.btnList.ZHH58(O7.I65,i.isHong),this.btnList.ZHH58(O7.I88,s.isHong)},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74(),(t instanceof TB46||t instanceof TB14)&&this.ZHH59()},t.prototype.ZHH59=function(){this.btnList.ZHH59(O7.I77,P7.FD56(E5.A11)),this.btnList.ZHH59(O7.I87,P7.FD56(E5.A13)),this.btnList.ZHH59(O7.I88,P7.FD56(E5.A12)),this.btnList.ZHH59(O7.I65,P7.FD56(E5.A9))},t}(BasePanelView);__reflect(WingMainView.prototype,"WingMainView");var wing,WingSkill=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WingSkillSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.grps=[this.grp0,this.grp1,this.grp2,this.grp3],this.grpEffects=[this.grpEffect0,this.grpEffect1,this.grpEffect2],this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4971)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4972)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4973)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4974)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4975)),this.lbReach.textFlow=M18.HTP.parse(O3.tr(4976)),this.btnUpgrade.label=O3.tr(4985)},t.prototype.open=function(t){this.index=t,this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var e=0;e<this.grps.length;e++){this.grps[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this),this.grps[e].getChildByName("imgOpt").visible=e==this.index}this.updateUI()},t.prototype.close=function(){this.btnBack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.imgBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.grpInfo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GT53,this),this.btnUpgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.upgrade,this);for(var t=0;t<this.grps.length;t++)this.grps[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillNew,this);this.index=null,this.skillData=null},t.prototype.closeSelf=function(){this.apF(O10.A11)},t.prototype.GT53=function(){var t=N12.gID(N13.init.skillItem.value);this.aCF(O6.C11,O14.A15,t,this.lbOwn.text)},t.prototype.upgrade=function(){if(this.lbOwn.textColor!=_cc.red){var t=this.skillData[this.index].si;N13.skillGroup[t+""][0].wid;this.apF(O10.A13,t)}else{var e=parseInt(N13.init.skillItem.value);App.VM.open(O7.G87,e,1,P12.A26)}},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof THH21)switch(e){case P4.R57:this.updateUI();break;case P4.V57:this.updateUI(!0)}else t instanceof THH9&&this.updateUI()},t.prototype.updateUI=function(t){void 0===t&&(t=!1);var e=App.CM.gtM(O6.C18);this.skillData=[];var i=e.initWingData;this.lbTitle.text=O3.tr(1312);var s=i.ws[0].sk.length;this.skillData=i.ws[0].sk.concat().sort(function(t,e){return t.si-e.si});var o;if(s)for(n=this.skillData.length;n<4;n++){o=this.skillData[this.skillData.length-1].si+1;a=this.ZV2(n+1);this.skillData.push({si:o,sl:0,count:a})}else{for(var r in N13.skillGroup){o=parseInt(r);break}for(var n=1;n<=4;n++){var a=this.ZV2(n);this.skillData.push({si:o,sl:0,count:a}),o+=1}}for(n=0;n<this.grps.length;n++){var h=this.grps[n].getChildByName("imgHead"),p=this.grps[n].getChildByName("grpCount"),l=this.grps[n].getChildByName("grpNotOpen");h.source=N13.init["skillIcon"+(n+1)].value;N13.skillGroup[this.skillData[n].si+""][this.skillData[n].sl-1],N12.giC(parseInt(N13.init.skillItem.value)),N13.skillGroup[this.skillData[n].si+""].length;if(this.skillData[n].sl){var c=p.getChildAt(p.numChildren-1);p.visible=!0;var u=parseInt(c.text),d=this.grps[n].getChildByName("effect");this.skillData[n].sl>u&&t&&App.THH33.aUE(d,"iconSkill",-d.width/2+5,-d.height/2+5,1),c.text=""+this.skillData[n].sl,l.visible=!1}else{l.visible=!0,p.visible=!1,l.getChildAt(l.numChildren-1).text=O3.tr(1320,this.skillData[n].count)}}this.updateInfo(this.skillData[this.index])},t.prototype.updateInfo=function(t){var e=N13.init["skillName"+(this.index+1)].value;if(this.lbNowAttr1.text=this.lbNowNum1.text=this.lbNextAttr1.text=this.lbNextNum1.text="",this.lbName.text=e,t.sl){var i=N13.skillGroup[t.si+""][t.sl-1];this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!0,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!1,this.lbClass.text=O3.tr(1331,t.sl);var s=O3.tr(1300,N12.base[N13.init.skillItem.value].name,i.cost);this.lbExpend.textFlow=M18.HTP.parser(s),this.lbOwn.text=N12.giC(parseInt(N13.init.skillItem.value))+"",this.lbOwn.textColor=parseInt(this.lbOwn.text)>=i.cost?_cc.green:_cc.red,this.btnUpgrade.imgNew.visible=parseInt(this.lbOwn.text)>=i.cost,this.imgHead.source=N12.FJ86(N13.init.skillItem.value),this.imgQuality.source=N12.getBox(N12.base[N13.init.skillItem.value].quality);var o=N13.getData(i.attr);for(var r in o)for(var n in o[r])this["lbNowAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNowNum"+r].text=o[r][n]}else{this.lbClass.text="",this.grpEffect0.visible=this.grpEffect0.includeInLayout=this.grpUpgrade.visible=!1,this.grpEffect2.visible=this.grpEffect2.includeInLayout=this.grpNo.visible=!0;(i=N13.skillGroup[t.si+""][t.sl]).name;var a=WingLangs.typeMaps[N13.type].name;this.lbCondition.text=O3.tr(1316,a,t.count)}var h=N13.skillGroup[t.si+""][t.sl+""];if(h&&t.sl!=N13.skillGroup[t.si+""].length){this.grpData.visible=!0,this.lbReach.visible=!1;o=N13.getData(h.attr);for(var r in o)for(var n in o[r])this["lbNextAttr"+r].text=O3.tr(1330,K18.attribute[n].name),this["lbNextNum"+r].text=o[r][n]}else this.grpUpgrade.visible=this.grpData.visible=!1,this.lbReach.visible=!0},t.prototype.ZV2=function(t){var e;for(var i in N13.base){if((N13.base[i].skillid?N13.base[i].skillid.split(","):"").length==t){e=N13.base[i].level;break}}return e},t.prototype.skillNew=function(t){var e=parseInt(t.target.name);this.index=e;for(var i=0;i<this.grps.length;i++){this.grps[i].getChildByName("imgOpt").visible=i==e}this.updateInfo(this.skillData[this.index]),TG40.playClickEffect()},t}(BaseEuiView);__reflect(WingSkill.prototype,"WingSkill"),function(t){var e=function(){};t.WingVo=e,__reflect(e.prototype,"wing.WingVo");var i=function(){};t.WingSkillVo=i,__reflect(i.prototype,"wing.WingSkillVo")}(wing||(wing={}));var M11=function(){function r(){}return r.FK35=function(t){r.init=t.partner_init,r.base=t.partner_base,r.baseskill=r.FD47(t.partner_baseskill),r.advance=t.partner_advance,r.formation=t.partner_formation,r.general=t.partner_general,r.skill=r.FHH70(t.partner_skill),r.award=t.partner_award,r.fetter=t.partner_fetter,r.favor=t.partner_favor},r.FHH70=function(t){var e=void 0;if(!t)return e;for(var i in e={},t){var s=t[i];e[s.skillid+"_"+s.level]=s}return e},r.FD47=function(t){var e=void 0;if(!t)return e;for(var i in e={},t){var s=t[i];e[s.atkskill+"_"+s.starlv]=s}return e},r.getWomen=function(t){var e=void 0;return r.base?e=r.base[t]:e},r.FK24=function(){var t=new Array;if(!r.base)return t;for(var e in r.base)t.push(r.base[e]);return t},r.FHH71=function(){var t=void 0;if(!r.base)return t;for(var e in r.base){t=r.base[e];break}return t},r.FL18=function(t){var e=void 0;return r.advance?e=r.advance[t]:e},r.FHH72=function(){if(r.skillMaxAdvance)return r.skillMaxAdvance;return r.advance?r.skillMaxAdvance=Reincarnate.Utils.mapkeyMax(r.advance):0},r.FD48=function(t){if(r.skillMaxStarCache[t])return r.skillMaxStarCache[t];var e=0;if(!r.baseskill)return e;for(var i in r.baseskill)r.baseskill[i].atkskill==t&&r.baseskill[i].starlv>e&&(e=r.baseskill[i].starlv);return r.skillMaxStarCache[t]=e},r.gIV=function(t){var e=void 0;return r.init?e=r.init[t].value:e},r.FJ2=function(t,e){void 0===e&&(e=1);var i=void 0;return r.baseskill?i=r.baseskill[t+"_"+e]:i},r.FJ3=function(t){var e=void 0;if(!r.fetter)return e;for(var i in r.fetter){var s=r.fetter[i];if(t<=s.level){e=s;break}}var o=r.ZM46();return!e&&t>o.level?e=o:t==e.level?e:e=r.FL99(e.id-1)},r.ZM46=function(){var t=void 0;if(!r.fetter)return t;var e=0;for(var i in r.fetter){var s=r.fetter[i];s.level>e&&(e=s.level,t=s)}return t},r.FL99=function(t){var e=void 0;return r.fetter?e=r.fetter[t]:e},r.FG60=function(){var t=void 0;if(!r.fetter)return t;for(var e in r.fetter){t=r.fetter[e];break}return t},r.FI35=function(t){var e=void 0;return r.formation?e=r.formation[t]:e},r.FK75=function(t){var e=void 0;return r.general?e=r.general[t]:e},r.FF54=function(){var t=void 0;if(!r.formation)return t;for(var e in r.formation){var i=r.formation[e];0<i.level&&(t=i)}return t},r.FHH73=function(){var t=void 0;if(!r.general)return t;for(var e in r.general){var i=r.general[e];0<i.level&&(t=i)}return t},r.getSkill=function(t,e){void 0===e&&(e=1);var i=void 0;return r.skill?i=r.skill[t+"_"+e]:i},r.FHH74=function(t){if(r.skillMaxLevelCache[t])return r.skillMaxLevelCache[t];var e=0;if(!r.skill)return e;for(var i in r.skill){var s=r.skill[i];s.skillid==t&&e<s.level&&(e=s.level)}return r.skillMaxLevelCache[t]=e},r.FE46=function(t){return r.favor[t]},r.skillMaxStarCache={},r.skillMaxLevelCache={},r.skillMaxAdvance=0,r}();__reflect(M11.prototype,"M11");var N2=function(){function t(){}return t.A49=10001,t.A50=10002,t.A53=10003,t.A25=10004,t.A26=10005,t.A27=10006,t.A28=10007,t.A21=10008,t.A22=10009,t.A43=10010,t.A44=10011,t.A29=10012,t.A30=10013,t.A11=10014,t.A12=10015,t.A3=10016,t.A4=10017,t.A31=10018,t.A32=10019,t.A7=10020,t.A8=10021,t.A15=10022,t.A16=10023,t.A23=10024,t.A24=10025,t.A17=10026,t.A18=10027,t.A13=10028,t.A14=10029,t.A33=10030,t.A34=10031,t.A9=10032,t.A10=10033,t.A19=10034,t.A20=10035,t.A45=10036,t.A46=10037,t.A39=10038,t.A40=10039,t.A1=10040,t.A2=10041,t.A5=10042,t.A6=10043,t.A51=10044,t.A52=10045,t.A41=10046,t.A42=10047,t.A47=10048,t.A48=10049,t.A35=10050,t.A36=10051,t.A37=10052,t.A38=10053,t}();__reflect(N2.prototype,"N2");var TE9=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.HH25,"WomenMainView",t,K17.UI_Main),App.VM.register(O7.HH43,"WomenDescView",t,K17.UI_Popup),App.VM.register(O7.B72,"WomenScoreDetailView",t,K17.UI_Popup),App.VM.register(O7.E87,"WomenStumbleView",t,K17.UI_Popup),App.VM.register(O7.G68,"WomenSkillView",t,K17.UI_Popup),App.VM.register(O7.E89,"WomenPerAttrView",t,K17.UI_Popup),App.VM.register(O7.E88,"WomenUpFightView",t,K17.UI_Popup),App.VM.register(O7.E2,"WomenMedicineView",t,K17.UI_Popup),App.VM.register(O7.C43,"WomenSkillLearnView",t,K17.UI_Main_TOP),App.VM.register(O7.E63,"WomenMindMainView",t,K17.UI_Main_TOP),App.VM.register(O7.E64,"WomenGodSShowView",t,K17.UI_Main_TOP),App.VM.register(O7.E65,"WomenGatSShowView",t,K17.UI_Main_TOP),App.VM.register(O7.A84,"WomenTacticalScoreView",t,K17.UI_Popup),App.VM.register(O7.A23,"WomenGeneralSealScoreView",t,K17.UI_Popup),App.VM.register(O7.D51,"WomenFavorableView",t,K17.UI_Main_TOP),App.VM.register(O7.D52,"WomenFavorAttrView",t,K17.UI_Popup);var e=new TG77(t);return e.aLV(O7.G55),e.aLV(O7.B35),e.aLV(O7.B92),e.aLV(O7.I64),e.aLV(O7.I39),e.aLV(O7.HH25),e.aLV(O7.I79),e.aLV(O7.E88),e.aLV(O7.B72),e.aLV(O7.G68),e.aLV(O7.E87),e.aLV(O7.E89),e.aLV(O7.F84),e.aLV(O7.E1),e.aLV(O7.C43),e.aLV(O7.E2),e.aLV(O7.F86),e.aLV(O7.B73),e.aLV(O7.I70),e.aLV(O7.D51),e.aLV(O7.E63),e.aLV(O7.F48),e.aLV(O7.F49),t.womenProxy=new TG78(t),t.rgF(N2.A53,t.GV39,t),t.rgF(N2.A49,t.GV38,t),t.rgF(N2.A50,t.GV39,t),t.rgF(N2.A25,t.GR74,t),t.rgF(N2.A26,t.GR75,t),t.rgF(N2.A45,t.GT82,t),t.rgF(N2.A46,t.GT83,t),t.rgF(N2.A27,t.GP95,t),t.rgF(N2.A28,t.GP96,t),t.rgF(N2.A21,t.GP97,t),t.rgF(N2.A22,t.GP98,t),t.rgF(N2.A31,t.GR76,t),t.rgF(N2.A32,t.GR77,t),t.rgF(N2.A43,t.GV40,t),t.rgF(N2.A44,t.GV41,t),t.rgF(N2.A29,t.GT84,t),t.rgF(N2.A30,t.GT85,t),t.rgF(N2.A11,t.GM2,t),t.rgF(N2.A12,t.GM3,t),t.rgF(N2.A7,t.GI25,t),t.rgF(N2.A8,t.GI26,t),t.rgF(N2.A3,t.GI27,t),t.rgF(N2.A4,t.GI28,t),t.rgF(N2.A19,t.GM4,t),t.rgF(N2.A20,t.GM5,t),t.rgF(N2.A33,t.GR78,t),t.rgF(N2.A34,t.GR79,t),t.rgF(N2.A17,t.GM6,t),t.rgF(N2.A18,t.GM7,t),t.rgF(N2.A15,t.GV42,t),t.rgF(N2.A16,t.GV43,t),t.rgF(N2.A23,t.GT86,t),t.rgF(N2.A24,t.GT87,t),t.rgF(N2.A9,t.GI29,t),t.rgF(N2.A10,t.GI30,t),t.rgF(N2.A13,t.GI31,t),t.rgF(N2.A14,t.GI32,t),t.rgF(N2.A39,t.GO1,t),t.rgF(N2.A40,t.GO2,t),t.rgF(N2.A1,t.GI33,t),t.rgF(N2.A2,t.GI34,t),t.rgF(N2.A5,t.GP99,t),t.rgF(N2.A6,t.GQ1,t),t.rgF(N2.A41,t.GO3,t),t.rgF(N2.A42,t.GO4,t),t.rgF(N2.A47,t.GQ2,t),t.rgF(N2.A48,t.GQ3,t),t.rgF(N2.A35,t.GR81,t),t.rgF(N2.A36,t.GR80,t),t.rgF(N2.A37,t.GR83,t),t.rgF(N2.A38,t.GR82,t),t}return __extends(t,i),t.prototype.GV38=function(){return this.womenProxy.GV38()},t.prototype.GV39=function(t){if(200==t.head.state){var e=this.gtM();e.ZY36(t.body),e.notify(P4.V42)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GT82=function(t,e){this.womenProxy.GT82(t,e)},t.prototype.GT83=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZY37(e),i.notify(P4.U33)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR74=function(t){this.womenProxy.ZT85(t)},t.prototype.GR75=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZP85(e),i.notify(P4.S96);var s={objData:{id:M11.getWomen(e.p.id).model,x:0,y:0,dir:Dir.br,objType:P13.A6}};App.VM.open(O7.G69,s)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP95=function(t,e){this.womenProxy.GP95(t,e)},t.prototype.GP96=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZP85(e),i.notify(P4.R46)}else{238==t.head.state?App.VM.gOV(O7.I79).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GP97=function(t,e){this.womenProxy.GP97(t,e)},t.prototype.GP98=function(t){if(200==t.head.state){var e=t.body,i=this.gtM(),s={objData:{id:M11.getWomen(e.p.id).model,x:0,y:0,dir:Dir.br,objType:P13.A6},titleImg:"v1_fonts_jndjhdts_png"};App.VM.open(O7.G69,s),i.ZP85(e),i.notify(P4.R48)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR76=function(t){this.womenProxy.GR76(t)},t.prototype.GR77=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZF97(e),i.notify(P4.S98)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV40=function(t){this.womenProxy.GV40(t)},t.prototype.GV41=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZF97(e),i.notify(P4.N74)}else{238==t.head.state?App.VM.gOV(O7.E1).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GT84=function(){this.womenProxy.ZP89()},t.prototype.GT85=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZF97(e),i.notify(P4.R50),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GM2=function(t){this.womenProxy.GM2(t)},t.prototype.GM3=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZF97(e),i.notify(P4.N76)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI25=function(t){this.womenProxy.GI25(t)},t.prototype.GI26=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.fmn=e.fmn,i.notify(P4.J76)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI27=function(){this.womenProxy.ZM48()},t.prototype.GI28=function(t){if(200==t.head.state){var e=t.body;App.CM.gtM(O6.B98).ZL13(e.es),this.gtM().notify(P4.L81)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GM4=function(t,e){this.womenProxy.GM4(t,e)},t.prototype.GM5=function(t,e){if(200==t.head.state){var i=t.body,s=this.gtM();1==e?s.fmho=i.h:2==e&&(s.gnho=i.h),i.ob&&P5.sIs(i.ob),s.notify(P4.N82)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GM6=function(t){this.womenProxy.GM6(t)},t.prototype.GM7=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZJ59(e),i.notify(P4.N80)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR78=function(t){this.womenProxy.GR78(t)},t.prototype.GR79=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZJ59(e),i.notify(P4.T1)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GV42=function(t){this.womenProxy.ZJ61(t)},t.prototype.GV43=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZJ59(e),i.notify(P4.N78)}else{238==t.head.state?App.VM.gOV(O7.B73).canExpend():App.CM.apF(O6.B87,L10.A4,t)}},t.prototype.GT86=function(){this.womenProxy.ZP91()},t.prototype.GT87=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.ZJ59(e),i.notify(P4.R52),App.CM.gtM(O6.B67).notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI29=function(t){this.womenProxy.GI29(t)},t.prototype.GI30=function(t){if(200==t.head.state){var e=t.body,i=this.gtM();i.gnn=e.gnn,i.notify(P4.J78)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI31=function(){this.womenProxy.GI31()},t.prototype.GI32=function(t){if(200==t.head.state){var e=t.body;App.CM.gtM(O6.B98).ZL13(e.es),this.gtM().notify(P4.L83)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI33=function(t,e){this.womenProxy.GI33(t,e)},t.prototype.GI34=function(t){if(200==t.head.state){var e=this.gtM();e.ZP85(t.body),e.notify(P4.G36)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GP99=function(t){this.womenProxy.GP99(t)},t.prototype.GQ1=function(t){if(200==t.head.state){var e=this.gtM();e.ZP85(t.body),e.notify(P4.J80)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GO1=function(){THH23.FK27(!0)&&App.VM.open(O7.D51)},t.prototype.GO2=function(){App.VM.close(O7.D51)},t.prototype.GO3=function(t){App.VM.open(O7.D52,t)},t.prototype.GO4=function(){App.VM.close(O7.D52)},t.prototype.GQ2=function(){App.VM.open(O7.E63)},t.prototype.GQ3=function(){App.VM.close(O7.E63)},t.prototype.GR80=function(t){if(200!=t.head.state){if(238!=t.head.state)return void App.CM.apF(O6.B87,L10.A4,t);App.VM.gOV(O7.I79).canExpend()}var e=this.gtM();e.ZJ58(t.body),e.notify(P4.L85)},t.prototype.GR81=function(t,e){this.womenProxy.GR81(t,e)},t.prototype.GR82=function(t){if(200==t.head.state){var e=this.gtM();e.ZF96(t.body),e.notify(P4.L87)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GR83=function(){this.womenProxy.GR83()},t}(TE11);__reflect(TE9.prototype,"TE9");var TE10=function(){function p(){}return p.FK35=function(t){p.init=t.soul_init,p.godsoul=t.soul_godsoul,p.poly=t.soul_poly,p.godsoulMax=this.FHH75(p.godsoul),p.polyMax=this.FHH75(p.poly)},p.FHH75=function(t){var e=0;for(var i in t)e++;return e},p.gIV=function(t){var e=void 0;return p.init?e=p.init[t].value:e},p.FL19=function(t,e,i){void 0===i&&(i=1);return 7==t?this.FL55(this.FE47(e),i):this.FL55(this.FK25(e),i)},p.FK25=function(t){for(var e=this.FJ93(),i=1;i<=t;i++){var s=this.FL56(p.godsoul[i].attr);for(var o in s){var r=this.isInList(s[o].key,e);if("-1"==r){var n={key:s[o].key,value:s[o].value};e.push(n)}else e[r].value=Number(e[r].value)+Number(s[o].value)}}return e},p.FJ93=function(){var t=[],e=this.FL56(p.godsoul[1].attr);for(var i in e){var s=this.isInList(e[i].key,t);if("-1"==s){var o={key:e[i].key,value:0};t.push(o)}else t[s].value=0}return t},p.FE47=function(t){for(var e=this.FHH76(),i=1;i<=t;i++){var s=this.FL56(p.godsoul[i].breakattr);for(var o in s){var r=this.isInList(s[o].key,e);if("-1"==r){var n={key:s[o].key,value:s[o].value};e.push(n)}else e[r].value=Number(e[r].value)+Number(s[o].value)}}return e},p.FHH76=function(){var t=[],e=this.FL56(p.godsoul[1].breakattr);for(var i in e){var s=this.isInList(e[i].key,t);if("-1"==s){var o={key:e[i].key,value:0};t.push(o)}else t[s].value=0}return t},p.FJ4=function(t,e,i){void 0===i&&(i=1);for(var s=[],o=[],r=1;r<=6;r++)if(r<e){var n=this.FK25(t+1);o.push(n)}else{n=this.FK25(t);o.push(n)}for(var r in o.push(this.FE47(t)),o)for(var a in o[r]){var h=this.isInList(o[r][a].key,s);if("-1"==h){var p={key:o[r][a].key,value:Number(o[r][a].value)*i};s.push(p)}else s[h].value=Number(s[h].value)+Number(o[r][a].value*i)}return s},p.FG61=function(t,e){for(var i=[],s=1;s<=t;s++)for(var o=1;o<12;o++){var r=this.FL56(this.FK26(s,o));for(var n in r){if("-1"==(h=this.isInList(r[n].key,i))){var a={key:r[n].key,value:r[n].value};i.push(a)}else i[h].value=Number(i[h].value)+Number(r[n].value)}}if(p.polyMax<=t)return i;for(s=1;s<e;s++){r=this.FL56(this.FK26(t+1,s));for(var o in r){var h;if("-1"==(h=this.isInList(r[o].key,i))){a={key:r[o].key,value:r[o].value};i.push(a)}else i[h].value=Number(i[h].value)+Number(r[o].value)}}return i},p.FK26=function(t,e){return p.poly[t]["attr"+e]},p.FL55=function(t,e){void 0===e&&(e=1);var i="";for(var s in t)"0"!=s&&(i+=";"),i+=t[s].key+":"+Number(t[s].value)*e;return i},p.FL56=function(t){var e=[];if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":"),r={key:o[0],value:o[1]};e.push(r)}return e},p.isInList=function(t,e){for(var i in e)if(e[i].key==t)return i;return"-1"},p.FG62=function(t){var e=O4.getLv(),i=parseInt(p.gIV("openLv")),s=parseInt(p.gIV("openDay"));if(e<i){K18.init.commonDesc1.value;return t&&P18.sDP(O3.tr(3370,s,i)),!1}return!(App.CM.gtM(O6.B43).serOpenDay+1<s)||(t&&P18.sDP(O3.tr(3370,s,i)),!1)},p}();__reflect(TE10.prototype,"TE10");var TG77=function(i){function t(t){var e=i.call(this,t)||this;return e.scrollerH=0,e.useGoldForwardWomenView=!1,e.useGoldForwardWomenTacticalView=!1,e.useGoldForwardWomenGeneralView=!1,e.useGoldForFavor=!1,e}return __extends(t,i),t.prototype.ZD48=function(t){if(t)switch(t.sys){case E5.A5:null!=this.pointFmData?this.pointFmData.initActData(t):this.pointFmData=new RevealVo(t);break;case E5.A3:null!=this.pointGmData?this.pointGmData.initActData(t):this.pointGmData=new RevealVo(t)}},t.prototype.updateRed=function(){switch(App.CM.gtM(O6.B95).riseConst){case E5.A5:this.ZC6();break;case E5.A3:this.ZC83();break;default:this.ZC6(),this.ZC83()}},t.prototype.ZY36=function(t){this.ps=t.ps,this.war=t.war,this.fm=t.fm,this.fmn=t.fmn,this.fmho=t.fmho,this.gn=t.gn,this.gnn=t.gnn,this.gnho=t.gnho,this.pv=t.pv,this.fm&&(this.lastFmLv=this.fm.t),this.gn&&(this.lastGnLv=this.gn.t)},t.prototype.ZY37=function(t){this.war=t.war},t.prototype.has=function(t){for(var e=0,i=this.ps;e<i.length;e++){if(i[e].id==t)return!0}return!1},t.prototype.ZP85=function(t){for(var e=t.p,i=-1,s=0;s<this.ps.length;s++){if(this.ps[s].id==e.id){i=s;break}}-1!=i?this.ps[i]=e:this.ps.push(e)},t.prototype.ZJ58=function(t){for(var e=-1,i=0;i<this.ps.length;i++){if(this.ps[i].id==t.pid){e=i;break}}-1!=e&&(this.ps[e].sv={lv:t.lv,pos:t.pos})},t.prototype.ZF96=function(t){this.pv.lv=t.lv,this.pv.pos=t.pos},t.prototype.getWomenData=function(t){for(var e=void 0,i=0;i<this.ps.length;i++){var s=this.ps[i];if(s.id==t){e=s;break}}return e},t.prototype.ZF97=function(t){var e=t.fm;e&&(this.fm=e,(null==this.preFmLv||this.fm.t>this.preFmLv)&&(TF13.FE57(E5.A5),this.preFmLv=this.fm.t))},t.prototype.ZJ59=function(t){var e=t.gn;e&&(this.gn=e,(null==this.preGnLv||this.gn.t>this.preGnLv)&&(TF13.FE57(E5.A3),this.preGnLv=this.gn.t))},t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t.prototype.canPithcIn=function(){return this.war.length<2&&1<this.ps.length},t.prototype.ZE56=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=M11.gIV("womanLv");if(t.l<e)return!1;if(this.canPithcIn())return!0;for(var i=0,s=this.ps;i<s.length;i++){var o=s[i];if(THH23.FC3(o.lv))return!0}var r=this.ps.map(function(t){return t.id});for(var n in M11.base)if(!(0<r.indexOf(parseInt(n)))){var a=M11.base[n];if(0<N12.giC(a.item))return!0}return!1},t.prototype.ZD47=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=M11.gIV("womanLv");if(t.l<e)return!1;if(this.canPithcIn())return!0;for(var i=0,s=this.ps;i<s.length;i++){var o=s[i].sk[0];if(THH23.FC68(o))return!0}return!1},t.prototype.ZC6=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=M11.gIV("fmLv");if(e.l<i)return t;if(this.redFmNum=this.getRedFmNum(),this.redFmNum)return t=!0;var s=K18.init.attrUseMax.value,o=M11.gIV("fmAttrItem"),r=N12.giC(o);if(0<r&&this.fmn<s)return t=!0;var n=M11.gIV("fmUpItem");r=N12.giC(n);var a=M11.FF54(),h=this.fm.t,p=THH23.FB11();if((0<r||p)&&h<a.level)return t=!0;var l=THH23.FJ9(1);if(l&&0!=l.length)for(var c=0;c<l.length;c++){var u=l[c];if(0==u.have&&1==u.canGet)return t=!0}var d=App.CM.gtM(O6.C3).fm.sk;for(c=0;c<d.length;c++){var v=d[c],f=v.si,g=v.sl;if(g!=M11.FHH74(f)){var m=M11.getSkill(f,g),y=m.cost.split(":")[0],A=m.cost.split(":")[1];if(y=Number(y),(A=Number(A))<=N12.giC(y))return t=!0}}var b=M11.gIV("fmAdvItem"),T=M11.gIV("timeItem1");r=N12.giC(b)+N12.giC(T);var C=M11.FI35(h),w=e.co;if(r>=C.elixir&&w>=C.cash&&h<a.level)return t=!0;var O=App.CM.gtM(O6.B98),M=O.formaEquip,_=O.formaEquipNotWear;if(M.length<=0){if(_.length<=0)return t;if(THH23.FB40(_,1).maxScore)return t=!0;if(THH23.FB40(_,2).maxScore)return t=!0;if(THH23.FB40(_,3).maxScore)return t=!0;if(THH23.FB40(_,4).maxScore)return t=!0}else{if(_.length<=0)return t;var F=THH23.FB40(M,1);if(THH23.FB40(_,1).maxScore>F.maxScore)return t=!0;var E=THH23.FB40(M,2);if(THH23.FB40(_,2).maxScore>E.maxScore)return t=!0;var P=THH23.FB40(M,3);if(THH23.FB40(_,3).maxScore>P.maxScore)return t=!0;var L=THH23.FB40(M,4);if(THH23.FB40(_,4).maxScore>L.maxScore)return t=!0}return t},t.prototype.ZC83=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=M11.gIV("generalLv");if(e.l<i)return t;if(this.redGmNum=this.getRedGmNum(),this.redGmNum)return t=!0;var s=K18.init.attrUseMax.value,o=M11.gIV("gnAttrItem"),r=N12.giC(o);if(0<r&&this.gnn<s)return t=!0;var n=M11.gIV("gnUpItem");r=N12.giC(n);var a=M11.FHH73(),h=this.gn.t,p=THH23.FB12();if((0<r||p)&&h<a.level)return t=!0;var l=THH23.FJ9(2);if(l&&0!=l.length)for(var c=0;c<l.length;c++){var u=l[c];if(0==u.have&&1==u.canGet)return t=!0}var d=App.CM.gtM(O6.C3).gn.sk;for(c=0;c<d.length;c++){var v=d[c],f=v.si,g=v.sl;if(g!=M11.FHH74(f)){var m=M11.getSkill(f,g),y=m.cost.split(":")[0],A=m.cost.split(":")[1];if(y=Number(y),(A=Number(A))<=N12.giC(y))return t=!0}}var b=M11.gIV("gnAdvItem"),T=M11.gIV("timeItem2");r=N12.giC(b)+N12.giC(T);var C=M11.FK75(h),w=e.co;if(r>=C.elixir&&w>=C.cash&&h<a.level)return t=!0;var O=App.CM.gtM(O6.B98),M=O.generalEquip,_=O.generalEquipNotWear;if(M.length<=0){if(_.length<=0)return t;if(THH23.FC71(_,1).maxScore)return t=!0;if(THH23.FC71(_,2).maxScore)return t=!0;if(THH23.FC71(_,3).maxScore)return t=!0;if(THH23.FC71(_,4).maxScore)return t=!0}else{if(_.length<=0)return t;var F=THH23.FC71(M,1);if(THH23.FC71(_,1).maxScore>F.maxScore)return t=!0;var E=THH23.FC71(M,2);if(THH23.FC71(_,2).maxScore>E.maxScore)return t=!0;var P=THH23.FC71(M,3);if(THH23.FC71(_,3).maxScore>P.maxScore)return t=!0;var L=THH23.FC71(M,4);if(THH23.FC71(_,4).maxScore>L.maxScore)return t}return t},t.prototype.getRedFmNum=function(){var t=0,e=this.fm.t;if(L3.advancedLv>e||!this.pointFmData)return t;var i=L3.FI89(this.pointFmData.lv);if(i.advancelv<0&&this.pointFmData.s==L3.starNum)return t;if(this.pointFmData&&L3.openLv<=O4.getLv())if(this.pointFmData.s!=L3.starNum){var s=N12.giC(parseInt(M11.init.fmAdvItem.value))+N12.giC(parseInt(M11.gIV("timeItem1"))),o=i.starcost.split(":"),r=N12.giC(parseInt(o[0]));t=s>=i.pillcost&&r>=parseInt(o[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var n=i.breakcost.split(":");t=N12.giC(parseInt(n[0]))>=parseInt(n[1])&&i.advancelv<=e?1:0}return t},t.prototype.getRedGmNum=function(){var t=0,e=this.gn.t;if(L3.advancedLv>e||!this.pointGmData)return t;var i=L3.FI89(this.pointGmData.lv);if(i.advancelv<0&&this.pointGmData.s==L3.starNum)return t;if(this.pointGmData&&L3.openLv<=O4.getLv())if(this.pointGmData.s!=L3.starNum){var s=N12.giC(parseInt(M11.init.gnAdvItem.value))+N12.giC(M11.gIV("timeItem2")),o=i.starcost.split(":"),r=N12.giC(parseInt(o[0]));t=s>=i.pillcost&&r>=parseInt(o[1])?1:0}else if(0<i.advancelv&&i.advancelv<=e){var n=i.breakcost.split(":");t=N12.giC(parseInt(n[0]))>=parseInt(n[1])&&i.advancelv<=e?1:0}return t},t.prototype.ZT82=function(){if(!THH23.FK27(!1))return 0;for(var t in this.ps){var e=this.ps[t],i=M11.FE46(e.fl),s=void 0;if(10==e.fs){if(!M11.FE46(e.fl+1))continue;s=i.advcost}else s=i.starcost;var o=M18.FL28(s,":");if(N12.giC(o[0])>=parseInt(o[1]))return 1}return 0},t.prototype.ZY38=function(){return TE10.FG62(!1)?this.godSIsRed()?1:this.gatSIsRed()?1:0:0},t.prototype.godSIsRed=function(){for(var t in this.ps){var e=this.ps[t];if(this.has(e.id)){var i=e.sv;if(this.ZT83(i.pos,i.lv))return 1}}return 0},t.prototype.ZT83=function(t,e){if(e>=TE10.godsoulMax)return!1;var i,s;if(7==t){var o=TE10.gIV("brokenitem");N12.gID(o);i=N12.giC(o),s=TE10.godsoul[e+1].broken}else{o=TE10.gIV("smeltingitem"),N12.gID(o);i=N12.giC(o),s=TE10.godsoul[e+1].cost}return s<=i},t.prototype.gatSIsRed=function(){var t,e=this.pv.lv,i=this.pv.pos;return e>=TE10.polyMax?0:(11==i?(t=TE10.gIV("polyid"),TE10.poly[e+1].cost2):(t=TE10.gIV("polyitem"),TE10.poly[e+1].cost))<=N12.giC(t)?1:0},t.prototype.ZT84=function(){var t=[],e=TE10.FG61(this.pv.lv,this.pv.pos);t.push(e);var i=Number(this.ZT76("239",e))+1;for(var s in this.ps)if(this.has(this.ps[s].id)){var o=TE10.FJ4(this.ps[s].sv.lv,this.ps[s].sv.pos,i);t.push(o)}var r=[];for(var s in t){o=t[s];for(var n in o){var a=this.isInList(o[n].key,r);if("-1"==a){var h={key:o[n].key,value:o[n].value};r.push(h)}else r[a].value=Number(r[a].value)+Number(o[n].value)}}return r},t.prototype.ZJ60=function(){var t=[];for(var e in this.ps)if(this.has(this.ps[e].id)){var i=TE10.FJ4(this.ps[e].sv.lv,this.ps[e].sv.pos);t.push(i)}var s=[];for(var e in t){i=t[e];for(var o in i){var r=this.isInList(i[o].key,s);if("-1"==r){var n={key:i[o].key,value:i[o].value};s.push(n)}else s[r].value=Number(s[r].value)+Number(i[o].value)}}return s},t.prototype.getGodSBFB=function(){var t=this.pv.lv,e=this.pv.pos,i=TE10.FG61(t,e);return Number(this.ZT76("239",i))},t.prototype.getWomenBFB=function(){var t=this.pv.lv,e=this.pv.pos,i=TE10.FG61(t,e);return Number(this.ZT76("238",i))},t.prototype.ZP86=function(){var t=this.ZJ60(),e=TE10.FL55(t);return Math.ceil(M10.gAG(e))},t.prototype.ZHH41=function(){var t=this.pv.lv,e=this.pv.pos,i=TE10.FG61(t,e),s=TE10.FL55(i),o=M10.gAG(s),r=M10.gAG(TE10.FL55(this.ZJ60()))*Number(this.ZT76("239",i)),n=M10.gAG(TE10.FL55(this.ZP88()))*Number(this.ZT76("238",i));return Math.ceil(o+r+n)},t.prototype.ZP87=function(t){void 0===t&&(t=1);var e=this.ps,i=[];if(e&&0<e.length)for(var s=0;s<e.length;s++){var o=e[s];if(this.has(o.id)){var r=THH23.FJ10(o.id);i.push(r)}}var n={101:{value:0,name:"攻击"},102:{value:0,name:"防御"},103:{value:0,name:"气血"}};for(var s in i){r=i[s];n[101].value+=Number(r[101].value),n[102].value+=Number(r[102].value),n[103].value+=Number(r[103].value)}return n},t.prototype.ZM47=function(){var t=this.ZP87(),e="101:"+t[101].value+";102:"+t[102].value+";103:"+t[103].value;return M10.gAG(e)},t.prototype.ZP88=function(t){void 0===t&&(t=1);var e=this.ps,i={};if(e&&0<e.length)for(var s=0;s<e.length;s++){var o=e[s],r=THH23.FF56(o.id,o.lv,o.exp);i=THH23.FJ8(r,i)}var n=[];for(var s in i){var a={key:s,value:Number(i[s])*Number(t)};n.push(a)}return n},t.prototype.ZT76=function(t,e){for(var i in e)if(e[i].key==t)return e[i].value;return 0},t.prototype.isInList=function(t,e){for(var i in e)if(e[i].key==t)return i;return"-1"},t}(TG79);__reflect(TG77.prototype,"TG77");var TG78=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.Y1,e.ZY39,e),e.rSM(P4.G36,e.GI34,e),e}return __extends(t,i),t.prototype.ZY39=function(t){this.apF(N2.A53,t)},t.prototype.GV38=function(){var s=this;return new Promise(function(e,t){var i={type:P4.V41,body:{}};s.rSMO(P4.V42,function(t){s.apF(N2.A50,t),e("加载巾帼数据完成")},s),s.sSM(i)})},t.prototype.ZT85=function(t){var e={type:P4.S95,body:{pid:t}};this.rSMO(P4.S96,this.ZT86,this),this.sSM(e)},t.prototype.ZT86=function(t){this.apF(N2.A26,t)},t.prototype.GP95=function(t,e){var i={type:P4.R45,body:{pid:t,t:e}};this.rSMO(P4.R46,this.GP96,this),this.sSM(i)},t.prototype.GP96=function(t){this.apF(N2.A28,t)},t.prototype.GP97=function(t,e){var i={type:P4.R47,body:{pid:t,sid:e}};this.rSMO(P4.R48,this.GP98,this),this.sSM(i)},t.prototype.GP98=function(t){this.apF(N2.A22,t)},t.prototype.GV40=function(t){var e={type:P4.N73,body:{t:t}};this.rSMO(P4.N74,this.GV41,this),this.sSM(e)},t.prototype.GV41=function(t){this.apF(N2.A44,t)},t.prototype.ZP89=function(){var t={type:P4.R49,body:{}};this.rSMO(P4.R50,this.ZP90,this),this.sSM(t)},t.prototype.ZP90=function(t){this.apF(N2.A30,t)},t.prototype.GM2=function(t){var e={type:P4.N75,body:{sid:t}};this.rSMO(P4.N76,this.GM3,this),this.sSM(e)},t.prototype.GM3=function(t){this.apF(N2.A12,t)},t.prototype.ZM48=function(){var t={type:P4.L80,body:{}};this.rSMO(P4.L81,this.GI28,this),this.sSM(t)},t.prototype.GI28=function(t){this.apF(N2.A4,t)},t.prototype.GR76=function(t){var e={type:P4.S97,body:{skinId:t}};this.rSMO(P4.S98,this.GR77,this),this.sSM(e)},t.prototype.GR77=function(t){this.apF(N2.A32,t)},t.prototype.GI25=function(t){var e={type:P4.J75,body:{num:t}};this.rSMO(P4.J76,this.GI26,this),this.sSM(e)},t.prototype.GI26=function(t){this.apF(N2.A8,t)},t.prototype.ZJ61=function(t){var e={type:P4.N77,body:{t:t}};this.rSMO(P4.N78,this.ZJ62,this),this.sSM(e)},t.prototype.ZJ62=function(t){this.apF(N2.A16,t)},t.prototype.ZP91=function(){var t={type:P4.R51,body:{}};this.rSMO(P4.R52,this.ZP92,this),this.sSM(t)},t.prototype.ZP92=function(t){this.apF(N2.A24,t)},t.prototype.GM6=function(t){var e={type:P4.N79,body:{sid:t}};this.rSMO(P4.N80,this.GM7,this),this.sSM(e)},t.prototype.GM7=function(t){this.apF(N2.A18,t)},t.prototype.GI31=function(){var t={type:P4.L82,body:{}};this.rSMO(P4.L83,this.GI32,this),this.sSM(t)},t.prototype.GI32=function(t){this.apF(N2.A14,t)},t.prototype.GR78=function(t){var e={type:P4.S99,body:{skinId:t}};this.rSMO(P4.T1,this.GR79,this),this.sSM(e)},t.prototype.GR79=function(t){this.apF(N2.A34,t)},t.prototype.GI29=function(t){var e={type:P4.J77,body:{num:t}};this.rSMO(P4.J78,this.GI30,this),this.sSM(e)},t.prototype.GI30=function(t){this.apF(N2.A10,t)},t.prototype.GM4=function(t,e){var i={type:P4.N81,body:{t:t,tid:e}},s={};s.t=t,this.rSMO(P4.N82,this.GM5,this,s),this.sSM(i)},t.prototype.GM5=function(t,e){var i=e.t;this.apF(N2.A20,t,i)},t.prototype.GT82=function(t,e){var i={type:P4.U32,body:{pid:t,pos:e}};this.rSMO(P4.U33,this.GT83,this),this.sSM(i)},t.prototype.GT83=function(t){this.apF(N2.A46,t)},t.prototype.GI33=function(t,e){var i={type:P4.G35,body:{pid:t,type:e}};this.sSM(i)},t.prototype.GI34=function(t){this.apF(N2.A2,t)},t.prototype.GP99=function(t){var e={type:P4.J79,body:{pid:t}};this.rSMO(P4.J80,this.GQ1,this),this.sSM(e)},t.prototype.GQ1=function(t){this.apF(N2.A6,t)},t.prototype.GR81=function(t,e){var i={type:P4.L84,body:{pid:t,type:e}};this.rSMO(P4.L85,this.GR80,this),this.sSM(i)},t.prototype.GR80=function(t){this.apF(N2.A36,t)},t.prototype.GR83=function(){var t={type:P4.L86,body:{}};this.rSMO(P4.L87,this.GR82,this),this.sSM(t)},t.prototype.GR82=function(t){this.apF(N2.A38,t)},t}(TG80);__reflect(TG78.prototype,"TG78");var THH23=function(){function D(){}return D.FC68=function(t){var e=!1;if(t.sl>=M11.FD48(t.si))return e;var i=M11.FJ2(t.si,t.sl),s=P7.str2kv1(i.cost),o=s.k;return s.v<=N12.giC(o)&&(e=!0),e},D.FC3=function(t){var e=!1;if(t>=M11.FHH72())return e;var i=M11.FL18(t),s=M11.gIV("womanAdvItem"),o=N12.giC(s),r=App.CM.gtM(O6.B82).avatarInfo.co;return o>=i.elixir&&r>=i.cash&&(e=!0),e},D.FA52=function(){return App.CM.gtM(O6.C3).canPithcIn()},D.FJ5=function(){var t={},e=App.CM.gtM(O6.C3),i=e.war;if(!i||i.length<=0)return t;var s=e.ps,o={};if(s&&0<s.length)for(var r=0;r<s.length;r++){o[(n=s[r]).id]=n}for(r=0;r<i.length;r++){var n,a=(n=i[r]).k,h=n.v,p=o[h],l=M11.getWomen(h),c={};c.id=h,c.name=l.name,c.lv=p.lv,c.sk=p.sk[0],c.bg=D.FJ7(l.quality),c.icon=l.icon,c.color=D.FF55(l.quality),t[a]=c}return t},D.isActivityWomenByItemId=function(t){var e=App.CM.gtM(O6.C3);if(e.ps){for(var i=void 0,s=0,o=M11.FK24();s<o.length;s++){var r=o[s];if(r.item===t){i=r.id;break}}for(var n=0,a=e.ps;n<a.length;n++){if(a[n].id===i)return!0}}return!1},D.FJ6=function(t,e){var i=new Array,s=App.CM.gtM(O6.C3),o=s.ps,r={};if(o&&0<o.length)for(var n=0;n<o.length;n++){r[(p=o[n]).id]=p}var a=s.war,h={};if(a&&0<a.length)for(n=0;n<a.length;n++){var p;h[(p=a[n]).v]=p.k}var l=M11.FK24();if(!l||0==l.length)return i;for(n=0;n<l.length;n++){var c=l[n],u=r[c.id],d={};if(d.viewName=e,d.id=c.id,d.showid=c.showid,d.model=c.model,d.quality=c.quality,u){d.have=1,d.exp=u.exp,d.lv=u.lv,d.sk=u.sk[0],d.jie=O3.tr(5738,u.lv),d.fStar=u.fs,d.fLv=u.fl,d.sv={lv:u.sv.lv,pos:u.sv.pos};var v=d.sk.sl;d.sl=v,d.star1=1<=v?"v1_img_star1_png":"",d.star2=2<=v?"v1_img_star1_png":"",d.star3=3<=v?"v1_img_star1_png":""}else{if("WomenFavorableIconList"==e)continue;d.have=0;var f={},g=M11.FJ2(c.atkskill);f.si=g.atkskill,f.sl=g.starlv,d.sk=f,d.sl=g.starlv}if(d.texiao="v1_img_texiao2_png",d.bg=D.FJ7(c.quality),d.select=t&&d.id==t.id?1:0,h[c.id]){var m=!1;"WomenView"==d.viewName?m=D.FC3(u.lv):"WomenUpStarView"==d.viewName?m=D.FC68(d.sk):"WomenGatSoulView"==d.viewName&&(m=s.ZT83(d.sv.pos,d.sv.lv)),d.point=m?"v1_img_hongdiantishi_png":"",d.fight="v1_img_zuijin_png",d.battleState=1}else{if(1==d.have){m=!1;"WomenView"==d.viewName?m=D.FC3(u.lv)||D.FA52():"WomenUpStarView"==d.viewName?m=D.FC68(d.sk)||D.FA52():"WomenGatSoulView"==d.viewName&&(m=s.ZT83(d.sv.pos,d.sv.lv)),d.point=m?"v1_img_hongdiantishi_png":""}else{var y=N12.giC(c.item);d.point=1<=y?"v1_img_hongdiantishi_png":""}d.fight="",d.battleState=0}d.name=c.name,d.gainway=c.gainway,d.showid=c.showid,d.item=c.item,d.color=D.FF55(c.quality),d.fname=M18.FG71(O5.FD52(c.name,c.quality,1,!0)),d.icon=RES.hasRes(c.icon)?c.icon:"",i.push(d)}for(var A=1,b=0,T=i=i.sort(D.FL20);b<T.length;b++){T[b].index=A,A++}return t||(i[0].select=1),i},D.FD49=function(){return D.FJ6(void 0,"WomenView")[0]},D.FL20=function(t,e){if(t.have||e.have){if(!t.have&&0<N12.giC(t.item))return-1;if(!e.have&&0<N12.giC(e.item))return 1}else{if(N12.giC(t.item)!=N12.giC(e.item))return N12.giC(e.item)-N12.giC(t.item);if(0<N12.giC(t.item))return t.quality!=e.quality?t.quality-e.quality:t.lv!=e.lv?t.lv-e.lv:t.id-e.id}return t.have&&e.have?t.battleState!=e.battleState?e.battleState-t.battleState:t.quality!=e.quality?e.quality-t.quality:t.lv!=e.lv?e.lv-t.lv:t.id-e.id:t.have||e.have?t.have?-1:1:t.quality!=e.quality?t.quality-e.quality:t.lv!=e.lv?t.lv-e.lv:t.id-e.id},D.FJ7=function(t){var e="v1_img_kuang_bai_png";switch(t){case 1:e="v1_img_kuang_bai_png";break;case 2:e="v1_img_kuang_lv_png";break;case 3:e="v1_img_kuang_lan_png";break;case 4:e="v1_img_kuang_zi_png";break;case 5:e="v1_img_kuang_cheng_png";break;case 6:e="v1_img_kuang_hong_png";break;case 7:e=""}return e},D.FF55=function(t){return O5.FA77(t)},D.FF56=function(t,e,i){var s={},o=M11.getWomen(t);if(!o)return s;var r=o.base;if(s=D.FI85(r,s),null==e||null==e)return s;for(var n=M11.gIV("womanAdvExp"),a=0;a<=e;a++){var h=M11.FL18(a);if(h){var p=h.baseattr;s=D.FI85(p,s);var l=h.addattr;s=D.FI85(l,s,a==e?i/n:h.exp/n)}}return s},D.FI85=function(t,e,i){if(void 0===i&&(i=1),!t||i<=0)return e;for(var s=t.split(";"),o=0;o<s.length;o++){var r=Number(s[o].split(":")[0]),n=Number(s[o].split(":")[1])*i;e[r]?e[r]=e[r]+n:e[r]=n}return e},D.FC69=function(){var t=0,e=App.CM.gtM(O6.C3).ps;if(!e||0==e.length)return t;for(var i=0;i<e.length;i++){t+=e[i].lv}return t},D.FL92=function(t){var e={};if(!t)return e;for(var i=t.split(";"),s=0;s<i.length;s++){var o=Number(i[s].split(":")[0]),r=Number(i[s].split(":")[1]);e[o]?e[o]=e[o]+r:e[o]=r}return e},D.FJ8=function(t,e){if(!t||!e)return e;for(var i in t){var s=i,o=t[i];e[s]?e[s]=e[s]+o:e[s]=o}return e},D.FE48=function(){return M11.FF54().skillid.split(",")},D.FC70=function(){return M11.FHH73().skillid.split(",")},D.FC4=function(t){var e=void 0;switch(t){case 1:e=M11.gIV("genSkillName1");break;case 2:e=M11.gIV("genSkillName2");break;case 3:e=M11.gIV("genSkillName3");break;case 4:e=M11.gIV("genSkillName4")}return e},D.FD50=function(t){var e=void 0;switch(t){case 1:e=M11.gIV("forSkillName1");break;case 2:e=M11.gIV("forSkillName2");break;case 3:e=M11.gIV("forSkillName3");break;case 4:e=M11.gIV("forSkillName4")}return e},D.FHH77=function(t,e){var i=void 0;return t&&e&&(i[t]=e[t]),i},D.FJ9=function(t){var e=new Array;if(!t||!M11.award)return e;var i,s,o=App.CM.gtM(O6.C3);for(var r in 1==t?(i=o.fmho,s=o.fm):2==t&&(i=o.gnho,s=o.gn),M11.award){var n=M11.award[r];if(t==n.type){var a={};a.tid=n.tid,a.type=n.type,a.reward=n.award,a.award=n.award,-1!=i.indexOf(a.tid)?a.have=1:a.have=0,s&&s.t>=a.tid?a.canGet=1:a.canGet=0,e.push(a)}}return e=e.sort(D.ZM49)},D.ZM49=function(t,e){return t.have<e.have?-1:t.have>e.have?1:0},D.getAward=function(t,e){var i=void 0;if(!t||!e)return i;var s=t.split(";");return s&&0!=s.length?i=s[e-1]:i},D.FA6=function(t,e){var i=!1;if(!t||0==t.length)return i;for(var s=App.CM.gtM(O6.C3).fm,o=0;o<t.length;o++){var r=t[o],n=M10.FI35(r.i);if(n.pos==e&&n.level<=s.t){i=!0;break}}return i},D.FA11=function(t,e){var i=!1;if(!t||0==t.length)return i;for(var s=App.CM.gtM(O6.C3).gn,o=0;o<t.length;o++){var r=t[o],n=M10.FK75(r.i);if(n.pos==e&&n.level<=s.t){i=!0;break}}return i},D.FB40=function(t,e){var i=void 0;if(!t||0==t.length)return i;i={};for(var s,o=App.CM.gtM(O6.C3).fm.t,r=0,n=0;n<t.length;n++){var a=t[n],h=M10.FI35(a.i);if(!(h.level>o)&&h.pos==e){var p=M10.getPower(a.i.toString());r<p&&(r=p,s=h)}}return i.maxScore=r,i.maxEquip=s,i},D.FC71=function(t,e){var i=void 0;if(!t||0==t.length)return i;i={};for(var s,o=App.CM.gtM(O6.C3).gn.t,r=0,n=0;n<t.length;n++){var a=t[n],h=M10.FK75(a.i);if(!(h.level>o)&&h.pos==e){var p=M10.getPower(a.i.toString());r<p&&(r=p,s=h)}}return i.maxScore=r,i.maxEquip=s,i},D.FA75=function(t,e){for(var i={},s=M11.gIV("gnAdvExp"),o=1;o<=t;o++){var r=M11.FK75(o);if(r){var n=r.baseattr;i=D.FI85(n,i);var a=r.addattr;i=D.FI85(a,i,o==t?e/s:r.exp/s)}}var h=P7.FA54(E5.A3);for(var p in i){var l=Number(i[p])*h;i[p]=Math.floor(i[p]+l)}return i},D.FB41=function(t,e){for(var i={},s=M11.gIV("fmAdvExp"),o=1;o<=t;o++){var r=M11.FI35(o);if(r){var n=r.baseattr;i=D.FI85(n,i);var a=r.addattr;i=D.FI85(a,i,o==t?e/s:r.exp/s)}}var h=P7.FA54(E5.A5);for(var p in i){var l=Number(i[p])*h;i[p]=Math.floor(i[p]+l)}return i},D.FB42=function(){var t={},e=App.CM.gtM(O6.B98).formaEquip;if(!e||0==e.length)return t;for(var i=0;i<e.length;i++){var s=e[i],o=M10.FI35(s.i),r=D.FL92(o.attr);if(t=D.FJ8(r,t),0<o.addlevel){var n=D.FL92(o.addattr);for(var a in n)n[a]=n[a]*o.addlevel;t=D.FJ8(n,t)}}return t},D.FA76=function(){var t={},e=App.CM.gtM(O6.B98).generalEquip;if(!e||0==e.length)return t;for(var i=0;i<e.length;i++){var s=e[i],o=M10.FK75(s.i),r=D.FL92(o.attr);if(t=D.FJ8(r,t),0<o.addlevel){var n=D.FL92(o.addattr);for(var a in n)n[a]=n[a]*o.addlevel;t=D.FJ8(n,t)}}return t},D.FA53=function(t){var e=1;for(var i in M11.formation){var s=M11.formation[i];if(s.skillid)if(-1!=s.skillid.split(",").indexOf(t)){e=parseInt(i);break}}return e},D.FB10=function(t){var e=1;for(var i in M11.general){var s=M11.general[i];if(s.skillid)if(-1!=s.skillid.split(",").indexOf(t)){e=parseInt(i);break}}return e},D.FG63=function(t){var e={json:void 0,png:void 0};switch(t){case 1:e.json="tactical1_json",e.png="tactical1_png";break;case 2:e.json="tactical2_json",e.png="tactical2_png";break;case 3:e.json="tactical3_json",e.png="tactical3_png";break;case 4:e.json="tactical4_json",e.png="tactical4_png";break;case 5:e.json="tactical5_json",e.png="tactical5_png";break;case 6:e.json="tactical6_json",e.png="tactical6_png";break;case 7:e.json="tactical7_json",e.png="tactical7_png";break;case 8:e.json="tactical8_json",e.png="tactical8_png";break;case 9:e.json="tactical9_json",e.png="tactical9_png";break;case 10:e.json="tactical10_json",e.png="tactical10_png";break;case 11:e.json="tactical11_json",e.png="tactical11_png";break;case 12:e.json="tactical12_json",e.png="tactical12_png";break;case 13:e.json="tactical13_json",e.png="tactical13_png";break;case 14:e.json="tactical14_json",e.png="tactical14_png";break;case 15:e.json="tactical15_json",e.png="tactical15_png"}return e},D.FB11=function(){var t=!1,e=M11.gIV("expItem1"),i=App.CM.gtM(O6.C3),s=i.fm;if(!e&&-1==M11.base[i.fm.t+""].exp)return t;for(var o=0,r=e.split(";");o<r.length;o++){var n=r[o];if(Number(n.split(":")[0])==s.t){var a=Number(n.split(":")[1]);if(t=0<N12.giC(a))break}}return t},D.FB12=function(){var t=!1,e=M11.gIV("expItem2"),i=App.CM.gtM(O6.C3),s=i.gn;if(!e&&-1==M11.base[i.gn.t+""].exp)return t;for(var o=0,r=e.split(";");o<r.length;o++){var n=r[o];if(Number(n.split(":")[0])==s.t){var a=Number(n.split(":")[1]);if(t=0<N12.giC(a))break}}return t},D.FF57=function(t){for(var e=t.war,i=void 0,s=0,o=e;s<o.length;s++){if(1==(a=o[s]).k){i=a.v;break}}if(!i)for(var r=0,n=e;r<n.length;r++){var a;if(2==(a=n[r]).k){i=a.v;break}}var h=M11.getWomen(i);return h||(h=D.FD49()),h},D.FE49=function(){var t=M11.gIV("womanLv"),e=M11.gIV("fmLv"),i=M11.gIV("generalLv");if(O4.getLv()<t)return 0;var s=0,o=0,r=App.CM.gtM(O6.C3),n=r.ps,a={};if(n&&0<n.length)for(var h=0;h<n.length;h++){var p=n[h],l=D.FF56(p.id,p.lv,p.exp);a=D.FJ8(l,a)}var c=D.FC69(),u=M11.FJ3(c),d={};u&&u.attr&&(d=D.FL92(u.attr)),a=D.FJ8(d,a);var v=O4.getScore(a);if(O4.getLv()>=e){var f={},g=r.fm,m=g.sk,y={};for(h=0;h<m.length;h++){y[(E=m[h]).si]=E}var A=D.FB41(g.t,g.exp);f=D.FJ8(A,f);var b=D.FB42();f=D.FJ8(b,f);var T=r.fmn,C=M11.gIV("fmAttr"),w={};w=D.FI85(C,w,T),f=D.FJ8(w,f),s=O4.getScore(f)+this.FHH78(y)}if(O4.getLv()>=i){var O={},M=r.gn,_=M.sk,F={};for(h=0;h<_.length;h++){var E;F[(E=_[h]).si]=E}var P=D.FB41(M.t,M.exp);O=D.FJ8(P,O);var L=D.FA76();O=D.FJ8(L,O);var S=r.gnn,I=M11.gIV("gnAttr"),H={};H=D.FI85(I,H,S),O=D.FJ8(H,O),o=O4.getScore(O)+this.FG64(F)}return v+s+o},D.FD51=function(){var t=App.CM.gtM(O6.B82).avatarInfo,e=M11.gIV("womanLv");if(!(t.l<e)){var i=0,s=D.FJ5();return s[1]&&s[1].sk&&(i+=s[1].sk.sl),s[2]&&s[2].sk&&(i+=s[2].sk.sl),i}},D.FHH78=function(t){var e=D.FE48(),i=Number(e[0]),s=Number(e[1]),o=Number(e[2]),r=Number(e[3]),n=0;if(t[i]){var a=t[i].si,h=t[i].sl,p=M11.getSkill(a,h);p&&(n+=M10.gAG(p.attr))}if(t[s]){a=t[s].si,h=t[s].sl;var l=M11.getSkill(a,h);l&&(n+=M10.gAG(l.attr))}if(t[o]){a=t[o].si,h=t[o].sl;var c=M11.getSkill(a,h);c&&(n+=M10.gAG(c.attr))}if(t[r]){a=t[r].si,h=t[r].sl;var u=M11.getSkill(a,h);u&&(n+=M10.gAG(u.attr))}return n},D.FG64=function(t){var e=D.FC70(),i=Number(e[0]),s=Number(e[1]),o=Number(e[2]),r=Number(e[3]),n=0;if(t[i]){var a=t[i].si,h=t[i].sl,p=M11.getSkill(a,h);p&&(n+=M10.gAG(p.attr))}if(t[s]){a=t[s].si,h=t[s].sl;var l=M11.getSkill(a,h);l&&(n+=M10.gAG(l.attr))}if(t[o]){a=t[o].si,h=t[o].sl;var c=M11.getSkill(a,h);c&&(n+=M10.gAG(c.attr))}if(t[r]){a=t[r].si,h=t[r].sl;var u=M11.getSkill(a,h);u&&(n+=M10.gAG(u.attr))}return n},D.FK27=function(t){var e=O4.getLv(),i=parseInt(M11.gIV("favorOpenLv"));if(e<i){if(t){var s=K18.init.commonDesc1.value;P18.sDP(M18.format(s,[i]))}return!1}var o=App.CM.gtM(O6.B85).ZD5(),r=parseInt(M11.gIV("skyPass"));if(o<r){if(t){var n=L1.FK72(r);P18.sDP(O3.tr(6227,n.number))}return!1}return!0},D.FHH79=function(t){var e=App.CM.gtM(O6.C3),i=0;for(var s in e.ps){var o=e.ps[s];if(o.id==t){for(var r=0;r<o.fl;r++){var n=M11.FE46(r);i+=10*M10.gAG(n.starattr),n.advattr&&(i+=M10.gAG(n.advattr))}var a=M11.FE46(o.fl);i+=M10.gAG(a.starattr)*o.fs,a.advattr&&(i+=M10.gAG(a.advattr))}}return i},D.FJ10=function(t){var p={},e=function(t,e){var i=M11.FE46(t),s=THH1.FI55(i.starattr);for(var o in s){var r=O4.FD72(parseInt(o)),n=parseInt(s[o]);null==p[o]&&(p[o]={value:0,name:r}),p[o].value=p[o].value+n*e}if(i.advattr){var a=THH1.FI55(i.advattr);for(var o in a){var h=O4.FD72(parseInt(o));n=parseInt(a[o]);null==p[o]&&(p[o]={value:0,name:h}),p[o].value=p[o].value+n}}},i=App.CM.gtM(O6.C3);for(var s in i.ps){var o=i.ps[s];if(o.id==t){for(var r=0;r<o.fl;r++)e(r,10);e(o.fl,o.fs)}}return p},D.colorMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],D.colorFlilter=new egret.ColorMatrixFilter(D.colorMatrix),D}();__reflect(THH23.prototype,"THH23");var ForwardReward=function(h){function t(){var t=h.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,h),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY31,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY31,this)},t.prototype.ZY31=function(){App.CM.apF(O6.C3,N2.A19,this.data.type,this.data.tid)},t.prototype.dataChanged=function(){if(h.prototype.dataChanged.call(this),this.lbGrade&&this.data.tid&&(this.lbGrade.text=1==this.data.type?O3.tr(3028,this.data.tid):O3.tr(3029,this.data.tid)),this.awardGp&&this.data.award){for(var t=this.data.award.split(";"),e=new eui.ArrayCollection,i=0;i<t.length;i++){var s=t[i].split(":")[0],o=t[i].split(":")[1],r=N12.gID(s),n={};n.data=r,n.ct=Number(o);var a={};a.itemData=n,a.isBottom=!1,e.addItem(a)}this.awardGp.dataProvider=e,this.awardGp.itemRenderer=ItemIcon}this.grpHave&&this.btnGet&&(1==this.data.have?(this.grpHave.visible=!0,this.btnGet.visible=!1):(this.grpHave.visible=!1,this.btnGet.visible=!0,1==this.data.canGet?(this.btnGet.filters=[],this.btnGet.imgNew.visible=!0,this.btnGet.touchEnabled=!0):(this.btnGet.filters=[THH23.colorFlilter],this.btnGet.imgNew.visible=!1,this.btnGet.touchEnabled=!1)))},t.prototype.partAdded=function(t,e){h.prototype.partAdded.call(this,t,e),this.data},t}(eui.ItemRenderer);__reflect(ForwardReward.prototype,"ForwardReward");var GatSoulItem=function(e){function t(){var t=e.call(this)||this;return t.skinName=GatSoulItemSkin,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.dataChanged=function(){this.data&&(this.icon.source=["jh_juhun1_png","jh_juhun2_png","jh_juhun3_png","jh_juhun4_png","jh_juhun5_png","jh_juhun6_png","jh_juhun7_png","jh_juhun8_png","jh_juhun9_png","jh_juhun10_png"][this.data.bg],P16.sGF(this.gBase,this.data.show))},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){},t.prototype.showPZTX=function(){App.THH33.aUE(this.gEffect,"iconSkill",-64,-66,1)},t}(eui.ItemRenderer);__reflect(GatSoulItem.prototype,"GatSoulItem");var GodSoulItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodSoulItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveStage,this)},t.prototype.dataChanged=function(){this.data&&(6==this.data.bg?(this.shwoTSTX(),this.icon.visible=!1):this.icon.source=["sh_qilv_png","sh_hun_png","sh_po_png","sh_jing_png","sh_qizi_png","sh_shen_png","sh_shenhun_png"][this.data.bg],this.dec.text="Lv:"+this.data.lv)},t.prototype.onAddToStage=function(){},t.prototype.onRemoveStage=function(){App.THH33.rEf(this.gEffect,"shxt_mc_d_1")},t.prototype.setLv=function(t){this.decGp.visible=!0,this.dec.text=O3.tr(525,t)},t.prototype.shwoTSTX=function(){App.THH33.aUE(this.gEffect,"shxt_mc_d_1",-5,-8,-1)},t.prototype.showCanTP=function(){App.THH33.aUE(this.gEffect0,"shxt_mc_tupo_2",-130,-130,-1),App.THH33.rEf(this.gEffect,"shxt_mc_d_1")},t.prototype.hideCanTP=function(){App.THH33.aUE(this.gEffect,"shxt_mc_d_1",-5,-8,-1),App.THH33.rEf(this.gEffect0,"shxt_mc_tupo_2")},t.prototype.showPZTX=function(){App.THH33.aUE(this.gEffect,"iconSkill",-this.gEffect.width/2-5,-this.gEffect.height/2-10,1)},t.prototype.showTPTx=function(){var t=this;App.THH33.aUE(this.gEffect0,"shxt_mc_tupo_3",-130,-130,1),this.gEffect.alpha=0,egret.Tween.get(this.gEffect).wait(450).call(function(){t.shwoTSTX()}).to({alpha:1},500).call(function(){App.THH33.rEf(t.gEffect0,"shxt_mc_tupo_2")}).pause()},t}(eui.ItemRenderer);__reflect(GodSoulItem.prototype,"GodSoulItem");var SkillDownGp=function(e){function t(){var t=e.call(this)||this;return t.skillBgSrc="v1_img_kuang_jineng_png",t.skillIconSrc="v1_fonts_yuliu_js_png",t.skinName="SkillDownGpSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onBegin=function(){TG40.playClickEffect()},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.setSl=function(t){this.sl.text=String(t)},t.prototype.ZP81=function(t){this.skillBg.source=THH1.FB74(t.starlv),this.skillIcon.source=t.icon,t.starlv<=3?(this.starGroup.visible=!0,this.labelGroup.visible=!1,3==t.starlv?(this.starGroup.width=65,this.skillStar1.x=0,this.skillStar2.x=20,this.skillStar3.x=40,this.skillStar1.verticalCenter=0,this.skillStar2.verticalCenter=0,this.skillStar3.verticalCenter=0,this.skillStar1.source="v1_img_star1_png",this.skillStar2.source="v1_img_star1_png",this.skillStar3.source="v1_img_star1_png"):2==t.starlv?(this.starGroup.width=45,this.skillStar1.x=0,this.skillStar2.x=20,this.skillStar1.verticalCenter=0,this.skillStar2.verticalCenter=0,this.skillStar1.source="v1_img_star1_png",this.skillStar2.source="v1_img_star1_png",this.skillStar3.source=""):1==t.starlv&&(this.starGroup.width=25,this.skillStar1.x=0,this.skillStar1.verticalCenter=0,this.skillStar1.source="v1_img_star1_png",this.skillStar2.source="",this.skillStar3.source="")):(this.starGroup.visible=!1,this.labelGroup.visible=!0,this.sl.text=String(t.starlv))},t}(eui.Button);__reflect(SkillDownGp.prototype,"SkillDownGp");var SkillGp=function(e){function t(){var t=e.call(this)||this;return t.skinName="SkillGpSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onBegin=function(){TG40.playClickEffect()},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.descGp.horizontalCenter=NaN,this.descGp.right=NaN},t.prototype.ZJ56=function(t,e,i){this.skillIcon.source=t,e[i]?(this.skillMask.visible=!1,this.skillLv.text=""+e[i].sl,this.skillLv.textColor=16777215,this.descGp.horizontalCenter=NaN,this.descGp.right=0):(this.skillMask.visible=!0,this.skillLv.text=O3.tr(5822,THH23.FA53(""+i)),this.skillLv.textColor=6483518,this.descGp.horizontalCenter=0,this.descGp.right=NaN)},t.prototype.ZHH40=function(t,e,i){this.skillIcon.source=t,e[i]?(this.skillMask.visible=!1,this.skillLv.text=""+e[i].sl,this.skillLv.textColor=16777215,this.descGp.horizontalCenter=NaN,this.descGp.right=0):(this.skillMask.visible=!0,this.skillLv.text=O3.tr(5822,THH23.FB10(""+i)),this.skillLv.textColor=6483518,this.descGp.horizontalCenter=0,this.descGp.right=NaN)},t.prototype.ZY32=function(t){this.skillRp.visible=t},t}(eui.Button);__reflect(SkillGp.prototype,"SkillGp");var SkillUpGp=function(e){function t(){var t=e.call(this)||this;return t.skillBgSrc="v1_img_kuang_jineng_png",t.skillIconSrc="v1_fonts_yuliu_js_png",t.skinName="SkillUpGpSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onRemoveStage=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBegin,this)},t.prototype.onBegin=function(){TG40.playClickEffect()},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.ZP81=function(t){var e=M11.FJ2(t.si,t.sl);this.skillBg.source=THH1.FB74(t.sl),this.skillIcon.source=e.icon,t.sl<=3?(this.starGroup.visible=!0,this.labelGroup.visible=!1,3==t.sl?(this.starGroup.width=65,this.skillStar1.x=0,this.skillStar2.x=20,this.skillStar3.x=40,this.skillStar1.verticalCenter=0,this.skillStar2.verticalCenter=0,this.skillStar3.verticalCenter=0,this.skillStar1.source="v1_img_star1_png",this.skillStar2.source="v1_img_star1_png",this.skillStar3.source="v1_img_star1_png"):2==t.sl?(this.starGroup.width=45,this.skillStar1.x=0,this.skillStar2.x=20,this.skillStar1.verticalCenter=0,this.skillStar2.verticalCenter=0,this.skillStar1.source="v1_img_star1_png",this.skillStar2.source="v1_img_star1_png",this.skillStar3.source=""):1==t.sl&&(this.starGroup.width=25,this.skillStar1.x=0,this.skillStar1.verticalCenter=0,this.skillStar1.source="v1_img_star1_png",this.skillStar2.source="",this.skillStar3.source="")):(this.starGroup.visible=!1,this.labelGroup.visible=!0,this.sl.text=String(t.sl))},t}(eui.Button);__reflect(SkillUpGp.prototype,"SkillUpGp");var WomenHead=function(i){function t(){var t=i.call(this)||this;return t.skinName=WomenHeadRender,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,i),t.prototype.open=function(){this.fightLb.text=O3.tr(4832),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectWomen,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectWomen,this)},t.prototype.selectWomen=function(){var t=App.CM.gtM(O6.C3);if(this.data.viewName&&"WomenView"==this.data.viewName)t.selectWomen=this.data,App.VM.open(O7.I79,this.data);else if(this.data.viewName&&"WomenUpStarView"==this.data.viewName)t.selectWomen=this.data,App.VM.open(O7.F84,this.data);else if(this.data.viewName&&"WomenGatSoulView"==this.data.viewName)if(t.has(this.data.id))t.selectWomen=this.data,App.VM.open(O7.F48,this.data);else{var e=O3.tr(7970);P18.sDP(e)}TG40.playClickEffect()},t.prototype.dataChanged=function(){i.prototype.dataChanged.call(this),this.fight&&(""==this.data.fight?this.fightLb.visible=!1:this.fightLb.visible=!0),this.icon&&(this.icon.source=this.data.icon),this.icon&&0==this.data.have?this.icon.filters=[THH23.colorFlilter]:this.icon.filters=[],this.texiao&&(1==this.data.select?this.texiao.visible=!0:this.texiao.visible=!1),this.data.sk.sl<=3?(this.imgGroup.visible=!0,this.labelGroup.visible=!1,this.star3&&""!=this.data.star3?(this.imgGroup.width=65,this.star1.x=0,this.star2.x=20,this.star3.x=40,this.star1.verticalCenter=0,this.star2.verticalCenter=0,this.star3.verticalCenter=0):this.star2&&""!=this.data.star2?(this.imgGroup.width=45,this.star1.x=0,this.star2.x=20,this.star1.verticalCenter=0,this.star2.verticalCenter=0):this.star1&&""!=this.data.star1&&(this.imgGroup.width=25,this.star1.x=0,this.star1.verticalCenter=0)):(this.imgGroup.visible=!1,this.labelGroup.visible=!0),"WomenGatSoulView"==this.data.viewName&&(this.data.sv?this.data.jie=O3.tr(5738,this.data.sv.lv):this.data.jie=O3.tr(5738,0))},t.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),this.data},t}(eui.ItemRenderer);__reflect(WomenHead.prototype,"WomenHead");var WomenDescView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenDescSkin",i}return __extends(t,s),t.prototype.open=function(t){if(s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),t==O7.I79||t==O7.F84){var e=M11.gIV("partnerlHelp");this.desc.textFlow=M18.FG71(e),this.title.textFlow=M18.HTP.parse(O3.tr(4954))}else if(t==O7.E1){e=M11.gIV("advanceHelp");this.desc.textFlow=M18.FG71(e),this.title.textFlow=M18.HTP.parse(O3.tr(4955))}else{e=M11.gIV("advanceHelp");this.desc.textFlow=M18.FG71(e),this.title.textFlow=M18.HTP.parse(O3.tr(4956))}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenDescView.prototype,"WomenDescView");var WomenFavorableIconList=function(e){function t(){var t=e.call(this)||this;return t.listData=[],t.skinName=HeroIconListSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t.initUI(),t}return __extends(t,e),t.prototype.open=function(){this.imgRedL.visible=!1,this.imgRedR.visible=!1;var t=this.listIcon.layout;this.listGap=t.gap,this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),this.listIcon.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.scIconList.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.scIconList.viewport=this.listIcon,this.scIconList.scrollPolicyV=eui.ScrollPolicy.OFF,this.createList();var e=App.CM.gtM(O6.C3);this.ZS64(e)},t.prototype.close=function(){this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZN74,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK80,this),this.listIcon.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.ZN17,this),this.scIconList.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.dataSource.removeAll()},t.prototype.initUI=function(){},t.prototype.createList=function(){this.dataSource=new eui.ArrayCollection(this.listData),this.listIcon.itemRenderer=WomenHead,this.listIcon.dataProvider=this.dataSource},t.prototype.ZS64=function(t){this.listData=[],null==this.curIndex?(this.curIndex=0,this.scIconList.viewport.scrollH=0):this.curIndex>=this.listData.length&&(this.curIndex=this.listData.length-1),this.listData=THH23.FJ6(this.curWomen,"WomenFavorableIconList");for(var e=0;e<this.listData.length;e++)if(1==this.listData[e].select){this.curWomen=this.listData[e];break}this.dataSource.replaceAll(this.listData)},t.prototype.ZN17=function(t){this.curIndex=t.itemIndex,this.curWomen=this.listData[this.curIndex],App.CM.gtM(O6.C3).notify("changeWomen")},t.prototype.ZK80=function(){if(!(this.listData.length<=5)){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor((this.listIcon.scrollH+5*t)/t);e>=this.listData.length-5&&(e=this.listData.length-5),this.listIcon.scrollH=e*t;Math.min(e+4,this.listData.length)}},t.prototype.ZN74=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.ceil((this.listIcon.scrollH-5*t)/t);e<0&&(e=0),this.listIcon.scrollH=e*t,this.listIcon.scrollH=e*t;Math.min(e+5,this.listData.length)},t.prototype.endScroller=function(){var t=(this.listIcon.contentWidth-(this.listData.length-1)*this.listGap)/this.listData.length+this.listGap,e=Math.floor(this.listIcon.scrollH/t);e<0&&(e=0);Math.min(e+5,this.listData.length)},t}(eui.Component);__reflect(WomenFavorableIconList.prototype,"WomenFavorableIconList");var WomenFavorableView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.skinName=WomenFavorableSkin,i}return __extends(t,r),t.prototype.initUI=function(){this.dlg.title=O3.tr(3004),this.cbAutoSmelt.label=O3.tr(5727),this.scImg.scrollPolicyH="OFF",this.scImg.scrollPolicyV="OFF"},t.prototype.childrenCreated=function(){r.prototype.childrenCreated.call(this),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(6211)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4867))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dlg.ZM69(this.closeSelf,this),this.btnCost.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCost,this),this.btnCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT75,this),this.topContent||(this.topContent=new WomenFavorableIconList,this.gpBase.addChild(this.topContent),this.topContent.top=-20,this.topContent.horizontalCenter=0);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.GY15()},t.prototype.closeSelf=function(){App.CM.apF(O6.C3,N2.A40)},t.prototype.GY15=function(){var t={id:this.topContent.curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.objBoss&&(this.objBoss.destory(),this.objBoss=null),this.objBoss=new FightGameObject,this.objBoss.setData(t,this.gpHero),this.objBoss.action=Action.Stand},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.prototype.uBM.call(this,t,e);var s=e[0];if(t instanceof TG77){switch(s){case"changeWomen":case P4.S96:this.topContent.ZS64(t),this.GY15()}this.ZHH3(t)}else{var o=App.CM.gtM(O6.C3);this.ZHH3(o)}},t.prototype.ZHH3=function(t){var e=this.topContent.curWomen;for(var i in t.ps){var s=t.ps[i];if(s.id==e.id){this.curWomen=s;break}}this.lbLv.text=this.curWomen.fl.toString(),this.lbPowerTop.text=THH23.FHH79(this.curWomen.id).toString();for(var o=0;o<this.curWomen.fs;o++){this.gpHeart.getChildAt(o).source="v1_img_taoxi_a_png"}for(o=this.curWomen.fs;o<10;o++){this.gpHeart.getChildAt(o).source="v1_img_taoxi_b_png"}var r,n=M11.FE46(this.curWomen.fl);10==this.curWomen.fs?(this.currentState="break",this.btnCost.label=O3.tr(3601),M11.FE46(this.curWomen.fl+1)?(this.btnCost.enabled=!0,P16.sGF(this.btnCost,!1),this.gpCost.visible=!0,this.lbMax.visible=!1):(this.gpCost.visible=!1,this.lbMax.visible=!0,this.lbMax.text=O3.tr(6229),this.btnCost.enabled=!1,P16.sGF(this.btnCost,!0)),r=n.advcost):(this.currentState="normal",this.btnCost.enabled=!0,P16.sGF(this.btnCost,!1),this.gpCost.visible=!0,this.lbMax.visible=!1,this.btnCost.label=O3.tr(6199),r=n.starcost);var a=M18.FL28(r,":"),h=N12.gID(a[0]),p=N12.giC(a[0]);this.imgGood.setData(h),this.imgGood.setImgSize({w:40,h:40}),this.lbCostGood.text=p+"/"+a[1],p>=parseInt(a[1])?(this.lbCostGood.textColor=_cc.dgreen,P7.FD53(this.btnCost,1)):(P7.FD53(this.btnCost,0),this.lbCostGood.textColor=_cc.red)},t.prototype.startUpgrade=function(t){var e,i=App.CM.gtM(O6.B82);App.CM.gtM(O6.C3);e=M11.FE46(this.curWomen.fl).starcost;var s,o=M18.FL28(e,":"),r=(N12.gID(o[0]),N12.giC(o[0])),n=parseInt(o[1]);if(n<=r&&(s=1),!s)if(this.cbAutoSmelt.selected){var a=N15.FB92(o[0]),h=N15.FA50(o[0]),p=i.avatarInfo.g;h*n<=i.avatarInfo.bg?s=2:t&&!s?a*n<=p?s=3:P7.FA78():this.ZX12()}else App.VM.open(O7.G87,o[0],n-r);s&&this.apF(N2.A1,this.curWomen.id,s)},t.prototype.ZX12=function(){var t=this,e=App.CM.gtM(O6.C3);if(e.useGoldForFavor)this.startUpgrade(!0);else{App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,function(){t.startUpgrade(!0),e.useGoldForFavor=!0})}},t.prototype.onClickCost=function(){if("break"==this.currentState){var t=M11.FE46(this.curWomen.fl);if(this.curWomen.lv>=t.advlv){var e=M18.FL28(t.advcost,":"),i=N12.giC(e[0]),s=parseInt(e[1]);s<=i?this.apF(N2.A5,this.curWomen.id):App.VM.open(O7.G87,e[0],s-i)}else P18.sDP(O3.tr(6226,t.advlv))}else this.startUpgrade(!1)},t.prototype.ZT75=function(){App.CM.apF(O6.C3,N2.A41,this.curWomen)},t.prototype.close=function(){this.btnCost.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCost,this),this.btnCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT75,this),this.objBoss.destory(),this.objBoss=null,this.gpHero.removeChildren(),this.gpBase.removeChild(this.topContent),this.topContent=null},t}(BaseEuiView);__reflect(WomenFavorableView.prototype,"WomenFavorableView");var WomenFavorAttrView=function(i){function t(t,e){return i.call(this,t,e)||this}return __extends(t,i),t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.open.apply(this,t),this.curData=t[0],this.gpHName.visible=!1,this.gpWName.visible=!0,this.GX5()},t.prototype.GX5=function(){var t=O3.tr(6208);this.lbPowerTop.text=THH23.FHH79(this.curData.id).toString(),this.setDlgInfo(N2.A42,t,!1,O6.C3),this.setListView();var e=M11.getWomen(this.curData.id);O5.FB13(this.lbName2,e.name,e.quality);var i=e.model;this.GY15(i)},t.prototype.setListView=function(){var t,e=[],i={};t=THH23.FJ10(this.curData.id),i.title=O3.tr(6209);var s=1;for(var o in t)i["value"+s]=O3.tr(1489,t[o].name,t[o].value),s++;e.push(i),this.dataSource.replaceAll(e)},t}(HeroInfoBaseView);__reflect(WomenFavorAttrView.prototype,"WomenFavorAttrView");var WomenForwardRewardView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenForwardRewardSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4957))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._type=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.tabBar.addEventListener(egret.Event.CHANGE,this.selectChange,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.GX5()},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=ForwardReward,this.menuArray=new eui.ArrayCollection,this.tabBar.dataProvider=this.menuArray;this.menuArray.addItem({text:"阵势",red:!1,type:1});this.menuArray.addItem({text:"将位",red:!1,type:2})},t.prototype.GX5=function(){var t;"formation"==this._type?(t=THH23.FJ9(1),this.tabBar.selectedIndex=0):"general"==this._type&&(t=THH23.FJ9(2),this.tabBar.selectedIndex=1),this._itemArray.replaceAll(t);for(var e=0;e<this.menuArray.length;e++){var i=this.menuArray.getItemAt(e);i.red=!1;for(var s=0,o=THH23.FJ9(i.type);s<o.length;s++){var r=o[s];if(0==r.have&&1==r.canGet){i.red=!0;break}}}this.menuArray.refresh(),this.endScroller()},t.prototype.endScroller=function(){this.itemScroller.validateNow(),this.upArrow.visible=!(this.itemScroller.viewport.scrollV<=0),this.itemScroller.viewport.contentHeight<=this.itemScroller.height?this.downArrow.visible=!1:this.itemScroller.height+this.itemScroller.viewport.scrollV>=this.itemScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.itemScroller.viewport.scrollV-700;this.itemScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.itemScroller.viewport.scrollV+700;t+this.itemScroller.height>=this.itemScroller.viewport.contentHeight?this.itemScroller.viewport.scrollV=this.itemScroller.viewport.contentHeight-this.itemScroller.height:this.itemScroller.viewport.scrollV=t,this.endScroller()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.GX5()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.tabBar.removeEventListener(egret.Event.CHANGE,this.selectChange,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this._type=null,this.menuArray.removeAll(),this._itemArray.removeAll()},t.prototype.selectChange=function(t){switch(t.currentTarget.selectedIndex){case 0:this._type="formation",this.GX5();break;case 1:this._type="general",this.GX5()}},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenForwardRewardView.prototype,"WomenForwardRewardView");var WomenGatSoulView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WomenGatSoulSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9],this.strLb.text=O3.tr(7965),this.strLb1.text=O3.tr(7967),this.strLb2.text=O3.tr(7973)},t.prototype.open=function(){var t=App.CM.gtM(O6.C3);this.ZHH3(t),this.lvBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lvBtnEvent,this),this.powerCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.ZT42(Action.Attack)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG77)switch(e){case P4.L87:this.ZHH3(t),this.showTXByIdx()}else t instanceof THH9&&this.upDateUIBy()},t.prototype.ZHH3=function(t){this.upDateUIBy(),this.showAttr(t)},t.prototype.close=function(){this.lvBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.lvBtnEvent,this),this.powerCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this)},t.prototype.ZT42=function(t){var e=App.CM.gtM(O6.C3),i=THH23.FF57(e);this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var s=t==Action.Attack?1:null,o={id:i.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:s};this.womenObj.setData(o,this.wGroup),this.womenObj.action=Action.Stand},t.prototype.upDateUIBy=function(){var t=App.CM.gtM(O6.C3).pv,e=t.lv,i=t.pos;this.starLb.text=O3.tr(7969,e),this.ZT77(i,e),this.ZT78(i,e),this.showPower(i,e),this.showCanTPTX(i)},t.prototype.showCanTPTX=function(t){"11"==t?App.THH33.aUE(this.cangEffect,"juhuntp_mc_q_1",0,0,-1):App.THH33.rEf(this.cangEffect,"juhuntp_mc_q_1")},t.prototype.showPower=function(t,e){var i=App.CM.gtM(O6.C3).ZHH41();this.powerLb.text=i.toString()},t.prototype.ZT76=function(t,e){for(var i in e)if(e[i].key==t)return e[i].value;return 0},t.prototype.ZT77=function(t,e){if(TE10.polyMax<=e)for(var i in this.items)this.items[i].data={show:!1,bg:i};else for(var i in this.items)t-1>Number(i)?this.items[i].data={show:!1,bg:i}:this.items[i].data={show:!0,bg:i},t-1==Number(i)?this.items[i].select.visible=!0:this.items[i].select.visible=!1},t.prototype.ZT78=function(t,e){if(e<TE10.polyMax){this.costGrp.visible=!0,this.lvBtn.horizontalCenter=196,P16.sGF(this.lvBtn,!1),this.lvBtn.enabled=!0;var i=void 0;this.costNum=11==t?(i=TE10.gIV("polyid"),TE10.poly[e+1].cost2):(i=TE10.gIV("polyitem"),TE10.poly[e+1].cost);var s=N12.gID(i);this.costCount=N12.giC(i),this.itemIcon.data={itemData:{data:s,ct:0},isBottom:!1},this.IconName.text=O3.tr(7966,s.name),this.needLb.text="*"+this.costNum,this.hasLb.text=""+this.costCount,this.costCount>=Number(this.costNum)?(this.hasLb.textColor=7716890,this.lvBtn.imgNew.visible=!0):(this.hasLb.textColor=14164514,this.lvBtn.imgNew.visible=!1),this.lvBtn.label=11==t?O3.tr(7961):O3.tr(7968)}else this.costGrp.visible=!1,this.lvBtn.horizontalCenter=0,P16.sGF(this.lvBtn,!0),this.lvBtn.enabled=!1,this.lvBtn.label=O3.tr(7962),this.lvBtn.imgNew.visible=!1},t.prototype.showTXByIdx=function(){var t=App.CM.gtM(O6.C3).pv;if(1==t.pos)this.showTPTX();else{var e=Number(t.pos)-2;this.items[e].showPZTX()}},t.prototype.showTPTX=function(){var t=this;App.THH33.aUE(this.tpgEffect,"juhuntp_mc_q_2",0,0,1),this.tpImg.alpha=.7,this.tpImg.visible=!0,egret.Tween.get(this.tpImg).to({alpha:.3},200).to({alpha:0},500).pause().call(function(){t.tpImg.visible=!1})},t.prototype.showAttr=function(t){var e=TE10.polyMax,i=t.pv;if(e>i.lv){var s=TE10.FK26(Number(i.lv)+1,i.pos),o=TE10.FG61(i.lv,i.pos);this.changeNextUI(s),this.ZY33(o)}else{o=TE10.FG61(i.lv,i.pos);this.ZY33(o),this.changeNextUI("")}},t.prototype.changeNextUI=function(t){var e=[101,102,103,110,108,109,238,239],i=TF35.FL56(t);for(var s in e)this["nextAttr"+s].visible=this["nextAttr"+s].includeInLayout=!1;for(var s in i){var o=i[s].k;for(var r in e)if(o==e[r]){this["nextAttr"+r].visible=this["nextAttr"+r].includeInLayout=!0;var n=o+":"+i[s].v,a=P7.FM6(P7.str2kv(n)).split(":");this["nextAttr"+r].text=a[0]+"+"+a[1];break}}},t.prototype.ZY33=function(t){var e=[101,102,103,110,108,109,238,239];for(var i in e){var s=P7.FM6(P7.str2kv(this.getVByList(e[i],t))).split(":");this["lastAttr"+i].text=s[0]+"+"+s[1]}},t.prototype.checkScore=function(){App.VM.open(O7.E65)},t.prototype.getVByList=function(t,e){var i=0;for(var s in e)if(e[s].key==t){i=e[s].value;break}return t+":"+i},t.prototype.lvBtnEvent=function(){if(this.costCount>=this.costNum)this.apF(N2.A37);else{var t=O3.tr(7972);P18.sDP(t)}},t}(BaseEuiView);__reflect(WomenGatSoulView.prototype,"WomenGatSoulView");var WomenGatSShowView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenScoreDetailSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.text=O3.tr(8636),this.lbTitle.text=O3.tr(8637),this.lbStr0.text=O3.tr(8638),this.lbStr2.text=O3.tr(8639),this.gatSGrp.visible=!0,this.nameGrp.visible=!1,this.gComs=[this.atk,this.def,this.hp],this.wComs=[this.atk0,this.def0,this.hp0],this.aComs=[this.attr0,this.attr1,this.attr2,this.attr3,this.attr4,this.attr5]},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.ZT42(Action.Attack)},t.prototype.ZT42=function(t){var e=App.CM.gtM(O6.C3),i=THH23.FF57(e);this.womenObj&&(this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var s=t==Action.Attack?1:null,o={id:i.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:s};this.womenObj.setData(o,this.womenRole),this.womenObj.action=Action.Stand},t.prototype.ZHH3=function(t){var e=t.ZHH41();this.scoreLb.text=String(e);var i=[101,102,103,110,108,109],s=TE10.FG61(t.pv.lv,t.pv.pos);for(var o in i){var r=P7.FM6(P7.str2kv(this.getVByList(i[o],s))).split(":"),n=O3.tr(4764,r[0],"：",r[1]);this.aComs[o].textFlow=M18.HTP.parser(n)}var a=[101,102,103],h=t.getWomenBFB(),p=t.ZP88(h);for(var o in a){var l=this.getStrByKL(a[o],p);this.wComs[o].textFlow=l}var c=t.getGodSBFB(),u=t.ZJ60();for(var o in a){l=this.getStrByKL(a[o],u,c);this.gComs[o].textFlow=l}},t.prototype.getStrByKL=function(t,e,i){void 0===i&&(i=1);var s=0;for(var o in e)if(e[o].key==t){s=e[o].value;break}var r=t+":"+s,n=P7.FM6(P7.str2kv(r)).split(":"),a=(n[0],Math.ceil(Number(n[1])),O3.tr(4764,n[0],"：",Math.ceil(Number(n[1])*i)));return M18.HTP.parser(a)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.getVByList=function(t,e){var i=0;for(var s in e)if(e[s].key==t){i=e[s].value;break}return t+":"+i},t}(BaseEuiView);__reflect(WomenGatSShowView.prototype,"WomenGatSShowView");var WomenGeneralSealScoreView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.curLevel=1,i.skinName="WomenGeneralSealScoreSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4958)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4959)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4960))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.lbTitle.text=O3.tr(3038),this.curLevel=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.GY15(i)},t.prototype.GY15=function(t){var e=M11.FK75(t.gn.t),i=O1.getSkin(e.skin),s=FightD.AV_RES_PATH+i.type+"/"+i.picture;FightRes.ZS35(this.imgGn,i.picture,s)},t.prototype.ZHH3=function(t){var e=t.gn,i=THH23.FA75(e.t,e.exp),s=avatar.AttributeKey,o=s.HP,r=i[o]?i[o]:0;this.activeHp.textFlow=M18.HTP.parse(O3.tr(4961,r));var n=s.ATK,a=i[n]?i[n]:0;this.activeAtk.textFlow=M18.HTP.parse(O3.tr(4962,a));var h=s.DEF,p=i[h]?i[h]:0;this.activeDef.textFlow=M18.HTP.parse(O3.tr(4963,p));var l=THH23.FA76(),c=l[o]?l[o]:0;this.equipHp.textFlow=M18.HTP.parse(O3.tr(4961,c));var u=l[n]?l[n]:0;this.equipAtk.textFlow=M18.HTP.parse(O3.tr(4962,u));var d=l[h]?l[h]:0;this.equipDef.textFlow=M18.HTP.parse(O3.tr(4963,d));var v=t.gnn,f=M11.gIV("gnAttr"),g={},m=(g=THH23.FI85(f,g,v))[o]?g[o]:0;this.danHp.textFlow=M18.HTP.parse(O3.tr(4961,m));var y=g[n]?g[n]:0;this.danAtk.textFlow=M18.HTP.parse(O3.tr(4962,y));var A=g[h]?g[h]:0;this.danDef.textFlow=M18.HTP.parse(O3.tr(4963,A));var b={};b=THH23.FJ8(i,b),b=THH23.FJ8(l,b),b=THH23.FJ8(g,b);var T=O4.getScore(b);this.scoreLb.text=String(T)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.curLevel=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenGeneralSealScoreView.prototype,"WomenGeneralSealScoreView");var WomenGeneralSealView=function(b){function t(t,e){var i=b.call(this,t,e)||this;return i._curLevel=1,i.isCanEquip=!1,i.skinName="WomenGeneralSealSkin",i}return __extends(t,b),t.prototype.initUI=function(){b.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4807)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4808)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4809)),this.lbShort.textFlow=M18.HTP.parse(O3.tr(4812)),this.autoBuy.label=O3.tr(4813),this.btnChange.label=O3.tr(4814),this.btnEquip.label=O3.tr(4815),this.upLevel.label=O3.tr(4816),this.autoUp.label=O3.tr(4817),this.stopAuto.label=O3.tr(4818)},t.prototype.initData=function(){b.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];b.prototype.open.call(this,t),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doMedicine,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.yulan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doHuanHua,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doEquipWear,this),this.btnAddOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.general1Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.general2Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.general3Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.general4Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.btnReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnReward,this),this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doStopAuto,this),this.equip1Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip2Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip3Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip4Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.autoBuy.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this);var i=App.CM.gtM(O6.C3),s=i.gn;this._curLevel=s.t,this.ZHH3(i),this.autoShow(),this.ZW34(),this.ZT42(Action.Attack),this.ZN25()},t.prototype.ZT42=function(t){var e=App.CM.gtM(O6.C3),i=THH23.FF57(e);if(this.modelId!=i.model){this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var s=t==Action.Attack?1:null,o={id:i.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:s};this.womenObj.setData(o,this.wGroup),this.womenObj.action=Action.Stand,this.modelId=i.model}this.GY15()},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.autoShow=function(){var t=M11.FF54();App.CM.gtM(O6.C3).gn.t>=t.level||THH23.FB12()&&this.aCF(O6.C18,O10.A5,J12.A1,!0)},t.prototype.GY15=function(){var t=M11.FK75(this._curLevel),e=O1.getSkin(t.skin);if(this.imgGn.source!=e.picture){var i=FightD.AV_RES_PATH+e.type+"/"+e.picture;FightRes.ZS35(this.imgGn,e.picture,i)}},t.prototype.uBM=function(t){for(var e=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];b.prototype.uBM.call(this,t,i),this.ZN25();var o=i[0];if(t instanceof TG77){var r=t.gn;if(o==P4.N78||o==P4.R52){var n=r.exp-this.processBar.value,a=r.t,h=200,p=r.exp;if(a>=M11.FHH73().level?(h=0,p=this.processBar.maximum):(h=n/this.processBar.maximum*1e3)<200&&(h=200),egret.Tween.get(this.processBar).to({value:p},h).call(function(){e.lbAddExp.visible=!0,e.lbAddExp.text="+"+n,egret.Tween.get(e.lbAddExp).to({top:-30},100).call(function(){e.lbAddExp.top=-15,e.lbAddExp.visible=!1})}),r.t>t.lastGnLv){var l=t.war,c=void 0;if(l&&0<l.length)for(var u=0,d=l;u<d.length;u++){var v=d[u];if(1==v.k){c=v.v;break}}else c=M11.init.partnerInit.value;var f=void 0;if(c){var g=M11.getWomen(c),m=M11.FK75(r.t);f={id:g.model,x:0,y:0,dir:Dir.br,objType:P13.A6,gi:m.skin}}var y={objData:f};App.VM.open(O7.G69,y),this._curLevel=r.t}}this.ZW34(),this.ZHH3(t),this.ZT42(Action.Stand)}else if(t instanceof THH9){var A=App.CM.gtM(O6.C3);this.ZHH3(A)}else if(t instanceof TG58){A=App.CM.gtM(O6.C3);this.ZHH3(A)}else if(t instanceof TG12){A=App.CM.gtM(O6.C3);this.ZHH3(A)}},t.prototype.ZHH3=function(t){this.updateDanRp(),this.ZN26(),this.ZT79(),this.ZY34(),this.ZHH40(),this.updateCost()},t.prototype.ZN26=function(){var t=M11.gIV("gnUpItem"),e=TG7.FA82(J12.A1,t);e||(e=THH23.FB12()),this.btnAddOne.$setVisible(e);var i=THH23.FB12();this.btnAddOne.bgStr=i?"v1_img_jingyandan_png":"v1_img_zhishengyijie_png"},t.prototype.updateDanRp=function(){var t=App.CM.gtM(O6.C3),e=K18.init.attrUseMax.value,i=M11.gIV("gnAttrItem");0<N12.giC(i)&&t.gnn<e?this.danRp.visible=!0:this.danRp.visible=!1},t.prototype.ZT79=function(){var t=M11.gIV("gnUpItem"),e=N12.giC(t),i=M11.FF54(),s=App.CM.gtM(O6.C3).gn;0<e&&s.t<i.level?this.btnAddOneRp.visible=!0:s.t>=i.level?this.btnAddOneRp.visible=!1:this.btnAddOneRp.visible=THH23.FB12();var o=!1,r=THH23.FJ9(2);if(r&&0!=r.length)for(var n=0;n<r.length;n++){var a=r[n];if(0==a.have&&1==a.canGet){o=!0;break}}else o=!1;this.btnRewardRp.visible=o;var h=s.sk,p={};for(n=0;n<h.length;n++){var l=h[n];p[l.si]=l}var c=THH23.FC70(),u=Number(c[0]),d=Number(c[1]),v=Number(c[2]),f=Number(c[3]);if(this.general1Skill.ZY32(!1),p[u]){var g=p[u].si;if((A=p[u].sl)<M11.FHH74(g)){this.skill1Conf=M11.getSkill(g,A);var m=this.skill1Conf.cost.split(":")[0],y=this.skill1Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.general1Skill.ZY32(!1):this.general1Skill.ZY32(!0)}}else this.general1Skill.ZY32(!1);if(this.general2Skill.ZY32(!1),p[d]){g=p[d].si;if((A=p[d].sl)<M11.FHH74(g)){this.skill2Conf=M11.getSkill(g,A);m=this.skill2Conf.cost.split(":")[0],y=this.skill2Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.general2Skill.ZY32(!1):this.general2Skill.ZY32(!0)}}else this.general2Skill.ZY32(!1);if(this.general3Skill.ZY32(!1),p[v]){g=p[v].si;if((A=p[v].sl)<M11.FHH74(g)){this.skill3Conf=M11.getSkill(g,A);m=this.skill3Conf.cost.split(":")[0],y=this.skill3Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.general3Skill.ZY32(!1):this.general3Skill.ZY32(!0)}}else this.general3Skill.ZY32(!1);if(this.general4Skill.ZY32(!1),p[f]){var A;g=p[f].si;if((A=p[f].sl)<M11.FHH74(g)){this.skill4Conf=M11.getSkill(g,A);m=this.skill4Conf.cost.split(":")[0],y=this.skill4Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.general4Skill.ZY32(!1):this.general4Skill.ZY32(!0)}}else this.general4Skill.ZY32(!1)},t.prototype.ZY34=function(){this._curGeneral=M11.FK75(this._curLevel);var t=App.CM.gtM(O6.C3),e=t.gn;this.generalLv.textFlow=M18.HTP.parse(O3.tr(4810,this._curGeneral.level)),e.k==this._curLevel?(this.btnChange.visible=!1,this.yihuanhua.visible=!0):(this.btnChange.visible=!0,this.yihuanhua.visible=!1),this._curLevel<=1?this.btnLeft.visible=!1:this.btnLeft.visible=!0;var i=M11.FHH73();if(this._curLevel>=i.level)this.btnRight.visible=!1,this.yulan.visible=!1,this.scoreTip.visible=!1;else if(e.t==this._curLevel?this.yulan.visible=!0:this.yulan.visible=!1,this.btnRight.visible=!0,e.t+1==this._curLevel){this.btnChange.visible=!1,this.btnRight.touchEnabled=!1,this.btnRight.filters=[THH23.colorFlilter],this.scoreTip.visible=!0;var s=this._curGeneral.baseattr,o=THH23.FL92(s),r=O4.getScore(o),n=M11.FK75(e.t),a=n.addattr,h=n.exp/M11.gIV("gnAdvExp"),p={};p=THH23.FI85(a,p,h);var l=M11.FK75(e.t+1).baseattr,c=THH23.FL92(l);p=THH23.FJ8(c,p);var u=O4.getScore(p);this.scoreTip.textFlow=M18.HTP.parser(O3.tr(3027,u))}else this.btnRight.touchEnabled=!0,this.btnRight.filters=[],this.scoreTip.visible=!1;this.updateEquip();var d={},v=THH23.FA75(e.t,e.exp);d=THH23.FJ8(v,d),this.getBaseAttr(P7.copyTab(d));var f=THH23.FA76();d=THH23.FJ8(f,d);var g=t.gnn,m=M11.gIV("gnAttr"),y={};y=THH23.FI85(m,y,g),d=THH23.FJ8(y,d);var A=O4.getScore(d);this.score.text=String(A+this.FHH78()),this.btnChange.visible=this.yihuanhua.visible=this.btnEquip.visible=this.scoreTip.visible=this.yulan.visible=!1;var b=Math.min(e.t+1,i.level);if(this.isCanEquip)this.btnEquip.visible=!0;else if(this._curLevel==b&&b!=e.t)this.scoreTip.visible=!0;else{r=e.k===this._curLevel;this.btnChange.visible=!r,this.yihuanhua.visible=r}this.yulan.visible=this._curLevel==b-1},t.prototype.getBaseAttr=function(t){for(var e in this.arr={101:0,102:0,103:0},t)this.arr[e]=t[e]},t.prototype.FHH78=function(){var t=0;return this.skill1Conf&&(t+=M10.gAG(this.skill1Conf.attr)),this.skill2Conf&&(t+=M10.gAG(this.skill2Conf.attr)),this.skill3Conf&&(t+=M10.gAG(this.skill3Conf.attr)),this.skill4Conf&&(t+=M10.gAG(this.skill4Conf.attr)),t},t.prototype.updateEquip=function(){var t=App.CM.gtM(O6.B98),e=t.generalEquip,i=t.generalEquipNotWear;if(this.equipPos1=M10.FE91(1),this.equipPos2=M10.FE91(2),this.equipPos3=M10.FE91(3),this.equipPos4=M10.FE91(4),e)for(var s=0,o=e;s<o.length;s++){var r=o[s],n=M10.FK75(r.i);switch(parseInt(n.pos)){case 1:this.equipPos1=n;break;case 2:this.equipPos2=n;break;case 3:this.equipPos3=n;break;case 4:this.equipPos4=n}}if(this.equip1Bg.source=N12.getBox(this.equipPos1.quality),this.equip1Icon.source=N12.FJ86(this.equipPos1.id),this.equip2Bg.source=N12.getBox(this.equipPos2.quality),this.equip2Icon.source=N12.FJ86(this.equipPos2.id),this.equip3Bg.source=N12.getBox(this.equipPos3.quality),this.equip3Icon.source=N12.FJ86(this.equipPos3.id),this.equip4Bg.source=N12.getBox(this.equipPos4.quality),this.equip4Icon.source=N12.FJ86(this.equipPos4.id),this.equip1Rp.visible=!1,this.equip2Rp.visible=!1,this.equip3Rp.visible=!1,this.equip4Rp.visible=!1,e.length<=0)if(i.length<=0);else{var a=THH23.FC71(i,1);this.equip1Rp.visible=!!a.maxScore;var h=THH23.FC71(i,2);this.equip2Rp.visible=!!h.maxScore;var p=THH23.FC71(i,3);this.equip3Rp.visible=!!p.maxScore;var l=THH23.FC71(i,4);this.equip4Rp.visible=!!l.maxScore}else if(i.length<=0);else{var c=THH23.FC71(e,1);a=THH23.FC71(i,1);this.equip1Rp.visible=a.maxScore>c.maxScore;var u=THH23.FC71(e,2);h=THH23.FC71(i,2);this.equip2Rp.visible=h.maxScore>u.maxScore;var d=THH23.FC71(e,3);p=THH23.FC71(i,3);this.equip3Rp.visible=p.maxScore>d.maxScore;var v=THH23.FC71(e,4);l=THH23.FC71(i,4);this.equip4Rp.visible=l.maxScore>v.maxScore}this.equip1Mask.visible=!THH23.FA11(e,1),this.equip2Mask.visible=!THH23.FA11(e,2),this.equip3Mask.visible=!THH23.FA11(e,3),this.equip4Mask.visible=!THH23.FA11(e,4),this.equip1Mask.visible?(this.equip1lv.visible=!1,P16.sGF(this.equip1Icon,!0)):(this.equip1lv.visible=!0,this.equip1lv.textFlow=M18.HTP.parse(O3.tr(4905,this.equipPos1.level)),0<this.equipPos1.addlevel&&(this.equip1lv.text=this.equip1lv.text+"+"+this.equipPos1.addlevel),P16.sGF(this.equip1Icon,!1)),this.equip2Mask.visible?(this.equip2lv.visible=!1,P16.sGF(this.equip2Icon,!0)):(this.equip2lv.visible=!0,this.equip2lv.textFlow=M18.HTP.parse(O3.tr(4905,this.equipPos2.level)),0<this.equipPos2.addlevel&&(this.equip2lv.text=this.equip2lv.text+"+"+this.equipPos2.addlevel),P16.sGF(this.equip2Icon,!1)),this.equip3Mask.visible?(this.equip3lv.visible=!1,P16.sGF(this.equip3Icon,!0)):(this.equip3lv.visible=!0,this.equip3lv.textFlow=M18.HTP.parse(O3.tr(4905,this.equipPos3.level)),0<this.equipPos3.addlevel&&(this.equip3lv.text=this.equip3lv.text+"+"+this.equipPos3.addlevel),P16.sGF(this.equip3Icon,!1)),this.equip4Mask.visible?(this.equip4lv.visible=!1,P16.sGF(this.equip4Icon,!0)):(this.equip4lv.visible=!0,this.equip4lv.textFlow=M18.HTP.parse(O3.tr(4905,this.equipPos4.level)),0<this.equipPos4.addlevel&&(this.equip4lv.text=this.equip4lv.text+"+"+this.equipPos4.addlevel),P16.sGF(this.equip4Icon,!1));var f=this.equip1Rp.visible||this.equip2Rp.visible||this.equip3Rp.visible||this.equip4Rp.visible;return(this.isCanEquip=f)?(this.btnEquip.visible=!0,this.btnEquip.imgNew.visible=!0,this.btnChange.visible=!1,void(this.yihuanhua.visible=!1)):void(this.btnEquip.visible=!1)},t.prototype.ZHH40=function(){for(var t=App.CM.gtM(O6.C3).gn.sk,e={},i=0;i<t.length;i++){var s=t[i];e[s.si]=s}var o=THH23.FC70(),r=Number(o[0]),n=Number(o[1]),a=Number(o[2]),h=Number(o[3]),p=M11.gIV("genSkillIcon1");this.general1Skill.ZHH40(p,e,r);var l=M11.gIV("genSkillIcon2");this.general2Skill.ZHH40(l,e,n);var c=M11.gIV("genSkillIcon3");this.general3Skill.ZHH40(c,e,a);var u=M11.gIV("genSkillIcon4");this.general4Skill.ZHH40(u,e,h)},t.prototype.updateCost=function(){var t=M11.gIV("gnAdvItem"),e=M11.gIV("timeItem2"),i=N12.giC(t)+N12.giC(e);this.cost.text=i+"/"+this._curGeneral.elixir,this.cost.textColor=i>=this._curGeneral.elixir?2987793:14164514;var s=N12.gID(t);this.costIcon.setData(s);var o=App.CM.gtM(O6.B82).avatarInfo.co;this.costCoin.text=String(this._curGeneral.cash),this.costCoin.textColor=o>=this._curGeneral.cash?2987793:14164514;var r=N12.gID(pack.I11.COIN+"");this.coinIcon.setData(r);var n=M11.FF54();if(App.CM.gtM(O6.C3).gn.t>=n.level)return P7.FD53(this.upLevel,0),this.upLevel.touchEnabled=!1,this.upLevel.filters=[P16.GrayMatrixFilter],P7.FD53(this.autoUp,0),this.autoUp.touchEnabled=!1,void(this.autoUp.filters=[P16.GrayMatrixFilter]);i>=this._curGeneral.elixir&&o>=this._curGeneral.cash&&!this._timerHandler?(P7.FD53(this.autoUp,1),P7.FD53(this.upLevel,1)):(P7.FD53(this.autoUp,0),P7.FD53(this.upLevel,0))},t.prototype.ZW34=function(){var t=App.CM.gtM(O6.C3),e=t.gn,i=e.t;if(i>=M11.FHH73().level)return this.lbShort.visible=!1,this.processBar.labelFunction=function(t,e){return O3.tr(1463)},this.processBar.maximum=100,this.processBar.value=100,this.processBar.imgShort.width=0,void(this.buyGroup.visible=!1);this.processBar.labelFunction=null,i>t.lastGnLv&&(t.lastGnLv=i,this.ZU92());var s=M11.FK75(i);this.processBar.minimum=0,this.processBar.maximum=s.exp,this.processBar.value=e.exp,this.initPBarPro()},t.prototype.initPBarPro=function(){var t=App.CM.gtM(O6.C3).gn;this.lbShort.visible=0<t.le,0<t.le?this.processBar.imgShort.width=this.processBar.width*(t.le/this.processBar.maximum):this.processBar.imgShort.width=0,this.processBar.imgShort.x=this.processBar.width*(this.processBar.value/this.processBar.maximum)-this.processBar.imgShort.width},t.prototype.doLeft=function(){this._curLevel=this._curLevel-1,this.ZY34(),this.ZT42(Action.Stand)},t.prototype.doRight=function(){this._curLevel=this._curLevel+1,this.ZY34(),this.ZT42(Action.Stand)},t.prototype.doEquipWear=function(){this.apF(N2.A13)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];b.prototype.close.call(this,t),this.ZN41(),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doMedicine,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.yulan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doHuanHua,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doEquipWear,this),this.btnAddOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.general1Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.general2Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.general3Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.general4Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.btnReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnReward,this),this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doStopAuto,this),this.equip1Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip2Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip3Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip4Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.autoBuy.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this._timerHandler&&this.ZU92(),this._curGeneral=null,this.equipPos1=null,this.equipPos2=null,this.equipPos3=null,this.equipPos4=null,this.skill1Conf=null,this.skill2Conf=null,this.skill3Conf=null,this.skill4Conf=null,delete this.modelId,this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null},t.prototype.GI10=function(){TG76.FI91(E5.A3),App.CM.apF(O6.B95,M4.A4,this.arr)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C3);this.btnReveal.imgNew.visible=!!t.redGmNum},t.prototype.ZN41=function(){egret.Tween.removeTweens(this.processBar),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.showEquip=function(t){var e=0;switch(t.currentTarget){case this.equip1Group:if(this.equip1Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos1.id),App.CM.apF(O6.B98,M19.A17,this.equipPos1,e);break;case this.equip2Group:if(this.equip2Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos2.id),App.CM.apF(O6.B98,M19.A17,this.equipPos2,e);break;case this.equip3Group:if(this.equip3Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos3.id),App.CM.apF(O6.B98,M19.A17,this.equipPos3,e);break;case this.equip4Group:if(this.equip4Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos4.id),App.CM.apF(O6.B98,M19.A17,this.equipPos4,e)}},t.prototype.checkScore=function(){App.VM.open(O7.A23)},t.prototype.doMedicine=function(){App.VM.open(O7.E2,"general")},t.prototype.ZT80=function(t){var e=t.currentTarget,i=THH23.FC70(),s=Number(i[0]),o=Number(i[1]),r=Number(i[2]),n=Number(i[3]);switch(e){case this.general1Skill:App.VM.open(O7.C43,"general",s);break;case this.general2Skill:App.VM.open(O7.C43,"general",o);break;case this.general3Skill:App.VM.open(O7.C43,"general",r);break;case this.general4Skill:App.VM.open(O7.C43,"general",n)}},t.prototype.doAddition=function(){var t=!!THH23.FB12();this.aCF(O6.C18,O10.A5,J12.A1,t)},t.prototype.canExpend=function(){App.CM.gtM(O6.C3).useGoldForwardWomenGeneralView?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,this.ZU92,void 0)},t.prototype.doUpLevel=function(){var t=M11.FF54(),e=App.CM.gtM(O6.C3).gn;if(e.t>=t.level)return P18.sDP(O3.tr(5687)),void this.ZU92();var i=App.CM.gtM(O6.B82).avatarInfo,s=Number(this.costCoin.text);if(i.co<s)return App.VM.open(O7.F12),void this.ZU92();var o=M11.gIV("gnAdvItem"),r=M11.gIV("timeItem2"),n=N12.giC(o)+N12.giC(r),a=M11.FK75(e.t),h=Number(a.elixir),p=h<=n;if(this.autoBuy.selected)if(p)this.apF(N2.A15,1);else{var l=M11.gIV("gnAdvItem"),c=N15.FA50(l)*(h-n);if(!(0<c&&i.bg>=c))return App.CM.gtM(O6.C3).useGoldForwardWomenGeneralView?void this.ZT56():void this.canExpend();this.apF(N2.A15,2)}else{if(!p){var u=M11.gIV("gnAdvItem");return App.VM.open(O7.G87,u,h-n),void this.ZU92()}this.apF(N2.A15,1)}},t.prototype.ZT56=function(){var t=App.CM.gtM(O6.C3);t.useGoldForwardWomenGeneralView||(t.useGoldForwardWomenGeneralView=!0),this._timerHandler?(this.ZU92(),this.stopAuto.visible=!0,this.autoUp.visible=!1,this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,this._timerHandler=App.K16.doTimer(200,0,this.ZM41,this)):this.ZM41()},t.prototype.ZM41=function(){var t=M11.FF54(),e=App.CM.gtM(O6.C3).gn;if(e.t>=t.level)return P18.sDP(O3.tr(5687)),void this.ZU92();var i=App.CM.gtM(O6.B82).avatarInfo,s=Number(this.costCoin.text);if(i.co<s)return App.VM.open(O7.F12),void this.ZU92();var o=M11.gIV("gnAdvItem"),r=M11.gIV("timeItem2"),n=N12.giC(o)+N12.giC(r),a=M11.FK75(e.t),h=Number(a.elixir),p=h<=n;if(this.autoBuy.selected)if(p)this.apF(N2.A15,1);else{var l=M11.gIV("gnAdvItem"),c=N15.FA50(l)*(h-n),u=N15.FB92(l)*(h-n);if(0<c&&i.bg>=c)this.apF(N2.A15,2);else{if(!(0<u&&i.g>=u))return P7.FA78(),void this.ZU92();this.apF(N2.A15,3)}}else{if(!p){var d=M11.gIV("gnAdvItem");return App.VM.open(O7.G87,d,h-n),void this.ZU92()}this.apF(N2.A15,1)}},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.upLevel,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,this._timerHandler=App.K16.doTimer(200,0,this.doUpLevel,this)},t.prototype.doStopAuto=function(){this.ZU92()},t.prototype.doHuanHua=function(){this.apF(N2.A33,this._curGeneral.level)},t.prototype.doBtnReward=function(){App.CM.apF(O6.C12,O8.A93,O8.B4.GENERERAL)},t.prototype.ZU92=function(){this.stopAuto.visible=!1,this.autoUp.visible=!0,this.upLevel.filters=[],this.upLevel.touchEnabled=!0;var t=M11.gIV("gnAdvItem"),e=M11.gIV("timeItem2"),i=N12.giC(t)+N12.giC(e),s=App.CM.gtM(O6.B82).avatarInfo.co;i>=this._curGeneral.elixir&&s>=this._curGeneral.cash?(P7.FD53(this.autoUp,1),P7.FD53(this.upLevel,1)):(P7.FD53(this.autoUp,0),P7.FD53(this.upLevel,0)),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null)},t}(BaseEuiView);__reflect(WomenGeneralSealView.prototype,"WomenGeneralSealView");var WomenGodSoulView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i._viewName="WomenGatSoulView",i.skinName=WomenGodSoulSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.souls=[this.soul1,this.soul2,this.soul3,this.soul4,this.soul5,this.soul6,this.soul7],this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this.lbStr1.text=O3.tr(7958),this.autoBuy.label=O3.tr(7959),this.lbStr2.text=O3.tr(7966,""),this.stringLb0.text=O3.tr(7963),this.stringLb1.text=O3.tr(7964)},t.prototype.initData=function(){s.prototype.initData.call(this),this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=WomenHead},t.prototype.open=function(){var t=App.CM.gtM(O6.C3).selectWomen;t&&(this._curWomen?this._curWomen&&this._curWomen.id!=t.id&&(this._curWomen=null,this._curWomen=t,this._curWomen.viewName=this._viewName):(this._curWomen=t,this._curWomen.viewName=this._viewName)),this.ZHH3(),this.ZT42(),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnLVEvent,this),this.powerCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this)},t.prototype.ZT42=function(){this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null);var t={id:this._curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj=new FightGameObject,this.womenObj.setData(t,this.wGroup),this.womenObj.action=Action.Stand},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TG77)switch(e){case P4.L85:this.ZHH3(),this.showTX(this._curWomen.sv)}else t instanceof THH9&&(this.upDateUIBy(this._curWomen.sv),this.ZHH3())},t.prototype.ZHH3=function(){var t=App.CM.gtM(O6.C3),e=THH23.FJ6(this._curWomen,this._viewName);P7.ObjectSet(this._itemArray.source,e);for(var i=0;i<e.length;i++)if(1==e[i].select){this._curWomen=e[i];break}t.selectWomen=null,t.selectWomen=this._curWomen,this._itemArray.refresh(),1==this._curWomen.have?this.stateGroup.visible=!0:this.stateGroup.visible=!1,this.endScroller(),this.upDateUIBy(this._curWomen.sv)},t.prototype.showTX=function(t){var e=Number(t.pos+5)%7;6==e?this.souls[e].showTPTx():this.souls[e].showPZTX()},t.prototype.endScroller=function(){if(App.CM.gtM(O6.C3).scrollerH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&""!=r.point){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&""!=n.point){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.close=function(){this.womenObj.destory(),this.womenObj=null,this._curWomen=null,this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnLVEvent,this),this.powerCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this)},t.prototype.upDateUIBy=function(t){var e=t.lv,i=t.pos;this.ZT77(i,e),this.ZT78(i,e),this.showPower(i,e),this.showTPTX(i)},t.prototype.showTPTX=function(t){"7"==t?this.souls[6].showCanTP():this.souls[6].hideCanTP()},t.prototype.showPower=function(t,e){var i=App.CM.gtM(O6.C3).getGodSBFB()+1,s=TE10.FJ4(e,t),o=TE10.FL55(s,i),r=Math.ceil(M10.gAG(o));this.powerLb.text=r.toString()},t.prototype.ZT77=function(t,e){TE10.godsoulMax;for(var i in this.souls)t-1>Number(i)?this.souls[i].data={bg:i,lv:e+1}:this.souls[i].data={bg:i,lv:e},t-1==Number(i)?this.souls[i].select.visible=!0:this.souls[i].select.visible=!1},t.prototype.ZT78=function(t,e){var i=TE10.godsoulMax,s=App.CM.gtM(O6.C3).getGodSBFB()+1;if(e<i){this.costGrp.visible=this.autoBuy.visible=!0,this.upLevel.bottom=0,P16.sGF(this.upLevel,!1),this.upLevel.enabled=!0;var o=TE10.FL19(t,e,s);this.upLDataG.data={type:"godSoul",data:o};var r=TE10.FL19(t,e+1,s);this.upNDataG.data={type:"godSoul",data:r};var n=void 0,a=void 0;if(7==t){var h=TE10.gIV("brokenitem"),p=N12.gID(h);this.costIcon.setData(p),n=N12.giC(h),a=TE10.godsoul[e+1].broken,this.upLevel.label=O3.tr(7961)}else{h=TE10.gIV("smeltingitem"),p=N12.gID(h);this.costIcon.setData(p),n=N12.giC(h),a=TE10.godsoul[e+1].cost,this.upLevel.label=O3.tr(7960)}this.cost.text=n+"",this.cost0.text="/"+a,this.cost.textColor=a<=n?(this.upLevel.imgNew.visible=!0,2987793):(this.upLevel.imgNew.visible=!1,14164514)}else{this.costGrp.visible=this.autoBuy.visible=!1,this.upLevel.bottom=40,P16.sGF(this.upLevel,!0),this.upLevel.enabled=!1,this.upLevel.label=O3.tr(7962);o=TE10.FL19(t,e,s);this.upLDataG.data={type:"godSoul",data:o},this.upNDataG.data={type:"godSoul",data:""}}},t.prototype.onBtnLVEvent=function(){var t,e,i,s=this._curWomen.sv,o=App.CM.gtM(O6.B82).avatarInfo,r=(e=7==s.pos?(i=TE10.gIV("brokenitem"),t=N12.giC(i),TE10.godsoul[Number(s.lv)+1].broken):(i=TE10.gIV("smeltingitem"),t=N12.giC(i),TE10.godsoul[Number(s.lv)+1].cost))<=t;if(this.autoBuy.selected)if(r)this.apF(N2.A35,this._curWomen.id,1);else{var n=i,a=N15.FA50(n)*(e-t),h=N15.FB92(n)*(e-t);if(0<a&&o.bg>=a)this.apF(N2.A35,this._curWomen.id,2);else{if(!(a<0)){if(App.CM.gtM(O6.C3).useGoldForwardWomenView){if(!(0<h&&o.g>=h))return void P7.FA78();this.apF(N2.A35,this._curWomen.id,3)}else this.canExpend();return}if(!(0<h&&o.g>=h))return void P7.FA78();this.apF(N2.A35,this._curWomen.id,3)}}else{if(!r){n=i;return void App.VM.open(O7.G87,n,e-t)}this.apF(N2.A35,this._curWomen.id,1)}},t.prototype.checkScore=function(){App.VM.open(O7.E64,this._curWomen)},t.prototype.ZT56=function(){var t=App.CM.gtM(O6.C3);t.useGoldForwardWomenView||(t.useGoldForwardWomenView=!0)},t.prototype.canExpend=function(){App.CM.gtM(O6.C3).useGoldForwardWomenView?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,void 0,void 0)},t}(BaseEuiView);__reflect(WomenGodSoulView.prototype,"WomenGodSoulView");var WomenGodSShowView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenScoreDetailSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.text=O3.tr(8633),this.lbTitle.text=O3.tr(8634),this.lbStr0.text=O3.tr(8635),this.bComs=[this.atk,this.def,this.hp],this.gComs=[this.atk0,this.def0,this.hp0]},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._curWomen=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.ZT42()},t.prototype.ZT42=function(){this.womenObj&&(this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var t={id:this._curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj.setData(t,this.womenRole),this.womenObj.action=Action.Stand},t.prototype.ZHH3=function(t){var e=THH23.FF56(this._curWomen.id,this._curWomen.lv,this._curWomen.exp),i=(O4.getScore(e),t.getWomenBFB()),s=this._curWomen.sv.lv,o=this._curWomen.sv.pos,r=TE10.FJ4(s,o),n=TE10.FL55(r),a=Math.ceil(M10.gAG(n)*(i+1));this.scoreLb.text=String(a),this.womenName.text=this._curWomen.name,this.womenName.textColor=Number(this._curWomen.color),this.starGrp.visible=!1;var h=["101","102","103"];for(var p in h){var l=P7.FM6(P7.str2kv(this.getVByList(h[p],r))).split(":"),c=O3.tr(4764,l[0],"：",l[1]);this.bComs[p].textFlow=M18.HTP.parser(c);var u=O3.tr(4764,l[0],"：",Math.ceil(Number(l[1])*i));this.gComs[p].textFlow=M18.HTP.parser(u)}},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null,this._curWomen=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.getVByList=function(t,e){var i=0;for(var s in e)if(e[s].key==t){i=e[s].value;break}return t+":"+i},t}(BaseEuiView);__reflect(WomenGodSShowView.prototype,"WomenGodSShowView");var WomenMainOldView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenMainSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.HH25,O7.I79,"WomenView",this.content),App.VM.rgS(O7.HH25,O7.F84,"WomenUpStarView",this.content),App.VM.rgS(O7.HH25,O7.E1,"WomenTacticalView",this.content),App.VM.rgS(O7.HH25,O7.B73,"WomenGeneralSealView",this.content),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4964))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.women.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.upstar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.tactical.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.generalSeal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.help,this),this.selectCur(O7.I79)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.women.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.upstar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.tactical.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.generalSeal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandel,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.help,this)},t.prototype.selectCur=function(t){switch(this._curOpen=t,this.women.bgStr="v1_btn_yellow_changtai2_png",this.upstar.bgStr="v1_btn_yellow_changtai2_png",this.tactical.bgStr="v1_btn_yellow_changtai2_png",this.generalSeal.bgStr="v1_btn_yellow_changtai2_png",this._curOpen){case O7.I79:App.VM.open(O7.I79),this.women.bgStr="v1_btn_yellow_xuanzhong2_png";break;case O7.F84:App.VM.open(O7.F84),this.upstar.bgStr="v1_btn_yellow_xuanzhong2_png";break;case O7.E1:App.VM.open(O7.E1),this.tactical.bgStr="v1_btn_yellow_xuanzhong2_png";break;case O7.B73:App.VM.open(O7.B73),this.generalSeal.bgStr="v1_btn_yellow_xuanzhong2_png"}},t.prototype.touchHandel=function(t){switch(t.currentTarget){case this.women:this.selectCur(O7.I79);break;case this.upstar:this.selectCur(O7.F84);break;case this.tactical:this.selectCur(O7.E1);break;case this.generalSeal:this.selectCur(O7.B73)}},t.prototype.help=function(){App.VM.open(O7.HH43)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenMainOldView.prototype,"WomenMainOldView");var WomenMainView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i.sGN("release_women"),App.VM.rgS(O7.HH25,O7.I79,"WomenView",i.content),App.VM.rgS(O7.HH25,O7.F84,"WomenUpStarView",i.content),App.VM.rgS(O7.HH25,O7.E1,"WomenTacticalView",i.content),App.VM.rgS(O7.HH25,O7.B73,"WomenGeneralSealView",i.content),i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this);var t=[O3.tr(3e3),O3.tr(3001),O3.tr(3002),O3.tr(3003)],e=[O7.I79,O7.F84,O7.E1,O7.B73];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!0},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY35,this),this.title=O3.tr(3004);var i=App.CM.gtM(O6.C3);this.ZHH3(i);var s=t[0]||O7.I79;this.ZQ23(s),this.ZHH59()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t instanceof TG77)this.ZHH3.apply(this,[t].concat(e));else if(t instanceof THH14||t instanceof THH9){var s=App.CM.gtM(O6.C3);this.ZHH3(s)}else if(t instanceof TG12||t instanceof TG58){var o=e[0],r=e[1];if(o!=P4.S88||r!=L13.A76){s=App.CM.gtM(O6.C3);this.ZHH3(s)}}else(t instanceof TB46||t instanceof TB14)&&this.ZHH59()},t.prototype.ZHH3=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if((e||[])[0]==P4.R46){var s=t.ZE56();this.btnList.ZHH58(O7.I79,s?1:0)}else{s=t.ZE56();this.btnList.ZHH58(O7.I79,s?1:0);var o=t.ZD47();this.btnList.ZHH58(O7.F84,o?1:0);var r=t.ZC6();this.btnList.ZHH58(O7.E1,r?1:0);var n=t.ZC83();this.btnList.ZHH58(O7.B73,n?1:0)}},t.prototype.ZHH59=function(){this.btnList.ZHH59(O7.E1,P7.FD56(E5.A5)),this.btnList.ZHH59(O7.B73,P7.FD56(E5.A3))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZY35,this);var i=App.CM.gtM(O6.C3);i.scrollerH=0,i.selectWomen=void 0,P7.FK28()},t.prototype.ZQ23=function(t){var e,i=App.CM.gtM(O6.B82).avatarInfo;switch(t){case O7.I79:if(e=M11.gIV("womanLv"),i.l<e){var s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[e])),-1}this.btnList.ZM66(t),this.title=O3.tr(3004);break;case O7.F84:if(e=M11.gIV("womanLv"),i.l<e){s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[e])),-1}this.btnList.ZM66(t),this.title=O3.tr(3005);break;case O7.E1:if(e=M11.gIV("fmLv"),i.l<e){s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[e])),-1}this.btnList.ZM66(t),this.title=O3.tr(3006);break;case O7.B73:if(e=M11.gIV("generalLv"),i.l<e){s=K18.init.commonDesc1.value;return P18.sDP(M18.format(s,[e])),-1}this.btnList.ZM66(t),this.title=O3.tr(3007)}},t.prototype.ZY35=function(){var t=this.btnList.getCurView();App.VM.open(O7.HH43,t)},t}(BasePanelView);__reflect(WomenMainView.prototype,"WomenMainView");var WomenMedicineView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenMedicineSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.itemIcon=new ItemIcon,this.gpIcon.addChild(this.itemIcon),this.btnUse.label=O3.tr(4788),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4789)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4790)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4791)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4792)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4793)),this.lbStr6.textFlow=M18.HTP.parse(O3.tr(4794))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._type=t[0],this.dlg.ZM69(this.closeSelf,this),this.deTen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useDan,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i)},t.prototype.ZHH3=function(t){"formation"==this._type?(this.dlg.title=O3.tr(3030),this.danName.text=O3.tr(3030),this.ZP82(t)):"general"==this._type&&(this.dlg.title=O3.tr(3031),this.danName.text=O3.tr(3031),this.ZY34(t))},t.prototype.ZP82=function(t){var e=t.fmn;this.curUse.textFlow=M18.HTP.parser(O3.tr(3032,e));var i=M11.gIV("fmAttrItem"),s=N12.gID(i),o={itemData:{data:s,ct:0},isBottom:!1};this.itemIcon.data=o,this.danName.textColor=Number(O5.FA77(s.quality));var r=N12.giC(i);this.backCount.text=r+"个";var n=K18.init.attrUseMax.value;if(n<=e)this.useCount.text="0";else{var a=n-e;this.useCount.text=String(a<r?a:r)}var h=M11.gIV("fmAttr"),p=THH23.FL92(h),l=avatar.AttributeKey;p[l.HP]?this.hp.text=String(p[l.HP]*e):this.hp.text="0",p[l.ATK]?this.atk.text=String(p[l.ATK]*e):this.atk.text="0",p[l.DEF]?this.def.text=String(p[l.DEF]*e):this.def.text="0"},t.prototype.ZY34=function(t){var e=t.gnn;this.curUse.textFlow=M18.HTP.parser(O3.tr(3032,e));var i=M11.gIV("gnAttrItem"),s=N12.giC(i),o=N12.gID(i),r={itemData:{data:o,ct:0},isBottom:!1};this.itemIcon.data=r,this.danName.textColor=Number(O5.FA77(o.quality)),this.backCount.textFlow=M18.HTP.parse(O3.tr(4795,s));var n=K18.init.attrUseMax.value;if(n<=e)this.useCount.text="0";else{var a=n-e;this.useCount.text=String(a<s?a:s)}var h=M11.gIV("gnAttr"),p=THH23.FL92(h),l=avatar.AttributeKey;p[l.HP]?this.hp.text=String(p[l.HP]*e):this.hp.text="0",p[l.ATK]?this.atk.text=String(p[l.ATK]*e):this.atk.text="0",p[l.DEF]?this.def.text=String(p[l.DEF]*e):this.def.text="0"},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.doDeTen=function(){var t;if("formation"==this._type)t=M11.gIV("fmAttrItem");else if("general"==this._type){t=M11.gIV("gnAttrItem")}if(!(N12.giC(t)<=0)){var e=Number(this.useCount.text);this.useCount.text=e-10<1?"1":String(e-10)}},t.prototype.doDeOne=function(){var t;if("formation"==this._type)t=M11.gIV("fmAttrItem");else if("general"==this._type){t=M11.gIV("gnAttrItem")}if(!(N12.giC(t)<=0)){var e=Number(this.useCount.text);this.useCount.text=e-1<1?"1":String(e-1)}},t.prototype.doInOne=function(){var t,e,i=App.CM.gtM(O6.C3);if("formation"==this._type)t=M11.gIV("fmAttrItem"),e=i.fmn;else if("general"==this._type){t=M11.gIV("gnAttrItem"),e=i.gnn}var s=N12.giC(t);if(!(s<=0)){var o=K18.init.attrUseMax.value-e,r=Number(this.useCount.text),n=o<s?o:s;this.useCount.text=n<r+1?String(n):String(r+1)}},t.prototype.doInTen=function(){var t,e,i=App.CM.gtM(O6.C3);if("formation"==this._type)t=M11.gIV("fmAttrItem"),e=i.fmn;else if("general"==this._type){t=M11.gIV("gnAttrItem"),e=i.gnn}var s=N12.giC(t);if(!(s<=0)){var o=K18.init.attrUseMax.value-e,r=Number(this.useCount.text),n=o<s?o:s;this.useCount.text=n<r+10?String(n):String(r+10)}},t.prototype.useDan=function(){var t,e=App.CM.gtM(O6.C3),i=K18.init.attrUseMax.value;if("formation"==this._type){if(i<=e.fmn)return void P18.sDP(O3.tr(5688))}else if("general"==this._type&&i<=e.gnn)return void P18.sDP(O3.tr(5689));if("formation"==this._type)t=M11.gIV("fmAttrItem");else if("general"==this._type){t=M11.gIV("gnAttrItem")}var s=N12.giC(t),o=Number(this.useCount.text);if(s<=0||s<o){O3.tr(3013,N12.FK5(t));var r=t;App.VM.open(O7.G87,r,1,P12.A26)}else"formation"==this._type?this.apF(N2.A7,o):"general"==this._type&&this.apF(N2.A9,o)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.deTen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeTen,this),this.deOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDeOne,this),this.inOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInOne,this),this.inTen.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doInTen,this),this.btnUse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useDan,this),this._type=null},t.prototype.closeSelf=function(){App.VM.close(O7.E2)},t}(BaseEuiView);__reflect(WomenMedicineView.prototype,"WomenMedicineView");var WomenMindMainView=function(s){function t(t,e){return s.call(this,t,e)||this}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),App.VM.rgS(O7.E63,O7.F48,"WomenGodSoulView",this.content),App.VM.rgS(O7.E63,O7.F49,"WomenGatSoulView",this.content);var t=[O3.tr(7954),O3.tr(7956)],e=[O7.F48,O7.F49];this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(),this.btnGroup.addChild(this.btnList),this.helpBtn.visible=!1},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.ZG74();var i=O7.F48;this.ZQ23(i)},t.prototype.ZQ23=function(t){this.ZP9(t)},t.prototype.ZP9=function(t){switch(t){case O7.F48:this.title=O3.tr(7955),this.btnList.ZM66(t);break;case O7.F49:this.title=O3.tr(7957),this.btnList.ZM66(t)}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this)},t.prototype.ZG74=function(){var t=App.CM.gtM(O6.C3);this.btnList.ZHH58(O7.F48,t.godSIsRed()),this.btnList.ZHH58(O7.F49,t.gatSIsRed())},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),this.ZG74()},t}(BasePanelView);__reflect(WomenMindMainView.prototype,"WomenMindMainView");var WomenPerAttrView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenPerAttrSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4755)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4756)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4757)),this.lbStr4.text=O3.tr(7951),this.lbStr5.text=O3.tr(7952)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._curWomen=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.ZT42()},t.prototype.ZT42=function(){this.womenObj&&(this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var t={id:this._curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj.setData(t,this.womenRole),this.womenObj.action=Action.Stand},t.prototype.ZHH3=function(t){var e=t.ps.slice(0),i={};if(e&&0<e.length)for(var s=0;s<e.length;s++){var o=e[s],r=THH23.FF56(o.id,o.lv,o.exp);i=THH23.FJ8(r,i)}var n=THH23.FC69(),a=M11.FJ3(n),h={};a&&a.attr&&(h=THH23.FL92(a.attr)),i=THH23.FJ8(h,i);var p=avatar.AttributeKey,l=p.HP,c=p.ATK,u=p.DEF,d=p.IGNDEF,v=i[d]?i[d]:0;this.stumbleIgDef.textFlow=M18.HTP.parser(O3.tr(3020,v));var f=p.IGNBKE,g=i[f]?i[f]:0;this.stumbleIgBreak.textFlow=M18.HTP.parser(O3.tr(3021,g));var m=O4.getScore(i),y=t.ZP86(),A=t.ZHH41(),b=t.ZM47();this.scoreLb.text=String(m+y+A+b);var T=t.ZP87();this.favprAtk.textFlow=M18.HTP.parser(O3.tr(3018,T[c].value)),this.favprDef.textFlow=M18.HTP.parser(O3.tr(3019,T[u].value)),this.favprHp.textFlow=M18.HTP.parser(O3.tr(3017,T[l].value));var C=t.ZT84();console.log(C),this.godSAtk.textFlow=this.getStrByKL("101",C),this.godSDef.textFlow=this.getStrByKL("102",C),this.godSHp.textFlow=this.getStrByKL("103",C),this.godSHit.textFlow=this.getStrByKL("110",C),this.godSCrt.textFlow=this.getStrByKL("108",C),this.godSIgRef.textFlow=this.getStrByKL("109",C),this.womenAdd.textFlow=this.getStrTSBYKL("238",C),this.godSAdd.textFlow=this.getStrTSBYKL("239",C);var w=Number(this.getVInList("238",C))+1,O=t.ZP88(w);this.activeAtk.textFlow=this.getStrByKL("101",O),this.activeDef.textFlow=this.getStrByKL("102",O),this.activeHp.textFlow=this.getStrByKL("103",O)},t.prototype.getStrByKL=function(t,e){var i=0;for(var s in e)if(e[s].key==t){i=e[s].value;break}var o=t+":"+i,r=P7.FM6(P7.str2kv(o)).split(":");r[0],Math.ceil(Number(r[1]));return M18.HTP.parser(O3.tr(7953,r[0]+":",Math.ceil(Number(r[1]))))},t.prototype.getStrTSBYKL=function(t,e){var i=0;for(var s in e)if(e[s].key==t){i=e[s].value;break}var o=t+":"+i,r=P7.FM6(P7.str2kv(o)).split(":");r[0],r[1];return M18.HTP.parser(O3.tr(7953,r[0]+":",r[1]))},t.prototype.getVInList=function(t,e){var i=0;for(var s in e)if(e[s].key==t){i=e[s].value;break}return i},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null,this._curWomen=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenPerAttrView.prototype,"WomenPerAttrView");var WomenScoreDetailView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenScoreDetailSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr0.textFlow=M18.HTP.parse(O3.tr(8120)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4763)),this.lbTitle.textFlow=M18.HTP.parse(O3.tr(5740))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._curWomen=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.ZT42()},t.prototype.ZT42=function(){this.womenObj&&(this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var t={id:this._curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj.setData(t,this.womenRole),this.womenObj.action=Action.Stand},t.prototype.ZHH3=function(t){var e=THH23.FF56(this._curWomen.id,this._curWomen.lv,this._curWomen.exp),i=O4.getScore(e),s=App.CM.gtM(O6.C3).getWomenBFB();this.scoreLb.text=String(Math.ceil(i*(1+s))),this.womenName.text=this._curWomen.name,this.womenName.textColor=Number(this._curWomen.color),1<=this._curWomen.sl?this.star1.source="v1_img_star1_png":this.star1.source="v1_img_star2_png",2<=this._curWomen.sl?this.star2.source="v1_img_star1_png":this.star2.source="v1_img_star2_png",3<=this._curWomen.sl?this.star3.source="v1_img_star1_png":this.star3.source="v1_img_star2_png",4<=this._curWomen.sl?this.star4.source="v1_img_star1_png":this.star4.source="v1_img_star2_png",5<=this._curWomen.sl?this.star5.source="v1_img_star1_png":this.star5.source="v1_img_star2_png",6<=this._curWomen.sl?this.star6.source="v1_img_star1_png":this.star6.source="v1_img_star2_png",7<=this._curWomen.sl?this.star7.source="v1_img_star1_png":this.star7.source="v1_img_star2_png";var o=P7.FC6(e,1);if(o){var r=Number(o.k),n=o.v;this.atk.visible=!0;var a=O3.tr(4764,O4.FD72(r),"：",n);this.atk.textFlow=M18.HTP.parser(a);var h=Math.ceil(Number(n)*s),p=O3.tr(4764,O4.FD72(r),"：",h);this.atk0.textFlow=M18.HTP.parser(p)}else this.atk.visible=!1,this.atk0.visible=!1;var l=P7.FC6(e,2);if(l){var c=Number(l.k),u=l.v;this.def.visible=!0;a=O3.tr(4764,O4.FD72(c),"：",u);this.def.textFlow=M18.HTP.parser(a);var d=Math.ceil(Number(u)*s);p=O3.tr(4764,O4.FD72(c),"：",d);this.def0.textFlow=M18.HTP.parser(p)}else this.def.visible=!1,this.def0.visible=!1;var v=P7.FC6(e,3);if(v){var f=Number(v.k),g=v.v;this.hp.visible=!0;a=O3.tr(4764,O4.FD72(f),"：",g);this.hp.textFlow=M18.HTP.parser(a);var m=Math.ceil(Number(g)*s);p=O3.tr(4764,O4.FD72(f),"：",m);this.hp0.textFlow=M18.HTP.parser(p)}else this.hp.visible=!1,this.hp0.visible=!1},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.womenRole.removeChildren(),this.womenObj.destory(),this.womenObj=null,this._curWomen=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenScoreDetailView.prototype,"WomenScoreDetailView");var WomenShapeView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.totalSecond=5,i.floor1RotateIdx=1,i.skinName="WomenShapeSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this)},t.prototype.initData=function(){s.prototype.initData.call(this),this.floor2RotateMap={1:0,2:-11,3:34,4:94,5:136,6:158,7:177,8:212,9:247}},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.countDownHandler&&(App.K16.rBH(this.countDownHandler),this.countDownHandler=null),this.floor2RotateHandler&&(App.K16.rBH(this.floor2RotateHandler),this.floor2RotateHandler=null),this.floor3ScaleHandler&&(App.K16.rBH(this.floor3ScaleHandler),this.floor3ScaleHandler=null),this.countDownHandler=App.K16.doTimer(1e3,this.totalSecond,this.GY14,this,this.countFinish,this),this.GX5()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),egret.Tween.removeTweens(this.floor2),this.countDownHandler&&(App.K16.rBH(this.countDownHandler),this.countDownHandler=null),this.floor2RotateHandler&&(App.K16.rBH(this.floor2RotateHandler),this.floor2RotateHandler=null),this.floor3ScaleHandler&&(App.K16.rBH(this.floor3ScaleHandler),this.floor3ScaleHandler=null)},t.prototype.GX5=function(){this.btnConfirm.label=O3.tr(4965,this.totalSecond),this.floor2.scaleX=this.floor2.scaleY=.5,this.floor2.rotation=0,egret.Tween.removeTweens(this.floor2),egret.Tween.get(this.floor2).wait(630).to({scaleX:1,scaleY:1}).wait(630).to({scaleX:1.5,scaleY:1.5}),this.floor2RotateHandler=App.K16.doTimer(420,0,this.floor2Effect,this)},t.prototype.floor2Effect=function(){this.floor2.rotation=this.floor2RotateMap[this.floor1RotateIdx],this.floor1RotateIdx++,9==this.floor1RotateIdx&&(this.floor1RotateIdx=1)},t.prototype.floor3Effect=function(){},t.prototype.GY14=function(){this.totalSecond--,this.btnConfirm.label="确定("+this.totalSecond+"s)"},t.prototype.countFinish=function(){this.closeSelf()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenShapeView.prototype,"WomenShapeView");var WomenSkillLearnView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenSkillLearnSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4796)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4797)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4798)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4799)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4804)),this.upLevel.label=O3.tr(5728),this.condition.textFlow=M18.HTP.parse(O3.tr(4806))},t.prototype.open=function(t,e){s.prototype.open.call(this),this._type=t,this._skillid=e,this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.skill1Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.skill2Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.skill3Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.skill4Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.costGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i)},t.prototype.ZHH3=function(t,e){void 0===e&&(e=void 0),"formation"==this._type?(this.title.text=O3.tr(5823),this.ZP82(t,e)):"general"==this._type&&(this.title.text=O3.tr(5824),this.ZY34(t,e))},t.prototype.ZY34=function(t,e){for(var i=t.gn.sk,s={},o=0;o<i.length;o++){var r=i[o];s[r.si]=r}var n=THH23.FC70(),a=0,h=Number(n[0]);a=this._skillid==h?1:a;var p=Number(n[1]);a=this._skillid==p?2:a;var l=Number(n[2]);a=this._skillid==l?3:a;var c=Number(n[3]);if(a=this._skillid==c?4:a,this.skill1Icon.source=M11.gIV("genSkillIcon1"),s[h]){this.skill1Mask.visible=!1,this.skill1LvBg.width=60;var u=parseInt(this.skill1Lv.text);s[h].sl>u&&e==P4.N80&&App.THH33.aUE(this.effect1,"iconSkill",-this.effect1.width/2-18,-this.effect1.height/2-15,1),this.skill1Lv.text=s[h].sl,this.skill1Lv.textColor=16777215}else this.skill1Mask.visible=!0,this.skill1LvBg.width=80,this.skill1Lv.text=O3.tr(5822,THH23.FB10(""+h)),this.skill1Lv.textColor=6483518;if(this.skill2Icon.source=M11.gIV("genSkillIcon2"),s[p]){this.skill2Mask.visible=!1,this.skill2LvBg.width=60;u=parseInt(this.skill2Lv.text);s[p].sl>u&&e==P4.N80&&App.THH33.aUE(this.effect2,"iconSkill",-this.effect2.width/2-18,-this.effect2.height/2-15,1),this.skill2Lv.text=s[p].sl,this.skill2Lv.textColor=16777215}else this.skill2Mask.visible=!0,this.skill2LvBg.width=80,this.skill2Lv.text=O3.tr(5822,THH23.FB10(""+p)),this.skill2Lv.textColor=6483518;if(this.skill3Icon.source=M11.gIV("genSkillIcon3"),s[l]){this.skill3Mask.visible=!1,this.skill3LvBg.width=60;u=parseInt(this.skill3Lv.text);s[l].sl>u&&e==P4.N80&&App.THH33.aUE(this.effect3,"iconSkill",-this.effect3.width/2-18,-this.effect3.height/2-15,1),this.skill3Lv.text=s[l].sl,this.skill3Lv.textColor=16777215}else this.skill3Mask.visible=!0,this.skill3LvBg.width=80,this.skill3Lv.text=O3.tr(5822,THH23.FB10(""+l)),this.skill3Lv.textColor=6483518;if(this.skill4Icon.source=M11.gIV("genSkillIcon4"),s[c]){this.skill4Mask.visible=!1,this.skill4LvBg.width=60;u=parseInt(this.skill4Lv.text);s[c].sl>u&&e==P4.N80&&App.THH33.aUE(this.effect4,"iconSkill",-this.effect4.width/2-18,-this.effect4.height/2-15,1),this.skill4Lv.text=s[c].sl,this.skill4Lv.textColor=16777215}else this.skill4Mask.visible=!0,this.skill4LvBg.width=80,this.skill4Lv.text=O3.tr(5822,THH23.FB10(""+c)),this.skill4Lv.textColor=6483518;this.skill1Texiao.visible=h==this._skillid,this.skill2Texiao.visible=p==this._skillid,this.skill3Texiao.visible=l==this._skillid,this.skill4Texiao.visible=c==this._skillid;var d,v=THH23.FC4(a),f=!1;if(s[this._skillid]){f=!0;var g=s[this._skillid].si,m=s[this._skillid].sl;d=M11.getSkill(g,m)}else f=!1,d=M11.getSkill(this._skillid);this._curSkill=d,this.skillDesc.text=O3.tr(5825,v+" "+d.level);var y=THH23.FL92(d.attr),A=P7.FC6(y,1);A?(this.addAtk.visible=!0,this.addAtk.textFlow=M18.HTP.parser(O3.tr(3034,O4.FD72(Number(A.k)),A.v))):this.addAtk.visible=!1;var b=P7.FC6(y,2);b?(this.addDef.visible=!0,this.addDef.textFlow=M18.HTP.parser(O3.tr(3034,O4.FD72(Number(b.k)),b.v))):this.addDef.visible=!1,this.updateNext(f,d)},t.prototype.ZP82=function(t,e){for(var i=t.fm.sk,s={},o=0;o<i.length;o++){var r=i[o];s[r.si]=r}var n=THH23.FE48(),a=0,h=Number(n[0]);a=this._skillid==h?1:a;var p=Number(n[1]);a=this._skillid==p?2:a;var l=Number(n[2]);a=this._skillid==l?3:a;var c=Number(n[3]);if(a=this._skillid==c?4:a,this.skill1Icon.source=M11.gIV("forSkillIcon1"),s[h]){this.skill1Mask.visible=!1,this.skill1LvBg.width=60;var u=parseInt(this.skill1Lv.text);s[h].sl>u&&e==P4.N76&&App.THH33.aUE(this.effect1,"iconSkill",-this.effect1.width/2-18,-this.effect1.height/2-15,1),this.skill1Lv.text=s[h].sl,this.skill1Lv.textColor=16777215}else this.skill1Mask.visible=!0,this.skill1LvBg.width=80,this.skill1Lv.text=O3.tr(5822,THH23.FA53(""+h)),this.skill1Lv.textColor=6483518;if(this.skill2Icon.source=M11.gIV("forSkillIcon2"),s[p]){this.skill2Mask.visible=!1,this.skill2LvBg.width=60;u=parseInt(this.skill2Lv.text);s[p].sl>u&&e==P4.N76&&App.THH33.aUE(this.effect2,"iconSkill",-this.effect2.width/2-18,-this.effect2.height/2-15,1),this.skill2Lv.text=s[p].sl,this.skill2Lv.textColor=16777215}else this.skill2Mask.visible=!0,this.skill2LvBg.width=80,this.skill2Lv.text=O3.tr(5822,THH23.FA53(""+p)),this.skill2Lv.textColor=6483518;if(this.skill3Icon.source=M11.gIV("forSkillIcon3"),s[l]){this.skill3Mask.visible=!1,this.skill3LvBg.width=60;u=parseInt(this.skill3Lv.text);s[l].sl>u&&e==P4.N76&&App.THH33.aUE(this.effect3,"iconSkill",-this.effect3.width/2-18,-this.effect3.height/2-15,1),this.skill3Lv.text=s[l].sl,this.skill3Lv.textColor=16777215}else this.skill3Mask.visible=!0,this.skill3LvBg.width=80,this.skill3Lv.text=O3.tr(5822,THH23.FA53(""+l)),this.skill3Lv.textColor=6483518;if(this.skill4Icon.source=M11.gIV("forSkillIcon4"),s[c]){this.skill4Mask.visible=!1,this.skill4LvBg.width=60;u=parseInt(this.skill4Lv.text);s[c].sl>u&&e==P4.N76&&App.THH33.aUE(this.effect4,"iconSkill",-this.effect4.width/2-18,-this.effect4.height/2-15,1),this.skill4Lv.text=s[c].sl,this.skill4Lv.textColor=16777215}else this.skill4Mask.visible=!0,this.skill4LvBg.width=80,this.skill4Lv.text=O3.tr(5822,THH23.FA53(""+c)),this.skill4Lv.textColor=6483518;this.skill1Texiao.visible=h==this._skillid,this.skill2Texiao.visible=p==this._skillid,this.skill3Texiao.visible=l==this._skillid,this.skill4Texiao.visible=c==this._skillid;var d,v=THH23.FD50(a),f=!1;if(s[this._skillid]){f=!0;var g=s[this._skillid].si,m=s[this._skillid].sl;d=M11.getSkill(g,m)}else f=!1,d=M11.getSkill(this._skillid);this._curSkill=d,this.skillDesc.text=O3.tr(5825,v+" "+d.level);var y=THH23.FL92(d.attr),A=P7.FC6(y,1);A?(this.addAtk.visible=!0,this.addAtk.textFlow=M18.HTP.parser(O3.tr(3034,O4.FD72(Number(A.k)),A.v))):this.addAtk.visible=!1;var b=P7.FC6(y,2);b?(this.addDef.visible=!0,this.addDef.textFlow=M18.HTP.parser(O3.tr(3034,O4.FD72(Number(b.k)),b.v))):this.addDef.visible=!1,this.updateNext(f,d)},t.prototype.updateNext=function(t,e){var i=M11.getSkill(e.skillid,e.level+1);if(t){if(!i)return this.nextGroup.visible=!1,this.nextConditionGroup.visible=!1,void this.updateCost(e);this.nextGroup.visible=!0,this.nextConditionGroup.visible=!1;var s=THH23.FL92(i.attr),o=P7.FC6(s,1);o?(this.nextAddAtk.visible=!0,this.nextAddAtk.textFlow=M18.HTP.parser(O3.tr(3033,O4.FD72(Number(o.k)),o.v))):this.nextAddAtk.visible=!1;var r=P7.FC6(s,2);r?(this.nextAddDef.visible=!0,this.nextAddDef.textFlow=M18.HTP.parser(O3.tr(3033,O4.FD72(Number(r.k)),r.v))):this.nextAddDef.visible=!1,this.noActiveGroup.visible=!1,this.activeGroup.visible=!0,this.updateCost(e)}else this.nextGroup.visible=!1,this.nextConditionGroup.visible=!0,"formation"==this._type?this.condition.textFlow=M18.HTP.parse(O3.tr(4805,THH23.FA53(""+e.skillid))):"general"==this._type&&(this.condition.textFlow=M18.HTP.parse(O3.tr(4805,THH23.FB10(""+e.skillid)))),this.noActiveGroup.visible=!0,this.activeGroup.visible=!1},t.prototype.updateCost=function(t){if(t&&t.cost){this.activeGroup.visible=!0,this.noActiveGroup.visible=!1;var e=t.cost.split(":")[0];this.costBg.source=N12.FL5(e),this.costIcon.source=N12.FJ86(e);var i=parseInt(t.cost.split(":")[1]),s=N12.giC(Number(e)),o=O3.tr(1300,N12.FK5(e),i);this.costLb.textFlow=(new egret.HtmlTextParser).parser(o),this.ownLb.text=s+"",this.ownLb.textColor=i<=s?_cc.green:_cc.red}else this.activeGroup.visible=!1,this.noActiveGroup.visible=!1},t.prototype.skillClick=function(t){var e,i=t.currentTarget,s=App.CM.gtM(O6.C3);"formation"==this._type?e=THH23.FE48():"general"==this._type&&(e=THH23.FC70());var o=Number(e[0]),r=Number(e[1]),n=Number(e[2]),a=Number(e[3]);switch(i){case this.skill1Group:this._skillid=o,this.ZHH3(s);break;case this.skill2Group:this._skillid=r,this.ZHH3(s);break;case this.skill3Group:this._skillid=n,this.ZHH3(s);break;case this.skill4Group:this._skillid=a,this.ZHH3(s)}TG40.playClickEffect()},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TG77?this.ZHH3(t,e):t instanceof THH9&&this.updateCost(this._curSkill)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.skill1Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.skill2Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.skill3Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.skill4Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skillClick,this),this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.costGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showItem,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this._skillid=null,this._curSkill=null,this._type=null},t.prototype.doUpLevel=function(){var t=this._curSkill.cost.split(":")[0],e=this._curSkill.cost.split(":")[1];if(t=Number(t),e=Number(e),N12.giC(t)<e){N12.FK5(t);var i=parseInt(t);App.VM.open(O7.G87,i,1,P12.A26)}else{M11.getSkill(this._curSkill.skillid,this._curSkill.level+1)?"formation"==this._type?this.apF(N2.A11,this._curSkill.skillid):"general"==this._type&&this.apF(N2.A17,this._curSkill.skillid):P18.sDP(O3.tr(5690))}},t.prototype.closeSelf=function(){App.VM.GY64(this)},t.prototype.showItem=function(){var t=this._curSkill.cost.split(":")[0],e=N12.gID(t),i=N12.giC(t);App.CM.apF(O6.C11,O14.A15,e,i)},t}(BaseEuiView);__reflect(WomenSkillLearnView.prototype,"WomenSkillLearnView");var WomenSkillView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenSkillSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4760)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4761)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4762))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._sk=t[0],this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i)},t.prototype.ZHH3=function(t){var e=M11.FJ2(this._sk.si,this._sk.sl);this.skillBg.source=THH1.FB74(e.starlv),this.skillIcon.source=e.icon,this.skillName.text=e.name,O5.FB13(this.skillName,e.name,e.starlv,1),this.skillGp.ZP81(e),this.skillDesc.textFlow=M18.HTP.parse(e.desc);var i=M11.FJ2(this._sk.si,this._sk.sl+1);i?(this.currentState="",this.nextDesc.textFlow=M18.HTP.parse(i.desc),this.lvCondition.text=O3.tr(3016,i.starlv),this.nextDesc.textColor=8419436):this.currentState="lastSkill",this.validateNow()},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this._sk=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenSkillView.prototype,"WomenSkillView");var WomenStumbleView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenStumbleSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4758)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4759))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i)},t.prototype.ZHH3=function(t){var e=THH23.FC69(),i=M11.FJ3(e),s=0,o={};i&&i.attr&&(s=i.level,o=THH23.FL92(i.attr)),this.level.textFlow=M18.HTP.parser(O3.tr(3022,s));var r=avatar.AttributeKey,n=r.IGNDEF,a=o[n]?o[n]:0;this.ignoreDef.text=O3.tr(3023)+a;var h,p=r.IGNBKE,l=o[p]?o[p]:0;this.ignoreBreak.text=O3.tr(3024)+l;var c=0,u={};(h=i?M11.FL99(i.id+1):M11.FG60())&&h.attr&&(c=h.level,u=THH23.FL92(h.attr));var d=r.IGNDEF,v=u[d]?u[d]:0;this.nextIgnoreDef.text=O3.tr(3023)+v;var f=r.IGNBKE,g=u[f]?u[f]:0;this.nextIgnoreBreak.text=O3.tr(3024)+g,this.levelDesc.textFlow=M18.HTP.parser(O3.tr(3025,c)),this.totalLevel.textFlow=M18.HTP.parser(O3.tr(3026,e)),h||(this.nextIgnoreDef.visible=this.nextIgnoreBreak.visible=this.levelDesc.visible=!1)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenStumbleView.prototype,"WomenStumbleView");var WomenTacticalScoreView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenTacticalScoreSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4819)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4820)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4821))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i),this.lbTitle.text=O3.tr(3037),this.ZT42(i)},t.prototype.ZT42=function(t){var e=M11.FI35(t.fm.t),i=THH23.FF57(t);this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var s={id:i.model,x:0,y:0,dir:Dir.br,objType:P13.A6,fi:e.skin,bt:BehaviourType.Attack_d,sr:1};this.womenObj.setData(s,this.wGroup),this.womenObj.action=Action.Stand},t.prototype.ZHH3=function(t){var e=t.fm,i=THH23.FB41(e.t,e.exp),s=avatar.AttributeKey,o=s.HP,r=i[o]?i[o]:0;this.activeHp.textFlow=M18.HTP.parse(O3.tr(4822,r));var n=s.ATK,a=i[n]?i[n]:0;this.activeAtk.textFlow=M18.HTP.parse(O3.tr(4823,a));var h=s.DEF,p=i[h]?i[h]:0;this.activeDef.textFlow=M18.HTP.parse(O3.tr(4824,p));var l=THH23.FB42(),c=l[o]?l[o]:0;this.equipHp.textFlow=M18.HTP.parse(O3.tr(4822,c));var u=l[n]?l[n]:0;this.equipAtk.textFlow=M18.HTP.parse(O3.tr(4823,u));var d=l[h]?l[h]:0;this.equipDef.textFlow=M18.HTP.parse(O3.tr(4824,d));var v=t.fmn,f=M11.gIV("fmAttr"),g={},m=(g=THH23.FI85(f,g,v))[o]?g[o]:0;this.danHp.textFlow=M18.HTP.parse(O3.tr(4822,m));var y=g[n]?g[n]:0;this.danAtk.textFlow=M18.HTP.parse(O3.tr(4823,y));var A=g[h]?g[h]:0;this.danDef.textFlow=M18.HTP.parse(O3.tr(4824,A));var b={};b=THH23.FJ8(i,b),b=THH23.FJ8(l,b),b=THH23.FJ8(g,b);var T=O4.getScore(b);this.scoreLb.text=String(T)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.prototype.uBM.call(this,t,e),t instanceof TG77&&this.ZHH3(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenTacticalScoreView.prototype,"WomenTacticalScoreView");var WomenTacticalView=function(b){function t(t,e){var i=b.call(this,t,e)||this;return i._curLevel=1,i._xtLevel=1,i.isCanEquip=!1,i.skinName="WomenTacticalSkin",i}return __extends(t,b),t.prototype.initUI=function(){b.prototype.initUI.call(this),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4774)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4775)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4776)),this.lbShort.textFlow=M18.HTP.parse(O3.tr(4780)),this.btnChange.label=O3.tr(4782),this.btnEquip.label=O3.tr(4783),this.upLevel.label=O3.tr(4784),this.autoUp.label=O3.tr(4785),this.stopAuto.label=O3.tr(4786),this.autoBuy.label=O3.tr(4787)},t.prototype.initData=function(){b.prototype.initData.call(this),egret.Tween.removeTweens(this.processBar)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];b.prototype.open.call(this,t),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.btnDan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doMedicine,this),this.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.yulan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.btnChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doHuanHua,this),this.btnEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doEquipWear,this),this.btnAddOne.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.forma1Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.forma2Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.forma3Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.forma4Skill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.btnReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnReward,this),this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doStopAuto,this),this.equip1Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip2Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip3Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip4Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.autoBuy.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this);var i=App.CM.gtM(O6.C3),s=i.fm;this._curLevel=s.t,this._xtLevel=s.t,this.ZHH3(i),this.autoShow(),this.ZW34(),this.ZT42(Action.Attack),this.ZN25()},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.autoShow=function(){var t=M11.FF54();App.CM.gtM(O6.C3).fm.t>=t.level||THH23.FB11()&&this.aCF(O6.C18,O10.A5,J12.A2,!0)},t.prototype.ZT42=function(t){var e=App.CM.gtM(O6.C3),i=THH23.FF57(e);this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null),this.womenObj=new FightGameObject;var s=t==Action.Attack?1:null,o={id:i.model,x:0,y:0,dir:Dir.br,objType:P13.A6,fi:this._curForma.skin,bt:BehaviourType.Attack_d,sr:s};this.womenObj.setData(o,this.wGroup),this.womenObj.action=Action.Stand},t.prototype.uBM=function(t){for(var e=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];b.prototype.uBM.call(this,t,i),this.ZN25();var o=i[0];if(t instanceof TG77){var r=t.fm;if(o==P4.N74||o==P4.R50){var n=r.exp-this.processBar.value,a=r.t,h=M11.FF54(),p=200,l=r.exp;if(a>=h.level?(p=0,l=this.processBar.maximum):(p=n/this.processBar.maximum*1e3)<200&&(p=200),egret.Tween.get(this.processBar).to({value:l},p).call(function(){e.lbAddExp.visible=!0,e.lbAddExp.text="+"+n,egret.Tween.get(e.lbAddExp).to({top:-30},100).call(function(){e.lbAddExp.top=-15,e.lbAddExp.visible=!1})}),r.t>t.lastFmLv){var c=t.war,u=void 0;if(c&&0<c.length)for(var d=0,v=c;d<v.length;d++){var f=v[d];if(1==f.k){u=f.v;break}}else u=M11.init.partnerInit.value;var g=void 0,m=M11.FI35(r.t);if(u&&m)g={id:M11.getWomen(u).model,x:0,y:0,dir:Dir.br,objType:P13.A6,fi:m.skin};var y={objData:g};App.VM.open(O7.G69,y),this._curLevel=r.t}}this.ZW34(),this.ZHH3(t)}else if(t instanceof THH9){var A=App.CM.gtM(O6.C3);this.ZHH3(A)}else if(t instanceof TG58){A=App.CM.gtM(O6.C3);this.ZHH3(A)}else if(t instanceof TG12){A=App.CM.gtM(O6.C3);this.ZHH3(A)}},t.prototype.ZHH3=function(t){this.updateDanRp(),this.ZN26(),this.ZT79(),this.updateForma(!0),this.ZE55(),this.updateCost()},t.prototype.ZN26=function(){var t=M11.gIV("fmUpItem"),e=TG7.FA82(J12.A2,t);e||(e=THH23.FB11()),this.btnAddOne.$setVisible(e);var i=THH23.FB11();this.btnAddOne.bgStr=i?"v1_img_jingyandan_png":"v1_img_zhishengyijie_png"},t.prototype.ZT79=function(){var t=M11.gIV("fmUpItem"),e=N12.giC(t),i=M11.FF54(),s=App.CM.gtM(O6.C3).fm;0<e&&s.t<i.level?this.btnAddOneRp.visible=!0:s.t>=i.level?this.btnAddOneRp.visible=!1:this.btnAddOneRp.visible=THH23.FB11();var o=!1,r=THH23.FJ9(1);if(r&&0!=r.length)for(var n=0;n<r.length;n++){var a=r[n];if(0==a.have&&1==a.canGet){o=!0;break}}else o=!1;this.btnRewardRp.visible=o;var h=s.sk,p={};for(n=0;n<h.length;n++){var l=h[n];p[l.si]=l}var c=THH23.FE48(),u=Number(c[0]),d=Number(c[1]),v=Number(c[2]),f=Number(c[3]);if(this.forma1Skill.ZY32(!1),p[u]){var g=p[u].si;if((A=p[u].sl)<M11.FHH74(g)){this.skill1Conf=M11.getSkill(g,A);var m=this.skill1Conf.cost.split(":")[0],y=this.skill1Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.forma1Skill.ZY32(!1):this.forma1Skill.ZY32(!0)}}else this.forma1Skill.ZY32(!1);if(this.forma2Skill.ZY32(!1),p[d]){g=p[d].si;if((A=p[d].sl)<M11.FHH74(g)){this.skill2Conf=M11.getSkill(g,A);m=this.skill2Conf.cost.split(":")[0],y=this.skill2Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.forma2Skill.ZY32(!1):this.forma2Skill.ZY32(!0)}}else this.forma2Skill.ZY32(!1);if(this.forma3Skill.ZY32(!1),p[v]){g=p[v].si;if((A=p[v].sl)<M11.FHH74(g)){this.skill3Conf=M11.getSkill(g,A);m=this.skill3Conf.cost.split(":")[0],y=this.skill3Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.forma3Skill.ZY32(!1):this.forma3Skill.ZY32(!0)}}else this.forma3Skill.ZY32(!1);if(this.forma4Skill.ZY32(!1),p[f]){var A;g=p[f].si;if((A=p[f].sl)<M11.FHH74(g)){this.skill4Conf=M11.getSkill(g,A);m=this.skill4Conf.cost.split(":")[0],y=this.skill4Conf.cost.split(":")[1];m=Number(m),y=Number(y),N12.giC(m)<y?this.forma4Skill.ZY32(!1):this.forma4Skill.ZY32(!0)}}else this.forma4Skill.ZY32(!1)},t.prototype.updateDanRp=function(){var t=App.CM.gtM(O6.C3),e=K18.init.attrUseMax.value,i=M11.gIV("fmAttrItem");0<N12.giC(i)&&t.fmn<e?this.danRp.visible=!0:this.danRp.visible=!1},t.prototype.updateForma=function(t){this._curForma=M11.FI35(this._curLevel);var e=App.CM.gtM(O6.C3),i=e.fm;this.formaLv.textFlow=M18.HTP.parse(O3.tr(4777,this._curForma.level)),i.k==this._curLevel?(this.btnChange.visible=!1,this.yihuanhua.visible=!0):(this.btnChange.visible=!0,this.yihuanhua.visible=!1),this._curLevel<=1?this.btnLeft.visible=!1:this.btnLeft.visible=!0;var s=M11.FF54();if(this._curLevel>=s.level)this.btnRight.visible=!1,this.yulan.visible=!1,this.scoreTip.visible=!1;else if(i.t==this._curLevel?this.yulan.visible=!0:this.yulan.visible=!1,this.btnRight.visible=!0,i.t+1==this._curLevel){this.btnChange.visible=!1,this.btnRight.touchEnabled=!1,this.btnRight.filters=[THH23.colorFlilter],this.scoreTip.visible=!0;var o=this._curForma.baseattr,r=THH23.FL92(o),n=O4.getScore(r),a=M11.FI35(i.t),h=a.addattr,p=a.exp/M11.gIV("fmAdvExp"),l={};l=THH23.FI85(h,l,p);var c=M11.FI35(i.t+1).baseattr,u=THH23.FL92(c);l=THH23.FJ8(u,l);var d=O4.getScore(l);this.scoreTip.textFlow=M18.HTP.parser(O3.tr(3027,d))}else this.btnRight.touchEnabled=!0,this.btnRight.filters=[],this.scoreTip.visible=!1;this.updateEquip();var v={},f=THH23.FB41(i.t,i.exp);v=THH23.FJ8(f,v),this.getBaseAttr(P7.copyTab(v));var g=THH23.FB42();v=THH23.FJ8(g,v);var m=e.fmn,y=M11.gIV("fmAttr"),A={};A=THH23.FI85(y,A,m),v=THH23.FJ8(A,v);var b=O4.getScore(v);this.score.text=String(b+this.FHH78()),t?this._xtLevel!=i.t&&this.ZT42(Action.Stand):this.ZT42(Action.Stand),this.btnChange.visible=this.yihuanhua.visible=this.btnEquip.visible=this.scoreTip.visible=this.yulan.visible=!1;var T=Math.min(i.t+1,s.level);if(this.isCanEquip)this.btnEquip.visible=!0;else if(this._curLevel==T&&T!=i.t)this.scoreTip.visible=!0;else{n=i.k===this._curLevel;this.btnChange.visible=!n,this.yihuanhua.visible=n}this.yulan.visible=this._curLevel==T-1},t.prototype.getBaseAttr=function(t){for(var e in this.arr={101:0,102:0,103:0},t)this.arr[e]=t[e]},t.prototype.FHH78=function(){var t=0;return this.skill1Conf&&(t+=M10.gAG(this.skill1Conf.attr)),this.skill2Conf&&(t+=M10.gAG(this.skill2Conf.attr)),this.skill3Conf&&(t+=M10.gAG(this.skill3Conf.attr)),this.skill4Conf&&(t+=M10.gAG(this.skill4Conf.attr)),t},t.prototype.updateEquip=function(){var t=App.CM.gtM(O6.B98),e=t.formaEquip,i=t.formaEquipNotWear;if(this.equipPos1=M10.FD3(1),this.equipPos2=M10.FD3(2),this.equipPos3=M10.FD3(3),this.equipPos4=M10.FD3(4),e)for(var s=0,o=e;s<o.length;s++){var r=o[s],n=M10.FI35(r.i);switch(parseInt(n.pos)){case 1:this.equipPos1=n;break;case 2:this.equipPos2=n;break;case 3:this.equipPos3=n;break;case 4:this.equipPos4=n}}if(this.equip1Bg.source=N12.getBox(this.equipPos1.quality),this.equip1Icon.source=N12.FJ86(this.equipPos1.id),this.equip2Bg.source=N12.getBox(this.equipPos2.quality),this.equip2Icon.source=N12.FJ86(this.equipPos2.id),this.equip3Bg.source=N12.getBox(this.equipPos3.quality),this.equip3Icon.source=N12.FJ86(this.equipPos3.id),this.equip4Bg.source=N12.getBox(this.equipPos4.quality),this.equip4Icon.source=N12.FJ86(this.equipPos4.id),this.equip1Rp.visible=!1,this.equip2Rp.visible=!1,this.equip3Rp.visible=!1,this.equip4Rp.visible=!1,e.length<=0)if(i.length<=0);else{var a=THH23.FB40(i,1);this.equip1Rp.visible=!!a.maxScore;var h=THH23.FB40(i,2);this.equip2Rp.visible=!!h.maxScore;var p=THH23.FB40(i,3);this.equip3Rp.visible=!!p.maxScore;var l=THH23.FB40(i,4);this.equip4Rp.visible=!!l.maxScore}else if(i.length<=0);else{var c=THH23.FB40(e,1);a=THH23.FB40(i,1);this.equip1Rp.visible=a.maxScore>c.maxScore;var u=THH23.FB40(e,2);h=THH23.FB40(i,2);this.equip2Rp.visible=h.maxScore>u.maxScore;var d=THH23.FB40(e,3);p=THH23.FB40(i,3);this.equip3Rp.visible=p.maxScore>d.maxScore;var v=THH23.FB40(e,4);l=THH23.FB40(i,4);this.equip4Rp.visible=l.maxScore>v.maxScore}this.equip1Mask.visible=!THH23.FA6(e,1),this.equip2Mask.visible=!THH23.FA6(e,2),this.equip3Mask.visible=!THH23.FA6(e,3),this.equip4Mask.visible=!THH23.FA6(e,4),this.equip1Mask.visible?(this.equip1lv.visible=!1,P16.sGF(this.equip1Icon,!0)):(this.equip1lv.visible=!0,this.equip1lv.textFlow=M18.HTP.parse(O3.tr(4778,this.equipPos1.level)),0<this.equipPos1.addlevel&&(this.equip1lv.text=this.equip1lv.text+"+"+this.equipPos1.addlevel),P16.sGF(this.equip1Icon,!1)),this.equip2Mask.visible?(this.equip2lv.visible=!1,P16.sGF(this.equip2Icon,!0)):(this.equip2lv.visible=!0,this.equip2lv.textFlow=M18.HTP.parse(O3.tr(4778,this.equipPos2.level)),0<this.equipPos2.addlevel&&(this.equip2lv.text=this.equip2lv.text+"+"+this.equipPos2.addlevel),P16.sGF(this.equip2Icon,!1)),this.equip3Mask.visible?(this.equip3lv.visible=!1,P16.sGF(this.equip3Icon,!0)):(this.equip3lv.visible=!0,this.equip3lv.textFlow=M18.HTP.parse(O3.tr(4778,this.equipPos3.level)),0<this.equipPos3.addlevel&&(this.equip3lv.text=this.equip3lv.text+"+"+this.equipPos3.addlevel),P16.sGF(this.equip3Icon,!1)),this.equip4Mask.visible?(this.equip4lv.visible=!1,P16.sGF(this.equip4Icon,!0)):(this.equip4lv.visible=!0,this.equip4lv.textFlow=M18.HTP.parse(O3.tr(4778,this.equipPos4.level)),0<this.equipPos4.addlevel&&(this.equip4lv.text=this.equip4lv.text+"+"+this.equipPos4.addlevel),P16.sGF(this.equip4Icon,!1));var f=!1;return this.equip1Rp.visible&&(f=!0),this.equip2Rp.visible&&(f=!0),this.equip3Rp.visible&&(f=!0),this.equip4Rp.visible&&(f=!0),(this.isCanEquip=f)?(this.btnEquip.visible=!0,this.btnEquip.imgNew.visible=!0,this.btnChange.visible=!1,void(this.yihuanhua.visible=!1)):void(this.btnEquip.visible=!1)},t.prototype.ZE55=function(){for(var t=App.CM.gtM(O6.C3).fm.sk,e={},i=0;i<t.length;i++){var s=t[i];e[s.si]=s}var o=THH23.FE48(),r=Number(o[0]),n=Number(o[1]),a=Number(o[2]),h=Number(o[3]),p=M11.gIV("forSkillIcon1");this.forma1Skill.ZJ56(p,e,r);var l=M11.gIV("forSkillIcon2");this.forma2Skill.ZJ56(l,e,n);var c=M11.gIV("forSkillIcon3");this.forma3Skill.ZJ56(c,e,a);var u=M11.gIV("forSkillIcon4");this.forma4Skill.ZJ56(u,e,h)},t.prototype.updateCost=function(){var t=M11.gIV("fmAdvItem"),e=M11.gIV("timeItem1"),i=N12.giC(t)+N12.giC(e);this.cost.text=i+"/"+this._curForma.elixir,this.cost.textColor=i>=this._curForma.elixir?2987793:14164514;var s=N12.gID(t);this.costIcon.setData(s);var o=App.CM.gtM(O6.B82).avatarInfo.co;this.costCoin.text=String(this._curForma.cash),this.costCoin.textColor=o>=this._curForma.cash?2987793:14164514;var r=N12.gID(pack.I11.COIN+"");this.coinIcon.setData(r);var n=M11.FF54();if(App.CM.gtM(O6.C3).fm.t>=n.level)return P7.FD53(this.upLevel,0),this.upLevel.touchEnabled=!1,this.upLevel.filters=[P16.GrayMatrixFilter],P7.FD53(this.autoUp,0),this.autoUp.touchEnabled=!1,void(this.autoUp.filters=[P16.GrayMatrixFilter]);i>=this._curForma.elixir&&o>=this._curForma.cash&&!this._timerHandler?(P7.FD53(this.autoUp,1),P7.FD53(this.upLevel,1)):(P7.FD53(this.upLevel,0),P7.FD53(this.autoUp,0))},t.prototype.ZW34=function(){var t=App.CM.gtM(O6.C3),e=t.fm,i=e.t;if(i>=M11.FF54().level)return this.processBar.labelFunction=function(t,e){return O3.tr(1463)},this.lbShort.visible=!1,this.processBar.maximum=this.processBar.value=100,this.processBar.imgShort.width=0,void(this.buyGroup.visible=!1);this.processBar.labelFunction=null,i>t.lastFmLv&&(t.lastFmLv=i,this.ZU92());var s=M11.FI35(i);this.processBar.minimum=0,this.processBar.maximum=s.exp,this.processBar.value=e.exp,this.initPBarPro()},t.prototype.initPBarPro=function(){var t=App.CM.gtM(O6.C3).fm;this.lbShort.visible=0<t.le,0<t.le?this.processBar.imgShort.width=this.processBar.width*(t.le/this.processBar.maximum):this.processBar.imgShort.width=0,this.processBar.imgShort.x=this.processBar.width*(this.processBar.value/this.processBar.maximum)-this.processBar.imgShort.width},t.prototype.doLeft=function(){this._curLevel=this._curLevel-1,this.updateForma(!1)},t.prototype.doRight=function(){this._curLevel=this._curLevel+1,this.updateForma(!1)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];b.prototype.close.call(this,t),this.ZN41(),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.btnDan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doMedicine,this),this.btnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.btnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.yulan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.btnChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doHuanHua,this),this.btnEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doEquipWear,this),this.btnAddOne.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.forma1Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.forma2Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.forma3Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.forma4Skill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT80,this),this.btnReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnReward,this),this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doStopAuto,this),this.equip1Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip2Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip3Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.equip4Group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showEquip,this),this.autoBuy.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnReveal.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GI10,this),this._timerHandler&&this.ZU92(),this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null,egret.Tween.removeTweens(this.processBar),this._curForma=null,this.equipPos1=null,this.equipPos2=null,this.equipPos3=null,this.equipPos4=null,this.skill1Conf=null,this.skill2Conf=null,this.skill3Conf=null,this.skill4Conf=null},t.prototype.GI10=function(){TG76.FI91(E5.A5),App.CM.apF(O6.B95,M4.A4,this.arr)},t.prototype.ZN25=function(){var t=App.CM.gtM(O6.C3);this.btnReveal.imgNew.visible=!!t.redFmNum},t.prototype.ZN41=function(){egret.Tween.removeTweens(this.processBar),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.showEquip=function(t){var e=0;switch(t.currentTarget){case this.equip1Group:if(this.equip1Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos1.id),App.CM.apF(O6.B98,M19.A17,this.equipPos1,e);break;case this.equip2Group:if(this.equip2Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos2.id),App.CM.apF(O6.B98,M19.A17,this.equipPos2,e);break;case this.equip3Group:if(this.equip3Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos3.id),App.CM.apF(O6.B98,M19.A17,this.equipPos3,e);break;case this.equip4Group:if(this.equip4Mask.visible)return void P18.sDP(O3.tr(5549));e=N12.giC(this.equipPos4.id),App.CM.apF(O6.B98,M19.A17,this.equipPos4,e)}},t.prototype.checkScore=function(){App.VM.open(O7.A84)},t.prototype.doEquipWear=function(){this.apF(N2.A3)},t.prototype.doMedicine=function(){App.VM.open(O7.E2,"formation")},t.prototype.ZT80=function(t){var e=t.currentTarget,i=THH23.FE48(),s=Number(i[0]),o=Number(i[1]),r=Number(i[2]),n=Number(i[3]);switch(e){case this.forma1Skill:App.VM.open(O7.C43,"formation",s);break;case this.forma2Skill:App.VM.open(O7.C43,"formation",o);break;case this.forma3Skill:App.VM.open(O7.C43,"formation",r);break;case this.forma4Skill:App.VM.open(O7.C43,"formation",n)}},t.prototype.doAddition=function(){var t=!!THH23.FB11();this.aCF(O6.C18,O10.A5,J12.A2,t)},t.prototype.canExpend=function(){App.CM.gtM(O6.C3).useGoldForwardWomenTacticalView?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,this.ZU92,void 0)},t.prototype.doUpLevel=function(){var t=M11.FF54(),e=App.CM.gtM(O6.C3).fm;if(e.t>=t.level)return P18.sDP(O3.tr(5690)),void this.ZU92();var i=App.CM.gtM(O6.B82).avatarInfo,s=Number(this.costCoin.text);if(i.co<s)return App.VM.open(O7.F12),void this.ZU92();var o=M11.gIV("fmAdvItem"),r=M11.gIV("timeItem1"),n=N12.giC(o)+N12.giC(r),a=M11.FI35(e.t),h=Number(a.elixir),p=h<=n;if(this.autoBuy.selected)if(p)this.apF(N2.A43,1);else{var l=M11.gIV("fmAdvItem"),c=N15.FA50(l)*(h-n);if(!(0<c&&i.bg>=c))return App.CM.gtM(O6.C3).useGoldForwardWomenTacticalView?void this.ZT56():void this.canExpend();this.apF(N2.A43,2)}else{if(!p){var u=M11.gIV("fmAdvItem");return App.VM.open(O7.G87,u,h-n),void this.ZU92()}this.apF(N2.A43,1)}},t.prototype.ZT56=function(){var t=App.CM.gtM(O6.C3);t.useGoldForwardWomenTacticalView||(t.useGoldForwardWomenTacticalView=!0),this._timerHandler?(this.ZU92(),this.stopAuto.visible=!0,this.autoUp.visible=!1,this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,this._timerHandler=App.K16.doTimer(200,0,this.ZM41,this)):this.ZM41()},t.prototype.ZM41=function(){var t=M11.FF54(),e=App.CM.gtM(O6.C3).fm;if(e.t>=t.level)return P18.sDP(O3.tr(4781)),void this.ZU92();var i=App.CM.gtM(O6.B82).avatarInfo,s=Number(this.costCoin.text);if(i.co<s)return App.VM.open(O7.F12),void this.ZU92();var o=M11.gIV("fmAdvItem"),r=M11.gIV("timeItem1"),n=N12.giC(o)+N12.giC(r),a=M11.FI35(e.t),h=Number(a.elixir),p=h<=n;if(this.autoBuy.selected)if(p)this.apF(N2.A43,1);else{var l=M11.gIV("fmAdvItem"),c=N15.FA50(l)*(h-n),u=N15.FB92(l)*(h-n);if(0<c&&i.bg>=c)this.apF(N2.A43,2);else{if(!(0<u&&i.g>=u))return P7.FA78(),void this.ZU92();this.apF(N2.A43,3)}}else{if(!p){var d=M11.gIV("fmAdvItem");return App.VM.open(O7.G87,d,h-n),void this.ZU92()}this.apF(N2.A43,1)}},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.upLevel,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,this._timerHandler=App.K16.doTimer(200,0,this.doUpLevel,this)},t.prototype.doStopAuto=function(){this.ZU92()},t.prototype.doHuanHua=function(){this.apF(N2.A31,this._curForma.level)},t.prototype.doBtnReward=function(){App.CM.apF(O6.C12,O8.A93,O8.B4.FORMATE)},t.prototype.ZU92=function(){this.stopAuto.visible=!1,this.autoUp.visible=!0,this.upLevel.filters=[],this.upLevel.touchEnabled=!0;var t=M11.gIV("fmAdvItem"),e=M11.gIV("timeItem1"),i=N12.giC(t)+N12.giC(e),s=App.CM.gtM(O6.B82).avatarInfo.co;i>=this._curForma.elixir&&s>=this._curForma.cash?(P7.FD53(this.autoUp,1),P7.FD53(this.upLevel,1)):(P7.FD53(this.upLevel,0),P7.FD53(this.autoUp,0)),this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null)},t}(BaseEuiView);__reflect(WomenTacticalView.prototype,"WomenTacticalView");var WomenUpFightView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WomenUpFightSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.btnPosition1.label=O3.tr(7379),this.btnPosition2.label=O3.tr(7380),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4966))},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this),this._battleWomenId=t[0],this.btnPosition1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpBattle1,this),this.btnPosition2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpBattle2,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this);var i=App.CM.gtM(O6.C3);this.ZHH3(i)},t.prototype.ZHH3=function(t){var e=THH23.FJ5(),i=e[1],s=e[2];i?(this.p1Group.visible=!0,this.updateP1(i)):this.p1Group.visible=!1,s?(this.p2Group.visible=!0,this.updateP2(s)):this.p2Group.visible=!1},t.prototype.updateP1=function(t){this.p1bg.source=t.bg,this.p1icon.source=t.icon;var e=t.sk;e.sl<=3?(this.p1StarGroup.visible=!0,this.p1lbGp.visible=!1,3==e.sl?(this.p1StarGroup.width=65,this.p1star1.left=0,this.p1star2.horizontalCenter=0,this.p1star3.right=0,this.p1star1.verticalCenter=0,this.p1star2.verticalCenter=0,this.p1star3.verticalCenter=0,this.p1star1.source="v1_img_star1_png",this.p1star2.source="v1_img_star1_png",this.p1star3.source="v1_img_star1_png"):2==e.sl?(this.p1StarGroup.width=45,this.p1star1.left=0,this.p1star2.right=0,this.p1star1.verticalCenter=0,this.p1star2.verticalCenter=0,this.p1star1.source="v1_img_star1_png",this.p1star2.source="v1_img_star1_png",this.p1star3.source=""):1==e.sl&&(this.p1star1.horizontalCenter=0,this.p1star1.verticalCenter=0,this.p1star1.source="v1_img_star1_png",this.p1star2.source="",this.p1star3.source="")):(this.p1StarGroup.visible=!1,this.p1lbGp.visible=!0,this.p1sl.text=String(e.sl)),this.p1name.text=t.name,this.p1name.textColor=t.color,this.p1level.textFlow=M18.HTP.parse(O3.tr(4967,t.lv))},t.prototype.updateP2=function(t){this.p2bg.source=t.bg,this.p2icon.source=t.icon;var e=t.sk;e.sl<=3?(this.p2StarGroup.visible=!0,this.p2lbGp.visible=!1,3==e.sl?(this.p2StarGroup.width=65,this.p2star1.left=0,this.p2star2.horizontalCenter=0,this.p2star3.right=0,this.p2star1.verticalCenter=0,this.p2star2.verticalCenter=0,this.p2star3.verticalCenter=0,this.p2star1.source="v1_img_star1_png",this.p2star2.source="v1_img_star1_png",this.p2star3.source="v1_img_star1_png"):2==e.sl?(this.p2StarGroup.width=45,this.p2star1.left=0,this.p2star2.right=0,this.p2star1.verticalCenter=0,this.p2star2.verticalCenter=0,this.p2star1.source="v1_img_star1_png",this.p2star2.source="v1_img_star1_png",this.p2star3.source=""):1==e.sl&&(this.p2star1.horizontalCenter=0,this.p2star1.verticalCenter=0,this.p2star1.source="v1_img_star1_png",this.p2star2.source="",this.p2star3.source="")):(this.p2StarGroup.visible=!1,this.p2lbGp.visible=!0,this.p2sl.text=String(e.sl)),this.p2name.text=t.name,this.p2name.textColor=t.color,this.p2level.textFlow=M18.HTP.parse(O3.tr(4967,t.lv))},t.prototype.doUpBattle1=function(){this.apF(N2.A45,this._battleWomenId,1)},t.prototype.doUpBattle2=function(){this.apF(N2.A45,this._battleWomenId,2)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];(s.prototype.uBM.call(this,t,e),t instanceof TG77)&&(e[0]==P4.U33&&this.closeSelf())},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnPosition1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpBattle1,this),this.btnPosition2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpBattle2,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this._battleWomenId=null},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WomenUpFightView.prototype,"WomenUpFightView");var WomenUpStarView=function(o){function t(t,e){var i=o.call(this,t,e)||this;return i._viewName="WomenUpStarView",i.skinName="WomenUpStarSkin",i}return __extends(t,o),t.prototype.initUI=function(){o.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4773)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4767)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4745)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4746)),this.lbGetwayTip.textFlow=M18.HTP.parse(O3.tr(4748)),this.maxLb.textFlow=M18.HTP.parse(O3.tr(4770)),this.accessMaterial.textFlow=M18.HTP.parse(O3.tr(4771)),this.upStar.label=O3.tr(5739),this.activeBtn.label=O3.tr(4753)},t.prototype.initData=function(){o.prototype.initData.call(this),this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=WomenHead},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t),P7.FD53(this.activeBtn,1);var i=App.CM.gtM(O6.C3),s=i.selectWomen;s&&(this._curWomen?this._curWomen&&this._curWomen.id!=s.id&&(this._curWomen=null,this._curWomen=s,this._curWomen.viewName=this._viewName):(this._curWomen=s,this._curWomen.viewName=this._viewName)),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.stumbles.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doStumbles,this),this.skillGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.stateGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doOpenBattle,this),this.upStar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpStar,this),this.accessMaterial.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM42,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doActive,this),this.curSkill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.nextSkill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF95,this),this.cardImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT81,this),this.itemGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showCostItem,this),this.maxSkill.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.cardTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpPage,this),this.ZHH3(i),this.ZT42()},t.prototype.ZT42=function(){this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null);var t={id:this._curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj=new FightGameObject,this.womenObj.setData(t,this.wGroup),this.womenObj.action=Action.Stand},t.prototype.ZT81=function(){var t=N12.gID(this._curWomen.item),e=N12.giC(this._curWomen.item);App.CM.apF(O6.C11,O14.A15,t,e)},t.prototype.showCostItem=function(){var t=this._curWomen.sk,e=M11.FJ2(t.si,t.sl).cost.split(":")[0],i=N12.gID(e),s=N12.giC(parseInt(e));App.CM.apF(O6.C11,O14.A15,i,s)},t.prototype.doActive=function(){if(N12.giC(this._curWomen.item)<1){var t=N12.gID(this._curWomen.item),e=O3.tr(3013,t.name);P18.sDP(e)}else this.apF(N2.A25,this._curWomen.id)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(o.prototype.uBM.call(this,t,e),t instanceof TG77)this.ZHH3(t);else if(t instanceof THH9){var s=App.CM.gtM(O6.C3);this.ZHH3(s)}},t.prototype.ZHH3=function(t){this.itemScroller.viewport.scrollH=t.scrollerH;for(var e=THH23.FJ6(this._curWomen,this._viewName),i=0;i<e.length;i++)if(1==e[i].select){this._curWomen=e[i];break}t.selectWomen=null,t.selectWomen=this._curWomen,this._itemArray.replaceAll(e),5<this._itemArray.length?(this.leftBtn.visible=!0,this.rightBtn.visible=!0,this.itemList.horizontalCenter=NaN,this.itemList.left=0):(this.leftBtn.visible=!1,this.rightBtn.visible=!1,this.itemList.horizontalCenter=0,this.itemList.left=NaN);var s=THH23.FF56(this._curWomen.id,this._curWomen.lv,this._curWomen.exp),o=O4.getScore(s),r=t.getWomenBFB();this.score.text=String(Math.ceil(o*(1+r))),1==this._curWomen.have?(this.activeLvGroup.visible=!0,this.noActiveLvGroup.visible=!1,this.activeGroup.visible=!0,this.noActiveGroup.visible=!1,this.stateGroup.visible=!0,this.updateLv(),this.updateState(),this.updateCost(),this.ZJ57()):(this.activeLvGroup.visible=!1,this.noActiveLvGroup.visible=!0,this.activeGroup.visible=!1,this.noActiveGroup.visible=!0,this.stateGroup.visible=!1,this.updateCard()),this.ZP81(),this.ZM25(),this.endScroller()},t.prototype.updateState=function(){var t=App.CM.gtM(O6.C3).war,e=0;t&&(e=t.length);var i=this._curWomen.fight;this.btnState.stateRp.visible=""==i?(this.btnState.stateDesc.text=O3.tr(3012),e<2):(this.btnState.stateDesc.text=O3.tr(3011),!1)},t.prototype.updateCard=function(){this.cardBg.source=N12.FL5(this._curWomen.item),this.cardIcon.source=N12.FJ86(this._curWomen.item);var t=N12.giC(this._curWomen.item),e=N12.FK5(this._curWomen.item);this.lbActCostName.text=e,this.lbActiveCost.textFlow=M18.HTP.parse(O3.tr(4772,t)),1<=t?(this.lbActiveCost.textColor=_cc.dgreen,this.cardTip.visible=!1,this.activeBtn.visible=!0):(this.lbActiveCost.textColor=_cc.red,this.cardTip.visible=!0,this.activeBtn.visible=!1,this.cardTip.text=this._curWomen.gainway,this._curWomen.showid?M18.FHH83(this.cardTip):M18.FF64(this.cardTip)),this.lbGetwayTip.visible=this.cardTip.visible},t.prototype.updateLv=function(){this.level.text=String(this._curWomen.lv),1<=this._curWomen.sk.sl?this.star1.source="v1_img_star1_png":this.star1.source="v1_img_star2_png",2<=this._curWomen.sk.sl?this.star2.source="v1_img_star1_png":this.star2.source="v1_img_star2_png",3<=this._curWomen.sk.sl?this.star3.source="v1_img_star1_png":this.star3.source="v1_img_star2_png",4<=this._curWomen.sk.sl?this.star4.source="v1_img_star1_png":this.star4.source="v1_img_star2_png",5<=this._curWomen.sk.sl?this.star5.source="v1_img_star1_png":this.star5.source="v1_img_star2_png",6<=this._curWomen.sk.sl?this.star6.source="v1_img_star1_png":this.star6.source="v1_img_star2_png",7<=this._curWomen.sk.sl?this.star7.source="v1_img_star1_png":this.star7.source="v1_img_star2_png"},t.prototype.updateCost=function(){if(this.costGroup.visible=!0,this.maxLb.visible=!1,this.accessMaterial.visible=!0,this.upStarRp.visible=!1,this.upStar.visible=!0,this.upStar.touchEnabled=!0,this.upStar.filters=[],this.canUpStar()){var t=this._curWomen.sk,e=M11.FJ2(t.si,t.sl),i=Number(e.cost.split(":")[0]),s=Number(e.cost.split(":")[1]),o=N12.gID(""+i);this.itemBg.source=N12.FL5(i),this.itemIcon.source=N12.FJ86(i),O5.FB13(this.itemDesc,o.name+"*"+s,o.quality,2,!0);var r=N12.giC(i);this.itemOwn.textFlow=s<=r?(this.upStarRp.visible=!0,M18.HTP.parser(O3.tr(3015,r))):(this.upStarRp.visible=!1,M18.HTP.parser(O3.tr(3014,r)))}else this.costGroup.visible=!1,this.maxLb.visible=!0,this.upStar.visible=!1,this.accessMaterial.visible=!1},t.prototype.canUpStar=function(){return this._curWomen.sk.sl<M11.FD48(this._curWomen.sk.si)},t.prototype.ZJ57=function(){this.upStarGroup.visible=!0,this.maxSkill.visible=!1;var t=this._curWomen.sk;if(t.sl!=M11.FD48(t.si)){var e=M11.FJ2(t.si,t.sl);this.curSkill.ZP81(e);var i=M11.FJ2(t.si,t.sl+1);this.nextSkill.ZP81(i)}else{this.upStarGroup.visible=!1,this.maxSkill.visible=!0;var s=M11.FJ2(t.si,t.sl);this.maxSkill.ZP81(s)}},t.prototype.ZM25=function(){var t=App.CM.gtM(O6.C3),e=t.ps.slice(0),i={},s=t.war,o=e.length,r=s.length;if(e&&0<e.length)for(var n=0;n<e.length;n++){var a=e[n],h=THH23.FF56(a.id,a.lv,a.exp);i=THH23.FJ8(h,i)}var p=THH23.FC69(),l=M11.FJ3(p),c={};l&&l.attr&&(c=THH23.FL92(l.attr)),i=THH23.FJ8(c,i);var u=O4.getScore(i)+t.ZP86()+t.ZHH41()+t.ZM47();this.totalScore.textFlow=M18.HTP.parser(O3.tr(3008,u)),this.active.textFlow=M18.HTP.parser(O3.tr(3009,o)),this.battle.textFlow=M18.HTP.parser(O3.tr(3009,r+"/2"))},t.prototype.ZP81=function(){var t=this._curWomen.sk;this.skillMiddle.ZP81(t)},t.prototype.endScroller=function(){if(App.CM.gtM(O6.C3).scrollerH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&""!=r.point){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&""!=n.point){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.close.call(this,t),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.stumbles.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doStumbles,this),this.skillGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.stateGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doOpenBattle,this),this.upStar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpStar,this),this.accessMaterial.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM42,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doActive,this),this.curSkill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.nextSkill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZF95,this),this.cardImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT81,this),this.itemGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showCostItem,this),this.maxSkill.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.cardTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpPage,this),this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null,this._itemArray.removeAll(),this._curWomen=null},t.prototype.checkScore=function(){App.VM.open(O7.B72,this._curWomen)},t.prototype.doStumbles=function(){App.VM.open(O7.E87)},t.prototype.ZP83=function(){App.VM.open(O7.G68,this._curWomen.sk)},t.prototype.ZF95=function(){var t=this._curWomen.sk.si,e=this._curWomen.sk.sl+1,i={};i.si=t,i.sl=e,App.VM.open(O7.G68,i)},t.prototype.doAddition=function(){App.VM.open(O7.E89,this._curWomen)},t.prototype.doOpenBattle=function(){if(""==this._curWomen.fight)App.VM.open(O7.E88,this._curWomen.id);else{for(var t=0,e=App.CM.gtM(O6.C3).war,i=0;i<e.length;i++){var s=e[i];if(s.v==this._curWomen.id){t=s.k;break}}this.apF(N2.A45,0,t)}},t.prototype.doUpStar=function(){if(this.canUpStar()){var t=this._curWomen.sk,e=M11.FJ2(t.si,t.sl),i=Number(e.cost.split(":")[0]),s=Number(e.cost.split(":")[1]);if(N12.giC(i)<s){var o=O3.tr(3013,N12.FK5(i));P18.sDP(o)}else this.apF(N2.A21,this._curWomen.id,t.si)}else P18.sDP(O3.tr(5690))},t.prototype.ZM42=function(){App.VM.open(O7.HH98,O7.G57,P12.A23)},t.prototype.jumpPage=function(){this._curWomen.showid&&TG84.FM16(this._curWomen.showid)},t}(BaseEuiView);__reflect(WomenUpStarView.prototype,"WomenUpStarView");var women,WomenView=function(l){function t(t,e){var i=l.call(this,t,e)||this;return i._lastLv=-1,i._viewName="WomenView",i.skinName="WomenSkin",i}return __extends(t,l),t.prototype.initUI=function(){l.prototype.initUI.call(this),this.itemList.horizontalCenter=NaN,this.itemList.left=NaN,this.leftBtn.imgNew.top=18,this.leftBtn.imgNew.right=15,this.rightBtn.imgNew.top=18,this.rightBtn.imgNew.right=15,this.lbStr1.textFlow=M18.HTP.parse(O3.tr(4742)),this.lbStr2.textFlow=M18.HTP.parse(O3.tr(4743)),this.lbStr3.textFlow=M18.HTP.parse(O3.tr(4744)),this.lbStr4.textFlow=M18.HTP.parse(O3.tr(4745)),this.lbStr5.textFlow=M18.HTP.parse(O3.tr(4746)),this.lbGetwayTip.textFlow=M18.HTP.parse(O3.tr(4748)),this.upLevel.label=O3.tr(4750),this.autoUp.label=O3.tr(4751),this.stopAuto.label=O3.tr(4752),this.activeBtn.label=O3.tr(4753),this.autoBuy.label=O3.tr(4754)},t.prototype.initData=function(){l.prototype.initData.call(this),this._itemArray=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArray,this.itemList.itemRenderer=WomenHead},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.prototype.open.call(this,t);var i=App.CM.gtM(O6.C3),s=i.selectWomen;s&&(this._curWomen?this._curWomen&&this._curWomen.id!=s.id&&(this._curWomen=null,this._curWomen=s,this._curWomen.viewName=this._viewName):(this._curWomen=s,this._curWomen.viewName=this._viewName)),P7.FD53(this.activeBtn,1),this.itemScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.scoreCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.stumbles.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doStumbles,this),this.skillMiddle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.stateGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doOpenBattle,this),this.upLevel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doStopAuto,this),this.activeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doActive,this),this.cardImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT81,this),this.cardTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpPage,this),this.btnFavorable.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM43,this),this.autoBuy.addEventListener(egret.Event.CHANGE,this.autoSmelt,this),this.btnRedmakeup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM45,this),this.btnMindMain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP84,this),this.ZU92(),this.ZHH3(i),this.ZT42();var o=App.CM.gtM(O6.B34);this.btnRedmakeup.imgNew.visible=0<o.FL35()},t.prototype.autoSmelt=function(){TG40.playClickEffect()},t.prototype.ZT42=function(){this.womenObj&&(this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null);var t={id:this._curWomen.model,x:0,y:0,dir:Dir.br,objType:P13.A6,bt:BehaviourType.Attack_d,sr:1};this.womenObj=new FightGameObject,this.womenObj.setData(t,this.wGroup),this.womenObj.action=Action.Stand},t.prototype.uBM=function(t){for(var e=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];l.prototype.uBM.call(this,t,i);var o=i[0];if(t instanceof TG77)if(o===P4.R46){var r=t.getWomenData(this._curWomen.id),n=r.exp-this.processBar.value,a=n/this.processBar.maximum*1e3;a<200&&(a=200),egret.Tween.get(this.processBar).to({value:r.exp},a).call(function(){e.lbAddExp.visible=!0,e.lbAddExp.text="+"+n,egret.Tween.get(e.lbAddExp).to({top:-30},100).call(function(){e.lbAddExp.top=-15,e.lbAddExp.visible=!1,e.ZHH3(t)})})}else this.ZHH3(t);else if(t instanceof THH9){var h=App.CM.gtM(O6.C3);this.ZHH3(h);var p=App.CM.gtM(O6.B34);this.btnRedmakeup.imgNew.visible=0<p.FL35()}else t instanceof RedMakeup.Model&&(this.btnRedmakeup.imgNew.visible=0<t.FL35())},t.prototype.ZT81=function(){var t=N12.gID(this._curWomen.item),e=N12.giC(this._curWomen.item);App.CM.apF(O6.C11,O14.A15,t,e)},t.prototype.ZM43=function(){App.CM.apF(O6.C3,N2.A39)},t.prototype.ZHH3=function(t){P7.FD53(this.btnFavorable,t.ZT82()),P7.FD53(this.btnMindMain,t.ZY38()),this.itemScroller.viewport.scrollH=t.scrollerH;var e=THH23.FJ6(this._curWomen,this._viewName);P7.ObjectSet(this._itemArray.source,e);for(var i=0;i<e.length;i++)if(1==e[i].select){this._curWomen=e[i];break}t.selectWomen=null,t.selectWomen=this._curWomen,this._itemArray.refresh(),5<this._itemArray.length?(this.leftBtn.visible=!0,this.rightBtn.visible=!0,this.itemList.horizontalCenter=NaN,this.itemList.left=0):(this.leftBtn.visible=!1,this.rightBtn.visible=!1,this.itemList.horizontalCenter=0,this.itemList.left=NaN);var s=THH23.FF56(this._curWomen.id,this._curWomen.lv,this._curWomen.exp),o=O4.getScore(s),r=t.getWomenBFB();this.score.text=String(Math.ceil(o*(1+r))),1==this._curWomen.have?(this.activeLvGroup.visible=!0,this.noActiveLvGroup.visible=!1,this.activeGroup.visible=!0,this.noActiveGroup.visible=!1,this.stateGroup.visible=!0,this.updateLv(),this.updateState(),this.ZM44(),this.updateCost()):(this.activeLvGroup.visible=!1,this.noActiveLvGroup.visible=!0,this.activeGroup.visible=!1,this.noActiveGroup.visible=!0,this.updateCard(),this.stateGroup.visible=!1),this.ZP81(),this.ZM25(),this.endScroller()},t.prototype.updateCard=function(){this.cardBg.source=N12.FL5(this._curWomen.item),this.cardIcon.source=N12.FJ86(this._curWomen.item);var t=N12.giC(this._curWomen.item),e=N12.FK5(this._curWomen.item);this.lbActCostName.text=e,this.lbActiveCost.textFlow=M18.HTP.parse(O3.tr(4747,t)),1<=t?(this.lbActiveCost.textColor=_cc.dgreen,this.cardTip.visible=!1,this.hideActiveGrp.visible=!0):(this.lbActiveCost.textColor=_cc.red,this.cardTip.visible=!0,this.hideActiveGrp.visible=!1,this.cardTip.text=this._curWomen.gainway,this._curWomen.showid?M18.FHH83(this.cardTip):M18.FF64(this.cardTip)),this.lbGetwayTip.visible=this.cardTip.visible},t.prototype.updateLv=function(){this.level.text=String(this._curWomen.lv),1<=this._curWomen.sk.sl?this.star1.source="v1_img_star1_png":this.star1.source="v1_img_star2_png",2<=this._curWomen.sk.sl?this.star2.source="v1_img_star1_png":this.star2.source="v1_img_star2_png",3<=this._curWomen.sk.sl?this.star3.source="v1_img_star1_png":this.star3.source="v1_img_star2_png",4<=this._curWomen.sk.sl?this.star4.source="v1_img_star1_png":this.star4.source="v1_img_star2_png",5<=this._curWomen.sk.sl?this.star5.source="v1_img_star1_png":this.star5.source="v1_img_star2_png",6<=this._curWomen.sk.sl?this.star6.source="v1_img_star1_png":this.star6.source="v1_img_star2_png",7<=this._curWomen.sk.sl?this.star7.source="v1_img_star1_png":this.star7.source="v1_img_star2_png"},t.prototype.updateCost=function(){var t=this._curWomen.lv,e=M11.FL18(t),i=M11.gIV("womanAdvItem"),s=N12.gID(i);this.costIcon.setData(s);var o=N12.giC(i);this.cost.text=o+"/"+e.elixir,this.canUpLevel()||(this.cost.text=o+"/0"),this.cost.textColor=o>=e.elixir?2987793:14164514;var r=N12.gID(""+pack.I11.COIN);this.coinIcon.setData(r);var n=App.CM.gtM(O6.B82).avatarInfo.co;if(this.costCoin.text=String(e.cash),this.costCoin.textColor=n>=e.cash?2987793:14164514,this.canUpLevel()||(this.costCoin.text="0"),!this._timerHandler){if(P7.FD53(this.upLevel,0),this.upLevel.filters=[],this.upLevel.touchEnabled=!0,P7.FD53(this.autoUp,0),this.autoUp.filters=[],this.autoUp.touchEnabled=!0,!this.canUpLevel())return P7.FD53(this.upLevel,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,P7.FD53(this.autoUp,0),this.autoUp.filters=[P16.GrayMatrixFilter],void(this.autoUp.touchEnabled=!1);o>=e.elixir&&n>=e.cash&&!this._timerHandler?(P7.FD53(this.autoUp,1),P7.FD53(this.upLevel,1)):(P7.FD53(this.autoUp,0),P7.FD53(this.upLevel,0))}},t.prototype.ZM44=function(){var t=this._curWomen.lv;t>this._lastLv&&this.ZU92(),this._lastLv=t;var e=this._curWomen.exp,i=M11.FL18(t);this.canUpLevel()?(this.processBar.labelFunction=null,this.processBar.minimum=0,this.processBar.maximum=i.exp,this.processBar.value=e,this.buyGroup.visible=!0):(this.processBar.labelFunction=function(t,e){return O3.tr(1463)},this.processBar.maximum=this.processBar.value=100,this.processBar.imgShort.width=0,this.buyGroup.visible=!1)},t.prototype.ZM25=function(){var t=App.CM.gtM(O6.C3),e=t.ps.slice(0),i={},s=t.war,o=e.length,r=s.length;if(e&&0<e.length)for(var n=0;n<e.length;n++){var a=e[n],h=THH23.FF56(a.id,a.lv,a.exp);i=THH23.FJ8(h,i)}var p=THH23.FC69(),l=M11.FJ3(p),c={};l&&l.attr&&(c=THH23.FL92(l.attr)),i=THH23.FJ8(c,i);var u=O4.getScore(i)+t.ZP86()+t.ZHH41()+t.ZM47();this.totalScore.textFlow=M18.HTP.parser(O3.tr(3008,u)),this.active.textFlow=M18.HTP.parser(O3.tr(3009,o)),this.battle.textFlow=M18.HTP.parser(O3.tr(3010,r+"/2"))},t.prototype.updateState=function(){var t=App.CM.gtM(O6.C3).war,e=0;t&&(e=t.length);var i=this._curWomen.fight;this.btnState.stateRp.visible=""==i?(this.btnState.stateDesc.text=O3.tr(3012),e<2):(this.btnState.stateDesc.text=O3.tr(3011),!1)},t.prototype.ZP81=function(){var t=this._curWomen.sk;this.skillMiddle.ZP81(t)},t.prototype.endScroller=function(){if(App.CM.gtM(O6.C3).scrollerH=this.itemScroller.viewport.scrollH,this.itemScroller.validateNow(),this.leftBtn.visible=!(this.itemScroller.viewport.scrollH<=0),this.itemScroller.viewport.contentWidth<=this.itemScroller.width)this.rightBtn.visible=!1;else{this.itemScroller.width+this.itemScroller.viewport.scrollH>=this.itemScroller.viewport.contentWidth?this.rightBtn.visible=!1:this.rightBtn.visible=!0,this.leftBtn.imgNew.visible=!1,this.rightBtn.imgNew.visible=!1;for(var t=this.itemScroller.viewport.scrollH,e=1;85<=t;)t-=85,e++;var i=e+5-1,s=this._itemArray.getItemAt(this._itemArray.length-1);if(i>s.index&&(i=s.index),this.leftBtn.visible)for(var o=0;o<this._itemArray.length;o++){var r=this._itemArray.getItemAt(o);if(!(r.index>=e)&&""!=r.point){this.leftBtn.imgNew.visible=!0;break}}if(this.rightBtn.visible)for(o=0;o<this._itemArray.length;o++){var n=this._itemArray.getItemAt(o);if(!(n.index<=i)&&""!=n.point){this.rightBtn.imgNew.visible=!0;break}}}},t.prototype.doLeft=function(){var t=this.itemScroller.viewport.scrollH-500;this.itemScroller.viewport.scrollH=t<0?0:t,this.endScroller()},t.prototype.doRight=function(){var t=this.itemScroller.viewport.scrollH+500;t+this.itemScroller.width>=this.itemScroller.viewport.contentWidth?this.itemScroller.viewport.scrollH=this.itemScroller.viewport.contentWidth-this.itemScroller.width:this.itemScroller.viewport.scrollH=t,this.endScroller()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.prototype.close.call(this,t),this.ZN41(),this.btnRedmakeup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM45,this),this.itemScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doLeft,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doRight,this),this.scoreCheck.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkScore,this),this.stumbles.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doStumbles,this),this.skillMiddle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP83,this),this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAddition,this),this.stateGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doOpenBattle,this),this.upLevel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpLevel,this),this.autoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doAutoUp,this),this.stopAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doStopAuto,this),this.activeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doActive,this),this.cardImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZT81,this),this.cardTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpPage,this),this.btnFavorable.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZM43,this),this.autoBuy.removeEventListener(egret.Event.CHANGE,this.autoSmelt,this),this._timerHandler&&this.ZU92(),this.wGroup.removeChildren(),this.womenObj.destory(),this.womenObj=null,this._itemArray.removeAll(),this._curWomen=null},t.prototype.ZN41=function(){egret.Tween.removeTweens(this.processBar),egret.Tween.removeTweens(this.lbAddExp)},t.prototype.doActive=function(){if(N12.giC(this._curWomen.item)<1){var t=N12.gID(this._curWomen.item),e=O3.tr(3013,t.name);P18.sDP(e)}else this.apF(N2.A25,this._curWomen.id)},t.prototype.checkScore=function(){App.VM.open(O7.B72,this._curWomen)},t.prototype.doStumbles=function(){App.VM.open(O7.E87)},t.prototype.ZP83=function(){App.VM.open(O7.G68,this._curWomen.sk)},t.prototype.doAddition=function(){App.VM.open(O7.E89,this._curWomen)},t.prototype.doOpenBattle=function(){if(""==this._curWomen.fight)App.VM.open(O7.E88,this._curWomen.id);else{for(var t=0,e=App.CM.gtM(O6.C3).war,i=0;i<e.length;i++){var s=e[i];if(s.v==this._curWomen.id){t=s.k;break}}this.apF(N2.A45,0,t)}},t.prototype.canExpend=function(){App.CM.gtM(O6.C3).useGoldForwardWomenView?this.ZT56():App.VM.open(O7.HH38,M18.FG71(O3.tr(3406)),this,this.ZT56,void 0,this.ZU92,void 0)},t.prototype.doUpLevel=function(){if(!this.canUpLevel())return P18.sDP(O3.tr(5690)),void this.ZU92();var t=App.CM.gtM(O6.B82).avatarInfo,e=Number(this.costCoin.text);if(t.co<e)return App.VM.open(O7.F12),void this.ZU92();var i=this.cost.text,s=Number(i.split("/")[0]),o=Number(i.split("/")[1]),r=o<=s;if(this.autoBuy.selected)if(r)this.apF(N2.A27,this._curWomen.id,1);else{var n=M11.gIV("womanAdvItem"),a=N15.FA50(n)*(o-s);if(!(0<a&&t.bg>=a))return App.CM.gtM(O6.C3).useGoldForwardWomenView?void this.ZT56():void this.canExpend();this.apF(N2.A27,this._curWomen.id,2)}else{if(!r){n=M11.gIV("womanAdvItem");return App.VM.open(O7.G87,n,o-s),void this.ZU92()}this.apF(N2.A27,this._curWomen.id,1)}},t.prototype.ZT56=function(){var t=App.CM.gtM(O6.C3);t.useGoldForwardWomenView||(t.useGoldForwardWomenView=!0),this._timerHandler?(this.ZU92(),this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.autoUp,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,this._timerHandler=App.K16.doTimer(200,0,this.ZM41,this)):this.ZM41()},t.prototype.canUpLevel=function(){return this._curWomen.lv<M11.FHH72()},t.prototype.ZM41=function(){if(!this.canUpLevel())return P18.sDP(O3.tr(5690)),void this.ZU92();var t=App.CM.gtM(O6.B82).avatarInfo,e=Number(this.costCoin.text);if(t.co<e)return App.VM.open(O7.F12),void this.ZU92();var i=this.cost.text,s=Number(i.split("/")[0]),o=Number(i.split("/")[1]),r=o<=s;if(this.autoBuy.selected)if(r)this.apF(N2.A27,this._curWomen.id,1);else{var n=M11.gIV("womanAdvItem"),a=N15.FA50(n)*(o-s),h=N15.FB92(n)*(o-s);if(0<a&&t.bg>=a)this.apF(N2.A27,this._curWomen.id,2);else{if(!(0<h&&t.g>=h))return P7.FA78(),void this.ZU92();this.apF(N2.A27,this._curWomen.id,3)}}else{if(!r){n=M11.gIV("womanAdvItem");return App.VM.open(O7.G87,n,o-s),void this.ZU92()}this.apF(N2.A27,this._curWomen.id,1)}},t.prototype.doAutoUp=function(){this.stopAuto.visible=!0,this.autoUp.visible=!1,P7.FD53(this.upLevel,0),this.upLevel.filters=[P16.GrayMatrixFilter],this.upLevel.touchEnabled=!1,this._timerHandler=App.K16.doTimer(200,0,this.doUpLevel,this)},t.prototype.doStopAuto=function(){this.ZU92()},t.prototype.ZM45=function(){App.CM.apF(O6.B34,RedMakeup.Const.OPEN_MAIN_VIEW)},t.prototype.ZP84=function(){if(TE10.FG62(!0))if(App.CM.gtM(O6.C3).has(this._curWomen.id))App.CM.apF(O6.C3,N2.A47);else{var t=O3.tr(7971);P18.sDP(t)}},t.prototype.ZU92=function(){this._timerHandler&&(App.K16.rBH(this._timerHandler),this._timerHandler=null),this.stopAuto.visible=!1,this.autoUp.visible=!0,this.upLevel.filters=[],this.upLevel.touchEnabled=!0,this._curWomen&&this._curWomen.lv&&this.updateCost()},t.prototype.jumpPage=function(){this._curWomen.showid&&TG84.FM16(this._curWomen.showid)},t}(BaseEuiView);__reflect(WomenView.prototype,"WomenView"),function(t){var e=function(){};(women||(women={})).FormationSkillVo=e,__reflect(e.prototype,"women.FormationSkillVo")}(),function(t){var e=function(){};(women||(women={})).FormationVo=e,__reflect(e.prototype,"women.FormationVo")}(),function(t){var e=function(){};(women||(women={})).GeneralSkillVo=e,__reflect(e.prototype,"women.GeneralSkillVo")}(),function(t){var e=function(){};(women||(women={})).GeneralVo=e,__reflect(e.prototype,"women.GeneralVo")}(),function(t){var e=function(){};(women||(women={})).PartnerSkillVo=e,__reflect(e.prototype,"women.PartnerSkillVo")}(),function(t){var e=function(){};(women||(women={})).PartnerVo=e,__reflect(e.prototype,"women.PartnerVo")}();var TA73=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I24,"WechatFollowView",t,K17.UI_Main_TOP),App.VM.register(O7.C78,"WechatAttentionView",t,K17.UI_Tips),t.wxFollowProxy=new TF54(t);var e=new TF53(t);return e.aLV(O7.HH30),e.aLV(O7.C78),t.rgF(I13.A3,t.GV44,t),t.rgF(I13.A4,t.GD9,t),t.rgF(I13.A1,t.GW81,t),t.rgF(I13.A2,t.GW82,t),t}return __extends(t,i),t.prototype.GW81=function(){this.wxFollowProxy.GW81()},t.prototype.GW82=function(t){if(200==t.head.state){var e=this.gtM();e.isShow=t.body.as,P5.sIs(t.body.ob),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GD9=function(){var t=this.gtM();App.VM.open(O7.C78),t.notify()},t.prototype.GV44=function(t){if(200==t.head.state){var e=this.gtM();e&&(e.s=t.body.s,e.notify())}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TA73.prototype,"TA73");var I13=function(){function t(){}return t.A3=10001,t.A4=10002,t.A1=10003,t.A2=10004,t}();__reflect(I13.prototype,"I13");var TF53=function(i){function t(t){var e=i.call(this,t)||this;return e.s=0,e.isAttention=0,e.isShow=0,e.isPopWin=!1,e}return __extends(t,i),t.prototype.notify=function(t){i.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TF53.prototype,"TF53");var TF54=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.F33,e.ZW86,e),e.rSM(P4.D8,e.GW82,e),e}return __extends(t,i),t.prototype.GW81=function(){var t={type:P4.D7,body:{}};this.sSM(t)},t.prototype.GW82=function(t){this.apF(I13.A2,t)},t.prototype.ZW86=function(t){this.apF(I13.A3,t)},t}(TG80);__reflect(TF54.prototype,"TF54");var WechatAttentionView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=WechatAttentionSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.btnAttention.label=O3.tr(6197)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(t){var e=this;s.prototype.open.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnAttention.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getAttention,this),P7.FK32()?(this.btnAttention.visible=!1,App.K16.doFrame(10,1,function(){if(App.VM.isOpen(O7.C78)){var t=e.btnAttention.parent.localToGlobal(e.btnAttention.x,e.btnAttention.y);platform.createAuthButton(e.getAttention,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_lqjiangli.png")}},this)):this.btnAttention.visible=!0,this.GX5()},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF53&&1==t.isShow&&(this.btnAttention.visible=!1,window.authButton&&window.authButton.destroy())},t.prototype.GX5=function(){this.showAward(J17.init.followReward2.value)},t.prototype.showAward=function(t){var e=M18.FL28(t,";"),i=[];for(var s in e){var o=M18.FL28(e[s],":"),r={itemData:{data:N12.gID(o[0]),ct:o[1]},isBottom:!1};i.push(r)}this.dataSource.replaceAll(i)},t.prototype.getAttention=function(){0==App.CM.gtM(O6.B48).isAttention?(this.closeSelf(),App.VM.open(O7.I24)):App.CM.apF(O6.B48,I13.A1)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.btnAttention.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getAttention,this),window.authButton&&window.authButton.destroy()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WechatAttentionView.prototype,"WechatAttentionView");var WechatFollowView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.sGN("release_wsfollow"),"wxgame"!==platform.name?i.skinName="WechatFollowSkin":i.skinName="WechatFollowSecSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),"wxgame"===platform.name&&("P0005722"==platform.gameId||"P0005723"==platform.gameId||"P0005686"==platform.gameId||"P0005687"==platform.gameId||"P0006087"==platform.gameId||"P0006088"==platform.gameId||"P0006294"==platform.gameId||"P0006295"==platform.gameId||"P0006338"==platform.gameId||"P0006339"==platform.gameId||"P0006416"==platform.gameId||"P0006417"==platform.gameId||"P0006489"==platform.gameId||"P0006490"==platform.gameId?(this.kefulink.text="",this.kefulink.verticalCenter="-101",this.kefulink.horizontalCenter="52",this.kefulink.width=194,this.kefulink.height=30,this.gzGp.visible=!1):M18.FHH83(this.kefulink))},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(t){s.prototype.open.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),"wxgame"===platform.name&&this.kefulink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpKefu,this),this.lb1.textFlow=M18.HTP.parser(O3.tr(3100)),this.lb2.textFlow=M18.HTP.parser(O3.tr(3101)),this.lb3.textFlow=M18.HTP.parser(O3.tr(3102)),this.lbd1.textFlow=M18.HTP.parser(O3.tr(3103)),this.lbd2.textFlow=M18.HTP.parser(O3.tr(3104)),this.showTxt();var e=App.CM.gtM(O6.B82);e.isWxRed=!1,e.notify()},t.prototype.showTxt=function(){var t="";switch(platform.gameId){case"PM001054":t=O3.tr(8116);break;case"PM001146":t=O3.tr(8379);break;case"PM001178":t=O3.tr(8467);break;case"PM001232":t=O3.tr(8574);break;case"PM001245":t=O3.tr(8607);break;case"PM001277":t=O3.tr(8732);break;case"PM001354":t=O3.tr(9009);break;default:t=O3.tr(3105)}this.lbd3.textFlow=M18.HTP.parser(t)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),"wxgame"===platform.name&&this.kefulink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.jumpKefu,this)},t.prototype.jumpKefu=function(){platform.callCenter()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WechatFollowView.prototype,"WechatFollowView");var J17=function(){function e(){}return e.FK35=function(t){e.init=t.share_init,e.share_everwd=t.share_everwd,e.share_accrwd=t.share_accrwd,e.share_invitrwd=t.share_invitrwd,e.share_invitlvrwd=t.share_invitlvrwd},e}();__reflect(J17.prototype,"J17");var K1=function(){function t(){}return t.A18=10001,t.A19=10002,t.A14=10003,t.A15=10004,t.A10=10005,t.A11=10006,t.A5=10007,t.A1=10008,t.A2=10009,t.A3=10010,t.A4=10011,t.A16=10012,t.A17=10013,t.A8=10014,t.A9=10015,t.A12=10016,t.A13=10017,t.A6=10018,t.A7=10019,t}();__reflect(K1.prototype,"K1");var TC86=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.F17,"WxFirstShareView",t,K17.UI_Popup),App.VM.register(O7.F65,"WxShareMainView",t,K17.UI_Main_TOP),t.wxShareProxy=new TF92(t);var e=new TF91(t);return e.aLV(O7.F17),e.aLV(O7.F65),e.aLV(O7.G89),e.aLV(O7.G90),e.aLV(O7.I22),e.aLV(O7.I47),e.aLV(O7.HH58),e.aLV(O7.HH30),t.rgF(K1.A18,t.GR84,t),t.rgF(K1.A19,t.GR85,t),t.rgF(K1.A14,t.GO5,t),t.rgF(K1.A15,t.GO6,t),t.rgF(K1.A10,t.GK29,t),t.rgF(K1.A11,t.GK30,t),t.rgF(K1.A5,t.GK28,t),t.rgF(K1.A1,t.GI35,t),t.rgF(K1.A2,t.GI36,t),t.rgF(K1.A3,t.GI37,t),t.rgF(K1.A4,t.GI38,t),t.rgF(K1.A16,t.GQ4,t),t.rgF(K1.A17,t.GQ5,t),t.rgF(K1.A8,t.GM8,t),t.rgF(K1.A9,t.GM9,t),t.rgF(K1.A12,t.GO7,t),t.rgF(K1.A13,t.GO8,t),t.rgF(K1.A6,t.GK31,t),t.rgF(K1.A7,t.GK32,t),t}return __extends(t,i),t.prototype.GR84=function(){return this.wxShareProxy.GR84()},t.prototype.GR85=function(t){if(200==t.head.state){var e=this.gtM();e.ZN43(t.body),App.CM.gtM(O6.B48).isShow=t.body.as,App.CM.gtM(O6.B74).qt=t.body.qt,e.notify(P4.X38)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GK28=function(t){if(200==t.head.state){var e=this.gtM();e.evs=t.body.evs,e.evtk=t.body.evtk,e.notify(P4.O64)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GO5=function(){this.wxShareProxy.ZT88()},t.prototype.GO6=function(t){if(200==t.head.state){var e=this.gtM();e.fs=t.body.fs,e.setCd(t.body.cd),e.evs=t.body.evs,e.acs=t.body.acs,e.notify(P4.Q53)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GK29=function(){this.wxShareProxy.ZM50()},t.prototype.GK30=function(t){if(200==t.head.state){var e=this.gtM();e.fs=t.body.fs,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.I66)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI35=function(t){this.wxShareProxy.GI35(t)},t.prototype.GI36=function(t){if(200==t.head.state){var e=this.gtM();e.evtk=t.body.evtk,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.E15)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GI37=function(t){this.wxShareProxy.GI37(t)},t.prototype.GI38=function(t){if(200==t.head.state){var e=this.gtM();e.actk=t.body.actk,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.C29)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ4=function(){return this.wxShareProxy.GQ4()},t.prototype.GQ5=function(t){if(200==t.head.state){var e=this.gtM();e.inv=t.body.inv,e.inv=e.inv.sort(function(t,e){return t.idx<e.idx?-1:1}),e.invCoin=t.body.invCoin,e.red=t.body.red,e.red=e.red.sort(function(t,e){return t.time<e.time?-1:1}),e.itk=t.body.itk,e.lvtk=t.body.lvtk,e.isRead=t.body.isRead,e.notify(P4.C31)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GM8=function(t){this.wxShareProxy.GM8(t)},t.prototype.GM9=function(t){if(200==t.head.state){var e=this.gtM();e.itk=t.body.itk,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.E17)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GO7=function(t){this.wxShareProxy.GO7(t)},t.prototype.GO8=function(t){if(200==t.head.state){var e=this.gtM();e.lvtk=t.body.lvtk,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.F32)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GK31=function(t){this.wxShareProxy.GK31(t)},t.prototype.GK32=function(t){if(200==t.head.state){var e=this.gtM();e.invCoin=t.body.invCoin,e.red=t.body.red,e.red=e.red.sort(function(t,e){return t.time<e.time?-1:1}),t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.T78)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TC86.prototype,"TC86");var TF91=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.ZN43=function(t){this.fs=t.fs,this.evs=t.evs,this.evtk=t.evtk,this.acs=t.acs,this.actk=t.actk,this.cd=t.cd,this.lastRefreshTime=P6.getTime(!0),this.isRead=t.isRead},t.prototype.getCd=function(){var t;return(t=this.cd-(P6.getTime(!0)-this.lastRefreshTime))<0?0:t},t.prototype.setCd=function(t){this.cd=t,this.lastRefreshTime=P6.getTime(!0)},t.prototype.ZA96=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=J17.init.unlockLv.value;if(e.l<i)return t;for(var s in J17.share_everwd){var o=J17.share_everwd[s];if(-1===this.evtk.indexOf(o.id)&&this.evs>=o.times)return t=!0}return t},t.prototype.ZA97=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=J17.init.unlockLv.value;if(e.l<i)return t;for(var s in J17.share_accrwd){var o=J17.share_accrwd[s];if(-1===this.actk.indexOf(o.id)&&this.acs>=o.times)return t=!0}return t},t.prototype.ZB66=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=J17.init.unlockLv.value;if(e.l<i)return t;if(!this.inv||this.inv.length<=0)return t;for(var s in J17.share_invitrwd){var o=J17.share_invitrwd[s];if(-1===this.itk.indexOf(o.id)&&this.inv.length>=o.times)return t=!0}return t},t.prototype.ZC31=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=J17.init.unlockLv.value;if(e.l<i)return t;if(!this.inv||this.inv.length<=0)return t;var s=0;for(var o in J17.share_invitlvrwd){var r=this.inv[s]&&100<=this.inv[s].maxLv,n=J17.share_invitlvrwd[o];if(r&&-1===this.lvtk.indexOf(n.id)&&this.inv.length>=n.times)return t=!0;s++}return t},t.prototype.ZB31=function(){var t=!1,e=App.CM.gtM(O6.B82).avatarInfo,i=J17.init.unlockLv.value;return e.l<i?t:!this.red||this.red.length<=0?t:t=!0},t.prototype.notify=function(t){e.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TF91.prototype,"TF91");var TF92=function(i){function t(t){var e=i.call(this,t)||this;return e.rSM(P4.O64,e.GK28,e),e}return __extends(t,i),t.prototype.GK28=function(t){this.apF(K1.A5,t)},t.prototype.GR84=function(){var s=this;return new Promise(function(e,t){var i={type:P4.X37,body:{}};s.rSMO(P4.X38,function(t){s.apF(K1.A19,t),e("加载分享信息完成")},s),s.sSM(i)})},t.prototype.ZT88=function(){var t={type:P4.Q52,body:{}};this.rSMO(P4.Q53,this.ZT89,this),this.sSM(t)},t.prototype.ZT89=function(t){this.apF(K1.A15,t)},t.prototype.ZM50=function(){var t={type:P4.I65,body:{}};this.rSMO(P4.I66,this.ZM51,this),this.sSM(t)},t.prototype.ZM51=function(t){this.apF(K1.A11,t)},t.prototype.GI35=function(t){var e={type:P4.E14,body:{id:t}};this.rSMO(P4.E15,this.GI36,this),this.sSM(e)},t.prototype.GI36=function(t){this.apF(K1.A2,t)},t.prototype.GI37=function(t){var e={type:P4.C28,body:{id:t}};this.rSMO(P4.C29,this.GI38,this),this.sSM(e)},t.prototype.GI38=function(t){this.apF(K1.A4,t)},t.prototype.GQ4=function(){var s=this;return new Promise(function(e,t){var i={type:P4.C30,body:{}};s.rSMO(P4.C31,function(t){s.apF(K1.A17,t),e("加载邀请信息完成")},s),s.sSM(i)})},t.prototype.GM8=function(t){var e={type:P4.E16,body:{id:t}};this.rSMO(P4.E17,this.GM9,this),this.sSM(e)},t.prototype.GM9=function(t){this.apF(K1.A9,t)},t.prototype.GO7=function(t){var e={type:P4.F31,body:{id:t}};this.rSMO(P4.F32,this.GO8,this),this.sSM(e)},t.prototype.GO8=function(t){this.apF(K1.A13,t)},t.prototype.GK31=function(t){var e={type:P4.T77,body:{uid:t}};this.rSMO(P4.T78,this.GK32,this),this.sSM(e)},t.prototype.GK32=function(t){this.apF(K1.A7,t)},t}(TG80);__reflect(TF92.prototype,"TF92");var WxFriendItem=function(i){function t(){var t=i.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,i),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP93,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZP93,this)},t.prototype.ZP93=function(){"friend"===this.data.type?App.CM.apF(O6.B68,K1.A8,this.data.id):"level"===this.data.type&&App.CM.apF(O6.B68,K1.A12,this.data.id)},t.prototype.dataChanged=function(){if(i.prototype.dataChanged.call(this),this.friendName&&this.data.friendName&&(this.friendName.text=this.data.friendName),this.wximg&&this.data.wximg&&(this.wximg.source=this.data.wximg,"v1_bg_haoyoufxcw_png"==this.data.wximg?(this.wximg.width=58,this.wximg.height=59):(this.wximg.width=88,this.wximg.height=88)),this.lv&&(this.lv.text=this.data.lv),this.awardLb&&this.data.awardLb&&(this.awardLb.text=this.data.awardLb),this.coinIcon){var t=N12.gID(75009);this.coinIcon.source=t.icon}this.btnGet&&(this.btnGet.visible=!0,0==this.data.state?(this.btnGet.filters=[THH23.colorFlilter],this.btnGet.touchEnabled=!1,this.btnGet.label=O3.tr(5917),this.btnGet.imgNew.visible=!1):1==this.data.state?(this.btnGet.filters=[],this.btnGet.touchEnabled=!0,this.btnGet.label=O3.tr(5918),this.btnGet.imgNew.visible=!0):this.btnGet.visible=!1),this.hasGet&&(this.hasGet.visible=2==this.data.state)},t.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),this.data},t}(eui.ItemRenderer);__reflect(WxFriendItem.prototype,"WxFriendItem");var WxShareItem=function(h){function t(){var t=h.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,h),t.prototype.open=function(){this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK36,this)},t.prototype.close=function(){this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ZK36,this)},t.prototype.ZK36=function(){"day"===this.data.type?App.CM.apF(O6.B68,K1.A1,this.data.id):"acc"===this.data.type&&App.CM.apF(O6.B68,K1.A3,this.data.id)},t.prototype.dataChanged=function(){if(h.prototype.dataChanged.call(this),this.shareTip&&this.data.shareTip&&(this.shareTip.text=this.data.shareTip),this.shareAward&&this.data.award){for(var t=this.data.award.split(";"),e=new eui.ArrayCollection,i=0;i<t.length;i++){var s=t[i].split(":")[0],o=t[i].split(":")[1],r=N12.gID(s),n={};n.data=r,n.ct=Number(o);var a={};a.itemData=n,a.isBottom=!1,e.addItem(a)}this.shareAward.dataProvider=e,this.shareAward.itemRenderer=ItemIcon}this.btnGet&&(this.btnGet.visible=!0,0==this.data.state?(this.btnGet.filters=[THH23.colorFlilter],this.btnGet.touchEnabled=!1,this.btnGet.label=O3.tr(5917),this.btnGet.imgNew.visible=!1):1==this.data.state?(this.btnGet.filters=[],this.btnGet.touchEnabled=!0,this.btnGet.label=O3.tr(5918),this.btnGet.imgNew.visible=!0):this.btnGet.visible=!1),this.hasGet&&(this.hasGet.visible=2==this.data.state)},t.prototype.partAdded=function(t,e){h.prototype.partAdded.call(this,t,e),this.data},t}(eui.ItemRenderer);__reflect(WxShareItem.prototype,"WxShareItem");var WxTabView=function(e){function t(){var t=e.call(this)||this;return t.skinName="WxTabViewSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.open,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.close,t),t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this)},t.prototype.childrenCreated=function(){e.prototype.createChildren.call(this)},t.prototype.onItemTap=function(){},t.prototype.dataChanged=function(){this.lbName.text=this.data.name||this.data,this.imgRedPoint.$setVisible(0<this.data.isShowRed)},t}(eui.ItemRenderer);__reflect(WxTabView.prototype,"WxTabView");var WxAcsShareView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WxShareSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shareBtn.label=O3.tr(4946)},t.prototype.initData=function(){s.prototype.initData.call(this),this.collection=new eui.ArrayCollection,this.awardList.dataProvider=this.collection,this.awardList.itemRenderer=WxShareItem},t.prototype.open=function(t){s.prototype.open.call(this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.shareWord.source="v1_bg_haoyoufxwenzi2_png",this.ZR14(),this.updateAwards(),this.ZV31(),this.endScroller(),this.GX5()},t.prototype.GX5=function(){var e=this;P7.FK32()?(this.shareBtn.visible=!1,App.K16.doFrame(5,1,function(){if(App.VM.isOpen(O7.G90)){var t=e.shareBtn.parent.localToGlobal(e.shareBtn.x,e.shareBtn.y);platform.createAuthButton(e.doShare,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_yaoqhaoyuo.png")}},this)):this.shareBtn.visible=!0},t.prototype.ZR14=function(){var t=J17.init.repeatShareLimit.value,e=App.CM.gtM(O6.B68);this.shareTimeLb.textFlow=M18.HTP.parser(O3.tr(3117,e.acs,t))},t.prototype.updateAwards=function(){var t=new Array,e=App.CM.gtM(O6.B68),i=e.acs,s=e.actk||[];for(var o in J17.share_accrwd){var r=J17.share_accrwd[o],n={};n.id=r.id,n.shareTip=O3.tr(3115,r.times),n.award=r.reward,n.times=r.times,n.type="acc",-1!==s.indexOf(r.id)?n.state=2:i>=r.times?n.state=1:n.state=0,t.push(n)}t.sort(this.sortAward),this.collection.replaceAll(t)},t.prototype.sortAward=function(t,e){var i={1:1,0:2,2:3};return i[t.state]<i[e.state]?-1:i[t.state]==i[e.state]&&t.times<e.times?-1:1},t.prototype.ZV31=function(){var t=App.CM.gtM(O6.B68);if(this.shareCD=t.getCd(),this.shareCD<=0)this.shareCdLb.visible=!1;else{this.shareCdLb.visible=!0;var e=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,e)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,e)),this.cdTimer=App.K16.doTimer(1e3,this.shareCD,this.refreshCdTip,this,this.ZV31,this)}var i=N12.gID(75009),s=N12.giC(75009);this.shareCoinIcon.source=i.icon,this.shareCoinLb.text=""+s},t.prototype.refreshCdTip=function(){App.CM.gtM(O6.B68);this.shareCD--;var t=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,t)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,t))},t.prototype.endScroller=function(){this.awardScroller.validateNow(),this.upArrow.visible=!(this.awardScroller.viewport.scrollV<=0),this.awardScroller.viewport.contentHeight<=this.awardScroller.height?this.downArrow.visible=!1:this.awardScroller.height+this.awardScroller.viewport.scrollV>=this.awardScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.awardScroller.viewport.scrollV-415;this.awardScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.awardScroller.viewport.scrollV+415;t+this.awardScroller.height>=this.awardScroller.viewport.contentHeight?this.awardScroller.viewport.scrollV=this.awardScroller.viewport.contentHeight-this.awardScroller.height:this.awardScroller.viewport.scrollV=t,this.endScroller()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF91)switch(e){case P4.Q53:this.ZR14(),this.updateAwards(),this.ZV31(),this.endScroller();break;case P4.C29:this.updateAwards(),this.ZV31()}t instanceof THH14&&this.ZV31()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.collection.removeAll(),this.cdTimer&&(App.K16.rBH(this.cdTimer),this.cdTimer=null),window.authButton&&window.authButton.destroy()},t.prototype.doBtnClick=function(){0<App.CM.gtM(O6.B68).getCd()?P18.sDP(O3.tr(7089)):this.doShare()},t.prototype.doShare=function(){var t=App.CM.gtM(O6.B82);platform.share(t.avatarInfo.id,this.ZY40,this)},t.prototype.ZY40=function(){App.CM.gtM(O6.B68);this.apF(K1.A14)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxAcsShareView.prototype,"WxAcsShareView");var WxDayShareView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WxShareSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shareBtn.label=O3.tr(4946)},t.prototype.initData=function(){s.prototype.initData.call(this),this.collection=new eui.ArrayCollection,this.awardList.dataProvider=this.collection,this.awardList.itemRenderer=WxShareItem},t.prototype.open=function(t){s.prototype.open.call(this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.shareWord.source="v1_bg_haoyoufxwenzi1_png",this.ZR14(),this.updateAwards(),this.ZV31(),this.endScroller(),this.GX5()},t.prototype.GX5=function(){var e=this;P7.FK32()?(this.shareBtn.visible=!1,App.K16.doFrame(5,1,function(){if(App.VM.isOpen(O7.G89)){var t=e.shareBtn.parent.localToGlobal(e.shareBtn.x,e.shareBtn.y);platform.createAuthButton(e.doShare,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_yaoqhaoyuo.png")}},this)):this.shareBtn.visible=!0},t.prototype.ZR14=function(){var t=J17.init.dailyShareLimit.value,e=App.CM.gtM(O6.B68);this.shareTimeLb.textFlow=M18.HTP.parser(O3.tr(3108,e.evs,t))},t.prototype.updateAwards=function(){var t=new Array,e=App.CM.gtM(O6.B68),i=e.evs,s=e.evtk||[];for(var o in J17.share_everwd){var r=J17.share_everwd[o],n={};n.id=r.id,n.shareTip=O3.tr(3115,r.times),n.award=r.reward,n.times=r.times,n.type="day",-1!==s.indexOf(r.id)?n.state=2:i>=r.times?n.state=1:n.state=0,t.push(n)}t.sort(this.sortAward),this.collection.replaceAll(t)},t.prototype.sortAward=function(t,e){var i={1:1,0:2,2:3};return i[t.state]<i[e.state]?-1:i[t.state]==i[e.state]&&t.times<e.times?-1:1},t.prototype.ZV31=function(){var t=App.CM.gtM(O6.B68);if(this.shareCD=t.getCd(),this.shareCD<=0)this.shareCdLb.visible=!1;else{this.shareCdLb.visible=!0;var e=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,e)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,e)),this.cdTimer=App.K16.doTimer(1e3,this.shareCD,this.refreshCdTip,this,this.ZV31,this)}var i=N12.gID(75009),s=N12.giC(75009);this.shareCoinIcon.source=i.icon,this.shareCoinLb.text=""+s},t.prototype.refreshCdTip=function(){App.CM.gtM(O6.B68);this.shareCD--;var t=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,t)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,t))},t.prototype.endScroller=function(){this.awardScroller.validateNow(),this.upArrow.visible=!(this.awardScroller.viewport.scrollV<=0),this.awardScroller.viewport.contentHeight<=this.awardScroller.height?this.downArrow.visible=!1:this.awardScroller.height+this.awardScroller.viewport.scrollV>=this.awardScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.awardScroller.viewport.scrollV-415;this.awardScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.awardScroller.viewport.scrollV+415;t+this.awardScroller.height>=this.awardScroller.viewport.contentHeight?this.awardScroller.viewport.scrollV=this.awardScroller.viewport.contentHeight-this.awardScroller.height:this.awardScroller.viewport.scrollV=t,this.endScroller()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF91)switch(e){case P4.Q53:this.ZR14(),this.updateAwards(),this.ZV31(),this.endScroller();break;case P4.E15:this.updateAwards(),this.ZV31()}t instanceof THH14&&this.ZV31()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.collection.removeAll(),this.cdTimer&&(App.K16.rBH(this.cdTimer),this.cdTimer=null),window.authButton&&window.authButton.destroy()},t.prototype.doBtnClick=function(){0<App.CM.gtM(O6.B68).getCd()?P18.sDP(O3.tr(7089)):this.doShare()},t.prototype.doShare=function(){var t=App.CM.gtM(O6.B82);platform.share(t.avatarInfo.id,this.ZY40,this)},t.prototype.ZY40=function(){App.CM.gtM(O6.B68);this.apF(K1.A14)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxDayShareView.prototype,"WxDayShareView");var WxFirstShareView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WxFirstShareSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shareLb.textFlow=M18.HTP.parse(O3.tr(4945))},t.prototype.initData=function(){s.prototype.initData.call(this),this.collection=new eui.ArrayCollection,this.awards.dataProvider=this.collection,this.awards.itemRenderer=ItemIcon},t.prototype.open=function(t){s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.updateAwards(),this.upateBtn(),this.aCF(O6.C20,K2.A1,22)},t.prototype.updateAwards=function(){var t=J17.init.firstReward.value,e=new Array;if(t&&0<t.split(";").length){for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":")[0],r=i[s].split(":")[1],n=N12.gID(o),a={};a.data=n,a.ct=Number(r);var h={};h.itemData=a,h.isBottom=!1,e.push(h)}this.collection.replaceAll(e)}},t.prototype.upateBtn=function(){var e=this,t=App.CM.gtM(O6.B68);this.shareBtn.visible=!0,0===t.fs?P7.FK32()?(this.shareBtn.visible=!1,App.K16.doFrame(10,1,function(){if(App.VM.isOpen(O7.F17)){var t=e.shareBtn.parent.localToGlobal(e.shareBtn.x,e.shareBtn.y);platform.createAuthButton(e.doShare,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_yaoqhaoyuo.png")}},this)):(this.shareBtn.label=O3.tr(3106),this.shareBtn.imgNew.visible=!1):1===t.fs?(window.authButton&&window.authButton.destroy(),this.shareBtn.label=O3.tr(3107),this.shareBtn.imgNew.visible=!0):this.shareBtn.visible=!1},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF91&&(this.upateBtn(),e===P4.I66&&this.closeSelf())},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.collection.removeAll(),window.authButton&&window.authButton.destroy()},t.prototype.doBtnClick=function(){var t=App.CM.gtM(O6.B68);if(0===t.fs)this.doShare();else{if(1!==t.fs)return;this.ZV30()}},t.prototype.doShare=function(){var t=App.CM.gtM(O6.B82);platform.share(t.avatarInfo.id,this.ZY40,this)},t.prototype.ZY40=function(){0===App.CM.gtM(O6.B68).fs&&this.apF(K1.A14)},t.prototype.ZV30=function(){this.apF(K1.A10)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxFirstShareView.prototype,"WxFirstShareView");var WxFriendView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WxFriendSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shareBtn.label=O3.tr(4946)},t.prototype.initData=function(){s.prototype.initData.call(this),this.collection=new eui.ArrayCollection,this.awardList.dataProvider=this.collection,this.awardList.itemRenderer=WxFriendItem},t.prototype.open=function(t){s.prototype.open.call(this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.shareWord.source="v1_bg_haoyoufxwenzi3_png",this.updateAwards(),this.ZV31(),this.endScroller(),this.GX5()},t.prototype.GX5=function(){var e=this;P7.FK32()?(this.shareBtn.visible=!1,App.K16.doFrame(5,1,function(){if(App.VM.isOpen(O7.I22)){var t=e.shareBtn.parent.localToGlobal(e.shareBtn.x,e.shareBtn.y);platform.createAuthButton(e.doShare,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_yaoqhaoyuo.png")}},this)):this.shareBtn.visible=!0},t.prototype.updateAwards=function(){var t=new Array,e=App.CM.gtM(O6.B68),i=e.inv||[],s=i.length,o=e.itk||[];for(var r in J17.share_invitrwd){var n=J17.share_invitrwd[r];(a={}).id=n.id,a.times=n.times,a.awardLb=O3.tr(4947,n.reward.split(":")[1]),a.type="friend",-1!==o.indexOf(n.id)?a.state=2:s>=n.times?a.state=1:a.state=0,t.push(a)}for(r=0;r<t.length;r++){var a=t[r];i[r]?(a.friendName="fth5"===platform.name?K18.FD58():i[r].nick,a.wximg="fth5"===platform.name?K18.FD73():i[r].img,a.lv=i[r].maxLv):(a.friendName=O3.tr(4948,r+1),a.wximg="v1_bg_haoyoufxcw_png",a.lv=0)}t.sort(this.sortAward),this.collection.replaceAll(t)},t.prototype.sortAward=function(t,e){var i={1:1,0:2,2:3};return i[t.state]<i[e.state]?-1:i[t.state]==i[e.state]&&t.times<e.times?-1:1},t.prototype.ZV31=function(){var t=App.CM.gtM(O6.B68);if(this.shareCD=t.getCd(),this.shareCD<=0)this.shareCdLb.visible=!1;else{this.shareCdLb.visible=!0;var e=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,e)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,e)),this.cdTimer=App.K16.doTimer(1e3,this.shareCD,this.refreshCdTip,this,this.ZV31,this)}var i=N12.gID(75009),s=N12.giC(75009);this.shareCoinIcon.source=i.icon,this.shareCoinLb.text=""+s},t.prototype.refreshCdTip=function(){App.CM.gtM(O6.B68);this.shareCD--;var t=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,t)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,t))},t.prototype.endScroller=function(){this.awardScroller.validateNow(),this.upArrow.visible=!(this.awardScroller.viewport.scrollV<=0),this.awardScroller.viewport.contentHeight<=this.awardScroller.height?this.downArrow.visible=!1:this.awardScroller.height+this.awardScroller.viewport.scrollV>=this.awardScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.awardScroller.viewport.scrollV-415;this.awardScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.awardScroller.viewport.scrollV+415;t+this.awardScroller.height>=this.awardScroller.viewport.contentHeight?this.awardScroller.viewport.scrollV=this.awardScroller.viewport.contentHeight-this.awardScroller.height:this.awardScroller.viewport.scrollV=t,this.endScroller()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF91)switch(e){case P4.Q53:this.updateAwards(),this.ZV31(),this.endScroller();break;case P4.E17:this.updateAwards(),this.ZV31()}t instanceof THH14&&this.ZV31()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.collection.removeAll(),this.cdTimer&&(App.K16.rBH(this.cdTimer),this.cdTimer=null),window.authButton&&window.authButton.destroy()},t.prototype.doBtnClick=function(){0<App.CM.gtM(O6.B68).getCd()?P18.sDP(O3.tr(7089)):this.doShare()},t.prototype.doShare=function(){var t=App.CM.gtM(O6.B82);platform.share(t.avatarInfo.id,this.ZY40,this)},t.prototype.ZY40=function(){App.CM.gtM(O6.B68);this.apF(K1.A14)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxFriendView.prototype,"WxFriendView");var WxHongBaoView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WxHongBaoSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shareBtn.label=O3.tr(4946)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(t){s.prototype.open.call(this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.openHb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doGetHongBao,this),this.shareWord.source="v1_bg_haoyoufxwenzi5_png",this.ZY41(),this.ZV31(),this.GX5()},t.prototype.GX5=function(){var e=this;P7.FK32()?(this.shareBtn.visible=!1,App.K16.doFrame(5,1,function(){if(App.VM.isOpen(O7.HH58)){var t=e.shareBtn.parent.localToGlobal(e.shareBtn.x,e.shareBtn.y);platform.createAuthButton(e.doShare,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_yaoqhaoyuo.png")}},this)):this.shareBtn.visible=!0},t.prototype.ZY41=function(){var t=App.CM.gtM(O6.B68),e=t.red;!e||e.length<=0?(this.wximg.visible=!1,this.wxquestion.visible=!0,this.hbTip.text=O3.tr(3118),this.moneyTip.text="0",this.openHb.imgNew.visible=!1):(this.wximg.visible=!0,this.wxquestion.visible=!1,this.curHongBao=e[0],this.wximg.source="fth5"===platform.name?K18.FD73():this.curHongBao.img,this.hbTip.text=O3.tr(3120,this.curHongBao.nick),this.moneyTip.text=""+this.curHongBao.money,this.openHb.imgNew.visible=!0,"v1_bg_haoyoufxcw_png"==this.wximg.source?(this.wximg.width=58,this.wximg.height=59,this.wximg.top=34):(this.wximg.width=66,this.wximg.height=66,this.wximg.top=30)),this.addDesc.text=O3.tr(3119,t.invCoin);var i=N12.gID(75009);this.coinIcon1.source=i.icon,this.coinIcon2.source=i.icon},t.prototype.ZV31=function(){var t=App.CM.gtM(O6.B68);if(this.shareCD=t.getCd(),this.shareCD<=0)this.shareCdLb.visible=!1;else{this.shareCdLb.visible=!0;var e=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,e)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,e)),this.cdTimer=App.K16.doTimer(1e3,this.shareCD,this.refreshCdTip,this,this.ZV31,this)}var i=N12.gID(75009),s=N12.giC(75009);this.shareCoinIcon.source=i.icon,this.shareCoinLb.text=""+s},t.prototype.refreshCdTip=function(){App.CM.gtM(O6.B68);this.shareCD--;var t=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,t)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,t))},t.prototype.doGetHongBao=function(){var t=App.CM.gtM(O6.B68).red;!t||t.length<=0?P18.sDP(O3.tr(3121)):this.apF(K1.A6,this.curHongBao.uid)},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF91)switch(e){case P4.Q53:this.ZV31();break;case P4.T78:this.ZY41(),this.ZV31()}t instanceof THH14&&this.ZV31()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.openHb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doGetHongBao,this),this.curHongBao=null,this.cdTimer&&(App.K16.rBH(this.cdTimer),this.cdTimer=null),window.authButton&&window.authButton.destroy()},t.prototype.doBtnClick=function(){0<App.CM.gtM(O6.B68).getCd()?P18.sDP(O3.tr(7089)):this.doShare()},t.prototype.doShare=function(){var t=App.CM.gtM(O6.B82);platform.share(t.avatarInfo.id,this.ZY40,this)},t.prototype.ZY40=function(){App.CM.gtM(O6.B68);this.apF(K1.A14)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxHongBaoView.prototype,"WxHongBaoView");var WxLevelView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="WxFriendSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.shareBtn.label=O3.tr(4946)},t.prototype.initData=function(){s.prototype.initData.call(this),this.collection=new eui.ArrayCollection,this.awardList.dataProvider=this.collection,this.awardList.itemRenderer=WxFriendItem},t.prototype.open=function(t){s.prototype.open.call(this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.addEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.shareWord.source="v1_bg_haoyoufxwenzi4_png",this.updateAwards(),this.ZV31(),this.endScroller(),this.GX5()},t.prototype.GX5=function(){var e=this;P7.FK32()?(this.shareBtn.visible=!1,App.K16.doFrame(5,1,function(){if(App.VM.isOpen(O7.I47)){var t=e.shareBtn.parent.localToGlobal(e.shareBtn.x,e.shareBtn.y);platform.createAuthButton(e.doShare,e,App.TG37.getWidth(),App.TG37.getHeight(),t.x,t.y,155,58,"v1_btn_yellow_yaoqhaoyuo.png")}},this)):this.shareBtn.visible=!0},t.prototype.updateAwards=function(){for(var t=new Array,e=App.CM.gtM(O6.B68),i=e.inv||[],s=[],o=0;o<i.length;o++)s.push(i[o]);var r=(s=s.sort(function(t,e){return t.maxLv>e.maxLv?-1:1})).length,n=e.lvtk||[];for(var o in J17.share_invitlvrwd){var a=J17.share_invitlvrwd[o];(h={}).id=a.id,h.times=a.times,h.awardLb=O3.tr(4947,a.reward.split(":")[1]),h.type="level",-1!==n.indexOf(a.id)?h.state=2:r>=a.times?h.state=1:h.state=0,t.push(h)}for(o=0;o<t.length;o++){var h=t[o];if(s[o]){if(h.friendName="fth5"===platform.name?K18.FD58():s[o].nick,h.wximg="fth5"===platform.name?K18.FD73():s[o].img,h.lv=s[o].maxLv,1!=h.state)continue;h.lv>=J17.init.inviterLvUp.value?h.state=1:h.state=0}else h.friendName=O3.tr(4947,o+1),h.wximg="v1_bg_haoyoufxcw_png",h.lv=0}t.sort(this.sortAward),this.collection.replaceAll(t)},t.prototype.sortAward=function(t,e){var i={1:1,0:2,2:3};return i[t.state]<i[e.state]?-1:i[t.state]==i[e.state]&&t.times<e.times?-1:1},t.prototype.ZV31=function(){var t=App.CM.gtM(O6.B68);if(this.shareCD=t.getCd(),this.shareCD<=0)this.shareCdLb.visible=!1;else{this.shareCdLb.visible=!0;var e=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,e)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,e)),this.cdTimer=App.K16.doTimer(1e3,this.shareCD,this.refreshCdTip,this,this.ZV31,this)}var i=N12.gID(75009),s=N12.giC(75009);this.shareCoinIcon.source=i.icon,this.shareCoinLb.text=""+s},t.prototype.refreshCdTip=function(){App.CM.gtM(O6.B68);this.shareCD--;var t=P6.FJ11(1e3*this.shareCD,3);600<this.shareCD?this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3109,t)):this.shareCdLb.textFlow=M18.HTP.parser(O3.tr(3116,t))},t.prototype.endScroller=function(){this.awardScroller.validateNow(),this.upArrow.visible=!(this.awardScroller.viewport.scrollV<=0),this.awardScroller.viewport.contentHeight<=this.awardScroller.height?this.downArrow.visible=!1:this.awardScroller.height+this.awardScroller.viewport.scrollV>=this.awardScroller.viewport.contentHeight?this.downArrow.visible=!1:this.downArrow.visible=!0},t.prototype.doUpArrow=function(){var t=this.awardScroller.viewport.scrollV-415;this.awardScroller.viewport.scrollV=t<0?0:t,this.endScroller()},t.prototype.doDownArrow=function(){var t=this.awardScroller.viewport.scrollV+415;t+this.awardScroller.height>=this.awardScroller.viewport.contentHeight?this.awardScroller.viewport.scrollV=this.awardScroller.viewport.contentHeight-this.awardScroller.height:this.awardScroller.viewport.scrollV=t,this.endScroller()},t.prototype.uBM=function(t,e){if(s.prototype.uBM.call(this,t,e),t instanceof TF91)switch(e){case P4.Q53:this.updateAwards(),this.ZV31(),this.endScroller();break;case P4.F32:this.updateAwards(),this.ZV31()}t instanceof THH14&&this.ZV31()},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.awardScroller.removeEventListener(eui.UIEvent.CHANGE_END,this.endScroller,this),this.upArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doUpArrow,this),this.downArrow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doDownArrow,this),this.collection.removeAll(),this.cdTimer&&(App.K16.rBH(this.cdTimer),this.cdTimer=null),window.authButton&&window.authButton.destroy()},t.prototype.doBtnClick=function(){0<App.CM.gtM(O6.B68).getCd()?P18.sDP(O3.tr(7089)):this.doShare()},t.prototype.doShare=function(){var t=App.CM.gtM(O6.B82);platform.share(t.avatarInfo.id,this.ZY40,this)},t.prototype.ZY40=function(){App.CM.gtM(O6.B68);this.apF(K1.A14)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxLevelView.prototype,"WxLevelView");var WxShareMainView=function(o){function t(t,e){return o.call(this,t,e)||this}return __extends(t,o),t.prototype.initUI=function(){var t,e;o.prototype.initUI.call(this),App.VM.rgS(O7.F65,O7.G89,"WxDayShareView",this.content),App.VM.rgS(O7.F65,O7.G90,"WxAcsShareView",this.content),e="qq"!==platform.name&&"PM000990"!=platform.gameId&&"PM001146"!=platform.gameId&&"P0005686"!=platform.gameId&&"P0005687"!=platform.gameId&&"P0006088"!=platform.gameId&&"P0006087"!=platform.gameId&&"PM001178"!=platform.gameId&&"P0006294"!=platform.gameId&&"P0006295"!=platform.gameId&&"PM001232"!=platform.gameId&&"PM001245"!=platform.gameId&&"P0006338"!=platform.gameId&&"P0006339"!=platform.gameId&&"P0006416"!=platform.gameId&&"P0006417"!=platform.gameId&&"PM001277"!=platform.gameId&&"P0006489"!=platform.gameId&&"P0006490"!=platform.gameId&&"PM001354"!=platform.gameId?(App.VM.rgS(O7.F65,O7.I22,"WxFriendView",this.content),App.VM.rgS(O7.F65,O7.I47,"WxLevelView",this.content),App.VM.rgS(O7.F65,O7.HH58,"WxHongBaoView",this.content),t=[O3.tr(3110),O3.tr(3111),O3.tr(3112),O3.tr(3113),O3.tr(3114)],[O7.G89,O7.G90,O7.I22,O7.I47,O7.HH58]):(t=[O3.tr(3110),O3.tr(3111)],[O7.G89,O7.G90]),this.btnList=new ButtonList(t,e,this.ZQ23.bind(this)),this.btnList.init(WxTabView),this.btnList.setListGap(3),this.btnList.ZE62(),this.btnGroup.addChild(this.btnList)},t.prototype.initData=function(){o.prototype.initData.call(this)},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.prototype.open.call(this,t);var i=App.CM.gtM(O6.B68);this.ZE16(i);var s=t[0]||O7.G89;this.ZQ23(s),o.prototype.ZU50.call(this)},t.prototype.uBM=function(t,e){if(o.prototype.uBM.call(this,t,e),t instanceof TF91)switch(e){case P4.Q53:case P4.E15:case P4.C29:case P4.C31:case P4.E17:case P4.F32:case P4.T78:this.ZE16(t)}t instanceof THH14&&o.prototype.ZU50.call(this)},t.prototype.ZE16=function(t){var e=t.ZA96();this.btnList.ZHH58(O7.G89,e?1:0);var i=t.ZA97();this.btnList.ZHH58(O7.G90,i?1:0);var s=t.ZB66();this.btnList.ZHH58(O7.I22,s?1:0);var o=t.ZC31();this.btnList.ZHH58(O7.I47,o?1:0);var r=t.ZB31();this.btnList.ZHH58(O7.HH58,r?1:0)},t.prototype.close=function(){o.prototype.close.call(this)},t.prototype.ZQ23=function(r){return __awaiter(this,void 0,void 0,function(){var e,i,s,o;return __generator(this,function(t){switch(e=App.CM.gtM(O6.B82),i=e.avatarInfo,r){case O7.G89:case O7.G90:if(s=J17.init.unlockLv.value,i.l<s)return o=K18.init.commonDesc1.value,P18.sDP(M18.format(o,[s])),[2,-1];this.btnList.ZM66(r);break;case O7.I22:case O7.I47:case O7.HH58:if(s=J17.init.unlockLv.value,i.l<s)return o=K18.init.commonDesc1.value,P18.sDP(M18.format(o,[s])),[2,-1];this.btnList.ZM66(r)}return[2]})})},t}(WxBasePanelView);__reflect(WxShareMainView.prototype,"WxShareMainView");var K4=function(){function t(){}return t.A19=0,t.A15=1,t.A5=2,t.A6=3,t.A1=4,t.A2=5,t.A3=6,t.A4=7,t.A11=8,t.A12=9,t.A9=10,t.A10=11,t.A13=12,t.A14=13,t.A16=14,t.A17=15,t.A20=16,t.A18=17,t.A7=18,t.A8=19,t}();__reflect(K4.prototype,"K4");var TC87=function(i){function t(){var t=i.call(this)||this;App.VM.register(O7.I50,"WxTjxcxView",t,K17.UI_Tips),App.VM.register(O7.I60,"QQTjxcxView",t,K17.UI_Main_TOP),App.VM.register(O7.HH68,"QQCollectView",t,K17.UI_Main_TOP),App.VM.register(O7.C20,"QQMemberGiftPackView",t,K17.UI_Main_TOP),App.VM.register(O7.HH92,"QQMigrateView",t,K17.UI_Main_TOP),t.proxy=new TF94(t);var e=new TF93(t);return e.aLV(O7.I50),e.aLV(O7.I60),e.aLV(O7.HH68),e.aLV(O7.I64),e.aLV(O7.HH30),t.rgF(K4.A19,t.GQ9,t),t.rgF(K4.A15,t.GO12,t),t.rgF(K4.A5,t.GO10,t),t.rgF(K4.A6,t.GO11,t),t.rgF(K4.A1,t.GM10,t),t.rgF(K4.A2,t.GM11,t),t.rgF(K4.A3,t.GQ7,t),t.rgF(K4.A4,t.GQ8,t),t.rgF(K4.A11,t.GK33,t),t.rgF(K4.A12,t.GK34,t),t.rgF(K4.A9,t.GG54,t),t.rgF(K4.A10,t.GG55,t),t.rgF(K4.A13,t.GV45,t),t.rgF(K4.A14,t.GV46,t),t.rgF(K4.A16,t.GY2,t),t.rgF(K4.A17,t.GY3,t),t.rgF(K4.A20,t.GQ6,t),t.rgF(K4.A18,t.GO9,t),t.rgF(K4.A7,t.GT88,t),t.rgF(K4.A8,t.GT89,t),t}return __extends(t,i),t.prototype.GT88=function(){this.proxy.GT88()},t.prototype.GT89=function(t){if(200==t.head.state){var e=this.gtM();e.qt=t.body.qt,P5.sIs(t.body.ob),e.notify()}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ6=function(){App.VM.open(O7.I60)},t.prototype.GO9=function(){App.VM.close(O7.I60)},t.prototype.GY2=function(){this.proxy.GY2()},t.prototype.GY3=function(t){t.head.state},t.prototype.GV45=function(){this.proxy.GV45()},t.prototype.GV46=function(t){200==t.head.state?(App.CM.gtM(O6.B82).vipdr=t.body.vipdr,P5.sIs(t.body.edg),this.gtM().notify()):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GO10=function(){return this.proxy.GO10()},t.prototype.GO11=function(t){if(200==t.head.state){var e=this.gtM();e.initData(t.body),e.notify(P4.G96)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GM10=function(){this.proxy.GM10()},t.prototype.GM11=function(t){200==t.head.state?(this.gtM().sr=t.body.sr,t.body.ob&&P5.sIs(t.body.ob),this.GO12(),this.timerHandler=App.K16.doTimer(500,1,this.GQ9,this)):App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ7=function(t){this.proxy.GQ7(t)},t.prototype.GQ8=function(t){if(200==t.head.state){var e=this.gtM();e.ar=t.body.ar,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.E19)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GQ9=function(){this.timerHandler&&(App.K16.rBH(this.timerHandler),this.timerHandler=null),App.VM.open(O7.I50)},t.prototype.GO12=function(){App.VM.close(O7.I50)},t.prototype.GK33=function(){this.proxy.GK33()},t.prototype.GK34=function(t){if(200==t.head.state){var e=this.gtM();e.isTakeWan=t.body.isTakeWan,e.notify(P4.Q55)}else App.CM.apF(O6.B87,L10.A4,t)},t.prototype.GG54=function(){this.proxy.GG54()},t.prototype.GG55=function(t){if(200==t.head.state){var e=this.gtM();e.isTakeWan=t.body.isTakeWan,t.body.ob&&P5.sIs(t.body.ob),e.notify(P4.G98)}else App.CM.apF(O6.B87,L10.A4,t)},t}(TE11);__reflect(TC87.prototype,"TC87");var TF93=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.initData=function(t){this.sr=t.sr,this.ar=t.ar,this.isTakeWan=t.isTakeWan},t.prototype.notify=function(t){e.prototype.notifyView.call(this,this,t)},t}(TG79);__reflect(TF93.prototype,"TF93");var TF94=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.GO10=function(){var s=this;return new Promise(function(e,t){var i={type:P4.G95,body:{}};s.rSMO(P4.G96,function(t){s.apF(K4.A6,t),e("加载小程序操作指南数据")},s),s.sSM(i)})},t.prototype.GM10=function(){var t={type:P4.C32,body:{}};this.rSMO(P4.C33,this.GM11,this),this.sSM(t)},t.prototype.GM11=function(t){this.apF(K4.A2,t)},t.prototype.GQ7=function(t){var e={type:P4.E18,body:{type:t}};this.rSMO(P4.E19,this.GQ8,this),this.sSM(e)},t.prototype.GQ8=function(t){this.apF(K4.A4,t)},t.prototype.GK33=function(){var t={type:P4.Q54,body:{}};this.rSMO(P4.Q55,this.GK34,this),this.sSM(t)},t.prototype.GK34=function(t){this.apF(K4.A12,t)},t.prototype.GG54=function(){var t={type:P4.G97,body:{}};this.rSMO(P4.G98,this.GG55,this),this.sSM(t)},t.prototype.GG55=function(t){this.apF(K4.A10,t)},t.prototype.GV45=function(){var t={type:P4.N56,body:{}};this.rSMO(P4.N57,this.GV46,this),this.sSM(t)},t.prototype.GV46=function(t){this.apF(K4.A14,t)},t.prototype.GY2=function(){var t={type:P4.V75,body:{}};this.rSMO(P4.V76,this.GY3,this),this.sSM(t)},t.prototype.GY3=function(t){this.apF(K4.A17,t)},t.prototype.GT88=function(){var t={type:P4.I67,body:{}};this.rSMO(P4.I68,this.GT89,this),this.sSM(t)},t.prototype.GT89=function(t){this.apF(K4.A8,t)},t}(TG80);__reflect(TF94.prototype,"TF94");var QQCollectView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="QQCollectSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.tipLb.textFlow=M18.HTP.parse(O3.tr(4951))},t.prototype.initData=function(){s.prototype.initData.call(this),this.collection=new eui.ArrayCollection,this.awards.dataProvider=this.collection,this.awards.itemRenderer=ItemIcon},t.prototype.open=function(t){s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.collectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.updateAwards(),this.upateBtn()},t.prototype.updateAwards=function(){var t=J17.init.playReward.value,e=new Array;if(t&&0<t.split(";").length){for(var i=t.split(";"),s=0;s<i.length;s++){var o=i[s].split(":")[0],r=i[s].split(":")[1],n=N12.gID(o),a={};a.data=n,a.ct=Number(r);var h={};h.itemData=a,h.isBottom=!1,e.push(h)}this.collection.replaceAll(e)}},t.prototype.upateBtn=function(){var t=App.CM.gtM(O6.B74);this.collectBtn.visible=!0,0===t.isTakeWan?(this.collectBtn.label=O3.tr(4952),this.collectBtn.imgNew.visible=!1):1===t.isTakeWan?(this.collectBtn.label=O3.tr(4953),this.collectBtn.imgNew.visible=!0):this.collectBtn.visible=!1},t.prototype.uBM=function(t,e){s.prototype.uBM.call(this,t,e),t instanceof TF93&&(this.upateBtn(),e===P4.G98&&this.closeSelf())},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.collectBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.doBtnClick,this),this.collection.removeAll()},t.prototype.doBtnClick=function(){var t=App.CM.gtM(O6.B74);if(0===t.isTakeWan)this.doCollect();else{if(1!==t.isTakeWan)return;this.ZP95()}},t.prototype.doCollect=function(){platform.createShortCut(),this.ZP94()},t.prototype.ZP94=function(){0===App.CM.gtM(O6.B74).isTakeWan&&this.apF(K4.A11)},t.prototype.ZP95=function(){this.apF(K4.A9)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(QQCollectView.prototype,"QQCollectView");var QQMemberGiftPackView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName=DailyBasicsGiftPackSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF,this.dlg.showBackBtn=!0,this.dlg.ZM69(this.oCC,this),this.dlg.setOKHandler(this.onClick,this),this.dlg.ZQ14(this.oCC,this),this.dlg.strBtnOK=O3.tr(7420),this.lbStr0.horizontalCenter="0"},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.open.call(this,t),this.GX5(t[0])},t.prototype.GX5=function(t){this.showAward(J16.init.qqvipGift.value)},t.prototype.showAward=function(t){var e=M18.FL28(t,";"),i=[];for(var s in e){var o=M18.FL28(e[s],":"),r={itemData:{data:N12.gID(o[0]),ct:o[1]},isBottom:!0};i.push(r)}this.dataSource.replaceAll(i),this.lbStr0.textFlow=M18.HTP.parse(O3.tr(7421)),this.lbStr1.textFlow=M18.HTP.parse(O3.tr(7422))},t.prototype.onClick=function(){this.aCF(O6.B74,K4.A13)},t.prototype.oCC=function(){App.VM.close(O7.C20)},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dlg=null,this.lbStr0=null,this.lbStr1=null,this.listContent=null,this.awardsSc=null,this.dataSource.removeAll()},t}(BaseEuiView);__reflect(QQMemberGiftPackView.prototype,"QQMemberGiftPackView");var QQMigrateView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.skinName="QQMigrateSkin",i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.getBtn.label=O3.tr(8562)},t.prototype.initData=function(){s.prototype.initData.call(this)},t.prototype.open=function(t){s.prototype.open.call(this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this)},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(QQMigrateView.prototype,"QQMigrateView");var QQTjxcxView=function(s){function t(t,e){var i=s.call(this,t,e)||this;return i.localX=0,i.startX=0,i.sGN("release_wxshare"),i.skinName=WechatAddSkin,i}return __extends(t,s),t.prototype.initUI=function(){s.prototype.initUI.call(this),this.imgBg.source="v1_bg_tjxcx2_png"},t.prototype.initData=function(){s.prototype.initData.call(this),this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.AUTO,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF,this.imgName=["v1_zhidinghaoli_01_jpg","v1_zhidinghaoli_02_jpg","v1_zhidinghaoli_03_jpg","v1_zhidinghaoli_04_jpg"]},t.prototype.open=function(t){s.prototype.open.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.slipTips,this),this.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.slipTips,this),this.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_END,this.slipTips,this),this.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.slipTips,this);var e=App.CM.gtM(O6.B74);this.GX5(e)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t instanceof TF93&&(this.GX5(t),1==t.qt&&(this.getBtn.imgNew.visible=!1,this.getBtn.touchEnabled=!1,P16.sGF(this.getBtn,!0),this.getBtn.label=O3.tr(3123)))},t.prototype.GX5=function(t){for(var e in this.tipsGrp.removeChildren(),this.imgName){var i=new eui.Image(this.imgName[e]);0==i.width&&(i.width=371),this.tipsGrp.addChildAt(i,Number(e))}this.cur=0,this.startLunbo(),this.showAward(J17.init.topReward.value),this.getBtn.imgNew.visible=this.getBtn.touchEnabled=!0,P16.sGF(this.getBtn,!1),this.getBtn.label=O3.tr(3107)},t.prototype.showAward=function(t){var e=M18.FL28(t,";"),i=[];for(var s in e){var o=M18.FL28(e[s],":"),r={itemData:{data:N12.gID(o[0]),ct:o[1]},isBottom:!1};i.push(r)}this.dataSource.replaceAll(i)},t.prototype.startLunbo=function(){var t=this,e=Number(J17.init.turnPictureTime.value);this.stopLunbo(),this.timerHandler2=App.K16.doTimer(1e3*e,0,function(){t.cur+=1,t.changeImg(!0)},this)},t.prototype.stopLunbo=function(){this.timerHandler2&&(App.K16.rBH(this.timerHandler2),this.timerHandler2=null)},t.prototype.slipTips=function(t){switch(t.type){case egret.TouchEvent.TOUCH_MOVE:if(0==this.startX)return;this.stopLunbo();var e=t.stageX-this.localX;this.localX=t.stageX,this.tipsGrp.x+=e;break;case egret.TouchEvent.TOUCH_BEGIN:this.startX=t.stageX,this.localX=t.stageX,this.stopLunbo();break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:case egret.TouchEvent.TOUCH_END:this.calCur(t.stageX-this.startX),this.changeImg(!1),this.startLunbo(),this.localX=0,this.startX=0}},t.prototype.calCur=function(t){if(30<=Math.abs(t)){var e=this.cur;0<t?e-=1:e+=1,e=(e=e>this.tipsGrp.$children.length-1?this.tipsGrp.$children.length-1:e)<0?0:e,this.cur=e}},t.prototype.changeImg=function(t){var e=this.tipsGrp.$children.length,i=this.cur%e;this.cur=i<0?e-i:i;for(var s=0,o=0;o<this.cur;o++){var r=this.tipsGrp.getChildAt(o);s+=(0==r.width?371:r.width)+10}var n=300;0==this.cur&&t&&(n=0),egret.Tween.get(this.tipsGrp).to({x:-s},n)},t.prototype.onClick=function(){1001==platform.scene?App.CM.apF(O6.B74,K4.A7,1):P18.sDP(O3.tr(8520))},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.prototype.close.call(this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSelf,this),this.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.slipTips,this),this.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.slipTips,this),this.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.slipTips,this),this.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.slipTips,this),this.stopLunbo(),egret.Tween.removeTweens(this.tipsGrp),this.dataSource.removeAll()},t.prototype.closeSelf=function(){App.VM.GY64(this)},t}(BaseEuiView);__reflect(QQTjxcxView.prototype,"QQTjxcxView");var WxTjxcxView=function(r){function t(t,e){var i=r.call(this,t,e)||this;return i.localX=0,i.startX=0,i.sGN("release_wxshare"),i.skinName=WechatAddSkin,i}return __extends(t,r),t.prototype.initUI=function(){r.prototype.initUI.call(this),this.explain.textFlow=O3.tr2(8995),this.desLbl.textFlow=O3.tr2(8996),this.closeBtn.label=O3.tr(9033)},t.prototype.initData=function(){r.prototype.initData.call(this),this.listContent.itemRenderer=ItemIcon,this.dataSource=new eui.ArrayCollection,this.listContent.dataProvider=this.dataSource,this.awardsSc.viewport=this.listContent,this.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,this.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF},t.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.open.call(this);var i=this,s=!0;i.openType=t[0],"offLine"==i.openType?(s=!1,i.imgBg.source="v1_bg_tjxcx3_png"):i.imgBg.source="v1_bg_tjxcx_png",i.desLbl.visible=i.closeBtn.visible=!s,i.getBtn.visible=s,i.awardsSc.visible=s,i.btnClose.visible=s,i.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,i.closeSelf,i),i.bgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,i.closeSelf,i),i.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onClick,i),i.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onClick,i),i.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_MOVE,i.slipTips,i),i.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.slipTips,i),i.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_END,i.slipTips,i),i.tipsGrp.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,i.slipTips,i),i.listContent.itemRenderer=ItemIcon,i.dataSource=new eui.ArrayCollection,i.listContent.dataProvider=i.dataSource,i.awardsSc.viewport=i.listContent,i.awardsSc.scrollPolicyH=eui.ScrollPolicy.OFF,i.awardsSc.scrollPolicyV=eui.ScrollPolicy.OFF;var o=App.CM.gtM(O6.B74);i.GX5(o)},t.prototype.uBM=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t instanceof TF93&&this.GX5(t)},t.prototype.GX5=function(t){var e=this;for(var i in"offLine"==this.openType?this.pics=M18.FL28(J17.init.appPicture.value,","):2!=t.sr?this.pics=M18.FL28(J17.init.studyPicture.value,","):this.pics=M18.FL28(J17.init.appPicture.value,","),this.getBtn.imgNew.visible=!1,this.tipsGrp.removeChildren(),this.pics){var s=new eui.Image(this.pics[i]);0==s.width&&(s.width=371),this.tipsGrp.addChildAt(s,Number(i))}this.cur=0,this.startLunbo(),this.waitTime=0;var o=function(){e.waitTime-=1,e.getBtn.label=O3.tr(3122,e.waitTime)},r=function(){e.getBtn.imgNew.visible=e.getBtn.touchEnabled=!0,P16.sGF(e.getBtn,!1),e.getBtn.label=O3.tr(3107),e.timerHandler&&(App.K16.rBH(e.timerHandler),e.timerHandler=null)};if(2!=t.sr)this.showAward(J17.init.studyReward.value),this.waitTime=Number(J17.init.studyWaitingTime.value),this.getBtn.label=O3.tr(3122,this.waitTime),this.getBtn.touchEnabled=!1,P16.sGF(this.getBtn,!0),null==this.timerHandler&&(this.timerHandler=App.K16.doTimer(1e3,this.waitTime,o,this,r,this));else if(this.showAward(J17.init.appReward.value),0==t.ar)this.waitTime=Number(J17.init.appWaitingTime.value),this.getBtn.label=O3.tr(3122,this.waitTime),this.getBtn.touchEnabled=!1,P16.sGF(this.getBtn,!0),null==this.timerHandler&&(this.timerHandler=App.K16.doTimer(1e3,this.waitTime,o,this,function(){r(),App.CM.apF(O6.B74,K4.A3,0)},this));else if(1==t.ar){if(null!=this.timerHandler)return;this.getBtn.imgNew.visible=this.getBtn.touchEnabled=!0,P16.sGF(this.getBtn,!1),this.getBtn.label=O3.tr(3107)}else 2==t.ar&&(this.getBtn.touchEnabled=!1,P16.sGF(this.getBtn,!0),this.getBtn.label=O3.tr(3123))},t.prototype.showAward=function(t){var e=M18.FL28(t,";"),i=[];for(var s in e){var o=M18.FL28(e[s],":"),r={itemData:{data:N12.gID(o[0]),ct:o[1]},isBottom:!1};i.push(r)}this.dataSource.replaceAll(i)},t.prototype.startLunbo=function(){var t=this,e=Number(J17.init.pictureTime.value);this.stopLunbo(),this.timerHandler2=App.K16.doTimer(1e3*e,0,function(){t.cur+=1,t.changeImg(!0)},this)},t.prototype.stopLunbo=function(){this.timerHandler2&&(App.K16.rBH(this.timerHandler2),this.timerHandler2=null)},t.prototype.slipTips=function(t){switch(t.type){case egret.TouchEvent.TOUCH_MOVE:if(0==this.startX)return;this.stopLunbo();var e=t.stageX-this.localX;this.localX=t.stageX,this.tipsGrp.x+=e;break;case egret.TouchEvent.TOUCH_BEGIN:this.startX=t.stageX,this.localX=t.stageX,this.stopLunbo();break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:case egret.TouchEvent.TOUCH_END:this.calCur(t.stageX-this.startX),this.changeImg(!1),this.startLunbo(),this.localX=0,this.startX=0}},t.prototype.calCur=function(t){if(30<=Math.abs(t)){var e=this.cur;0<t?e-=1:e+=1,e=(e=e>this.tipsGrp.$children.length-1?this.tipsGrp.$children.length-1:e)<0?0:e,this.cur=e}},t.prototype.changeImg=function(t){var e=this.tipsGrp.$children.length,i=this.cur%e;this.cur=i<0?e-i:i;for(var s=0,o=0;o<this.cur;o++){var r=this.tipsGrp.getChildAt(o);s+=(0==r.width?371:r.width)+10}var n=300;0==this.cur&&t&&(n=0),egret.Tween.get(this.tipsGrp).to({x:-s},n)},t.prototype.onClick=function(){if("offLine"==this.openType){App.CM.gtM(O6.B97).reconnect=!1,App.CM.apF(O6.B97,N8.A9)}else{var t=App.CM.gtM(O6.B74);if(2!=t.sr)App.CM.apF(O6.B74,K4.A1);else if(1==t.ar){if(1089!=platform.scene)return void P18.sDP(O3.tr(3361));App.CM.apF(O6.B74,K4.A3,1)}}},t.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.prototype.close.call(this);var i=this;i.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,i.closeSelf,i),i.bgMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,i.closeSelf,i),i.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_MOVE,i.slipTips,i),i.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,i.slipTips,i),i.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_END,i.slipTips,i),i.tipsGrp.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,i.slipTips,i),i.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,i.onClick,i),i.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,i.onClick,i),i.timerHandler&&(App.K16.rBH(i.timerHandler),i.timerHandler=null),i.stopLunbo(),egret.Tween.removeTweens(i.tipsGrp),i.dataSource.removeAll()},t.prototype.closeSelf=function(){"offLine"!=this.openType&&App.VM.GY64(this)},t}(BaseEuiView);__reflect(WxTjxcxView.prototype,"WxTjxcxView"),window.M17=M17,window.N3=N3,window.TC77=TC77,window.TE79=TE79,window.TB81=TB81,window.C9=C9,window.TD97=TD97,window.TG54=TG54,window.TG55=TG55,window.TG56=TG56,window.G7=G7,window.I6=I6,window.DailyActiveItemView=DailyActiveItemView,window.DailyExperienceView=DailyExperienceView,window.DailyFindBackView=DailyFindBackView,window.FindBackItem=FindBackItem,window.DailyMainView=DailyMainView,window.DailyProgressItemView=DailyProgressItemView,window.DailyTaskItemView=DailyTaskItemView,window.DailyTaskTimeItemView=DailyTaskTimeItemView,window.DailyTaskView=DailyTaskView,window.SweepArmyView=SweepArmyView,window.daily=daily,window.RebelVo=RebelVo,window.L1=L1,window.L15=L15,window.TD40=TD40,window.TG15=TG15,window.TG16=TG16,window.TG57=TG57,window.FairylandRewardItemView=FairylandRewardItemView,window.MaterialDragonRender=MaterialDragonRender,window.BronzeDragonView=BronzeDragonView,window.BronzeRankView=BronzeRankView,window.BronzeResultView=BronzeResultView,window.ChallengeResultView=ChallengeResultView,window.CheckPointResultView=CheckPointResultView,window.DragonMainView=DragonMainView,window.DragonRTView=DragonRTView,window.FairylandBuyView=FairylandBuyView,window.FairylandRankView=FairylandRankView,window.FairylandRewardView=FairylandRewardView,window.FairylandView=FairylandView,window.LibraryStarView=LibraryStarView,window.MaterialDragonView=MaterialDragonView,window.SkyDragonView=SkyDragonView,window.SkyRankView=SkyRankView,window.ThroughDragonView=ThroughDragonView,window.ThroughRankView=ThroughRankView,window.ThroughRTView=ThroughRTView,window.dragon=dragon,window.M10=M10,window.M19=M19,window.ForgeType=ForgeType,window.TD98=TD98,window.TG58=TG58,window.TG59=TG59,window.TG60=TG60,window.EquipView=EquipView,window.M12=M12,window.L6=L6,window.EquipChooseQuenitem=EquipChooseQuenitem,window.EquipDataItem=EquipDataItem,window.EquipItemRenderer=EquipItemRenderer,window.EquipNextGradeItem=EquipNextGradeItem,window.EquipNextStarItem=EquipNextStarItem,window.EquipNowGradeItem=EquipNowGradeItem,window.EquipNowStarItem=EquipNowStarItem,window.EquipResolveItem=EquipResolveItem,window.EquipRiseTipsItem=EquipRiseTipsItem,window.SmeltDataItem=SmeltDataItem,window.EquipAddAhView=EquipAddAhView,window.EquipAwakeIcon=EquipAwakeIcon,window.EquipAwakeMasterView=EquipAwakeMasterView,window.EquipAwakeView=EquipAwakeView,window.EquipCastIcon=EquipCastIcon,window.EquipCastView=EquipCastView,window.EquipChooseAwakeView=EquipChooseAwakeView,window.EquipChooseQuenView=EquipChooseQuenView,window.EquipDetailsView=EquipDetailsView,window.EquipForgingView=EquipForgingView,window.EquipGemView=EquipGemView,window.EquipGreatView=EquipGreatView,window.EquipLegendUpView=EquipLegendUpView,window.EquipMainView=EquipMainView,window.EquipPitchView=EquipPitchView,window.EquipPolishView=EquipPolishView,window.EquipQuenView=EquipQuenView,window.EquipRefineView=EquipRefineView,window.EquipResolveView=EquipResolveView,window.EquipResonanceView=EquipResonanceView,window.EquipRiseTipsView=EquipRiseTipsView,window.EquipSmeltView=EquipSmeltView,window.EquipStrengthView=EquipStrengthView,window.EquipSuitView=EquipSuitView,window.EquipWareSoulView=EquipWareSoulView,window.LegendMainView=LegendMainView,window.equip=equip,window.L7=L7,window.L16=L16,window.TD41=TD41,window.TG17=TG17,window.TG18=TG18,window.TG61=TG61,window.EscortReSkinView=EscortReSkinView,window.ItemEscortConfView=ItemEscortConfView,window.ItemEscortReport=ItemEscortReport,window.EscortAwardView=EscortAwardView,window.EscortFightView=EscortFightView,window.EscortFinishView=EscortFinishView,window.EscortGoView=EscortGoView,window.EscortConfData=EscortConfData,window.EscortInterView=EscortInterView,window.EscortMainView=EscortMainView,window.EscortGroup=EscortGroup,window.EscortCar=EscortCar,window.EscortReportView=EscortReportView,window.escort=escort,window.TD42=TD42,window.G2=G2,window.C3=C3,window.B13=B13,window.TB34=TB34,window.TD99=TD99,window.TE1=TE1,window.TE2=TE2,window.ExpEditionChapterVo=ExpEditionChapterVo,window.ExpEditionDailyVo=ExpEditionDailyVo,window.ExpEditionHeroVo=ExpEditionHeroVo,window.ExpEditionHpHeoVo=ExpEditionHpHeoVo,window.ExpEditionLvupVo=ExpEditionLvupVo,window.ExpEditionStrengVo=ExpEditionStrengVo,window.ExpEditionCityItemView=ExpEditionCityItemView,window.ExpEditionCureItemView=ExpEditionCureItemView,window.ExpEditionLineupItemView=ExpEditionLineupItemView,window.ExpEditionOutwillItemView=ExpEditionOutwillItemView,window.ExpEditionPreviewItemView=ExpEditionPreviewItemView,window.ExpEditionPtionItemView=ExpEditionPtionItemView,window.ExpEditionRankItemView=ExpEditionRankItemView,window.ExpEditionReviveItemView=ExpEditionReviveItemView,window.ExpEditionShutHeroItemView=ExpEditionShutHeroItemView,window.ExpEditionUpperItemView=ExpEditionUpperItemView,window.ExpEditionWarItemView=ExpEditionWarItemView,window.ExpEditionHospitalView=ExpEditionHospitalView,window.ExpEditionOutwillView=ExpEditionOutwillView,window.ExpEditionPreviewView=ExpEditionPreviewView,window.ExpEditionRankView=ExpEditionRankView,window.ExpEditionShutNameView=ExpEditionShutNameView,window.ExpEditionView=ExpEditionView,window.TG19=TG19,window.N9=N9,window.TE3=TE3,window.FaBaoData=FaBaoData,window.TG62=TG62,window.TG63=TG63,window.TG64=TG64,window.FabaoAttrVo=FabaoAttrVo,window.FabaoPartVo=FabaoPartVo,window.FaBaoPlanVo=FaBaoPlanVo,window.FabaoSkillVo=FabaoSkillVo,window.FaBaoAddSkillItem=FaBaoAddSkillItem,window.FaBaoAllAttrItem=FaBaoAllAttrItem,window.FaBaoArmsItem=FaBaoArmsItem,window.FaBaoAttrItem=FaBaoAttrItem,window.FaBaoHurdlesItem=FaBaoHurdlesItem,window.FaBaoIconItem=FaBaoIconItem,window.FaBaoItemIcon=FaBaoItemIcon,window.FaBaoPlanItemView=FaBaoPlanItemView,window.FaBaoPositionItem=FaBaoPositionItem,window.FaBaoProBarItem=FaBaoProBarItem,window.FaBaoSkillItem=FaBaoSkillItem,window.FaBaoTabBarItem=FaBaoTabBarItem,window.FaBaoAllAttrView=FaBaoAllAttrView,window.FaBaoArmsView=FaBaoArmsView,window.FaBaoDanView=FaBaoDanView,window.FaBaoGoIngView=FaBaoGoIngView,window.FaBaoIcon=FaBaoIcon,window.FaBaoMainView=FaBaoMainView,window.FaBaoOneAttrView=FaBaoOneAttrView,window.FaBaoQneTipView=FaBaoQneTipView,window.FaBaoQuenchView=FaBaoQuenchView,window.FaBaoSkillTipsView=FaBaoSkillTipsView,window.FaBaoView=FaBaoView,window.FaoBaoSkinIconList=FaoBaoSkinIconList,window.N16=N16,window.O15=O15,window.TE80=TE80,window.TG96=TG96,window.TG97=TG97,window.FaqiView=FaqiView,window.FaqiSkillDataItem=FaqiSkillDataItem,window.FaqiSkinDataItem=FaqiSkinDataItem,window.FaqiDan=FaqiDan,window.FaqiDerma=FaqiDerma,window.FaqiEverAdd=FaqiEverAdd,window.FaqiSkill=FaqiSkill,window.faqi=faqi,window.FightBattleDirector=FightBattleDirector,window.M9=M9,window.M14=M14,window.N1=N1,window.BehaviourType=BehaviourType,window.FightObjectEvent=FightObjectEvent,window.ActionName=ActionName,window.mapWH=mapWH,window.SET_MAP_WH=SET_MAP_WH,window.TE4=TE4,window.FightD=FightD,window.TE81=TE81,window.P13=P13,window.FightGOIndex=FightGOIndex,window.TG65=TG65,window.TG66=TG66,window.FightResType=FightResType,window.FightRes=FightRes,window.AniGroup=AniGroup,window.P15=P15,window.FightSoundManager=FightSoundManager,window.P17=P17,window.TG67=TG67,window.BossTalk=BossTalk,window.CrossCampCompCamera=CrossCampCompCamera,window.FightCompAutoAtk=FightCompAutoAtk,window.FightCompAvatar=FightCompAvatar,window.FightCompBlood=FightCompBlood,window.FightCompCamera=FightCompCamera,window.FightCompCloud=FightCompCloud,window.FightCompControl=FightCompControl,window.FightCompEffect=FightCompEffect,window.FightCompFollow=FightCompFollow,window.FightCompFormation=FightCompFormation,window.FightCompFull=FightCompFull,window.FightCompHandup=FightCompHandup,window.FightCompHit=FightCompHit,window.FightCompHitNew=FightCompHitNew,window.FightCompHorse=FightCompHorse,window.FightCompMagicthing=FightCompMagicthing,window.FightCompManager=FightCompManager,window.FightCompMethod=FightCompMethod,window.FightCompMove=FightCompMove,window.FightCompMoveToTarget=FightCompMoveToTarget,window.FightCompMoveToTargetPos=FightCompMoveToTargetPos,window.FightCompName=FightCompName,window.FightCompPause=FightCompPause,window.FightCompPlayCtrl=FightCompPlayCtrl,window.FightCompPretend=FightCompPretend,window.FightCompRandomDir=FightCompRandomDir,window.FightCompSkill=FightCompSkill,window.FightCompSkillNew=FightCompSkillNew,window.FightCompSort=FightCompSort,window.FightCompSortB=FightCompSortB,window.FightCompSpectral=FightCompSpectral,window.FightCompTitle=FightCompTitle,window.J14=J14,window.FightCompWeapon=FightCompWeapon,window.FightCompWing=FightCompWing,window.P14=P14,window.FightMapData=FightMapData,window.FightMovePlayTeam=FightMovePlayTeam,window.FightMoveTeam=FightMoveTeam,window.TF39=TF39,window.fight=fight,window.FightSceneNpc=FightSceneNpc,window.FightMovieClip=FightMovieClip,window.Dir=Dir,window.Action=Action,window.FightGameObject=FightGameObject,window.TF40=TF40,window.FightBattleView=FightBattleView,window.FightClimbView=FightClimbView,window.FightCrossBossView=FightCrossBossView,window.FightCrossCliffView=FightCrossCliffView,window.FightCrossFieldView=FightCrossFieldView,window.FightHandUpView=FightHandUpView,window.FightMapView=FightMapView,window.FightRankItemView=FightRankItemView,window.FightResultView=FightResultView,window.FightStartBattleView=FightStartBattleView,window.IllegalTipView=IllegalTipView,window.LegionCampView=LegionCampView,window.GearBeastConfig=GearBeastConfig,window.GearBeastConst=GearBeastConst,window.GearBeastController=GearBeastController,window.GearBeastModel=GearBeastModel,window.GearBeastProxy=GearBeastProxy,window.GearBeastUtils=GearBeastUtils,window.GearBeastArrayItem=GearBeastArrayItem,window.GearBeastBrokeArrayItem=GearBeastBrokeArrayItem,window.GearBeastItem=GearBeastItem,window.GearBeastMakeChildItem=GearBeastMakeChildItem,window.GearBeastMakeItem=GearBeastMakeItem,window.GearBeastArrayAttrView=GearBeastArrayAttrView,window.GearBeastArrayView=GearBeastArrayView,window.GearBeastAttrView=GearBeastAttrView,window.GearBeastBrokeArrayView=GearBeastBrokeArrayView,window.GearBeastLvUpView=GearBeastLvUpView,window.GearBeastMainView=GearBeastMainView,window.GearBeastMakeChildView=GearBeastMakeChildView,window.GearBeastMakeView=GearBeastMakeView,window.GearBeastRecycleView=GearBeastRecycleView,window.GearBeastRemouldView=GearBeastRemouldView,window.GearBeastWorkShopView=GearBeastWorkShopView,window.GrowGuideBtnList=GrowGuideBtnList,window.TE5=TE5,window.HH4=HH4,window.TB82=TB82,window.TE82=TE82,window.TE83=TE83,window.GrowGuideRender=GrowGuideRender,window.GrowGuideRenderSmall=GrowGuideRenderSmall,window.GrowGuideStrengthView=GrowGuideStrengthView,window.GrowGuideTab=GrowGuideTab,window.GrowGuideUpgradeView=GrowGuideUpgradeView,window.TE84=TE84,window.GrowGuideView=GrowGuideView,window.N4=N4,window.GuideMaskBackgroud=GuideMaskBackgroud,window.TG68=TG68,window.GuideFinger=GuideFinger,window.N14=N14,window.O8=O8,window.TE85=TE85,window.HeroData=HeroData,window.TG98=TG98,window.TG99=TG99,window.THH1=THH1,window.HeroVeinConfig=HeroVeinConfig,window.HeroVeinUtils=HeroVeinUtils,window.AttrInfoPopView=AttrInfoPopView,window.AttrInfoLabel=AttrInfoLabel,window.AttrLabel=AttrLabel,window.BtnList=BtnList,window.BtnTab=BtnTab,window.DlgHeroAchieveView=DlgHeroAchieveView,window.DlgHeroAttrDanView=DlgHeroAttrDanView,window.DlgHeroGoBattle=DlgHeroGoBattle,window.DlgHeroJxView=DlgHeroJxView,window.DlgHeroRenameView=DlgHeroRenameView,window.DlgHeroSkillUpgradeView=DlgHeroSkillUpgradeView,window.DlgHeroSkillView=DlgHeroSkillView,window.DlgHeroTjSjView=DlgHeroTjSjView,window.DlgHeroTujianInfo=DlgHeroTujianInfo,window.DlgHeroZzView=DlgHeroZzView,window.HeroAttrInfoView=HeroAttrInfoView,window.HeroCardMergeView=HeroCardMergeView,window.HeroIconList=HeroIconList,window.HeroJxBackView=HeroJxBackView,window.HeroJxUpgradeView=HeroJxUpgradeView,window.HeroMainView=HeroMainView,window.HeroPrestigeAttrView=HeroPrestigeAttrView,window.HeroPrestigeView=HeroPrestigeView,window.HeroSelectIcon=HeroSelectIcon,window.HeroShareDetailView=HeroShareDetailView,window.HeroSjView=HeroSjView,window.HeroSkillInfoPopView=HeroSkillInfoPopView,window.HeroSkillView=HeroSkillView,window.HeroXiulianInfo=HeroXiulianInfo,window.HeroTjSkillView=HeroTjSkillView,window.HeroSjSkillView=HeroSjSkillView,window.HeroSoulAttrView=HeroSoulAttrView,window.HeroSoulView=HeroSoulView,window.HeroTjView=HeroTjView,window.HeroTotalAttrView=HeroTotalAttrView,window.HeroUpgradeView=HeroUpgradeView,window.HeroVeinClassLvView=HeroVeinClassLvView,window.HeroVeinClassTipView=HeroVeinClassTipView,window.HeroVeinClassView=HeroVeinClassView,window.HeroVeinItem=HeroVeinItem,window.HeroVeinLvView=HeroVeinLvView,window.HeroVeinMainView=HeroVeinMainView,window.HeroZzIconList=HeroZzIconList,window.IconHero=IconHero,window.IconHeroBack=IconHeroBack,window.IconHeroSkill=IconHeroSkill,window.IconJxSkill=IconJxSkill,window.IconSoulSkill=IconSoulSkill,window.ItemAchieveView=ItemAchieveView,window.ItemHeroSkill=ItemHeroSkill,window.ItemHeroTjContent=ItemHeroTjContent,window.HeroBattleConfig=HeroBattleConfig,window.HeroBattleConst=HeroBattleConst,window.HeroBattleController=HeroBattleController,window.HeroBattleModel=HeroBattleModel,window.HeroBattleProxy=HeroBattleProxy,window.HeroBattleFabaoBagItemView=HeroBattleFabaoBagItemView,window.HeroBattleFabaoItemView=HeroBattleFabaoItemView,window.HeroBattleHeroItemView=HeroBattleHeroItemView,window.HeroBattleHeroListItemView=HeroBattleHeroListItemView,window.HeroBattleRankItemView=HeroBattleRankItemView,window.HeroBattleRankScoreItemView=HeroBattleRankScoreItemView,window.HeroBattleRecordItemView=HeroBattleRecordItemView,window.HeroBattleCleanHelpView=HeroBattleCleanHelpView,window.HeroBattleEnemyInfoView=HeroBattleEnemyInfoView,window.HeroBattleFightResultView=HeroBattleFightResultView,window.HeroBattleFightView=HeroBattleFightView,window.HeroBattleHeroListView=HeroBattleHeroListView,window.HeroBattleLineupFabaoDefView=HeroBattleLineupFabaoDefView,window.HeroBattleLineupHeroDefView=HeroBattleLineupHeroDefView,window.HeroBattleLineupMainView=HeroBattleLineupMainView,window.HeroBattleRankMainView=HeroBattleRankMainView,window.HeroBattleRankScoreView=HeroBattleRankScoreView,window.HeroBattleRankView=HeroBattleRankView,window.HeroBattleRecordView=HeroBattleRecordView,window.HeroBattleView=HeroBattleView,window.G8=G8,window.G14=G14,window.E1=E1,window.TB83=TB83,window.HeroEquipData=HeroEquipData,window.TE86=TE86,window.TE87=TE87,window.HeroEquipSlot=HeroEquipSlot,window.TE88=TE88,window.AwakenMasterView=AwakenMasterView,window.HeroEquipAwakenView=HeroEquipAwakenView,window.HeroEquipBreakView=HeroEquipBreakView,window.HeroEquipDetailView=HeroEquipDetailView,window.HeroEquipIcon=HeroEquipIcon,window.HeroEquipMainView=HeroEquipMainView,window.HeroEquipPackView=HeroEquipPackView,window.HeroEquipSandView=HeroEquipSandView,window.HeroEquipSelectView=HeroEquipSelectView,window.HeroEquipShareView=HeroEquipShareView,window.HeroEquipTotalAttrView=HeroEquipTotalAttrView,window.HeroEquipUpStarView=HeroEquipUpStarView,window.ItemHeroEquipPack=ItemHeroEquipPack,window.SandMasterView=SandMasterView,window.StarMasterView=StarMasterView,window.TE89=TE89,window.J4=J4,window.TC25=TC25,window.TF41=TF41,window.TF42=TF42,window.HeroStarTjContent=HeroStarTjContent,window.IconHeroStar=IconHeroStar,window.IconRewarHeroStar=IconRewarHeroStar,window.ItemHeroFateIcon=ItemHeroFateIcon,window.ItemHeroStarPack=ItemHeroStarPack,window.HeroStarDatailsView=HeroStarDatailsView,window.HeroStarFateView=HeroStarFateView,window.HeroStarMainView=HeroStarMainView,window.HeroStarMaterialView=HeroStarMaterialView,window.HeroStarPreviewView=HeroStarPreviewView,window.HeroStarRewarView=HeroStarRewarView,window.HeroStarSummonView=HeroStarSummonView,window.HeroStartemIcon=HeroStartemIcon,window.HeroStarUpStarView=HeroStarUpStarView,window.HeroStarUpView=HeroStarUpView,window.ItemHeroBuyView=ItemHeroBuyView,window.TG69=TG69,window.O16=O16,window.EntryIds=EntryIds,window.TE90=TE90,window.THH2=THH2,window.THH3=THH3,window.THH26=THH26,window.ChartItemRender=ChartItemRender,window.home=home,window.HomeBgView=HomeBgView,window.HomeCrossOpenView=HomeCrossOpenView,window.HomeDownView=HomeDownView,window.HomeFightView=HomeFightView,window.HomeFixPopView=HomeFixPopView,window.HomeFixView=HomeFixView,window.HomeHeadView=HomeHeadView,window.HomeNoticeView=HomeNoticeView,window.HomeUiView=HomeUiView,window.M13=M13,window.N7=N7,window.TE6=TE6,window.TG70=TG70,window.TG71=TG71,window.HorseView=HorseView,window.HorseSkillDataItem=HorseSkillDataItem,window.HorseSkinDataItem=HorseSkinDataItem,window.HorseDan=HorseDan,window.HorseDerma=HorseDerma,window.HorseEverAdd=HorseEverAdd,window.HorseSkill=HorseSkill,window.horse=horse,window.TC78=TC78,window.TE91=TE91,window.J6=J6,window.TC26=TC26,window.TB84=TB84,window.TF43=TF43,window.TF44=TF44,window.TF82=TF82,window.IconImmortal=IconImmortal,window.ImmortalArtIconItem=ImmortalArtIconItem,window.ImmortalArtXLItem=ImmortalArtXLItem,window.ImmortalComItem=ImmortalComItem,window.ImmortalCulItem=ImmortalCulItem,window.ImmortalEquipItem=ImmortalEquipItem,window.ImmortalExpBar=ImmortalExpBar,window.ImmortalExpItem=ImmortalExpItem,window.ImmortalFlyItem=ImmortalFlyItem,window.ImmortalFlySkillItem=ImmortalFlySkillItem,window.ImmortalIconItem=ImmortalIconItem,window.ImmortalIntItem=ImmortalIntItem,window.ImmortalLvExpItem=ImmortalLvExpItem,window.ImmortalSkillItem=ImmortalSkillItem,window.ImmortalStarItem=ImmortalStarItem,window.ImmortalAllPowerView=ImmortalAllPowerView,window.ImmortalArtAutoSopView=ImmortalArtAutoSopView,window.ImmortalArtLvView=ImmortalArtLvView,window.ImmortalArtMainView=ImmortalArtMainView,window.ImmortalArtPowerView=ImmortalArtPowerView,window.ImmortalArtTipView=ImmortalArtTipView,window.ImmortalArtView=ImmortalArtView,window.ImmortalArtXLView=ImmortalArtXLView,window.ImmortalAttrView=ImmortalAttrView,window.ImmortalComView=ImmortalComView,window.ImmortalCulPowerView=ImmortalCulPowerView,window.ImmortalCulView=ImmortalCulView,window.ImmortalCZView=ImmortalCZView,window.ImmortalEquipAttrView=ImmortalEquipAttrView,window.ImmortalEquipGreatView=ImmortalEquipGreatView,window.ImmortalEquipMainView=ImmortalEquipMainView,window.ImmortalEquipRiseTipsView=ImmortalEquipRiseTipsView,window.ImmortalEquipView=ImmortalEquipView,window.ImmortalFlyView=ImmortalFlyView,window.ImmortalIntAttrView=ImmortalIntAttrView,window.ImmortalIntView=ImmortalIntView,window.ImmortalLvExpView=ImmortalLvExpView,window.ImmortalLvView=ImmortalLvView,window.ImmortalMainView=ImmortalMainView,window.ImmortalShareView=ImmortalShareView,window.ImmortalSkillView=ImmortalSkillView,window.ImmortalSopView=ImmortalSopView,window.ImmortalStarView=ImmortalStarView,window.ImmortalArtData=ImmortalArtData,window.ImmortalArtShowData=ImmortalArtShowData,window.ImmortalBSAData=ImmortalBSAData,window.ImmortalExpData=ImmortalExpData,window.ImmortalShowData=ImmortalShowData,window.ImmortalBase=ImmortalBase,window.ImmortalSkill=ImmortalSkill,window.ImmortalAbility=ImmortalAbility,window.ImmortalData=ImmortalData,window.Jade=Jade,window.JadeBaseMain=JadeBaseMain,window.JadeDecomposeView=JadeDecomposeView,window.JadeDecomposeItem=JadeDecomposeItem,window.JadeMasterView=JadeMasterView,window.JadePolishView=JadePolishView,window.JadePolishItemIcon=JadePolishItemIcon,window.JadeProps=JadeProps,window.JadeView=JadeView,window.JadeItem=JadeItem,window.P3=P3,window.TE92=TE92,window.THH4=THH4,window.THH5=THH5,window.KefuView=KefuView,window.KefuData=KefuData,window.L4=L4,window.L11=L11,window.G17=G17,window.B12=B12,window.B6=B6,window.C2=C2,window.D1=D1,window.E6=E6,window.TD43=TD43,window.TG20=TG20,window.TG21=TG21,window.TG22=TG22,window.BlessRecordVo=BlessRecordVo,window.LegionApply=LegionApply,window.LegionApplyVo=LegionApplyVo,window.LegionBossData=LegionBossData,window.LegionData=LegionData,window.LegionDragonTeam=LegionDragonTeam,window.LegionListData=LegionListData,window.LegionMember=LegionMember,window.LegionMemberVo=LegionMemberVo,window.LegionRecordVo=LegionRecordVo,window.LegionTeamMemberVo=LegionTeamMemberVo,window.LegionTeamVo=LegionTeamVo,window.LegionVo=LegionVo,window.ItemLegionActAward=ItemLegionActAward,window.ItemLegionApply=ItemLegionApply,window.ItemLegionBless=ItemLegionBless,window.ItemLegionBlessBox=ItemLegionBlessBox,window.ItemLegionBossRank=ItemLegionBossRank,window.ItemLegionCampExchange=ItemLegionCampExchange,window.ItemLegionChooseNotice=ItemLegionChooseNotice,window.ItemLegionDayReward=ItemLegionDayReward,window.ItemLegionDonation=ItemLegionDonation,window.ItemLegionDragonTeam=ItemLegionDragonTeam,window.ItemLegionFuben=ItemLegionFuben,window.ItemLegionList=ItemLegionList,window.ItemLegionMember=ItemLegionMember,window.ItemLegionRecord=ItemLegionRecord,window.ItemLegionSystem=ItemLegionSystem,window.ItemLegionTask=ItemLegionTask,window.LegionActAwardView=LegionActAwardView,window.LegionActiveMainView=LegionActiveMainView,window.LegionActiveView=LegionActiveView,window.LegionApplyView=LegionApplyView,window.LegionBlessRewardView=LegionBlessRewardView,window.LegionBlessView=LegionBlessView,window.LegionBossCampUiView=LegionBossCampUiView,window.LegionBossDropView=LegionBossDropView,window.LegionBossLegRankView=LegionBossLegRankView,window.LegionBossMemRankView=LegionBossMemRankView,window.LegionBossOpenBoxView=LegionBossOpenBoxView,window.LegionBossReviveView=LegionBossReviveView,window.LegionBossView=LegionBossView,window.LegionCampBuyView=LegionCampBuyView,window.LegionCampCallView=LegionCampCallView,window.LegionCampMining=LegionCampMining,window.LegionCampTaskResetView=LegionCampTaskResetView,window.LegionCampUIView=LegionCampUIView,window.LegionChooseNoticeView=LegionChooseNoticeView,window.LegionCreateView=LegionCreateView,window.LegionDayRewardView=LegionDayRewardView,window.LegionDonationView=LegionDonationView,window.LegionFubenView=LegionFubenView,window.LegionHallView=LegionHallView,window.LegionIcon=LegionIcon,window.LegionInvadeView=LegionInvadeView,window.LegionListBase=LegionListBase,window.LegionListView=LegionListView,window.LegionMainVlew=LegionMainVlew,window.LegionMemberView=LegionMemberView,window.LegionNoticeView=LegionNoticeView,window.LegionRecordView=LegionRecordView,window.LegionRenameView=LegionRenameView,window.LegionSkillView=LegionSkillView,window.Library=Library,window.LibraryBossInfoItemView=LibraryBossInfoItemView,window.LibraryTeamItemView=LibraryTeamItemView,window.LibraryTowerInfoView=LibraryTowerInfoView,window.LibraryTowerItemView=LibraryTowerItemView,window.LibraryView=LibraryView,window.TG72=TG72,window.O17=O17,window.TE93=TE93,window.THH6=THH6,window.THH7=THH7,window.THH8=THH8,window.MailView=MailView,window.ItemMail=ItemMail,window.MailDetail=MailDetail,window.MailData=MailData,window.I7=I7,window.I9=I9,window.TC27=TC27,window.TF45=TF45,window.TF46=TF46,window.TF83=TF83,window.MarriageAskView=MarriageAskView,window.MarriageBridePriceView=MarriageBridePriceView,window.MarriageCongraView=MarriageCongraView,window.MarriageFarmTileView=MarriageFarmTileView,window.MarriageFarmTipsView=MarriageFarmTipsView,window.MarriageFarmView=MarriageFarmView,window.MarriageFriendItem=MarriageFriendItem,window.MarriageFriendsView=MarriageFriendsView,window.MarriageHappinessItemView=MarriageHappinessItemView,window.MarriageHappinessView=MarriageHappinessView,window.MarriageHouseInfoView=MarriageHouseInfoView,window.MarriageHouseItem=MarriageHouseItem,window.MarriageHouseView=MarriageHouseView,window.MarriageMainView=MarriageMainView,window.MarriageNoticeView=MarriageNoticeView,window.MarriagePriceItem=MarriagePriceItem,window.MarriageSelectView=MarriageSelectView,window.MarriageExpVo=MarriageExpVo,window.MarriageFereVo=MarriageFereVo,window.MarriageHouseVo=MarriageHouseVo,window.MarriageProposalVo=MarriageProposalVo,window.MarriageTileVo=MarriageTileVo,window.L8=L8,window.M1=M1,window.TD44=TD44,window.TG23=TG23,window.TG24=TG24,window.TG73=TG73,window.MasterApprenticeItem=MasterApprenticeItem,window.MasterApprenticeView=MasterApprenticeView,window.MasterAsFinishItem=MasterAsFinishItem,window.MasterAwardItem=MasterAwardItem,window.MasterFinishItem=MasterFinishItem,window.MasterGetItem=MasterGetItem,window.MasterGetView=MasterGetView,window.MasteringInviteItem=MasteringInviteItem,window.MasterInviteView=MasterInviteView,window.MasterMainView=MasterMainView,window.MasterMyMasterView=MasterMyMasterView,window.MasterOnlineRewardItem2=MasterOnlineRewardItem2,window.MasterTaskItem=MasterTaskItem,window.MasterTop=MasterTop,window.InvitationInfoVo=InvitationInfoVo,window.MasterAsTaskVo=MasterAsTaskVo,window.MasterOnlineVo=MasterOnlineVo,window.MasterTaskVo=MasterTaskVo,window.D5=D5,window.D6=D6,window.A16=A16,window.TA72=TA72,window.TC79=TC79,window.TC80=TC80,window.TC81=TC81,window.MilitaryFlagConfig=MilitaryFlagConfig,window.MilitaryFlagUtils=MilitaryFlagUtils,window.MilitaryBookData=MilitaryBookData,window.ItemMilitaryBook=ItemMilitaryBook,window.MilitaryBookMainView=MilitaryBookMainView,window.MilitaryBookView=MilitaryBookView,window.MilitaryFlagAttrView=MilitaryFlagAttrView,window.MilitaryFlagChildView=MilitaryFlagChildView,window.MilitaryFlagConItem=MilitaryFlagConItem,window.MilitaryFlagComListItem=MilitaryFlagComListItem,window.MilitaryFlagConView=MilitaryFlagConView,window.MilitaryFlagDsView=MilitaryFlagDsView,window.MilitaryFlagExchangeView=MilitaryFlagExchangeView,window.MilitaryFlagItem=MilitaryFlagItem,window.MilitaryFlagView=MilitaryFlagView,window.TF47=TF47,window.K2=K2,window.TC82=TC82,window.TF84=TF84,window.TF85=TF85,window.MissionView=MissionView,window.MissionData=MissionData,window.MonarchTest=MonarchTest,window.MonarchLegionRankItemView=MonarchLegionRankItemView,window.MonarchRankItemView=MonarchRankItemView,window.MonarchTestItemView=MonarchTestItemView,window.MonarchAutoChallengeView=MonarchAutoChallengeView,window.MonarchCurLegionRankView=MonarchCurLegionRankView,window.MonarchInspireView=MonarchInspireView,window.MonarchNormalRewardView=MonarchNormalRewardView,window.MonarchRewardView=MonarchRewardView,window.MonarchSingleRankView=MonarchSingleRankView,window.MonarchTestMainView=MonarchTestMainView,window.MonarchTestView=MonarchTestView,window.J8=J8,window.TC28=TC28,window.TF48=TF48,window.TF49=TF49,window.MoreGameItem=MoreGameItem,window.MoreGameView=MoreGameView,window.MoreGameData=MoreGameData,window.OpeningRewardView=OpeningRewardView,window.N12=N12,window.O14=O14,window.ItemSpecialType=ItemSpecialType,window.TE94=TE94,window.THH9=THH9,window.THH10=THH10,window.PackView=PackView,window.PackItemIcon=PackItemIcon,window.pack=pack,window.PackAttrItem=PackAttrItem,window.PackChooseitem=PackChooseitem,window.propDataItem=propDataItem,window.PackChooseUseView=PackChooseUseView,window.PackLack=PackLack,window.PackMainView=PackMainView,window.TC83=TC83,window.Props=Props,window.item=item,window.L9=L9,window.M5=M5,window.TD45=TD45,window.TG25=TG25,window.TG26=TG26,window.TG74=TG74,window.PelletDanItem=PelletDanItem,window.PelletStarItem=PelletStarItem,window.PelletStarAttrView=PelletStarAttrView,window.PelletStarGazeView=PelletStarGazeView,window.PelletZhuPosition=PelletZhuPosition,window.PelletView=PelletView,window.pellet=pellet,window.Practice=Practice,window.ItemPracticeIcon=ItemPracticeIcon,window.PracticeAttr=PracticeAttr,window.PracticeTopIcon=PracticeTopIcon,window.PracticeView=PracticeView,window.TF50=TF50,window.K7=K7,window.TC84=TC84,window.PreviewInfoView=PreviewInfoView,window.TF86=TF86,window.TF87=TF87,window.PreviewView=PreviewView,window.TG75=TG75,window.O18=O18,window.TE95=TE95,window.RankMainView=RankMainView,window.RankType=RankType,window.THH11=THH11,window.THH12=THH12,window.ItemRankTabView=ItemRankTabView;window.ItemRankView=ItemRankView,window.RankData=RankData,window.THH13=THH13,window.RedMakeup=RedMakeup,window.RedMakeupBagView=RedMakeupBagView,window.RedMakeupDecomposeItem=RedMakeupDecomposeItem,window.RedMakeupEquipDetails=RedMakeupEquipDetails,window.RedMakeupEquipItem=RedMakeupEquipItem,window.RedMakeupMainView=RedMakeupMainView,window.RedMakeupMasterView=RedMakeupMasterView,window.RedMakeupRefine=RedMakeupRefine,window.RedMakeupStarAnimation=RedMakeupStarAnimation,window.RedMakeupUpgrade=RedMakeupUpgrade,window.RedMakeupUpstar=RedMakeupUpstar,window.Reincarnate=Reincarnate,window.ReincarnateBaseMain=ReincarnateBaseMain,window.ReincarnateEquipMasterView=ReincarnateEquipMasterView,window.ReincarnateEquipView=ReincarnateEquipView,window.ReincarnateExchangeView=ReincarnateExchangeView,window.ReincarnateSkillItemView=ReincarnateSkillItemView,window.ReincarnateSkillView=ReincarnateSkillView,window.ReincarnateSoulView=ReincarnateSoulView,window.ReincarnateView=ReincarnateView,window.L3=L3,window.M4=M4,window.TD46=TD46,window.TG27=TG27,window.TG28=TG28,window.TG76=TG76,window.RevealEverView=RevealEverView,window.RevealPointView=RevealPointView,window.RevealConfVo=RevealConfVo,window.RevealVo=RevealVo,window.N15=N15,window._a=_a,window.O11=O11,window.TE96=TE96,window.THH14=THH14,window.I18=I18,window.THH15=THH15,window.THH27=THH27,window.ShopBaseItemNewRender=ShopBaseItemNewRender,window.ShopActivityView=ShopActivityView,window.ShopBuyEquipView=ShopBuyEquipView,window.ShopBuyView=ShopBuyView,window.ShopClassupEquipView=ShopClassupEquipView,window.ShopEquipView=ShopEquipView,window.ShopFuliView=ShopFuliView,window.ShopLimitView=ShopLimitView,window.ShopMainNewView=ShopMainNewView,window.ShopNormalView=ShopNormalView,window.shop=shop,window.TG29=TG29,window.O1=O1,window.SmallTipView=SmallTipView,window.L14=L14,window.TD47=TD47,window.SocialMainView=SocialMainView,window.TG30=TG30,window.TG31=TG31,window.DeleteItem=DeleteItem,window.FriendDetailView=FriendDetailView,window.ItemBlackView=ItemBlackView,window.ItemRecommend=ItemRecommend,window.ItemSocialFan=ItemSocialFan,window.ItemSocialFollow=ItemSocialFollow,window.ItemSocialTab=ItemSocialTab,window.SocialBlackView=SocialBlackView,window.SocialFanView=SocialFanView,window.SocialFollowView=SocialFollowView,window.SocialRecommendView=SocialRecommendView,window.SocialView=SocialView,window.TD48=TD48,window.G6=G6,window.TB35=TB35,window.TE7=TE7,window.TE8=TE8,window.TE97=TE97,window.SCAwardPushItem=SCAwardPushItem,window.SCAwardRankItem=SCAwardRankItem,window.SCAwardShopHItem=SCAwardShopHItem,window.SCAwardShopVItem=SCAwardShopVItem,window.SCIconNItem=SCIconNItem,window.SCModelItem=SCModelItem,window.SouthCAwardBuyView=SouthCAwardBuyView,window.SouthCAwardMainView=SouthCAwardMainView,window.SouthCAwardPushView=SouthCAwardPushView,window.SouthCAwardRankView=SouthCAwardRankView,window.SouthCAwardShopView=SouthCAwardShopView,window.SouthCAwardShowView=SouthCAwardShowView,window.SouthChinaView=SouthChinaView,window.SouthChinaData=SouthChinaData,window.TE98=TE98,window.J7=J7,window.TC29=TC29,window.TF51=TF51,window.TF52=TF52,window.TF88=TF88,window.HuanLingItem=HuanLingItem,window.LingYunItem=LingYunItem,window.ZhenTuYuan=ZhenTuYuan,window.HuanLingMainView=HuanLingMainView,window.HuanLingScoreAttrView=HuanLingScoreAttrView,window.HuanLingView=HuanLingView,window.HuanLingZhenTuView=HuanLingZhenTuView,window.JuLingMasterView=JuLingMasterView,window.JuLingView=JuLingView,window.LingYunView=LingYunView,window.Spectral=Spectral,window.O2=O2,window.TE99=TE99,window.THH16=THH16,window.THH17=THH17,window.THH28=THH28,window.SuitIconRender=SuitIconRender,window.SuitHomeView=SuitHomeView,window.SurvivalConfig=SurvivalConfig,window.SurvivalConst=SurvivalConst,window.SurvivalController=SurvivalController,window.SurvivalModel=SurvivalModel,window.SurvivalProxy=SurvivalProxy,window.SurvivalUtil=SurvivalUtil,window.SurvivalCeilAward=SurvivalCeilAward,window.SurvivalCeilIcon=SurvivalCeilIcon,window.SurvivalDrop1=SurvivalDrop1,window.SurvivalDrop2=SurvivalDrop2,window.SurvivalFightAddRender=SurvivalFightAddRender,window.SurvivalRankRender=SurvivalRankRender,window.SurvivalStateIcon=SurvivalStateIcon,window.SurvivalChangeView=SurvivalChangeView,window.SurvivalLoadBoxView=SurvivalLoadBoxView,window.SurvivalMapView=SurvivalMapView,window.SurvivalMonsterView=SurvivalMonsterView,window.SurvivalRankView=SurvivalRankView,window.SurvivalTeamStateView=SurvivalTeamStateView,window.SurvivalUIView=SurvivalUIView,window.SurvivalZhuFuView=SurvivalZhuFuView,window.DropCellVo=DropCellVo,window.DropItem=DropItem,window.SurvivalRankEntryVo=SurvivalRankEntryVo,window.SurvivalUnitVo=SurvivalUnitVo,window.L5=L5,window.L19=L19,window.TD49=TD49,window.TacticMainView=TacticMainView,window.TG32=TG32,window.TG33=TG33,window.TacticBookItem=TacticBookItem,window.TacticDataItem=TacticDataItem,window.TacticBookView=TacticBookView,window.TacticChiefView=TacticChiefView,window.TacticDatailsView=TacticDatailsView,window.TacticDigView=TacticDigView,window.TacticDigItem=TacticDigItem,window.TacticRealeView=TacticRealeView,window.TacticRefineMainView=TacticRefineMainView,window.TacticRefineView=TacticRefineView,window.TacticResolveView=TacticResolveView,window.TacticResolevItem=TacticResolevItem,window.TacticUpgradeView=TacticUpgradeView,window.tactic=tactic,window.N19=N19,window.O13=O13,window.TF1=TF1,window.TeamMainView=TeamMainView,window.THH18=THH18,window.THH19=THH19,window.TeamBossDataItem=TeamBossDataItem,window.TeamFormDataItem=TeamFormDataItem,window.TeamView=TeamView,window.team=team,window.UltimateBattle=UltimateBattle,window.UltimateBattleHeroIconItemView=UltimateBattleHeroIconItemView,window.UltimateBattleLineupInspireItemView=UltimateBattleLineupInspireItemView,window.UltimateBattleLineupItemView=UltimateBattleLineupItemView,window.UltimateBattlePreliminaryItemView=UltimateBattlePreliminaryItemView,window.UltimateBattleRewardItemView=UltimateBattleRewardItemView,window.UltimateBattleShopHonorItemView=UltimateBattleShopHonorItemView,window.UltimateBattleShopItemView=UltimateBattleShopItemView,window.UltimateBattleShopPlainItemView=UltimateBattleShopPlainItemView,window.UltimateBattleBetsRewardView=UltimateBattleBetsRewardView,window.UltimateBattleLineupView=UltimateBattleLineupView,window.UltimateBattleReportItemView=UltimateBattleReportItemView,window.UltimateBattleReportView=UltimateBattleReportView,window.UltimateBattleRewardView=UltimateBattleRewardView,window.UltimateBattleSelectHeroView=UltimateBattleSelectHeroView,window.UltimateBattleShopBuyView=UltimateBattleShopBuyView,window.UltimateBattleShopView=UltimateBattleShopView,window.UltimateBattleSignView=UltimateBattleSignView,window.UltimateBattleStateLastView=UltimateBattleStateLastView,window.UltimateBattleStatePreliminaryBattleItemView=UltimateBattleStatePreliminaryBattleItemView,window.UltimateBattleStatePreliminaryRecordItemView=UltimateBattleStatePreliminaryRecordItemView,window.UltimateBattleStatePreliminaryView=UltimateBattleStatePreliminaryView,window.UltimateBattleStateSignView=UltimateBattleStateSignView,window.UltimateBattleView=UltimateBattleView,window.UltimateBattleWorshipView=UltimateBattleWorshipView,window.THH20=THH20,window.P8=P8,window.VipController=VipController,window.THH29=THH29,window.THH34=THH34,window.RechargeRender=RechargeRender,window.VipEquipItem=VipEquipItem,window.VipGiftItemView=VipGiftItemView,window.JumpRechargeView=JumpRechargeView,window.VipGiftBuyTipsView=VipGiftBuyTipsView,window.VipGiftView=VipGiftView,window.VipInfoView=VipInfoView,window.VipRechargeView=VipRechargeView,window.WarOfAttrition=WarOfAttrition,window.WarOfAttritionBattleView=WarOfAttritionBattleView,window.WarOfAttritionEnrollView=WarOfAttritionEnrollView,window.WarOfAttritionMembersItemView=WarOfAttritionMembersItemView,window.WarOfAttritionMembersView=WarOfAttritionMembersView,window.WarOfAttritionRecordView=WarOfAttritionRecordView,window.WarOfAttritionView=WarOfAttritionView,window.L2=L2,window.L18=L18,window.TD50=TD50,window.TG34=TG34,window.TG35=TG35,window.WeaponView=WeaponView,window.WeaponSkillDataItem=WeaponSkillDataItem,window.WeaponSkinDataItem=WeaponSkinDataItem,window.WeaponDan=WeaponDan,window.WeaponDerma=WeaponDerma,window.WeaponEverAdd=WeaponEverAdd,window.WeaponSkill=WeaponSkill,window.weapon=weapon,window.TC85=TC85,window.TF89=TF89,window.ItemExtremeCard=ItemExtremeCard,window.ItemGiftPack=ItemGiftPack,window.ItemMonthCard=ItemMonthCard,window.ItemWelfareAwardView=ItemWelfareAwardView,window.ItemWelfareRankRoleView=ItemWelfareRankRoleView,window.ItemWelfareRender=ItemWelfareRender,window.VipPrivilegeGiftPackView=VipPrivilegeGiftPackView,window.WelfareActiveCordView=WelfareActiveCordView,window.WelfareBaseView=WelfareBaseView,window.WelfareIconView=WelfareIconView,window.WelfareLevelGiftView=WelfareLevelGiftView,window.WelfareLineNoticeView=WelfareLineNoticeView,window.WelfareMonthCardView=WelfareMonthCardView,window.WelfareNoticeDetailView=WelfareNoticeDetailView,window.WelfareNoticeView=WelfareNoticeView,window.WelfareSignView=WelfareSignView,window.WelfareThreeKdView=WelfareThreeKdView,window.ExtremeCardVo=ExtremeCardVo,window.J16=J16,window.J19=J19,window.TF90=TF90,window.N13=N13,window.O10=O10,window.TF2=TF2,window.WingLangs=WingLangs,window.THH21=THH21,window.THH22=THH22,window.THH30=THH30,window.WingView=WingView,window.AttrEquipDataItem=AttrEquipDataItem,window.EverAddListItem=EverAddListItem,window.WingSkillDataItem=WingSkillDataItem,window.WingSkinDataItem=WingSkinDataItem,window.WingDan=WingDan,window.WingDanHint=WingDanHint,window.WingDerma=WingDerma,window.WingEverAdd=WingEverAdd,window.WingHelp=WingHelp,window.WingMainView=WingMainView,window.WingSkill=WingSkill,window.wing=wing,window.M11=M11,window.N2=N2,window.TE9=TE9,window.TE10=TE10,window.TG77=TG77,window.TG78=TG78,window.THH23=THH23,window.ForwardReward=ForwardReward,window.GatSoulItem=GatSoulItem,window.GodSoulItem=GodSoulItem,window.SkillDownGp=SkillDownGp,window.SkillGp=SkillGp,window.SkillUpGp=SkillUpGp,window.WomenHead=WomenHead,window.WomenDescView=WomenDescView,window.WomenFavorableIconList=WomenFavorableIconList,window.WomenFavorableView=WomenFavorableView,window.WomenFavorAttrView=WomenFavorAttrView,window.WomenForwardRewardView=WomenForwardRewardView,window.WomenGatSoulView=WomenGatSoulView,window.WomenGatSShowView=WomenGatSShowView,window.WomenGeneralSealScoreView=WomenGeneralSealScoreView,window.WomenGeneralSealView=WomenGeneralSealView,window.WomenGodSoulView=WomenGodSoulView,window.WomenGodSShowView=WomenGodSShowView,window.WomenMainOldView=WomenMainOldView,window.WomenMainView=WomenMainView,window.WomenMedicineView=WomenMedicineView,window.WomenMindMainView=WomenMindMainView,window.WomenPerAttrView=WomenPerAttrView,window.WomenScoreDetailView=WomenScoreDetailView,window.WomenShapeView=WomenShapeView,window.WomenSkillLearnView=WomenSkillLearnView,window.WomenSkillView=WomenSkillView,window.WomenStumbleView=WomenStumbleView,window.WomenTacticalScoreView=WomenTacticalScoreView,window.WomenTacticalView=WomenTacticalView,window.WomenUpFightView=WomenUpFightView,window.WomenUpStarView=WomenUpStarView,window.WomenView=WomenView,window.women=women,window.TA73=TA73,window.I13=I13,window.TF53=TF53,window.TF54=TF54,window.WechatAttentionView=WechatAttentionView,window.WechatFollowView=WechatFollowView,window.J17=J17,window.K1=K1,window.TC86=TC86,window.TF91=TF91,window.TF92=TF92,window.WxFriendItem=WxFriendItem,window.WxShareItem=WxShareItem,window.WxTabView=WxTabView,window.WxAcsShareView=WxAcsShareView,window.WxDayShareView=WxDayShareView,window.WxFirstShareView=WxFirstShareView,window.WxFriendView=WxFriendView,window.WxHongBaoView=WxHongBaoView,window.WxLevelView=WxLevelView,window.WxShareMainView=WxShareMainView,window.K4=K4,window.TC87=TC87,window.TF93=TF93,window.TF94=TF94,window.QQCollectView=QQCollectView,window.QQMemberGiftPackView=QQMemberGiftPackView,window.QQMigrateView=QQMigrateView,window.QQTjxcxView=QQTjxcxView,window.WxTjxcxView=WxTjxcxView;